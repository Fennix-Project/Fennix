<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Fennix: Userspace/apps/base/busybox/util-linux/volume_id/volume_id_internal.h File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="../../custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Fennix
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
   <div id="projectbrief">Opeating System from scratch made in C and C++</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('dd/dd1/volume__id__internal_8h.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">volume_id_internal.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="../../d7/dd7/libbb_8h_source.html">libbb.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../de/d23/volume__id_8h_source.html">volume_id.h</a>&quot;</code><br />
</div>
<p><a href="../../dd/dd1/volume__id__internal_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:db/dc4/structvolume__id"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a></td></tr>
<tr class="separator:db/dc4/structvolume__id"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:aadf47595f4fdb31176441bb4415eecac"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd1/volume__id__internal_8h.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(...)&#160;&#160;&#160;((void)0)</td></tr>
<tr class="separator:aadf47595f4fdb31176441bb4415eecac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0a74ee325ba0f1f158bbb58ac1fee2f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd1/volume__id__internal_8h.html#ae0a74ee325ba0f1f158bbb58ac1fee2f">VOLUME_ID_VERSION</a>&#160;&#160;&#160;48</td></tr>
<tr class="separator:ae0a74ee325ba0f1f158bbb58ac1fee2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70366446adc457ccbb282d3871e6ff77"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd1/volume__id__internal_8h.html#a70366446adc457ccbb282d3871e6ff77">VOLUME_ID_LABEL_SIZE</a>&#160;&#160;&#160;64</td></tr>
<tr class="separator:a70366446adc457ccbb282d3871e6ff77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36b3015551826f6436e99a24610b2257"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd1/volume__id__internal_8h.html#a36b3015551826f6436e99a24610b2257">VOLUME_ID_UUID_SIZE</a>&#160;&#160;&#160;36</td></tr>
<tr class="separator:a36b3015551826f6436e99a24610b2257"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9786ea6790d2443e3a8d2fb90d5c4185"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd1/volume__id__internal_8h.html#a9786ea6790d2443e3a8d2fb90d5c4185">VOLUME_ID_FORMAT_SIZE</a>&#160;&#160;&#160;32</td></tr>
<tr class="separator:a9786ea6790d2443e3a8d2fb90d5c4185"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27cac1b52877b057898f0bb6ac8f01a3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd1/volume__id__internal_8h.html#a27cac1b52877b057898f0bb6ac8f01a3">VOLUME_ID_PARTITIONS_MAX</a>&#160;&#160;&#160;256</td></tr>
<tr class="separator:a27cac1b52877b057898f0bb6ac8f01a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab8b8df7b4a8046c16828b807c000cc1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd1/volume__id__internal_8h.html#aab8b8df7b4a8046c16828b807c000cc1">SB_BUFFER_SIZE</a>&#160;&#160;&#160;0x11000</td></tr>
<tr class="separator:aab8b8df7b4a8046c16828b807c000cc1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af949d412007c96ffb0c083f3fbfdcfb9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd1/volume__id__internal_8h.html#af949d412007c96ffb0c083f3fbfdcfb9">SEEK_BUFFER_SIZE</a>&#160;&#160;&#160;0x10000</td></tr>
<tr class="separator:af949d412007c96ffb0c083f3fbfdcfb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65e9510f535c1ee2f826d447471289fa"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd1/volume__id__internal_8h.html#a65e9510f535c1ee2f826d447471289fa">le16_to_cpu</a>(<a class="el" href="../../dc/da2/musl_2src_2prng_2random_8c.html#aeb26462df30f47f6fd73ee802457812b">x</a>)&#160;&#160;&#160;(<a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#a5debae8b2a1ec20a6694c0c443ee399e">uint16_t</a>)(<a class="el" href="../../db/dc9/byteswap_8h.html#ad409605fabe125b1d222acb94a3f480f">bswap_16</a>(<a class="el" href="../../dc/da2/musl_2src_2prng_2random_8c.html#aeb26462df30f47f6fd73ee802457812b">x</a>))</td></tr>
<tr class="separator:a65e9510f535c1ee2f826d447471289fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48f527b00bc1d5e46366d720280a1039"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd1/volume__id__internal_8h.html#a48f527b00bc1d5e46366d720280a1039">le32_to_cpu</a>(<a class="el" href="../../dc/da2/musl_2src_2prng_2random_8c.html#aeb26462df30f47f6fd73ee802457812b">x</a>)&#160;&#160;&#160;(<a class="el" href="../../dd/ddd/arithmetic__operations_8c.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>)(<a class="el" href="../../db/dc9/byteswap_8h.html#a5bcbf8b6ee067af4c2fd60ef3bdb39d2">bswap_32</a>(<a class="el" href="../../dc/da2/musl_2src_2prng_2random_8c.html#aeb26462df30f47f6fd73ee802457812b">x</a>))</td></tr>
<tr class="separator:a48f527b00bc1d5e46366d720280a1039"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0987d88a4fac98f0b1d6355ef7aa77e2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd1/volume__id__internal_8h.html#a0987d88a4fac98f0b1d6355ef7aa77e2">le64_to_cpu</a>(<a class="el" href="../../dc/da2/musl_2src_2prng_2random_8c.html#aeb26462df30f47f6fd73ee802457812b">x</a>)&#160;&#160;&#160;(<a class="el" href="../../dd/ddd/arithmetic__operations_8c.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a>)(<a class="el" href="../../d3/d32/bb__bswap__64_8c.html#a2da9518e3b86c6d8fa60ac0df72e39b7">bb_bswap_64</a>(<a class="el" href="../../dc/da2/musl_2src_2prng_2random_8c.html#aeb26462df30f47f6fd73ee802457812b">x</a>))</td></tr>
<tr class="separator:a0987d88a4fac98f0b1d6355ef7aa77e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48f33ad7b3de0010e5c802ced48f8a7b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd1/volume__id__internal_8h.html#a48f33ad7b3de0010e5c802ced48f8a7b">be16_to_cpu</a>(<a class="el" href="../../dc/da2/musl_2src_2prng_2random_8c.html#aeb26462df30f47f6fd73ee802457812b">x</a>)&#160;&#160;&#160;(<a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#a5debae8b2a1ec20a6694c0c443ee399e">uint16_t</a>)(<a class="el" href="../../dc/da2/musl_2src_2prng_2random_8c.html#aeb26462df30f47f6fd73ee802457812b">x</a>)</td></tr>
<tr class="separator:a48f33ad7b3de0010e5c802ced48f8a7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a650ecb20996a13e0c0bc530ba83fe5dc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd1/volume__id__internal_8h.html#a650ecb20996a13e0c0bc530ba83fe5dc">be32_to_cpu</a>(<a class="el" href="../../dc/da2/musl_2src_2prng_2random_8c.html#aeb26462df30f47f6fd73ee802457812b">x</a>)&#160;&#160;&#160;(<a class="el" href="../../dd/ddd/arithmetic__operations_8c.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>)(<a class="el" href="../../dc/da2/musl_2src_2prng_2random_8c.html#aeb26462df30f47f6fd73ee802457812b">x</a>)</td></tr>
<tr class="separator:a650ecb20996a13e0c0bc530ba83fe5dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeda3065f344779edb9023e22d84d5f92"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd1/volume__id__internal_8h.html#aeda3065f344779edb9023e22d84d5f92">cpu_to_le16</a>(<a class="el" href="../../dc/da2/musl_2src_2prng_2random_8c.html#aeb26462df30f47f6fd73ee802457812b">x</a>)&#160;&#160;&#160;(<a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#a5debae8b2a1ec20a6694c0c443ee399e">uint16_t</a>)(<a class="el" href="../../db/dc9/byteswap_8h.html#ad409605fabe125b1d222acb94a3f480f">bswap_16</a>(<a class="el" href="../../dc/da2/musl_2src_2prng_2random_8c.html#aeb26462df30f47f6fd73ee802457812b">x</a>))</td></tr>
<tr class="separator:aeda3065f344779edb9023e22d84d5f92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d5ae0c36d519a1b0a789db69a598f28"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd1/volume__id__internal_8h.html#a1d5ae0c36d519a1b0a789db69a598f28">cpu_to_le32</a>(<a class="el" href="../../dc/da2/musl_2src_2prng_2random_8c.html#aeb26462df30f47f6fd73ee802457812b">x</a>)&#160;&#160;&#160;(<a class="el" href="../../dd/ddd/arithmetic__operations_8c.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>)(<a class="el" href="../../db/dc9/byteswap_8h.html#a5bcbf8b6ee067af4c2fd60ef3bdb39d2">bswap_32</a>(<a class="el" href="../../dc/da2/musl_2src_2prng_2random_8c.html#aeb26462df30f47f6fd73ee802457812b">x</a>))</td></tr>
<tr class="separator:a1d5ae0c36d519a1b0a789db69a598f28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd3274bb70aea7cf9be403940e001cc7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd1/volume__id__internal_8h.html#afd3274bb70aea7cf9be403940e001cc7">cpu_to_be32</a>(<a class="el" href="../../dc/da2/musl_2src_2prng_2random_8c.html#aeb26462df30f47f6fd73ee802457812b">x</a>)&#160;&#160;&#160;(<a class="el" href="../../dd/ddd/arithmetic__operations_8c.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>)(<a class="el" href="../../dc/da2/musl_2src_2prng_2random_8c.html#aeb26462df30f47f6fd73ee802457812b">x</a>)</td></tr>
<tr class="separator:afd3274bb70aea7cf9be403940e001cc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a089980519c04e907da91d8401078532d"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd1/volume__id__internal_8h.html#a089980519c04e907da91d8401078532d">volume_id_usage</a> { <br />
&#160;&#160;<a class="el" href="../../dd/dd1/volume__id__internal_8h.html#a089980519c04e907da91d8401078532dadc28ffe6110f5baafcb99a64ee4d111c">VOLUME_ID_UNUSED</a>
, <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#a089980519c04e907da91d8401078532da58d13daa9d851ddf6264dc920d986f50">VOLUME_ID_UNPROBED</a>
, <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#a089980519c04e907da91d8401078532daae5336853af2e42fbab657e33c00fe33">VOLUME_ID_OTHER</a>
, <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#a089980519c04e907da91d8401078532daa4dbb8b8bb65c601c86b81e5389795ff">VOLUME_ID_FILESYSTEM</a>
, <br />
&#160;&#160;<a class="el" href="../../dd/dd1/volume__id__internal_8h.html#a089980519c04e907da91d8401078532da377aa3dac07a35eddd476e2cd3431993">VOLUME_ID_PARTITIONTABLE</a>
, <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#a089980519c04e907da91d8401078532dacd5f86c590048b6919f4577fa6a5c5e7">VOLUME_ID_RAID</a>
, <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#a089980519c04e907da91d8401078532dad11b0b95ef7c10d450908ea08ea63fd1">VOLUME_ID_DISKLABEL</a>
, <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#a089980519c04e907da91d8401078532dac43a4ab0cda19eaa22bb0407183218a2">VOLUME_ID_CRYPTO</a>
<br />
 }</td></tr>
<tr class="separator:a089980519c04e907da91d8401078532d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72f809f0cc1f63120f83a9fe78f026f1"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd1/volume__id__internal_8h.html#a72f809f0cc1f63120f83a9fe78f026f1">uuid_format</a> { <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#a72f809f0cc1f63120f83a9fe78f026f1a979167e82bd9d4c12bd02a8bd2d35a44">UUID_DOS</a> = 0
, <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#a72f809f0cc1f63120f83a9fe78f026f1a01551a287f0e60de3e4b01a07bddf694">UUID_NTFS</a> = 1
, <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#a72f809f0cc1f63120f83a9fe78f026f1a4bd0e1bee402481edbff5b037158c245">UUID_DCE</a> = 2
, <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#a72f809f0cc1f63120f83a9fe78f026f1afeab423d9f83201f36fdf94d3fbc1217">UUID_DCE_STRING</a> = 3
 }</td></tr>
<tr class="separator:a72f809f0cc1f63120f83a9fe78f026f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aceb52d5e58265d474290d1e17bcf1716"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd1/volume__id__internal_8h.html#aceb52d5e58265d474290d1e17bcf1716">endian</a> { <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#aceb52d5e58265d474290d1e17bcf1716a662ed4b51721a45f07d645d4ca099a61">LE</a> = 0
, <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#aceb52d5e58265d474290d1e17bcf1716ac115336a31f6a75e7dd426dfd459fb54">BE</a> = 1
 }</td></tr>
<tr class="separator:aceb52d5e58265d474290d1e17bcf1716"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a74f41850e051f7f8910efa899e42bbf0"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *<a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd1/volume__id__internal_8h.html#a74f41850e051f7f8910efa899e42bbf0">volume_id_open_node</a> (int <a class="el" href="../../d3/d46/textbox_8c.html#a6f8059414f0228f0256115e024eeed4b">fd</a>)</td></tr>
<tr class="separator:a74f41850e051f7f8910efa899e42bbf0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad460bada6b957377271e27729e766a17"><td class="memItemLeft" align="right" valign="top">int <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd1/volume__id__internal_8h.html#ad460bada6b957377271e27729e766a17">volume_id_probe_all</a> (struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *id, <a class="el" href="../../dd/ddd/arithmetic__operations_8c.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a> <a class="el" href="../../d7/d06/getpwent_8c.html#a854352f53b148adc24983a58a1866d66">size</a>)</td></tr>
<tr class="separator:ad460bada6b957377271e27729e766a17"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a709a3a7186f2e6d9680a9d830c8e7e01"><td class="memItemLeft" align="right" valign="top">void <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd1/volume__id__internal_8h.html#a709a3a7186f2e6d9680a9d830c8e7e01">free_volume_id</a> (struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *id)</td></tr>
<tr class="separator:a709a3a7186f2e6d9680a9d830c8e7e01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e8f2e3c79aedadd5ee90b7b970378a5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd1/volume__id__internal_8h.html#a6e8f2e3c79aedadd5ee90b7b970378a5">volume_id_set_unicode16</a> (char *<a class="el" href="../../de/d72/hash-string_8h.html#a537825d894fc8d6a786f28a99ce8af2c">str</a>, <a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a> <a class="el" href="../../d1/dc0/multiboot_8h.html#a6de3a6d27a7e07942958b912d39792e6">len</a>, const <a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#a3cb4a16b0e8d6af0af86d4fd6ba5fd9d">uint8_t</a> *<a class="el" href="../../db/d16/stdout_8c.html#ae55dcb4c1b5d453b604861dc603ee9bf">buf</a>, enum <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#aceb52d5e58265d474290d1e17bcf1716">endian</a> endianess, <a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a> <a class="el" href="../../d8/d48/at__quick__exit_8c.html#ad43c3812e6d13e0518d9f8b8f463ffcf">count</a>)</td></tr>
<tr class="separator:a6e8f2e3c79aedadd5ee90b7b970378a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3629b5eaf1943e2f4634bd5913959b04"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd1/volume__id__internal_8h.html#a3629b5eaf1943e2f4634bd5913959b04">volume_id_set_label_string</a> (struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *id, const <a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#a3cb4a16b0e8d6af0af86d4fd6ba5fd9d">uint8_t</a> *<a class="el" href="../../db/d16/stdout_8c.html#ae55dcb4c1b5d453b604861dc603ee9bf">buf</a>, <a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a> <a class="el" href="../../d8/d48/at__quick__exit_8c.html#ad43c3812e6d13e0518d9f8b8f463ffcf">count</a>)</td></tr>
<tr class="separator:a3629b5eaf1943e2f4634bd5913959b04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a647a5f7f037d4d3506b2811021805bda"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd1/volume__id__internal_8h.html#a647a5f7f037d4d3506b2811021805bda">volume_id_set_label_unicode16</a> (struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *id, const <a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#a3cb4a16b0e8d6af0af86d4fd6ba5fd9d">uint8_t</a> *<a class="el" href="../../db/d16/stdout_8c.html#ae55dcb4c1b5d453b604861dc603ee9bf">buf</a>, enum <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#aceb52d5e58265d474290d1e17bcf1716">endian</a> endianess, <a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a> <a class="el" href="../../d8/d48/at__quick__exit_8c.html#ad43c3812e6d13e0518d9f8b8f463ffcf">count</a>)</td></tr>
<tr class="separator:a647a5f7f037d4d3506b2811021805bda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaaf5289e506677e73ce13f40c67fb188"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd1/volume__id__internal_8h.html#aaaf5289e506677e73ce13f40c67fb188">volume_id_set_uuid</a> (struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *id, const <a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#a3cb4a16b0e8d6af0af86d4fd6ba5fd9d">uint8_t</a> *<a class="el" href="../../db/d16/stdout_8c.html#ae55dcb4c1b5d453b604861dc603ee9bf">buf</a>, enum <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#a72f809f0cc1f63120f83a9fe78f026f1">uuid_format</a> <a class="el" href="../../d7/dd7/libbb_8h.html#ad09bf069f1dc789b35e313c3e2748329">format</a>)</td></tr>
<tr class="separator:aaaf5289e506677e73ce13f40c67fb188"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad52c7b05017442dbe08091a85ef92710"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd1/volume__id__internal_8h.html#ad52c7b05017442dbe08091a85ef92710">volume_id_get_buffer</a> (struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *id, <a class="el" href="../../dd/ddd/arithmetic__operations_8c.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a> <a class="el" href="../../d7/d4f/xfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a>, <a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a> <a class="el" href="../../d1/dc0/multiboot_8h.html#a6de3a6d27a7e07942958b912d39792e6">len</a>)</td></tr>
<tr class="separator:ad52c7b05017442dbe08091a85ef92710"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f15e74b7e0bd4265aa95889e44c1685"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd1/volume__id__internal_8h.html#a7f15e74b7e0bd4265aa95889e44c1685">volume_id_free_buffer</a> (struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *id)</td></tr>
<tr class="separator:a7f15e74b7e0bd4265aa95889e44c1685"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29eb29e84a6956e332ab00bbb636d100"><td class="memItemLeft" align="right" valign="top">int <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd1/volume__id__internal_8h.html#a29eb29e84a6956e332ab00bbb636d100">volume_id_probe_linux_raid</a> (struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *id, <a class="el" href="../../dd/ddd/arithmetic__operations_8c.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a> <a class="el" href="../../d7/d06/getpwent_8c.html#a854352f53b148adc24983a58a1866d66">size</a>)</td></tr>
<tr class="separator:a29eb29e84a6956e332ab00bbb636d100"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1509de34f1416386bc57c2eb54eab3de"><td class="memItemLeft" align="right" valign="top">int <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd1/volume__id__internal_8h.html#a1509de34f1416386bc57c2eb54eab3de">volume_id_probe_bcache</a> (struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *id)</td></tr>
<tr class="separator:a1509de34f1416386bc57c2eb54eab3de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ed328eeacf599ec9b8c7fe036cea6ce"><td class="memItemLeft" align="right" valign="top">int <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd1/volume__id__internal_8h.html#a1ed328eeacf599ec9b8c7fe036cea6ce">volume_id_probe_btrfs</a> (struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *id)</td></tr>
<tr class="separator:a1ed328eeacf599ec9b8c7fe036cea6ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5390f81005a1a4d39c8ef1d111906dd"><td class="memItemLeft" align="right" valign="top">int <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd1/volume__id__internal_8h.html#ad5390f81005a1a4d39c8ef1d111906dd">volume_id_probe_cramfs</a> (struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *id)</td></tr>
<tr class="separator:ad5390f81005a1a4d39c8ef1d111906dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5addea4fc21460eaedef73fa2c13137b"><td class="memItemLeft" align="right" valign="top">int <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd1/volume__id__internal_8h.html#a5addea4fc21460eaedef73fa2c13137b">volume_id_probe_ext</a> (struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *id)</td></tr>
<tr class="separator:a5addea4fc21460eaedef73fa2c13137b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b13c938a07f8f0836abd8a7e1e27fd5"><td class="memItemLeft" align="right" valign="top">int <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd1/volume__id__internal_8h.html#a3b13c938a07f8f0836abd8a7e1e27fd5">volume_id_probe_vfat</a> (struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *id)</td></tr>
<tr class="separator:a3b13c938a07f8f0836abd8a7e1e27fd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8df0f77a09c66fd2cfca6fcf0c1bb3db"><td class="memItemLeft" align="right" valign="top">int <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd1/volume__id__internal_8h.html#a8df0f77a09c66fd2cfca6fcf0c1bb3db">volume_id_probe_hfs_hfsplus</a> (struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *id)</td></tr>
<tr class="separator:a8df0f77a09c66fd2cfca6fcf0c1bb3db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5bde1dc29635ceb017e197db1b5e273"><td class="memItemLeft" align="right" valign="top">int <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd1/volume__id__internal_8h.html#ab5bde1dc29635ceb017e197db1b5e273">volume_id_probe_iso9660</a> (struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *id)</td></tr>
<tr class="separator:ab5bde1dc29635ceb017e197db1b5e273"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ec23ff4552ad1403d77ff94b72fee3b"><td class="memItemLeft" align="right" valign="top">int <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd1/volume__id__internal_8h.html#a4ec23ff4552ad1403d77ff94b72fee3b">volume_id_probe_jfs</a> (struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *id)</td></tr>
<tr class="separator:a4ec23ff4552ad1403d77ff94b72fee3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a155c180cf3e1f696332f0b2a711fc36f"><td class="memItemLeft" align="right" valign="top">int <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd1/volume__id__internal_8h.html#a155c180cf3e1f696332f0b2a711fc36f">volume_id_probe_lfs</a> (struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *id)</td></tr>
<tr class="separator:a155c180cf3e1f696332f0b2a711fc36f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a942c22de26de530259b09e3ee6e61ede"><td class="memItemLeft" align="right" valign="top">int <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd1/volume__id__internal_8h.html#a942c22de26de530259b09e3ee6e61ede">volume_id_probe_linux_swap</a> (struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *id)</td></tr>
<tr class="separator:a942c22de26de530259b09e3ee6e61ede"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29b0f30464439dd6ad9ba33251b8501f"><td class="memItemLeft" align="right" valign="top">int <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd1/volume__id__internal_8h.html#a29b0f30464439dd6ad9ba33251b8501f">volume_id_probe_luks</a> (struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *id)</td></tr>
<tr class="separator:a29b0f30464439dd6ad9ba33251b8501f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f6aa898625b2a42d96ead4e171c0d64"><td class="memItemLeft" align="right" valign="top">int <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd1/volume__id__internal_8h.html#a5f6aa898625b2a42d96ead4e171c0d64">volume_id_probe_minix</a> (struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *id)</td></tr>
<tr class="separator:a5f6aa898625b2a42d96ead4e171c0d64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a757e41f1c9ca00bb7f59196b9ae94250"><td class="memItemLeft" align="right" valign="top">int <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd1/volume__id__internal_8h.html#a757e41f1c9ca00bb7f59196b9ae94250">volume_id_probe_f2fs</a> (struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *id)</td></tr>
<tr class="separator:a757e41f1c9ca00bb7f59196b9ae94250"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a987ef6f1b2fab8891ece9a786d17d3f1"><td class="memItemLeft" align="right" valign="top">int <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd1/volume__id__internal_8h.html#a987ef6f1b2fab8891ece9a786d17d3f1">volume_id_probe_nilfs</a> (struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *id)</td></tr>
<tr class="separator:a987ef6f1b2fab8891ece9a786d17d3f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acefc1227c02575cffd4dff989e3a3ce8"><td class="memItemLeft" align="right" valign="top">int <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd1/volume__id__internal_8h.html#acefc1227c02575cffd4dff989e3a3ce8">volume_id_probe_ntfs</a> (struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *id)</td></tr>
<tr class="separator:acefc1227c02575cffd4dff989e3a3ce8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a019ae1351bae0afee3392509712649d9"><td class="memItemLeft" align="right" valign="top">int <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd1/volume__id__internal_8h.html#a019ae1351bae0afee3392509712649d9">volume_id_probe_exfat</a> (struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *id)</td></tr>
<tr class="separator:a019ae1351bae0afee3392509712649d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef3fb9195d1bd183b3c11ed1d1190312"><td class="memItemLeft" align="right" valign="top">int <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd1/volume__id__internal_8h.html#aef3fb9195d1bd183b3c11ed1d1190312">volume_id_probe_ocfs2</a> (struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *id)</td></tr>
<tr class="separator:aef3fb9195d1bd183b3c11ed1d1190312"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e9f5ff8ce439ae1d7d08dbea51f1724"><td class="memItemLeft" align="right" valign="top">int <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd1/volume__id__internal_8h.html#a5e9f5ff8ce439ae1d7d08dbea51f1724">volume_id_probe_reiserfs</a> (struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *id)</td></tr>
<tr class="separator:a5e9f5ff8ce439ae1d7d08dbea51f1724"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8dcb1e14dff59726239bbbe945e01605"><td class="memItemLeft" align="right" valign="top">int <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd1/volume__id__internal_8h.html#a8dcb1e14dff59726239bbbe945e01605">volume_id_probe_romfs</a> (struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *id)</td></tr>
<tr class="separator:a8dcb1e14dff59726239bbbe945e01605"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4667ec25c2790cdb3802d0043b68db81"><td class="memItemLeft" align="right" valign="top">int <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd1/volume__id__internal_8h.html#a4667ec25c2790cdb3802d0043b68db81">volume_id_probe_squashfs</a> (struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *id)</td></tr>
<tr class="separator:a4667ec25c2790cdb3802d0043b68db81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac67d5335c797858076cd8f87a8ea6cc4"><td class="memItemLeft" align="right" valign="top">int <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd1/volume__id__internal_8h.html#ac67d5335c797858076cd8f87a8ea6cc4">volume_id_probe_erofs</a> (struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *id)</td></tr>
<tr class="separator:ac67d5335c797858076cd8f87a8ea6cc4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a885d8c74857ed2f0b4e7e9fdb4527e55"><td class="memItemLeft" align="right" valign="top">int <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd1/volume__id__internal_8h.html#a885d8c74857ed2f0b4e7e9fdb4527e55">volume_id_probe_sysv</a> (struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *id)</td></tr>
<tr class="separator:a885d8c74857ed2f0b4e7e9fdb4527e55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac88255a75bf8ebe523d36b5552333c59"><td class="memItemLeft" align="right" valign="top">int <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd1/volume__id__internal_8h.html#ac88255a75bf8ebe523d36b5552333c59">volume_id_probe_udf</a> (struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *id)</td></tr>
<tr class="separator:ac88255a75bf8ebe523d36b5552333c59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a450015ff93c29a5a78cad86aef7d0300"><td class="memItemLeft" align="right" valign="top">int <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd1/volume__id__internal_8h.html#a450015ff93c29a5a78cad86aef7d0300">volume_id_probe_xfs</a> (struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *id)</td></tr>
<tr class="separator:a450015ff93c29a5a78cad86aef7d0300"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a627d7a2740f23c481aa28b378daaeb38"><td class="memItemLeft" align="right" valign="top">int <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd1/volume__id__internal_8h.html#a627d7a2740f23c481aa28b378daaeb38">volume_id_probe_ubifs</a> (struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *id)</td></tr>
<tr class="separator:a627d7a2740f23c481aa28b378daaeb38"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<hr/><h2 class="groupheader">Data Structure Documentation</h2>
<a name="db/dc4/structvolume__id" id="db/dc4/structvolume__id"></a>
<h2 class="memtitle"><span class="permalink"><a href="#db/dc4/structvolume__id">&#9670;&nbsp;</a></span>volume_id</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct volume_id</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00060">60</a> of file <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html">volume_id_internal.h</a>.</p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="ac57b4128405405e1b05074ec3831f6db"></a>int</td>
<td class="fieldname">
error</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a9650b1135e9501f834a2ff8c3bdfc9a5"></a>int</td>
<td class="fieldname">
fd</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="aebf9c21fa3fc79b7e98aca176d1e1092"></a>char</td>
<td class="fieldname">
label[<a class="el" href="../../dd/dd1/volume__id__internal_8h.html#a70366446adc457ccbb282d3871e6ff77">VOLUME_ID_LABEL_SIZE</a>+1]</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a5237e1f94a15fb740e15f014c9bf19bc"></a><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#a3cb4a16b0e8d6af0af86d4fd6ba5fd9d">uint8_t</a> *</td>
<td class="fieldname">
sbbuf</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a3c61b2c834103bd28e979c2bb769bfb8"></a><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a></td>
<td class="fieldname">
sbbuf_len</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a8894e9cb805c7963d4271f5752ecbc68"></a><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#a3cb4a16b0e8d6af0af86d4fd6ba5fd9d">uint8_t</a> *</td>
<td class="fieldname">
seekbuf</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a5934a6353e30c627f925dda252e9b5a5"></a><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a></td>
<td class="fieldname">
seekbuf_len</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a76dd274ce101907730f229af658f74df"></a><a class="el" href="../../dd/ddd/arithmetic__operations_8c.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a></td>
<td class="fieldname">
seekbuf_off</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a562b7db1b283bafd3a2352cc8738c554"></a>char</td>
<td class="fieldname">
uuid[<a class="el" href="../../dd/dd1/volume__id__internal_8h.html#a36b3015551826f6436e99a24610b2257">VOLUME_ID_UUID_SIZE</a>+1]</td>
<td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a48f33ad7b3de0010e5c802ced48f8a7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48f33ad7b3de0010e5c802ced48f8a7b">&#9670;&nbsp;</a></span>be16_to_cpu</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define be16_to_cpu</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="../../dc/da2/musl_2src_2prng_2random_8c.html#aeb26462df30f47f6fd73ee802457812b">x</a></td><td>)</td>
          <td>&#160;&#160;&#160;(<a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#a5debae8b2a1ec20a6694c0c443ee399e">uint16_t</a>)(<a class="el" href="../../dc/da2/musl_2src_2prng_2random_8c.html#aeb26462df30f47f6fd73ee802457812b">x</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00112">112</a> of file <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html">volume_id_internal.h</a>.</p>

</div>
</div>
<a id="a650ecb20996a13e0c0bc530ba83fe5dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a650ecb20996a13e0c0bc530ba83fe5dc">&#9670;&nbsp;</a></span>be32_to_cpu</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define be32_to_cpu</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="../../dc/da2/musl_2src_2prng_2random_8c.html#aeb26462df30f47f6fd73ee802457812b">x</a></td><td>)</td>
          <td>&#160;&#160;&#160;(<a class="el" href="../../dd/ddd/arithmetic__operations_8c.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>)(<a class="el" href="../../dc/da2/musl_2src_2prng_2random_8c.html#aeb26462df30f47f6fd73ee802457812b">x</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00113">113</a> of file <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html">volume_id_internal.h</a>.</p>

</div>
</div>
<a id="afd3274bb70aea7cf9be403940e001cc7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd3274bb70aea7cf9be403940e001cc7">&#9670;&nbsp;</a></span>cpu_to_be32</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define cpu_to_be32</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="../../dc/da2/musl_2src_2prng_2random_8c.html#aeb26462df30f47f6fd73ee802457812b">x</a></td><td>)</td>
          <td>&#160;&#160;&#160;(<a class="el" href="../../dd/ddd/arithmetic__operations_8c.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>)(<a class="el" href="../../dc/da2/musl_2src_2prng_2random_8c.html#aeb26462df30f47f6fd73ee802457812b">x</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00116">116</a> of file <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html">volume_id_internal.h</a>.</p>

</div>
</div>
<a id="aeda3065f344779edb9023e22d84d5f92"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeda3065f344779edb9023e22d84d5f92">&#9670;&nbsp;</a></span>cpu_to_le16</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define cpu_to_le16</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="../../dc/da2/musl_2src_2prng_2random_8c.html#aeb26462df30f47f6fd73ee802457812b">x</a></td><td>)</td>
          <td>&#160;&#160;&#160;(<a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#a5debae8b2a1ec20a6694c0c443ee399e">uint16_t</a>)(<a class="el" href="../../db/dc9/byteswap_8h.html#ad409605fabe125b1d222acb94a3f480f">bswap_16</a>(<a class="el" href="../../dc/da2/musl_2src_2prng_2random_8c.html#aeb26462df30f47f6fd73ee802457812b">x</a>))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00114">114</a> of file <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html">volume_id_internal.h</a>.</p>

</div>
</div>
<a id="a1d5ae0c36d519a1b0a789db69a598f28"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d5ae0c36d519a1b0a789db69a598f28">&#9670;&nbsp;</a></span>cpu_to_le32</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define cpu_to_le32</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="../../dc/da2/musl_2src_2prng_2random_8c.html#aeb26462df30f47f6fd73ee802457812b">x</a></td><td>)</td>
          <td>&#160;&#160;&#160;(<a class="el" href="../../dd/ddd/arithmetic__operations_8c.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>)(<a class="el" href="../../db/dc9/byteswap_8h.html#a5bcbf8b6ee067af4c2fd60ef3bdb39d2">bswap_32</a>(<a class="el" href="../../dc/da2/musl_2src_2prng_2random_8c.html#aeb26462df30f47f6fd73ee802457812b">x</a>))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00115">115</a> of file <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html">volume_id_internal.h</a>.</p>

</div>
</div>
<a id="aadf47595f4fdb31176441bb4415eecac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aadf47595f4fdb31176441bb4415eecac">&#9670;&nbsp;</a></span>dbg</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define dbg</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em></td><td>)</td>
          <td>&#160;&#160;&#160;((void)0)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00026">26</a> of file <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html">volume_id_internal.h</a>.</p>

</div>
</div>
<a id="a65e9510f535c1ee2f826d447471289fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65e9510f535c1ee2f826d447471289fa">&#9670;&nbsp;</a></span>le16_to_cpu</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define le16_to_cpu</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="../../dc/da2/musl_2src_2prng_2random_8c.html#aeb26462df30f47f6fd73ee802457812b">x</a></td><td>)</td>
          <td>&#160;&#160;&#160;(<a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#a5debae8b2a1ec20a6694c0c443ee399e">uint16_t</a>)(<a class="el" href="../../db/dc9/byteswap_8h.html#ad409605fabe125b1d222acb94a3f480f">bswap_16</a>(<a class="el" href="../../dc/da2/musl_2src_2prng_2random_8c.html#aeb26462df30f47f6fd73ee802457812b">x</a>))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00109">109</a> of file <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html">volume_id_internal.h</a>.</p>

</div>
</div>
<a id="a48f527b00bc1d5e46366d720280a1039"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48f527b00bc1d5e46366d720280a1039">&#9670;&nbsp;</a></span>le32_to_cpu</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define le32_to_cpu</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="../../dc/da2/musl_2src_2prng_2random_8c.html#aeb26462df30f47f6fd73ee802457812b">x</a></td><td>)</td>
          <td>&#160;&#160;&#160;(<a class="el" href="../../dd/ddd/arithmetic__operations_8c.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>)(<a class="el" href="../../db/dc9/byteswap_8h.html#a5bcbf8b6ee067af4c2fd60ef3bdb39d2">bswap_32</a>(<a class="el" href="../../dc/da2/musl_2src_2prng_2random_8c.html#aeb26462df30f47f6fd73ee802457812b">x</a>))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00110">110</a> of file <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html">volume_id_internal.h</a>.</p>

</div>
</div>
<a id="a0987d88a4fac98f0b1d6355ef7aa77e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0987d88a4fac98f0b1d6355ef7aa77e2">&#9670;&nbsp;</a></span>le64_to_cpu</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define le64_to_cpu</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="../../dc/da2/musl_2src_2prng_2random_8c.html#aeb26462df30f47f6fd73ee802457812b">x</a></td><td>)</td>
          <td>&#160;&#160;&#160;(<a class="el" href="../../dd/ddd/arithmetic__operations_8c.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a>)(<a class="el" href="../../d3/d32/bb__bswap__64_8c.html#a2da9518e3b86c6d8fa60ac0df72e39b7">bb_bswap_64</a>(<a class="el" href="../../dc/da2/musl_2src_2prng_2random_8c.html#aeb26462df30f47f6fd73ee802457812b">x</a>))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00111">111</a> of file <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html">volume_id_internal.h</a>.</p>

</div>
</div>
<a id="aab8b8df7b4a8046c16828b807c000cc1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab8b8df7b4a8046c16828b807c000cc1">&#9670;&nbsp;</a></span>SB_BUFFER_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SB_BUFFER_SIZE&#160;&#160;&#160;0x11000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00095">95</a> of file <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html">volume_id_internal.h</a>.</p>

</div>
</div>
<a id="af949d412007c96ffb0c083f3fbfdcfb9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af949d412007c96ffb0c083f3fbfdcfb9">&#9670;&nbsp;</a></span>SEEK_BUFFER_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SEEK_BUFFER_SIZE&#160;&#160;&#160;0x10000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00097">97</a> of file <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html">volume_id_internal.h</a>.</p>

</div>
</div>
<a id="a9786ea6790d2443e3a8d2fb90d5c4185"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9786ea6790d2443e3a8d2fb90d5c4185">&#9670;&nbsp;</a></span>VOLUME_ID_FORMAT_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VOLUME_ID_FORMAT_SIZE&#160;&#160;&#160;32</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00035">35</a> of file <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html">volume_id_internal.h</a>.</p>

</div>
</div>
<a id="a70366446adc457ccbb282d3871e6ff77"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70366446adc457ccbb282d3871e6ff77">&#9670;&nbsp;</a></span>VOLUME_ID_LABEL_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VOLUME_ID_LABEL_SIZE&#160;&#160;&#160;64</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00033">33</a> of file <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html">volume_id_internal.h</a>.</p>

</div>
</div>
<a id="a27cac1b52877b057898f0bb6ac8f01a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27cac1b52877b057898f0bb6ac8f01a3">&#9670;&nbsp;</a></span>VOLUME_ID_PARTITIONS_MAX</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VOLUME_ID_PARTITIONS_MAX&#160;&#160;&#160;256</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00036">36</a> of file <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html">volume_id_internal.h</a>.</p>

</div>
</div>
<a id="a36b3015551826f6436e99a24610b2257"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36b3015551826f6436e99a24610b2257">&#9670;&nbsp;</a></span>VOLUME_ID_UUID_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VOLUME_ID_UUID_SIZE&#160;&#160;&#160;36</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00034">34</a> of file <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html">volume_id_internal.h</a>.</p>

</div>
</div>
<a id="ae0a74ee325ba0f1f158bbb58ac1fee2f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0a74ee325ba0f1f158bbb58ac1fee2f">&#9670;&nbsp;</a></span>VOLUME_ID_VERSION</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VOLUME_ID_VERSION&#160;&#160;&#160;48</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00031">31</a> of file <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html">volume_id_internal.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="aceb52d5e58265d474290d1e17bcf1716"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aceb52d5e58265d474290d1e17bcf1716">&#9670;&nbsp;</a></span>endian</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#aceb52d5e58265d474290d1e17bcf1716">endian</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="aceb52d5e58265d474290d1e17bcf1716a662ed4b51721a45f07d645d4ca099a61"></a>LE&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aceb52d5e58265d474290d1e17bcf1716ac115336a31f6a75e7dd426dfd459fb54"></a>BE&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00130">130</a> of file <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html">volume_id_internal.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;            {</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#aceb52d5e58265d474290d1e17bcf1716a662ed4b51721a45f07d645d4ca099a61">LE</a> = 0,</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#aceb52d5e58265d474290d1e17bcf1716ac115336a31f6a75e7dd426dfd459fb54">BE</a> = 1</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;};</div>
<div class="ttc" id="avolume__id__internal_8h_html_aceb52d5e58265d474290d1e17bcf1716a662ed4b51721a45f07d645d4ca099a61"><div class="ttname"><a href="../../dd/dd1/volume__id__internal_8h.html#aceb52d5e58265d474290d1e17bcf1716a662ed4b51721a45f07d645d4ca099a61">LE</a></div><div class="ttdeci">@ LE</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd1/volume__id__internal_8h_source.html#l00131">volume_id_internal.h:131</a></div></div>
<div class="ttc" id="avolume__id__internal_8h_html_aceb52d5e58265d474290d1e17bcf1716ac115336a31f6a75e7dd426dfd459fb54"><div class="ttname"><a href="../../dd/dd1/volume__id__internal_8h.html#aceb52d5e58265d474290d1e17bcf1716ac115336a31f6a75e7dd426dfd459fb54">BE</a></div><div class="ttdeci">@ BE</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd1/volume__id__internal_8h_source.html#l00133">volume_id_internal.h:132</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a72f809f0cc1f63120f83a9fe78f026f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72f809f0cc1f63120f83a9fe78f026f1">&#9670;&nbsp;</a></span>uuid_format</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#a72f809f0cc1f63120f83a9fe78f026f1">uuid_format</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a72f809f0cc1f63120f83a9fe78f026f1a979167e82bd9d4c12bd02a8bd2d35a44"></a>UUID_DOS&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a72f809f0cc1f63120f83a9fe78f026f1a01551a287f0e60de3e4b01a07bddf694"></a>UUID_NTFS&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a72f809f0cc1f63120f83a9fe78f026f1a4bd0e1bee402481edbff5b037158c245"></a>UUID_DCE&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a72f809f0cc1f63120f83a9fe78f026f1afeab423d9f83201f36fdf94d3fbc1217"></a>UUID_DCE_STRING&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00123">123</a> of file <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html">volume_id_internal.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                 {</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a72f809f0cc1f63120f83a9fe78f026f1a979167e82bd9d4c12bd02a8bd2d35a44">UUID_DOS</a> = 0,       <span class="comment">/* 4 bytes */</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a72f809f0cc1f63120f83a9fe78f026f1a01551a287f0e60de3e4b01a07bddf694">UUID_NTFS</a> = 1,      <span class="comment">/* 8 bytes */</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a72f809f0cc1f63120f83a9fe78f026f1a4bd0e1bee402481edbff5b037158c245">UUID_DCE</a> = 2,       <span class="comment">/* 16 bytes */</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a72f809f0cc1f63120f83a9fe78f026f1afeab423d9f83201f36fdf94d3fbc1217">UUID_DCE_STRING</a> = 3,    <span class="comment">/* 36 bytes (VOLUME_ID_UUID_SIZE) */</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;};</div>
<div class="ttc" id="avolume__id__internal_8h_html_a72f809f0cc1f63120f83a9fe78f026f1a01551a287f0e60de3e4b01a07bddf694"><div class="ttname"><a href="../../dd/dd1/volume__id__internal_8h.html#a72f809f0cc1f63120f83a9fe78f026f1a01551a287f0e60de3e4b01a07bddf694">UUID_NTFS</a></div><div class="ttdeci">@ UUID_NTFS</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd1/volume__id__internal_8h_source.html#l00125">volume_id_internal.h:125</a></div></div>
<div class="ttc" id="avolume__id__internal_8h_html_a72f809f0cc1f63120f83a9fe78f026f1a4bd0e1bee402481edbff5b037158c245"><div class="ttname"><a href="../../dd/dd1/volume__id__internal_8h.html#a72f809f0cc1f63120f83a9fe78f026f1a4bd0e1bee402481edbff5b037158c245">UUID_DCE</a></div><div class="ttdeci">@ UUID_DCE</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd1/volume__id__internal_8h_source.html#l00126">volume_id_internal.h:126</a></div></div>
<div class="ttc" id="avolume__id__internal_8h_html_a72f809f0cc1f63120f83a9fe78f026f1a979167e82bd9d4c12bd02a8bd2d35a44"><div class="ttname"><a href="../../dd/dd1/volume__id__internal_8h.html#a72f809f0cc1f63120f83a9fe78f026f1a979167e82bd9d4c12bd02a8bd2d35a44">UUID_DOS</a></div><div class="ttdeci">@ UUID_DOS</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd1/volume__id__internal_8h_source.html#l00124">volume_id_internal.h:124</a></div></div>
<div class="ttc" id="avolume__id__internal_8h_html_a72f809f0cc1f63120f83a9fe78f026f1afeab423d9f83201f36fdf94d3fbc1217"><div class="ttname"><a href="../../dd/dd1/volume__id__internal_8h.html#a72f809f0cc1f63120f83a9fe78f026f1afeab423d9f83201f36fdf94d3fbc1217">UUID_DCE_STRING</a></div><div class="ttdeci">@ UUID_DCE_STRING</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd1/volume__id__internal_8h_source.html#l00127">volume_id_internal.h:127</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a089980519c04e907da91d8401078532d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a089980519c04e907da91d8401078532d">&#9670;&nbsp;</a></span>volume_id_usage</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#a089980519c04e907da91d8401078532d">volume_id_usage</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a089980519c04e907da91d8401078532dadc28ffe6110f5baafcb99a64ee4d111c"></a>VOLUME_ID_UNUSED&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a089980519c04e907da91d8401078532da58d13daa9d851ddf6264dc920d986f50"></a>VOLUME_ID_UNPROBED&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a089980519c04e907da91d8401078532daae5336853af2e42fbab657e33c00fe33"></a>VOLUME_ID_OTHER&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a089980519c04e907da91d8401078532daa4dbb8b8bb65c601c86b81e5389795ff"></a>VOLUME_ID_FILESYSTEM&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a089980519c04e907da91d8401078532da377aa3dac07a35eddd476e2cd3431993"></a>VOLUME_ID_PARTITIONTABLE&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a089980519c04e907da91d8401078532dacd5f86c590048b6919f4577fa6a5c5e7"></a>VOLUME_ID_RAID&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a089980519c04e907da91d8401078532dad11b0b95ef7c10d450908ea08ea63fd1"></a>VOLUME_ID_DISKLABEL&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a089980519c04e907da91d8401078532dac43a4ab0cda19eaa22bb0407183218a2"></a>VOLUME_ID_CRYPTO&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00038">38</a> of file <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html">volume_id_internal.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;                     {</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a089980519c04e907da91d8401078532dadc28ffe6110f5baafcb99a64ee4d111c">VOLUME_ID_UNUSED</a>,</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a089980519c04e907da91d8401078532da58d13daa9d851ddf6264dc920d986f50">VOLUME_ID_UNPROBED</a>,</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a089980519c04e907da91d8401078532daae5336853af2e42fbab657e33c00fe33">VOLUME_ID_OTHER</a>,</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a089980519c04e907da91d8401078532daa4dbb8b8bb65c601c86b81e5389795ff">VOLUME_ID_FILESYSTEM</a>,</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a089980519c04e907da91d8401078532da377aa3dac07a35eddd476e2cd3431993">VOLUME_ID_PARTITIONTABLE</a>,</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a089980519c04e907da91d8401078532dacd5f86c590048b6919f4577fa6a5c5e7">VOLUME_ID_RAID</a>,</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a089980519c04e907da91d8401078532dad11b0b95ef7c10d450908ea08ea63fd1">VOLUME_ID_DISKLABEL</a>,</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a089980519c04e907da91d8401078532dac43a4ab0cda19eaa22bb0407183218a2">VOLUME_ID_CRYPTO</a>,</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;};</div>
<div class="ttc" id="avolume__id__internal_8h_html_a089980519c04e907da91d8401078532da377aa3dac07a35eddd476e2cd3431993"><div class="ttname"><a href="../../dd/dd1/volume__id__internal_8h.html#a089980519c04e907da91d8401078532da377aa3dac07a35eddd476e2cd3431993">VOLUME_ID_PARTITIONTABLE</a></div><div class="ttdeci">@ VOLUME_ID_PARTITIONTABLE</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd1/volume__id__internal_8h_source.html#l00043">volume_id_internal.h:43</a></div></div>
<div class="ttc" id="avolume__id__internal_8h_html_a089980519c04e907da91d8401078532da58d13daa9d851ddf6264dc920d986f50"><div class="ttname"><a href="../../dd/dd1/volume__id__internal_8h.html#a089980519c04e907da91d8401078532da58d13daa9d851ddf6264dc920d986f50">VOLUME_ID_UNPROBED</a></div><div class="ttdeci">@ VOLUME_ID_UNPROBED</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd1/volume__id__internal_8h_source.html#l00040">volume_id_internal.h:40</a></div></div>
<div class="ttc" id="avolume__id__internal_8h_html_a089980519c04e907da91d8401078532daa4dbb8b8bb65c601c86b81e5389795ff"><div class="ttname"><a href="../../dd/dd1/volume__id__internal_8h.html#a089980519c04e907da91d8401078532daa4dbb8b8bb65c601c86b81e5389795ff">VOLUME_ID_FILESYSTEM</a></div><div class="ttdeci">@ VOLUME_ID_FILESYSTEM</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd1/volume__id__internal_8h_source.html#l00042">volume_id_internal.h:42</a></div></div>
<div class="ttc" id="avolume__id__internal_8h_html_a089980519c04e907da91d8401078532daae5336853af2e42fbab657e33c00fe33"><div class="ttname"><a href="../../dd/dd1/volume__id__internal_8h.html#a089980519c04e907da91d8401078532daae5336853af2e42fbab657e33c00fe33">VOLUME_ID_OTHER</a></div><div class="ttdeci">@ VOLUME_ID_OTHER</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd1/volume__id__internal_8h_source.html#l00041">volume_id_internal.h:41</a></div></div>
<div class="ttc" id="avolume__id__internal_8h_html_a089980519c04e907da91d8401078532dac43a4ab0cda19eaa22bb0407183218a2"><div class="ttname"><a href="../../dd/dd1/volume__id__internal_8h.html#a089980519c04e907da91d8401078532dac43a4ab0cda19eaa22bb0407183218a2">VOLUME_ID_CRYPTO</a></div><div class="ttdeci">@ VOLUME_ID_CRYPTO</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd1/volume__id__internal_8h_source.html#l00046">volume_id_internal.h:46</a></div></div>
<div class="ttc" id="avolume__id__internal_8h_html_a089980519c04e907da91d8401078532dacd5f86c590048b6919f4577fa6a5c5e7"><div class="ttname"><a href="../../dd/dd1/volume__id__internal_8h.html#a089980519c04e907da91d8401078532dacd5f86c590048b6919f4577fa6a5c5e7">VOLUME_ID_RAID</a></div><div class="ttdeci">@ VOLUME_ID_RAID</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd1/volume__id__internal_8h_source.html#l00044">volume_id_internal.h:44</a></div></div>
<div class="ttc" id="avolume__id__internal_8h_html_a089980519c04e907da91d8401078532dad11b0b95ef7c10d450908ea08ea63fd1"><div class="ttname"><a href="../../dd/dd1/volume__id__internal_8h.html#a089980519c04e907da91d8401078532dad11b0b95ef7c10d450908ea08ea63fd1">VOLUME_ID_DISKLABEL</a></div><div class="ttdeci">@ VOLUME_ID_DISKLABEL</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd1/volume__id__internal_8h_source.html#l00045">volume_id_internal.h:45</a></div></div>
<div class="ttc" id="avolume__id__internal_8h_html_a089980519c04e907da91d8401078532dadc28ffe6110f5baafcb99a64ee4d111c"><div class="ttname"><a href="../../dd/dd1/volume__id__internal_8h.html#a089980519c04e907da91d8401078532dadc28ffe6110f5baafcb99a64ee4d111c">VOLUME_ID_UNUSED</a></div><div class="ttdeci">@ VOLUME_ID_UNUSED</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd1/volume__id__internal_8h_source.html#l00039">volume_id_internal.h:39</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a709a3a7186f2e6d9680a9d830c8e7e01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a709a3a7186f2e6d9680a9d830c8e7e01">&#9670;&nbsp;</a></span>free_volume_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a> free_volume_id </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/d15/volume__id_8c_source.html#l00259">259</a> of file <a class="el" href="../../d2/d15/volume__id_8c_source.html">volume_id.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;{</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="keywordflow">if</span> (<span class="keywordtype">id</span> == <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160; </div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="comment">//if (id-&gt;fd_close != 0) - always true</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        <a class="code" href="../../db/dad/Userspace_2musl_2include_2unistd_8h.html#ae152484c890a24e4d9b4980e7b965be0">close</a>(id-&gt;<a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a9650b1135e9501f834a2ff8c3bdfc9a5">fd</a>);</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#a7f15e74b7e0bd4265aa95889e44c1685">volume_id_free_buffer</a>(<span class="keywordtype">id</span>);</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="preprocessor">#ifdef UNUSED_PARTITION_CODE</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <a class="code" href="../../d5/db0/dynlink_8c.html#a2c6efa7679f8cd9f61af96e105017560">free</a>(id-&gt;partitions);</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <a class="code" href="../../d5/db0/dynlink_8c.html#a2c6efa7679f8cd9f61af96e105017560">free</a>(<span class="keywordtype">id</span>);</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;}</div>
<div class="ttc" id="aKernel_2include_2types_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../d0/df4/Kernel_2include_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/Kernel_2include_2types_8h_source.html#l00037">types.h:37</a></div></div>
<div class="ttc" id="aUserspace_2musl_2include_2unistd_8h_html_ae152484c890a24e4d9b4980e7b965be0"><div class="ttname"><a href="../../db/dad/Userspace_2musl_2include_2unistd_8h.html#ae152484c890a24e4d9b4980e7b965be0">close</a></div><div class="ttdeci">int close(int)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d22/close_8c_source.html#l00013">close.c:13</a></div></div>
<div class="ttc" id="abusybox_2util-linux_2volume__id_2util_8c_html_a7f15e74b7e0bd4265aa95889e44c1685"><div class="ttname"><a href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#a7f15e74b7e0bd4265aa95889e44c1685">volume_id_free_buffer</a></div><div class="ttdeci">void volume_id_free_buffer(struct volume_id *id)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00256">util.c:256</a></div></div>
<div class="ttc" id="adynlink_8c_html_a2c6efa7679f8cd9f61af96e105017560"><div class="ttname"><a href="../../d5/db0/dynlink_8c.html#a2c6efa7679f8cd9f61af96e105017560">free</a></div><div class="ttdeci">#define free</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/db0/dynlink_8c_source.html#l00036">dynlink.c:36</a></div></div>
<div class="ttc" id="avolume__id__internal_8h_html_a9650b1135e9501f834a2ff8c3bdfc9a5"><div class="ttname"><a href="../../dd/dd1/volume__id__internal_8h.html#a9650b1135e9501f834a2ff8c3bdfc9a5">volume_id::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd1/volume__id__internal_8h_source.html#l00061">volume_id_internal.h:61</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d9/d22/close_8c_source.html#l00013">close()</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00061">volume_id::fd</a>, <a class="el" href="../../d5/db0/dynlink_8c_source.html#l00036">free</a>, <a class="el" href="../../d0/df4/Kernel_2include_2types_8h_source.html#l00037">NULL</a>, and <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00256">volume_id_free_buffer()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d06/get__devname_8c_source.html#l00043">get_label_uuid()</a>.</p>

</div>
</div>
<a id="a7f15e74b7e0bd4265aa95889e44c1685"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f15e74b7e0bd4265aa95889e44c1685">&#9670;&nbsp;</a></span>volume_id_free_buffer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void volume_id_free_buffer </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00256">256</a> of file <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html">util.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;{</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <a class="code" href="../../d5/db0/dynlink_8c.html#a2c6efa7679f8cd9f61af96e105017560">free</a>(id-&gt;<a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a5237e1f94a15fb740e15f014c9bf19bc">sbbuf</a>);</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keywordtype">id</span>-&gt;sbbuf = <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="keywordtype">id</span>-&gt;sbbuf_len = 0;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <a class="code" href="../../d5/db0/dynlink_8c.html#a2c6efa7679f8cd9f61af96e105017560">free</a>(id-&gt;<a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a8894e9cb805c7963d4271f5752ecbc68">seekbuf</a>);</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="keywordtype">id</span>-&gt;seekbuf = <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="keywordtype">id</span>-&gt;seekbuf_len = 0;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="keywordtype">id</span>-&gt;seekbuf_off = 0; <span class="comment">/* paranoia */</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;}</div>
<div class="ttc" id="avolume__id__internal_8h_html_a5237e1f94a15fb740e15f014c9bf19bc"><div class="ttname"><a href="../../dd/dd1/volume__id__internal_8h.html#a5237e1f94a15fb740e15f014c9bf19bc">volume_id::sbbuf</a></div><div class="ttdeci">uint8_t * sbbuf</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd1/volume__id__internal_8h_source.html#l00066">volume_id_internal.h:66</a></div></div>
<div class="ttc" id="avolume__id__internal_8h_html_a8894e9cb805c7963d4271f5752ecbc68"><div class="ttname"><a href="../../dd/dd1/volume__id__internal_8h.html#a8894e9cb805c7963d4271f5752ecbc68">volume_id::seekbuf</a></div><div class="ttdeci">uint8_t * seekbuf</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd1/volume__id__internal_8h_source.html#l00067">volume_id_internal.h:67</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d5/db0/dynlink_8c_source.html#l00036">free</a>, <a class="el" href="../../d0/df4/Kernel_2include_2types_8h_source.html#l00037">NULL</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00066">volume_id::sbbuf</a>, and <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00067">volume_id::seekbuf</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d15/volume__id_8c_source.html#l00259">free_volume_id()</a>, <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00179">volume_id_get_buffer()</a>, and <a class="el" href="../../d2/d15/volume__id_8c_source.html#l00181">volume_id_probe_all()</a>.</p>

</div>
</div>
<a id="ad52c7b05017442dbe08091a85ef92710"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad52c7b05017442dbe08091a85ef92710">&#9670;&nbsp;</a></span>volume_id_get_buffer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* volume_id_get_buffer </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/ddd/arithmetic__operations_8c.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a>&#160;</td>
          <td class="paramname"><em>off</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00179">179</a> of file <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html">util.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;{</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a3cb4a16b0e8d6af0af86d4fd6ba5fd9d">uint8_t</a> *<a class="code" href="../../df/d84/arping_8c.html#a21e72f66ad6f15c4dcb2c8afbb57d7dd">dst</a>;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="keywordtype">unsigned</span> small_off;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#af10f4c58d91a6fa30ccc8a19d0ecbf48">ssize_t</a> read_len;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160; </div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;get buffer off 0x%llx(%llu), len 0x%zx&quot;</span>,</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>) <a class="code" href="../../da/d86/cramfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>) <a class="code" href="../../da/d86/cramfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a>, <a class="code" href="../../d1/dc0/multiboot_8h.html#a6de3a6d27a7e07942958b912d39792e6">len</a>);</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160; </div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="comment">/* check if requested area fits in superblock buffer */</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/d86/cramfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a> + <a class="code" href="../../d1/dc0/multiboot_8h.html#a6de3a6d27a7e07942958b912d39792e6">len</a> &lt;= <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#aab8b8df7b4a8046c16828b807c000cc1">SB_BUFFER_SIZE</a></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;     <span class="comment">/* &amp;&amp; off &lt;= SB_BUFFER_SIZE - want this paranoid overflow check? */</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    ) {</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        <span class="keywordflow">if</span> (id-&gt;<a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a5237e1f94a15fb740e15f014c9bf19bc">sbbuf</a> == <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;            <span class="keywordtype">id</span>-&gt;sbbuf = <a class="code" href="../../db/d0a/tre_8h.html#a6af5faec3f9662b20ffc9903f923dec0">xmalloc</a>(<a class="code" href="../../dd/dd1/volume__id__internal_8h.html#aab8b8df7b4a8046c16828b807c000cc1">SB_BUFFER_SIZE</a>);</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        }</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        small_off = <a class="code" href="../../da/d86/cramfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a>;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        <a class="code" href="../../df/d84/arping_8c.html#a21e72f66ad6f15c4dcb2c8afbb57d7dd">dst</a> = <span class="keywordtype">id</span>-&gt;sbbuf;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160; </div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        <span class="comment">/* check if we need to read */</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        <a class="code" href="../../d1/dc0/multiboot_8h.html#a6de3a6d27a7e07942958b912d39792e6">len</a> += <a class="code" href="../../da/d86/cramfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a>;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        <span class="keywordflow">if</span> (len &lt;= id-&gt;sbbuf_len)</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;            <span class="keywordflow">goto</span> ret; <span class="comment">/* we already have it */</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160; </div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;read sbbuf len:0x%x&quot;</span>, (<span class="keywordtype">unsigned</span>) <a class="code" href="../../d1/dc0/multiboot_8h.html#a6de3a6d27a7e07942958b912d39792e6">len</a>);</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        <span class="keywordtype">id</span>-&gt;sbbuf_len = <a class="code" href="../../d1/dc0/multiboot_8h.html#a6de3a6d27a7e07942958b912d39792e6">len</a>;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        <a class="code" href="../../da/d86/cramfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a> = 0;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="../../d6/d16/wcstod_8c.html#a51deeef46af8f61e922db81445faaeff">do_read</a>;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    }</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160; </div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d1/dc0/multiboot_8h.html#a6de3a6d27a7e07942958b912d39792e6">len</a> &gt; <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#af949d412007c96ffb0c083f3fbfdcfb9">SEEK_BUFFER_SIZE</a>) {</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;seek buffer too small %d&quot;</span>, <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#af949d412007c96ffb0c083f3fbfdcfb9">SEEK_BUFFER_SIZE</a>);</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    }</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <a class="code" href="../../df/d84/arping_8c.html#a21e72f66ad6f15c4dcb2c8afbb57d7dd">dst</a> = <span class="keywordtype">id</span>-&gt;seekbuf;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160; </div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="comment">/* check if we need to read */</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="../../da/d86/cramfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a> &gt;= id-&gt;<a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a76dd274ce101907730f229af658f74df">seekbuf_off</a>)</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;     &amp;&amp; ((<a class="code" href="../../da/d86/cramfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a> + <a class="code" href="../../d1/dc0/multiboot_8h.html#a6de3a6d27a7e07942958b912d39792e6">len</a>) &lt;= (id-&gt;<a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a76dd274ce101907730f229af658f74df">seekbuf_off</a> + id-&gt;<a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a5934a6353e30c627f925dda252e9b5a5">seekbuf_len</a>))</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    ) {</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        small_off = <a class="code" href="../../da/d86/cramfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a> - <span class="keywordtype">id</span>-&gt;seekbuf_off; <span class="comment">/* can&#39;t overflow */</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        <span class="keywordflow">goto</span> ret; <span class="comment">/* we already have it */</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    }</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160; </div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keywordtype">id</span>-&gt;seekbuf_off = <a class="code" href="../../da/d86/cramfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a>;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="keywordtype">id</span>-&gt;seekbuf_len = <a class="code" href="../../d1/dc0/multiboot_8h.html#a6de3a6d27a7e07942958b912d39792e6">len</a>;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="keywordtype">id</span>-&gt;seekbuf = <a class="code" href="../../db/d0a/tre_8h.html#a40740062faf2d95d4935112447c464ef">xrealloc</a>(id-&gt;<a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a8894e9cb805c7963d4271f5752ecbc68">seekbuf</a>, <a class="code" href="../../d1/dc0/multiboot_8h.html#a6de3a6d27a7e07942958b912d39792e6">len</a>);</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    small_off = 0;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <a class="code" href="../../df/d84/arping_8c.html#a21e72f66ad6f15c4dcb2c8afbb57d7dd">dst</a> = <span class="keywordtype">id</span>-&gt;seekbuf;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;read seekbuf off:0x%llx len:0x%zx&quot;</span>,</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>) <a class="code" href="../../da/d86/cramfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a>, <a class="code" href="../../d1/dc0/multiboot_8h.html#a6de3a6d27a7e07942958b912d39792e6">len</a>);</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160; <a class="code" href="../../d6/d16/wcstod_8c.html#a51deeef46af8f61e922db81445faaeff">do_read</a>:</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d1/d85/filesystem_8hpp.html#a8bd74caed008a66808d92d57fa74d9f6">lseek</a>(id-&gt;<a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a9650b1135e9501f834a2ff8c3bdfc9a5">fd</a>, <a class="code" href="../../da/d86/cramfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a>, <a class="code" href="../../d1/d85/filesystem_8hpp.html#a0d112bae8fd35be772185b6ec6bcbe64">SEEK_SET</a>) != <a class="code" href="../../da/d86/cramfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a>) {</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;seek(0x%llx) failed&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>) <a class="code" href="../../da/d86/cramfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a>);</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="../../d6/d40/err_8h.html#aa31bca214cc8f135a43aa7fbea017326">err</a>;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    }</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    read_len = <a class="code" href="../../d7/dd7/libbb_8h.html#abe6961731446e93dff5a0554986b6eea">full_read</a>(id-&gt;<a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a9650b1135e9501f834a2ff8c3bdfc9a5">fd</a>, <a class="code" href="../../df/d84/arping_8c.html#a21e72f66ad6f15c4dcb2c8afbb57d7dd">dst</a>, <a class="code" href="../../d1/dc0/multiboot_8h.html#a6de3a6d27a7e07942958b912d39792e6">len</a>);</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keywordflow">if</span> (read_len != <a class="code" href="../../d1/dc0/multiboot_8h.html#a6de3a6d27a7e07942958b912d39792e6">len</a>) {</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;requested 0x%x bytes, got 0x%x bytes&quot;</span>,</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                (<span class="keywordtype">unsigned</span>) <a class="code" href="../../d1/dc0/multiboot_8h.html#a6de3a6d27a7e07942958b912d39792e6">len</a>, (<span class="keywordtype">unsigned</span>) read_len);</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160; <a class="code" href="../../d6/d40/err_8h.html#aa31bca214cc8f135a43aa7fbea017326">err</a>:</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        <span class="comment">/* No filesystem can be this tiny. It&#39;s most likely</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="comment">         * non-associated loop device, empty drive and so on.</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="comment">         * Flag it, making it possible to short circuit future</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="comment">         * accesses. Rationale:</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="comment">         * users complained of slow blkid due to empty floppy drives.</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../da/d86/cramfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a> &lt; 64*1024)</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;            <span class="keywordtype">id</span>-&gt;error = 1;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        <span class="comment">/* id-&gt;seekbuf_len or id-&gt;sbbuf_len is wrong now! Fixing. */</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#a7f15e74b7e0bd4265aa95889e44c1685">volume_id_free_buffer</a>(<span class="keywordtype">id</span>);</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    }</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160; ret:</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../df/d84/arping_8c.html#a21e72f66ad6f15c4dcb2c8afbb57d7dd">dst</a> + small_off;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;}</div>
<div class="ttc" id="aKernel_2include_2types_8h_html_a3cb4a16b0e8d6af0af86d4fd6ba5fd9d"><div class="ttname"><a href="../../d0/df4/Kernel_2include_2types_8h.html#a3cb4a16b0e8d6af0af86d4fd6ba5fd9d">uint8_t</a></div><div class="ttdeci">__UINT8_TYPE__ uint8_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/Kernel_2include_2types_8h_source.html#l00160">types.h:160</a></div></div>
<div class="ttc" id="aKernel_2include_2types_8h_html_af10f4c58d91a6fa30ccc8a19d0ecbf48"><div class="ttname"><a href="../../d0/df4/Kernel_2include_2types_8h.html#af10f4c58d91a6fa30ccc8a19d0ecbf48">ssize_t</a></div><div class="ttdeci">intptr_t ssize_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/Kernel_2include_2types_8h_source.html#l00199">types.h:199</a></div></div>
<div class="ttc" id="aarping_8c_html_a21e72f66ad6f15c4dcb2c8afbb57d7dd"><div class="ttname"><a href="../../df/d84/arping_8c.html#a21e72f66ad6f15c4dcb2c8afbb57d7dd">dst</a></div><div class="ttdeci">#define dst</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d84/arping_8c_source.html#l00089">arping.c:89</a></div></div>
<div class="ttc" id="acramfs_8c_html_aa8df4166084b06f1e80d3510e5dcf7e1"><div class="ttname"><a href="../../da/d86/cramfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a></div><div class="ttdeci">#define off</div></div>
<div class="ttc" id="adecompress__bunzip2_8c_html_aadf47595f4fdb31176441bb4415eecac"><div class="ttname"><a href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a></div><div class="ttdeci">#define dbg(...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d8f/decompress__bunzip2_8c_source.html#l00047">decompress_bunzip2.c:47</a></div></div>
<div class="ttc" id="aerr_8h_html_aa31bca214cc8f135a43aa7fbea017326"><div class="ttname"><a href="../../d6/d40/err_8h.html#aa31bca214cc8f135a43aa7fbea017326">err</a></div><div class="ttdeci">_Noreturn void err(int, const char *,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d80/err_8c_source.html#l00053">err.c:53</a></div></div>
<div class="ttc" id="afilesystem_8hpp_html_a0d112bae8fd35be772185b6ec6bcbe64"><div class="ttname"><a href="../../d1/d85/filesystem_8hpp.html#a0d112bae8fd35be772185b6ec6bcbe64">SEEK_SET</a></div><div class="ttdeci">#define SEEK_SET</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d85/filesystem_8hpp_source.html#l00030">filesystem.hpp:30</a></div></div>
<div class="ttc" id="afilesystem_8hpp_html_a8bd74caed008a66808d92d57fa74d9f6"><div class="ttname"><a href="../../d1/d85/filesystem_8hpp.html#a8bd74caed008a66808d92d57fa74d9f6">lseek</a></div><div class="ttdeci">off_t lseek(int fd, off_t offset, int whence)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d5c/kernel__io_8cpp_source.html#l00088">kernel_io.cpp:88</a></div></div>
<div class="ttc" id="alibbb_8h_html_abe6961731446e93dff5a0554986b6eea"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#abe6961731446e93dff5a0554986b6eea">full_read</a></div><div class="ttdeci">ssize_t full_read(int fd, void *buf, size_t count) FAST_FUNC</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df8/apps_2base_2busybox_2libbb_2read_8c_source.html#l00036">read.c:36</a></div></div>
<div class="ttc" id="amultiboot_8h_html_a6de3a6d27a7e07942958b912d39792e6"><div class="ttname"><a href="../../d1/dc0/multiboot_8h.html#a6de3a6d27a7e07942958b912d39792e6">len</a></div><div class="ttdeci">multiboot_uint64_t len</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/multiboot_8h_source.html#l00002">multiboot.h:2</a></div></div>
<div class="ttc" id="atre_8h_html_a40740062faf2d95d4935112447c464ef"><div class="ttname"><a href="../../db/d0a/tre_8h.html#a40740062faf2d95d4935112447c464ef">xrealloc</a></div><div class="ttdeci">#define xrealloc</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0a/tre_8h_source.html#l00230">tre.h:230</a></div></div>
<div class="ttc" id="atre_8h_html_a6af5faec3f9662b20ffc9903f923dec0"><div class="ttname"><a href="../../db/d0a/tre_8h.html#a6af5faec3f9662b20ffc9903f923dec0">xmalloc</a></div><div class="ttdeci">#define xmalloc</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0a/tre_8h_source.html#l00227">tre.h:227</a></div></div>
<div class="ttc" id="avolume__id__internal_8h_html_a5934a6353e30c627f925dda252e9b5a5"><div class="ttname"><a href="../../dd/dd1/volume__id__internal_8h.html#a5934a6353e30c627f925dda252e9b5a5">volume_id::seekbuf_len</a></div><div class="ttdeci">size_t seekbuf_len</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd1/volume__id__internal_8h_source.html#l00065">volume_id_internal.h:65</a></div></div>
<div class="ttc" id="avolume__id__internal_8h_html_a76dd274ce101907730f229af658f74df"><div class="ttname"><a href="../../dd/dd1/volume__id__internal_8h.html#a76dd274ce101907730f229af658f74df">volume_id::seekbuf_off</a></div><div class="ttdeci">uint64_t seekbuf_off</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd1/volume__id__internal_8h_source.html#l00068">volume_id_internal.h:68</a></div></div>
<div class="ttc" id="avolume__id__internal_8h_html_aab8b8df7b4a8046c16828b807c000cc1"><div class="ttname"><a href="../../dd/dd1/volume__id__internal_8h.html#aab8b8df7b4a8046c16828b807c000cc1">SB_BUFFER_SIZE</a></div><div class="ttdeci">#define SB_BUFFER_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd1/volume__id__internal_8h_source.html#l00095">volume_id_internal.h:95</a></div></div>
<div class="ttc" id="avolume__id__internal_8h_html_af949d412007c96ffb0c083f3fbfdcfb9"><div class="ttname"><a href="../../dd/dd1/volume__id__internal_8h.html#af949d412007c96ffb0c083f3fbfdcfb9">SEEK_BUFFER_SIZE</a></div><div class="ttdeci">#define SEEK_BUFFER_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd1/volume__id__internal_8h_source.html#l00097">volume_id_internal.h:97</a></div></div>
<div class="ttc" id="awcstod_8c_html_a51deeef46af8f61e922db81445faaeff"><div class="ttname"><a href="../../d6/d16/wcstod_8c.html#a51deeef46af8f61e922db81445faaeff">do_read</a></div><div class="ttdeci">static size_t do_read(FILE *f, unsigned char *buf, size_t len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d16/wcstod_8c_source.html#l00011">wcstod.c:11</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/d8f/decompress__bunzip2_8c_source.html#l00047">dbg</a>, <a class="el" href="../../d6/d16/wcstod_8c_source.html#l00011">do_read()</a>, <a class="el" href="../../df/d84/arping_8c_source.html#l00089">dst</a>, <a class="el" href="../../da/d80/err_8c_source.html#l00053">err()</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00061">volume_id::fd</a>, <a class="el" href="../../df/df8/apps_2base_2busybox_2libbb_2read_8c_source.html#l00036">full_read()</a>, <a class="el" href="../../d1/dc0/multiboot_8h_source.html#l00002">len</a>, <a class="el" href="../../d8/d5c/kernel__io_8cpp_source.html#l00088">lseek()</a>, <a class="el" href="../../d0/df4/Kernel_2include_2types_8h_source.html#l00037">NULL</a>, <a class="el" href="../../da/d86/cramfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00095">SB_BUFFER_SIZE</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00066">volume_id::sbbuf</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00097">SEEK_BUFFER_SIZE</a>, <a class="el" href="../../d1/d85/filesystem_8hpp_source.html#l00030">SEEK_SET</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00067">volume_id::seekbuf</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00065">volume_id::seekbuf_len</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00068">volume_id::seekbuf_off</a>, <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00256">volume_id_free_buffer()</a>, <a class="el" href="../../db/d0a/tre_8h_source.html#l00227">xmalloc</a>, and <a class="el" href="../../db/d0a/tre_8h_source.html#l00230">xrealloc</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d15/volume__id_8c_source.html#l00181">volume_id_probe_all()</a>, <a class="el" href="../../d8/dbe/bcache_8c_source.html#l00089">volume_id_probe_bcache()</a>, <a class="el" href="../../d2/db6/btrfs_8c_source.html#l00087">volume_id_probe_btrfs()</a>, <a class="el" href="../../da/d86/cramfs_8c_source.html#l00044">volume_id_probe_cramfs()</a>, <a class="el" href="../../dc/de1/erofs_8c_source.html#l00045">volume_id_probe_erofs()</a>, <a class="el" href="../../dd/d54/exfat_8c_source.html#l00075">volume_id_probe_exfat()</a>, <a class="el" href="../../d5/d79/apps_2base_2busybox_2util-linux_2volume__id_2ext_8c_source.html#l00032">volume_id_probe_ext()</a>, <a class="el" href="../../d2/d8e/f2fs_8c_source.html#l00066">volume_id_probe_f2fs()</a>, <a class="el" href="../../de/dcd/hfs_8c_source.html#l00161">volume_id_probe_hfs_hfsplus()</a>, <a class="el" href="../../d9/d44/unused__highpoint_8c_source.html#l00046">volume_id_probe_highpoint_37x_raid()</a>, <a class="el" href="../../d9/d44/unused__highpoint_8c_source.html#l00067">volume_id_probe_highpoint_45x_raid()</a>, <a class="el" href="../../d7/dea/unused__hpfs_8c_source.html#l00036">volume_id_probe_hpfs()</a>, <a class="el" href="../../dc/dcf/unused__isw__raid_8c_source.html#l00040">volume_id_probe_intel_software_raid()</a>, <a class="el" href="../../d2/d29/iso9660_8c_source.html#l00056">volume_id_probe_iso9660()</a>, <a class="el" href="../../d8/d98/jfs_8c_source.html#l00044">volume_id_probe_jfs()</a>, <a class="el" href="../../d6/d36/lfs_8c_source.html#l00045">volume_id_probe_lfs()</a>, <a class="el" href="../../d7/d8f/linux__raid_8c_source.html#l00051">volume_id_probe_linux_raid()</a>, <a class="el" href="../../d6/dfb/linux__swap_8c_source.html#l00040">volume_id_probe_linux_swap()</a>, <a class="el" href="../../d1/d23/unused__lsi__raid_8c_source.html#l00035">volume_id_probe_lsi_mega_raid()</a>, <a class="el" href="../../d7/d59/luks_8c_source.html#l00089">volume_id_probe_luks()</a>, <a class="el" href="../../d3/d2a/unused__lvm_8c_source.html#l00043">volume_id_probe_lvm1()</a>, <a class="el" href="../../d3/d2a/unused__lvm_8c_source.html#l00065">volume_id_probe_lvm2()</a>, <a class="el" href="../../d7/db2/unused__mac_8c_source.html#l00045">volume_id_probe_mac_partition_map()</a>, <a class="el" href="../../df/d59/minix_8c_source.html#l00061">volume_id_probe_minix()</a>, <a class="el" href="../../d9/de8/unused__msdos_8c_source.html#l00056">volume_id_probe_msdos_part_table()</a>, <a class="el" href="../../d7/d2c/nilfs_8c_source.html#l00087">volume_id_probe_nilfs()</a>, <a class="el" href="../../d5/d8d/ntfs_8c_source.html#l00093">volume_id_probe_ntfs()</a>, <a class="el" href="../../d0/d5b/unused__nvidia__raid_8c_source.html#l00038">volume_id_probe_nvidia_raid()</a>, <a class="el" href="../../db/d06/ocfs2_8c_source.html#l00089">volume_id_probe_ocfs2()</a>, <a class="el" href="../../de/ddd/unused__promise__raid_8c_source.html#l00036">volume_id_probe_promise_fasttrack_raid()</a>, <a class="el" href="../../de/dee/reiserfs_8c_source.html#l00057">volume_id_probe_reiserfs()</a>, <a class="el" href="../../d6/d70/romfs_8c_source.html#l00036">volume_id_probe_romfs()</a>, <a class="el" href="../../da/d61/unused__silicon__raid_8c_source.html#l00050">volume_id_probe_silicon_medley_raid()</a>, <a class="el" href="../../d8/dcc/squashfs_8c_source.html#l00031">volume_id_probe_squashfs()</a>, <a class="el" href="../../dc/d2d/sysv_8c_source.html#l00091">volume_id_probe_sysv()</a>, <a class="el" href="../../d2/d42/ubifs_8c_source.html#l00105">volume_id_probe_ubifs()</a>, <a class="el" href="../../d2/d3a/udf_8c_source.html#l00064">volume_id_probe_udf()</a>, <a class="el" href="../../d7/d4a/unused__ufs_8c_source.html#l00171">volume_id_probe_ufs()</a>, <a class="el" href="../../d3/d2e/fat_8c_source.html#l00128">volume_id_probe_vfat()</a>, <a class="el" href="../../d1/da4/unused__via__raid_8c_source.html#l00045">volume_id_probe_via_raid()</a>, and <a class="el" href="../../d7/d4f/xfs_8c_source.html#l00044">volume_id_probe_xfs()</a>.</p>

</div>
</div>
<a id="a74f41850e051f7f8910efa899e42bbf0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74f41850e051f7f8910efa899e42bbf0">&#9670;&nbsp;</a></span>volume_id_open_node()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a>* <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a> volume_id_open_node </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<ul>
<li>close fd on device close *&zwj;/</li>
</ul>

<p class="definition">Definition at line <a class="el" href="../../d2/d15/volume__id_8c_source.html#l00226">226</a> of file <a class="el" href="../../d2/d15/volume__id_8c_source.html">volume_id.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;{</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *id;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160; </div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="keywordtype">id</span> = <a class="code" href="../../d7/dd7/libbb_8h.html#a6b9d12af476b8fa4b9de87028b0ac27c">xzalloc</a>(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a>));</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keywordtype">id</span>-&gt;fd = <a class="code" href="../../d2/db3/hdparm_8c.html#afbb31b79c86485de0faa9e9348a5247fa1e4d60e5b05464d07a30096747025a42">fd</a>;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="comment">//id-&gt;fd_close = 1;</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="keywordflow">return</span> id;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;}</div>
<div class="ttc" id="ahdparm_8c_html_afbb31b79c86485de0faa9e9348a5247fa1e4d60e5b05464d07a30096747025a42"><div class="ttname"><a href="../../d2/db3/hdparm_8c.html#afbb31b79c86485de0faa9e9348a5247fa1e4d60e5b05464d07a30096747025a42">fd</a></div><div class="ttdeci">@ fd</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/hdparm_8c_source.html#l00352">hdparm.c:352</a></div></div>
<div class="ttc" id="alibbb_8h_html_a6b9d12af476b8fa4b9de87028b0ac27c"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#a6b9d12af476b8fa4b9de87028b0ac27c">xzalloc</a></div><div class="ttdeci">void * xzalloc(size_t size) FAST_FUNC RETURNS_MALLOC</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd6/xfuncs__printf_8c_source.html#l00069">xfuncs_printf.c:69</a></div></div>
<div class="ttc" id="avolume__id__internal_8h_html_db/dc4/structvolume__id"><div class="ttname"><a href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd1/volume__id__internal_8h_source.html#l00060">volume_id_internal.h:60</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d2/db3/hdparm_8c_source.html#l00352">fd</a>, and <a class="el" href="../../d9/dd6/xfuncs__printf_8c_source.html#l00069">xzalloc()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d06/get__devname_8c_source.html#l00043">get_label_uuid()</a>.</p>

</div>
</div>
<a id="ad460bada6b957377271e27729e766a17"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad460bada6b957377271e27729e766a17">&#9670;&nbsp;</a></span>volume_id_probe_all()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a> volume_id_probe_all </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/ddd/arithmetic__operations_8c.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a>&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/d15/volume__id_8c_source.html#l00181">181</a> of file <a class="el" href="../../d2/d15/volume__id_8c_source.html">volume_id.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;{</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160; </div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="comment">/* probe for raid first, cause fs probes may be successful on raid members */</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d1/dc0/multiboot_8h.html#a6d813a0f2b5281b18dea3f4cda696c33">size</a>) {</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> = 0; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> &lt; <a class="code" href="../../dd/d7f/applet__tables_8c.html#a6242a25f9d996f0cc4f4cdb911218b75">ARRAY_SIZE</a>(raid1); <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>++) {</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;            <span class="keywordflow">if</span> (raid1[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>](<span class="keywordtype">id</span>, <span class="comment">/*off,*/</span> <a class="code" href="../../d1/dc0/multiboot_8h.html#a6d813a0f2b5281b18dea3f4cda696c33">size</a>) == 0)</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                <span class="keywordflow">goto</span> ret;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;            <span class="keywordflow">if</span> (id-&gt;<a class="code" href="../../dd/dd1/volume__id__internal_8h.html#ac57b4128405405e1b05074ec3831f6db">error</a>)</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                <span class="keywordflow">goto</span> ret;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        }</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    }</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160; </div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> = 0; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> &lt; <a class="code" href="../../dd/d7f/applet__tables_8c.html#a6242a25f9d996f0cc4f4cdb911218b75">ARRAY_SIZE</a>(raid2); <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>++) {</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        <span class="keywordflow">if</span> (raid2[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>](<span class="keywordtype">id</span> <span class="comment">/*,off*/</span>) == 0)</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;            <span class="keywordflow">goto</span> ret;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        <span class="keywordflow">if</span> (id-&gt;<a class="code" href="../../dd/dd1/volume__id__internal_8h.html#ac57b4128405405e1b05074ec3831f6db">error</a>)</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;            <span class="keywordflow">goto</span> ret;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    }</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160; </div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="comment">/* signature in the first block, only small buffer needed */</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> = 0; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> &lt; <a class="code" href="../../dd/d7f/applet__tables_8c.html#a6242a25f9d996f0cc4f4cdb911218b75">ARRAY_SIZE</a>(fs1); <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>++) {</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        <span class="keywordflow">if</span> (fs1[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>](<span class="keywordtype">id</span> <span class="comment">/*,off*/</span>) == 0)</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;            <span class="keywordflow">goto</span> ret;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        <span class="keywordflow">if</span> (id-&gt;<a class="code" href="../../dd/dd1/volume__id__internal_8h.html#ac57b4128405405e1b05074ec3831f6db">error</a>)</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;            <span class="keywordflow">goto</span> ret;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    }</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160; </div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="comment">/* fill buffer with maximum */</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#ad52c7b05017442dbe08091a85ef92710">volume_id_get_buffer</a>(<span class="keywordtype">id</span>, 0, <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#aab8b8df7b4a8046c16828b807c000cc1">SB_BUFFER_SIZE</a>);</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160; </div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> = 0; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> &lt; <a class="code" href="../../dd/d7f/applet__tables_8c.html#a6242a25f9d996f0cc4f4cdb911218b75">ARRAY_SIZE</a>(fs2); <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>++) {</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        <span class="keywordflow">if</span> (fs2[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>](<span class="keywordtype">id</span> <span class="comment">/*,off*/</span>) == 0)</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            <span class="keywordflow">goto</span> ret;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        <span class="keywordflow">if</span> (id-&gt;<a class="code" href="../../dd/dd1/volume__id__internal_8h.html#ac57b4128405405e1b05074ec3831f6db">error</a>)</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;            <span class="keywordflow">goto</span> ret;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    }</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160; </div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160; ret:</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#a7f15e74b7e0bd4265aa95889e44c1685">volume_id_free_buffer</a>(<span class="keywordtype">id</span>);</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="keywordflow">return</span> (- id-&gt;<a class="code" href="../../dd/dd1/volume__id__internal_8h.html#ac57b4128405405e1b05074ec3831f6db">error</a>); <span class="comment">/* 0 or -1 */</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;}</div>
<div class="ttc" id="aapplet__tables_8c_html_a6242a25f9d996f0cc4f4cdb911218b75"><div class="ttname"><a href="../../dd/d7f/applet__tables_8c.html#a6242a25f9d996f0cc4f4cdb911218b75">ARRAY_SIZE</a></div><div class="ttdeci">#define ARRAY_SIZE(x)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7f/applet__tables_8c_source.html#l00021">applet_tables.c:21</a></div></div>
<div class="ttc" id="abusybox_2util-linux_2volume__id_2util_8c_html_ad52c7b05017442dbe08091a85ef92710"><div class="ttname"><a href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#ad52c7b05017442dbe08091a85ef92710">volume_id_get_buffer</a></div><div class="ttdeci">void * volume_id_get_buffer(struct volume_id *id, uint64_t off, size_t len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00179">util.c:179</a></div></div>
<div class="ttc" id="agettextP_8h_html_a68428151ad44e31b19041cdeb8972a91"><div class="ttname"><a href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a></div><div class="ttdeci">static nls_uint32 nls_uint32 i</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/gettextP_8h_source.html#l00074">gettextP.h:74</a></div></div>
<div class="ttc" id="amultiboot_8h_html_a6d813a0f2b5281b18dea3f4cda696c33"><div class="ttname"><a href="../../d1/dc0/multiboot_8h.html#a6d813a0f2b5281b18dea3f4cda696c33">size</a></div><div class="ttdeci">multiboot_uint32_t size</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/multiboot_8h_source.html#l00000">multiboot.h:0</a></div></div>
<div class="ttc" id="avolume__id__internal_8h_html_ac57b4128405405e1b05074ec3831f6db"><div class="ttname"><a href="../../dd/dd1/volume__id__internal_8h.html#ac57b4128405405e1b05074ec3831f6db">volume_id::error</a></div><div class="ttdeci">int error</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd1/volume__id__internal_8h_source.html#l00063">volume_id_internal.h:63</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dd/d7f/applet__tables_8c_source.html#l00021">ARRAY_SIZE</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00063">volume_id::error</a>, <a class="el" href="../../dd/d71/gettextP_8h_source.html#l00074">i</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00095">SB_BUFFER_SIZE</a>, <a class="el" href="../../d1/dc0/multiboot_8h_source.html#l00000">size</a>, <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00256">volume_id_free_buffer()</a>, and <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00179">volume_id_get_buffer()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d06/get__devname_8c_source.html#l00043">get_label_uuid()</a>.</p>

</div>
</div>
<a id="a1509de34f1416386bc57c2eb54eab3de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1509de34f1416386bc57c2eb54eab3de">&#9670;&nbsp;</a></span>volume_id_probe_bcache()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a> volume_id_probe_bcache </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/dbe/bcache_8c_source.html#l00089">89</a> of file <a class="el" href="../../d8/dbe/bcache_8c_source.html">bcache.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;{</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d8/dbe/bcache_8c.html#d9/d4f/structbcache__super__block">bcache_super_block</a> *sb;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160; </div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    sb = <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#ad52c7b05017442dbe08091a85ef92710">volume_id_get_buffer</a>(<span class="keywordtype">id</span>, <a class="code" href="../../d8/dbe/bcache_8c.html#ad6813a950d6be4a06b73109f66740524">BCACHE_SB_OFF</a>, <span class="keyword">sizeof</span>(*sb));</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="keywordflow">if</span> (sb == <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160; </div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d82/convert_8h.html#ac376fcece8fcc2d0f8b1cf3de18b10df">memcmp</a>(sb-&gt;<a class="code" href="../../d8/dbe/bcache_8c.html#a843c93fa653971a852fe4ae95305622d">magic</a>, <a class="code" href="../../d8/dbe/bcache_8c.html#a5d2f301284a35896d329925a95a15a66">BCACHE_SB_MAGIC</a>, <a class="code" href="../../d8/dbe/bcache_8c.html#a3670cd14b902b5bc2f218ec42ec2ed66">BCACHE_SB_MAGIC_LEN</a>) != 0)</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160; </div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#a3629b5eaf1943e2f4634bd5913959b04">volume_id_set_label_string</a>(<span class="keywordtype">id</span>, sb-&gt;<a class="code" href="../../d8/dbe/bcache_8c.html#ae115ccb5cb9e86b71a3652a6df7a5c2e">label</a>, <a class="code" href="../../d8/dbe/bcache_8c.html#afdd2fb17e6e9e23a33ae7d3ef3e64a12">SB_LABEL_SIZE</a>);</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#aaaf5289e506677e73ce13f40c67fb188">volume_id_set_uuid</a>(<span class="keywordtype">id</span>, sb-&gt;<a class="code" href="../../d8/dbe/bcache_8c.html#a7fe70a3bde433ce728153e9cef36a0b1">uuid</a>, <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a72f809f0cc1f63120f83a9fe78f026f1a4bd0e1bee402481edbff5b037158c245">UUID_DCE</a>);</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    IF_FEATURE_BLKID_TYPE(id-&gt;type = <span class="stringliteral">&quot;bcache&quot;</span>;)</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160; </div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <a class="code" href="../../d8/d64/glob__loop_8c.html#a5f3f8891e3f4c9d8d7effae7eb271604">return</a> 0;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;}</div>
<div class="ttc" id="abcache_8c_html_a3670cd14b902b5bc2f218ec42ec2ed66"><div class="ttname"><a href="../../d8/dbe/bcache_8c.html#a3670cd14b902b5bc2f218ec42ec2ed66">BCACHE_SB_MAGIC_LEN</a></div><div class="ttdeci">#define BCACHE_SB_MAGIC_LEN</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbe/bcache_8c_source.html#l00081">bcache.c:81</a></div></div>
<div class="ttc" id="abcache_8c_html_a5d2f301284a35896d329925a95a15a66"><div class="ttname"><a href="../../d8/dbe/bcache_8c.html#a5d2f301284a35896d329925a95a15a66">BCACHE_SB_MAGIC</a></div><div class="ttdeci">#define BCACHE_SB_MAGIC</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbe/bcache_8c_source.html#l00079">bcache.c:79</a></div></div>
<div class="ttc" id="abcache_8c_html_a7fe70a3bde433ce728153e9cef36a0b1"><div class="ttname"><a href="../../d8/dbe/bcache_8c.html#a7fe70a3bde433ce728153e9cef36a0b1">bcache_super_block::uuid</a></div><div class="ttdeci">uint8_t uuid[16]</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbe/bcache_8c_source.html#l00034">bcache.c:34</a></div></div>
<div class="ttc" id="abcache_8c_html_a843c93fa653971a852fe4ae95305622d"><div class="ttname"><a href="../../d8/dbe/bcache_8c.html#a843c93fa653971a852fe4ae95305622d">bcache_super_block::magic</a></div><div class="ttdeci">uint8_t magic[16]</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbe/bcache_8c_source.html#l00032">bcache.c:32</a></div></div>
<div class="ttc" id="abcache_8c_html_ad6813a950d6be4a06b73109f66740524"><div class="ttname"><a href="../../d8/dbe/bcache_8c.html#ad6813a950d6be4a06b73109f66740524">BCACHE_SB_OFF</a></div><div class="ttdeci">#define BCACHE_SB_OFF</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbe/bcache_8c_source.html#l00083">bcache.c:83</a></div></div>
<div class="ttc" id="abcache_8c_html_ae115ccb5cb9e86b71a3652a6df7a5c2e"><div class="ttname"><a href="../../d8/dbe/bcache_8c.html#ae115ccb5cb9e86b71a3652a6df7a5c2e">bcache_super_block::label</a></div><div class="ttdeci">uint8_t label[SB_LABEL_SIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbe/bcache_8c_source.html#l00039">bcache.c:39</a></div></div>
<div class="ttc" id="abcache_8c_html_afdd2fb17e6e9e23a33ae7d3ef3e64a12"><div class="ttname"><a href="../../d8/dbe/bcache_8c.html#afdd2fb17e6e9e23a33ae7d3ef3e64a12">SB_LABEL_SIZE</a></div><div class="ttdeci">#define SB_LABEL_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbe/bcache_8c_source.html#l00019">bcache.c:19</a></div></div>
<div class="ttc" id="abcache_8c_html_d9/d4f/structbcache__super__block"><div class="ttname"><a href="../../d8/dbe/bcache_8c.html#d9/d4f/structbcache__super__block">bcache_super_block</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbe/bcache_8c_source.html#l00027">bcache.c:27</a></div></div>
<div class="ttc" id="abusybox_2util-linux_2volume__id_2util_8c_html_a3629b5eaf1943e2f4634bd5913959b04"><div class="ttname"><a href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#a3629b5eaf1943e2f4634bd5913959b04">volume_id_set_label_string</a></div><div class="ttdeci">void volume_id_set_label_string(struct volume_id *id, const uint8_t *buf, size_t count)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00115">util.c:115</a></div></div>
<div class="ttc" id="abusybox_2util-linux_2volume__id_2util_8c_html_aaaf5289e506677e73ce13f40c67fb188"><div class="ttname"><a href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#aaaf5289e506677e73ce13f40c67fb188">volume_id_set_uuid</a></div><div class="ttdeci">void volume_id_set_uuid(struct volume_id *id, const uint8_t *buf, enum uuid_format format)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00135">util.c:135</a></div></div>
<div class="ttc" id="aconvert_8h_html_ac376fcece8fcc2d0f8b1cf3de18b10df"><div class="ttname"><a href="../../d3/d82/convert_8h.html#ac376fcece8fcc2d0f8b1cf3de18b10df">memcmp</a></div><div class="ttdeci">int memcmp(const void *vl, const void *vr, size_t n)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d68/convert_8cpp_source.html#l00030">convert.cpp:30</a></div></div>
<div class="ttc" id="aglob__loop_8c_html_a5f3f8891e3f4c9d8d7effae7eb271604"><div class="ttname"><a href="../../d8/d64/glob__loop_8c.html#a5f3f8891e3f4c9d8d7effae7eb271604">return</a></div><div class="ttdeci">return(0)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/dbe/bcache_8c_source.html#l00079">BCACHE_SB_MAGIC</a>, <a class="el" href="../../d8/dbe/bcache_8c_source.html#l00081">BCACHE_SB_MAGIC_LEN</a>, <a class="el" href="../../d8/dbe/bcache_8c_source.html#l00083">BCACHE_SB_OFF</a>, <a class="el" href="../../d8/dbe/bcache_8c_source.html#l00039">bcache_super_block::label</a>, <a class="el" href="../../d8/dbe/bcache_8c_source.html#l00032">bcache_super_block::magic</a>, <a class="el" href="../../d3/d68/convert_8cpp_source.html#l00030">memcmp()</a>, <a class="el" href="../../d0/df4/Kernel_2include_2types_8h_source.html#l00037">NULL</a>, <a class="el" href="../../d8/dbe/bcache_8c_source.html#l00019">SB_LABEL_SIZE</a>, <a class="el" href="../../d8/dbe/bcache_8c_source.html#l00034">bcache_super_block::uuid</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00126">UUID_DCE</a>, <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00179">volume_id_get_buffer()</a>, <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00115">volume_id_set_label_string()</a>, and <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00135">volume_id_set_uuid()</a>.</p>

</div>
</div>
<a id="a1ed328eeacf599ec9b8c7fe036cea6ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ed328eeacf599ec9b8c7fe036cea6ce">&#9670;&nbsp;</a></span>volume_id_probe_btrfs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a> volume_id_probe_btrfs </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/db6/btrfs_8c_source.html#l00087">87</a> of file <a class="el" href="../../d2/db6/btrfs_8c_source.html">btrfs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;{</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="comment">// btrfs has superblocks at 64K, 64M and 256G</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="comment">// minimum btrfs size is 256M</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="comment">// so we never step out the device if we analyze</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="comment">// the first and the second superblocks</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d2/db6/btrfs_8c.html#d3/d06/structbtrfs__super__block">btrfs_super_block</a> *sb;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="../../da/d86/cramfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a> = 64;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; </div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordflow">while</span> (<a class="code" href="../../da/d86/cramfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a> &lt; 64*1024*1024) {</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <a class="code" href="../../da/d86/cramfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a> *= 1024;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;btrfs: probing at offset 0x%x&quot;</span>, <a class="code" href="../../da/d86/cramfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a>);</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160; </div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        sb = <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#ad52c7b05017442dbe08091a85ef92710">volume_id_get_buffer</a>(<span class="keywordtype">id</span>, <a class="code" href="../../da/d86/cramfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a>, <span class="keyword">sizeof</span>(*sb));</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        <span class="keywordflow">if</span> (sb == <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;            <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160; </div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d3/d82/convert_8h.html#ac376fcece8fcc2d0f8b1cf3de18b10df">memcmp</a>(sb-&gt;<a class="code" href="../../d2/db6/btrfs_8c.html#ae771b896f1f66b5dff43b76a796249f8">magic</a>, <a class="code" href="../../d2/db6/btrfs_8c.html#aba8bed4fdd10cd97fafac4187f35af9f">BTRFS_MAGIC</a>, 8) != 0)</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;            <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    }</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160; </div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="comment">// N.B.: btrfs natively supports 256 (&gt;VOLUME_ID_LABEL_SIZE) size labels</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#a3629b5eaf1943e2f4634bd5913959b04">volume_id_set_label_string</a>(<span class="keywordtype">id</span>, sb-&gt;<a class="code" href="../../d2/db6/btrfs_8c.html#a9b5865879300b6dfa62780e0202ca922">label</a>, <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a70366446adc457ccbb282d3871e6ff77">VOLUME_ID_LABEL_SIZE</a>);</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#aaaf5289e506677e73ce13f40c67fb188">volume_id_set_uuid</a>(<span class="keywordtype">id</span>, sb-&gt;<a class="code" href="../../d2/db6/btrfs_8c.html#a74bff2cc45f684db7e466a87118353ab">fsid</a>, <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a72f809f0cc1f63120f83a9fe78f026f1a4bd0e1bee402481edbff5b037158c245">UUID_DCE</a>);</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    IF_FEATURE_BLKID_TYPE(id-&gt;type = <span class="stringliteral">&quot;btrfs&quot;</span>;)</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160; </div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <a class="code" href="../../d8/d64/glob__loop_8c.html#a5f3f8891e3f4c9d8d7effae7eb271604">return</a> 0;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;}</div>
<div class="ttc" id="abtrfs_8c_html_a74bff2cc45f684db7e466a87118353ab"><div class="ttname"><a href="../../d2/db6/btrfs_8c.html#a74bff2cc45f684db7e466a87118353ab">btrfs_super_block::fsid</a></div><div class="ttdeci">uint8_t fsid[BTRFS_FSID_SIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db6/btrfs_8c_source.html#l00056">btrfs.c:56</a></div></div>
<div class="ttc" id="abtrfs_8c_html_a9b5865879300b6dfa62780e0202ca922"><div class="ttname"><a href="../../d2/db6/btrfs_8c.html#a9b5865879300b6dfa62780e0202ca922">btrfs_super_block::label</a></div><div class="ttdeci">uint8_t label[BTRFS_LABEL_SIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db6/btrfs_8c_source.html#l00083">btrfs.c:83</a></div></div>
<div class="ttc" id="abtrfs_8c_html_aba8bed4fdd10cd97fafac4187f35af9f"><div class="ttname"><a href="../../d2/db6/btrfs_8c.html#aba8bed4fdd10cd97fafac4187f35af9f">BTRFS_MAGIC</a></div><div class="ttdeci">#define BTRFS_MAGIC</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db6/btrfs_8c_source.html#l00035">btrfs.c:35</a></div></div>
<div class="ttc" id="abtrfs_8c_html_ae771b896f1f66b5dff43b76a796249f8"><div class="ttname"><a href="../../d2/db6/btrfs_8c.html#ae771b896f1f66b5dff43b76a796249f8">btrfs_super_block::magic</a></div><div class="ttdeci">uint8_t magic[8]</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db6/btrfs_8c_source.html#l00059">btrfs.c:59</a></div></div>
<div class="ttc" id="abtrfs_8c_html_d3/d06/structbtrfs__super__block"><div class="ttname"><a href="../../d2/db6/btrfs_8c.html#d3/d06/structbtrfs__super__block">btrfs_super_block</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db6/btrfs_8c_source.html#l00054">btrfs.c:54</a></div></div>
<div class="ttc" id="avolume__id__internal_8h_html_a70366446adc457ccbb282d3871e6ff77"><div class="ttname"><a href="../../dd/dd1/volume__id__internal_8h.html#a70366446adc457ccbb282d3871e6ff77">VOLUME_ID_LABEL_SIZE</a></div><div class="ttdeci">#define VOLUME_ID_LABEL_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd1/volume__id__internal_8h_source.html#l00033">volume_id_internal.h:33</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d2/db6/btrfs_8c_source.html#l00035">BTRFS_MAGIC</a>, <a class="el" href="../../d7/d8f/decompress__bunzip2_8c_source.html#l00047">dbg</a>, <a class="el" href="../../d2/db6/btrfs_8c_source.html#l00056">btrfs_super_block::fsid</a>, <a class="el" href="../../d2/db6/btrfs_8c_source.html#l00083">btrfs_super_block::label</a>, <a class="el" href="../../d2/db6/btrfs_8c_source.html#l00059">btrfs_super_block::magic</a>, <a class="el" href="../../d3/d68/convert_8cpp_source.html#l00030">memcmp()</a>, <a class="el" href="../../d0/df4/Kernel_2include_2types_8h_source.html#l00037">NULL</a>, <a class="el" href="../../da/d86/cramfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00126">UUID_DCE</a>, <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00179">volume_id_get_buffer()</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00033">VOLUME_ID_LABEL_SIZE</a>, <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00115">volume_id_set_label_string()</a>, and <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00135">volume_id_set_uuid()</a>.</p>

</div>
</div>
<a id="ad5390f81005a1a4d39c8ef1d111906dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5390f81005a1a4d39c8ef1d111906dd">&#9670;&nbsp;</a></span>volume_id_probe_cramfs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a> volume_id_probe_cramfs </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d86/cramfs_8c_source.html#l00044">44</a> of file <a class="el" href="../../da/d86/cramfs_8c_source.html">cramfs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;{</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#define off ((uint64_t)0)</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../da/d86/cramfs_8c.html#d6/dae/structcramfs__super">cramfs_super</a> *cs;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160; </div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;probing at offset 0x%llx&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>) <a class="code" href="../../da/d86/cramfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a>);</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160; </div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    cs = <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#ad52c7b05017442dbe08091a85ef92710">volume_id_get_buffer</a>(<span class="keywordtype">id</span>, <a class="code" href="../../da/d86/cramfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a>, 0x200);</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <span class="keywordflow">if</span> (cs == <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160; </div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="keywordflow">if</span> (cs-&gt;<a class="code" href="../../da/d86/cramfs_8c.html#a5232ea5e194af655aceb5e446e3b7bf6">magic</a> == <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#afd3274bb70aea7cf9be403940e001cc7">cpu_to_be32</a>(0x453dcd28)) {</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment">//      volume_id_set_label_raw(id, cs-&gt;name, 16);</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#a3629b5eaf1943e2f4634bd5913959b04">volume_id_set_label_string</a>(<span class="keywordtype">id</span>, cs-&gt;<a class="code" href="../../da/d86/cramfs_8c.html#a50d4fc0dd819ade0b67d2dc4cb78acb4">name</a>, 16);</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160; </div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">//      volume_id_set_usage(id, VOLUME_ID_FILESYSTEM);</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;        IF_FEATURE_BLKID_TYPE(id-&gt;type = <span class="stringliteral">&quot;cramfs&quot;</span>;)</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        <a class="code" href="../../d8/d64/glob__loop_8c.html#a5f3f8891e3f4c9d8d7effae7eb271604">return</a> 0;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    }</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160; </div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <a class="code" href="../../d8/d64/glob__loop_8c.html#a5f3f8891e3f4c9d8d7effae7eb271604">return</a> -1;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;}</div>
<div class="ttc" id="acramfs_8c_html_a50d4fc0dd819ade0b67d2dc4cb78acb4"><div class="ttname"><a href="../../da/d86/cramfs_8c.html#a50d4fc0dd819ade0b67d2dc4cb78acb4">cramfs_super::name</a></div><div class="ttdeci">uint8_t name[16]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d86/cramfs_8c_source.html#l00041">cramfs.c:41</a></div></div>
<div class="ttc" id="acramfs_8c_html_a5232ea5e194af655aceb5e446e3b7bf6"><div class="ttname"><a href="../../da/d86/cramfs_8c.html#a5232ea5e194af655aceb5e446e3b7bf6">cramfs_super::magic</a></div><div class="ttdeci">uint32_t magic</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d86/cramfs_8c_source.html#l00030">cramfs.c:30</a></div></div>
<div class="ttc" id="acramfs_8c_html_d6/dae/structcramfs__super"><div class="ttname"><a href="../../da/d86/cramfs_8c.html#d6/dae/structcramfs__super">cramfs_super</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d86/cramfs_8c_source.html#l00029">cramfs.c:29</a></div></div>
<div class="ttc" id="avolume__id__internal_8h_html_afd3274bb70aea7cf9be403940e001cc7"><div class="ttname"><a href="../../dd/dd1/volume__id__internal_8h.html#afd3274bb70aea7cf9be403940e001cc7">cpu_to_be32</a></div><div class="ttdeci">#define cpu_to_be32(x)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd1/volume__id__internal_8h_source.html#l00116">volume_id_internal.h:116</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00116">cpu_to_be32</a>, <a class="el" href="../../d7/d8f/decompress__bunzip2_8c_source.html#l00047">dbg</a>, <a class="el" href="../../da/d86/cramfs_8c_source.html#l00030">cramfs_super::magic</a>, <a class="el" href="../../da/d86/cramfs_8c_source.html#l00041">cramfs_super::name</a>, <a class="el" href="../../d0/df4/Kernel_2include_2types_8h_source.html#l00037">NULL</a>, <a class="el" href="../../da/d86/cramfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a>, <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00179">volume_id_get_buffer()</a>, and <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00115">volume_id_set_label_string()</a>.</p>

</div>
</div>
<a id="ac67d5335c797858076cd8f87a8ea6cc4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac67d5335c797858076cd8f87a8ea6cc4">&#9670;&nbsp;</a></span>volume_id_probe_erofs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a> volume_id_probe_erofs </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/de1/erofs_8c_source.html#l00045">45</a> of file <a class="el" href="../../dc/de1/erofs_8c_source.html">erofs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;{</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../dc/de1/erofs_8c.html#da/d02/structerofs__super__block">erofs_super_block</a> *sb;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160; </div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <a class="code" href="../../d7/dd7/libbb_8h.html#a0fc08f11f6c83dbc94a75ca49d29fae8">BUILD_BUG_ON</a>(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="../../dc/de1/erofs_8c.html#da/d02/structerofs__super__block">erofs_super_block</a>) != 128);</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160; </div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;erofs: probing at offset 0x%llx&quot;</span>, <a class="code" href="../../dc/de1/erofs_8c.html#a942f1857d9e38c454ae1889697458cd9">EROFS_SUPER_OFFSET</a>);</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    sb = <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#ad52c7b05017442dbe08091a85ef92710">volume_id_get_buffer</a>(<span class="keywordtype">id</span>, <a class="code" href="../../dc/de1/erofs_8c.html#a942f1857d9e38c454ae1889697458cd9">EROFS_SUPER_OFFSET</a>, <span class="keyword">sizeof</span>(*sb));</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="keywordflow">if</span> (!sb)</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160; </div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="keywordflow">if</span> (sb-&gt;<a class="code" href="../../dc/de1/erofs_8c.html#aa127dfefbbebc312954fb8d41d9dbad5">magic</a> != <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a1d5ae0c36d519a1b0a789db69a598f28">cpu_to_le32</a>(<a class="code" href="../../dc/de1/erofs_8c.html#af69a3690632271550aa314ec4ea348e5">EROFS_SUPER_MAGIC_V1</a>))</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160; </div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    IF_FEATURE_BLKID_TYPE(id-&gt;type = <span class="stringliteral">&quot;erofs&quot;</span>);</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160; </div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#a3629b5eaf1943e2f4634bd5913959b04">volume_id_set_label_string</a>(<span class="keywordtype">id</span>, sb-&gt;<a class="code" href="../../dc/de1/erofs_8c.html#ab0bf55df4945f7a879e0bacdb049d526">volume_name</a>,</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a3acffbd305ee72dcd4593c0d8af64a4f">MIN</a>(<span class="keyword">sizeof</span>(sb-&gt;<a class="code" href="../../dc/de1/erofs_8c.html#ab0bf55df4945f7a879e0bacdb049d526">volume_name</a>), <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a70366446adc457ccbb282d3871e6ff77">VOLUME_ID_LABEL_SIZE</a>));</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160; </div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#aaaf5289e506677e73ce13f40c67fb188">volume_id_set_uuid</a>(<span class="keywordtype">id</span>, sb-&gt;<a class="code" href="../../dc/de1/erofs_8c.html#a8997894da92f15e23617c932212bab96">uuid</a>, <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a72f809f0cc1f63120f83a9fe78f026f1a4bd0e1bee402481edbff5b037158c245">UUID_DCE</a>);</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160; </div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;}</div>
<div class="ttc" id="aKernel_2include_2types_8h_html_a3acffbd305ee72dcd4593c0d8af64a4f"><div class="ttname"><a href="../../d0/df4/Kernel_2include_2types_8h.html#a3acffbd305ee72dcd4593c0d8af64a4f">MIN</a></div><div class="ttdeci">#define MIN(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/Kernel_2include_2types_8h_source.html#l00092">types.h:92</a></div></div>
<div class="ttc" id="aerofs_8c_html_a8997894da92f15e23617c932212bab96"><div class="ttname"><a href="../../dc/de1/erofs_8c.html#a8997894da92f15e23617c932212bab96">erofs_super_block::uuid</a></div><div class="ttdeci">uint8_t uuid[16]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/de1/erofs_8c_source.html#l00039">erofs.c:39</a></div></div>
<div class="ttc" id="aerofs_8c_html_a942f1857d9e38c454ae1889697458cd9"><div class="ttname"><a href="../../dc/de1/erofs_8c.html#a942f1857d9e38c454ae1889697458cd9">EROFS_SUPER_OFFSET</a></div><div class="ttdeci">#define EROFS_SUPER_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/de1/erofs_8c_source.html#l00020">erofs.c:20</a></div></div>
<div class="ttc" id="aerofs_8c_html_aa127dfefbbebc312954fb8d41d9dbad5"><div class="ttname"><a href="../../dc/de1/erofs_8c.html#aa127dfefbbebc312954fb8d41d9dbad5">erofs_super_block::magic</a></div><div class="ttdeci">uint32_t magic</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/de1/erofs_8c_source.html#l00025">erofs.c:25</a></div></div>
<div class="ttc" id="aerofs_8c_html_ab0bf55df4945f7a879e0bacdb049d526"><div class="ttname"><a href="../../dc/de1/erofs_8c.html#ab0bf55df4945f7a879e0bacdb049d526">erofs_super_block::volume_name</a></div><div class="ttdeci">uint8_t volume_name[16]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/de1/erofs_8c_source.html#l00040">erofs.c:40</a></div></div>
<div class="ttc" id="aerofs_8c_html_af69a3690632271550aa314ec4ea348e5"><div class="ttname"><a href="../../dc/de1/erofs_8c.html#af69a3690632271550aa314ec4ea348e5">EROFS_SUPER_MAGIC_V1</a></div><div class="ttdeci">#define EROFS_SUPER_MAGIC_V1</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/de1/erofs_8c_source.html#l00019">erofs.c:19</a></div></div>
<div class="ttc" id="aerofs_8c_html_da/d02/structerofs__super__block"><div class="ttname"><a href="../../dc/de1/erofs_8c.html#da/d02/structerofs__super__block">erofs_super_block</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/de1/erofs_8c_source.html#l00024">erofs.c:24</a></div></div>
<div class="ttc" id="alibbb_8h_html_a0fc08f11f6c83dbc94a75ca49d29fae8"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#a0fc08f11f6c83dbc94a75ca49d29fae8">BUILD_BUG_ON</a></div><div class="ttdeci">#define BUILD_BUG_ON(condition)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dd7/libbb_8h_source.html#l02418">libbb.h:2418</a></div></div>
<div class="ttc" id="avolume__id__internal_8h_html_a1d5ae0c36d519a1b0a789db69a598f28"><div class="ttname"><a href="../../dd/dd1/volume__id__internal_8h.html#a1d5ae0c36d519a1b0a789db69a598f28">cpu_to_le32</a></div><div class="ttdeci">#define cpu_to_le32(x)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd1/volume__id__internal_8h_source.html#l00115">volume_id_internal.h:115</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/dd7/libbb_8h_source.html#l02418">BUILD_BUG_ON</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00115">cpu_to_le32</a>, <a class="el" href="../../d7/d8f/decompress__bunzip2_8c_source.html#l00047">dbg</a>, <a class="el" href="../../dc/de1/erofs_8c_source.html#l00019">EROFS_SUPER_MAGIC_V1</a>, <a class="el" href="../../dc/de1/erofs_8c_source.html#l00020">EROFS_SUPER_OFFSET</a>, <a class="el" href="../../dc/de1/erofs_8c_source.html#l00025">erofs_super_block::magic</a>, <a class="el" href="../../d0/df4/Kernel_2include_2types_8h_source.html#l00092">MIN</a>, <a class="el" href="../../dc/de1/erofs_8c_source.html#l00039">erofs_super_block::uuid</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00126">UUID_DCE</a>, <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00179">volume_id_get_buffer()</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00033">VOLUME_ID_LABEL_SIZE</a>, <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00115">volume_id_set_label_string()</a>, <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00135">volume_id_set_uuid()</a>, and <a class="el" href="../../dc/de1/erofs_8c_source.html#l00040">erofs_super_block::volume_name</a>.</p>

</div>
</div>
<a id="a019ae1351bae0afee3392509712649d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a019ae1351bae0afee3392509712649d9">&#9670;&nbsp;</a></span>volume_id_probe_exfat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a> volume_id_probe_exfat </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d54/exfat_8c_source.html#l00075">75</a> of file <a class="el" href="../../dd/d54/exfat_8c_source.html">exfat.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;{</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../dd/d54/exfat_8c.html#d7/d8b/structexfat__super__block">exfat_super_block</a> *sb;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../dd/d54/exfat_8c.html#dd/d4b/structexfat__dir__entry">exfat_dir_entry</a> *de;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="keywordtype">unsigned</span>    sector_sz;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="keywordtype">unsigned</span>    cluster_sz;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <a class="code" href="../../dd/ddd/arithmetic__operations_8c.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a>    root_dir_off;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="keywordtype">unsigned</span>    <a class="code" href="../../d2/dd6/dd_8c.html#ac74ae34e9c58234aacabb6867b245c58">count</a>;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="keywordtype">unsigned</span>    need_lbl_guid;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160; </div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="comment">// Primary super block</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;exFAT: probing at offset 0x%x&quot;</span>, <a class="code" href="../../dd/d54/exfat_8c.html#ad6fe1a5b33690946a12c02aeeb448fdf">EXFAT_SB_OFFSET</a>);</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    sb = <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#ad52c7b05017442dbe08091a85ef92710">volume_id_get_buffer</a>(<span class="keywordtype">id</span>, <a class="code" href="../../dd/d54/exfat_8c.html#ad6fe1a5b33690946a12c02aeeb448fdf">EXFAT_SB_OFFSET</a>, <span class="keyword">sizeof</span>(*sb));</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160; </div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="keywordflow">if</span> (!sb)</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160; </div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d82/convert_8h.html#ac376fcece8fcc2d0f8b1cf3de18b10df">memcmp</a>(sb-&gt;<a class="code" href="../../dd/d54/exfat_8c.html#a06cc8bccdc41961d8676c6eb8aca6dd1">fs_name</a>, <span class="stringliteral">&quot;EXFAT   &quot;</span>, 8) != 0)</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160; </div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    sector_sz = 1 &lt;&lt; sb-&gt;<a class="code" href="../../dd/d54/exfat_8c.html#ab19e0324250ba89034677a84628a9042">bytes_per_sector</a>;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    cluster_sz = sector_sz &lt;&lt; sb-&gt;<a class="code" href="../../dd/d54/exfat_8c.html#a7e65e5847461e1f5172b23d5aaef58f9">sectors_per_cluster</a>;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="comment">// There are no clusters 0 and 1, so the first cluster is 2.</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    root_dir_off = (<a class="code" href="../../dd/ddd/arithmetic__operations_8c.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a>)<a class="code" href="../../dd/d54/exfat_8c.html#ad6fe1a5b33690946a12c02aeeb448fdf">EXFAT_SB_OFFSET</a> +</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        <span class="comment">// Hmm... should we cast sector_sz/cluster_sz to uint64_t?</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        (<a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a48f527b00bc1d5e46366d720280a1039">le32_to_cpu</a>(sb-&gt;<a class="code" href="../../dd/d54/exfat_8c.html#aad8ff18e1081d660dc9a30a2f0651ec6">cluster_heap_offset</a>)) * sector_sz +</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        (<a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a48f527b00bc1d5e46366d720280a1039">le32_to_cpu</a>(sb-&gt;<a class="code" href="../../dd/d54/exfat_8c.html#a6e22e126c4a88e6543f832aa6866512c">root_dir</a>) - 2) * cluster_sz;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;exFAT: sector size 0x%x bytes&quot;</span>, sector_sz);</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;exFAT: cluster size 0x%x bytes&quot;</span>, cluster_sz);</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;exFAT: root dir is at 0x%llx&quot;</span>, (<span class="keywordtype">long</span> <span class="keywordtype">long</span>)root_dir_off);</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160; </div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="comment">// Use DOS uuid as fallback, if no GUID set</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#aaaf5289e506677e73ce13f40c67fb188">volume_id_set_uuid</a>(<span class="keywordtype">id</span>, sb-&gt;<a class="code" href="../../dd/d54/exfat_8c.html#aa92d06b2467f025f306f82143fface6b">vol_serial_nr</a>, <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a72f809f0cc1f63120f83a9fe78f026f1a979167e82bd9d4c12bd02a8bd2d35a44">UUID_DOS</a>);</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160; </div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="comment">// EXFAT_MAX_DIR_ENTRIES is used as a safety belt.</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="comment">// The Root Directory may hold an unlimited number of entries,</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="comment">// so we do not want to check all. Usually label and GUID</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="comment">// are in the beginning, but there are no guarantees.</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    need_lbl_guid = (1 &lt;&lt; 0) | (1 &lt;&lt; 1);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../d2/dd6/dd_8c.html#ac74ae34e9c58234aacabb6867b245c58">count</a> = 0; <a class="code" href="../../d2/dd6/dd_8c.html#ac74ae34e9c58234aacabb6867b245c58">count</a> &lt; <a class="code" href="../../dd/d54/exfat_8c.html#aaed2beb0373a78d38dc219c9b1044c17">EXFAT_MAX_DIR_ENTRIES</a>; <a class="code" href="../../d2/dd6/dd_8c.html#ac74ae34e9c58234aacabb6867b245c58">count</a>++) {</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        de = <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#ad52c7b05017442dbe08091a85ef92710">volume_id_get_buffer</a>(<span class="keywordtype">id</span>, root_dir_off + (<a class="code" href="../../d2/dd6/dd_8c.html#ac74ae34e9c58234aacabb6867b245c58">count</a> * <a class="code" href="../../dd/d54/exfat_8c.html#a9966c58b6f567b87112c322849e9b790">EXFAT_DIR_ENTRY_SZ</a>), <a class="code" href="../../dd/d54/exfat_8c.html#a9966c58b6f567b87112c322849e9b790">EXFAT_DIR_ENTRY_SZ</a>);</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        <span class="keywordflow">if</span> (de == <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        <span class="keywordflow">if</span> (de-&gt;<a class="code" href="../../dd/d54/exfat_8c.html#a3ee5a4fcf0414bee4588d145ea1f4450">entry_type</a> == 0x00) {</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;            <span class="comment">// End of Directory Marker</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;            <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;exFAT: End of root directory reached after %u entries&quot;</span>, <a class="code" href="../../d2/dd6/dd_8c.html#ac74ae34e9c58234aacabb6867b245c58">count</a>);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        }</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        <span class="keywordflow">if</span> (de-&gt;<a class="code" href="../../dd/d54/exfat_8c.html#a3ee5a4fcf0414bee4588d145ea1f4450">entry_type</a> == 0x83) {</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;            <span class="comment">// Volume Label Directory Entry</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;            <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#a647a5f7f037d4d3506b2811021805bda">volume_id_set_label_unicode16</a>(<span class="keywordtype">id</span>, (<a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a3cb4a16b0e8d6af0af86d4fd6ba5fd9d">uint8_t</a> *)de-&gt;<a class="code" href="../../dd/d54/exfat_8c.html#aa59e0ef6d84eb62276a12c17efd0476f">type</a>.label.vol_label,</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                        <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#aceb52d5e58265d474290d1e17bcf1716a662ed4b51721a45f07d645d4ca099a61">LE</a>, 2 * de-&gt;<a class="code" href="../../dd/d54/exfat_8c.html#aa59e0ef6d84eb62276a12c17efd0476f">type</a>.label.char_count);</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;            need_lbl_guid &amp;= ~(1 &lt;&lt; 0);</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        }</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        <span class="keywordflow">if</span> (de-&gt;<a class="code" href="../../dd/d54/exfat_8c.html#a3ee5a4fcf0414bee4588d145ea1f4450">entry_type</a> == 0xA0) {</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;            <span class="comment">// Volume GUID Directory Entry</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;            <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#aaaf5289e506677e73ce13f40c67fb188">volume_id_set_uuid</a>(<span class="keywordtype">id</span>, de-&gt;<a class="code" href="../../dd/d54/exfat_8c.html#aa59e0ef6d84eb62276a12c17efd0476f">type</a>.guid.vol_guid, <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a72f809f0cc1f63120f83a9fe78f026f1a4bd0e1bee402481edbff5b037158c245">UUID_DCE</a>);</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;            need_lbl_guid &amp;= ~(1 &lt;&lt; 1);</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        }</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        <span class="keywordflow">if</span> (!need_lbl_guid)</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    }</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160; </div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    IF_FEATURE_BLKID_TYPE(id-&gt;type = <span class="stringliteral">&quot;exfat&quot;</span>;)</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <a class="code" href="../../d8/d64/glob__loop_8c.html#a5f3f8891e3f4c9d8d7effae7eb271604">return</a> 0;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;}</div>
<div class="ttc" id="aarithmetic__operations_8c_html_aaa5d1cd013383c889537491c3cfd9aad"><div class="ttname"><a href="../../dd/ddd/arithmetic__operations_8c.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a></div><div class="ttdeci">unsigned long long uint64_t</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/ddd/arithmetic__operations_8c_source.html#l00294">arithmetic_operations.c:294</a></div></div>
<div class="ttc" id="abusybox_2util-linux_2volume__id_2util_8c_html_a647a5f7f037d4d3506b2811021805bda"><div class="ttname"><a href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#a647a5f7f037d4d3506b2811021805bda">volume_id_set_label_unicode16</a></div><div class="ttdeci">void volume_id_set_label_unicode16(struct volume_id *id, const uint8_t *buf, enum endian endianess, size_t count)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00130">util.c:130</a></div></div>
<div class="ttc" id="add_8c_html_ac74ae34e9c58234aacabb6867b245c58"><div class="ttname"><a href="../../d2/dd6/dd_8c.html#ac74ae34e9c58234aacabb6867b245c58">count</a></div><div class="ttdeci">#define count</div></div>
<div class="ttc" id="aexfat_8c_html_a06cc8bccdc41961d8676c6eb8aca6dd1"><div class="ttname"><a href="../../dd/d54/exfat_8c.html#a06cc8bccdc41961d8676c6eb8aca6dd1">exfat_super_block::fs_name</a></div><div class="ttdeci">uint8_t fs_name[8]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d54/exfat_8c_source.html#l00039">exfat.c:39</a></div></div>
<div class="ttc" id="aexfat_8c_html_a3ee5a4fcf0414bee4588d145ea1f4450"><div class="ttname"><a href="../../dd/d54/exfat_8c.html#a3ee5a4fcf0414bee4588d145ea1f4450">exfat_dir_entry::entry_type</a></div><div class="ttdeci">uint8_t entry_type</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d54/exfat_8c_source.html#l00058">exfat.c:58</a></div></div>
<div class="ttc" id="aexfat_8c_html_a6e22e126c4a88e6543f832aa6866512c"><div class="ttname"><a href="../../dd/d54/exfat_8c.html#a6e22e126c4a88e6543f832aa6866512c">exfat_super_block::root_dir</a></div><div class="ttdeci">uint32_t root_dir</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d54/exfat_8c_source.html#l00047">exfat.c:47</a></div></div>
<div class="ttc" id="aexfat_8c_html_a7e65e5847461e1f5172b23d5aaef58f9"><div class="ttname"><a href="../../dd/d54/exfat_8c.html#a7e65e5847461e1f5172b23d5aaef58f9">exfat_super_block::sectors_per_cluster</a></div><div class="ttdeci">uint8_t sectors_per_cluster</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d54/exfat_8c_source.html#l00052">exfat.c:52</a></div></div>
<div class="ttc" id="aexfat_8c_html_a9966c58b6f567b87112c322849e9b790"><div class="ttname"><a href="../../dd/d54/exfat_8c.html#a9966c58b6f567b87112c322849e9b790">EXFAT_DIR_ENTRY_SZ</a></div><div class="ttdeci">#define EXFAT_DIR_ENTRY_SZ</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d54/exfat_8c_source.html#l00034">exfat.c:34</a></div></div>
<div class="ttc" id="aexfat_8c_html_aa59e0ef6d84eb62276a12c17efd0476f"><div class="ttname"><a href="../../dd/d54/exfat_8c.html#aa59e0ef6d84eb62276a12c17efd0476f">exfat_dir_entry::type</a></div><div class="ttdeci">union exfat_dir_entry::@1134 type</div></div>
<div class="ttc" id="aexfat_8c_html_aa92d06b2467f025f306f82143fface6b"><div class="ttname"><a href="../../dd/d54/exfat_8c.html#aa92d06b2467f025f306f82143fface6b">exfat_super_block::vol_serial_nr</a></div><div class="ttdeci">uint8_t vol_serial_nr[4]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d54/exfat_8c_source.html#l00048">exfat.c:48</a></div></div>
<div class="ttc" id="aexfat_8c_html_aad8ff18e1081d660dc9a30a2f0651ec6"><div class="ttname"><a href="../../dd/d54/exfat_8c.html#aad8ff18e1081d660dc9a30a2f0651ec6">exfat_super_block::cluster_heap_offset</a></div><div class="ttdeci">uint32_t cluster_heap_offset</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d54/exfat_8c_source.html#l00045">exfat.c:45</a></div></div>
<div class="ttc" id="aexfat_8c_html_aaed2beb0373a78d38dc219c9b1044c17"><div class="ttname"><a href="../../dd/d54/exfat_8c.html#aaed2beb0373a78d38dc219c9b1044c17">EXFAT_MAX_DIR_ENTRIES</a></div><div class="ttdeci">#define EXFAT_MAX_DIR_ENTRIES</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d54/exfat_8c_source.html#l00035">exfat.c:35</a></div></div>
<div class="ttc" id="aexfat_8c_html_ab19e0324250ba89034677a84628a9042"><div class="ttname"><a href="../../dd/d54/exfat_8c.html#ab19e0324250ba89034677a84628a9042">exfat_super_block::bytes_per_sector</a></div><div class="ttdeci">uint8_t bytes_per_sector</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d54/exfat_8c_source.html#l00051">exfat.c:51</a></div></div>
<div class="ttc" id="aexfat_8c_html_ad6fe1a5b33690946a12c02aeeb448fdf"><div class="ttname"><a href="../../dd/d54/exfat_8c.html#ad6fe1a5b33690946a12c02aeeb448fdf">EXFAT_SB_OFFSET</a></div><div class="ttdeci">#define EXFAT_SB_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d54/exfat_8c_source.html#l00033">exfat.c:33</a></div></div>
<div class="ttc" id="aexfat_8c_html_d7/d8b/structexfat__super__block"><div class="ttname"><a href="../../dd/d54/exfat_8c.html#d7/d8b/structexfat__super__block">exfat_super_block</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d54/exfat_8c_source.html#l00037">exfat.c:37</a></div></div>
<div class="ttc" id="aexfat_8c_html_dd/d4b/structexfat__dir__entry"><div class="ttname"><a href="../../dd/d54/exfat_8c.html#dd/d4b/structexfat__dir__entry">exfat_dir_entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d54/exfat_8c_source.html#l00057">exfat.c:57</a></div></div>
<div class="ttc" id="avolume__id__internal_8h_html_a48f527b00bc1d5e46366d720280a1039"><div class="ttname"><a href="../../dd/dd1/volume__id__internal_8h.html#a48f527b00bc1d5e46366d720280a1039">le32_to_cpu</a></div><div class="ttdeci">#define le32_to_cpu(x)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd1/volume__id__internal_8h_source.html#l00110">volume_id_internal.h:110</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dd/d54/exfat_8c_source.html#l00051">exfat_super_block::bytes_per_sector</a>, <a class="el" href="../../dd/d54/exfat_8c_source.html#l00045">exfat_super_block::cluster_heap_offset</a>, <a class="el" href="../../d2/dd6/dd_8c.html#ac74ae34e9c58234aacabb6867b245c58">count</a>, <a class="el" href="../../d7/d8f/decompress__bunzip2_8c_source.html#l00047">dbg</a>, <a class="el" href="../../dd/d54/exfat_8c_source.html#l00058">exfat_dir_entry::entry_type</a>, <a class="el" href="../../dd/d54/exfat_8c_source.html#l00034">EXFAT_DIR_ENTRY_SZ</a>, <a class="el" href="../../dd/d54/exfat_8c_source.html#l00035">EXFAT_MAX_DIR_ENTRIES</a>, <a class="el" href="../../dd/d54/exfat_8c_source.html#l00033">EXFAT_SB_OFFSET</a>, <a class="el" href="../../dd/d54/exfat_8c_source.html#l00039">exfat_super_block::fs_name</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00131">LE</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00110">le32_to_cpu</a>, <a class="el" href="../../d3/d68/convert_8cpp_source.html#l00030">memcmp()</a>, <a class="el" href="../../d0/df4/Kernel_2include_2types_8h_source.html#l00037">NULL</a>, <a class="el" href="../../dd/d54/exfat_8c_source.html#l00047">exfat_super_block::root_dir</a>, <a class="el" href="../../dd/d54/exfat_8c_source.html#l00052">exfat_super_block::sectors_per_cluster</a>, <a class="el" href="../../dd/d54/exfat_8c.html#aa59e0ef6d84eb62276a12c17efd0476f">exfat_dir_entry::type</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00126">UUID_DCE</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00124">UUID_DOS</a>, <a class="el" href="../../dd/d54/exfat_8c_source.html#l00048">exfat_super_block::vol_serial_nr</a>, <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00179">volume_id_get_buffer()</a>, <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00130">volume_id_set_label_unicode16()</a>, and <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00135">volume_id_set_uuid()</a>.</p>

</div>
</div>
<a id="a5addea4fc21460eaedef73fa2c13137b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5addea4fc21460eaedef73fa2c13137b">&#9670;&nbsp;</a></span>volume_id_probe_ext()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a> volume_id_probe_ext </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d79/apps_2base_2busybox_2util-linux_2volume__id_2ext_8c_source.html#l00032">32</a> of file <a class="el" href="../../d5/d79/apps_2base_2busybox_2util-linux_2volume__id_2ext_8c_source.html">ext.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;{</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#define off ((uint64_t)0)</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d3/da1/bb__e2fs__defs_8h.html#d9/ddf/structext2__super__block">ext2_super_block</a> *es;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160; </div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;ext: probing at offset 0x%llx&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>) <a class="code" href="../../d5/d79/apps_2base_2busybox_2util-linux_2volume__id_2ext_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a>);</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160; </div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    es = <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#ad52c7b05017442dbe08091a85ef92710">volume_id_get_buffer</a>(<span class="keywordtype">id</span>, <a class="code" href="../../d5/d79/apps_2base_2busybox_2util-linux_2volume__id_2ext_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a> + <a class="code" href="../../d5/d79/apps_2base_2busybox_2util-linux_2volume__id_2ext_8c.html#a4d98e09abb1abc65c5c90ad1d38be9b2">EXT_SUPERBLOCK_OFFSET</a>, 0x200);</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <span class="keywordflow">if</span> (es == <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160; </div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <span class="keywordflow">if</span> (es-&gt;<a class="code" href="../../d3/da1/bb__e2fs__defs_8h.html#a22b76c4f2b2547630739f5c2ebb9d4b9">s_magic</a> != <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#aeda3065f344779edb9023e22d84d5f92">cpu_to_le16</a>(<a class="code" href="../../d3/da1/bb__e2fs__defs_8h.html#a5a4b87af3f4498e3f2a254e8fbfe2ec3">EXT2_SUPER_MAGIC</a>)) {</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;        <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;ext: no magic found&quot;</span>);</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    }</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160; </div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">//  volume_id_set_usage(id, VOLUME_ID_FILESYSTEM);</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">//  volume_id_set_label_raw(id, es-&gt;volume_name, 16);</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#a3629b5eaf1943e2f4634bd5913959b04">volume_id_set_label_string</a>(<span class="keywordtype">id</span>, (<span class="keywordtype">void</span>*)es-&gt;<a class="code" href="../../d3/da1/bb__e2fs__defs_8h.html#aafa5ddd1cf9fbf19aa2b80e83bff5a43">s_volume_name</a>, 16);</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#aaaf5289e506677e73ce13f40c67fb188">volume_id_set_uuid</a>(<span class="keywordtype">id</span>, es-&gt;<a class="code" href="../../d3/da1/bb__e2fs__defs_8h.html#a1a546d295c2dc760ece8bf44c7623eb3">s_uuid</a>, <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a72f809f0cc1f63120f83a9fe78f026f1a4bd0e1bee402481edbff5b037158c245">UUID_DCE</a>);</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;ext: label &#39;%s&#39; uuid &#39;%s&#39;&quot;</span>, id-&gt;<a class="code" href="../../dd/dd1/volume__id__internal_8h.html#aebf9c21fa3fc79b7e98aca176d1e1092">label</a>, id-&gt;<a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a562b7db1b283bafd3a2352cc8738c554">uuid</a>);</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160; </div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#if ENABLE_FEATURE_BLKID_TYPE</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="keywordflow">if</span> ((es-&gt;<a class="code" href="../../d3/da1/bb__e2fs__defs_8h.html#a9c63e7954f0344d3de19aad4099d84c7">s_feature_ro_compat</a> &amp; <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a1d5ae0c36d519a1b0a789db69a598f28">cpu_to_le32</a>(<a class="code" href="../../d3/da1/bb__e2fs__defs_8h.html#a56f58a8cd9c71f56867d9ea507611973">EXT4_FEATURE_RO_COMPAT_HUGE_FILE</a> | <a class="code" href="../../d3/da1/bb__e2fs__defs_8h.html#a57b5056e661e82b795f6aa59dc9a0d54">EXT4_FEATURE_RO_COMPAT_DIR_NLINK</a>))</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;     || (es-&gt;<a class="code" href="../../d3/da1/bb__e2fs__defs_8h.html#a56005d1ae97dc32f86567d018c753440">s_feature_incompat</a> &amp; <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a1d5ae0c36d519a1b0a789db69a598f28">cpu_to_le32</a>(<a class="code" href="../../d3/da1/bb__e2fs__defs_8h.html#a2b5964e6a40562f2660f4a9d582640ed">EXT4_FEATURE_INCOMPAT_EXTENTS</a> | <a class="code" href="../../d3/da1/bb__e2fs__defs_8h.html#a23da78eb88ffed915d78cdc94ae51866">EXT4_FEATURE_INCOMPAT_64BIT</a>))</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    ) {</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        <span class="keywordtype">id</span>-&gt;type = <span class="stringliteral">&quot;ext4&quot;</span>;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    }</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (es-&gt;<a class="code" href="../../d3/da1/bb__e2fs__defs_8h.html#a1cf404a1bcfb748e924c62032cd723a5">s_feature_compat</a> &amp; <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a1d5ae0c36d519a1b0a789db69a598f28">cpu_to_le32</a>(<a class="code" href="../../d3/da1/bb__e2fs__defs_8h.html#a7766c852f11e2eef0d1480e6a9d5127b">EXT3_FEATURE_COMPAT_HAS_JOURNAL</a>))</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        <span class="keywordtype">id</span>-&gt;type = <span class="stringliteral">&quot;ext3&quot;</span>;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        <span class="keywordtype">id</span>-&gt;type = <span class="stringliteral">&quot;ext2&quot;</span>;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;}</div>
<div class="ttc" id="aapps_2base_2busybox_2util-linux_2volume__id_2ext_8c_html_a4d98e09abb1abc65c5c90ad1d38be9b2"><div class="ttname"><a href="../../d5/d79/apps_2base_2busybox_2util-linux_2volume__id_2ext_8c.html#a4d98e09abb1abc65c5c90ad1d38be9b2">EXT_SUPERBLOCK_OFFSET</a></div><div class="ttdeci">#define EXT_SUPERBLOCK_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d79/apps_2base_2busybox_2util-linux_2volume__id_2ext_8c_source.html#l00030">ext.c:30</a></div></div>
<div class="ttc" id="aapps_2base_2busybox_2util-linux_2volume__id_2ext_8c_html_aa8df4166084b06f1e80d3510e5dcf7e1"><div class="ttname"><a href="../../d5/d79/apps_2base_2busybox_2util-linux_2volume__id_2ext_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a></div><div class="ttdeci">#define off</div></div>
<div class="ttc" id="abb__e2fs__defs_8h_html_a1a546d295c2dc760ece8bf44c7623eb3"><div class="ttname"><a href="../../d3/da1/bb__e2fs__defs_8h.html#a1a546d295c2dc760ece8bf44c7623eb3">ext2_super_block::s_uuid</a></div><div class="ttdeci">uint8_t s_uuid[16]</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da1/bb__e2fs__defs_8h_source.html#l00414">bb_e2fs_defs.h:414</a></div></div>
<div class="ttc" id="abb__e2fs__defs_8h_html_a1cf404a1bcfb748e924c62032cd723a5"><div class="ttname"><a href="../../d3/da1/bb__e2fs__defs_8h.html#a1cf404a1bcfb748e924c62032cd723a5">ext2_super_block::s_feature_compat</a></div><div class="ttdeci">uint32_t s_feature_compat</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da1/bb__e2fs__defs_8h_source.html#l00411">bb_e2fs_defs.h:411</a></div></div>
<div class="ttc" id="abb__e2fs__defs_8h_html_a22b76c4f2b2547630739f5c2ebb9d4b9"><div class="ttname"><a href="../../d3/da1/bb__e2fs__defs_8h.html#a22b76c4f2b2547630739f5c2ebb9d4b9">ext2_super_block::s_magic</a></div><div class="ttdeci">uint16_t s_magic</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da1/bb__e2fs__defs_8h_source.html#l00385">bb_e2fs_defs.h:385</a></div></div>
<div class="ttc" id="abb__e2fs__defs_8h_html_a23da78eb88ffed915d78cdc94ae51866"><div class="ttname"><a href="../../d3/da1/bb__e2fs__defs_8h.html#a23da78eb88ffed915d78cdc94ae51866">EXT4_FEATURE_INCOMPAT_64BIT</a></div><div class="ttdeci">#define EXT4_FEATURE_INCOMPAT_64BIT</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da1/bb__e2fs__defs_8h_source.html#l00521">bb_e2fs_defs.h:521</a></div></div>
<div class="ttc" id="abb__e2fs__defs_8h_html_a2b5964e6a40562f2660f4a9d582640ed"><div class="ttname"><a href="../../d3/da1/bb__e2fs__defs_8h.html#a2b5964e6a40562f2660f4a9d582640ed">EXT4_FEATURE_INCOMPAT_EXTENTS</a></div><div class="ttdeci">#define EXT4_FEATURE_INCOMPAT_EXTENTS</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da1/bb__e2fs__defs_8h_source.html#l00520">bb_e2fs_defs.h:520</a></div></div>
<div class="ttc" id="abb__e2fs__defs_8h_html_a56005d1ae97dc32f86567d018c753440"><div class="ttname"><a href="../../d3/da1/bb__e2fs__defs_8h.html#a56005d1ae97dc32f86567d018c753440">ext2_super_block::s_feature_incompat</a></div><div class="ttdeci">uint32_t s_feature_incompat</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da1/bb__e2fs__defs_8h_source.html#l00412">bb_e2fs_defs.h:412</a></div></div>
<div class="ttc" id="abb__e2fs__defs_8h_html_a56f58a8cd9c71f56867d9ea507611973"><div class="ttname"><a href="../../d3/da1/bb__e2fs__defs_8h.html#a56f58a8cd9c71f56867d9ea507611973">EXT4_FEATURE_RO_COMPAT_HUGE_FILE</a></div><div class="ttdeci">#define EXT4_FEATURE_RO_COMPAT_HUGE_FILE</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da1/bb__e2fs__defs_8h_source.html#l00509">bb_e2fs_defs.h:509</a></div></div>
<div class="ttc" id="abb__e2fs__defs_8h_html_a57b5056e661e82b795f6aa59dc9a0d54"><div class="ttname"><a href="../../d3/da1/bb__e2fs__defs_8h.html#a57b5056e661e82b795f6aa59dc9a0d54">EXT4_FEATURE_RO_COMPAT_DIR_NLINK</a></div><div class="ttdeci">#define EXT4_FEATURE_RO_COMPAT_DIR_NLINK</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da1/bb__e2fs__defs_8h_source.html#l00511">bb_e2fs_defs.h:511</a></div></div>
<div class="ttc" id="abb__e2fs__defs_8h_html_a5a4b87af3f4498e3f2a254e8fbfe2ec3"><div class="ttname"><a href="../../d3/da1/bb__e2fs__defs_8h.html#a5a4b87af3f4498e3f2a254e8fbfe2ec3">EXT2_SUPER_MAGIC</a></div><div class="ttdeci">#define EXT2_SUPER_MAGIC</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da1/bb__e2fs__defs_8h_source.html#l00034">bb_e2fs_defs.h:34</a></div></div>
<div class="ttc" id="abb__e2fs__defs_8h_html_a7766c852f11e2eef0d1480e6a9d5127b"><div class="ttname"><a href="../../d3/da1/bb__e2fs__defs_8h.html#a7766c852f11e2eef0d1480e6a9d5127b">EXT3_FEATURE_COMPAT_HAS_JOURNAL</a></div><div class="ttdeci">#define EXT3_FEATURE_COMPAT_HAS_JOURNAL</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da1/bb__e2fs__defs_8h_source.html#l00500">bb_e2fs_defs.h:500</a></div></div>
<div class="ttc" id="abb__e2fs__defs_8h_html_a9c63e7954f0344d3de19aad4099d84c7"><div class="ttname"><a href="../../d3/da1/bb__e2fs__defs_8h.html#a9c63e7954f0344d3de19aad4099d84c7">ext2_super_block::s_feature_ro_compat</a></div><div class="ttdeci">uint32_t s_feature_ro_compat</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da1/bb__e2fs__defs_8h_source.html#l00413">bb_e2fs_defs.h:413</a></div></div>
<div class="ttc" id="abb__e2fs__defs_8h_html_aafa5ddd1cf9fbf19aa2b80e83bff5a43"><div class="ttname"><a href="../../d3/da1/bb__e2fs__defs_8h.html#aafa5ddd1cf9fbf19aa2b80e83bff5a43">ext2_super_block::s_volume_name</a></div><div class="ttdeci">char s_volume_name[16]</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da1/bb__e2fs__defs_8h_source.html#l00415">bb_e2fs_defs.h:415</a></div></div>
<div class="ttc" id="abb__e2fs__defs_8h_html_d9/ddf/structext2__super__block"><div class="ttname"><a href="../../d3/da1/bb__e2fs__defs_8h.html#d9/ddf/structext2__super__block">ext2_super_block</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da1/bb__e2fs__defs_8h_source.html#l00369">bb_e2fs_defs.h:369</a></div></div>
<div class="ttc" id="avolume__id__internal_8h_html_a562b7db1b283bafd3a2352cc8738c554"><div class="ttname"><a href="../../dd/dd1/volume__id__internal_8h.html#a562b7db1b283bafd3a2352cc8738c554">volume_id::uuid</a></div><div class="ttdeci">char uuid[VOLUME_ID_UUID_SIZE+1]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd1/volume__id__internal_8h_source.html#l00082">volume_id_internal.h:82</a></div></div>
<div class="ttc" id="avolume__id__internal_8h_html_aebf9c21fa3fc79b7e98aca176d1e1092"><div class="ttname"><a href="../../dd/dd1/volume__id__internal_8h.html#aebf9c21fa3fc79b7e98aca176d1e1092">volume_id::label</a></div><div class="ttdeci">char label[VOLUME_ID_LABEL_SIZE+1]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd1/volume__id__internal_8h_source.html#l00078">volume_id_internal.h:78</a></div></div>
<div class="ttc" id="avolume__id__internal_8h_html_aeda3065f344779edb9023e22d84d5f92"><div class="ttname"><a href="../../dd/dd1/volume__id__internal_8h.html#aeda3065f344779edb9023e22d84d5f92">cpu_to_le16</a></div><div class="ttdeci">#define cpu_to_le16(x)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd1/volume__id__internal_8h_source.html#l00114">volume_id_internal.h:114</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00114">cpu_to_le16</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00115">cpu_to_le32</a>, <a class="el" href="../../d7/d8f/decompress__bunzip2_8c_source.html#l00047">dbg</a>, <a class="el" href="../../d3/da1/bb__e2fs__defs_8h_source.html#l00034">EXT2_SUPER_MAGIC</a>, <a class="el" href="../../d3/da1/bb__e2fs__defs_8h_source.html#l00500">EXT3_FEATURE_COMPAT_HAS_JOURNAL</a>, <a class="el" href="../../d3/da1/bb__e2fs__defs_8h_source.html#l00521">EXT4_FEATURE_INCOMPAT_64BIT</a>, <a class="el" href="../../d3/da1/bb__e2fs__defs_8h_source.html#l00520">EXT4_FEATURE_INCOMPAT_EXTENTS</a>, <a class="el" href="../../d3/da1/bb__e2fs__defs_8h_source.html#l00511">EXT4_FEATURE_RO_COMPAT_DIR_NLINK</a>, <a class="el" href="../../d3/da1/bb__e2fs__defs_8h_source.html#l00509">EXT4_FEATURE_RO_COMPAT_HUGE_FILE</a>, <a class="el" href="../../d5/d79/apps_2base_2busybox_2util-linux_2volume__id_2ext_8c_source.html#l00030">EXT_SUPERBLOCK_OFFSET</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00078">volume_id::label</a>, <a class="el" href="../../d0/df4/Kernel_2include_2types_8h_source.html#l00037">NULL</a>, <a class="el" href="../../d5/d79/apps_2base_2busybox_2util-linux_2volume__id_2ext_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a>, <a class="el" href="../../d3/da1/bb__e2fs__defs_8h_source.html#l00411">ext2_super_block::s_feature_compat</a>, <a class="el" href="../../d3/da1/bb__e2fs__defs_8h_source.html#l00412">ext2_super_block::s_feature_incompat</a>, <a class="el" href="../../d3/da1/bb__e2fs__defs_8h_source.html#l00413">ext2_super_block::s_feature_ro_compat</a>, <a class="el" href="../../d3/da1/bb__e2fs__defs_8h_source.html#l00385">ext2_super_block::s_magic</a>, <a class="el" href="../../d3/da1/bb__e2fs__defs_8h_source.html#l00414">ext2_super_block::s_uuid</a>, <a class="el" href="../../d3/da1/bb__e2fs__defs_8h_source.html#l00415">ext2_super_block::s_volume_name</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00082">volume_id::uuid</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00126">UUID_DCE</a>, <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00179">volume_id_get_buffer()</a>, <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00115">volume_id_set_label_string()</a>, and <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00135">volume_id_set_uuid()</a>.</p>

</div>
</div>
<a id="a757e41f1c9ca00bb7f59196b9ae94250"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a757e41f1c9ca00bb7f59196b9ae94250">&#9670;&nbsp;</a></span>volume_id_probe_f2fs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a> volume_id_probe_f2fs </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/d8e/f2fs_8c_source.html#l00066">66</a> of file <a class="el" href="../../d2/d8e/f2fs_8c_source.html">f2fs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;{</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d2/d8e/f2fs_8c.html#d6/d9f/structf2fs__super__block">f2fs_super_block</a> *sb;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160; </div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <span class="comment">// Go for primary super block (ignore second sb)</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;f2fs: probing at offset 0x%x&quot;</span>, <a class="code" href="../../d2/d8e/f2fs_8c.html#a96bb278f16583168078ad9254e6149e3">F2FS_SB1_OFFSET</a>);</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    sb = <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#ad52c7b05017442dbe08091a85ef92710">volume_id_get_buffer</a>(<span class="keywordtype">id</span>, <a class="code" href="../../d2/d8e/f2fs_8c.html#a96bb278f16583168078ad9254e6149e3">F2FS_SB1_OFFSET</a>, <span class="keyword">sizeof</span>(*sb));</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160; </div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="keywordflow">if</span> (!sb)</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160; </div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="keywordflow">if</span> (sb-&gt;<a class="code" href="../../d2/d8e/f2fs_8c.html#af323067e7172d3a65ad165e79fd2460e">magic</a> != <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a1d5ae0c36d519a1b0a789db69a598f28">cpu_to_le32</a>(<a class="code" href="../../d2/d8e/f2fs_8c.html#aa008fa7b814983000279e83c26ad2441">F2FS_MAGIC</a>))</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160; </div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    IF_FEATURE_BLKID_TYPE(id-&gt;type = <span class="stringliteral">&quot;f2fs&quot;</span>);</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160; </div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="comment">// For version 1.0 we don&#39;t know sb structure and can&#39;t set label/uuid</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="keywordflow">if</span> (sb-&gt;<a class="code" href="../../d2/d8e/f2fs_8c.html#ae2382eca89ea4789b1e151e6db24c30b">major_ver</a> == <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#aeda3065f344779edb9023e22d84d5f92">cpu_to_le16</a>(1) &amp;&amp; sb-&gt;<a class="code" href="../../d2/d8e/f2fs_8c.html#a7507ffad84a9cff5a0cede24ff572f47">minor_ver</a> == <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#aeda3065f344779edb9023e22d84d5f92">cpu_to_le16</a>(0))</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160; </div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#a647a5f7f037d4d3506b2811021805bda">volume_id_set_label_unicode16</a>(<span class="keywordtype">id</span>, (<a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a3cb4a16b0e8d6af0af86d4fd6ba5fd9d">uint8_t</a> *)sb-&gt;<a class="code" href="../../d2/d8e/f2fs_8c.html#a9767c2bf2ca89cb3fc77b45ebe4bb087">volume_name</a>,</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;                      <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#aceb52d5e58265d474290d1e17bcf1716a662ed4b51721a45f07d645d4ca099a61">LE</a>, <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a3acffbd305ee72dcd4593c0d8af64a4f">MIN</a>(<a class="code" href="../../d2/d8e/f2fs_8c.html#a269d7b2655b47e73927bb9f16502a2b1">F2FS_LABEL_BYTES</a>, <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a70366446adc457ccbb282d3871e6ff77">VOLUME_ID_LABEL_SIZE</a>));</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160; </div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#aaaf5289e506677e73ce13f40c67fb188">volume_id_set_uuid</a>(<span class="keywordtype">id</span>, sb-&gt;<a class="code" href="../../d2/d8e/f2fs_8c.html#a92ec8ff10b721c6985fceb054a111234">uuid</a>, <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a72f809f0cc1f63120f83a9fe78f026f1a4bd0e1bee402481edbff5b037158c245">UUID_DCE</a>);</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160; </div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;}</div>
<div class="ttc" id="af2fs_8c_html_a269d7b2655b47e73927bb9f16502a2b1"><div class="ttname"><a href="../../d2/d8e/f2fs_8c.html#a269d7b2655b47e73927bb9f16502a2b1">F2FS_LABEL_BYTES</a></div><div class="ttdeci">#define F2FS_LABEL_BYTES</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d8e/f2fs_8c_source.html#l00025">f2fs.c:25</a></div></div>
<div class="ttc" id="af2fs_8c_html_a7507ffad84a9cff5a0cede24ff572f47"><div class="ttname"><a href="../../d2/d8e/f2fs_8c.html#a7507ffad84a9cff5a0cede24ff572f47">f2fs_super_block::minor_ver</a></div><div class="ttdeci">uint16_t minor_ver</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d8e/f2fs_8c_source.html#l00034">f2fs.c:34</a></div></div>
<div class="ttc" id="af2fs_8c_html_a92ec8ff10b721c6985fceb054a111234"><div class="ttname"><a href="../../d2/d8e/f2fs_8c.html#a92ec8ff10b721c6985fceb054a111234">f2fs_super_block::uuid</a></div><div class="ttdeci">uint8_t uuid[F2FS_UUID_SIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d8e/f2fs_8c_source.html#l00059">f2fs.c:59</a></div></div>
<div class="ttc" id="af2fs_8c_html_a96bb278f16583168078ad9254e6149e3"><div class="ttname"><a href="../../d2/d8e/f2fs_8c.html#a96bb278f16583168078ad9254e6149e3">F2FS_SB1_OFFSET</a></div><div class="ttdeci">#define F2FS_SB1_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d8e/f2fs_8c_source.html#l00026">f2fs.c:26</a></div></div>
<div class="ttc" id="af2fs_8c_html_a9767c2bf2ca89cb3fc77b45ebe4bb087"><div class="ttname"><a href="../../d2/d8e/f2fs_8c.html#a9767c2bf2ca89cb3fc77b45ebe4bb087">f2fs_super_block::volume_name</a></div><div class="ttdeci">uint16_t volume_name[F2FS_LABEL_SIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d8e/f2fs_8c_source.html#l00060">f2fs.c:60</a></div></div>
<div class="ttc" id="af2fs_8c_html_aa008fa7b814983000279e83c26ad2441"><div class="ttname"><a href="../../d2/d8e/f2fs_8c.html#aa008fa7b814983000279e83c26ad2441">F2FS_MAGIC</a></div><div class="ttdeci">#define F2FS_MAGIC</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d8e/f2fs_8c_source.html#l00022">f2fs.c:22</a></div></div>
<div class="ttc" id="af2fs_8c_html_ae2382eca89ea4789b1e151e6db24c30b"><div class="ttname"><a href="../../d2/d8e/f2fs_8c.html#ae2382eca89ea4789b1e151e6db24c30b">f2fs_super_block::major_ver</a></div><div class="ttdeci">uint16_t major_ver</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d8e/f2fs_8c_source.html#l00033">f2fs.c:33</a></div></div>
<div class="ttc" id="af2fs_8c_html_af323067e7172d3a65ad165e79fd2460e"><div class="ttname"><a href="../../d2/d8e/f2fs_8c.html#af323067e7172d3a65ad165e79fd2460e">f2fs_super_block::magic</a></div><div class="ttdeci">uint32_t magic</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d8e/f2fs_8c_source.html#l00032">f2fs.c:32</a></div></div>
<div class="ttc" id="af2fs_8c_html_d6/d9f/structf2fs__super__block"><div class="ttname"><a href="../../d2/d8e/f2fs_8c.html#d6/d9f/structf2fs__super__block">f2fs_super_block</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d8e/f2fs_8c_source.html#l00031">f2fs.c:31</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00114">cpu_to_le16</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00115">cpu_to_le32</a>, <a class="el" href="../../d7/d8f/decompress__bunzip2_8c_source.html#l00047">dbg</a>, <a class="el" href="../../d2/d8e/f2fs_8c_source.html#l00025">F2FS_LABEL_BYTES</a>, <a class="el" href="../../d2/d8e/f2fs_8c_source.html#l00022">F2FS_MAGIC</a>, <a class="el" href="../../d2/d8e/f2fs_8c_source.html#l00026">F2FS_SB1_OFFSET</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00131">LE</a>, <a class="el" href="../../d2/d8e/f2fs_8c_source.html#l00032">f2fs_super_block::magic</a>, <a class="el" href="../../d2/d8e/f2fs_8c_source.html#l00033">f2fs_super_block::major_ver</a>, <a class="el" href="../../d0/df4/Kernel_2include_2types_8h_source.html#l00092">MIN</a>, <a class="el" href="../../d2/d8e/f2fs_8c_source.html#l00034">f2fs_super_block::minor_ver</a>, <a class="el" href="../../d2/d8e/f2fs_8c_source.html#l00059">f2fs_super_block::uuid</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00126">UUID_DCE</a>, <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00179">volume_id_get_buffer()</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00033">VOLUME_ID_LABEL_SIZE</a>, <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00130">volume_id_set_label_unicode16()</a>, <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00135">volume_id_set_uuid()</a>, and <a class="el" href="../../d2/d8e/f2fs_8c_source.html#l00060">f2fs_super_block::volume_name</a>.</p>

</div>
</div>
<a id="a8df0f77a09c66fd2cfca6fcf0c1bb3db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8df0f77a09c66fd2cfca6fcf0c1bb3db">&#9670;&nbsp;</a></span>volume_id_probe_hfs_hfsplus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a> volume_id_probe_hfs_hfsplus </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/dcd/hfs_8c_source.html#l00161">161</a> of file <a class="el" href="../../de/dcd/hfs_8c_source.html">hfs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;{</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <a class="code" href="../../dd/ddd/arithmetic__operations_8c.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a> <a class="code" href="../../da/d86/cramfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a> = 0;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="keywordtype">unsigned</span> blocksize;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="keywordtype">unsigned</span> cat_block;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="keywordtype">unsigned</span> ext_block_start;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="keywordtype">unsigned</span> ext_block_count;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keywordtype">int</span> ext;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="keywordtype">unsigned</span> leaf_node_head;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keywordtype">unsigned</span> leaf_node_count;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="keywordtype">unsigned</span> leaf_node_size;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keywordtype">unsigned</span> leaf_block;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <a class="code" href="../../dd/ddd/arithmetic__operations_8c.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a> leaf_off;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="keywordtype">unsigned</span> alloc_block_size;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="keywordtype">unsigned</span> alloc_first_block;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keywordtype">unsigned</span> embed_first_block;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="keywordtype">unsigned</span> record_count;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../de/dcd/hfs_8c.html#d3/dac/structhfsplus__vol__header">hfsplus_vol_header</a> *hfsplus;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../de/dcd/hfs_8c.html#d3/db2/structhfsplus__bnode__descriptor">hfsplus_bnode_descriptor</a> *descr;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../de/dcd/hfs_8c.html#db/db2/structhfsplus__bheader__record">hfsplus_bheader_record</a> *bnode;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../de/dcd/hfs_8c.html#da/d6f/structhfsplus__catalog__key">hfsplus_catalog_key</a> *key;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="keywordtype">unsigned</span> label_len;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../de/dcd/hfs_8c.html#d8/d1c/structhfsplus__extent">hfsplus_extent</a> extents[<a class="code" href="../../de/dcd/hfs_8c.html#a86e8abcac290ca6afe5e278892a80d57">HFSPLUS_EXTENT_COUNT</a>];</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../de/dcd/hfs_8c.html#df/ddd/structhfs__mdb">hfs_mdb</a> *hfs;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a3cb4a16b0e8d6af0af86d4fd6ba5fd9d">uint8_t</a> *<a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160; </div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;probing at offset 0x%llx&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>) <a class="code" href="../../da/d86/cramfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a>);</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160; </div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a> = <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#ad52c7b05017442dbe08091a85ef92710">volume_id_get_buffer</a>(<span class="keywordtype">id</span>, <a class="code" href="../../da/d86/cramfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a> + <a class="code" href="../../de/dcd/hfs_8c.html#a7cde84c879568640c51ddc2ea85c43f0">HFS_SUPERBLOCK_OFFSET</a>, 0x200);</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a> == <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160; </div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    hfs = (<span class="keyword">struct </span><a class="code" href="../../de/dcd/hfs_8c.html#df/ddd/structhfs__mdb">hfs_mdb</a> *) <a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="keywordflow">if</span> (hfs-&gt;<a class="code" href="../../de/dcd/hfs_8c.html#a0c2ee96de31106ee42dff4ada0038ea1">signature</a>[0] != <span class="charliteral">&#39;B&#39;</span> || hfs-&gt;<a class="code" href="../../de/dcd/hfs_8c.html#a0c2ee96de31106ee42dff4ada0038ea1">signature</a>[1] != <span class="charliteral">&#39;D&#39;</span>)</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        <span class="keywordflow">goto</span> checkplus;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160; </div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="comment">/* it may be just a hfs wrapper for hfs+ */</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="keywordflow">if</span> (hfs-&gt;<a class="code" href="../../de/dcd/hfs_8c.html#a9bf2df22a91dc1d1869afe2975c0725a">embed_sig</a>[0] == <span class="charliteral">&#39;H&#39;</span> &amp;&amp; hfs-&gt;<a class="code" href="../../de/dcd/hfs_8c.html#a9bf2df22a91dc1d1869afe2975c0725a">embed_sig</a>[1] == <span class="charliteral">&#39;+&#39;</span>) {</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        alloc_block_size = <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a650ecb20996a13e0c0bc530ba83fe5dc">be32_to_cpu</a>(hfs-&gt;<a class="code" href="../../de/dcd/hfs_8c.html#ac339ad7cb3f85aed59fcbaf4743ab00c">al_blk_size</a>);</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;alloc_block_size 0x%x&quot;</span>, alloc_block_size);</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160; </div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        alloc_first_block = <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a48f33ad7b3de0010e5c802ced48f8a7b">be16_to_cpu</a>(hfs-&gt;<a class="code" href="../../de/dcd/hfs_8c.html#a9de8d869bcbb21c6667c599bb2749d2c">al_bl_st</a>);</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;alloc_first_block 0x%x&quot;</span>, alloc_first_block);</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160; </div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        embed_first_block = <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a48f33ad7b3de0010e5c802ced48f8a7b">be16_to_cpu</a>(hfs-&gt;<a class="code" href="../../de/dcd/hfs_8c.html#ab7c163b58d6bc737cb1e2ed9e25a9938">embed_startblock</a>);</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;embed_first_block 0x%x&quot;</span>, embed_first_block);</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160; </div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        <a class="code" href="../../da/d86/cramfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a> += (alloc_first_block * 512) +</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;               (embed_first_block * alloc_block_size);</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;hfs wrapped hfs+ found at offset 0x%llx&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>) <a class="code" href="../../da/d86/cramfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a>);</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160; </div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        <a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a> = <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#ad52c7b05017442dbe08091a85ef92710">volume_id_get_buffer</a>(<span class="keywordtype">id</span>, <a class="code" href="../../da/d86/cramfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a> + <a class="code" href="../../de/dcd/hfs_8c.html#a7cde84c879568640c51ddc2ea85c43f0">HFS_SUPERBLOCK_OFFSET</a>, 0x200);</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a> == <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;            <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        <span class="keywordflow">goto</span> checkplus;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    }</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160; </div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="keywordflow">if</span> (hfs-&gt;<a class="code" href="../../de/dcd/hfs_8c.html#a6a408aa1a93a6d4bc4c460352f18fc80">label_len</a> &gt; 0 &amp;&amp; hfs-&gt;<a class="code" href="../../de/dcd/hfs_8c.html#a6a408aa1a93a6d4bc4c460352f18fc80">label_len</a> &lt; 28) {</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment">//      volume_id_set_label_raw(id, hfs-&gt;label, hfs-&gt;label_len);</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#a3629b5eaf1943e2f4634bd5913959b04">volume_id_set_label_string</a>(<span class="keywordtype">id</span>, hfs-&gt;<a class="code" href="../../de/dcd/hfs_8c.html#a9ff7b5229f53630e546c67547d606c10">label</a>, hfs-&gt;<a class="code" href="../../de/dcd/hfs_8c.html#a6a408aa1a93a6d4bc4c460352f18fc80">label_len</a>) ;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    }</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160; </div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <a class="code" href="../../de/dcd/hfs_8c.html#a6cd53d282470d275b5fa74fbabd44060">hfs_set_uuid</a>(<span class="keywordtype">id</span>, hfs-&gt;<a class="code" href="../../de/dcd/hfs_8c.html#af909d28872fbd0342b167398cc8daf4e">finder_info</a>.<a class="code" href="../../de/dcd/hfs_8c.html#ac0f05b1a3f22db0ea23393a04087b058">id</a>);</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="comment">//  volume_id_set_usage(id, VOLUME_ID_FILESYSTEM);</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    IF_FEATURE_BLKID_TYPE(id-&gt;type = <span class="stringliteral">&quot;hfs&quot;</span>;)</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160; </div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <a class="code" href="../../d8/d64/glob__loop_8c.html#a5f3f8891e3f4c9d8d7effae7eb271604">return</a> 0;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160; </div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160; checkplus:</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    hfsplus = (struct <a class="code" href="../../de/dcd/hfs_8c.html#d3/dac/structhfsplus__vol__header">hfsplus_vol_header</a> *) <a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <a class="code" href="../../d9/def/mb__64bit__map_8cpp.html#a7d5d79792cdea43010184ab50d14ac5a">if</a> (hfs-&gt;<a class="code" href="../../d9/d84/man2html_8c.html#a671b803cae38ef222103cb0e1c7aba8a">signature</a>[0] == &#39;<a class="code" href="../../da/db0/md5_8h.html#a83a4d457e6558f9b8787fc267bbd57c3">H</a>&#39;)</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        <a class="code" href="../../d9/def/mb__64bit__map_8cpp.html#a7d5d79792cdea43010184ab50d14ac5a">if</a> (hfs-&gt;<a class="code" href="../../d9/d84/man2html_8c.html#a671b803cae38ef222103cb0e1c7aba8a">signature</a>[1] == &#39;+&#39; || hfs-&gt;<a class="code" href="../../d9/d84/man2html_8c.html#a671b803cae38ef222103cb0e1c7aba8a">signature</a>[1] == &#39;<a class="code" href="../../d2/d24/sha1_8c.html#add48b1ce38c3ada11068889d7fa0fad0">X</a>&#39;)</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;            goto hfsplus;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <a class="code" href="../../d8/d64/glob__loop_8c.html#a5f3f8891e3f4c9d8d7effae7eb271604">return</a> -1;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160; </div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160; hfsplus:</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <a class="code" href="../../de/dcd/hfs_8c.html#a6cd53d282470d275b5fa74fbabd44060">hfs_set_uuid</a>(<span class="keywordtype">id</span>, hfsplus-&gt;<a class="code" href="../../de/dcd/hfs_8c.html#af909d28872fbd0342b167398cc8daf4e">finder_info</a>.<span class="keywordtype">id</span>);</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160; </div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    blocksize = <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a650ecb20996a13e0c0bc530ba83fe5dc">be32_to_cpu</a>(hfsplus-&gt;blocksize);</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(&quot;blocksize %u&quot;, blocksize);</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160; </div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <a class="code" href="../../d3/d82/convert_8h.html#a309e07aa23e76adc2ad0830978663c45">memcpy</a>(extents, hfsplus-&gt;<a class="code" href="../../df/da3/evalstring_8c.html#ac3876a409236a70df2a9cdacc4af35e7">cat_file</a>.extents, sizeof(extents));</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    cat_block = <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a650ecb20996a13e0c0bc530ba83fe5dc">be32_to_cpu</a>(extents[0].start_block);</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(&quot;catalog <a class="code" href="../../df/d84/arping_8c.html#a317b24157e7f590740c6e329bfe668dc">start</a> block 0<a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#aeb26462df30f47f6fd73ee802457812b">x</a>%<a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#aeb26462df30f47f6fd73ee802457812b">x</a>&quot;, cat_block);</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160; </div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a> = <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#ad52c7b05017442dbe08091a85ef92710">volume_id_get_buffer</a>(<span class="keywordtype">id</span>, <a class="code" href="../../da/d86/cramfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a> + (cat_block * blocksize), 0x2000);</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <a class="code" href="../../d9/def/mb__64bit__map_8cpp.html#a7d5d79792cdea43010184ab50d14ac5a">if</a> (<a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a> == <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        goto <a class="code" href="../../d9/dd9/gconf_8c.html#a880efc1795d900be549017ddf66a03e3">found</a>;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160; </div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    bnode = (struct <a class="code" href="../../de/dcd/hfs_8c.html#db/db2/structhfsplus__bheader__record">hfsplus_bheader_record</a> *)</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        &amp;<a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>[sizeof(struct <a class="code" href="../../de/dcd/hfs_8c.html#d3/db2/structhfsplus__bnode__descriptor">hfsplus_bnode_descriptor</a>)];</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160; </div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    leaf_node_head = <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a650ecb20996a13e0c0bc530ba83fe5dc">be32_to_cpu</a>(bnode-&gt;leaf_head);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(&quot;catalog <a class="code" href="../../d9/d85/search_8h.html#ae12cb0f4c3f495b2790151d2f180e45aaa4a5c1bd6ae255f5ae17f6e54d579185">leaf</a> <a class="code" href="../../d3/ddd/tsearch_8h.html#d5/da1/structnode">node</a> 0<a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#aeb26462df30f47f6fd73ee802457812b">x</a>%<a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#aeb26462df30f47f6fd73ee802457812b">x</a>&quot;, leaf_node_head);</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160; </div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    leaf_node_size = <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a48f33ad7b3de0010e5c802ced48f8a7b">be16_to_cpu</a>(bnode-&gt;node_size);</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(&quot;<a class="code" href="../../d9/d85/search_8h.html#ae12cb0f4c3f495b2790151d2f180e45aaa4a5c1bd6ae255f5ae17f6e54d579185">leaf</a> <a class="code" href="../../d3/ddd/tsearch_8h.html#d5/da1/structnode">node</a> <a class="code" href="../../d1/dc0/multiboot_8h.html#a6d813a0f2b5281b18dea3f4cda696c33">size</a> 0<a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#aeb26462df30f47f6fd73ee802457812b">x</a>%<a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#aeb26462df30f47f6fd73ee802457812b">x</a>&quot;, leaf_node_size);</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160; </div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    leaf_node_count = <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a650ecb20996a13e0c0bc530ba83fe5dc">be32_to_cpu</a>(bnode-&gt;leaf_count);</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(&quot;<a class="code" href="../../d9/d85/search_8h.html#ae12cb0f4c3f495b2790151d2f180e45aaa4a5c1bd6ae255f5ae17f6e54d579185">leaf</a> <a class="code" href="../../d3/ddd/tsearch_8h.html#d5/da1/structnode">node</a> <a class="code" href="../../d2/dd6/dd_8c.html#ac74ae34e9c58234aacabb6867b245c58">count</a> 0<a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#aeb26462df30f47f6fd73ee802457812b">x</a>%<a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#aeb26462df30f47f6fd73ee802457812b">x</a>&quot;, leaf_node_count);</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <a class="code" href="../../d9/def/mb__64bit__map_8cpp.html#a7d5d79792cdea43010184ab50d14ac5a">if</a> (leaf_node_count == 0)</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        goto <a class="code" href="../../d9/dd9/gconf_8c.html#a880efc1795d900be549017ddf66a03e3">found</a>;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160; </div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    leaf_block = (leaf_node_head * leaf_node_size) / blocksize;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160; </div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="comment">/* get physical location */</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <a class="code" href="../../db/dd4/sm__loop_8c.html#afea255a6aa2d9be730b4beb7fedb8afa">for</a> (ext = 0; ext &lt; <a class="code" href="../../de/dcd/hfs_8c.html#a86e8abcac290ca6afe5e278892a80d57">HFSPLUS_EXTENT_COUNT</a>; ext++) {</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        ext_block_start = <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a650ecb20996a13e0c0bc530ba83fe5dc">be32_to_cpu</a>(extents[ext].start_block);</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        ext_block_count = <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a650ecb20996a13e0c0bc530ba83fe5dc">be32_to_cpu</a>(extents[ext].block_count);</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;extent start block 0x%x, count 0x%x&quot;</span>, ext_block_start, ext_block_count);</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160; </div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        <span class="keywordflow">if</span> (ext_block_count == 0)</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="../../d9/dd9/gconf_8c.html#a880efc1795d900be549017ddf66a03e3">found</a>;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160; </div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        <span class="comment">/* this is our extent */</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        <span class="keywordflow">if</span> (leaf_block &lt; ext_block_count)</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160; </div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        leaf_block -= ext_block_count;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    }</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="keywordflow">if</span> (ext == <a class="code" href="../../de/dcd/hfs_8c.html#a86e8abcac290ca6afe5e278892a80d57">HFSPLUS_EXTENT_COUNT</a>)</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="../../d9/dd9/gconf_8c.html#a880efc1795d900be549017ddf66a03e3">found</a>;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;found block in extent %i&quot;</span>, ext);</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160; </div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    leaf_off = (ext_block_start + leaf_block) * blocksize;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160; </div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a> = <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#ad52c7b05017442dbe08091a85ef92710">volume_id_get_buffer</a>(<span class="keywordtype">id</span>, <a class="code" href="../../da/d86/cramfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a> + leaf_off, leaf_node_size);</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a> == <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="../../d9/dd9/gconf_8c.html#a880efc1795d900be549017ddf66a03e3">found</a>;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160; </div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    descr = (<span class="keyword">struct </span><a class="code" href="../../de/dcd/hfs_8c.html#d3/db2/structhfsplus__bnode__descriptor">hfsplus_bnode_descriptor</a> *) <a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;descriptor type 0x%x&quot;</span>, descr-&gt;<a class="code" href="../../de/dcd/hfs_8c.html#a28a6cb18ed559e40a2fb468208d85196">type</a>);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160; </div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    record_count = <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a48f33ad7b3de0010e5c802ced48f8a7b">be16_to_cpu</a>(descr-&gt;<a class="code" href="../../de/dcd/hfs_8c.html#a7f35cd928841b327e4f95e3044d28cab">num_recs</a>);</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;number of records %u&quot;</span>, record_count);</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <span class="keywordflow">if</span> (record_count == 0)</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="../../d9/dd9/gconf_8c.html#a880efc1795d900be549017ddf66a03e3">found</a>;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160; </div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="keywordflow">if</span> (descr-&gt;<a class="code" href="../../de/dcd/hfs_8c.html#a28a6cb18ed559e40a2fb468208d85196">type</a> != <a class="code" href="../../de/dcd/hfs_8c.html#a95c84c316a6e5c245237a6599a4552a1">HFS_NODE_LEAF</a>)</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="../../d9/dd9/gconf_8c.html#a880efc1795d900be549017ddf66a03e3">found</a>;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160; </div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    key = (<span class="keyword">struct </span><a class="code" href="../../de/dcd/hfs_8c.html#da/d6f/structhfsplus__catalog__key">hfsplus_catalog_key</a> *)</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        &amp;<a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>[<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="../../de/dcd/hfs_8c.html#d3/db2/structhfsplus__bnode__descriptor">hfsplus_bnode_descriptor</a>)];</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160; </div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;parent id 0x%x&quot;</span>, <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a650ecb20996a13e0c0bc530ba83fe5dc">be32_to_cpu</a>(key-&gt;<a class="code" href="../../de/dcd/hfs_8c.html#ae5489e40d4f5ccff3e5693a7f727b4b9">parent_id</a>));</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="keywordflow">if</span> (key-&gt;<a class="code" href="../../de/dcd/hfs_8c.html#ae5489e40d4f5ccff3e5693a7f727b4b9">parent_id</a> != <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#afd3274bb70aea7cf9be403940e001cc7">cpu_to_be32</a>(<a class="code" href="../../de/dcd/hfs_8c.html#a4c48acd08590b6c4adac52622d48740d">HFSPLUS_POR_CNID</a>))</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="../../d9/dd9/gconf_8c.html#a880efc1795d900be549017ddf66a03e3">found</a>;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160; </div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    label_len = <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a48f33ad7b3de0010e5c802ced48f8a7b">be16_to_cpu</a>(key-&gt;<a class="code" href="../../de/dcd/hfs_8c.html#aee3860b7cf31443884a081aceccde704">unicode_len</a>) * 2;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;label unicode16 len %i&quot;</span>, label_len);</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;<span class="comment">//  volume_id_set_label_raw(id, key-&gt;unicode, label_len);</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#a647a5f7f037d4d3506b2811021805bda">volume_id_set_label_unicode16</a>(<span class="keywordtype">id</span>, key-&gt;<a class="code" href="../../de/dcd/hfs_8c.html#abdff55eee42ad5b9831a5e329d159ad8">unicode</a>, <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#aceb52d5e58265d474290d1e17bcf1716ac115336a31f6a75e7dd426dfd459fb54">BE</a>, label_len);</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160; </div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160; <a class="code" href="../../d9/dd9/gconf_8c.html#a880efc1795d900be549017ddf66a03e3">found</a>:</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="comment">//  volume_id_set_usage(id, VOLUME_ID_FILESYSTEM);</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    IF_FEATURE_BLKID_TYPE(id-&gt;type = <span class="stringliteral">&quot;hfsplus&quot;</span>;)</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160; </div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <a class="code" href="../../d8/d64/glob__loop_8c.html#a5f3f8891e3f4c9d8d7effae7eb271604">return</a> 0;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;}</div>
<div class="ttc" id="aapps_2base_2busybox_2coreutils_2stat_8c_html_aa29b866765bdc5bdf87b7eb666d66093"><div class="ttname"><a href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a></div><div class="ttdeci">#define buf</div></div>
<div class="ttc" id="aarping_8c_html_a317b24157e7f590740c6e329bfe668dc"><div class="ttname"><a href="../../df/d84/arping_8c.html#a317b24157e7f590740c6e329bfe668dc">start</a></div><div class="ttdeci">#define start</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d84/arping_8c_source.html#l00095">arping.c:95</a></div></div>
<div class="ttc" id="aconvert_8h_html_a309e07aa23e76adc2ad0830978663c45"><div class="ttname"><a href="../../d3/d82/convert_8h.html#a309e07aa23e76adc2ad0830978663c45">memcpy</a></div><div class="ttdeci">#define memcpy(dest, src, n)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d82/convert_8h_source.html#l00125">convert.h:125</a></div></div>
<div class="ttc" id="aevalstring_8c_html_ac3876a409236a70df2a9cdacc4af35e7"><div class="ttname"><a href="../../df/da3/evalstring_8c.html#ac3876a409236a70df2a9cdacc4af35e7">cat_file</a></div><div class="ttdeci">static int cat_file(REDIRECT *r)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/da3/evalstring_8c_source.html#l00772">evalstring.c:772</a></div></div>
<div class="ttc" id="agconf_8c_html_a880efc1795d900be549017ddf66a03e3"><div class="ttname"><a href="../../d9/dd9/gconf_8c.html#a880efc1795d900be549017ddf66a03e3">found</a></div><div class="ttdeci">static GtkTreeIter found</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd9/gconf_8c_source.html#l01348">gconf.c:1348</a></div></div>
<div class="ttc" id="ahfs_8c_html_a0c2ee96de31106ee42dff4ada0038ea1"><div class="ttname"><a href="../../de/dcd/hfs_8c.html#a0c2ee96de31106ee42dff4ada0038ea1">hfs_mdb::signature</a></div><div class="ttdeci">uint8_t signature[2]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/hfs_8c_source.html#l00040">hfs.c:40</a></div></div>
<div class="ttc" id="ahfs_8c_html_a28a6cb18ed559e40a2fb468208d85196"><div class="ttname"><a href="../../de/dcd/hfs_8c.html#a28a6cb18ed559e40a2fb468208d85196">hfsplus_bnode_descriptor::type</a></div><div class="ttdeci">uint8_t type</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/hfs_8c_source.html#l00072">hfs.c:72</a></div></div>
<div class="ttc" id="ahfs_8c_html_a4c48acd08590b6c4adac52622d48740d"><div class="ttname"><a href="../../de/dcd/hfs_8c.html#a4c48acd08590b6c4adac52622d48740d">HFSPLUS_POR_CNID</a></div><div class="ttdeci">#define HFSPLUS_POR_CNID</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/hfs_8c_source.html#l00138">hfs.c:138</a></div></div>
<div class="ttc" id="ahfs_8c_html_a6a408aa1a93a6d4bc4c460352f18fc80"><div class="ttname"><a href="../../de/dcd/hfs_8c.html#a6a408aa1a93a6d4bc4c460352f18fc80">hfs_mdb::label_len</a></div><div class="ttdeci">uint8_t label_len</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/hfs_8c_source.html#l00053">hfs.c:53</a></div></div>
<div class="ttc" id="ahfs_8c_html_a6cd53d282470d275b5fa74fbabd44060"><div class="ttname"><a href="../../de/dcd/hfs_8c.html#a6cd53d282470d275b5fa74fbabd44060">hfs_set_uuid</a></div><div class="ttdeci">static void FAST_FUNC hfs_set_uuid(struct volume_id *id, const uint8_t *hfs_id)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/hfs_8c_source.html#l00140">hfs.c:140</a></div></div>
<div class="ttc" id="ahfs_8c_html_a7cde84c879568640c51ddc2ea85c43f0"><div class="ttname"><a href="../../de/dcd/hfs_8c.html#a7cde84c879568640c51ddc2ea85c43f0">HFS_SUPERBLOCK_OFFSET</a></div><div class="ttdeci">#define HFS_SUPERBLOCK_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/hfs_8c_source.html#l00136">hfs.c:136</a></div></div>
<div class="ttc" id="ahfs_8c_html_a7f35cd928841b327e4f95e3044d28cab"><div class="ttname"><a href="../../de/dcd/hfs_8c.html#a7f35cd928841b327e4f95e3044d28cab">hfsplus_bnode_descriptor::num_recs</a></div><div class="ttdeci">uint16_t num_recs</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/hfs_8c_source.html#l00074">hfs.c:74</a></div></div>
<div class="ttc" id="ahfs_8c_html_a86e8abcac290ca6afe5e278892a80d57"><div class="ttname"><a href="../../de/dcd/hfs_8c.html#a86e8abcac290ca6afe5e278892a80d57">HFSPLUS_EXTENT_COUNT</a></div><div class="ttdeci">#define HFSPLUS_EXTENT_COUNT</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/hfs_8c_source.html#l00099">hfs.c:99</a></div></div>
<div class="ttc" id="ahfs_8c_html_a95c84c316a6e5c245237a6599a4552a1"><div class="ttname"><a href="../../de/dcd/hfs_8c.html#a95c84c316a6e5c245237a6599a4552a1">HFS_NODE_LEAF</a></div><div class="ttdeci">#define HFS_NODE_LEAF</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/hfs_8c_source.html#l00137">hfs.c:137</a></div></div>
<div class="ttc" id="ahfs_8c_html_a9bf2df22a91dc1d1869afe2975c0725a"><div class="ttname"><a href="../../de/dcd/hfs_8c.html#a9bf2df22a91dc1d1869afe2975c0725a">hfs_mdb::embed_sig</a></div><div class="ttdeci">uint8_t embed_sig[2]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/hfs_8c_source.html#l00064">hfs.c:64</a></div></div>
<div class="ttc" id="ahfs_8c_html_a9de8d869bcbb21c6667c599bb2749d2c"><div class="ttname"><a href="../../de/dcd/hfs_8c.html#a9de8d869bcbb21c6667c599bb2749d2c">hfs_mdb::al_bl_st</a></div><div class="ttdeci">uint16_t al_bl_st</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/hfs_8c_source.html#l00050">hfs.c:50</a></div></div>
<div class="ttc" id="ahfs_8c_html_a9ff7b5229f53630e546c67547d606c10"><div class="ttname"><a href="../../de/dcd/hfs_8c.html#a9ff7b5229f53630e546c67547d606c10">hfs_mdb::label</a></div><div class="ttdeci">uint8_t label[27]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/hfs_8c_source.html#l00054">hfs.c:54</a></div></div>
<div class="ttc" id="ahfs_8c_html_ab7c163b58d6bc737cb1e2ed9e25a9938"><div class="ttname"><a href="../../de/dcd/hfs_8c.html#ab7c163b58d6bc737cb1e2ed9e25a9938">hfs_mdb::embed_startblock</a></div><div class="ttdeci">uint16_t embed_startblock</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/hfs_8c_source.html#l00065">hfs.c:65</a></div></div>
<div class="ttc" id="ahfs_8c_html_abdff55eee42ad5b9831a5e329d159ad8"><div class="ttname"><a href="../../de/dcd/hfs_8c.html#abdff55eee42ad5b9831a5e329d159ad8">hfsplus_catalog_key::unicode</a></div><div class="ttdeci">uint8_t unicode[255 *2]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/hfs_8c_source.html#l00091">hfs.c:91</a></div></div>
<div class="ttc" id="ahfs_8c_html_ac0f05b1a3f22db0ea23393a04087b058"><div class="ttname"><a href="../../de/dcd/hfs_8c.html#ac0f05b1a3f22db0ea23393a04087b058">hfs_finder_info::id</a></div><div class="ttdeci">uint8_t id[8]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/hfs_8c_source.html#l00036">hfs.c:36</a></div></div>
<div class="ttc" id="ahfs_8c_html_ac339ad7cb3f85aed59fcbaf4743ab00c"><div class="ttname"><a href="../../de/dcd/hfs_8c.html#ac339ad7cb3f85aed59fcbaf4743ab00c">hfs_mdb::al_blk_size</a></div><div class="ttdeci">uint32_t al_blk_size</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/hfs_8c_source.html#l00048">hfs.c:48</a></div></div>
<div class="ttc" id="ahfs_8c_html_ae5489e40d4f5ccff3e5693a7f727b4b9"><div class="ttname"><a href="../../de/dcd/hfs_8c.html#ae5489e40d4f5ccff3e5693a7f727b4b9">hfsplus_catalog_key::parent_id</a></div><div class="ttdeci">uint32_t parent_id</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/hfs_8c_source.html#l00089">hfs.c:89</a></div></div>
<div class="ttc" id="ahfs_8c_html_aee3860b7cf31443884a081aceccde704"><div class="ttname"><a href="../../de/dcd/hfs_8c.html#aee3860b7cf31443884a081aceccde704">hfsplus_catalog_key::unicode_len</a></div><div class="ttdeci">uint16_t unicode_len</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/hfs_8c_source.html#l00090">hfs.c:90</a></div></div>
<div class="ttc" id="ahfs_8c_html_af909d28872fbd0342b167398cc8daf4e"><div class="ttname"><a href="../../de/dcd/hfs_8c.html#af909d28872fbd0342b167398cc8daf4e">hfs_mdb::finder_info</a></div><div class="ttdeci">struct hfs_finder_info finder_info</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/hfs_8c_source.html#l00062">hfs.c:63</a></div></div>
<div class="ttc" id="ahfs_8c_html_d3/dac/structhfsplus__vol__header"><div class="ttname"><a href="../../de/dcd/hfs_8c.html#d3/dac/structhfsplus__vol__header">hfsplus_vol_header</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/hfs_8c_source.html#l00107">hfs.c:107</a></div></div>
<div class="ttc" id="ahfs_8c_html_d3/db2/structhfsplus__bnode__descriptor"><div class="ttname"><a href="../../de/dcd/hfs_8c.html#d3/db2/structhfsplus__bnode__descriptor">hfsplus_bnode_descriptor</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/hfs_8c_source.html#l00069">hfs.c:69</a></div></div>
<div class="ttc" id="ahfs_8c_html_d8/d1c/structhfsplus__extent"><div class="ttname"><a href="../../de/dcd/hfs_8c.html#d8/d1c/structhfsplus__extent">hfsplus_extent</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/hfs_8c_source.html#l00094">hfs.c:94</a></div></div>
<div class="ttc" id="ahfs_8c_html_da/d6f/structhfsplus__catalog__key"><div class="ttname"><a href="../../de/dcd/hfs_8c.html#da/d6f/structhfsplus__catalog__key">hfsplus_catalog_key</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/hfs_8c_source.html#l00087">hfs.c:87</a></div></div>
<div class="ttc" id="ahfs_8c_html_db/db2/structhfsplus__bheader__record"><div class="ttname"><a href="../../de/dcd/hfs_8c.html#db/db2/structhfsplus__bheader__record">hfsplus_bheader_record</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/hfs_8c_source.html#l00078">hfs.c:78</a></div></div>
<div class="ttc" id="ahfs_8c_html_df/ddd/structhfs__mdb"><div class="ttname"><a href="../../de/dcd/hfs_8c.html#df/ddd/structhfs__mdb">hfs_mdb</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/hfs_8c_source.html#l00039">hfs.c:39</a></div></div>
<div class="ttc" id="aman2html_8c_html_a671b803cae38ef222103cb0e1c7aba8a"><div class="ttname"><a href="../../d9/d84/man2html_8c.html#a671b803cae38ef222103cb0e1c7aba8a">signature</a></div><div class="ttdeci">char * signature</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d84/man2html_8c_source.html#l00110">man2html.c:110</a></div></div>
<div class="ttc" id="amb__64bit__map_8cpp_html_a7d5d79792cdea43010184ab50d14ac5a"><div class="ttname"><a href="../../d9/def/mb__64bit__map_8cpp.html#a7d5d79792cdea43010184ab50d14ac5a">if</a></div><div class="ttdeci">if(!PML4.Present)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/def/mb__64bit__map_8cpp_source.html#l00205">mb_64bit_map.cpp:205</a></div></div>
<div class="ttc" id="amd5_8h_html_a83a4d457e6558f9b8787fc267bbd57c3"><div class="ttname"><a href="../../da/db0/md5_8h.html#a83a4d457e6558f9b8787fc267bbd57c3">H</a></div><div class="ttdeci">uint32_t H(uint32_t X, uint32_t Y, uint32_t Z)</div></div>
<div class="ttc" id="amusl_2src_2prng_2random_8c_html_aeb26462df30f47f6fd73ee802457812b"><div class="ttname"><a href="../../dc/da2/musl_2src_2prng_2random_8c.html#aeb26462df30f47f6fd73ee802457812b">x</a></div><div class="ttdeci">static uint32_t * x</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da2/musl_2src_2prng_2random_8c_source.html#l00025">random.c:25</a></div></div>
<div class="ttc" id="asearch_8h_html_ae12cb0f4c3f495b2790151d2f180e45aaa4a5c1bd6ae255f5ae17f6e54d579185"><div class="ttname"><a href="../../d9/d85/search_8h.html#ae12cb0f4c3f495b2790151d2f180e45aaa4a5c1bd6ae255f5ae17f6e54d579185">leaf</a></div><div class="ttdeci">@ leaf</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d85/search_8h_source.html#l00014">search.h:14</a></div></div>
<div class="ttc" id="asha1_8c_html_add48b1ce38c3ada11068889d7fa0fad0"><div class="ttname"><a href="../../d2/d24/sha1_8c.html#add48b1ce38c3ada11068889d7fa0fad0">X</a></div><div class="ttdeci">#define X(a)</div></div>
<div class="ttc" id="asm__loop_8c_html_afea255a6aa2d9be730b4beb7fedb8afa"><div class="ttname"><a href="../../db/dd4/sm__loop_8c.html#afea255a6aa2d9be730b4beb7fedb8afa">for</a></div><div class="ttdeci">for(pc=0;p[pc];pc++)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dd4/sm__loop_8c_source.html#l00391">sm_loop.c:391</a></div></div>
<div class="ttc" id="atsearch_8h_html_d5/da1/structnode"><div class="ttname"><a href="../../d3/ddd/tsearch_8h.html#d5/da1/structnode">node</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d24/tsort_8c_source.html#l00033">tsort.c:33</a></div></div>
<div class="ttc" id="avolume__id__internal_8h_html_a48f33ad7b3de0010e5c802ced48f8a7b"><div class="ttname"><a href="../../dd/dd1/volume__id__internal_8h.html#a48f33ad7b3de0010e5c802ced48f8a7b">be16_to_cpu</a></div><div class="ttdeci">#define be16_to_cpu(x)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd1/volume__id__internal_8h_source.html#l00112">volume_id_internal.h:112</a></div></div>
<div class="ttc" id="avolume__id__internal_8h_html_a650ecb20996a13e0c0bc530ba83fe5dc"><div class="ttname"><a href="../../dd/dd1/volume__id__internal_8h.html#a650ecb20996a13e0c0bc530ba83fe5dc">be32_to_cpu</a></div><div class="ttdeci">#define be32_to_cpu(x)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd1/volume__id__internal_8h_source.html#l00113">volume_id_internal.h:113</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../de/dcd/hfs_8c_source.html#l00050">hfs_mdb::al_bl_st</a>, <a class="el" href="../../de/dcd/hfs_8c_source.html#l00048">hfs_mdb::al_blk_size</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00132">BE</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00112">be16_to_cpu</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00113">be32_to_cpu</a>, <a class="el" href="../../de/dcd/hfs_8c_source.html#l00119">hfsplus_vol_header::blocksize</a>, <a class="el" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>, <a class="el" href="../../de/dcd/hfs_8c_source.html#l00131">hfsplus_vol_header::cat_file</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00116">cpu_to_be32</a>, <a class="el" href="../../d7/d8f/decompress__bunzip2_8c_source.html#l00047">dbg</a>, <a class="el" href="../../de/dcd/hfs_8c_source.html#l00064">hfs_mdb::embed_sig</a>, <a class="el" href="../../de/dcd/hfs_8c_source.html#l00065">hfs_mdb::embed_startblock</a>, <a class="el" href="../../de/dcd/hfs_8c_source.html#l00104">hfsplus_fork::extents</a>, <a class="el" href="../../de/dcd/hfs_8c_source.html#l00063">hfs_mdb::finder_info</a>, <a class="el" href="../../de/dcd/hfs_8c_source.html#l00128">hfsplus_vol_header::finder_info</a>, <a class="el" href="../../d9/dd9/gconf_8c_source.html#l01348">found</a>, <a class="el" href="../../de/dcd/hfs_8c_source.html#l00137">HFS_NODE_LEAF</a>, <a class="el" href="../../de/dcd/hfs_8c_source.html#l00140">hfs_set_uuid()</a>, <a class="el" href="../../de/dcd/hfs_8c_source.html#l00136">HFS_SUPERBLOCK_OFFSET</a>, <a class="el" href="../../de/dcd/hfs_8c_source.html#l00099">HFSPLUS_EXTENT_COUNT</a>, <a class="el" href="../../de/dcd/hfs_8c_source.html#l00138">HFSPLUS_POR_CNID</a>, <a class="el" href="../../de/dcd/hfs_8c_source.html#l00036">hfs_finder_info::id</a>, <a class="el" href="../../de/dcd/hfs_8c_source.html#l00054">hfs_mdb::label</a>, <a class="el" href="../../de/dcd/hfs_8c_source.html#l00053">hfs_mdb::label_len</a>, <a class="el" href="../../de/dcd/hfs_8c_source.html#l00081">hfsplus_bheader_record::leaf_count</a>, <a class="el" href="../../de/dcd/hfs_8c_source.html#l00082">hfsplus_bheader_record::leaf_head</a>, <a class="el" href="../../d3/d82/convert_8h_source.html#l00125">memcpy</a>, <a class="el" href="../../de/dcd/hfs_8c_source.html#l00084">hfsplus_bheader_record::node_size</a>, <a class="el" href="../../d0/df4/Kernel_2include_2types_8h_source.html#l00037">NULL</a>, <a class="el" href="../../de/dcd/hfs_8c_source.html#l00074">hfsplus_bnode_descriptor::num_recs</a>, <a class="el" href="../../da/d86/cramfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a>, <a class="el" href="../../de/dcd/hfs_8c_source.html#l00089">hfsplus_catalog_key::parent_id</a>, <a class="el" href="../../de/dcd/hfs_8c_source.html#l00040">hfs_mdb::signature</a>, <a class="el" href="../../de/dcd/hfs_8c_source.html#l00072">hfsplus_bnode_descriptor::type</a>, <a class="el" href="../../de/dcd/hfs_8c_source.html#l00091">hfsplus_catalog_key::unicode</a>, <a class="el" href="../../de/dcd/hfs_8c_source.html#l00090">hfsplus_catalog_key::unicode_len</a>, <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00179">volume_id_get_buffer()</a>, <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00115">volume_id_set_label_string()</a>, and <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00130">volume_id_set_label_unicode16()</a>.</p>

</div>
</div>
<a id="ab5bde1dc29635ceb017e197db1b5e273"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5bde1dc29635ceb017e197db1b5e273">&#9670;&nbsp;</a></span>volume_id_probe_iso9660()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a> volume_id_probe_iso9660 </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/d29/iso9660_8c_source.html#l00056">56</a> of file <a class="el" href="../../d2/d29/iso9660_8c_source.html">iso9660.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;{</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor">#define off ((uint64_t)0)</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a3cb4a16b0e8d6af0af86d4fd6ba5fd9d">uint8_t</a> *<a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d2/d29/iso9660_8c.html#d8/d45/structiso__volume__descriptor">iso_volume_descriptor</a> *is;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d2/d29/iso9660_8c.html#de/dcb/structhigh__sierra__volume__descriptor">high_sierra_volume_descriptor</a> *hs;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160; </div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;probing at offset 0x%llx&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>) <a class="code" href="../../d2/d29/iso9660_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a>);</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160; </div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a> = <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#ad52c7b05017442dbe08091a85ef92710">volume_id_get_buffer</a>(<span class="keywordtype">id</span>, <a class="code" href="../../d2/d29/iso9660_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a> + <a class="code" href="../../d2/d29/iso9660_8c.html#a1fbb2b322b0956254f96247e4f87a707">ISO_SUPERBLOCK_OFFSET</a>, 0x200);</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a> == <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160; </div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    is = (<span class="keyword">struct </span><a class="code" href="../../d2/d29/iso9660_8c.html#d8/d45/structiso__volume__descriptor">iso_volume_descriptor</a> *) <a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160; </div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d82/convert_8h.html#ac376fcece8fcc2d0f8b1cf3de18b10df">memcmp</a>(is-&gt;<a class="code" href="../../d2/d29/iso9660_8c.html#aee9cdee79ec599ee73acbbc73e3e7b09">vd_id</a>, <span class="stringliteral">&quot;CD001&quot;</span>, 5) == 0) {</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        <span class="keywordtype">int</span> vd_offset;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160; </div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;read label from PVD&quot;</span>);</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">//      volume_id_set_label_raw(id, is-&gt;volume_id, 32);</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#a3629b5eaf1943e2f4634bd5913959b04">volume_id_set_label_string</a>(<span class="keywordtype">id</span>, is-&gt;<a class="code" href="../../d2/d29/iso9660_8c.html#adfdf2f6067d902ac0ce5892dc0ca2a31">volume_id</a>, 32);</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160; </div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;looking for SVDs&quot;</span>);</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        vd_offset = <a class="code" href="../../d2/d29/iso9660_8c.html#a8e07e99e516c9b90df79e9d669dfa247">ISO_VD_OFFSET</a>;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> = 0; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> &lt; <a class="code" href="../../d2/d29/iso9660_8c.html#ae3d56c8c1edff51090e68516fcf38683">ISO_VD_MAX</a>; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>++) {</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;            <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a3cb4a16b0e8d6af0af86d4fd6ba5fd9d">uint8_t</a> svd_label[64];</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160; </div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;            is = <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#ad52c7b05017442dbe08091a85ef92710">volume_id_get_buffer</a>(<span class="keywordtype">id</span>, <a class="code" href="../../d2/d29/iso9660_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a> + vd_offset, 0x200);</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;            <span class="keywordflow">if</span> (is == <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || is-&gt;<a class="code" href="../../d2/d29/iso9660_8c.html#a3509e6586448719073ea7adf02c767c4">vd_type</a> == <a class="code" href="../../d2/d29/iso9660_8c.html#ab1514d7aac9ebdace0d6ad579d378387">ISO_VD_END</a>)</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;            <span class="keywordflow">if</span> (is-&gt;<a class="code" href="../../d2/d29/iso9660_8c.html#a3509e6586448719073ea7adf02c767c4">vd_type</a> != <a class="code" href="../../d2/d29/iso9660_8c.html#a04f143e8fafb32454f58d3fa2c39b417">ISO_VD_SUPPLEMENTARY</a>)</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160; </div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;            <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;found SVD at offset 0x%llx&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>) (<a class="code" href="../../d2/d29/iso9660_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a> + vd_offset));</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d3/d82/convert_8h.html#ac376fcece8fcc2d0f8b1cf3de18b10df">memcmp</a>(is-&gt;<a class="code" href="../../d2/d29/iso9660_8c.html#a672f572ac30970b1c44fe3003eb0d216">escape_sequences</a>, <span class="stringliteral">&quot;%/@&quot;</span>, 3) == 0</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;             || <a class="code" href="../../d3/d82/convert_8h.html#ac376fcece8fcc2d0f8b1cf3de18b10df">memcmp</a>(is-&gt;<a class="code" href="../../d2/d29/iso9660_8c.html#a672f572ac30970b1c44fe3003eb0d216">escape_sequences</a>, <span class="stringliteral">&quot;%/C&quot;</span>, 3) == 0</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;             || <a class="code" href="../../d3/d82/convert_8h.html#ac376fcece8fcc2d0f8b1cf3de18b10df">memcmp</a>(is-&gt;<a class="code" href="../../d2/d29/iso9660_8c.html#a672f572ac30970b1c44fe3003eb0d216">escape_sequences</a>, <span class="stringliteral">&quot;%/E&quot;</span>, 3) == 0</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;            ) {</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;                <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;Joliet extension found&quot;</span>);</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;                <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#a6e8f2e3c79aedadd5ee90b7b970378a5">volume_id_set_unicode16</a>((<span class="keywordtype">char</span> *)svd_label, <span class="keyword">sizeof</span>(svd_label), is-&gt;<a class="code" href="../../d2/d29/iso9660_8c.html#adfdf2f6067d902ac0ce5892dc0ca2a31">volume_id</a>, <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#aceb52d5e58265d474290d1e17bcf1716ac115336a31f6a75e7dd426dfd459fb54">BE</a>, 32);</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../d3/d82/convert_8h.html#ac376fcece8fcc2d0f8b1cf3de18b10df">memcmp</a>(id-&gt;<a class="code" href="../../dd/dd1/volume__id__internal_8h.html#aebf9c21fa3fc79b7e98aca176d1e1092">label</a>, svd_label, 16) == 0) {</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;                    <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;SVD label is identical, use the possibly longer PVD one&quot;</span>);</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;                }</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160; </div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment">//              volume_id_set_label_raw(id, is-&gt;volume_id, 32);</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;                <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#a3629b5eaf1943e2f4634bd5913959b04">volume_id_set_label_string</a>(<span class="keywordtype">id</span>, svd_label, 32);</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment">//              strcpy(id-&gt;type_version, &quot;Joliet Extension&quot;);</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                <span class="keywordflow">goto</span> <a class="code" href="../../d9/dd9/gconf_8c.html#a880efc1795d900be549017ddf66a03e3">found</a>;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;            }</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;            vd_offset += <a class="code" href="../../d2/d29/iso9660_8c.html#a813ec76d903eae62c11d6d87ae3470ea">ISO_SECTOR_SIZE</a>;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        }</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="../../d9/dd9/gconf_8c.html#a880efc1795d900be549017ddf66a03e3">found</a>;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    }</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160; </div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    hs = (<span class="keyword">struct </span><a class="code" href="../../d2/d29/iso9660_8c.html#de/dcb/structhigh__sierra__volume__descriptor">high_sierra_volume_descriptor</a> *) <a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160; </div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d82/convert_8h.html#ac376fcece8fcc2d0f8b1cf3de18b10df">memcmp</a>(hs-&gt;<a class="code" href="../../d2/d29/iso9660_8c.html#a95864d115043b53b46c005cd772cdeda">id</a>, <span class="stringliteral">&quot;CDROM&quot;</span>, 5) == 0) {</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment">//      strcpy(id-&gt;type_version, &quot;High Sierra&quot;);</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="../../d9/dd9/gconf_8c.html#a880efc1795d900be549017ddf66a03e3">found</a>;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    }</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160; </div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160; </div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160; <a class="code" href="../../d9/dd9/gconf_8c.html#a880efc1795d900be549017ddf66a03e3">found</a>:</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment">//  volume_id_set_usage(id, VOLUME_ID_FILESYSTEM);</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    IF_FEATURE_BLKID_TYPE(<a class="code" href="../../d2/d29/iso9660_8c.html#a95864d115043b53b46c005cd772cdeda">id</a>-&gt;type = <span class="stringliteral">&quot;iso9660&quot;</span>;)</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160; </div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <a class="code" href="../../d8/d64/glob__loop_8c.html#a5f3f8891e3f4c9d8d7effae7eb271604">return</a> 0;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;}</div>
<div class="ttc" id="abusybox_2util-linux_2volume__id_2util_8c_html_a6e8f2e3c79aedadd5ee90b7b970378a5"><div class="ttname"><a href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#a6e8f2e3c79aedadd5ee90b7b970378a5">volume_id_set_unicode16</a></div><div class="ttdeci">void volume_id_set_unicode16(char *str, size_t len, const uint8_t *buf, enum endian endianess, size_t count)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00023">util.c:23</a></div></div>
<div class="ttc" id="aiso9660_8c_html_a04f143e8fafb32454f58d3fa2c39b417"><div class="ttname"><a href="../../d2/d29/iso9660_8c.html#a04f143e8fafb32454f58d3fa2c39b417">ISO_VD_SUPPLEMENTARY</a></div><div class="ttdeci">#define ISO_VD_SUPPLEMENTARY</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d29/iso9660_8c_source.html#l00033">iso9660.c:33</a></div></div>
<div class="ttc" id="aiso9660_8c_html_a1fbb2b322b0956254f96247e4f87a707"><div class="ttname"><a href="../../d2/d29/iso9660_8c.html#a1fbb2b322b0956254f96247e4f87a707">ISO_SUPERBLOCK_OFFSET</a></div><div class="ttdeci">#define ISO_SUPERBLOCK_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d29/iso9660_8c_source.html#l00029">iso9660.c:29</a></div></div>
<div class="ttc" id="aiso9660_8c_html_a3509e6586448719073ea7adf02c767c4"><div class="ttname"><a href="../../d2/d29/iso9660_8c.html#a3509e6586448719073ea7adf02c767c4">iso_volume_descriptor::vd_type</a></div><div class="ttdeci">uint8_t vd_type</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d29/iso9660_8c_source.html#l00038">iso9660.c:38</a></div></div>
<div class="ttc" id="aiso9660_8c_html_a672f572ac30970b1c44fe3003eb0d216"><div class="ttname"><a href="../../d2/d29/iso9660_8c.html#a672f572ac30970b1c44fe3003eb0d216">iso_volume_descriptor::escape_sequences</a></div><div class="ttdeci">uint8_t escape_sequences[8]</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d29/iso9660_8c_source.html#l00046">iso9660.c:46</a></div></div>
<div class="ttc" id="aiso9660_8c_html_a813ec76d903eae62c11d6d87ae3470ea"><div class="ttname"><a href="../../d2/d29/iso9660_8c.html#a813ec76d903eae62c11d6d87ae3470ea">ISO_SECTOR_SIZE</a></div><div class="ttdeci">#define ISO_SECTOR_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d29/iso9660_8c_source.html#l00030">iso9660.c:30</a></div></div>
<div class="ttc" id="aiso9660_8c_html_a8e07e99e516c9b90df79e9d669dfa247"><div class="ttname"><a href="../../d2/d29/iso9660_8c.html#a8e07e99e516c9b90df79e9d669dfa247">ISO_VD_OFFSET</a></div><div class="ttdeci">#define ISO_VD_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d29/iso9660_8c_source.html#l00031">iso9660.c:31</a></div></div>
<div class="ttc" id="aiso9660_8c_html_a95864d115043b53b46c005cd772cdeda"><div class="ttname"><a href="../../d2/d29/iso9660_8c.html#a95864d115043b53b46c005cd772cdeda">high_sierra_volume_descriptor::id</a></div><div class="ttdeci">uint8_t id[4]</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d29/iso9660_8c_source.html#l00052">iso9660.c:52</a></div></div>
<div class="ttc" id="aiso9660_8c_html_aa8df4166084b06f1e80d3510e5dcf7e1"><div class="ttname"><a href="../../d2/d29/iso9660_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a></div><div class="ttdeci">#define off</div></div>
<div class="ttc" id="aiso9660_8c_html_ab1514d7aac9ebdace0d6ad579d378387"><div class="ttname"><a href="../../d2/d29/iso9660_8c.html#ab1514d7aac9ebdace0d6ad579d378387">ISO_VD_END</a></div><div class="ttdeci">#define ISO_VD_END</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d29/iso9660_8c_source.html#l00034">iso9660.c:34</a></div></div>
<div class="ttc" id="aiso9660_8c_html_adfdf2f6067d902ac0ce5892dc0ca2a31"><div class="ttname"><a href="../../d2/d29/iso9660_8c.html#adfdf2f6067d902ac0ce5892dc0ca2a31">iso_volume_descriptor::volume_id</a></div><div class="ttdeci">uint8_t volume_id[32]</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d29/iso9660_8c_source.html#l00043">iso9660.c:43</a></div></div>
<div class="ttc" id="aiso9660_8c_html_ae3d56c8c1edff51090e68516fcf38683"><div class="ttname"><a href="../../d2/d29/iso9660_8c.html#ae3d56c8c1edff51090e68516fcf38683">ISO_VD_MAX</a></div><div class="ttdeci">#define ISO_VD_MAX</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d29/iso9660_8c_source.html#l00035">iso9660.c:35</a></div></div>
<div class="ttc" id="aiso9660_8c_html_aee9cdee79ec599ee73acbbc73e3e7b09"><div class="ttname"><a href="../../d2/d29/iso9660_8c.html#aee9cdee79ec599ee73acbbc73e3e7b09">iso_volume_descriptor::vd_id</a></div><div class="ttdeci">uint8_t vd_id[5]</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d29/iso9660_8c_source.html#l00039">iso9660.c:39</a></div></div>
<div class="ttc" id="aiso9660_8c_html_d8/d45/structiso__volume__descriptor"><div class="ttname"><a href="../../d2/d29/iso9660_8c.html#d8/d45/structiso__volume__descriptor">iso_volume_descriptor</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d29/iso9660_8c_source.html#l00037">iso9660.c:37</a></div></div>
<div class="ttc" id="aiso9660_8c_html_de/dcb/structhigh__sierra__volume__descriptor"><div class="ttname"><a href="../../d2/d29/iso9660_8c.html#de/dcb/structhigh__sierra__volume__descriptor">high_sierra_volume_descriptor</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d29/iso9660_8c_source.html#l00049">iso9660.c:49</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00132">BE</a>, <a class="el" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>, <a class="el" href="../../d7/d8f/decompress__bunzip2_8c_source.html#l00047">dbg</a>, <a class="el" href="../../d2/d29/iso9660_8c_source.html#l00046">iso_volume_descriptor::escape_sequences</a>, <a class="el" href="../../d9/dd9/gconf_8c_source.html#l01348">found</a>, <a class="el" href="../../dd/d71/gettextP_8h_source.html#l00074">i</a>, <a class="el" href="../../d2/d29/iso9660_8c_source.html#l00052">high_sierra_volume_descriptor::id</a>, <a class="el" href="../../d2/d29/iso9660_8c_source.html#l00030">ISO_SECTOR_SIZE</a>, <a class="el" href="../../d2/d29/iso9660_8c_source.html#l00029">ISO_SUPERBLOCK_OFFSET</a>, <a class="el" href="../../d2/d29/iso9660_8c_source.html#l00034">ISO_VD_END</a>, <a class="el" href="../../d2/d29/iso9660_8c_source.html#l00035">ISO_VD_MAX</a>, <a class="el" href="../../d2/d29/iso9660_8c_source.html#l00031">ISO_VD_OFFSET</a>, <a class="el" href="../../d2/d29/iso9660_8c_source.html#l00033">ISO_VD_SUPPLEMENTARY</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00078">volume_id::label</a>, <a class="el" href="../../d3/d68/convert_8cpp_source.html#l00030">memcmp()</a>, <a class="el" href="../../d0/df4/Kernel_2include_2types_8h_source.html#l00037">NULL</a>, <a class="el" href="../../d2/d29/iso9660_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a>, <a class="el" href="../../d2/d29/iso9660_8c_source.html#l00039">iso_volume_descriptor::vd_id</a>, <a class="el" href="../../d2/d29/iso9660_8c_source.html#l00038">iso_volume_descriptor::vd_type</a>, <a class="el" href="../../d2/d29/iso9660_8c_source.html#l00043">iso_volume_descriptor::volume_id</a>, <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00179">volume_id_get_buffer()</a>, <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00115">volume_id_set_label_string()</a>, and <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00023">volume_id_set_unicode16()</a>.</p>

</div>
</div>
<a id="a4ec23ff4552ad1403d77ff94b72fee3b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ec23ff4552ad1403d77ff94b72fee3b">&#9670;&nbsp;</a></span>volume_id_probe_jfs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a> volume_id_probe_jfs </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/d98/jfs_8c_source.html#l00044">44</a> of file <a class="el" href="../../d8/d98/jfs_8c_source.html">jfs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;{</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#define off ((uint64_t)0)</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d8/d98/jfs_8c.html#df/d62/structjfs__super__block">jfs_super_block</a> *<a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160; </div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;probing at offset 0x%llx&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>) <a class="code" href="../../d8/d98/jfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a>);</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160; </div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a> = <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#ad52c7b05017442dbe08091a85ef92710">volume_id_get_buffer</a>(<span class="keywordtype">id</span>, <a class="code" href="../../d8/d98/jfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a> + <a class="code" href="../../d8/d98/jfs_8c.html#aa58498a0c180576f5664ecd22c9d1c62">JFS_SUPERBLOCK_OFFSET</a>, 0x200);</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a> == <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160; </div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d82/convert_8h.html#ac376fcece8fcc2d0f8b1cf3de18b10df">memcmp</a>(<a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>-&gt;magic, <span class="stringliteral">&quot;JFS1&quot;</span>, 4) != 0)</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160; </div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment">//  volume_id_set_label_raw(id, js-&gt;label, 16);</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#a3629b5eaf1943e2f4634bd5913959b04">volume_id_set_label_string</a>(<span class="keywordtype">id</span>, <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>-&gt;label, 16);</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#aaaf5289e506677e73ce13f40c67fb188">volume_id_set_uuid</a>(<span class="keywordtype">id</span>, <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>-&gt;uuid, <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a72f809f0cc1f63120f83a9fe78f026f1a4bd0e1bee402481edbff5b037158c245">UUID_DCE</a>);</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160; </div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">//  volume_id_set_usage(id, VOLUME_ID_FILESYSTEM);</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    IF_FEATURE_BLKID_TYPE(id-&gt;type = <span class="stringliteral">&quot;jfs&quot;</span>;)</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160; </div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <a class="code" href="../../d8/d64/glob__loop_8c.html#a5f3f8891e3f4c9d8d7effae7eb271604">return</a> 0;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;}</div>
<div class="ttc" id="ajfs_8c_html_aa58498a0c180576f5664ecd22c9d1c62"><div class="ttname"><a href="../../d8/d98/jfs_8c.html#aa58498a0c180576f5664ecd22c9d1c62">JFS_SUPERBLOCK_OFFSET</a></div><div class="ttdeci">#define JFS_SUPERBLOCK_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d98/jfs_8c_source.html#l00042">jfs.c:42</a></div></div>
<div class="ttc" id="ajfs_8c_html_aa8df4166084b06f1e80d3510e5dcf7e1"><div class="ttname"><a href="../../d8/d98/jfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a></div><div class="ttdeci">#define off</div></div>
<div class="ttc" id="ajfs_8c_html_df/d62/structjfs__super__block"><div class="ttname"><a href="../../d8/d98/jfs_8c.html#df/d62/structjfs__super__block">jfs_super_block</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d98/jfs_8c_source.html#l00029">jfs.c:29</a></div></div>
<div class="ttc" id="ajobs_8c_html_afed1e71c6cd6951355514e19454fd26a"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a></div><div class="ttdeci">struct jobstats js</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l00172">jobs.c:175</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/d8f/decompress__bunzip2_8c_source.html#l00047">dbg</a>, <a class="el" href="../../d8/d98/jfs_8c_source.html#l00042">JFS_SUPERBLOCK_OFFSET</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00175">js</a>, <a class="el" href="../../d3/d68/convert_8cpp_source.html#l00030">memcmp()</a>, <a class="el" href="../../d0/df4/Kernel_2include_2types_8h_source.html#l00037">NULL</a>, <a class="el" href="../../d8/d98/jfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00126">UUID_DCE</a>, <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00179">volume_id_get_buffer()</a>, <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00115">volume_id_set_label_string()</a>, and <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00135">volume_id_set_uuid()</a>.</p>

</div>
</div>
<a id="a155c180cf3e1f696332f0b2a711fc36f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a155c180cf3e1f696332f0b2a711fc36f">&#9670;&nbsp;</a></span>volume_id_probe_lfs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a> volume_id_probe_lfs </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/d36/lfs_8c_source.html#l00045">45</a> of file <a class="el" href="../../d6/d36/lfs_8c_source.html">lfs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;{</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d6/d36/lfs_8c.html#de/daa/structlfs__super__block">lfs_super_block</a> *sb;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160; </div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <span class="comment">// Go for primary super block (ignore second sb)</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;lfs: probing at offset 0x%x&quot;</span>, <a class="code" href="../../d6/d36/lfs_8c.html#a3a65a4e0e3228ac0ff3ada0178693077">LFS_SB1_OFFSET</a>);</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    sb = <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#ad52c7b05017442dbe08091a85ef92710">volume_id_get_buffer</a>(<span class="keywordtype">id</span>, <a class="code" href="../../d6/d36/lfs_8c.html#a3a65a4e0e3228ac0ff3ada0178693077">LFS_SB1_OFFSET</a>, <span class="keyword">sizeof</span>(*sb));</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160; </div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="keywordflow">if</span> (!sb)</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160; </div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d82/convert_8h.html#ac376fcece8fcc2d0f8b1cf3de18b10df">memcmp</a>(sb-&gt;<a class="code" href="../../d6/d36/lfs_8c.html#adf19160ed964d8a6863cc205103165d6">magic</a>, <a class="code" href="../../d6/d36/lfs_8c.html#a27eda7261e27a670305428d8645a3305">LFS_MAGIC_NAME</a>, <a class="code" href="../../d6/d36/lfs_8c.html#a9f574b3c8199e2392414cebfaa620ec4">LFS_MAGIC_LEN</a>) != 0)</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160; </div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    IF_FEATURE_BLKID_TYPE(id-&gt;type = <a class="code" href="../../d6/d36/lfs_8c.html#a27eda7261e27a670305428d8645a3305">LFS_MAGIC_NAME</a>);</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160; </div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;}</div>
<div class="ttc" id="alfs_8c_html_a27eda7261e27a670305428d8645a3305"><div class="ttname"><a href="../../d6/d36/lfs_8c.html#a27eda7261e27a670305428d8645a3305">LFS_MAGIC_NAME</a></div><div class="ttdeci">#define LFS_MAGIC_NAME</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d36/lfs_8c_source.html#l00024">lfs.c:24</a></div></div>
<div class="ttc" id="alfs_8c_html_a3a65a4e0e3228ac0ff3ada0178693077"><div class="ttname"><a href="../../d6/d36/lfs_8c.html#a3a65a4e0e3228ac0ff3ada0178693077">LFS_SB1_OFFSET</a></div><div class="ttdeci">#define LFS_SB1_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d36/lfs_8c_source.html#l00023">lfs.c:23</a></div></div>
<div class="ttc" id="alfs_8c_html_a9f574b3c8199e2392414cebfaa620ec4"><div class="ttname"><a href="../../d6/d36/lfs_8c.html#a9f574b3c8199e2392414cebfaa620ec4">LFS_MAGIC_LEN</a></div><div class="ttdeci">#define LFS_MAGIC_LEN</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d36/lfs_8c_source.html#l00025">lfs.c:25</a></div></div>
<div class="ttc" id="alfs_8c_html_adf19160ed964d8a6863cc205103165d6"><div class="ttname"><a href="../../d6/d36/lfs_8c.html#adf19160ed964d8a6863cc205103165d6">lfs_super_block::magic</a></div><div class="ttdeci">uint8_t magic[LFS_MAGIC_LEN]</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d36/lfs_8c_source.html#l00041">lfs.c:41</a></div></div>
<div class="ttc" id="alfs_8c_html_de/daa/structlfs__super__block"><div class="ttname"><a href="../../d6/d36/lfs_8c.html#de/daa/structlfs__super__block">lfs_super_block</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d36/lfs_8c_source.html#l00028">lfs.c:28</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/d8f/decompress__bunzip2_8c_source.html#l00047">dbg</a>, <a class="el" href="../../d6/d36/lfs_8c_source.html#l00025">LFS_MAGIC_LEN</a>, <a class="el" href="../../d6/d36/lfs_8c_source.html#l00024">LFS_MAGIC_NAME</a>, <a class="el" href="../../d6/d36/lfs_8c_source.html#l00023">LFS_SB1_OFFSET</a>, <a class="el" href="../../d6/d36/lfs_8c_source.html#l00041">lfs_super_block::magic</a>, <a class="el" href="../../d3/d68/convert_8cpp_source.html#l00030">memcmp()</a>, and <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00179">volume_id_get_buffer()</a>.</p>

</div>
</div>
<a id="a29eb29e84a6956e332ab00bbb636d100"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29eb29e84a6956e332ab00bbb636d100">&#9670;&nbsp;</a></span>volume_id_probe_linux_raid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a> volume_id_probe_linux_raid </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/ddd/arithmetic__operations_8c.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a>&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d8f/linux__raid_8c_source.html#l00051">51</a> of file <a class="el" href="../../d7/d8f/linux__raid_8c_source.html">linux_raid.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;{</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="keyword">typedef</span> <a class="code" href="../../dd/ddd/arithmetic__operations_8c.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> aliased_uint32_t <a class="code" href="../../de/d03/platform_8h.html#a934a0bfb1d9d15b79f6003dd59170dae">FIX_ALIASING</a>;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#define off ((uint64_t)0)</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <a class="code" href="../../dd/ddd/arithmetic__operations_8c.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a> sboff;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a3cb4a16b0e8d6af0af86d4fd6ba5fd9d">uint8_t</a> uuid[16];</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d7/d8f/linux__raid_8c.html#d3/d5a/structmdp__super__block">mdp_super_block</a> *mdp;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160; </div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;probing at offset 0x%llx, size 0x%llx&quot;</span>,</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;        (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>) <a class="code" href="../../d7/d8f/linux__raid_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>) <a class="code" href="../../d1/dc0/multiboot_8h.html#a6d813a0f2b5281b18dea3f4cda696c33">size</a>);</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160; </div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d1/dc0/multiboot_8h.html#a6d813a0f2b5281b18dea3f4cda696c33">size</a> &lt; 0x10000)</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160; </div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    sboff = (<a class="code" href="../../d1/dc0/multiboot_8h.html#a6d813a0f2b5281b18dea3f4cda696c33">size</a> &amp; ~(<a class="code" href="../../d7/d8f/linux__raid_8c.html#a8c538fc86059439bde34b307bb0f83ae">MD_RESERVED_BYTES</a> - 1)) - <a class="code" href="../../d7/d8f/linux__raid_8c.html#a8c538fc86059439bde34b307bb0f83ae">MD_RESERVED_BYTES</a>;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    mdp = <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#ad52c7b05017442dbe08091a85ef92710">volume_id_get_buffer</a>(<span class="keywordtype">id</span>, <a class="code" href="../../d7/d8f/linux__raid_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a> + sboff, 0x800);</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="keywordflow">if</span> (mdp == <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160; </div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <span class="keywordflow">if</span> (mdp-&gt;<a class="code" href="../../d7/d8f/linux__raid_8c.html#a01383b8157319a3d4a7788b169724eb7">md_magic</a> != <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a1d5ae0c36d519a1b0a789db69a598f28">cpu_to_le32</a>(<a class="code" href="../../d7/d8f/linux__raid_8c.html#a6e25a4278430b7585a8b89a09ab1c629">MD_MAGIC</a>))</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160; </div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    *(aliased_uint32_t*)uuid = mdp-&gt;<a class="code" href="../../d7/d8f/linux__raid_8c.html#a3c1720bd655bea72a8acec0e630fa6ea">set_uuid0</a>;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <a class="code" href="../../d3/d82/convert_8h.html#a309e07aa23e76adc2ad0830978663c45">memcpy</a>(&amp;uuid[4], &amp;mdp-&gt;<a class="code" href="../../d7/d8f/linux__raid_8c.html#a09d5406a6375b33d5a19e8c87898d1be">set_uuid1</a>, 12);</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#aaaf5289e506677e73ce13f40c67fb188">volume_id_set_uuid</a>(<span class="keywordtype">id</span>, uuid, <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a72f809f0cc1f63120f83a9fe78f026f1a4bd0e1bee402481edbff5b037158c245">UUID_DCE</a>);</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160; </div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">//  snprintf(id-&gt;type_version, sizeof(id-&gt;type_version)-1, &quot;%u.%u.%u&quot;,</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">//      le32_to_cpu(mdp-&gt;major_version),</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment">//      le32_to_cpu(mdp-&gt;minor_version),</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment">//      le32_to_cpu(mdp-&gt;patch_version));</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160; </div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;found raid signature&quot;</span>);</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment">//  volume_id_set_usage(id, VOLUME_ID_RAID);</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    IF_FEATURE_BLKID_TYPE(id-&gt;type = <span class="stringliteral">&quot;linux_raid_member&quot;</span>;)</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160; </div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <a class="code" href="../../d8/d64/glob__loop_8c.html#a5f3f8891e3f4c9d8d7effae7eb271604">return</a> 0;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;}</div>
<div class="ttc" id="aarithmetic__operations_8c_html_a435d1572bf3f880d55459d9805097f62"><div class="ttname"><a href="../../dd/ddd/arithmetic__operations_8c.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a></div><div class="ttdeci">unsigned int uint32_t</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/ddd/arithmetic__operations_8c_source.html#l00295">arithmetic_operations.c:295</a></div></div>
<div class="ttc" id="alinux__raid_8c_html_a01383b8157319a3d4a7788b169724eb7"><div class="ttname"><a href="../../d7/d8f/linux__raid_8c.html#a01383b8157319a3d4a7788b169724eb7">mdp_super_block::md_magic</a></div><div class="ttdeci">uint32_t md_magic</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d8f/linux__raid_8c_source.html#l00030">linux_raid.c:30</a></div></div>
<div class="ttc" id="alinux__raid_8c_html_a09d5406a6375b33d5a19e8c87898d1be"><div class="ttname"><a href="../../d7/d8f/linux__raid_8c.html#a09d5406a6375b33d5a19e8c87898d1be">mdp_super_block::set_uuid1</a></div><div class="ttdeci">uint32_t set_uuid1</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d8f/linux__raid_8c_source.html#l00043">linux_raid.c:43</a></div></div>
<div class="ttc" id="alinux__raid_8c_html_a3c1720bd655bea72a8acec0e630fa6ea"><div class="ttname"><a href="../../d7/d8f/linux__raid_8c.html#a3c1720bd655bea72a8acec0e630fa6ea">mdp_super_block::set_uuid0</a></div><div class="ttdeci">uint32_t set_uuid0</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d8f/linux__raid_8c_source.html#l00035">linux_raid.c:35</a></div></div>
<div class="ttc" id="alinux__raid_8c_html_a6e25a4278430b7585a8b89a09ab1c629"><div class="ttname"><a href="../../d7/d8f/linux__raid_8c.html#a6e25a4278430b7585a8b89a09ab1c629">MD_MAGIC</a></div><div class="ttdeci">#define MD_MAGIC</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d8f/linux__raid_8c_source.html#l00049">linux_raid.c:49</a></div></div>
<div class="ttc" id="alinux__raid_8c_html_a8c538fc86059439bde34b307bb0f83ae"><div class="ttname"><a href="../../d7/d8f/linux__raid_8c.html#a8c538fc86059439bde34b307bb0f83ae">MD_RESERVED_BYTES</a></div><div class="ttdeci">#define MD_RESERVED_BYTES</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d8f/linux__raid_8c_source.html#l00048">linux_raid.c:48</a></div></div>
<div class="ttc" id="alinux__raid_8c_html_aa8df4166084b06f1e80d3510e5dcf7e1"><div class="ttname"><a href="../../d7/d8f/linux__raid_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a></div><div class="ttdeci">#define off</div></div>
<div class="ttc" id="alinux__raid_8c_html_d3/d5a/structmdp__super__block"><div class="ttname"><a href="../../d7/d8f/linux__raid_8c.html#d3/d5a/structmdp__super__block">mdp_super_block</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d8f/linux__raid_8c_source.html#l00029">linux_raid.c:29</a></div></div>
<div class="ttc" id="aplatform_8h_html_a934a0bfb1d9d15b79f6003dd59170dae"><div class="ttname"><a href="../../de/d03/platform_8h.html#a934a0bfb1d9d15b79f6003dd59170dae">FIX_ALIASING</a></div><div class="ttdeci">#define FIX_ALIASING</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d03/platform_8h_source.html#l00106">platform.h:106</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00115">cpu_to_le32</a>, <a class="el" href="../../d7/d8f/decompress__bunzip2_8c_source.html#l00047">dbg</a>, <a class="el" href="../../de/d03/platform_8h_source.html#l00106">FIX_ALIASING</a>, <a class="el" href="../../d7/d8f/linux__raid_8c_source.html#l00030">mdp_super_block::md_magic</a>, <a class="el" href="../../d7/d8f/linux__raid_8c_source.html#l00049">MD_MAGIC</a>, <a class="el" href="../../d7/d8f/linux__raid_8c_source.html#l00048">MD_RESERVED_BYTES</a>, <a class="el" href="../../d3/d82/convert_8h_source.html#l00125">memcpy</a>, <a class="el" href="../../d0/df4/Kernel_2include_2types_8h_source.html#l00037">NULL</a>, <a class="el" href="../../d7/d8f/linux__raid_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a>, <a class="el" href="../../d7/d8f/linux__raid_8c_source.html#l00035">mdp_super_block::set_uuid0</a>, <a class="el" href="../../d7/d8f/linux__raid_8c_source.html#l00043">mdp_super_block::set_uuid1</a>, <a class="el" href="../../d1/dc0/multiboot_8h_source.html#l00000">size</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00126">UUID_DCE</a>, <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00179">volume_id_get_buffer()</a>, and <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00135">volume_id_set_uuid()</a>.</p>

</div>
</div>
<a id="a942c22de26de530259b09e3ee6e61ede"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a942c22de26de530259b09e3ee6e61ede">&#9670;&nbsp;</a></span>volume_id_probe_linux_swap()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a> volume_id_probe_linux_swap </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/dfb/linux__swap_8c_source.html#l00040">40</a> of file <a class="el" href="../../d6/dfb/linux__swap_8c_source.html">linux_swap.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;{</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#define off ((uint64_t)0)</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d6/dfb/linux__swap_8c.html#db/d30/structswap__header__v1__2">swap_header_v1_2</a> *sw;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a3cb4a16b0e8d6af0af86d4fd6ba5fd9d">uint8_t</a> *<a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="../../d3/d46/textbox_8c.html#aec5fd883b1b6b0e16ed5e57f1a511e1b">page</a>;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160; </div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;probing at offset 0x%llx&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>) <a class="code" href="../../d6/dfb/linux__swap_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a>);</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160; </div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <span class="comment">/* the swap signature is at the end of the PAGE_SIZE */</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../d3/d46/textbox_8c.html#aec5fd883b1b6b0e16ed5e57f1a511e1b">page</a> = 0x1000; <a class="code" href="../../d3/d46/textbox_8c.html#aec5fd883b1b6b0e16ed5e57f1a511e1b">page</a> &lt;= <a class="code" href="../../d6/dfb/linux__swap_8c.html#abb7d265185a75c329bab23ef5fe291a9">LARGEST_PAGESIZE</a>; <a class="code" href="../../d3/d46/textbox_8c.html#aec5fd883b1b6b0e16ed5e57f1a511e1b">page</a> &lt;&lt;= 1) {</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;            <a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a> = <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#ad52c7b05017442dbe08091a85ef92710">volume_id_get_buffer</a>(<span class="keywordtype">id</span>, <a class="code" href="../../d6/dfb/linux__swap_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a> + <a class="code" href="../../d3/d46/textbox_8c.html#aec5fd883b1b6b0e16ed5e57f1a511e1b">page</a>-10, 10);</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a> == <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;                <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160; </div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d3/d82/convert_8h.html#ac376fcece8fcc2d0f8b1cf3de18b10df">memcmp</a>(<a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>, <span class="stringliteral">&quot;SWAP-SPACE&quot;</span>, 10) == 0) {</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment">//              id-&gt;type_version[0] = &#39;1&#39;;</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment">//              id-&gt;type_version[1] = &#39;\0&#39;;</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;                <span class="keywordflow">goto</span> <a class="code" href="../../d9/dd9/gconf_8c.html#a880efc1795d900be549017ddf66a03e3">found</a>;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;            }</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160; </div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d3/d82/convert_8h.html#ac376fcece8fcc2d0f8b1cf3de18b10df">memcmp</a>(<a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>, <span class="stringliteral">&quot;SWAPSPACE2&quot;</span>, 10) == 0</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;             || <a class="code" href="../../d3/d82/convert_8h.html#ac376fcece8fcc2d0f8b1cf3de18b10df">memcmp</a>(<a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>, <span class="stringliteral">&quot;S1SUSPEND&quot;</span>, 9) == 0</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;             || <a class="code" href="../../d3/d82/convert_8h.html#ac376fcece8fcc2d0f8b1cf3de18b10df">memcmp</a>(<a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>, <span class="stringliteral">&quot;S2SUSPEND&quot;</span>, 9) == 0</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;             || <a class="code" href="../../d3/d82/convert_8h.html#ac376fcece8fcc2d0f8b1cf3de18b10df">memcmp</a>(<a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>, <span class="stringliteral">&quot;ULSUSPEND&quot;</span>, 9) == 0</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;            ) {</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;                sw = <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#ad52c7b05017442dbe08091a85ef92710">volume_id_get_buffer</a>(<span class="keywordtype">id</span>, <a class="code" href="../../d6/dfb/linux__swap_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a>, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="../../d6/dfb/linux__swap_8c.html#db/d30/structswap__header__v1__2">swap_header_v1_2</a>));</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;                <span class="keywordflow">if</span> (sw == <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;                    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">//              id-&gt;type_version[0] = &#39;2&#39;;</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">//              id-&gt;type_version[1] = &#39;\0&#39;;</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">//              volume_id_set_label_raw(id, sw-&gt;volume_name, 16);</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;                <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#a3629b5eaf1943e2f4634bd5913959b04">volume_id_set_label_string</a>(<span class="keywordtype">id</span>, sw-&gt;<a class="code" href="../../d6/dfb/linux__swap_8c.html#a6b596c22800c4790f32d406a8913064e">volume_name</a>, 16);</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;                <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#aaaf5289e506677e73ce13f40c67fb188">volume_id_set_uuid</a>(<span class="keywordtype">id</span>, sw-&gt;<a class="code" href="../../d6/dfb/linux__swap_8c.html#a0bd97fc15fcce8133cf765abc4d08095">uuid</a>, <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a72f809f0cc1f63120f83a9fe78f026f1a4bd0e1bee402481edbff5b037158c245">UUID_DCE</a>);</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;                <span class="keywordflow">goto</span> <a class="code" href="../../d9/dd9/gconf_8c.html#a880efc1795d900be549017ddf66a03e3">found</a>;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;            }</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    }</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160; </div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<a class="code" href="../../d9/dd9/gconf_8c.html#a880efc1795d900be549017ddf66a03e3">found</a>:</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment">//  volume_id_set_usage(id, VOLUME_ID_OTHER);</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    IF_FEATURE_BLKID_TYPE(id-&gt;type = <span class="stringliteral">&quot;swap&quot;</span>;)</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160; </div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <a class="code" href="../../d8/d64/glob__loop_8c.html#a5f3f8891e3f4c9d8d7effae7eb271604">return</a> 0;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;}</div>
<div class="ttc" id="alinux__swap_8c_html_a0bd97fc15fcce8133cf765abc4d08095"><div class="ttname"><a href="../../d6/dfb/linux__swap_8c.html#a0bd97fc15fcce8133cf765abc4d08095">swap_header_v1_2::uuid</a></div><div class="ttdeci">uint8_t uuid[16]</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dfb/linux__swap_8c_source.html#l00034">linux_swap.c:34</a></div></div>
<div class="ttc" id="alinux__swap_8c_html_a6b596c22800c4790f32d406a8913064e"><div class="ttname"><a href="../../d6/dfb/linux__swap_8c.html#a6b596c22800c4790f32d406a8913064e">swap_header_v1_2::volume_name</a></div><div class="ttdeci">uint8_t volume_name[16]</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dfb/linux__swap_8c_source.html#l00035">linux_swap.c:35</a></div></div>
<div class="ttc" id="alinux__swap_8c_html_aa8df4166084b06f1e80d3510e5dcf7e1"><div class="ttname"><a href="../../d6/dfb/linux__swap_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a></div><div class="ttdeci">#define off</div></div>
<div class="ttc" id="alinux__swap_8c_html_abb7d265185a75c329bab23ef5fe291a9"><div class="ttname"><a href="../../d6/dfb/linux__swap_8c.html#abb7d265185a75c329bab23ef5fe291a9">LARGEST_PAGESIZE</a></div><div class="ttdeci">#define LARGEST_PAGESIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dfb/linux__swap_8c_source.html#l00038">linux_swap.c:38</a></div></div>
<div class="ttc" id="alinux__swap_8c_html_db/d30/structswap__header__v1__2"><div class="ttname"><a href="../../d6/dfb/linux__swap_8c.html#db/d30/structswap__header__v1__2">swap_header_v1_2</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dfb/linux__swap_8c_source.html#l00029">linux_swap.c:29</a></div></div>
<div class="ttc" id="atextbox_8c_html_aec5fd883b1b6b0e16ed5e57f1a511e1b"><div class="ttname"><a href="../../d3/d46/textbox_8c.html#aec5fd883b1b6b0e16ed5e57f1a511e1b">page</a></div><div class="ttdeci">static char * page</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d46/textbox_8c_source.html#l00032">textbox.c:32</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>, <a class="el" href="../../d7/d8f/decompress__bunzip2_8c_source.html#l00047">dbg</a>, <a class="el" href="../../d9/dd9/gconf_8c_source.html#l01348">found</a>, <a class="el" href="../../d6/dfb/linux__swap_8c_source.html#l00038">LARGEST_PAGESIZE</a>, <a class="el" href="../../d3/d68/convert_8cpp_source.html#l00030">memcmp()</a>, <a class="el" href="../../d0/df4/Kernel_2include_2types_8h_source.html#l00037">NULL</a>, <a class="el" href="../../d6/dfb/linux__swap_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a>, <a class="el" href="../../d3/d46/textbox_8c_source.html#l00032">page</a>, <a class="el" href="../../d6/dfb/linux__swap_8c_source.html#l00034">swap_header_v1_2::uuid</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00126">UUID_DCE</a>, <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00179">volume_id_get_buffer()</a>, <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00115">volume_id_set_label_string()</a>, <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00135">volume_id_set_uuid()</a>, and <a class="el" href="../../d6/dfb/linux__swap_8c_source.html#l00035">swap_header_v1_2::volume_name</a>.</p>

</div>
</div>
<a id="a29b0f30464439dd6ad9ba33251b8501f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29b0f30464439dd6ad9ba33251b8501f">&#9670;&nbsp;</a></span>volume_id_probe_luks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a> volume_id_probe_luks </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d59/luks_8c_source.html#l00089">89</a> of file <a class="el" href="../../d7/d59/luks_8c_source.html">luks.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;{</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="preprocessor">#define off ((uint64_t)0)</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d7/d59/luks_8c.html#d0/da8/structluks__phdr">luks_phdr</a> *<a class="code" href="../../d7/d55/alloca_8c.html#ae69990992496333b8701388f1b1502da">header</a>;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160; </div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <a class="code" href="../../d7/d55/alloca_8c.html#dd/d5e/unionhdr">header</a> = <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#ad52c7b05017442dbe08091a85ef92710">volume_id_get_buffer</a>(<span class="keywordtype">id</span>, <a class="code" href="../../d7/d59/luks_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a>, <span class="keyword">sizeof</span>(*<a class="code" href="../../d7/d55/alloca_8c.html#dd/d5e/unionhdr">header</a>));</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d7/d55/alloca_8c.html#dd/d5e/unionhdr">header</a> == <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160; </div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d82/convert_8h.html#ac376fcece8fcc2d0f8b1cf3de18b10df">memcmp</a>(<a class="code" href="../../d7/d55/alloca_8c.html#dd/d5e/unionhdr">header</a>-&gt;magic, LUKS_MAGIC, <a class="code" href="../../d7/d59/luks_8c.html#ab913e043e0f050cd3c761e1d4b01bde5">LUKS_MAGIC_L</a>))</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160; </div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment">//  volume_id_set_usage(id, VOLUME_ID_CRYPTO);</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#aaaf5289e506677e73ce13f40c67fb188">volume_id_set_uuid</a>(<span class="keywordtype">id</span>, <a class="code" href="../../d7/d55/alloca_8c.html#dd/d5e/unionhdr">header</a>-&gt;uuid, <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a72f809f0cc1f63120f83a9fe78f026f1afeab423d9f83201f36fdf94d3fbc1217">UUID_DCE_STRING</a>);</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    IF_FEATURE_BLKID_TYPE(id-&gt;type = <span class="stringliteral">&quot;crypto_LUKS&quot;</span>;)</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160; </div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <a class="code" href="../../d8/d64/glob__loop_8c.html#a5f3f8891e3f4c9d8d7effae7eb271604">return</a> 0;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;}</div>
<div class="ttc" id="aalloca_8c_html_ae69990992496333b8701388f1b1502da"><div class="ttname"><a href="../../d7/d55/alloca_8c.html#ae69990992496333b8701388f1b1502da">header</a></div><div class="ttdeci">union hdr header</div></div>
<div class="ttc" id="aalloca_8c_html_dd/d5e/unionhdr"><div class="ttname"><a href="../../d7/d55/alloca_8c.html#dd/d5e/unionhdr">hdr</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d55/alloca_8c_source.html#l00139">alloca.c:140</a></div></div>
<div class="ttc" id="aluks_8c_html_aa8df4166084b06f1e80d3510e5dcf7e1"><div class="ttname"><a href="../../d7/d59/luks_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a></div><div class="ttdeci">#define off</div></div>
<div class="ttc" id="aluks_8c_html_ab913e043e0f050cd3c761e1d4b01bde5"><div class="ttname"><a href="../../d7/d59/luks_8c.html#ab913e043e0f050cd3c761e1d4b01bde5">LUKS_MAGIC_L</a></div><div class="ttdeci">#define LUKS_MAGIC_L</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d59/luks_8c_source.html#l00029">luks.c:29</a></div></div>
<div class="ttc" id="aluks_8c_html_d0/da8/structluks__phdr"><div class="ttname"><a href="../../d7/d59/luks_8c.html#d0/da8/structluks__phdr">luks_phdr</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d59/luks_8c_source.html#l00040">luks.c:40</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/d59/luks_8c_source.html#l00029">LUKS_MAGIC_L</a>, <a class="el" href="../../d3/d68/convert_8cpp_source.html#l00030">memcmp()</a>, <a class="el" href="../../d0/df4/Kernel_2include_2types_8h_source.html#l00037">NULL</a>, <a class="el" href="../../d7/d59/luks_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00127">UUID_DCE_STRING</a>, <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00179">volume_id_get_buffer()</a>, and <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00135">volume_id_set_uuid()</a>.</p>

</div>
</div>
<a id="a5f6aa898625b2a42d96ead4e171c0d64"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f6aa898625b2a42d96ead4e171c0d64">&#9670;&nbsp;</a></span>volume_id_probe_minix()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a> volume_id_probe_minix </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d59/minix_8c_source.html#l00061">61</a> of file <a class="el" href="../../df/d59/minix_8c_source.html">minix.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;{</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="preprocessor">#define off ((uint64_t)0)</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../df/d59/minix_8c.html#d0/d27/structminix__super__block">minix_super_block</a> *ms;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../df/d59/minix_8c.html#db/de2/structminix3__super__block">minix3_super_block</a> *ms3;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160; </div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;probing at offset 0x%llx&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>) <a class="code" href="../../df/d59/minix_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a>);</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160; </div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    ms = <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#ad52c7b05017442dbe08091a85ef92710">volume_id_get_buffer</a>(<span class="keywordtype">id</span>, <a class="code" href="../../df/d59/minix_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a> + <a class="code" href="../../df/d59/minix_8c.html#ab86147c8b189d247b5e32bc6534232f8">MINIX_SUPERBLOCK_OFFSET</a>, 0x200);</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <span class="keywordflow">if</span> (ms == <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="keywordflow">if</span> (ms-&gt;<a class="code" href="../../df/d59/minix_8c.html#a9c6d66f2dee383ef55fa1e8069924d4e">s_magic</a> == <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#aeda3065f344779edb9023e22d84d5f92">cpu_to_le16</a>(0x137F)) <span class="comment">/* minix V1 fs, 14 char names */</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="../../d9/dd9/gconf_8c.html#a880efc1795d900be549017ddf66a03e3">found</a>;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="keywordflow">if</span> (ms-&gt;<a class="code" href="../../df/d59/minix_8c.html#a9c6d66f2dee383ef55fa1e8069924d4e">s_magic</a> == <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#aeda3065f344779edb9023e22d84d5f92">cpu_to_le16</a>(0x138F)) <span class="comment">/* minix V1 fs, 30 char names */</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="../../d9/dd9/gconf_8c.html#a880efc1795d900be549017ddf66a03e3">found</a>;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="keywordflow">if</span> (ms-&gt;<a class="code" href="../../df/d59/minix_8c.html#a9c6d66f2dee383ef55fa1e8069924d4e">s_magic</a> == <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#aeda3065f344779edb9023e22d84d5f92">cpu_to_le16</a>(0x2468)) <span class="comment">/* minix V2 fs, 14 char names */</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="../../d9/dd9/gconf_8c.html#a880efc1795d900be549017ddf66a03e3">found</a>;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="keywordflow">if</span> (ms-&gt;<a class="code" href="../../df/d59/minix_8c.html#a9c6d66f2dee383ef55fa1e8069924d4e">s_magic</a> == <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#aeda3065f344779edb9023e22d84d5f92">cpu_to_le16</a>(0x2478)) <span class="comment">/* minix V2 fs, 30 char names */</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="../../d9/dd9/gconf_8c.html#a880efc1795d900be549017ddf66a03e3">found</a>;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160; </div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    ms3 = (<span class="keywordtype">void</span>*)ms;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="keywordflow">if</span> (ms3-&gt;<a class="code" href="../../df/d59/minix_8c.html#af9a6b43132ff152dd3acf0b397713e61">s_magic</a> == <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#aeda3065f344779edb9023e22d84d5f92">cpu_to_le16</a>(0x4d5a)) <span class="comment">/* minix V3 fs, 60 char names */</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="../../d9/dd9/gconf_8c.html#a880efc1795d900be549017ddf66a03e3">found</a>;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160; </div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160; </div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160; <a class="code" href="../../d9/dd9/gconf_8c.html#a880efc1795d900be549017ddf66a03e3">found</a>:</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment">//  volume_id_set_usage(id, VOLUME_ID_FILESYSTEM);</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    IF_FEATURE_BLKID_TYPE(id-&gt;type = <span class="stringliteral">&quot;minix&quot;</span>;)</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <a class="code" href="../../d8/d64/glob__loop_8c.html#a5f3f8891e3f4c9d8d7effae7eb271604">return</a> 0;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;}</div>
<div class="ttc" id="aminix_8c_html_a9c6d66f2dee383ef55fa1e8069924d4e"><div class="ttname"><a href="../../df/d59/minix_8c.html#a9c6d66f2dee383ef55fa1e8069924d4e">minix_super_block::s_magic</a></div><div class="ttdeci">uint16_t s_magic</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d59/minix_8c_source.html#l00037">minix.c:37</a></div></div>
<div class="ttc" id="aminix_8c_html_aa8df4166084b06f1e80d3510e5dcf7e1"><div class="ttname"><a href="../../df/d59/minix_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a></div><div class="ttdeci">#define off</div></div>
<div class="ttc" id="aminix_8c_html_ab86147c8b189d247b5e32bc6534232f8"><div class="ttname"><a href="../../df/d59/minix_8c.html#ab86147c8b189d247b5e32bc6534232f8">MINIX_SUPERBLOCK_OFFSET</a></div><div class="ttdeci">#define MINIX_SUPERBLOCK_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d59/minix_8c_source.html#l00059">minix.c:59</a></div></div>
<div class="ttc" id="aminix_8c_html_af9a6b43132ff152dd3acf0b397713e61"><div class="ttname"><a href="../../df/d59/minix_8c.html#af9a6b43132ff152dd3acf0b397713e61">minix3_super_block::s_magic</a></div><div class="ttdeci">uint16_t s_magic</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d59/minix_8c_source.html#l00053">minix.c:53</a></div></div>
<div class="ttc" id="aminix_8c_html_d0/d27/structminix__super__block"><div class="ttname"><a href="../../df/d59/minix_8c.html#d0/d27/structminix__super__block">minix_super_block</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d59/minix_8c_source.html#l00029">minix.c:29</a></div></div>
<div class="ttc" id="aminix_8c_html_db/de2/structminix3__super__block"><div class="ttname"><a href="../../df/d59/minix_8c.html#db/de2/structminix3__super__block">minix3_super_block</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d59/minix_8c_source.html#l00043">minix.c:43</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00114">cpu_to_le16</a>, <a class="el" href="../../d7/d8f/decompress__bunzip2_8c_source.html#l00047">dbg</a>, <a class="el" href="../../d9/dd9/gconf_8c_source.html#l01348">found</a>, <a class="el" href="../../df/d59/minix_8c_source.html#l00059">MINIX_SUPERBLOCK_OFFSET</a>, <a class="el" href="../../d0/df4/Kernel_2include_2types_8h_source.html#l00037">NULL</a>, <a class="el" href="../../df/d59/minix_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a>, <a class="el" href="../../df/d59/minix_8c_source.html#l00037">minix_super_block::s_magic</a>, <a class="el" href="../../df/d59/minix_8c_source.html#l00053">minix3_super_block::s_magic</a>, and <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00179">volume_id_get_buffer()</a>.</p>

</div>
</div>
<a id="a987ef6f1b2fab8891ece9a786d17d3f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a987ef6f1b2fab8891ece9a786d17d3f1">&#9670;&nbsp;</a></span>volume_id_probe_nilfs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a> volume_id_probe_nilfs </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d2c/nilfs_8c_source.html#l00087">87</a> of file <a class="el" href="../../d7/d2c/nilfs_8c_source.html">nilfs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;{</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d7/d2c/nilfs_8c.html#dd/d80/structnilfs2__super__block">nilfs2_super_block</a> *sb;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160; </div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="comment">// Primary super block</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;nilfs: probing at offset 0x%x&quot;</span>, <a class="code" href="../../d7/d2c/nilfs_8c.html#a86cca5b7601feaa771d359ae6575d17d">NILFS_SB1_OFFSET</a>);</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160; </div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    sb = <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#ad52c7b05017442dbe08091a85ef92710">volume_id_get_buffer</a>(<span class="keywordtype">id</span>, <a class="code" href="../../d7/d2c/nilfs_8c.html#a86cca5b7601feaa771d359ae6575d17d">NILFS_SB1_OFFSET</a>, <span class="keyword">sizeof</span>(*sb));</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; </div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordflow">if</span> (sb == <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160; </div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="keywordflow">if</span> (sb-&gt;<a class="code" href="../../d7/d2c/nilfs_8c.html#aa63b10d6b8d9961603657a759eb20c79">s_magic</a> != <a class="code" href="../../d7/d2c/nilfs_8c.html#ad19f48155c04ebcc946dcea88c402857">NILFS_MAGIC</a>)</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160; </div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="comment">// The secondary superblock is not always used, so ignore it for now.</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="comment">// When used it is at 4K from the end of the partition (sb-&gt;s_dev_size - NILFS_SB2_OFFSET).</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160; </div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#a3629b5eaf1943e2f4634bd5913959b04">volume_id_set_label_string</a>(<span class="keywordtype">id</span>, sb-&gt;<a class="code" href="../../d7/d2c/nilfs_8c.html#a4bc626d34c49ad3145656d3d81554c0a">s_volume_name</a>, <a class="code" href="../../d7/d2c/nilfs_8c.html#a9a4dfdc6594789fff48de524ba001020">NILFS_LABEL_SIZE</a> &lt; <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a70366446adc457ccbb282d3871e6ff77">VOLUME_ID_LABEL_SIZE</a> ?</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;                <a class="code" href="../../d7/d2c/nilfs_8c.html#a9a4dfdc6594789fff48de524ba001020">NILFS_LABEL_SIZE</a> : <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a70366446adc457ccbb282d3871e6ff77">VOLUME_ID_LABEL_SIZE</a>);</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#aaaf5289e506677e73ce13f40c67fb188">volume_id_set_uuid</a>(<span class="keywordtype">id</span>, sb-&gt;<a class="code" href="../../d7/d2c/nilfs_8c.html#a9123ff03c432a6d57a32e57bf8faeeaf">s_uuid</a>, <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a72f809f0cc1f63120f83a9fe78f026f1a4bd0e1bee402481edbff5b037158c245">UUID_DCE</a>);</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160; </div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="keywordflow">if</span> (sb-&gt;<a class="code" href="../../d7/d2c/nilfs_8c.html#a2b58a070d31c69ad10d58ae450b795ef">s_rev_level</a> == 2)</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        IF_FEATURE_BLKID_TYPE(id-&gt;type = <span class="stringliteral">&quot;nilfs2&quot;</span>);</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160; </div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;}</div>
<div class="ttc" id="anilfs_8c_html_a2b58a070d31c69ad10d58ae450b795ef"><div class="ttname"><a href="../../d7/d2c/nilfs_8c.html#a2b58a070d31c69ad10d58ae450b795ef">nilfs2_super_block::s_rev_level</a></div><div class="ttdeci">uint32_t s_rev_level</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d2c/nilfs_8c_source.html#l00048">nilfs.c:48</a></div></div>
<div class="ttc" id="anilfs_8c_html_a4bc626d34c49ad3145656d3d81554c0a"><div class="ttname"><a href="../../d7/d2c/nilfs_8c.html#a4bc626d34c49ad3145656d3d81554c0a">nilfs2_super_block::s_volume_name</a></div><div class="ttdeci">uint8_t s_volume_name[NILFS_LABEL_SIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d2c/nilfs_8c_source.html#l00083">nilfs.c:83</a></div></div>
<div class="ttc" id="anilfs_8c_html_a86cca5b7601feaa771d359ae6575d17d"><div class="ttname"><a href="../../d7/d2c/nilfs_8c.html#a86cca5b7601feaa771d359ae6575d17d">NILFS_SB1_OFFSET</a></div><div class="ttdeci">#define NILFS_SB1_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d2c/nilfs_8c_source.html#l00043">nilfs.c:43</a></div></div>
<div class="ttc" id="anilfs_8c_html_a9123ff03c432a6d57a32e57bf8faeeaf"><div class="ttname"><a href="../../d7/d2c/nilfs_8c.html#a9123ff03c432a6d57a32e57bf8faeeaf">nilfs2_super_block::s_uuid</a></div><div class="ttdeci">uint8_t s_uuid[NILFS_UUID_SIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d2c/nilfs_8c_source.html#l00082">nilfs.c:82</a></div></div>
<div class="ttc" id="anilfs_8c_html_a9a4dfdc6594789fff48de524ba001020"><div class="ttname"><a href="../../d7/d2c/nilfs_8c.html#a9a4dfdc6594789fff48de524ba001020">NILFS_LABEL_SIZE</a></div><div class="ttdeci">#define NILFS_LABEL_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d2c/nilfs_8c_source.html#l00042">nilfs.c:42</a></div></div>
<div class="ttc" id="anilfs_8c_html_aa63b10d6b8d9961603657a759eb20c79"><div class="ttname"><a href="../../d7/d2c/nilfs_8c.html#aa63b10d6b8d9961603657a759eb20c79">nilfs2_super_block::s_magic</a></div><div class="ttdeci">uint16_t s_magic</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d2c/nilfs_8c_source.html#l00050">nilfs.c:50</a></div></div>
<div class="ttc" id="anilfs_8c_html_ad19f48155c04ebcc946dcea88c402857"><div class="ttname"><a href="../../d7/d2c/nilfs_8c.html#ad19f48155c04ebcc946dcea88c402857">NILFS_MAGIC</a></div><div class="ttdeci">#define NILFS_MAGIC</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d2c/nilfs_8c_source.html#l00045">nilfs.c:45</a></div></div>
<div class="ttc" id="anilfs_8c_html_dd/d80/structnilfs2__super__block"><div class="ttname"><a href="../../d7/d2c/nilfs_8c.html#dd/d80/structnilfs2__super__block">nilfs2_super_block</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d2c/nilfs_8c_source.html#l00047">nilfs.c:47</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/d8f/decompress__bunzip2_8c_source.html#l00047">dbg</a>, <a class="el" href="../../d7/d2c/nilfs_8c_source.html#l00042">NILFS_LABEL_SIZE</a>, <a class="el" href="../../d7/d2c/nilfs_8c_source.html#l00045">NILFS_MAGIC</a>, <a class="el" href="../../d7/d2c/nilfs_8c_source.html#l00043">NILFS_SB1_OFFSET</a>, <a class="el" href="../../d0/df4/Kernel_2include_2types_8h_source.html#l00037">NULL</a>, <a class="el" href="../../d7/d2c/nilfs_8c_source.html#l00050">nilfs2_super_block::s_magic</a>, <a class="el" href="../../d7/d2c/nilfs_8c_source.html#l00048">nilfs2_super_block::s_rev_level</a>, <a class="el" href="../../d7/d2c/nilfs_8c_source.html#l00082">nilfs2_super_block::s_uuid</a>, <a class="el" href="../../d7/d2c/nilfs_8c_source.html#l00083">nilfs2_super_block::s_volume_name</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00126">UUID_DCE</a>, <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00179">volume_id_get_buffer()</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00033">VOLUME_ID_LABEL_SIZE</a>, <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00115">volume_id_set_label_string()</a>, and <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00135">volume_id_set_uuid()</a>.</p>

</div>
</div>
<a id="acefc1227c02575cffd4dff989e3a3ce8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acefc1227c02575cffd4dff989e3a3ce8">&#9670;&nbsp;</a></span>volume_id_probe_ntfs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a> volume_id_probe_ntfs </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d8d/ntfs_8c_source.html#l00093">93</a> of file <a class="el" href="../../d5/d8d/ntfs_8c_source.html">ntfs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;{</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="preprocessor">#define off ((uint64_t)0)</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="../../d6/d86/fdisk_8c.html#a1b18f4b960b1edf77fa6c4f9c668d1f9">sector_size</a>;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="keywordtype">unsigned</span> cluster_size;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <a class="code" href="../../dd/ddd/arithmetic__operations_8c.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a> mft_cluster;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <a class="code" href="../../dd/ddd/arithmetic__operations_8c.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a> mft_off;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="keywordtype">unsigned</span> mft_record_size;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="keywordtype">unsigned</span> attr_type;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="keywordtype">unsigned</span> attr_off;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="keywordtype">unsigned</span> attr_len;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="keywordtype">unsigned</span> val_off;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="keywordtype">unsigned</span> val_len;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d5/d8d/ntfs_8c.html#d3/d25/structmaster__file__table__record">master_file_table_record</a> *mftr;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d5/d8d/ntfs_8c.html#d6/d4c/structntfs__super__block">ntfs_super_block</a> *ns;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a3cb4a16b0e8d6af0af86d4fd6ba5fd9d">uint8_t</a> *<a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a3cb4a16b0e8d6af0af86d4fd6ba5fd9d">uint8_t</a> *<a class="code" href="../../db/dd4/sm__loop_8c.html#acb906433e1289aa1c251dc5057746a88">val</a>;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160; </div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;probing at offset 0x%llx&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>) <a class="code" href="../../d5/d8d/ntfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a>);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160; </div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    ns = <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#ad52c7b05017442dbe08091a85ef92710">volume_id_get_buffer</a>(<span class="keywordtype">id</span>, <a class="code" href="../../d5/d8d/ntfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a>, 0x200);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="keywordflow">if</span> (ns == <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160; </div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d82/convert_8h.html#ac376fcece8fcc2d0f8b1cf3de18b10df">memcmp</a>(ns-&gt;<a class="code" href="../../d5/d8d/ntfs_8c.html#a1af89c09ce393b79fb2017defd8ff329">oem_id</a>, <span class="stringliteral">&quot;NTFS&quot;</span>, 4) != 0)</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160; </div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#aaaf5289e506677e73ce13f40c67fb188">volume_id_set_uuid</a>(<span class="keywordtype">id</span>, ns-&gt;<a class="code" href="../../d5/d8d/ntfs_8c.html#a5ae58dda17962abcace3a0c06db2f149">volume_serial</a>, <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a72f809f0cc1f63120f83a9fe78f026f1a01551a287f0e60de3e4b01a07bddf694">UUID_NTFS</a>);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160; </div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <a class="code" href="../../d6/d86/fdisk_8c.html#a1b18f4b960b1edf77fa6c4f9c668d1f9">sector_size</a> = <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a65e9510f535c1ee2f826d447471289fa">le16_to_cpu</a>(ns-&gt;<a class="code" href="../../d5/d8d/ntfs_8c.html#a81eea6c277b957bf12dafefbe9078c6e">bytes_per_sector</a>);</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    cluster_size = ns-&gt;<a class="code" href="../../d5/d8d/ntfs_8c.html#a17ef7b6f59ff2ce4b439a755979bf516">sectors_per_cluster</a> * <a class="code" href="../../d6/d86/fdisk_8c.html#a1b18f4b960b1edf77fa6c4f9c668d1f9">sector_size</a>;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    mft_cluster = <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a0987d88a4fac98f0b1d6355ef7aa77e2">le64_to_cpu</a>(ns-&gt;<a class="code" href="../../d5/d8d/ntfs_8c.html#a03bb6cb037a960ee93361e40c4e56fc4">mft_cluster_location</a>);</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    mft_off = mft_cluster * cluster_size;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160; </div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keywordflow">if</span> (ns-&gt;<a class="code" href="../../d5/d8d/ntfs_8c.html#a094b009c638e2b76883628f31da76ddc">cluster_per_mft_record</a> &lt; 0)</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        <span class="comment">/* size = -log2(mft_record_size); normally 1024 Bytes */</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        mft_record_size = 1 &lt;&lt; -ns-&gt;<a class="code" href="../../d5/d8d/ntfs_8c.html#a094b009c638e2b76883628f31da76ddc">cluster_per_mft_record</a>;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        mft_record_size = ns-&gt;<a class="code" href="../../d5/d8d/ntfs_8c.html#a094b009c638e2b76883628f31da76ddc">cluster_per_mft_record</a> * cluster_size;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160; </div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;sectorsize  0x%x&quot;</span>, <a class="code" href="../../d6/d86/fdisk_8c.html#a1b18f4b960b1edf77fa6c4f9c668d1f9">sector_size</a>);</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;clustersize 0x%x&quot;</span>, cluster_size);</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;mftcluster  %llu&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>) mft_cluster);</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;mftoffset  0x%llx&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>) mft_off);</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;cluster per mft_record  %i&quot;</span>, ns-&gt;<a class="code" href="../../d5/d8d/ntfs_8c.html#a094b009c638e2b76883628f31da76ddc">cluster_per_mft_record</a>);</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;mft record size  %i&quot;</span>, mft_record_size);</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160; </div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a> = <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#ad52c7b05017442dbe08091a85ef92710">volume_id_get_buffer</a>(<span class="keywordtype">id</span>, <a class="code" href="../../d5/d8d/ntfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a> + mft_off + (<a class="code" href="../../d5/d8d/ntfs_8c.html#aac512b4da65b4a69327c2a6202466fcd">MFT_RECORD_VOLUME</a> * mft_record_size),</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;            mft_record_size);</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a> == <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="../../d9/dd9/gconf_8c.html#a880efc1795d900be549017ddf66a03e3">found</a>;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160; </div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    mftr = (<span class="keyword">struct </span><a class="code" href="../../d5/d8d/ntfs_8c.html#d3/d25/structmaster__file__table__record">master_file_table_record</a>*) <a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160; </div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;mftr-&gt;magic &#39;%c%c%c%c&#39;&quot;</span>, mftr-&gt;<a class="code" href="../../d5/d8d/ntfs_8c.html#ad1dc70ae53296b7e3e10fad7bf77f124">magic</a>[0], mftr-&gt;<a class="code" href="../../d5/d8d/ntfs_8c.html#ad1dc70ae53296b7e3e10fad7bf77f124">magic</a>[1], mftr-&gt;<a class="code" href="../../d5/d8d/ntfs_8c.html#ad1dc70ae53296b7e3e10fad7bf77f124">magic</a>[2], mftr-&gt;<a class="code" href="../../d5/d8d/ntfs_8c.html#ad1dc70ae53296b7e3e10fad7bf77f124">magic</a>[3]);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d82/convert_8h.html#ac376fcece8fcc2d0f8b1cf3de18b10df">memcmp</a>(mftr-&gt;<a class="code" href="../../d5/d8d/ntfs_8c.html#ad1dc70ae53296b7e3e10fad7bf77f124">magic</a>, <span class="stringliteral">&quot;FILE&quot;</span>, 4) != 0)</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="../../d9/dd9/gconf_8c.html#a880efc1795d900be549017ddf66a03e3">found</a>;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160; </div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    attr_off = <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a65e9510f535c1ee2f826d447471289fa">le16_to_cpu</a>(mftr-&gt;<a class="code" href="../../d5/d8d/ntfs_8c.html#a3b7437c48f9a4890483f86739ce62061">attrs_offset</a>);</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;file $Volume&#39;s attributes are at offset %i&quot;</span>, attr_off);</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160; </div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="keywordflow">while</span> (1) {</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <span class="keyword">struct </span><a class="code" href="../../d5/d8d/ntfs_8c.html#de/db0/structfile__attribute">file_attribute</a> *attr;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160; </div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        attr = (<span class="keyword">struct </span><a class="code" href="../../d5/d8d/ntfs_8c.html#de/db0/structfile__attribute">file_attribute</a>*) &amp;<a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>[attr_off];</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        attr_type = <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a48f527b00bc1d5e46366d720280a1039">le32_to_cpu</a>(attr-&gt;<a class="code" href="../../d5/d8d/ntfs_8c.html#a99ce76dc2e0e4f49d161eacc521fcd42">type</a>);</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        attr_len = <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a48f527b00bc1d5e46366d720280a1039">le32_to_cpu</a>(attr-&gt;<a class="code" href="../../d5/d8d/ntfs_8c.html#a9a0fe5882d3ea4cc1e1960beb3c268ad">len</a>);</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        val_off = <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a65e9510f535c1ee2f826d447471289fa">le16_to_cpu</a>(attr-&gt;<a class="code" href="../../d5/d8d/ntfs_8c.html#a70e7426de8429291a6a32e928dab87b1">value_offset</a>);</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        val_len = <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a48f527b00bc1d5e46366d720280a1039">le32_to_cpu</a>(attr-&gt;<a class="code" href="../../d5/d8d/ntfs_8c.html#a2a731c82e4f5340db92200113e8f6637">value_len</a>);</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        attr_off += attr_len;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160; </div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        <span class="keywordflow">if</span> (attr_len == 0)</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160; </div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        <span class="keywordflow">if</span> (attr_off &gt;= mft_record_size)</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160; </div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        <span class="keywordflow">if</span> (attr_type == <a class="code" href="../../d5/d8d/ntfs_8c.html#aaa3d377132b47a7eedcea8b2e8548349">MFT_RECORD_ATTR_END</a>)</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160; </div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;found attribute type 0x%x, len %i, at offset %i&quot;</span>,</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;            attr_type, attr_len, attr_off);</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160; </div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="comment">//      if (attr_type == MFT_RECORD_ATTR_VOLUME_INFO) {</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment">//          struct volume_info *info;</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="comment">//          dbg(&quot;found info, len %i&quot;, val_len);</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="comment">//          info = (struct volume_info*) (((uint8_t *) attr) + val_off);</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="comment">//          snprintf(id-&gt;type_version, sizeof(id-&gt;type_version)-1,</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="comment">//               &quot;%u.%u&quot;, info-&gt;major_ver, info-&gt;minor_ver);</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="comment">//      }</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160; </div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        <span class="keywordflow">if</span> (attr_type == <a class="code" href="../../d5/d8d/ntfs_8c.html#a8c98fcf74e8746dd65cc9e59e40d5ffb">MFT_RECORD_ATTR_VOLUME_NAME</a>) {</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;            <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;found label, len %i&quot;</span>, val_len);</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;            <span class="keywordflow">if</span> (val_len &gt; <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a70366446adc457ccbb282d3871e6ff77">VOLUME_ID_LABEL_SIZE</a>)</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                val_len = <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a70366446adc457ccbb282d3871e6ff77">VOLUME_ID_LABEL_SIZE</a>;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160; </div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;            <a class="code" href="../../db/dd4/sm__loop_8c.html#acb906433e1289aa1c251dc5057746a88">val</a> = ((<a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a3cb4a16b0e8d6af0af86d4fd6ba5fd9d">uint8_t</a> *) attr) + val_off;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment">//          volume_id_set_label_raw(id, val, val_len);</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;            <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#a647a5f7f037d4d3506b2811021805bda">volume_id_set_label_unicode16</a>(<span class="keywordtype">id</span>, <a class="code" href="../../db/dd4/sm__loop_8c.html#acb906433e1289aa1c251dc5057746a88">val</a>, <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#aceb52d5e58265d474290d1e17bcf1716a662ed4b51721a45f07d645d4ca099a61">LE</a>, val_len);</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        }</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    }</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160; </div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160; <a class="code" href="../../d9/dd9/gconf_8c.html#a880efc1795d900be549017ddf66a03e3">found</a>:</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment">//  volume_id_set_usage(id, VOLUME_ID_FILESYSTEM);</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    IF_FEATURE_BLKID_TYPE(id-&gt;type = <span class="stringliteral">&quot;ntfs&quot;</span>;)</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160; </div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <a class="code" href="../../d8/d64/glob__loop_8c.html#a5f3f8891e3f4c9d8d7effae7eb271604">return</a> 0;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;}</div>
<div class="ttc" id="afdisk_8c_html_a1b18f4b960b1edf77fa6c4f9c668d1f9"><div class="ttname"><a href="../../d6/d86/fdisk_8c.html#a1b18f4b960b1edf77fa6c4f9c668d1f9">sector_size</a></div><div class="ttdeci">#define sector_size</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d86/fdisk_8c_source.html#l00458">fdisk.c:458</a></div></div>
<div class="ttc" id="antfs_8c_html_a03bb6cb037a960ee93361e40c4e56fc4"><div class="ttname"><a href="../../d5/d8d/ntfs_8c.html#a03bb6cb037a960ee93361e40c4e56fc4">ntfs_super_block::mft_cluster_location</a></div><div class="ttdeci">uint64_t mft_cluster_location</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8d/ntfs_8c_source.html#l00046">ntfs.c:46</a></div></div>
<div class="ttc" id="antfs_8c_html_a094b009c638e2b76883628f31da76ddc"><div class="ttname"><a href="../../d5/d8d/ntfs_8c.html#a094b009c638e2b76883628f31da76ddc">ntfs_super_block::cluster_per_mft_record</a></div><div class="ttdeci">int8_t cluster_per_mft_record</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8d/ntfs_8c_source.html#l00048">ntfs.c:48</a></div></div>
<div class="ttc" id="antfs_8c_html_a17ef7b6f59ff2ce4b439a755979bf516"><div class="ttname"><a href="../../d5/d8d/ntfs_8c.html#a17ef7b6f59ff2ce4b439a755979bf516">ntfs_super_block::sectors_per_cluster</a></div><div class="ttdeci">uint8_t sectors_per_cluster</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8d/ntfs_8c_source.html#l00033">ntfs.c:33</a></div></div>
<div class="ttc" id="antfs_8c_html_a1af89c09ce393b79fb2017defd8ff329"><div class="ttname"><a href="../../d5/d8d/ntfs_8c.html#a1af89c09ce393b79fb2017defd8ff329">ntfs_super_block::oem_id</a></div><div class="ttdeci">uint8_t oem_id[8]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8d/ntfs_8c_source.html#l00031">ntfs.c:31</a></div></div>
<div class="ttc" id="antfs_8c_html_a2a731c82e4f5340db92200113e8f6637"><div class="ttname"><a href="../../d5/d8d/ntfs_8c.html#a2a731c82e4f5340db92200113e8f6637">file_attribute::value_len</a></div><div class="ttdeci">uint32_t value_len</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8d/ntfs_8c_source.html#l00077">ntfs.c:77</a></div></div>
<div class="ttc" id="antfs_8c_html_a3b7437c48f9a4890483f86739ce62061"><div class="ttname"><a href="../../d5/d8d/ntfs_8c.html#a3b7437c48f9a4890483f86739ce62061">master_file_table_record::attrs_offset</a></div><div class="ttdeci">uint16_t attrs_offset</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8d/ntfs_8c_source.html#l00063">ntfs.c:63</a></div></div>
<div class="ttc" id="antfs_8c_html_a5ae58dda17962abcace3a0c06db2f149"><div class="ttname"><a href="../../d5/d8d/ntfs_8c.html#a5ae58dda17962abcace3a0c06db2f149">ntfs_super_block::volume_serial</a></div><div class="ttdeci">uint8_t volume_serial[8]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8d/ntfs_8c_source.html#l00052">ntfs.c:52</a></div></div>
<div class="ttc" id="antfs_8c_html_a70e7426de8429291a6a32e928dab87b1"><div class="ttname"><a href="../../d5/d8d/ntfs_8c.html#a70e7426de8429291a6a32e928dab87b1">file_attribute::value_offset</a></div><div class="ttdeci">uint16_t value_offset</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8d/ntfs_8c_source.html#l00078">ntfs.c:78</a></div></div>
<div class="ttc" id="antfs_8c_html_a81eea6c277b957bf12dafefbe9078c6e"><div class="ttname"><a href="../../d5/d8d/ntfs_8c.html#a81eea6c277b957bf12dafefbe9078c6e">ntfs_super_block::bytes_per_sector</a></div><div class="ttdeci">uint16_t bytes_per_sector</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8d/ntfs_8c_source.html#l00032">ntfs.c:32</a></div></div>
<div class="ttc" id="antfs_8c_html_a8c98fcf74e8746dd65cc9e59e40d5ffb"><div class="ttname"><a href="../../d5/d8d/ntfs_8c.html#a8c98fcf74e8746dd65cc9e59e40d5ffb">MFT_RECORD_ATTR_VOLUME_NAME</a></div><div class="ttdeci">#define MFT_RECORD_ATTR_VOLUME_NAME</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8d/ntfs_8c_source.html#l00088">ntfs.c:88</a></div></div>
<div class="ttc" id="antfs_8c_html_a99ce76dc2e0e4f49d161eacc521fcd42"><div class="ttname"><a href="../../d5/d8d/ntfs_8c.html#a99ce76dc2e0e4f49d161eacc521fcd42">file_attribute::type</a></div><div class="ttdeci">uint32_t type</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8d/ntfs_8c_source.html#l00070">ntfs.c:70</a></div></div>
<div class="ttc" id="antfs_8c_html_a9a0fe5882d3ea4cc1e1960beb3c268ad"><div class="ttname"><a href="../../d5/d8d/ntfs_8c.html#a9a0fe5882d3ea4cc1e1960beb3c268ad">file_attribute::len</a></div><div class="ttdeci">uint32_t len</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8d/ntfs_8c_source.html#l00071">ntfs.c:71</a></div></div>
<div class="ttc" id="antfs_8c_html_aa8df4166084b06f1e80d3510e5dcf7e1"><div class="ttname"><a href="../../d5/d8d/ntfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a></div><div class="ttdeci">#define off</div></div>
<div class="ttc" id="antfs_8c_html_aaa3d377132b47a7eedcea8b2e8548349"><div class="ttname"><a href="../../d5/d8d/ntfs_8c.html#aaa3d377132b47a7eedcea8b2e8548349">MFT_RECORD_ATTR_END</a></div><div class="ttdeci">#define MFT_RECORD_ATTR_END</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8d/ntfs_8c_source.html#l00091">ntfs.c:91</a></div></div>
<div class="ttc" id="antfs_8c_html_aac512b4da65b4a69327c2a6202466fcd"><div class="ttname"><a href="../../d5/d8d/ntfs_8c.html#aac512b4da65b4a69327c2a6202466fcd">MFT_RECORD_VOLUME</a></div><div class="ttdeci">#define MFT_RECORD_VOLUME</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8d/ntfs_8c_source.html#l00087">ntfs.c:87</a></div></div>
<div class="ttc" id="antfs_8c_html_ad1dc70ae53296b7e3e10fad7bf77f124"><div class="ttname"><a href="../../d5/d8d/ntfs_8c.html#ad1dc70ae53296b7e3e10fad7bf77f124">master_file_table_record::magic</a></div><div class="ttdeci">uint8_t magic[4]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8d/ntfs_8c_source.html#l00057">ntfs.c:57</a></div></div>
<div class="ttc" id="antfs_8c_html_d3/d25/structmaster__file__table__record"><div class="ttname"><a href="../../d5/d8d/ntfs_8c.html#d3/d25/structmaster__file__table__record">master_file_table_record</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8d/ntfs_8c_source.html#l00056">ntfs.c:56</a></div></div>
<div class="ttc" id="antfs_8c_html_d6/d4c/structntfs__super__block"><div class="ttname"><a href="../../d5/d8d/ntfs_8c.html#d6/d4c/structntfs__super__block">ntfs_super_block</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8d/ntfs_8c_source.html#l00029">ntfs.c:29</a></div></div>
<div class="ttc" id="antfs_8c_html_de/db0/structfile__attribute"><div class="ttname"><a href="../../d5/d8d/ntfs_8c.html#de/db0/structfile__attribute">file_attribute</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8d/ntfs_8c_source.html#l00069">ntfs.c:69</a></div></div>
<div class="ttc" id="asm__loop_8c_html_acb906433e1289aa1c251dc5057746a88"><div class="ttname"><a href="../../db/dd4/sm__loop_8c.html#acb906433e1289aa1c251dc5057746a88">val</a></div><div class="ttdeci">INT val</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dd4/sm__loop_8c_source.html#l00387">sm_loop.c:385</a></div></div>
<div class="ttc" id="avolume__id__internal_8h_html_a0987d88a4fac98f0b1d6355ef7aa77e2"><div class="ttname"><a href="../../dd/dd1/volume__id__internal_8h.html#a0987d88a4fac98f0b1d6355ef7aa77e2">le64_to_cpu</a></div><div class="ttdeci">#define le64_to_cpu(x)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd1/volume__id__internal_8h_source.html#l00111">volume_id_internal.h:111</a></div></div>
<div class="ttc" id="avolume__id__internal_8h_html_a65e9510f535c1ee2f826d447471289fa"><div class="ttname"><a href="../../dd/dd1/volume__id__internal_8h.html#a65e9510f535c1ee2f826d447471289fa">le16_to_cpu</a></div><div class="ttdeci">#define le16_to_cpu(x)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd1/volume__id__internal_8h_source.html#l00109">volume_id_internal.h:109</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d5/d8d/ntfs_8c_source.html#l00063">master_file_table_record::attrs_offset</a>, <a class="el" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>, <a class="el" href="../../d5/d8d/ntfs_8c_source.html#l00032">ntfs_super_block::bytes_per_sector</a>, <a class="el" href="../../d5/d8d/ntfs_8c_source.html#l00048">ntfs_super_block::cluster_per_mft_record</a>, <a class="el" href="../../d7/d8f/decompress__bunzip2_8c_source.html#l00047">dbg</a>, <a class="el" href="../../d9/dd9/gconf_8c_source.html#l01348">found</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00131">LE</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00109">le16_to_cpu</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00110">le32_to_cpu</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00111">le64_to_cpu</a>, <a class="el" href="../../d5/d8d/ntfs_8c_source.html#l00071">file_attribute::len</a>, <a class="el" href="../../d5/d8d/ntfs_8c_source.html#l00057">master_file_table_record::magic</a>, <a class="el" href="../../d3/d68/convert_8cpp_source.html#l00030">memcmp()</a>, <a class="el" href="../../d5/d8d/ntfs_8c_source.html#l00046">ntfs_super_block::mft_cluster_location</a>, <a class="el" href="../../d5/d8d/ntfs_8c_source.html#l00091">MFT_RECORD_ATTR_END</a>, <a class="el" href="../../d5/d8d/ntfs_8c_source.html#l00088">MFT_RECORD_ATTR_VOLUME_NAME</a>, <a class="el" href="../../d5/d8d/ntfs_8c_source.html#l00087">MFT_RECORD_VOLUME</a>, <a class="el" href="../../d0/df4/Kernel_2include_2types_8h_source.html#l00037">NULL</a>, <a class="el" href="../../d5/d8d/ntfs_8c_source.html#l00031">ntfs_super_block::oem_id</a>, <a class="el" href="../../d5/d8d/ntfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a>, <a class="el" href="../../d6/d86/fdisk_8c_source.html#l00458">sector_size</a>, <a class="el" href="../../d5/d8d/ntfs_8c_source.html#l00033">ntfs_super_block::sectors_per_cluster</a>, <a class="el" href="../../d5/d8d/ntfs_8c_source.html#l00070">file_attribute::type</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00125">UUID_NTFS</a>, <a class="el" href="../../db/dd4/sm__loop_8c_source.html#l00385">val</a>, <a class="el" href="../../d5/d8d/ntfs_8c_source.html#l00077">file_attribute::value_len</a>, <a class="el" href="../../d5/d8d/ntfs_8c_source.html#l00078">file_attribute::value_offset</a>, <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00179">volume_id_get_buffer()</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00033">VOLUME_ID_LABEL_SIZE</a>, <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00130">volume_id_set_label_unicode16()</a>, <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00135">volume_id_set_uuid()</a>, and <a class="el" href="../../d5/d8d/ntfs_8c_source.html#l00052">ntfs_super_block::volume_serial</a>.</p>

</div>
</div>
<a id="aef3fb9195d1bd183b3c11ed1d1190312"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef3fb9195d1bd183b3c11ed1d1190312">&#9670;&nbsp;</a></span>volume_id_probe_ocfs2()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a> volume_id_probe_ocfs2 </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/d06/ocfs2_8c_source.html#l00089">89</a> of file <a class="el" href="../../db/d06/ocfs2_8c_source.html">ocfs2.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;{</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="preprocessor">#define off ((uint64_t)0)</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../db/d06/ocfs2_8c.html#dc/da0/structocfs2__super__block">ocfs2_super_block</a> *os;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160; </div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;probing at offset 0x%llx&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>) <a class="code" href="../../db/d06/ocfs2_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a>);</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; </div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    os = <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#ad52c7b05017442dbe08091a85ef92710">volume_id_get_buffer</a>(<span class="keywordtype">id</span>, <a class="code" href="../../db/d06/ocfs2_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a> + <a class="code" href="../../db/d06/ocfs2_8c.html#af47388b2db5d5b16bb51a9cd8909304d">OCFS2_SUPERBLOCK_OFFSET</a>, 0x200);</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="keywordflow">if</span> (os == <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160; </div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d82/convert_8h.html#ac376fcece8fcc2d0f8b1cf3de18b10df">memcmp</a>(os-&gt;<a class="code" href="../../db/d06/ocfs2_8c.html#ad6aa11d36ee810face7092156e64cced">i_signature</a>, <span class="stringliteral">&quot;OCFSV2&quot;</span>, 6) != 0) {</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    }</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160; </div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment">//  volume_id_set_usage(id, VOLUME_ID_FILESYSTEM);</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">//  volume_id_set_label_raw(id, os-&gt;s_label, OCFS2_MAX_VOL_LABEL_LEN &lt; VOLUME_ID_LABEL_SIZE ?</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">//                  OCFS2_MAX_VOL_LABEL_LEN : VOLUME_ID_LABEL_SIZE);</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#a3629b5eaf1943e2f4634bd5913959b04">volume_id_set_label_string</a>(<span class="keywordtype">id</span>, os-&gt;<a class="code" href="../../db/d06/ocfs2_8c.html#a606799707aad01a003315b48ce461f34">s_label</a>, <a class="code" href="../../db/d06/ocfs2_8c.html#ae99b373cb6992f44bc437c7ffd38e8aa">OCFS2_MAX_VOL_LABEL_LEN</a> &lt; <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a70366446adc457ccbb282d3871e6ff77">VOLUME_ID_LABEL_SIZE</a> ?</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                    <a class="code" href="../../db/d06/ocfs2_8c.html#ae99b373cb6992f44bc437c7ffd38e8aa">OCFS2_MAX_VOL_LABEL_LEN</a> : <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a70366446adc457ccbb282d3871e6ff77">VOLUME_ID_LABEL_SIZE</a>);</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#aaaf5289e506677e73ce13f40c67fb188">volume_id_set_uuid</a>(<span class="keywordtype">id</span>, os-&gt;<a class="code" href="../../db/d06/ocfs2_8c.html#a9b91ce00cd1fd6457eb04a7206e8ef70">s_uuid</a>, <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a72f809f0cc1f63120f83a9fe78f026f1a4bd0e1bee402481edbff5b037158c245">UUID_DCE</a>);</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    IF_FEATURE_BLKID_TYPE(id-&gt;type = <span class="stringliteral">&quot;ocfs2&quot;</span>;)</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <a class="code" href="../../d8/d64/glob__loop_8c.html#a5f3f8891e3f4c9d8d7effae7eb271604">return</a> 0;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;}</div>
<div class="ttc" id="aocfs2_8c_html_a606799707aad01a003315b48ce461f34"><div class="ttname"><a href="../../db/d06/ocfs2_8c.html#a606799707aad01a003315b48ce461f34">ocfs2_super_block::s_label</a></div><div class="ttdeci">uint8_t s_label[OCFS2_MAX_VOL_LABEL_LEN]</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d06/ocfs2_8c_source.html#l00085">ocfs2.c:85</a></div></div>
<div class="ttc" id="aocfs2_8c_html_a9b91ce00cd1fd6457eb04a7206e8ef70"><div class="ttname"><a href="../../db/d06/ocfs2_8c.html#a9b91ce00cd1fd6457eb04a7206e8ef70">ocfs2_super_block::s_uuid</a></div><div class="ttdeci">uint8_t s_uuid[OCFS2_VOL_UUID_LEN]</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d06/ocfs2_8c_source.html#l00086">ocfs2.c:86</a></div></div>
<div class="ttc" id="aocfs2_8c_html_aa8df4166084b06f1e80d3510e5dcf7e1"><div class="ttname"><a href="../../db/d06/ocfs2_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a></div><div class="ttdeci">#define off</div></div>
<div class="ttc" id="aocfs2_8c_html_ad6aa11d36ee810face7092156e64cced"><div class="ttname"><a href="../../db/d06/ocfs2_8c.html#ad6aa11d36ee810face7092156e64cced">ocfs2_super_block::i_signature</a></div><div class="ttdeci">uint8_t i_signature[8]</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d06/ocfs2_8c_source.html#l00040">ocfs2.c:40</a></div></div>
<div class="ttc" id="aocfs2_8c_html_ae99b373cb6992f44bc437c7ffd38e8aa"><div class="ttname"><a href="../../db/d06/ocfs2_8c.html#ae99b373cb6992f44bc437c7ffd38e8aa">OCFS2_MAX_VOL_LABEL_LEN</a></div><div class="ttdeci">#define OCFS2_MAX_VOL_LABEL_LEN</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d06/ocfs2_8c_source.html#l00031">ocfs2.c:31</a></div></div>
<div class="ttc" id="aocfs2_8c_html_af47388b2db5d5b16bb51a9cd8909304d"><div class="ttname"><a href="../../db/d06/ocfs2_8c.html#af47388b2db5d5b16bb51a9cd8909304d">OCFS2_SUPERBLOCK_OFFSET</a></div><div class="ttdeci">#define OCFS2_SUPERBLOCK_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d06/ocfs2_8c_source.html#l00032">ocfs2.c:32</a></div></div>
<div class="ttc" id="aocfs2_8c_html_dc/da0/structocfs2__super__block"><div class="ttname"><a href="../../db/d06/ocfs2_8c.html#dc/da0/structocfs2__super__block">ocfs2_super_block</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d06/ocfs2_8c_source.html#l00039">ocfs2.c:39</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/d8f/decompress__bunzip2_8c_source.html#l00047">dbg</a>, <a class="el" href="../../db/d06/ocfs2_8c_source.html#l00040">ocfs2_super_block::i_signature</a>, <a class="el" href="../../d3/d68/convert_8cpp_source.html#l00030">memcmp()</a>, <a class="el" href="../../d0/df4/Kernel_2include_2types_8h_source.html#l00037">NULL</a>, <a class="el" href="../../db/d06/ocfs2_8c_source.html#l00031">OCFS2_MAX_VOL_LABEL_LEN</a>, <a class="el" href="../../db/d06/ocfs2_8c_source.html#l00032">OCFS2_SUPERBLOCK_OFFSET</a>, <a class="el" href="../../db/d06/ocfs2_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a>, <a class="el" href="../../db/d06/ocfs2_8c_source.html#l00085">ocfs2_super_block::s_label</a>, <a class="el" href="../../db/d06/ocfs2_8c_source.html#l00086">ocfs2_super_block::s_uuid</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00126">UUID_DCE</a>, <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00179">volume_id_get_buffer()</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00033">VOLUME_ID_LABEL_SIZE</a>, <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00115">volume_id_set_label_string()</a>, and <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00135">volume_id_set_uuid()</a>.</p>

</div>
</div>
<a id="a5e9f5ff8ce439ae1d7d08dbea51f1724"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e9f5ff8ce439ae1d7d08dbea51f1724">&#9670;&nbsp;</a></span>volume_id_probe_reiserfs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a> volume_id_probe_reiserfs </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/dee/reiserfs_8c_source.html#l00057">57</a> of file <a class="el" href="../../de/dee/reiserfs_8c_source.html">reiserfs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;{</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">#define off ((uint64_t)0)</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../de/dee/reiserfs_8c.html#df/d50/structreiserfs__super__block">reiserfs_super_block</a> *rs;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../de/dee/reiserfs_8c.html#d0/d43/structreiser4__super__block">reiser4_super_block</a> *rs4;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160; </div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;reiserfs: probing at offset 0x%llx&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>) <a class="code" href="../../de/dee/reiserfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a>);</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160; </div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    rs = <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#ad52c7b05017442dbe08091a85ef92710">volume_id_get_buffer</a>(<span class="keywordtype">id</span>, <a class="code" href="../../de/dee/reiserfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a> + <a class="code" href="../../de/dee/reiserfs_8c.html#a9e3043573b0aaac432ed31fa063e240b">REISERFS_SUPERBLOCK_OFFSET</a>, 0x200);</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="keywordflow">if</span> (rs == <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160; </div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d82/convert_8h.html#ac376fcece8fcc2d0f8b1cf3de18b10df">memcmp</a>(rs-&gt;<a class="code" href="../../de/dee/reiserfs_8c.html#a5caa71f9b7c86a893fe50ad8c06b7035">magic</a>, <span class="stringliteral">&quot;ReIsErFs&quot;</span>, 8) == 0) {</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;reiserfs: ReIsErFs, no label&quot;</span>);</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">//      strcpy(id-&gt;type_version, &quot;3.5&quot;);</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="../../d9/dd9/gconf_8c.html#a880efc1795d900be549017ddf66a03e3">found</a>;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    }</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d82/convert_8h.html#ac376fcece8fcc2d0f8b1cf3de18b10df">memcmp</a>(rs-&gt;<a class="code" href="../../de/dee/reiserfs_8c.html#a5caa71f9b7c86a893fe50ad8c06b7035">magic</a>, <span class="stringliteral">&quot;ReIsEr2Fs&quot;</span>, 9) == 0) {</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;reiserfs: ReIsEr2Fs&quot;</span>);</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">//      strcpy(id-&gt;type_version, &quot;3.6&quot;);</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        <span class="keywordflow">goto</span> found_label;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    }</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d82/convert_8h.html#ac376fcece8fcc2d0f8b1cf3de18b10df">memcmp</a>(rs-&gt;<a class="code" href="../../de/dee/reiserfs_8c.html#a5caa71f9b7c86a893fe50ad8c06b7035">magic</a>, <span class="stringliteral">&quot;ReIsEr3Fs&quot;</span>, 9) == 0) {</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;reiserfs: ReIsEr3Fs&quot;</span>);</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">//      strcpy(id-&gt;type_version, &quot;JR&quot;);</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        <span class="keywordflow">goto</span> found_label;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    }</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160; </div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    rs4 = (<span class="keyword">struct </span><a class="code" href="../../de/dee/reiserfs_8c.html#d0/d43/structreiser4__super__block">reiser4_super_block</a> *) rs;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d82/convert_8h.html#ac376fcece8fcc2d0f8b1cf3de18b10df">memcmp</a>(rs4-&gt;<a class="code" href="../../de/dee/reiserfs_8c.html#a0b15d27d7c51442eb9bcb100f205c410">magic</a>, <span class="stringliteral">&quot;ReIsEr4&quot;</span>, 7) == 0) {</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment">//      strcpy(id-&gt;type_version, &quot;4&quot;);</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment">//      volume_id_set_label_raw(id, rs4-&gt;label, 16);</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#a3629b5eaf1943e2f4634bd5913959b04">volume_id_set_label_string</a>(<span class="keywordtype">id</span>, rs4-&gt;<a class="code" href="../../de/dee/reiserfs_8c.html#a72fe404d931107dcf6165c6fef7f1f06">label</a>, 16);</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#aaaf5289e506677e73ce13f40c67fb188">volume_id_set_uuid</a>(<span class="keywordtype">id</span>, rs4-&gt;<a class="code" href="../../de/dee/reiserfs_8c.html#a97b00f2a2c4b9e41e5e0b02aa3306f48">uuid</a>, <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a72f809f0cc1f63120f83a9fe78f026f1a4bd0e1bee402481edbff5b037158c245">UUID_DCE</a>);</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;reiserfs: ReIsEr4, label &#39;%s&#39; uuid &#39;%s&#39;&quot;</span>, id-&gt;<a class="code" href="../../dd/dd1/volume__id__internal_8h.html#aebf9c21fa3fc79b7e98aca176d1e1092">label</a>, id-&gt;<a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a562b7db1b283bafd3a2352cc8738c554">uuid</a>);</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="../../d9/dd9/gconf_8c.html#a880efc1795d900be549017ddf66a03e3">found</a>;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    }</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160; </div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    rs = <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#ad52c7b05017442dbe08091a85ef92710">volume_id_get_buffer</a>(<span class="keywordtype">id</span>, <a class="code" href="../../de/dee/reiserfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a> + <a class="code" href="../../de/dee/reiserfs_8c.html#aece058da96f3c74c52802bbed6d2c98a">REISERFS1_SUPERBLOCK_OFFSET</a>, 0x200);</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordflow">if</span> (rs == <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160; </div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d82/convert_8h.html#ac376fcece8fcc2d0f8b1cf3de18b10df">memcmp</a>(rs-&gt;<a class="code" href="../../de/dee/reiserfs_8c.html#a5caa71f9b7c86a893fe50ad8c06b7035">magic</a>, <span class="stringliteral">&quot;ReIsErFs&quot;</span>, 8) == 0) {</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;reiserfs: ReIsErFs, no label&quot;</span>);</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment">//      strcpy(id-&gt;type_version, &quot;3.5&quot;);</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="../../d9/dd9/gconf_8c.html#a880efc1795d900be549017ddf66a03e3">found</a>;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    }</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160; </div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;reiserfs: no signature found&quot;</span>);</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160; </div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160; found_label:</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment">//  volume_id_set_label_raw(id, rs-&gt;label, 16);</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#a3629b5eaf1943e2f4634bd5913959b04">volume_id_set_label_string</a>(<span class="keywordtype">id</span>, rs-&gt;<a class="code" href="../../de/dee/reiserfs_8c.html#aca6778e3f8dfd4c547d1a1811edf7a7a">label</a>, 16);</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#aaaf5289e506677e73ce13f40c67fb188">volume_id_set_uuid</a>(<span class="keywordtype">id</span>, rs-&gt;<a class="code" href="../../de/dee/reiserfs_8c.html#a609ff18ff54dbd8a64d6ce33086aeba7">uuid</a>, <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a72f809f0cc1f63120f83a9fe78f026f1a4bd0e1bee402481edbff5b037158c245">UUID_DCE</a>);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;reiserfs: label &#39;%s&#39; uuid &#39;%s&#39;&quot;</span>, id-&gt;<a class="code" href="../../dd/dd1/volume__id__internal_8h.html#aebf9c21fa3fc79b7e98aca176d1e1092">label</a>, id-&gt;<a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a562b7db1b283bafd3a2352cc8738c554">uuid</a>);</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160; </div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160; <a class="code" href="../../d9/dd9/gconf_8c.html#a880efc1795d900be549017ddf66a03e3">found</a>:</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment">//  volume_id_set_usage(id, VOLUME_ID_FILESYSTEM);</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    IF_FEATURE_BLKID_TYPE(id-&gt;type = <span class="stringliteral">&quot;reiserfs&quot;</span>;)</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160; </div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <a class="code" href="../../d8/d64/glob__loop_8c.html#a5f3f8891e3f4c9d8d7effae7eb271604">return</a> 0;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;}</div>
<div class="ttc" id="areiserfs_8c_html_a0b15d27d7c51442eb9bcb100f205c410"><div class="ttname"><a href="../../de/dee/reiserfs_8c.html#a0b15d27d7c51442eb9bcb100f205c410">reiser4_super_block::magic</a></div><div class="ttdeci">uint8_t magic[16]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dee/reiserfs_8c_source.html#l00047">reiserfs.c:47</a></div></div>
<div class="ttc" id="areiserfs_8c_html_a5caa71f9b7c86a893fe50ad8c06b7035"><div class="ttname"><a href="../../de/dee/reiserfs_8c.html#a5caa71f9b7c86a893fe50ad8c06b7035">reiserfs_super_block::magic</a></div><div class="ttdeci">uint8_t magic[12]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dee/reiserfs_8c_source.html#l00040">reiserfs.c:40</a></div></div>
<div class="ttc" id="areiserfs_8c_html_a609ff18ff54dbd8a64d6ce33086aeba7"><div class="ttname"><a href="../../de/dee/reiserfs_8c.html#a609ff18ff54dbd8a64d6ce33086aeba7">reiserfs_super_block::uuid</a></div><div class="ttdeci">uint8_t uuid[16]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dee/reiserfs_8c_source.html#l00042">reiserfs.c:42</a></div></div>
<div class="ttc" id="areiserfs_8c_html_a72fe404d931107dcf6165c6fef7f1f06"><div class="ttname"><a href="../../de/dee/reiserfs_8c.html#a72fe404d931107dcf6165c6fef7f1f06">reiser4_super_block::label</a></div><div class="ttdeci">uint8_t label[16]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dee/reiserfs_8c_source.html#l00050">reiserfs.c:50</a></div></div>
<div class="ttc" id="areiserfs_8c_html_a97b00f2a2c4b9e41e5e0b02aa3306f48"><div class="ttname"><a href="../../de/dee/reiserfs_8c.html#a97b00f2a2c4b9e41e5e0b02aa3306f48">reiser4_super_block::uuid</a></div><div class="ttdeci">uint8_t uuid[16]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dee/reiserfs_8c_source.html#l00049">reiserfs.c:49</a></div></div>
<div class="ttc" id="areiserfs_8c_html_a9e3043573b0aaac432ed31fa063e240b"><div class="ttname"><a href="../../de/dee/reiserfs_8c.html#a9e3043573b0aaac432ed31fa063e240b">REISERFS_SUPERBLOCK_OFFSET</a></div><div class="ttdeci">#define REISERFS_SUPERBLOCK_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dee/reiserfs_8c_source.html#l00055">reiserfs.c:55</a></div></div>
<div class="ttc" id="areiserfs_8c_html_aa8df4166084b06f1e80d3510e5dcf7e1"><div class="ttname"><a href="../../de/dee/reiserfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a></div><div class="ttdeci">#define off</div></div>
<div class="ttc" id="areiserfs_8c_html_aca6778e3f8dfd4c547d1a1811edf7a7a"><div class="ttname"><a href="../../de/dee/reiserfs_8c.html#aca6778e3f8dfd4c547d1a1811edf7a7a">reiserfs_super_block::label</a></div><div class="ttdeci">uint8_t label[16]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dee/reiserfs_8c_source.html#l00043">reiserfs.c:43</a></div></div>
<div class="ttc" id="areiserfs_8c_html_aece058da96f3c74c52802bbed6d2c98a"><div class="ttname"><a href="../../de/dee/reiserfs_8c.html#aece058da96f3c74c52802bbed6d2c98a">REISERFS1_SUPERBLOCK_OFFSET</a></div><div class="ttdeci">#define REISERFS1_SUPERBLOCK_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dee/reiserfs_8c_source.html#l00054">reiserfs.c:54</a></div></div>
<div class="ttc" id="areiserfs_8c_html_d0/d43/structreiser4__super__block"><div class="ttname"><a href="../../de/dee/reiserfs_8c.html#d0/d43/structreiser4__super__block">reiser4_super_block</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dee/reiserfs_8c_source.html#l00046">reiserfs.c:46</a></div></div>
<div class="ttc" id="areiserfs_8c_html_df/d50/structreiserfs__super__block"><div class="ttname"><a href="../../de/dee/reiserfs_8c.html#df/d50/structreiserfs__super__block">reiserfs_super_block</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d77/mkfs__reiser_8c_source.html#l00049">mkfs_reiser.c:49</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/d8f/decompress__bunzip2_8c_source.html#l00047">dbg</a>, <a class="el" href="../../d9/dd9/gconf_8c_source.html#l01348">found</a>, <a class="el" href="../../de/dee/reiserfs_8c_source.html#l00043">reiserfs_super_block::label</a>, <a class="el" href="../../de/dee/reiserfs_8c_source.html#l00050">reiser4_super_block::label</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00078">volume_id::label</a>, <a class="el" href="../../de/dee/reiserfs_8c_source.html#l00040">reiserfs_super_block::magic</a>, <a class="el" href="../../de/dee/reiserfs_8c_source.html#l00047">reiser4_super_block::magic</a>, <a class="el" href="../../d3/d68/convert_8cpp_source.html#l00030">memcmp()</a>, <a class="el" href="../../d0/df4/Kernel_2include_2types_8h_source.html#l00037">NULL</a>, <a class="el" href="../../de/dee/reiserfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a>, <a class="el" href="../../de/dee/reiserfs_8c_source.html#l00054">REISERFS1_SUPERBLOCK_OFFSET</a>, <a class="el" href="../../de/dee/reiserfs_8c_source.html#l00055">REISERFS_SUPERBLOCK_OFFSET</a>, <a class="el" href="../../de/dee/reiserfs_8c_source.html#l00042">reiserfs_super_block::uuid</a>, <a class="el" href="../../de/dee/reiserfs_8c_source.html#l00049">reiser4_super_block::uuid</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00082">volume_id::uuid</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00126">UUID_DCE</a>, <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00179">volume_id_get_buffer()</a>, <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00115">volume_id_set_label_string()</a>, and <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00135">volume_id_set_uuid()</a>.</p>

</div>
</div>
<a id="a8dcb1e14dff59726239bbbe945e01605"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8dcb1e14dff59726239bbbe945e01605">&#9670;&nbsp;</a></span>volume_id_probe_romfs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a> volume_id_probe_romfs </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/d70/romfs_8c_source.html#l00036">36</a> of file <a class="el" href="../../d6/d70/romfs_8c_source.html">romfs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;{</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#define off ((uint64_t)0)</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d6/d70/romfs_8c.html#d6/d3a/structromfs__super">romfs_super</a> *rfs;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160; </div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;probing at offset 0x%llx&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>) <a class="code" href="../../d6/d70/romfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a>);</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160; </div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    rfs = <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#ad52c7b05017442dbe08091a85ef92710">volume_id_get_buffer</a>(<span class="keywordtype">id</span>, <a class="code" href="../../d6/d70/romfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a>, 0x200);</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <span class="keywordflow">if</span> (rfs == <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160; </div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d82/convert_8h.html#ac376fcece8fcc2d0f8b1cf3de18b10df">memcmp</a>(rfs-&gt;<a class="code" href="../../d6/d70/romfs_8c.html#ad40e64c0021f3b6935e81e39d7437b89">magic</a>, <span class="stringliteral">&quot;-rom1fs-&quot;</span>, 4) == 0) {</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;        <span class="keywordtype">size_t</span> <a class="code" href="../../d1/dc0/multiboot_8h.html#a6de3a6d27a7e07942958b912d39792e6">len</a> = <a class="code" href="../../d3/d5a/base_8h.html#a57cca470e9dd0a2807b6b1ff3ceda9bb">strlen</a>((<span class="keywordtype">char</span> *)rfs-&gt;<a class="code" href="../../d6/d70/romfs_8c.html#a2d36d81ccb56514c3f748cfe319ce0fc">name</a>);</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160; </div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d1/dc0/multiboot_8h.html#a6de3a6d27a7e07942958b912d39792e6">len</a>) {</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">//          volume_id_set_label_raw(id, rfs-&gt;name, len);</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;            <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#a3629b5eaf1943e2f4634bd5913959b04">volume_id_set_label_string</a>(<span class="keywordtype">id</span>, rfs-&gt;<a class="code" href="../../d6/d70/romfs_8c.html#a2d36d81ccb56514c3f748cfe319ce0fc">name</a>, <a class="code" href="../../d1/dc0/multiboot_8h.html#a6de3a6d27a7e07942958b912d39792e6">len</a>);</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;        }</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160; </div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment">//      volume_id_set_usage(id, VOLUME_ID_FILESYSTEM);</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        IF_FEATURE_BLKID_TYPE(id-&gt;type = <span class="stringliteral">&quot;romfs&quot;</span>;)</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        <a class="code" href="../../d8/d64/glob__loop_8c.html#a5f3f8891e3f4c9d8d7effae7eb271604">return</a> 0;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    }</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160; </div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <a class="code" href="../../d8/d64/glob__loop_8c.html#a5f3f8891e3f4c9d8d7effae7eb271604">return</a> -1;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;}</div>
<div class="ttc" id="abase_8h_html_a57cca470e9dd0a2807b6b1ff3ceda9bb"><div class="ttname"><a href="../../d3/d5a/base_8h.html#a57cca470e9dd0a2807b6b1ff3ceda9bb">strlen</a></div><div class="ttdeci">#define strlen(str)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5a/base_8h_source.html#l00275">base.h:275</a></div></div>
<div class="ttc" id="aromfs_8c_html_a2d36d81ccb56514c3f748cfe319ce0fc"><div class="ttname"><a href="../../d6/d70/romfs_8c.html#a2d36d81ccb56514c3f748cfe319ce0fc">romfs_super::name</a></div><div class="ttdeci">uint8_t name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d70/romfs_8c_source.html#l00033">romfs.c:33</a></div></div>
<div class="ttc" id="aromfs_8c_html_aa8df4166084b06f1e80d3510e5dcf7e1"><div class="ttname"><a href="../../d6/d70/romfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a></div><div class="ttdeci">#define off</div></div>
<div class="ttc" id="aromfs_8c_html_ad40e64c0021f3b6935e81e39d7437b89"><div class="ttname"><a href="../../d6/d70/romfs_8c.html#ad40e64c0021f3b6935e81e39d7437b89">romfs_super::magic</a></div><div class="ttdeci">uint8_t magic[8]</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d70/romfs_8c_source.html#l00030">romfs.c:30</a></div></div>
<div class="ttc" id="aromfs_8c_html_d6/d3a/structromfs__super"><div class="ttname"><a href="../../d6/d70/romfs_8c.html#d6/d3a/structromfs__super">romfs_super</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d70/romfs_8c_source.html#l00029">romfs.c:29</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/d8f/decompress__bunzip2_8c_source.html#l00047">dbg</a>, <a class="el" href="../../d1/dc0/multiboot_8h_source.html#l00002">len</a>, <a class="el" href="../../d6/d70/romfs_8c_source.html#l00030">romfs_super::magic</a>, <a class="el" href="../../d3/d68/convert_8cpp_source.html#l00030">memcmp()</a>, <a class="el" href="../../d6/d70/romfs_8c_source.html#l00033">romfs_super::name</a>, <a class="el" href="../../d0/df4/Kernel_2include_2types_8h_source.html#l00037">NULL</a>, <a class="el" href="../../d6/d70/romfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a>, <a class="el" href="../../d3/d5a/base_8h_source.html#l00275">strlen</a>, <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00179">volume_id_get_buffer()</a>, and <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00115">volume_id_set_label_string()</a>.</p>

</div>
</div>
<a id="a4667ec25c2790cdb3802d0043b68db81"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4667ec25c2790cdb3802d0043b68db81">&#9670;&nbsp;</a></span>volume_id_probe_squashfs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a> volume_id_probe_squashfs </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/dcc/squashfs_8c_source.html#l00031">31</a> of file <a class="el" href="../../d8/dcc/squashfs_8c_source.html">squashfs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;{</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#define off ((uint64_t)0)</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d8/dcc/squashfs_8c.html#dd/d82/structsquashfs__superblock">squashfs_superblock</a> *sb;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160; </div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;SquashFS: probing at offset 0x%llx&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>) <a class="code" href="../../d8/dcc/squashfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a>);</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    sb = <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#ad52c7b05017442dbe08091a85ef92710">volume_id_get_buffer</a>(<span class="keywordtype">id</span>, <a class="code" href="../../d8/dcc/squashfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a>, 0x200);</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <span class="keywordflow">if</span> (!sb)</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160; </div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <span class="comment">// Old SquashFS (pre 4.0) can be both big and little endian, so test for both.</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <span class="comment">// Likewise, it is commonly used in firwmare with some non-standard signatures.</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#define pack(a,b,c,d) ( (uint32_t)((a * 256 + b) * 256 + c) * 256 + d )</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#define SIG1 pack(&#39;s&#39;,&#39;q&#39;,&#39;s&#39;,&#39;h&#39;)</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#define SIG2 pack(&#39;h&#39;,&#39;s&#39;,&#39;q&#39;,&#39;s&#39;)</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#define SIG3 pack(&#39;s&#39;,&#39;h&#39;,&#39;s&#39;,&#39;q&#39;)</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#define SIG4 pack(&#39;q&#39;,&#39;s&#39;,&#39;h&#39;,&#39;s&#39;)</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <span class="keywordflow">if</span> (sb-&gt;<a class="code" href="../../d8/dcc/squashfs_8c.html#ae09e2eb4965148685c4186fb1e0969d3">magic</a> == <a class="code" href="../../d8/dcc/squashfs_8c.html#a640c41bbce4f6f39a5c742cc7cddb388">SIG1</a></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;     || sb-&gt;<a class="code" href="../../d8/dcc/squashfs_8c.html#ae09e2eb4965148685c4186fb1e0969d3">magic</a> == <a class="code" href="../../d8/dcc/squashfs_8c.html#a4cadd7361b00c9c845bea869b801df51">SIG2</a></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;     || sb-&gt;<a class="code" href="../../d8/dcc/squashfs_8c.html#ae09e2eb4965148685c4186fb1e0969d3">magic</a> == <a class="code" href="../../d8/dcc/squashfs_8c.html#a3b556606fc915feec31cc0675e9266d7">SIG3</a></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;     || sb-&gt;<a class="code" href="../../d8/dcc/squashfs_8c.html#ae09e2eb4965148685c4186fb1e0969d3">magic</a> == <a class="code" href="../../d8/dcc/squashfs_8c.html#a71a04a4f19c51880a82e1fbbd3a5e0b2">SIG4</a></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    ) {</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;        IF_FEATURE_BLKID_TYPE(id-&gt;type = <span class="stringliteral">&quot;squashfs&quot;</span>;)</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        <a class="code" href="../../d8/d64/glob__loop_8c.html#a5f3f8891e3f4c9d8d7effae7eb271604">return</a> 0;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    }</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160; </div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <a class="code" href="../../d8/d64/glob__loop_8c.html#a5f3f8891e3f4c9d8d7effae7eb271604">return</a> -1;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;}</div>
<div class="ttc" id="asquashfs_8c_html_a3b556606fc915feec31cc0675e9266d7"><div class="ttname"><a href="../../d8/dcc/squashfs_8c.html#a3b556606fc915feec31cc0675e9266d7">SIG3</a></div><div class="ttdeci">#define SIG3</div></div>
<div class="ttc" id="asquashfs_8c_html_a4cadd7361b00c9c845bea869b801df51"><div class="ttname"><a href="../../d8/dcc/squashfs_8c.html#a4cadd7361b00c9c845bea869b801df51">SIG2</a></div><div class="ttdeci">#define SIG2</div></div>
<div class="ttc" id="asquashfs_8c_html_a640c41bbce4f6f39a5c742cc7cddb388"><div class="ttname"><a href="../../d8/dcc/squashfs_8c.html#a640c41bbce4f6f39a5c742cc7cddb388">SIG1</a></div><div class="ttdeci">#define SIG1</div></div>
<div class="ttc" id="asquashfs_8c_html_a71a04a4f19c51880a82e1fbbd3a5e0b2"><div class="ttname"><a href="../../d8/dcc/squashfs_8c.html#a71a04a4f19c51880a82e1fbbd3a5e0b2">SIG4</a></div><div class="ttdeci">#define SIG4</div></div>
<div class="ttc" id="asquashfs_8c_html_aa8df4166084b06f1e80d3510e5dcf7e1"><div class="ttname"><a href="../../d8/dcc/squashfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a></div><div class="ttdeci">#define off</div></div>
<div class="ttc" id="asquashfs_8c_html_ae09e2eb4965148685c4186fb1e0969d3"><div class="ttname"><a href="../../d8/dcc/squashfs_8c.html#ae09e2eb4965148685c4186fb1e0969d3">squashfs_superblock::magic</a></div><div class="ttdeci">uint32_t magic</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dcc/squashfs_8c_source.html#l00023">squashfs.c:23</a></div></div>
<div class="ttc" id="asquashfs_8c_html_dd/d82/structsquashfs__superblock"><div class="ttname"><a href="../../d8/dcc/squashfs_8c.html#dd/d82/structsquashfs__superblock">squashfs_superblock</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dcc/squashfs_8c_source.html#l00022">squashfs.c:22</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/d8f/decompress__bunzip2_8c_source.html#l00047">dbg</a>, <a class="el" href="../../d8/dcc/squashfs_8c_source.html#l00023">squashfs_superblock::magic</a>, <a class="el" href="../../d8/dcc/squashfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a>, <a class="el" href="../../d8/dcc/squashfs_8c.html#a640c41bbce4f6f39a5c742cc7cddb388">SIG1</a>, <a class="el" href="../../d8/dcc/squashfs_8c.html#a4cadd7361b00c9c845bea869b801df51">SIG2</a>, <a class="el" href="../../d8/dcc/squashfs_8c.html#a3b556606fc915feec31cc0675e9266d7">SIG3</a>, <a class="el" href="../../d8/dcc/squashfs_8c.html#a71a04a4f19c51880a82e1fbbd3a5e0b2">SIG4</a>, and <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00179">volume_id_get_buffer()</a>.</p>

</div>
</div>
<a id="a885d8c74857ed2f0b4e7e9fdb4527e55"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a885d8c74857ed2f0b4e7e9fdb4527e55">&#9670;&nbsp;</a></span>volume_id_probe_sysv()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a> volume_id_probe_sysv </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d2d/sysv_8c_source.html#l00091">91</a> of file <a class="el" href="../../dc/d2d/sysv_8c_source.html">sysv.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;{</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="preprocessor">#define off ((uint64_t)0)</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../dc/d2d/sysv_8c.html#d2/dbb/structsysv__super">sysv_super</a> *vs;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../dc/d2d/sysv_8c.html#da/db0/structxenix__super">xenix_super</a> *xs;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordtype">unsigned</span> boff;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160; </div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;probing at offset 0x%llx&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>) <a class="code" href="../../dc/d2d/sysv_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a>);</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160; </div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="keywordflow">for</span> (boff = 0x200; boff &lt;= <a class="code" href="../../dc/d2d/sysv_8c.html#ad1ecc0b81e5978a206ae983793cb6f34">SYSV_MAX_BLOCKSIZE</a>; boff &lt;&lt;= 1) {</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        vs = <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#ad52c7b05017442dbe08091a85ef92710">volume_id_get_buffer</a>(<span class="keywordtype">id</span>, <a class="code" href="../../dc/d2d/sysv_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a> + (boff * <a class="code" href="../../dc/d2d/sysv_8c.html#a536e1cd79c5139ae1b1ce9b843ff7b1c">SYSV_SUPERBLOCK_BLOCK</a>), 0x200);</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        <span class="keywordflow">if</span> (vs == <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;            <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160; </div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        <span class="keywordflow">if</span> (vs-&gt;<a class="code" href="../../dc/d2d/sysv_8c.html#a2b2d9839d8687e2aac5f7cc076be2f7f">s_magic</a> == <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a1d5ae0c36d519a1b0a789db69a598f28">cpu_to_le32</a>(<a class="code" href="../../dc/d2d/sysv_8c.html#a409b206826dc35805124622326425952">SYSV_MAGIC</a>) || vs-&gt;<a class="code" href="../../dc/d2d/sysv_8c.html#a2b2d9839d8687e2aac5f7cc076be2f7f">s_magic</a> == <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#afd3274bb70aea7cf9be403940e001cc7">cpu_to_be32</a>(<a class="code" href="../../dc/d2d/sysv_8c.html#a409b206826dc35805124622326425952">SYSV_MAGIC</a>)) {</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">//          volume_id_set_label_raw(id, vs-&gt;s_fname, 6);</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;            <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#a3629b5eaf1943e2f4634bd5913959b04">volume_id_set_label_string</a>(<span class="keywordtype">id</span>, vs-&gt;<a class="code" href="../../dc/d2d/sysv_8c.html#a8043556f637c6a43fd4862eafab0a946">s_fname</a>, 6);</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;            IF_FEATURE_BLKID_TYPE(id-&gt;type = <span class="stringliteral">&quot;sysv&quot;</span>);</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="../../d9/dd9/gconf_8c.html#a880efc1795d900be549017ddf66a03e3">found</a>;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        }</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    }</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160; </div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="keywordflow">for</span> (boff = 0x200; boff &lt;= <a class="code" href="../../dc/d2d/sysv_8c.html#ad1ecc0b81e5978a206ae983793cb6f34">SYSV_MAX_BLOCKSIZE</a>; boff &lt;&lt;= 1) {</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        xs = <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#ad52c7b05017442dbe08091a85ef92710">volume_id_get_buffer</a>(<span class="keywordtype">id</span>, <a class="code" href="../../dc/d2d/sysv_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a> + (boff + <a class="code" href="../../dc/d2d/sysv_8c.html#ab2ab26e281dab5f15ee37c4699cf5c1f">XENIX_SUPERBLOCK_BLOCK</a>), 0x200);</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        <span class="keywordflow">if</span> (xs == <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;            <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160; </div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        <span class="keywordflow">if</span> (xs-&gt;<a class="code" href="../../dc/d2d/sysv_8c.html#a282bd82678d42900923c958e7dfff639">s_magic</a> == <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a1d5ae0c36d519a1b0a789db69a598f28">cpu_to_le32</a>(<a class="code" href="../../dc/d2d/sysv_8c.html#af879aed1aa688ef74856266fbb2cae09">XENIX_MAGIC</a>) || xs-&gt;<a class="code" href="../../dc/d2d/sysv_8c.html#a282bd82678d42900923c958e7dfff639">s_magic</a> == <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#afd3274bb70aea7cf9be403940e001cc7">cpu_to_be32</a>(<a class="code" href="../../dc/d2d/sysv_8c.html#af879aed1aa688ef74856266fbb2cae09">XENIX_MAGIC</a>)) {</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment">//          volume_id_set_label_raw(id, xs-&gt;s_fname, 6);</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;            <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#a3629b5eaf1943e2f4634bd5913959b04">volume_id_set_label_string</a>(<span class="keywordtype">id</span>, xs-&gt;<a class="code" href="../../dc/d2d/sysv_8c.html#aca3d833e4edc72c02331db97650b0231">s_fname</a>, 6);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;            IF_FEATURE_BLKID_TYPE(id-&gt;type = <span class="stringliteral">&quot;xenix&quot;</span>;)</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;            goto <a class="code" href="../../d9/dd9/gconf_8c.html#a880efc1795d900be549017ddf66a03e3">found</a>;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        }</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    }</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160; </div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <a class="code" href="../../d8/d64/glob__loop_8c.html#a5f3f8891e3f4c9d8d7effae7eb271604">return</a> -1;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160; </div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160; <a class="code" href="../../d9/dd9/gconf_8c.html#a880efc1795d900be549017ddf66a03e3">found</a>:</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment">//  volume_id_set_usage(id, VOLUME_ID_FILESYSTEM);</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <a class="code" href="../../d8/d64/glob__loop_8c.html#a5f3f8891e3f4c9d8d7effae7eb271604">return</a> 0;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;}</div>
<div class="ttc" id="asysv_8c_html_a282bd82678d42900923c958e7dfff639"><div class="ttname"><a href="../../dc/d2d/sysv_8c.html#a282bd82678d42900923c958e7dfff639">xenix_super::s_magic</a></div><div class="ttdeci">uint32_t s_magic</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2d/sysv_8c_source.html#l00081">sysv.c:81</a></div></div>
<div class="ttc" id="asysv_8c_html_a2b2d9839d8687e2aac5f7cc076be2f7f"><div class="ttname"><a href="../../dc/d2d/sysv_8c.html#a2b2d9839d8687e2aac5f7cc076be2f7f">sysv_super::s_magic</a></div><div class="ttdeci">uint32_t s_magic</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2d/sysv_8c_source.html#l00055">sysv.c:55</a></div></div>
<div class="ttc" id="asysv_8c_html_a409b206826dc35805124622326425952"><div class="ttname"><a href="../../dc/d2d/sysv_8c.html#a409b206826dc35805124622326425952">SYSV_MAGIC</a></div><div class="ttdeci">#define SYSV_MAGIC</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2d/sysv_8c_source.html#l00086">sysv.c:86</a></div></div>
<div class="ttc" id="asysv_8c_html_a536e1cd79c5139ae1b1ce9b843ff7b1c"><div class="ttname"><a href="../../dc/d2d/sysv_8c.html#a536e1cd79c5139ae1b1ce9b843ff7b1c">SYSV_SUPERBLOCK_BLOCK</a></div><div class="ttdeci">#define SYSV_SUPERBLOCK_BLOCK</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2d/sysv_8c_source.html#l00085">sysv.c:85</a></div></div>
<div class="ttc" id="asysv_8c_html_a8043556f637c6a43fd4862eafab0a946"><div class="ttname"><a href="../../dc/d2d/sysv_8c.html#a8043556f637c6a43fd4862eafab0a946">sysv_super::s_fname</a></div><div class="ttdeci">uint8_t s_fname[6]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2d/sysv_8c_source.html#l00051">sysv.c:51</a></div></div>
<div class="ttc" id="asysv_8c_html_aa8df4166084b06f1e80d3510e5dcf7e1"><div class="ttname"><a href="../../dc/d2d/sysv_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a></div><div class="ttdeci">#define off</div></div>
<div class="ttc" id="asysv_8c_html_ab2ab26e281dab5f15ee37c4699cf5c1f"><div class="ttname"><a href="../../dc/d2d/sysv_8c.html#ab2ab26e281dab5f15ee37c4699cf5c1f">XENIX_SUPERBLOCK_BLOCK</a></div><div class="ttdeci">#define XENIX_SUPERBLOCK_BLOCK</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2d/sysv_8c_source.html#l00087">sysv.c:87</a></div></div>
<div class="ttc" id="asysv_8c_html_aca3d833e4edc72c02331db97650b0231"><div class="ttname"><a href="../../dc/d2d/sysv_8c.html#aca3d833e4edc72c02331db97650b0231">xenix_super::s_fname</a></div><div class="ttdeci">uint8_t s_fname[6]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2d/sysv_8c_source.html#l00077">sysv.c:77</a></div></div>
<div class="ttc" id="asysv_8c_html_ad1ecc0b81e5978a206ae983793cb6f34"><div class="ttname"><a href="../../dc/d2d/sysv_8c.html#ad1ecc0b81e5978a206ae983793cb6f34">SYSV_MAX_BLOCKSIZE</a></div><div class="ttdeci">#define SYSV_MAX_BLOCKSIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2d/sysv_8c_source.html#l00089">sysv.c:89</a></div></div>
<div class="ttc" id="asysv_8c_html_af879aed1aa688ef74856266fbb2cae09"><div class="ttname"><a href="../../dc/d2d/sysv_8c.html#af879aed1aa688ef74856266fbb2cae09">XENIX_MAGIC</a></div><div class="ttdeci">#define XENIX_MAGIC</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2d/sysv_8c_source.html#l00088">sysv.c:88</a></div></div>
<div class="ttc" id="asysv_8c_html_d2/dbb/structsysv__super"><div class="ttname"><a href="../../dc/d2d/sysv_8c.html#d2/dbb/structsysv__super">sysv_super</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2d/sysv_8c_source.html#l00032">sysv.c:32</a></div></div>
<div class="ttc" id="asysv_8c_html_da/db0/structxenix__super"><div class="ttname"><a href="../../dc/d2d/sysv_8c.html#da/db0/structxenix__super">xenix_super</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2d/sysv_8c_source.html#l00062">sysv.c:62</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00116">cpu_to_be32</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00115">cpu_to_le32</a>, <a class="el" href="../../d7/d8f/decompress__bunzip2_8c_source.html#l00047">dbg</a>, <a class="el" href="../../d9/dd9/gconf_8c_source.html#l01348">found</a>, <a class="el" href="../../d0/df4/Kernel_2include_2types_8h_source.html#l00037">NULL</a>, <a class="el" href="../../dc/d2d/sysv_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a>, <a class="el" href="../../dc/d2d/sysv_8c_source.html#l00051">sysv_super::s_fname</a>, <a class="el" href="../../dc/d2d/sysv_8c_source.html#l00077">xenix_super::s_fname</a>, <a class="el" href="../../dc/d2d/sysv_8c_source.html#l00055">sysv_super::s_magic</a>, <a class="el" href="../../dc/d2d/sysv_8c_source.html#l00081">xenix_super::s_magic</a>, <a class="el" href="../../dc/d2d/sysv_8c_source.html#l00086">SYSV_MAGIC</a>, <a class="el" href="../../dc/d2d/sysv_8c_source.html#l00089">SYSV_MAX_BLOCKSIZE</a>, <a class="el" href="../../dc/d2d/sysv_8c_source.html#l00085">SYSV_SUPERBLOCK_BLOCK</a>, <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00179">volume_id_get_buffer()</a>, <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00115">volume_id_set_label_string()</a>, <a class="el" href="../../dc/d2d/sysv_8c_source.html#l00088">XENIX_MAGIC</a>, and <a class="el" href="../../dc/d2d/sysv_8c_source.html#l00087">XENIX_SUPERBLOCK_BLOCK</a>.</p>

</div>
</div>
<a id="a627d7a2740f23c481aa28b378daaeb38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a627d7a2740f23c481aa28b378daaeb38">&#9670;&nbsp;</a></span>volume_id_probe_ubifs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a> volume_id_probe_ubifs </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/d42/ubifs_8c_source.html#l00105">105</a> of file <a class="el" href="../../d2/d42/ubifs_8c_source.html">ubifs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;{</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="preprocessor">#define off ((uint64_t)0)</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d2/d42/ubifs_8c.html#dd/d07/structubifs__sb__node">ubifs_sb_node</a> *sb;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160; </div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;UBIFS: probing at offset 0x%llx&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>) <a class="code" href="../../d2/d42/ubifs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a>);</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    sb = <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#ad52c7b05017442dbe08091a85ef92710">volume_id_get_buffer</a>(<span class="keywordtype">id</span>, <a class="code" href="../../d2/d42/ubifs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a>, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="../../d2/d42/ubifs_8c.html#dd/d07/structubifs__sb__node">ubifs_sb_node</a>));</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="keywordflow">if</span> (!sb)</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160; </div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a48f527b00bc1d5e46366d720280a1039">le32_to_cpu</a>(sb-&gt;<a class="code" href="../../d2/d42/ubifs_8c.html#a01fbea05b14597fc04be230ae28dd855">ch</a>.<a class="code" href="../../d2/d42/ubifs_8c.html#af30a9063abfe5f1480b7badeaafd8ad5">magic</a>) != <a class="code" href="../../d2/d42/ubifs_8c.html#a294830fee84fa339706d3dc463224844">UBIFS_NODE_MAGIC</a>)</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160; </div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    IF_FEATURE_BLKID_TYPE(id-&gt;type = <span class="stringliteral">&quot;ubifs&quot;</span>;)</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#aaaf5289e506677e73ce13f40c67fb188">volume_id_set_uuid</a>(<span class="keywordtype">id</span>, sb-&gt;<a class="code" href="../../d2/d42/ubifs_8c.html#ac7537a9f4f478d7174267044042609ec">uuid</a>, <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a72f809f0cc1f63120f83a9fe78f026f1a4bd0e1bee402481edbff5b037158c245">UUID_DCE</a>);</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160; </div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <a class="code" href="../../d8/d64/glob__loop_8c.html#a5f3f8891e3f4c9d8d7effae7eb271604">return</a> 0;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;}</div>
<div class="ttc" id="aubifs_8c_html_a01fbea05b14597fc04be230ae28dd855"><div class="ttname"><a href="../../d2/d42/ubifs_8c.html#a01fbea05b14597fc04be230ae28dd855">ubifs_sb_node::ch</a></div><div class="ttdeci">struct ubifs_ch ch</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d42/ubifs_8c_source.html#l00042">ubifs.c:75</a></div></div>
<div class="ttc" id="aubifs_8c_html_a294830fee84fa339706d3dc463224844"><div class="ttname"><a href="../../d2/d42/ubifs_8c.html#a294830fee84fa339706d3dc463224844">UBIFS_NODE_MAGIC</a></div><div class="ttdeci">#define UBIFS_NODE_MAGIC</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d42/ubifs_8c_source.html#l00020">ubifs.c:20</a></div></div>
<div class="ttc" id="aubifs_8c_html_aa8df4166084b06f1e80d3510e5dcf7e1"><div class="ttname"><a href="../../d2/d42/ubifs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a></div><div class="ttdeci">#define off</div></div>
<div class="ttc" id="aubifs_8c_html_ac7537a9f4f478d7174267044042609ec"><div class="ttname"><a href="../../d2/d42/ubifs_8c.html#ac7537a9f4f478d7174267044042609ec">ubifs_sb_node::uuid</a></div><div class="ttdeci">uint8_t uuid[16]</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d42/ubifs_8c_source.html#l00098">ubifs.c:98</a></div></div>
<div class="ttc" id="aubifs_8c_html_af30a9063abfe5f1480b7badeaafd8ad5"><div class="ttname"><a href="../../d2/d42/ubifs_8c.html#af30a9063abfe5f1480b7badeaafd8ad5">ubifs_ch::magic</a></div><div class="ttdeci">uint32_t magic</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d42/ubifs_8c_source.html#l00036">ubifs.c:36</a></div></div>
<div class="ttc" id="aubifs_8c_html_dd/d07/structubifs__sb__node"><div class="ttname"><a href="../../d2/d42/ubifs_8c.html#dd/d07/structubifs__sb__node">ubifs_sb_node</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d42/ubifs_8c_source.html#l00074">ubifs.c:74</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d2/d42/ubifs_8c_source.html#l00075">ubifs_sb_node::ch</a>, <a class="el" href="../../d7/d8f/decompress__bunzip2_8c_source.html#l00047">dbg</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00110">le32_to_cpu</a>, <a class="el" href="../../d2/d42/ubifs_8c_source.html#l00036">ubifs_ch::magic</a>, <a class="el" href="../../d2/d42/ubifs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a>, <a class="el" href="../../d2/d42/ubifs_8c_source.html#l00020">UBIFS_NODE_MAGIC</a>, <a class="el" href="../../d2/d42/ubifs_8c_source.html#l00098">ubifs_sb_node::uuid</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00126">UUID_DCE</a>, <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00179">volume_id_get_buffer()</a>, and <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00135">volume_id_set_uuid()</a>.</p>

</div>
</div>
<a id="ac88255a75bf8ebe523d36b5552333c59"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac88255a75bf8ebe523d36b5552333c59">&#9670;&nbsp;</a></span>volume_id_probe_udf()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a> volume_id_probe_udf </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/d3a/udf_8c_source.html#l00064">64</a> of file <a class="el" href="../../d2/d3a/udf_8c_source.html">udf.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;{</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="preprocessor">#define off ((uint64_t)0)</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d2/d3a/udf_8c.html#d3/d6e/structvolume__descriptor">volume_descriptor</a> *vd;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d2/d3a/udf_8c.html#d0/d20/structvolume__structure__descriptor">volume_structure_descriptor</a> *vsd;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="keywordtype">unsigned</span> bs;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <span class="keywordtype">unsigned</span> b;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="../../d1/dc0/multiboot_8h.html#a8da1a8c7127a0371eec0810a29e30f3c">type</a>;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="../../d2/dd6/dd_8c.html#ac74ae34e9c58234aacabb6867b245c58">count</a>;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="keywordtype">unsigned</span> loc;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="keywordtype">unsigned</span> clen;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160; </div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;probing at offset 0x%llx&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>) <a class="code" href="../../d2/d3a/udf_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a>);</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160; </div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    vsd = <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#ad52c7b05017442dbe08091a85ef92710">volume_id_get_buffer</a>(<span class="keywordtype">id</span>, <a class="code" href="../../d2/d3a/udf_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a> + <a class="code" href="../../d2/d3a/udf_8c.html#afcee6adfa624e6f0e73ca3986975d0cb">UDF_VSD_OFFSET</a>, 0x200);</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="keywordflow">if</span> (vsd == <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160; </div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d82/convert_8h.html#ac376fcece8fcc2d0f8b1cf3de18b10df">memcmp</a>(vsd-&gt;<a class="code" href="../../d2/d3a/udf_8c.html#a4c264a8c954633633d8fc799d3d7f281">id</a>, <span class="stringliteral">&quot;NSR02&quot;</span>, 5) == 0)</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        <span class="keywordflow">goto</span> blocksize;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d82/convert_8h.html#ac376fcece8fcc2d0f8b1cf3de18b10df">memcmp</a>(vsd-&gt;<a class="code" href="../../d2/d3a/udf_8c.html#a4c264a8c954633633d8fc799d3d7f281">id</a>, <span class="stringliteral">&quot;NSR03&quot;</span>, 5) == 0)</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        <span class="keywordflow">goto</span> blocksize;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d82/convert_8h.html#ac376fcece8fcc2d0f8b1cf3de18b10df">memcmp</a>(vsd-&gt;<a class="code" href="../../d2/d3a/udf_8c.html#a4c264a8c954633633d8fc799d3d7f281">id</a>, <span class="stringliteral">&quot;BEA01&quot;</span>, 5) == 0)</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        <span class="keywordflow">goto</span> blocksize;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d82/convert_8h.html#ac376fcece8fcc2d0f8b1cf3de18b10df">memcmp</a>(vsd-&gt;<a class="code" href="../../d2/d3a/udf_8c.html#a4c264a8c954633633d8fc799d3d7f281">id</a>, <span class="stringliteral">&quot;BOOT2&quot;</span>, 5) == 0)</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        <span class="keywordflow">goto</span> blocksize;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d82/convert_8h.html#ac376fcece8fcc2d0f8b1cf3de18b10df">memcmp</a>(vsd-&gt;<a class="code" href="../../d2/d3a/udf_8c.html#a4c264a8c954633633d8fc799d3d7f281">id</a>, <span class="stringliteral">&quot;CD001&quot;</span>, 5) == 0)</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        <span class="keywordflow">goto</span> blocksize;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d82/convert_8h.html#ac376fcece8fcc2d0f8b1cf3de18b10df">memcmp</a>(vsd-&gt;<a class="code" href="../../d2/d3a/udf_8c.html#a4c264a8c954633633d8fc799d3d7f281">id</a>, <span class="stringliteral">&quot;CDW02&quot;</span>, 5) == 0)</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        <span class="keywordflow">goto</span> blocksize;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d82/convert_8h.html#ac376fcece8fcc2d0f8b1cf3de18b10df">memcmp</a>(vsd-&gt;<a class="code" href="../../d2/d3a/udf_8c.html#a4c264a8c954633633d8fc799d3d7f281">id</a>, <span class="stringliteral">&quot;TEA03&quot;</span>, 5) == 0)</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        <span class="keywordflow">goto</span> blocksize;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160; </div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;blocksize:</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="comment">/* search the next VSD to get the logical block size of the volume */</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="keywordflow">for</span> (bs = 0x800; bs &lt; 0x8000; bs += 0x800) {</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        vsd = <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#ad52c7b05017442dbe08091a85ef92710">volume_id_get_buffer</a>(<span class="keywordtype">id</span>, <a class="code" href="../../d2/d3a/udf_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a> + <a class="code" href="../../d2/d3a/udf_8c.html#afcee6adfa624e6f0e73ca3986975d0cb">UDF_VSD_OFFSET</a> + bs, 0x800);</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        <span class="keywordflow">if</span> (vsd == <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;            <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;test for blocksize: 0x%x&quot;</span>, bs);</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        <span class="keywordflow">if</span> (vsd-&gt;<a class="code" href="../../d2/d3a/udf_8c.html#a4c264a8c954633633d8fc799d3d7f281">id</a>[0] != <span class="charliteral">&#39;\0&#39;</span>)</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;            <span class="keywordflow">goto</span> nsr;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    }</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160; </div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;nsr:</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="comment">/* search the list of VSDs for a NSR descriptor */</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="keywordflow">for</span> (b = 0; b &lt; 64; b++) {</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        vsd = <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#ad52c7b05017442dbe08091a85ef92710">volume_id_get_buffer</a>(<span class="keywordtype">id</span>, <a class="code" href="../../d2/d3a/udf_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a> + <a class="code" href="../../d2/d3a/udf_8c.html#afcee6adfa624e6f0e73ca3986975d0cb">UDF_VSD_OFFSET</a> + (b * bs), 0x800);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        <span class="keywordflow">if</span> (vsd == <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;            <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160; </div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;vsd: %c%c%c%c%c&quot;</span>,</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;            vsd-&gt;<a class="code" href="../../d2/d3a/udf_8c.html#a4c264a8c954633633d8fc799d3d7f281">id</a>[0], vsd-&gt;<a class="code" href="../../d2/d3a/udf_8c.html#a4c264a8c954633633d8fc799d3d7f281">id</a>[1], vsd-&gt;<a class="code" href="../../d2/d3a/udf_8c.html#a4c264a8c954633633d8fc799d3d7f281">id</a>[2], vsd-&gt;<a class="code" href="../../d2/d3a/udf_8c.html#a4c264a8c954633633d8fc799d3d7f281">id</a>[3], vsd-&gt;<a class="code" href="../../d2/d3a/udf_8c.html#a4c264a8c954633633d8fc799d3d7f281">id</a>[4]);</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160; </div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        <span class="keywordflow">if</span> (vsd-&gt;<a class="code" href="../../d2/d3a/udf_8c.html#a4c264a8c954633633d8fc799d3d7f281">id</a>[0] == <span class="charliteral">&#39;\0&#39;</span>)</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;            <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d3/d82/convert_8h.html#ac376fcece8fcc2d0f8b1cf3de18b10df">memcmp</a>(vsd-&gt;<a class="code" href="../../d2/d3a/udf_8c.html#a4c264a8c954633633d8fc799d3d7f281">id</a>, <span class="stringliteral">&quot;NSR02&quot;</span>, 5) == 0)</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;            <span class="keywordflow">goto</span> anchor;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d3/d82/convert_8h.html#ac376fcece8fcc2d0f8b1cf3de18b10df">memcmp</a>(vsd-&gt;<a class="code" href="../../d2/d3a/udf_8c.html#a4c264a8c954633633d8fc799d3d7f281">id</a>, <span class="stringliteral">&quot;NSR03&quot;</span>, 5) == 0)</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;            <span class="keywordflow">goto</span> anchor;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    }</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160; </div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;anchor:</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="comment">/* read anchor volume descriptor */</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    vd = <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#ad52c7b05017442dbe08091a85ef92710">volume_id_get_buffer</a>(<span class="keywordtype">id</span>, <a class="code" href="../../d2/d3a/udf_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a> + (256 * bs), 0x200);</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keywordflow">if</span> (vd == <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160; </div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <a class="code" href="../../d1/dc0/multiboot_8h.html#a8da1a8c7127a0371eec0810a29e30f3c">type</a> = <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a65e9510f535c1ee2f826d447471289fa">le16_to_cpu</a>(vd-&gt;<a class="code" href="../../d2/d3a/udf_8c.html#a75382693321827f795d796b3af4c8522">tag</a>.<a class="code" href="../../d2/d3a/udf_8c.html#a3c0d3a1ff451626b9826acc8b471095d">id</a>);</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d1/dc0/multiboot_8h.html#a8da1a8c7127a0371eec0810a29e30f3c">type</a> != 2) <span class="comment">/* TAG_ID_AVDP */</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="../../d9/dd9/gconf_8c.html#a880efc1795d900be549017ddf66a03e3">found</a>;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160; </div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="comment">/* get descriptor list address and block count */</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <a class="code" href="../../d2/dd6/dd_8c.html#ac74ae34e9c58234aacabb6867b245c58">count</a> = <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a48f527b00bc1d5e46366d720280a1039">le32_to_cpu</a>(vd-&gt;<a class="code" href="../../d2/d3a/udf_8c.html#adbda5fb50140ac762586b0db191ef3a9">type</a>.anchor.length) / bs;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    loc = <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a48f527b00bc1d5e46366d720280a1039">le32_to_cpu</a>(vd-&gt;<a class="code" href="../../d2/d3a/udf_8c.html#adbda5fb50140ac762586b0db191ef3a9">type</a>.anchor.location);</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;0x%x descriptors starting at logical secor 0x%x&quot;</span>, <a class="code" href="../../d2/dd6/dd_8c.html#ac74ae34e9c58234aacabb6867b245c58">count</a>, loc);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160; </div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="comment">/* pick the primary descriptor from the list */</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keywordflow">for</span> (b = 0; b &lt; <a class="code" href="../../d2/dd6/dd_8c.html#ac74ae34e9c58234aacabb6867b245c58">count</a>; b++) {</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        vd = <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#ad52c7b05017442dbe08091a85ef92710">volume_id_get_buffer</a>(<span class="keywordtype">id</span>, <a class="code" href="../../d2/d3a/udf_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a> + ((loc + b) * bs), 0x200);</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        <span class="keywordflow">if</span> (vd == <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;            <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160; </div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <a class="code" href="../../d1/dc0/multiboot_8h.html#a8da1a8c7127a0371eec0810a29e30f3c">type</a> = <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a65e9510f535c1ee2f826d447471289fa">le16_to_cpu</a>(vd-&gt;<a class="code" href="../../d2/d3a/udf_8c.html#a75382693321827f795d796b3af4c8522">tag</a>.<a class="code" href="../../d2/d3a/udf_8c.html#a3c0d3a1ff451626b9826acc8b471095d">id</a>);</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;descriptor type %i&quot;</span>, <a class="code" href="../../d1/dc0/multiboot_8h.html#a8da1a8c7127a0371eec0810a29e30f3c">type</a>);</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160; </div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <span class="comment">/* check validity */</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d1/dc0/multiboot_8h.html#a8da1a8c7127a0371eec0810a29e30f3c">type</a> == 0)</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="../../d9/dd9/gconf_8c.html#a880efc1795d900be549017ddf66a03e3">found</a>;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a48f527b00bc1d5e46366d720280a1039">le32_to_cpu</a>(vd-&gt;<a class="code" href="../../d2/d3a/udf_8c.html#a75382693321827f795d796b3af4c8522">tag</a>.<a class="code" href="../../d2/d3a/udf_8c.html#a4fb5ee71ddca1faf732ee0a3ee120b12">location</a>) != loc + b)</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="../../d9/dd9/gconf_8c.html#a880efc1795d900be549017ddf66a03e3">found</a>;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160; </div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d1/dc0/multiboot_8h.html#a8da1a8c7127a0371eec0810a29e30f3c">type</a> == 1) <span class="comment">/* TAG_ID_PVD */</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;            <span class="keywordflow">goto</span> pvd;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    }</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keywordflow">goto</span> <a class="code" href="../../d9/dd9/gconf_8c.html#a880efc1795d900be549017ddf66a03e3">found</a>;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160; </div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160; pvd:</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment">//  volume_id_set_label_raw(id, &amp;(vd-&gt;type.primary.ident.clen), 32);</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160; </div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    clen = vd-&gt;<a class="code" href="../../d2/d3a/udf_8c.html#adbda5fb50140ac762586b0db191ef3a9">type</a>.primary.ident.clen;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;label string charsize=%i bit&quot;</span>, clen);</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="keywordflow">if</span> (clen == 8)</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#a3629b5eaf1943e2f4634bd5913959b04">volume_id_set_label_string</a>(<span class="keywordtype">id</span>, vd-&gt;<a class="code" href="../../d2/d3a/udf_8c.html#adbda5fb50140ac762586b0db191ef3a9">type</a>.primary.ident.c, 31);</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (clen == 16)</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#a647a5f7f037d4d3506b2811021805bda">volume_id_set_label_unicode16</a>(<span class="keywordtype">id</span>, vd-&gt;<a class="code" href="../../d2/d3a/udf_8c.html#adbda5fb50140ac762586b0db191ef3a9">type</a>.primary.ident.c, <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#aceb52d5e58265d474290d1e17bcf1716ac115336a31f6a75e7dd426dfd459fb54">BE</a>, 31);</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160; </div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160; <a class="code" href="../../d9/dd9/gconf_8c.html#a880efc1795d900be549017ddf66a03e3">found</a>:</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="comment">//  volume_id_set_usage(id, VOLUME_ID_FILESYSTEM);</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    IF_FEATURE_BLKID_TYPE(<a class="code" href="../../d2/d3a/udf_8c.html#a4c264a8c954633633d8fc799d3d7f281">id</a>-&gt;type = <span class="stringliteral">&quot;udf&quot;</span>;)</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <a class="code" href="../../d8/d64/glob__loop_8c.html#a5f3f8891e3f4c9d8d7effae7eb271604">return</a> 0;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;}</div>
<div class="ttc" id="amultiboot_8h_html_a8da1a8c7127a0371eec0810a29e30f3c"><div class="ttname"><a href="../../d1/dc0/multiboot_8h.html#a8da1a8c7127a0371eec0810a29e30f3c">type</a></div><div class="ttdeci">multiboot_uint32_t type</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/multiboot_8h_source.html#l00008">multiboot.h:8</a></div></div>
<div class="ttc" id="audf_8c_html_a3c0d3a1ff451626b9826acc8b471095d"><div class="ttname"><a href="../../d2/d3a/udf_8c.html#a3c0d3a1ff451626b9826acc8b471095d">volume_descriptor::descriptor_tag::id</a></div><div class="ttdeci">uint16_t id</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d3a/udf_8c_source.html#l00031">udf.c:31</a></div></div>
<div class="ttc" id="audf_8c_html_a4c264a8c954633633d8fc799d3d7f281"><div class="ttname"><a href="../../d2/d3a/udf_8c.html#a4c264a8c954633633d8fc799d3d7f281">volume_structure_descriptor::id</a></div><div class="ttdeci">uint8_t id[5]</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d3a/udf_8c_source.html#l00058">udf.c:58</a></div></div>
<div class="ttc" id="audf_8c_html_a4fb5ee71ddca1faf732ee0a3ee120b12"><div class="ttname"><a href="../../d2/d3a/udf_8c.html#a4fb5ee71ddca1faf732ee0a3ee120b12">volume_descriptor::descriptor_tag::location</a></div><div class="ttdeci">uint32_t location</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d3a/udf_8c_source.html#l00038">udf.c:38</a></div></div>
<div class="ttc" id="audf_8c_html_a75382693321827f795d796b3af4c8522"><div class="ttname"><a href="../../d2/d3a/udf_8c.html#a75382693321827f795d796b3af4c8522">volume_descriptor::tag</a></div><div class="ttdeci">struct volume_descriptor::descriptor_tag tag</div></div>
<div class="ttc" id="audf_8c_html_aa8df4166084b06f1e80d3510e5dcf7e1"><div class="ttname"><a href="../../d2/d3a/udf_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a></div><div class="ttdeci">#define off</div></div>
<div class="ttc" id="audf_8c_html_adbda5fb50140ac762586b0db191ef3a9"><div class="ttname"><a href="../../d2/d3a/udf_8c.html#adbda5fb50140ac762586b0db191ef3a9">volume_descriptor::type</a></div><div class="ttdeci">union volume_descriptor::@1138 type</div></div>
<div class="ttc" id="audf_8c_html_afcee6adfa624e6f0e73ca3986975d0cb"><div class="ttname"><a href="../../d2/d3a/udf_8c.html#afcee6adfa624e6f0e73ca3986975d0cb">UDF_VSD_OFFSET</a></div><div class="ttdeci">#define UDF_VSD_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d3a/udf_8c_source.html#l00062">udf.c:62</a></div></div>
<div class="ttc" id="audf_8c_html_d0/d20/structvolume__structure__descriptor"><div class="ttname"><a href="../../d2/d3a/udf_8c.html#d0/d20/structvolume__structure__descriptor">volume_structure_descriptor</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d3a/udf_8c_source.html#l00056">udf.c:56</a></div></div>
<div class="ttc" id="audf_8c_html_d3/d6e/structvolume__descriptor"><div class="ttname"><a href="../../d2/d3a/udf_8c.html#d3/d6e/structvolume__descriptor">volume_descriptor</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d3a/udf_8c_source.html#l00029">udf.c:29</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00132">BE</a>, <a class="el" href="../../d2/dd6/dd_8c.html#ac74ae34e9c58234aacabb6867b245c58">count</a>, <a class="el" href="../../d7/d8f/decompress__bunzip2_8c_source.html#l00047">dbg</a>, <a class="el" href="../../d9/dd9/gconf_8c_source.html#l01348">found</a>, <a class="el" href="../../d2/d3a/udf_8c_source.html#l00031">volume_descriptor::descriptor_tag::id</a>, <a class="el" href="../../d2/d3a/udf_8c_source.html#l00058">volume_structure_descriptor::id</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00109">le16_to_cpu</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00110">le32_to_cpu</a>, <a class="el" href="../../d2/d3a/udf_8c_source.html#l00038">volume_descriptor::descriptor_tag::location</a>, <a class="el" href="../../d3/d68/convert_8cpp_source.html#l00030">memcmp()</a>, <a class="el" href="../../d0/df4/Kernel_2include_2types_8h_source.html#l00037">NULL</a>, <a class="el" href="../../d2/d3a/udf_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a>, <a class="el" href="../../d2/d3a/udf_8c.html#a75382693321827f795d796b3af4c8522">volume_descriptor::tag</a>, <a class="el" href="../../d1/dc0/multiboot_8h_source.html#l00008">type</a>, <a class="el" href="../../d2/d3a/udf_8c.html#adbda5fb50140ac762586b0db191ef3a9">volume_descriptor::type</a>, <a class="el" href="../../d2/d3a/udf_8c_source.html#l00062">UDF_VSD_OFFSET</a>, <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00179">volume_id_get_buffer()</a>, <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00115">volume_id_set_label_string()</a>, and <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00130">volume_id_set_label_unicode16()</a>.</p>

</div>
</div>
<a id="a3b13c938a07f8f0836abd8a7e1e27fd5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b13c938a07f8f0836abd8a7e1e27fd5">&#9670;&nbsp;</a></span>volume_id_probe_vfat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a> volume_id_probe_vfat </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d2e/fat_8c_source.html#l00128">128</a> of file <a class="el" href="../../d3/d2e/fat_8c_source.html">fat.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;{</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="preprocessor">#define fat_partition_off ((uint64_t)0)</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d3/d2e/fat_8c.html#dd/d19/structvfat__super__block">vfat_super_block</a> *vs;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d3/d2e/fat_8c.html#d7/db1/structvfat__dir__entry">vfat_dir_entry</a> *<a class="code" href="../../df/dde/runsv_8c.html#ad45ef284071e5bd5627127837e94bc27">dir</a>;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a5debae8b2a1ec20a6694c0c443ee399e">uint16_t</a> sector_size_bytes;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a5debae8b2a1ec20a6694c0c443ee399e">uint16_t</a> dir_entries;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <a class="code" href="../../dd/ddd/arithmetic__operations_8c.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> sect_count;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a5debae8b2a1ec20a6694c0c443ee399e">uint16_t</a> reserved_sct;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <a class="code" href="../../dd/ddd/arithmetic__operations_8c.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> fat_size_sct;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <a class="code" href="../../dd/ddd/arithmetic__operations_8c.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> root_cluster;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <a class="code" href="../../dd/ddd/arithmetic__operations_8c.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> dir_size_sct;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <a class="code" href="../../dd/ddd/arithmetic__operations_8c.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> cluster_count;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <a class="code" href="../../dd/ddd/arithmetic__operations_8c.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a> root_start_off;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <a class="code" href="../../dd/ddd/arithmetic__operations_8c.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> start_data_sct;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a3cb4a16b0e8d6af0af86d4fd6ba5fd9d">uint8_t</a> *<a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <a class="code" href="../../dd/ddd/arithmetic__operations_8c.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> buf_size;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a3cb4a16b0e8d6af0af86d4fd6ba5fd9d">uint8_t</a> *<a class="code" href="../../d6/dff/diff_8c.html#a194c3fb843a8ae50f9ed19d4ee4f42de">label</a> = <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <a class="code" href="../../dd/ddd/arithmetic__operations_8c.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> next_cluster;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="keywordtype">int</span> maxloop;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160; </div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;probing at offset 0x%llx&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>) <a class="code" href="../../d3/d2e/fat_8c.html#af44c02eb171ee6f20e2c058bd3f9dc35">fat_partition_off</a>);</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160; </div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    vs = <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#ad52c7b05017442dbe08091a85ef92710">volume_id_get_buffer</a>(<span class="keywordtype">id</span>, <a class="code" href="../../d3/d2e/fat_8c.html#af44c02eb171ee6f20e2c058bd3f9dc35">fat_partition_off</a>, 0x200);</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="keywordflow">if</span> (vs == <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160; </div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="comment">/* believe only that&#39;s fat, don&#39;t trust the version</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment">     * the cluster_count will tell us</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d82/convert_8h.html#ac376fcece8fcc2d0f8b1cf3de18b10df">memcmp</a>(vs-&gt;<a class="code" href="../../d3/d2e/fat_8c.html#a3d73c32b87f28cf43f9be98183eb2672">sysid</a>, <span class="stringliteral">&quot;NTFS&quot;</span>, 4) == 0)</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160; </div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d82/convert_8h.html#ac376fcece8fcc2d0f8b1cf3de18b10df">memcmp</a>(vs-&gt;<a class="code" href="../../d3/d2e/fat_8c.html#acd0126d416190bf8b0f220ccf3de390b">type</a>.fat32.magic, <span class="stringliteral">&quot;MSWIN&quot;</span>, 5) == 0)</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        <span class="keywordflow">goto</span> valid;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160; </div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d82/convert_8h.html#ac376fcece8fcc2d0f8b1cf3de18b10df">memcmp</a>(vs-&gt;<a class="code" href="../../d3/d2e/fat_8c.html#acd0126d416190bf8b0f220ccf3de390b">type</a>.fat32.magic, <span class="stringliteral">&quot;FAT32   &quot;</span>, 8) == 0)</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        <span class="keywordflow">goto</span> valid;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160; </div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d82/convert_8h.html#ac376fcece8fcc2d0f8b1cf3de18b10df">memcmp</a>(vs-&gt;<a class="code" href="../../d3/d2e/fat_8c.html#acd0126d416190bf8b0f220ccf3de390b">type</a>.fat.magic, <span class="stringliteral">&quot;FAT16   &quot;</span>, 8) == 0)</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        <span class="keywordflow">goto</span> valid;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160; </div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d82/convert_8h.html#ac376fcece8fcc2d0f8b1cf3de18b10df">memcmp</a>(vs-&gt;<a class="code" href="../../d3/d2e/fat_8c.html#acd0126d416190bf8b0f220ccf3de390b">type</a>.fat.magic, <span class="stringliteral">&quot;MSDOS&quot;</span>, 5) == 0)</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        <span class="keywordflow">goto</span> valid;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160; </div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d82/convert_8h.html#ac376fcece8fcc2d0f8b1cf3de18b10df">memcmp</a>(vs-&gt;<a class="code" href="../../d3/d2e/fat_8c.html#acd0126d416190bf8b0f220ccf3de390b">type</a>.fat.magic, <span class="stringliteral">&quot;FAT12   &quot;</span>, 8) == 0)</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        <span class="keywordflow">goto</span> valid;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160; </div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment">     * There are old floppies out there without a magic, so we check</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="comment">     * for well known values and guess if it&#39;s a fat volume</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160; </div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="comment">/* boot jump address check */</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="keywordflow">if</span> ((vs-&gt;<a class="code" href="../../d3/d2e/fat_8c.html#af7d86d65d48029b43c973dbb17863d1b">boot_jump</a>[0] != 0xeb || vs-&gt;<a class="code" href="../../d3/d2e/fat_8c.html#af7d86d65d48029b43c973dbb17863d1b">boot_jump</a>[2] != 0x90)</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;     &amp;&amp; vs-&gt;<a class="code" href="../../d3/d2e/fat_8c.html#af7d86d65d48029b43c973dbb17863d1b">boot_jump</a>[0] != 0xe9</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    ) {</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    }</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160; </div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="comment">/* heads check */</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="keywordflow">if</span> (vs-&gt;<a class="code" href="../../d3/d2e/fat_8c.html#a084106bf9c89e27fb00400b70a80098a">heads</a> == 0)</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160; </div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="comment">/* cluster size check */</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="keywordflow">if</span> (vs-&gt;<a class="code" href="../../d3/d2e/fat_8c.html#a2b58cab26034477b7b12ede23d5b30a6">sectors_per_cluster</a> == 0</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;     || (vs-&gt;<a class="code" href="../../d3/d2e/fat_8c.html#a2b58cab26034477b7b12ede23d5b30a6">sectors_per_cluster</a> &amp; (vs-&gt;<a class="code" href="../../d3/d2e/fat_8c.html#a2b58cab26034477b7b12ede23d5b30a6">sectors_per_cluster</a>-1))</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    ) {</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    }</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160; </div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="comment">/* media check */</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keywordflow">if</span> (vs-&gt;<a class="code" href="../../d3/d2e/fat_8c.html#afe2388cc5bf7f0469aff0e05bf9258ca">media</a> &lt; 0xf8 &amp;&amp; vs-&gt;<a class="code" href="../../d3/d2e/fat_8c.html#afe2388cc5bf7f0469aff0e05bf9258ca">media</a> != 0xf0)</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160; </div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="comment">/* fat count*/</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="keywordflow">if</span> (vs-&gt;<a class="code" href="../../d3/d2e/fat_8c.html#a4efd9e9633e32c10cfbbb2f4065a5691">fats</a> != 2)</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160; </div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160; valid:</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="comment">/* sector size check */</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    sector_size_bytes = <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a65e9510f535c1ee2f826d447471289fa">le16_to_cpu</a>(vs-&gt;<a class="code" href="../../d3/d2e/fat_8c.html#afae9587b2b9c2649b6eb0dadaa415871">sector_size_bytes</a>);</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="keywordflow">if</span> (sector_size_bytes != 0x200 &amp;&amp; sector_size_bytes != 0x400</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;     &amp;&amp; sector_size_bytes != 0x800 &amp;&amp; sector_size_bytes != 0x1000</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    ) {</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    }</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160; </div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;sector_size_bytes 0x%x&quot;</span>, sector_size_bytes);</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;sectors_per_cluster 0x%x&quot;</span>, vs-&gt;<a class="code" href="../../d3/d2e/fat_8c.html#a2b58cab26034477b7b12ede23d5b30a6">sectors_per_cluster</a>);</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160; </div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    reserved_sct = <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a65e9510f535c1ee2f826d447471289fa">le16_to_cpu</a>(vs-&gt;<a class="code" href="../../d3/d2e/fat_8c.html#aec13261cfd1c98a54d3566d13311b825">reserved_sct</a>);</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;reserved_sct 0x%x&quot;</span>, reserved_sct);</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160; </div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    sect_count = <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a65e9510f535c1ee2f826d447471289fa">le16_to_cpu</a>(vs-&gt;<a class="code" href="../../d3/d2e/fat_8c.html#a9bf56d4330ac69b3d95db036bd91cf57">sectors</a>);</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keywordflow">if</span> (sect_count == 0)</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        sect_count = <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a48f527b00bc1d5e46366d720280a1039">le32_to_cpu</a>(vs-&gt;<a class="code" href="../../d3/d2e/fat_8c.html#a10b6915e469804863765c6b586945dc0">total_sect</a>);</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;sect_count 0x%x&quot;</span>, sect_count);</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160; </div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    fat_size_sct = <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a65e9510f535c1ee2f826d447471289fa">le16_to_cpu</a>(vs-&gt;<a class="code" href="../../d3/d2e/fat_8c.html#af4c1a4b357865762cae7ce76d2ef34d1">fat_length</a>);</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="keywordflow">if</span> (fat_size_sct == 0)</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        fat_size_sct = <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a48f527b00bc1d5e46366d720280a1039">le32_to_cpu</a>(vs-&gt;<a class="code" href="../../d3/d2e/fat_8c.html#acd0126d416190bf8b0f220ccf3de390b">type</a>.fat32.fat32_length);</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    fat_size_sct *= vs-&gt;<a class="code" href="../../d3/d2e/fat_8c.html#a4efd9e9633e32c10cfbbb2f4065a5691">fats</a>;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;fat_size_sct 0x%x&quot;</span>, fat_size_sct);</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160; </div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    dir_entries = <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a65e9510f535c1ee2f826d447471289fa">le16_to_cpu</a>(vs-&gt;<a class="code" href="../../d3/d2e/fat_8c.html#a96faac3e769edde13201d1770388f5a2">dir_entries</a>);</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    dir_size_sct = ((dir_entries * <span class="keyword">sizeof</span>(<span class="keyword">struct </span><a class="code" href="../../d3/d2e/fat_8c.html#d7/db1/structvfat__dir__entry">vfat_dir_entry</a>)) +</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;            (sector_size_bytes-1)) / sector_size_bytes;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;dir_size_sct 0x%x&quot;</span>, dir_size_sct);</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160; </div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    cluster_count = sect_count - (reserved_sct + fat_size_sct + dir_size_sct);</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    cluster_count /= vs-&gt;<a class="code" href="../../d3/d2e/fat_8c.html#a2b58cab26034477b7b12ede23d5b30a6">sectors_per_cluster</a>;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;cluster_count 0x%x&quot;</span>, cluster_count);</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160; </div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="comment">//  if (cluster_count &lt; FAT12_MAX) {</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="comment">//      strcpy(id-&gt;type_version, &quot;FAT12&quot;);</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="comment">//  } else if (cluster_count &lt; FAT16_MAX) {</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="comment">//      strcpy(id-&gt;type_version, &quot;FAT16&quot;);</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="comment">//  } else {</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="comment">//      strcpy(id-&gt;type_version, &quot;FAT32&quot;);</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="comment">//      goto fat32;</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="comment">//  }</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="keywordflow">if</span> (cluster_count &gt; <a class="code" href="../../d3/d2e/fat_8c.html#ab464d0f8ffeaecce8050445bb5c80c07">FAT16_MAX</a>)</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        <span class="keywordflow">goto</span> fat32;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160; </div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="comment">/* the label may be an attribute in the root directory */</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    root_start_off = (reserved_sct + fat_size_sct) * sector_size_bytes;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;root dir start 0x%llx&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>) root_start_off);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;expected entries 0x%x&quot;</span>, dir_entries);</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160; </div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    buf_size = dir_entries * <span class="keyword">sizeof</span>(<span class="keyword">struct </span><a class="code" href="../../d3/d2e/fat_8c.html#d7/db1/structvfat__dir__entry">vfat_dir_entry</a>);</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a> = <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#ad52c7b05017442dbe08091a85ef92710">volume_id_get_buffer</a>(<span class="keywordtype">id</span>, <a class="code" href="../../d3/d2e/fat_8c.html#af44c02eb171ee6f20e2c058bd3f9dc35">fat_partition_off</a> + root_start_off, buf_size);</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a> == <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        <span class="keywordflow">goto</span> ret;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160; </div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <a class="code" href="../../d6/dff/diff_8c.html#a194c3fb843a8ae50f9ed19d4ee4f42de">label</a> = <a class="code" href="../../d3/d2e/fat_8c.html#a6ef4eb449a16e874470761db30d21e03">get_attr_volume_id</a>((<span class="keyword">struct</span> <a class="code" href="../../d3/d2e/fat_8c.html#d7/db1/structvfat__dir__entry">vfat_dir_entry</a>*) <a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>, dir_entries);</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160; </div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    vs = <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#ad52c7b05017442dbe08091a85ef92710">volume_id_get_buffer</a>(<span class="keywordtype">id</span>, <a class="code" href="../../d3/d2e/fat_8c.html#af44c02eb171ee6f20e2c058bd3f9dc35">fat_partition_off</a>, 0x200);</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="keywordflow">if</span> (vs == <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160; </div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d6/dff/diff_8c.html#a194c3fb843a8ae50f9ed19d4ee4f42de">label</a> != <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; <a class="code" href="../../d3/d82/convert_8h.html#ac376fcece8fcc2d0f8b1cf3de18b10df">memcmp</a>(<a class="code" href="../../d6/dff/diff_8c.html#a194c3fb843a8ae50f9ed19d4ee4f42de">label</a>, <span class="stringliteral">&quot;NO NAME    &quot;</span>, 11) != 0) {</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="comment">//      volume_id_set_label_raw(id, label, 11);</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#a3629b5eaf1943e2f4634bd5913959b04">volume_id_set_label_string</a>(<span class="keywordtype">id</span>, <a class="code" href="../../d6/dff/diff_8c.html#a194c3fb843a8ae50f9ed19d4ee4f42de">label</a>, 11);</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d3/d82/convert_8h.html#ac376fcece8fcc2d0f8b1cf3de18b10df">memcmp</a>(vs-&gt;<a class="code" href="../../d3/d2e/fat_8c.html#acd0126d416190bf8b0f220ccf3de390b">type</a>.fat.label, <span class="stringliteral">&quot;NO NAME    &quot;</span>, 11) != 0) {</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="comment">//      volume_id_set_label_raw(id, vs-&gt;type.fat.label, 11);</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#a3629b5eaf1943e2f4634bd5913959b04">volume_id_set_label_string</a>(<span class="keywordtype">id</span>, vs-&gt;<a class="code" href="../../d3/d2e/fat_8c.html#acd0126d416190bf8b0f220ccf3de390b">type</a>.fat.label, 11);</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    }</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#aaaf5289e506677e73ce13f40c67fb188">volume_id_set_uuid</a>(<span class="keywordtype">id</span>, vs-&gt;<a class="code" href="../../d3/d2e/fat_8c.html#acd0126d416190bf8b0f220ccf3de390b">type</a>.fat.serno, <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a72f809f0cc1f63120f83a9fe78f026f1a979167e82bd9d4c12bd02a8bd2d35a44">UUID_DOS</a>);</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keywordflow">goto</span> ret;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160; </div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160; fat32:</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="comment">/* FAT32 root dir is a cluster chain like any other directory */</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    buf_size = vs-&gt;<a class="code" href="../../d3/d2e/fat_8c.html#a2b58cab26034477b7b12ede23d5b30a6">sectors_per_cluster</a> * sector_size_bytes;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    root_cluster = <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a48f527b00bc1d5e46366d720280a1039">le32_to_cpu</a>(vs-&gt;<a class="code" href="../../d3/d2e/fat_8c.html#acd0126d416190bf8b0f220ccf3de390b">type</a>.fat32.root_cluster);</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    start_data_sct = reserved_sct + fat_size_sct;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160; </div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    next_cluster = root_cluster;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    maxloop = 100;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="keywordflow">while</span> (--maxloop) {</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        <a class="code" href="../../dd/ddd/arithmetic__operations_8c.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a> next_off_sct;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        <a class="code" href="../../dd/ddd/arithmetic__operations_8c.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a> next_off;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        <a class="code" href="../../dd/ddd/arithmetic__operations_8c.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a> fat_entry_off;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="../../d2/dd6/dd_8c.html#ac74ae34e9c58234aacabb6867b245c58">count</a>;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160; </div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;next_cluster 0x%x&quot;</span>, (<span class="keywordtype">unsigned</span>)next_cluster);</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        next_off_sct = (<a class="code" href="../../dd/ddd/arithmetic__operations_8c.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a>)(next_cluster - 2) * vs-&gt;<a class="code" href="../../d3/d2e/fat_8c.html#a2b58cab26034477b7b12ede23d5b30a6">sectors_per_cluster</a>;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        next_off = (start_data_sct + next_off_sct) * sector_size_bytes;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;cluster offset 0x%llx&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>) next_off);</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160; </div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        <span class="comment">/* get cluster */</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        <a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a> = <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#ad52c7b05017442dbe08091a85ef92710">volume_id_get_buffer</a>(<span class="keywordtype">id</span>, <a class="code" href="../../d3/d2e/fat_8c.html#af44c02eb171ee6f20e2c058bd3f9dc35">fat_partition_off</a> + next_off, buf_size);</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a> == <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;            <span class="keywordflow">goto</span> ret;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160; </div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        <a class="code" href="../../df/dde/runsv_8c.html#ad45ef284071e5bd5627127837e94bc27">dir</a> = (<span class="keyword">struct </span><a class="code" href="../../d3/d2e/fat_8c.html#d7/db1/structvfat__dir__entry">vfat_dir_entry</a>*) <a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        <a class="code" href="../../d2/dd6/dd_8c.html#ac74ae34e9c58234aacabb6867b245c58">count</a> = buf_size / <span class="keyword">sizeof</span>(<span class="keyword">struct </span><a class="code" href="../../d3/d2e/fat_8c.html#d7/db1/structvfat__dir__entry">vfat_dir_entry</a>);</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;expected entries 0x%x&quot;</span>, <a class="code" href="../../d2/dd6/dd_8c.html#ac74ae34e9c58234aacabb6867b245c58">count</a>);</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160; </div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        <a class="code" href="../../d6/dff/diff_8c.html#a194c3fb843a8ae50f9ed19d4ee4f42de">label</a> = <a class="code" href="../../d3/d2e/fat_8c.html#a6ef4eb449a16e874470761db30d21e03">get_attr_volume_id</a>(<a class="code" href="../../df/dde/runsv_8c.html#ad45ef284071e5bd5627127837e94bc27">dir</a>, <a class="code" href="../../d2/dd6/dd_8c.html#ac74ae34e9c58234aacabb6867b245c58">count</a>);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d6/dff/diff_8c.html#a194c3fb843a8ae50f9ed19d4ee4f42de">label</a>)</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160; </div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        <span class="comment">/* get FAT entry */</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        fat_entry_off = (reserved_sct * sector_size_bytes) + (next_cluster * <span class="keyword">sizeof</span>(<a class="code" href="../../dd/ddd/arithmetic__operations_8c.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>));</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;fat_entry_off 0x%llx&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>)fat_entry_off);</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        <a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a> = <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#ad52c7b05017442dbe08091a85ef92710">volume_id_get_buffer</a>(<span class="keywordtype">id</span>, <a class="code" href="../../d3/d2e/fat_8c.html#af44c02eb171ee6f20e2c058bd3f9dc35">fat_partition_off</a> + fat_entry_off, buf_size);</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a> == <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;            <span class="keywordflow">goto</span> ret;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160; </div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        <span class="comment">/* set next cluster */</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        next_cluster = <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a48f527b00bc1d5e46366d720280a1039">le32_to_cpu</a>(*(<a class="code" href="../../dd/ddd/arithmetic__operations_8c.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>*)<a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>) &amp; 0x0fffffff;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        <span class="keywordflow">if</span> (next_cluster &lt; 2 || next_cluster &gt; <a class="code" href="../../d3/d2e/fat_8c.html#a90c1cbcc02e0cd521566a1f9fa928849">FAT32_MAX</a>)</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    }</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <span class="keywordflow">if</span> (maxloop == 0)</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;reached maximum follow count of root cluster chain, give up&quot;</span>);</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160; </div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    vs = <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#ad52c7b05017442dbe08091a85ef92710">volume_id_get_buffer</a>(<span class="keywordtype">id</span>, <a class="code" href="../../d3/d2e/fat_8c.html#af44c02eb171ee6f20e2c058bd3f9dc35">fat_partition_off</a>, 0x200);</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="keywordflow">if</span> (vs == <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160; </div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d6/dff/diff_8c.html#a194c3fb843a8ae50f9ed19d4ee4f42de">label</a> != <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; <a class="code" href="../../d3/d82/convert_8h.html#ac376fcece8fcc2d0f8b1cf3de18b10df">memcmp</a>(<a class="code" href="../../d6/dff/diff_8c.html#a194c3fb843a8ae50f9ed19d4ee4f42de">label</a>, <span class="stringliteral">&quot;NO NAME    &quot;</span>, 11) != 0) {</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="comment">//      volume_id_set_label_raw(id, label, 11);</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#a3629b5eaf1943e2f4634bd5913959b04">volume_id_set_label_string</a>(<span class="keywordtype">id</span>, <a class="code" href="../../d6/dff/diff_8c.html#a194c3fb843a8ae50f9ed19d4ee4f42de">label</a>, 11);</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d3/d82/convert_8h.html#ac376fcece8fcc2d0f8b1cf3de18b10df">memcmp</a>(vs-&gt;<a class="code" href="../../d3/d2e/fat_8c.html#acd0126d416190bf8b0f220ccf3de390b">type</a>.fat32.label, <span class="stringliteral">&quot;NO NAME    &quot;</span>, 11) != 0) {</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="comment">//      volume_id_set_label_raw(id, vs-&gt;type.fat32.label, 11);</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#a3629b5eaf1943e2f4634bd5913959b04">volume_id_set_label_string</a>(<span class="keywordtype">id</span>, vs-&gt;<a class="code" href="../../d3/d2e/fat_8c.html#acd0126d416190bf8b0f220ccf3de390b">type</a>.fat32.label, 11);</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    }</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#aaaf5289e506677e73ce13f40c67fb188">volume_id_set_uuid</a>(<span class="keywordtype">id</span>, vs-&gt;<a class="code" href="../../d3/d2e/fat_8c.html#acd0126d416190bf8b0f220ccf3de390b">type</a>.fat32.serno, <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a72f809f0cc1f63120f83a9fe78f026f1a979167e82bd9d4c12bd02a8bd2d35a44">UUID_DOS</a>);</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160; </div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160; ret:</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="comment">//  volume_id_set_usage(id, VOLUME_ID_FILESYSTEM);</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    IF_FEATURE_BLKID_TYPE(id-&gt;type = <span class="stringliteral">&quot;vfat&quot;</span>;)</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160; </div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <a class="code" href="../../d8/d64/glob__loop_8c.html#a5f3f8891e3f4c9d8d7effae7eb271604">return</a> 0;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;}</div>
<div class="ttc" id="aKernel_2include_2types_8h_html_a5debae8b2a1ec20a6694c0c443ee399e"><div class="ttname"><a href="../../d0/df4/Kernel_2include_2types_8h.html#a5debae8b2a1ec20a6694c0c443ee399e">uint16_t</a></div><div class="ttdeci">__UINT16_TYPE__ uint16_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/Kernel_2include_2types_8h_source.html#l00161">types.h:161</a></div></div>
<div class="ttc" id="adiff_8c_html_a194c3fb843a8ae50f9ed19d4ee4f42de"><div class="ttname"><a href="../../d6/dff/diff_8c.html#a194c3fb843a8ae50f9ed19d4ee4f42de">label</a></div><div class="ttdeci">#define label</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dff/diff_8c_source.html#l00176">diff.c:176</a></div></div>
<div class="ttc" id="afat_8c_html_a084106bf9c89e27fb00400b70a80098a"><div class="ttname"><a href="../../d3/d2e/fat_8c.html#a084106bf9c89e27fb00400b70a80098a">vfat_super_block::heads</a></div><div class="ttdeci">uint16_t heads</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d2e/fat_8c_source.html#l00052">fat.c:52</a></div></div>
<div class="ttc" id="afat_8c_html_a10b6915e469804863765c6b586945dc0"><div class="ttname"><a href="../../d3/d2e/fat_8c.html#a10b6915e469804863765c6b586945dc0">vfat_super_block::total_sect</a></div><div class="ttdeci">uint32_t total_sect</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d2e/fat_8c_source.html#l00054">fat.c:54</a></div></div>
<div class="ttc" id="afat_8c_html_a2b58cab26034477b7b12ede23d5b30a6"><div class="ttname"><a href="../../d3/d2e/fat_8c.html#a2b58cab26034477b7b12ede23d5b30a6">vfat_super_block::sectors_per_cluster</a></div><div class="ttdeci">uint8_t sectors_per_cluster</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d2e/fat_8c_source.html#l00044">fat.c:44</a></div></div>
<div class="ttc" id="afat_8c_html_a3d73c32b87f28cf43f9be98183eb2672"><div class="ttname"><a href="../../d3/d2e/fat_8c.html#a3d73c32b87f28cf43f9be98183eb2672">vfat_super_block::sysid</a></div><div class="ttdeci">uint8_t sysid[8]</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d2e/fat_8c_source.html#l00042">fat.c:42</a></div></div>
<div class="ttc" id="afat_8c_html_a4efd9e9633e32c10cfbbb2f4065a5691"><div class="ttname"><a href="../../d3/d2e/fat_8c.html#a4efd9e9633e32c10cfbbb2f4065a5691">vfat_super_block::fats</a></div><div class="ttdeci">uint8_t fats</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d2e/fat_8c_source.html#l00046">fat.c:46</a></div></div>
<div class="ttc" id="afat_8c_html_a6ef4eb449a16e874470761db30d21e03"><div class="ttname"><a href="../../d3/d2e/fat_8c.html#a6ef4eb449a16e874470761db30d21e03">get_attr_volume_id</a></div><div class="ttdeci">static uint8_t * get_attr_volume_id(struct vfat_dir_entry *dir, int count)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d2e/fat_8c_source.html#l00096">fat.c:96</a></div></div>
<div class="ttc" id="afat_8c_html_a90c1cbcc02e0cd521566a1f9fa928849"><div class="ttname"><a href="../../d3/d2e/fat_8c.html#a90c1cbcc02e0cd521566a1f9fa928849">FAT32_MAX</a></div><div class="ttdeci">#define FAT32_MAX</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d2e/fat_8c_source.html#l00032">fat.c:32</a></div></div>
<div class="ttc" id="afat_8c_html_a96faac3e769edde13201d1770388f5a2"><div class="ttname"><a href="../../d3/d2e/fat_8c.html#a96faac3e769edde13201d1770388f5a2">vfat_super_block::dir_entries</a></div><div class="ttdeci">uint16_t dir_entries</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d2e/fat_8c_source.html#l00047">fat.c:47</a></div></div>
<div class="ttc" id="afat_8c_html_a9bf56d4330ac69b3d95db036bd91cf57"><div class="ttname"><a href="../../d3/d2e/fat_8c.html#a9bf56d4330ac69b3d95db036bd91cf57">vfat_super_block::sectors</a></div><div class="ttdeci">uint16_t sectors</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d2e/fat_8c_source.html#l00048">fat.c:48</a></div></div>
<div class="ttc" id="afat_8c_html_ab464d0f8ffeaecce8050445bb5c80c07"><div class="ttname"><a href="../../d3/d2e/fat_8c.html#ab464d0f8ffeaecce8050445bb5c80c07">FAT16_MAX</a></div><div class="ttdeci">#define FAT16_MAX</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d2e/fat_8c_source.html#l00031">fat.c:31</a></div></div>
<div class="ttc" id="afat_8c_html_acd0126d416190bf8b0f220ccf3de390b"><div class="ttname"><a href="../../d3/d2e/fat_8c.html#acd0126d416190bf8b0f220ccf3de390b">vfat_super_block::type</a></div><div class="ttdeci">union vfat_super_block::@1135 type</div></div>
<div class="ttc" id="afat_8c_html_aec13261cfd1c98a54d3566d13311b825"><div class="ttname"><a href="../../d3/d2e/fat_8c.html#aec13261cfd1c98a54d3566d13311b825">vfat_super_block::reserved_sct</a></div><div class="ttdeci">uint16_t reserved_sct</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d2e/fat_8c_source.html#l00045">fat.c:45</a></div></div>
<div class="ttc" id="afat_8c_html_af44c02eb171ee6f20e2c058bd3f9dc35"><div class="ttname"><a href="../../d3/d2e/fat_8c.html#af44c02eb171ee6f20e2c058bd3f9dc35">fat_partition_off</a></div><div class="ttdeci">#define fat_partition_off</div></div>
<div class="ttc" id="afat_8c_html_af4c1a4b357865762cae7ce76d2ef34d1"><div class="ttname"><a href="../../d3/d2e/fat_8c.html#af4c1a4b357865762cae7ce76d2ef34d1">vfat_super_block::fat_length</a></div><div class="ttdeci">uint16_t fat_length</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d2e/fat_8c_source.html#l00050">fat.c:50</a></div></div>
<div class="ttc" id="afat_8c_html_af7d86d65d48029b43c973dbb17863d1b"><div class="ttname"><a href="../../d3/d2e/fat_8c.html#af7d86d65d48029b43c973dbb17863d1b">vfat_super_block::boot_jump</a></div><div class="ttdeci">uint8_t boot_jump[3]</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d2e/fat_8c_source.html#l00041">fat.c:41</a></div></div>
<div class="ttc" id="afat_8c_html_afae9587b2b9c2649b6eb0dadaa415871"><div class="ttname"><a href="../../d3/d2e/fat_8c.html#afae9587b2b9c2649b6eb0dadaa415871">vfat_super_block::sector_size_bytes</a></div><div class="ttdeci">uint16_t sector_size_bytes</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d2e/fat_8c_source.html#l00043">fat.c:43</a></div></div>
<div class="ttc" id="afat_8c_html_afe2388cc5bf7f0469aff0e05bf9258ca"><div class="ttname"><a href="../../d3/d2e/fat_8c.html#afe2388cc5bf7f0469aff0e05bf9258ca">vfat_super_block::media</a></div><div class="ttdeci">uint8_t media</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d2e/fat_8c_source.html#l00049">fat.c:49</a></div></div>
<div class="ttc" id="afat_8c_html_d7/db1/structvfat__dir__entry"><div class="ttname"><a href="../../d3/d2e/fat_8c.html#d7/db1/structvfat__dir__entry">vfat_dir_entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d2e/fat_8c_source.html#l00082">fat.c:82</a></div></div>
<div class="ttc" id="afat_8c_html_dd/d19/structvfat__super__block"><div class="ttname"><a href="../../d3/d2e/fat_8c.html#dd/d19/structvfat__super__block">vfat_super_block</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d2e/fat_8c_source.html#l00040">fat.c:40</a></div></div>
<div class="ttc" id="arunsv_8c_html_ad45ef284071e5bd5627127837e94bc27"><div class="ttname"><a href="../../df/dde/runsv_8c.html#ad45ef284071e5bd5627127837e94bc27">dir</a></div><div class="ttdeci">#define dir</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dde/runsv_8c_source.html#l00121">runsv.c:121</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d3/d2e/fat_8c_source.html#l00041">vfat_super_block::boot_jump</a>, <a class="el" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>, <a class="el" href="../../d2/dd6/dd_8c.html#ac74ae34e9c58234aacabb6867b245c58">count</a>, <a class="el" href="../../d7/d8f/decompress__bunzip2_8c_source.html#l00047">dbg</a>, <a class="el" href="../../df/dde/runsv_8c_source.html#l00121">dir</a>, <a class="el" href="../../d3/d2e/fat_8c_source.html#l00047">vfat_super_block::dir_entries</a>, <a class="el" href="../../d3/d2e/fat_8c_source.html#l00031">FAT16_MAX</a>, <a class="el" href="../../d3/d2e/fat_8c_source.html#l00032">FAT32_MAX</a>, <a class="el" href="../../d3/d2e/fat_8c_source.html#l00050">vfat_super_block::fat_length</a>, <a class="el" href="../../d3/d2e/fat_8c.html#af44c02eb171ee6f20e2c058bd3f9dc35">fat_partition_off</a>, <a class="el" href="../../d3/d2e/fat_8c_source.html#l00046">vfat_super_block::fats</a>, <a class="el" href="../../d3/d2e/fat_8c_source.html#l00096">get_attr_volume_id()</a>, <a class="el" href="../../d3/d2e/fat_8c_source.html#l00052">vfat_super_block::heads</a>, <a class="el" href="../../d6/dff/diff_8c_source.html#l00176">label</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00109">le16_to_cpu</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00110">le32_to_cpu</a>, <a class="el" href="../../d3/d2e/fat_8c_source.html#l00049">vfat_super_block::media</a>, <a class="el" href="../../d3/d68/convert_8cpp_source.html#l00030">memcmp()</a>, <a class="el" href="../../d0/df4/Kernel_2include_2types_8h_source.html#l00037">NULL</a>, <a class="el" href="../../d3/d2e/fat_8c_source.html#l00045">vfat_super_block::reserved_sct</a>, <a class="el" href="../../d3/d2e/fat_8c_source.html#l00043">vfat_super_block::sector_size_bytes</a>, <a class="el" href="../../d3/d2e/fat_8c_source.html#l00048">vfat_super_block::sectors</a>, <a class="el" href="../../d3/d2e/fat_8c_source.html#l00044">vfat_super_block::sectors_per_cluster</a>, <a class="el" href="../../d3/d2e/fat_8c_source.html#l00042">vfat_super_block::sysid</a>, <a class="el" href="../../d3/d2e/fat_8c_source.html#l00054">vfat_super_block::total_sect</a>, <a class="el" href="../../d3/d2e/fat_8c.html#acd0126d416190bf8b0f220ccf3de390b">vfat_super_block::type</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00124">UUID_DOS</a>, <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00179">volume_id_get_buffer()</a>, <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00115">volume_id_set_label_string()</a>, and <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00135">volume_id_set_uuid()</a>.</p>

</div>
</div>
<a id="a450015ff93c29a5a78cad86aef7d0300"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a450015ff93c29a5a78cad86aef7d0300">&#9670;&nbsp;</a></span>volume_id_probe_xfs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a> volume_id_probe_xfs </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d4f/xfs_8c_source.html#l00044">44</a> of file <a class="el" href="../../d7/d4f/xfs_8c_source.html">xfs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;{</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#define off ((uint64_t)0)</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d7/d4f/xfs_8c.html#d9/db7/structxfs__super__block">xfs_super_block</a> *xs;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160; </div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <a class="code" href="../../d7/d8f/decompress__bunzip2_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;probing at offset 0x%llx&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>) <a class="code" href="../../d7/d4f/xfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a>);</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160; </div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    xs = <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#ad52c7b05017442dbe08091a85ef92710">volume_id_get_buffer</a>(<span class="keywordtype">id</span>, <a class="code" href="../../d7/d4f/xfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a>, 0x200);</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <span class="keywordflow">if</span> (xs == <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160; </div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d82/convert_8h.html#ac376fcece8fcc2d0f8b1cf3de18b10df">memcmp</a>(xs-&gt;<a class="code" href="../../d7/d4f/xfs_8c.html#a60c916767027aaa401011ae10b4c06c1">magic</a>, <span class="stringliteral">&quot;XFSB&quot;</span>, 4) != 0)</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160; </div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment">//  volume_id_set_label_raw(id, xs-&gt;fname, 12);</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#a3629b5eaf1943e2f4634bd5913959b04">volume_id_set_label_string</a>(<span class="keywordtype">id</span>, xs-&gt;<a class="code" href="../../d7/d4f/xfs_8c.html#a7913eaa059c86c3bca24972d9f129d2c">fname</a>, 12);</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#aaaf5289e506677e73ce13f40c67fb188">volume_id_set_uuid</a>(<span class="keywordtype">id</span>, xs-&gt;<a class="code" href="../../d7/d4f/xfs_8c.html#ae99e9a462fa1a6ade7110527c95e8531">uuid</a>, <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a72f809f0cc1f63120f83a9fe78f026f1a4bd0e1bee402481edbff5b037158c245">UUID_DCE</a>);</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160; </div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">//  volume_id_set_usage(id, VOLUME_ID_FILESYSTEM);</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    IF_FEATURE_BLKID_TYPE(id-&gt;type = <span class="stringliteral">&quot;xfs&quot;</span>;)</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160; </div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <a class="code" href="../../d8/d64/glob__loop_8c.html#a5f3f8891e3f4c9d8d7effae7eb271604">return</a> 0;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;}</div>
<div class="ttc" id="axfs_8c_html_a60c916767027aaa401011ae10b4c06c1"><div class="ttname"><a href="../../d7/d4f/xfs_8c.html#a60c916767027aaa401011ae10b4c06c1">xfs_super_block::magic</a></div><div class="ttdeci">uint8_t magic[4]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4f/xfs_8c_source.html#l00030">xfs.c:30</a></div></div>
<div class="ttc" id="axfs_8c_html_a7913eaa059c86c3bca24972d9f129d2c"><div class="ttname"><a href="../../d7/d4f/xfs_8c.html#a7913eaa059c86c3bca24972d9f129d2c">xfs_super_block::fname</a></div><div class="ttdeci">uint8_t fname[12]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4f/xfs_8c_source.html#l00037">xfs.c:37</a></div></div>
<div class="ttc" id="axfs_8c_html_aa8df4166084b06f1e80d3510e5dcf7e1"><div class="ttname"><a href="../../d7/d4f/xfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a></div><div class="ttdeci">#define off</div></div>
<div class="ttc" id="axfs_8c_html_ae99e9a462fa1a6ade7110527c95e8531"><div class="ttname"><a href="../../d7/d4f/xfs_8c.html#ae99e9a462fa1a6ade7110527c95e8531">xfs_super_block::uuid</a></div><div class="ttdeci">uint8_t uuid[16]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4f/xfs_8c_source.html#l00035">xfs.c:35</a></div></div>
<div class="ttc" id="axfs_8c_html_d9/db7/structxfs__super__block"><div class="ttname"><a href="../../d7/d4f/xfs_8c.html#d9/db7/structxfs__super__block">xfs_super_block</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4f/xfs_8c_source.html#l00029">xfs.c:29</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/d8f/decompress__bunzip2_8c_source.html#l00047">dbg</a>, <a class="el" href="../../d7/d4f/xfs_8c_source.html#l00037">xfs_super_block::fname</a>, <a class="el" href="../../d7/d4f/xfs_8c_source.html#l00030">xfs_super_block::magic</a>, <a class="el" href="../../d3/d68/convert_8cpp_source.html#l00030">memcmp()</a>, <a class="el" href="../../d0/df4/Kernel_2include_2types_8h_source.html#l00037">NULL</a>, <a class="el" href="../../d7/d4f/xfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a>, <a class="el" href="../../d7/d4f/xfs_8c_source.html#l00035">xfs_super_block::uuid</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00126">UUID_DCE</a>, <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00179">volume_id_get_buffer()</a>, <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00115">volume_id_set_label_string()</a>, and <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00135">volume_id_set_uuid()</a>.</p>

</div>
</div>
<a id="a3629b5eaf1943e2f4634bd5913959b04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3629b5eaf1943e2f4634bd5913959b04">&#9670;&nbsp;</a></span>volume_id_set_label_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void volume_id_set_label_string </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#a3cb4a16b0e8d6af0af86d4fd6ba5fd9d">uint8_t</a> *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00115">115</a> of file <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html">util.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;{</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160; </div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <a class="code" href="../../d3/d82/convert_8h.html#a309e07aa23e76adc2ad0830978663c45">memcpy</a>(id-&gt;<a class="code" href="../../dd/dd1/volume__id__internal_8h.html#aebf9c21fa3fc79b7e98aca176d1e1092">label</a>, <a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>, <a class="code" href="../../d2/dd6/dd_8c.html#ac74ae34e9c58234aacabb6867b245c58">count</a>);</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160; </div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="comment">/* remove trailing whitespace */</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> = <a class="code" href="../../d1/d45/apps_2base_2bash_2lib_2sh_2strnlen_8c.html#afc92d2231e45d19988c7894aa2a07f0c">strnlen</a>(id-&gt;<a class="code" href="../../dd/dd1/volume__id__internal_8h.html#aebf9c21fa3fc79b7e98aca176d1e1092">label</a>, <a class="code" href="../../d2/dd6/dd_8c.html#ac74ae34e9c58234aacabb6867b245c58">count</a>);</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keywordflow">while</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>--) {</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../d4/dcb/chartypes_8h.html#a0c009fd6c0f22a1da6995c59b701a58f">isspace</a>(id-&gt;<a class="code" href="../../dd/dd1/volume__id__internal_8h.html#aebf9c21fa3fc79b7e98aca176d1e1092">label</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>]))</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    }</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keywordtype">id</span>-&gt;label[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>+1] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;}</div>
<div class="ttc" id="aapps_2base_2bash_2lib_2sh_2strnlen_8c_html_afc92d2231e45d19988c7894aa2a07f0c"><div class="ttname"><a href="../../d1/d45/apps_2base_2bash_2lib_2sh_2strnlen_8c.html#afc92d2231e45d19988c7894aa2a07f0c">strnlen</a></div><div class="ttdeci">size_t strnlen(const char *s, size_t maxlen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d45/apps_2base_2bash_2lib_2sh_2strnlen_8c_source.html#l00038">strnlen.c:38</a></div></div>
<div class="ttc" id="achartypes_8h_html_a0c009fd6c0f22a1da6995c59b701a58f"><div class="ttname"><a href="../../d4/dcb/chartypes_8h.html#a0c009fd6c0f22a1da6995c59b701a58f">isspace</a></div><div class="ttdeci">#define isspace(c)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dcb/chartypes_8h_source.html#l00041">chartypes.h:41</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>, <a class="el" href="../../d2/dd6/dd_8c.html#ac74ae34e9c58234aacabb6867b245c58">count</a>, <a class="el" href="../../dd/d71/gettextP_8h_source.html#l00074">i</a>, <a class="el" href="../../d4/dcb/chartypes_8h_source.html#l00041">isspace</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00078">volume_id::label</a>, <a class="el" href="../../d3/d82/convert_8h_source.html#l00125">memcpy</a>, and <a class="el" href="../../d1/d45/apps_2base_2bash_2lib_2sh_2strnlen_8c_source.html#l00038">strnlen()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/dbe/bcache_8c_source.html#l00089">volume_id_probe_bcache()</a>, <a class="el" href="../../d2/db6/btrfs_8c_source.html#l00087">volume_id_probe_btrfs()</a>, <a class="el" href="../../da/d86/cramfs_8c_source.html#l00044">volume_id_probe_cramfs()</a>, <a class="el" href="../../dc/de1/erofs_8c_source.html#l00045">volume_id_probe_erofs()</a>, <a class="el" href="../../d5/d79/apps_2base_2busybox_2util-linux_2volume__id_2ext_8c_source.html#l00032">volume_id_probe_ext()</a>, <a class="el" href="../../de/dcd/hfs_8c_source.html#l00161">volume_id_probe_hfs_hfsplus()</a>, <a class="el" href="../../d2/d29/iso9660_8c_source.html#l00056">volume_id_probe_iso9660()</a>, <a class="el" href="../../d8/d98/jfs_8c_source.html#l00044">volume_id_probe_jfs()</a>, <a class="el" href="../../d6/dfb/linux__swap_8c_source.html#l00040">volume_id_probe_linux_swap()</a>, <a class="el" href="../../d7/d2c/nilfs_8c_source.html#l00087">volume_id_probe_nilfs()</a>, <a class="el" href="../../db/d06/ocfs2_8c_source.html#l00089">volume_id_probe_ocfs2()</a>, <a class="el" href="../../de/dee/reiserfs_8c_source.html#l00057">volume_id_probe_reiserfs()</a>, <a class="el" href="../../d6/d70/romfs_8c_source.html#l00036">volume_id_probe_romfs()</a>, <a class="el" href="../../dc/d2d/sysv_8c_source.html#l00091">volume_id_probe_sysv()</a>, <a class="el" href="../../d2/d3a/udf_8c_source.html#l00064">volume_id_probe_udf()</a>, <a class="el" href="../../d3/d2e/fat_8c_source.html#l00128">volume_id_probe_vfat()</a>, and <a class="el" href="../../d7/d4f/xfs_8c_source.html#l00044">volume_id_probe_xfs()</a>.</p>

</div>
</div>
<a id="a647a5f7f037d4d3506b2811021805bda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a647a5f7f037d4d3506b2811021805bda">&#9670;&nbsp;</a></span>volume_id_set_label_unicode16()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void volume_id_set_label_unicode16 </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#a3cb4a16b0e8d6af0af86d4fd6ba5fd9d">uint8_t</a> *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#aceb52d5e58265d474290d1e17bcf1716">endian</a>&#160;</td>
          <td class="paramname"><em>endianess</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00130">130</a> of file <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html">util.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;{</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <a class="code" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c.html#a6e8f2e3c79aedadd5ee90b7b970378a5">volume_id_set_unicode16</a>(id-&gt;<a class="code" href="../../dd/dd1/volume__id__internal_8h.html#aebf9c21fa3fc79b7e98aca176d1e1092">label</a>, <span class="keyword">sizeof</span>(id-&gt;<a class="code" href="../../dd/dd1/volume__id__internal_8h.html#aebf9c21fa3fc79b7e98aca176d1e1092">label</a>), <a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>, endianess, <a class="code" href="../../d2/dd6/dd_8c.html#ac74ae34e9c58234aacabb6867b245c58">count</a>);</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>, <a class="el" href="../../d2/dd6/dd_8c.html#ac74ae34e9c58234aacabb6867b245c58">count</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00078">volume_id::label</a>, and <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00023">volume_id_set_unicode16()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d54/exfat_8c_source.html#l00075">volume_id_probe_exfat()</a>, <a class="el" href="../../d2/d8e/f2fs_8c_source.html#l00066">volume_id_probe_f2fs()</a>, <a class="el" href="../../de/dcd/hfs_8c_source.html#l00161">volume_id_probe_hfs_hfsplus()</a>, <a class="el" href="../../d5/d8d/ntfs_8c_source.html#l00093">volume_id_probe_ntfs()</a>, and <a class="el" href="../../d2/d3a/udf_8c_source.html#l00064">volume_id_probe_udf()</a>.</p>

</div>
</div>
<a id="a6e8f2e3c79aedadd5ee90b7b970378a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e8f2e3c79aedadd5ee90b7b970378a5">&#9670;&nbsp;</a></span>volume_id_set_unicode16()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void volume_id_set_unicode16 </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#a3cb4a16b0e8d6af0af86d4fd6ba5fd9d">uint8_t</a> *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#aceb52d5e58265d474290d1e17bcf1716">endian</a>&#160;</td>
          <td class="paramname"><em>endianess</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00023">23</a> of file <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html">util.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;{</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>, <a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a>;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="../../d8/d64/glob__loop_8c.html#a2019d0836036f2693a231fe5c7c65e20">c</a>;</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160; </div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    <a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a> = 0;</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> = 0; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> + 2 &lt;= <a class="code" href="../../d2/dd6/dd_8c.html#ac74ae34e9c58234aacabb6867b245c58">count</a>; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> += 2) {</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;        <span class="keywordflow">if</span> (endianess == <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#aceb52d5e58265d474290d1e17bcf1716a662ed4b51721a45f07d645d4ca099a61">LE</a>)</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;            <a class="code" href="../../d8/d64/glob__loop_8c.html#a2019d0836036f2693a231fe5c7c65e20">c</a> = (<a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>+1] &lt;&lt; 8) | <a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>];</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;            <a class="code" href="../../d8/d64/glob__loop_8c.html#a2019d0836036f2693a231fe5c7c65e20">c</a> = (<a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>] &lt;&lt; 8) | <a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>+1];</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d8/d64/glob__loop_8c.html#a2019d0836036f2693a231fe5c7c65e20">c</a> == 0)</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a>+1 &gt;= <a class="code" href="../../d1/dc0/multiboot_8h.html#a6de3a6d27a7e07942958b912d39792e6">len</a>)</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d8/d64/glob__loop_8c.html#a2019d0836036f2693a231fe5c7c65e20">c</a> &lt; 0x80) {</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;            <span class="comment">/* 0xxxxxxx */</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;            <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a3cb4a16b0e8d6af0af86d4fd6ba5fd9d">uint8_t</a> topbits = 0xc0;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a>+2 &gt;= <a class="code" href="../../d1/dc0/multiboot_8h.html#a6de3a6d27a7e07942958b912d39792e6">len</a>)</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d8/d64/glob__loop_8c.html#a2019d0836036f2693a231fe5c7c65e20">c</a> &lt; 0x800) {</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;                <span class="comment">/* 110yyyxx 10xxxxxx */</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a>+3 &gt;= <a class="code" href="../../d1/dc0/multiboot_8h.html#a6de3a6d27a7e07942958b912d39792e6">len</a>)</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;                <span class="comment">/* 1110yyyy 10yyyyxx 10xxxxxx */</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;                <a class="code" href="../../de/d72/hash-string_8h.html#a537825d894fc8d6a786f28a99ce8af2c">str</a>[<a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a>++] = (<a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a3cb4a16b0e8d6af0af86d4fd6ba5fd9d">uint8_t</a>) (0xe0 | (<a class="code" href="../../d8/d64/glob__loop_8c.html#a2019d0836036f2693a231fe5c7c65e20">c</a> &gt;&gt; 12));</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;                topbits = 0x80;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;            }</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;            <a class="code" href="../../de/d72/hash-string_8h.html#a537825d894fc8d6a786f28a99ce8af2c">str</a>[<a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a>++] = (<a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a3cb4a16b0e8d6af0af86d4fd6ba5fd9d">uint8_t</a>) (topbits | ((<a class="code" href="../../d8/d64/glob__loop_8c.html#a2019d0836036f2693a231fe5c7c65e20">c</a> &gt;&gt; 6) &amp; 0x3f));</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;            <a class="code" href="../../d8/d64/glob__loop_8c.html#a2019d0836036f2693a231fe5c7c65e20">c</a> = 0x80 | (<a class="code" href="../../d8/d64/glob__loop_8c.html#a2019d0836036f2693a231fe5c7c65e20">c</a> &amp; 0x3f);</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;        }</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        <a class="code" href="../../de/d72/hash-string_8h.html#a537825d894fc8d6a786f28a99ce8af2c">str</a>[<a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a>++] = (<a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a3cb4a16b0e8d6af0af86d4fd6ba5fd9d">uint8_t</a>) <a class="code" href="../../d8/d64/glob__loop_8c.html#a2019d0836036f2693a231fe5c7c65e20">c</a>;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    }</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <a class="code" href="../../de/d72/hash-string_8h.html#a537825d894fc8d6a786f28a99ce8af2c">str</a>[<a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a>] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;}</div>
<div class="ttc" id="aglob__loop_8c_html_a2019d0836036f2693a231fe5c7c65e20"><div class="ttname"><a href="../../d8/d64/glob__loop_8c.html#a2019d0836036f2693a231fe5c7c65e20">c</a></div><div class="ttdeci">register GCHAR c</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d64/glob__loop_8c_source.html#l00028">glob_loop.c:26</a></div></div>
<div class="ttc" id="ahash-string_8h_html_a537825d894fc8d6a786f28a99ce8af2c"><div class="ttname"><a href="../../de/d72/hash-string_8h.html#a537825d894fc8d6a786f28a99ce8af2c">str</a></div><div class="ttdeci">const char * str</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d72/hash-string_8h_source.html#l00045">hash-string.h:45</a></div></div>
<div class="ttc" id="amusl_2src_2prng_2random_8c_html_a37d972ae0b47b9099e30983131d31916"><div class="ttname"><a href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a></div><div class="ttdeci">static int j</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da2/musl_2src_2prng_2random_8c_source.html#l00024">random.c:24</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>, <a class="el" href="../../d8/d64/glob__loop_8c_source.html#l00026">c</a>, <a class="el" href="../../d2/dd6/dd_8c.html#ac74ae34e9c58234aacabb6867b245c58">count</a>, <a class="el" href="../../dd/d71/gettextP_8h_source.html#l00074">i</a>, <a class="el" href="../../dc/da2/musl_2src_2prng_2random_8c_source.html#l00024">j</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00131">LE</a>, <a class="el" href="../../d1/dc0/multiboot_8h_source.html#l00002">len</a>, and <a class="el" href="../../de/d72/hash-string_8h_source.html#l00045">str</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d29/iso9660_8c_source.html#l00056">volume_id_probe_iso9660()</a>, and <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00130">volume_id_set_label_unicode16()</a>.</p>

</div>
</div>
<a id="aaaf5289e506677e73ce13f40c67fb188"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaaf5289e506677e73ce13f40c67fb188">&#9670;&nbsp;</a></span>volume_id_set_uuid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void volume_id_set_uuid </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#db/dc4/structvolume__id">volume_id</a> *&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#a3cb4a16b0e8d6af0af86d4fd6ba5fd9d">uint8_t</a> *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../dd/dd1/volume__id__internal_8h.html#a72f809f0cc1f63120f83a9fe78f026f1">uuid_format</a>&#160;</td>
          <td class="paramname"><em>format</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html#l00135">135</a> of file <a class="el" href="../../d4/d27/busybox_2util-linux_2volume__id_2util_8c_source.html">util.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;{</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="../../d2/dd6/dd_8c.html#ac74ae34e9c58234aacabb6867b245c58">count</a> = (<a class="code" href="../../d7/dd7/libbb_8h.html#ad09bf069f1dc789b35e313c3e2748329">format</a> == <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a72f809f0cc1f63120f83a9fe78f026f1afeab423d9f83201f36fdf94d3fbc1217">UUID_DCE_STRING</a> ? <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a36b3015551826f6436e99a24610b2257">VOLUME_ID_UUID_SIZE</a> : 4 &lt;&lt; <a class="code" href="../../d7/dd7/libbb_8h.html#ad09bf069f1dc789b35e313c3e2748329">format</a>);</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160; </div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment">//  memcpy(id-&gt;uuid_raw, buf, count);</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment">//  id-&gt;uuid_raw_len = count;</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160; </div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="comment">/* if set, create string in the same format, the native platform uses */</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> = 0; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> &lt; <a class="code" href="../../d2/dd6/dd_8c.html#ac74ae34e9c58234aacabb6867b245c58">count</a>; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>++)</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>] != 0)</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;            <span class="keywordflow">goto</span> set;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="keywordflow">return</span>; <span class="comment">/* all bytes are zero, leave it empty (&quot;&quot;) */</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160; </div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;set:</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="../../d7/dd7/libbb_8h.html#ad09bf069f1dc789b35e313c3e2748329">format</a>) {</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a72f809f0cc1f63120f83a9fe78f026f1a979167e82bd9d4c12bd02a8bd2d35a44">UUID_DOS</a>:</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        <a class="code" href="../../dc/df9/Kernel_2include_2printf_8h.html#a77dac04ed12a16543832b623c7778729">sprintf</a>(id-&gt;<a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a562b7db1b283bafd3a2352cc8738c554">uuid</a>, <span class="stringliteral">&quot;%02X%02X-%02X%02X&quot;</span>,</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;            <a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>[3], <a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>[2], <a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>[1], <a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>[0]);</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a72f809f0cc1f63120f83a9fe78f026f1a01551a287f0e60de3e4b01a07bddf694">UUID_NTFS</a>:</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        <a class="code" href="../../dc/df9/Kernel_2include_2printf_8h.html#a77dac04ed12a16543832b623c7778729">sprintf</a>(id-&gt;<a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a562b7db1b283bafd3a2352cc8738c554">uuid</a>, <span class="stringliteral">&quot;%02X%02X%02X%02X%02X%02X%02X%02X&quot;</span>,</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;            <a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>[7], <a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>[6], <a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>[5], <a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>[4],</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;            <a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>[3], <a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>[2], <a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>[1], <a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>[0]);</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a72f809f0cc1f63120f83a9fe78f026f1a4bd0e1bee402481edbff5b037158c245">UUID_DCE</a>:</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        <a class="code" href="../../dc/df9/Kernel_2include_2printf_8h.html#a77dac04ed12a16543832b623c7778729">sprintf</a>(id-&gt;<a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a562b7db1b283bafd3a2352cc8738c554">uuid</a>,</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;            <span class="stringliteral">&quot;%02x%02x%02x%02x-%02x%02x-%02x%02x-%02x%02x-%02x%02x%02x%02x%02x%02x&quot;</span>,</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;            <a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>[0], <a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>[1], <a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>[2], <a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>[3],</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;            <a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>[4], <a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>[5],</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;            <a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>[6], <a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>[7],</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;            <a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>[8], <a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>[9],</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;            <a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>[10], <a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>[11], <a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>[12], <a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>[13], <a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>[14], <a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>[15]);</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a72f809f0cc1f63120f83a9fe78f026f1afeab423d9f83201f36fdf94d3fbc1217">UUID_DCE_STRING</a>:</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        <a class="code" href="../../d3/d82/convert_8h.html#a309e07aa23e76adc2ad0830978663c45">memcpy</a>(id-&gt;<a class="code" href="../../dd/dd1/volume__id__internal_8h.html#a562b7db1b283bafd3a2352cc8738c554">uuid</a>, <a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>, <a class="code" href="../../d2/dd6/dd_8c.html#ac74ae34e9c58234aacabb6867b245c58">count</a>);</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        <span class="keywordtype">id</span>-&gt;uuid[<a class="code" href="../../d2/dd6/dd_8c.html#ac74ae34e9c58234aacabb6867b245c58">count</a>] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    }</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;}</div>
<div class="ttc" id="aKernel_2include_2printf_8h_html_a77dac04ed12a16543832b623c7778729"><div class="ttname"><a href="../../dc/df9/Kernel_2include_2printf_8h.html#a77dac04ed12a16543832b623c7778729">sprintf</a></div><div class="ttdeci">PRINTF_VISIBILITY int sprintf(char *s, const char *format,...) ATTR_PRINTF(2</div></div>
<div class="ttc" id="alibbb_8h_html_ad09bf069f1dc789b35e313c3e2748329"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#ad09bf069f1dc789b35e313c3e2748329">format</a></div><div class="ttdeci">void format(printf, 1, 2))) FAST_FUNC</div></div>
<div class="ttc" id="avolume__id__internal_8h_html_a36b3015551826f6436e99a24610b2257"><div class="ttname"><a href="../../dd/dd1/volume__id__internal_8h.html#a36b3015551826f6436e99a24610b2257">VOLUME_ID_UUID_SIZE</a></div><div class="ttdeci">#define VOLUME_ID_UUID_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd1/volume__id__internal_8h_source.html#l00034">volume_id_internal.h:34</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>, <a class="el" href="../../d2/dd6/dd_8c.html#ac74ae34e9c58234aacabb6867b245c58">count</a>, <a class="el" href="../../d7/dd7/libbb_8h.html#ad09bf069f1dc789b35e313c3e2748329">format()</a>, <a class="el" href="../../dd/d71/gettextP_8h_source.html#l00074">i</a>, <a class="el" href="../../d3/d82/convert_8h_source.html#l00125">memcpy</a>, <a class="el" href="../../dc/df9/Kernel_2include_2printf_8h.html#a77dac04ed12a16543832b623c7778729">sprintf()</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00082">volume_id::uuid</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00126">UUID_DCE</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00127">UUID_DCE_STRING</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00124">UUID_DOS</a>, <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00125">UUID_NTFS</a>, and <a class="el" href="../../dd/dd1/volume__id__internal_8h_source.html#l00034">VOLUME_ID_UUID_SIZE</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/dcd/hfs_8c_source.html#l00140">hfs_set_uuid()</a>, <a class="el" href="../../d8/dbe/bcache_8c_source.html#l00089">volume_id_probe_bcache()</a>, <a class="el" href="../../d2/db6/btrfs_8c_source.html#l00087">volume_id_probe_btrfs()</a>, <a class="el" href="../../dc/de1/erofs_8c_source.html#l00045">volume_id_probe_erofs()</a>, <a class="el" href="../../dd/d54/exfat_8c_source.html#l00075">volume_id_probe_exfat()</a>, <a class="el" href="../../d5/d79/apps_2base_2busybox_2util-linux_2volume__id_2ext_8c_source.html#l00032">volume_id_probe_ext()</a>, <a class="el" href="../../d2/d8e/f2fs_8c_source.html#l00066">volume_id_probe_f2fs()</a>, <a class="el" href="../../d8/d98/jfs_8c_source.html#l00044">volume_id_probe_jfs()</a>, <a class="el" href="../../d7/d8f/linux__raid_8c_source.html#l00051">volume_id_probe_linux_raid()</a>, <a class="el" href="../../d6/dfb/linux__swap_8c_source.html#l00040">volume_id_probe_linux_swap()</a>, <a class="el" href="../../d7/d59/luks_8c_source.html#l00089">volume_id_probe_luks()</a>, <a class="el" href="../../d7/d2c/nilfs_8c_source.html#l00087">volume_id_probe_nilfs()</a>, <a class="el" href="../../d5/d8d/ntfs_8c_source.html#l00093">volume_id_probe_ntfs()</a>, <a class="el" href="../../db/d06/ocfs2_8c_source.html#l00089">volume_id_probe_ocfs2()</a>, <a class="el" href="../../de/dee/reiserfs_8c_source.html#l00057">volume_id_probe_reiserfs()</a>, <a class="el" href="../../d2/d42/ubifs_8c_source.html#l00105">volume_id_probe_ubifs()</a>, <a class="el" href="../../d3/d2e/fat_8c_source.html#l00128">volume_id_probe_vfat()</a>, and <a class="el" href="../../d7/d4f/xfs_8c_source.html#l00044">volume_id_probe_xfs()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_97d86ce2f18c7710ea326fa47777d7d7.html">Userspace</a></li><li class="navelem"><a class="el" href="../../dir_0276b9b7d706caf6f8b101518c949f15.html">apps</a></li><li class="navelem"><a class="el" href="../../dir_825a5fc57f8484006531699dcb39fa0d.html">base</a></li><li class="navelem"><a class="el" href="../../dir_87e330aa425985c7f88c27f5b355b004.html">busybox</a></li><li class="navelem"><a class="el" href="../../dir_b5fda52074e97d835ba3eee7681da23e.html">util-linux</a></li><li class="navelem"><a class="el" href="../../dir_2fcc0f692e61fcfee19a14449ff1d60e.html">volume_id</a></li><li class="navelem"><a class="el" href="../../dd/dd1/volume__id__internal_8h.html">volume_id_internal.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
