<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Fennix: Userspace/apps/base/busybox/networking/nbd-client.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="../../custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Fennix
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
   <div id="projectbrief">Opeating System from scratch made in C and C++</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d2/db6/nbd-client_8c.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">nbd-client.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="../../d7/dd7/libbb_8h_source.html">libbb.h</a>&quot;</code><br />
<code>#include &lt;<a class="el" href="../../d8/da5/tcp_8h_source.html">netinet/tcp.h</a>&gt;</code><br />
<code>#include &lt;linux/fs.h&gt;</code><br />
<code>#include &lt;getopt.h&gt;</code><br />
</div>
<p><a href="../../d2/db6/nbd-client_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:acba69b1ef9285369e2513bb9c734ebc0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/db6/nbd-client_8c.html#acba69b1ef9285369e2513bb9c734ebc0">NBD_SET_SOCK</a>&#160;&#160;&#160;<a class="el" href="../../d9/ded/arch_2sh_2bits_2ioctl_8h.html#ad9c5081aab350191c4822e27c0508f1f">_IO</a>(0xab, 0)</td></tr>
<tr class="separator:acba69b1ef9285369e2513bb9c734ebc0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f55d436fcfabb35561673777625087b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/db6/nbd-client_8c.html#a3f55d436fcfabb35561673777625087b">NBD_SET_BLKSIZE</a>&#160;&#160;&#160;<a class="el" href="../../d9/ded/arch_2sh_2bits_2ioctl_8h.html#ad9c5081aab350191c4822e27c0508f1f">_IO</a>(0xab, 1)</td></tr>
<tr class="separator:a3f55d436fcfabb35561673777625087b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6991424906d526b2eac5251ff17c501"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/db6/nbd-client_8c.html#ab6991424906d526b2eac5251ff17c501">NBD_SET_SIZE</a>&#160;&#160;&#160;<a class="el" href="../../d9/ded/arch_2sh_2bits_2ioctl_8h.html#ad9c5081aab350191c4822e27c0508f1f">_IO</a>(0xab, 2)</td></tr>
<tr class="separator:ab6991424906d526b2eac5251ff17c501"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8022df854c1c3199c84fe731892dad03"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/db6/nbd-client_8c.html#a8022df854c1c3199c84fe731892dad03">NBD_DO_IT</a>&#160;&#160;&#160;<a class="el" href="../../d9/ded/arch_2sh_2bits_2ioctl_8h.html#ad9c5081aab350191c4822e27c0508f1f">_IO</a>(0xab, 3)</td></tr>
<tr class="separator:a8022df854c1c3199c84fe731892dad03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4629053b0c5499f1a1ea6257a7b720af"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/db6/nbd-client_8c.html#a4629053b0c5499f1a1ea6257a7b720af">NBD_CLEAR_SOCK</a>&#160;&#160;&#160;<a class="el" href="../../d9/ded/arch_2sh_2bits_2ioctl_8h.html#ad9c5081aab350191c4822e27c0508f1f">_IO</a>(0xab, 4)</td></tr>
<tr class="separator:a4629053b0c5499f1a1ea6257a7b720af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8486d097b9045bd3db9c676b576ec91"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/db6/nbd-client_8c.html#ae8486d097b9045bd3db9c676b576ec91">NBD_CLEAR_QUEUE</a>&#160;&#160;&#160;<a class="el" href="../../d9/ded/arch_2sh_2bits_2ioctl_8h.html#ad9c5081aab350191c4822e27c0508f1f">_IO</a>(0xab, 5)</td></tr>
<tr class="separator:ae8486d097b9045bd3db9c676b576ec91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae62c3248b47767efa62b6b2399c493dc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/db6/nbd-client_8c.html#ae62c3248b47767efa62b6b2399c493dc">NBD_PRINT_DEBUG</a>&#160;&#160;&#160;<a class="el" href="../../d9/ded/arch_2sh_2bits_2ioctl_8h.html#ad9c5081aab350191c4822e27c0508f1f">_IO</a>(0xab, 6)</td></tr>
<tr class="separator:ae62c3248b47767efa62b6b2399c493dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7c13bba5b1dda692597bf239557a11b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/db6/nbd-client_8c.html#ac7c13bba5b1dda692597bf239557a11b">NBD_SET_SIZE_BLOCKS</a>&#160;&#160;&#160;<a class="el" href="../../d9/ded/arch_2sh_2bits_2ioctl_8h.html#ad9c5081aab350191c4822e27c0508f1f">_IO</a>(0xab, 7)</td></tr>
<tr class="separator:ac7c13bba5b1dda692597bf239557a11b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b526fee81512a2ba9559b490979f696"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/db6/nbd-client_8c.html#a6b526fee81512a2ba9559b490979f696">NBD_DISCONNECT</a>&#160;&#160;&#160;<a class="el" href="../../d9/ded/arch_2sh_2bits_2ioctl_8h.html#ad9c5081aab350191c4822e27c0508f1f">_IO</a>(0xab, 8)</td></tr>
<tr class="separator:a6b526fee81512a2ba9559b490979f696"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a804b974a9b1b9c4b4a815674d0f2f053"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/db6/nbd-client_8c.html#a804b974a9b1b9c4b4a815674d0f2f053">NBD_SET_TIMEOUT</a>&#160;&#160;&#160;<a class="el" href="../../d9/ded/arch_2sh_2bits_2ioctl_8h.html#ad9c5081aab350191c4822e27c0508f1f">_IO</a>(0xab, 9)</td></tr>
<tr class="separator:a804b974a9b1b9c4b4a815674d0f2f053"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af279bf65a4d536625df3fb23e8337b93"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/db6/nbd-client_8c.html#af279bf65a4d536625df3fb23e8337b93">NBD_SET_FLAGS</a>&#160;&#160;&#160;<a class="el" href="../../d9/ded/arch_2sh_2bits_2ioctl_8h.html#ad9c5081aab350191c4822e27c0508f1f">_IO</a>(0xab, 10)</td></tr>
<tr class="separator:af279bf65a4d536625df3fb23e8337b93"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a929d6ab80dc751b4f26a138bf730803b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/db6/nbd-client_8c.html#a929d6ab80dc751b4f26a138bf730803b">nbdclient_main</a> (int <a class="el" href="../../d9/dd0/bash_2test_8c.html#ad1447518f4372828b8435ae82e48499e">argc</a>, char **<a class="el" href="../../d9/dd0/bash_2test_8c.html#af2efa898e9eed6fe6715279cb1ec35b0">argv</a>) <a class="el" href="../../d7/dd7/libbb_8h.html#a50bff3dbf83ecbd070954b228becba4e">MAIN_EXTERNALLY_VISIBLE</a></td></tr>
<tr class="separator:a929d6ab80dc751b4f26a138bf730803b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ae8486d097b9045bd3db9c676b576ec91"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8486d097b9045bd3db9c676b576ec91">&#9670;&nbsp;</a></span>NBD_CLEAR_QUEUE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NBD_CLEAR_QUEUE&#160;&#160;&#160;<a class="el" href="../../d9/ded/arch_2sh_2bits_2ioctl_8h.html#ad9c5081aab350191c4822e27c0508f1f">_IO</a>(0xab, 5)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/db6/nbd-client_8c_source.html#l00026">26</a> of file <a class="el" href="../../d2/db6/nbd-client_8c_source.html">nbd-client.c</a>.</p>

</div>
</div>
<a id="a4629053b0c5499f1a1ea6257a7b720af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4629053b0c5499f1a1ea6257a7b720af">&#9670;&nbsp;</a></span>NBD_CLEAR_SOCK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NBD_CLEAR_SOCK&#160;&#160;&#160;<a class="el" href="../../d9/ded/arch_2sh_2bits_2ioctl_8h.html#ad9c5081aab350191c4822e27c0508f1f">_IO</a>(0xab, 4)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/db6/nbd-client_8c_source.html#l00025">25</a> of file <a class="el" href="../../d2/db6/nbd-client_8c_source.html">nbd-client.c</a>.</p>

</div>
</div>
<a id="a6b526fee81512a2ba9559b490979f696"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b526fee81512a2ba9559b490979f696">&#9670;&nbsp;</a></span>NBD_DISCONNECT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NBD_DISCONNECT&#160;&#160;&#160;<a class="el" href="../../d9/ded/arch_2sh_2bits_2ioctl_8h.html#ad9c5081aab350191c4822e27c0508f1f">_IO</a>(0xab, 8)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/db6/nbd-client_8c_source.html#l00029">29</a> of file <a class="el" href="../../d2/db6/nbd-client_8c_source.html">nbd-client.c</a>.</p>

</div>
</div>
<a id="a8022df854c1c3199c84fe731892dad03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8022df854c1c3199c84fe731892dad03">&#9670;&nbsp;</a></span>NBD_DO_IT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NBD_DO_IT&#160;&#160;&#160;<a class="el" href="../../d9/ded/arch_2sh_2bits_2ioctl_8h.html#ad9c5081aab350191c4822e27c0508f1f">_IO</a>(0xab, 3)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/db6/nbd-client_8c_source.html#l00024">24</a> of file <a class="el" href="../../d2/db6/nbd-client_8c_source.html">nbd-client.c</a>.</p>

</div>
</div>
<a id="ae62c3248b47767efa62b6b2399c493dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae62c3248b47767efa62b6b2399c493dc">&#9670;&nbsp;</a></span>NBD_PRINT_DEBUG</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NBD_PRINT_DEBUG&#160;&#160;&#160;<a class="el" href="../../d9/ded/arch_2sh_2bits_2ioctl_8h.html#ad9c5081aab350191c4822e27c0508f1f">_IO</a>(0xab, 6)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/db6/nbd-client_8c_source.html#l00027">27</a> of file <a class="el" href="../../d2/db6/nbd-client_8c_source.html">nbd-client.c</a>.</p>

</div>
</div>
<a id="a3f55d436fcfabb35561673777625087b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f55d436fcfabb35561673777625087b">&#9670;&nbsp;</a></span>NBD_SET_BLKSIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NBD_SET_BLKSIZE&#160;&#160;&#160;<a class="el" href="../../d9/ded/arch_2sh_2bits_2ioctl_8h.html#ad9c5081aab350191c4822e27c0508f1f">_IO</a>(0xab, 1)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/db6/nbd-client_8c_source.html#l00022">22</a> of file <a class="el" href="../../d2/db6/nbd-client_8c_source.html">nbd-client.c</a>.</p>

</div>
</div>
<a id="af279bf65a4d536625df3fb23e8337b93"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af279bf65a4d536625df3fb23e8337b93">&#9670;&nbsp;</a></span>NBD_SET_FLAGS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NBD_SET_FLAGS&#160;&#160;&#160;<a class="el" href="../../d9/ded/arch_2sh_2bits_2ioctl_8h.html#ad9c5081aab350191c4822e27c0508f1f">_IO</a>(0xab, 10)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/db6/nbd-client_8c_source.html#l00031">31</a> of file <a class="el" href="../../d2/db6/nbd-client_8c_source.html">nbd-client.c</a>.</p>

</div>
</div>
<a id="ab6991424906d526b2eac5251ff17c501"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6991424906d526b2eac5251ff17c501">&#9670;&nbsp;</a></span>NBD_SET_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NBD_SET_SIZE&#160;&#160;&#160;<a class="el" href="../../d9/ded/arch_2sh_2bits_2ioctl_8h.html#ad9c5081aab350191c4822e27c0508f1f">_IO</a>(0xab, 2)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/db6/nbd-client_8c_source.html#l00023">23</a> of file <a class="el" href="../../d2/db6/nbd-client_8c_source.html">nbd-client.c</a>.</p>

</div>
</div>
<a id="ac7c13bba5b1dda692597bf239557a11b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac7c13bba5b1dda692597bf239557a11b">&#9670;&nbsp;</a></span>NBD_SET_SIZE_BLOCKS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NBD_SET_SIZE_BLOCKS&#160;&#160;&#160;<a class="el" href="../../d9/ded/arch_2sh_2bits_2ioctl_8h.html#ad9c5081aab350191c4822e27c0508f1f">_IO</a>(0xab, 7)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/db6/nbd-client_8c_source.html#l00028">28</a> of file <a class="el" href="../../d2/db6/nbd-client_8c_source.html">nbd-client.c</a>.</p>

</div>
</div>
<a id="acba69b1ef9285369e2513bb9c734ebc0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acba69b1ef9285369e2513bb9c734ebc0">&#9670;&nbsp;</a></span>NBD_SET_SOCK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NBD_SET_SOCK&#160;&#160;&#160;<a class="el" href="../../d9/ded/arch_2sh_2bits_2ioctl_8h.html#ad9c5081aab350191c4822e27c0508f1f">_IO</a>(0xab, 0)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/db6/nbd-client_8c_source.html#l00021">21</a> of file <a class="el" href="../../d2/db6/nbd-client_8c_source.html">nbd-client.c</a>.</p>

</div>
</div>
<a id="a804b974a9b1b9c4b4a815674d0f2f053"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a804b974a9b1b9c4b4a815674d0f2f053">&#9670;&nbsp;</a></span>NBD_SET_TIMEOUT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NBD_SET_TIMEOUT&#160;&#160;&#160;<a class="el" href="../../d9/ded/arch_2sh_2bits_2ioctl_8h.html#ad9c5081aab350191c4822e27c0508f1f">_IO</a>(0xab, 9)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/db6/nbd-client_8c_source.html#l00030">30</a> of file <a class="el" href="../../d2/db6/nbd-client_8c_source.html">nbd-client.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a929d6ab80dc751b4f26a138bf730803b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a929d6ab80dc751b4f26a138bf730803b">&#9670;&nbsp;</a></span>nbdclient_main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nbdclient_main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>argv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/db6/nbd-client_8c_source.html#l00057">57</a> of file <a class="el" href="../../d2/db6/nbd-client_8c_source.html">nbd-client.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;{</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">#if BB_MMU</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="keywordtype">bool</span> nofork;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="keywordtype">bool</span> opt_d;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="keywordtype">bool</span> opt_p;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *host, *<a class="code" href="../../d1/d4c/traceroute_8c.html#a2ed8e46b717479f8e2ef47a52d28d9ca">port</a>, *<a class="code" href="../../d4/dcd/nmeter_8c.html#a8059c3b19eb356cf729e5d25b139647e">device</a>;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *name;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="keywordtype">unsigned</span> blksize, size_blocks;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="../../d9/dbf/nc_8c.html#aee95051bab9d52640b37995884ab6979">timeout</a>;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="keywordtype">int</span> ch;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="keyword">struct </span>nbd_header_t {</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        <a class="code" href="../../d0/d18/ArithmeticOperations_8c.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a> magic1; <span class="comment">// &quot;NBDMAGIC&quot;</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        <a class="code" href="../../d0/d18/ArithmeticOperations_8c.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a> magic2; <span class="comment">// old style: 0x420281861253 big endian</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        <span class="comment">//               // new style: 0x49484156454F5054 (IHAVEOPT)</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    } nbd_header;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="keyword">struct </span>old_nbd_header_t {</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        <a class="code" href="../../d0/d18/ArithmeticOperations_8c.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a> devsize;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        <a class="code" href="../../d0/d18/ArithmeticOperations_8c.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> <a class="code" href="../../db/d66/dumpkmap_8c.html#abb0829cce9dd20a40ae0d86890ae85c6">flags</a>;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        <span class="keywordtype">char</span> data[124];</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    } old_nbd_header;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="keyword">struct </span>new_nbd_header_t {</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        <a class="code" href="../../d0/d18/ArithmeticOperations_8c.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a> devsize;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a5debae8b2a1ec20a6694c0c443ee399e">uint16_t</a> transmission_flags;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        <span class="keywordtype">char</span> data[124];</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    } new_nbd_header;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="keyword">struct </span>nbd_opt_t {</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        <a class="code" href="../../d0/d18/ArithmeticOperations_8c.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a> magic;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        <a class="code" href="../../d0/d18/ArithmeticOperations_8c.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> <a class="code" href="../../d4/dcd/nmeter_8c.html#a6b9d817d08c1417f5c533eb8ad775312">opt</a>;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        <a class="code" href="../../d0/d18/ArithmeticOperations_8c.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> <a class="code" href="../../dd/daa/amd64_2Bootstrap_2Multiboot_21_2multiboot_8h.html#a6de3a6d27a7e07942958b912d39792e6">len</a>;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    } nbd_opts;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160; </div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d4/d31/musl_2include_2getopt_8h.html#d6/d43/structoption">option</a> long_options[] = {</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        { <span class="stringliteral">&quot;block-size&quot;</span>, <a class="code" href="../../d4/d31/musl_2include_2getopt_8h.html#a6ece8d8dfa8378778f7290fdaba5b8bc">required_argument</a>, <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="charliteral">&#39;b&#39;</span> },</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        { <span class="stringliteral">&quot;timeout&quot;</span>   , <a class="code" href="../../d4/d31/musl_2include_2getopt_8h.html#a6ece8d8dfa8378778f7290fdaba5b8bc">required_argument</a>, <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="charliteral">&#39;t&#39;</span> },</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        { <span class="stringliteral">&quot;name&quot;</span>      , <a class="code" href="../../d4/d31/musl_2include_2getopt_8h.html#a6ece8d8dfa8378778f7290fdaba5b8bc">required_argument</a>, <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="charliteral">&#39;n&#39;</span> },</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        { <span class="stringliteral">&quot;persist&quot;</span>   , <a class="code" href="../../d4/d31/musl_2include_2getopt_8h.html#a3bc1d5f667b5b4ca4b4abb685dc874ce">no_argument</a>      , <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="charliteral">&#39;p&#39;</span> },</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        { <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> }</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    };</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160; </div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <a class="code" href="../../d7/dd7/libbb_8h.html#a0fc08f11f6c83dbc94a75ca49d29fae8">BUILD_BUG_ON</a>(<a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#afd049f7ad59dbe455f460807475c2841">offsetof</a>(<span class="keyword">struct</span> old_nbd_header_t, data) != 8 + 4);</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <a class="code" href="../../d7/dd7/libbb_8h.html#a0fc08f11f6c83dbc94a75ca49d29fae8">BUILD_BUG_ON</a>(<a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#afd049f7ad59dbe455f460807475c2841">offsetof</a>(<span class="keyword">struct</span> new_nbd_header_t, data) != 8 + 2);</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160; </div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="preprocessor">#if !BB_MMU</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <a class="code" href="../../d7/dd7/libbb_8h.html#a8bbc28a675d8fc508cde7df9687a83d8">bb_daemonize_or_rexec</a>(<a class="code" href="../../d7/dd7/libbb_8h.html#a84c830e6228ae0c402eed256d8bd7080a1c34121fab53a80426966b4601d0ebd0">DAEMON_CLOSE_EXTRA_FDS</a>, <a class="code" href="../../d9/dd0/bash_2test_8c.html#af2efa898e9eed6fe6715279cb1ec35b0">argv</a>);</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160; </div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="comment">// Parse args. nbd-client uses stupid &quot;one-dash long options&quot; style :(</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="comment">// Even though short forms (-b,-t,-N,-p) exist for all long opts,</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="comment">// older manpages only contained long forms, which probably resulted</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="comment">// in many scripts using them.</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    blksize = 4096;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <a class="code" href="../../d9/dbf/nc_8c.html#aee95051bab9d52640b37995884ab6979">timeout</a> = 0;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <a class="code" href="../../d4/d31/musl_2include_2getopt_8h.html#adc503659d37af8017fb4b86d61c99086">name</a> = <span class="stringliteral">&quot;&quot;</span>; <span class="comment">// use of &quot;&quot; instead of NULL simplifies strlen() later</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    opt_d = opt_p = 0;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="keywordflow">while</span> ((ch = <a class="code" href="../../d4/d31/musl_2include_2getopt_8h.html#a32498762f3b096900bdb5f14daccccdf">getopt_long_only</a>(<a class="code" href="../../d9/dd0/bash_2test_8c.html#ad1447518f4372828b8435ae82e48499e">argc</a>, <a class="code" href="../../d9/dd0/bash_2test_8c.html#af2efa898e9eed6fe6715279cb1ec35b0">argv</a>, <span class="stringliteral">&quot;dN:&quot;</span>, long_options, <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) != -1) {</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        <span class="keywordflow">switch</span> (ch) {</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;p&#39;</span>:   <span class="comment">// -persist</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;            opt_p = 1;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;d&#39;</span>:   <span class="comment">// -d</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;            opt_d = 1;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;b&#39;</span>:   <span class="comment">// -block-size</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;            blksize = <a class="code" href="../../d7/dc3/xatonum__template_8c.html#a15e04b577303ff026340f1b793f8466f">xatou</a>(<a class="code" href="../../d8/d50/rl_8c.html#adb50a0eab9fed92fc3bfc7dfa4f2c410">optarg</a>);</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;t&#39;</span>:   <span class="comment">// -timeout</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;            <a class="code" href="../../d9/dbf/nc_8c.html#aee95051bab9d52640b37995884ab6979">timeout</a> = <a class="code" href="../../d7/dc3/xatonum__template_8c.html#a15e04b577303ff026340f1b793f8466f">xatou</a>(<a class="code" href="../../d8/d50/rl_8c.html#adb50a0eab9fed92fc3bfc7dfa4f2c410">optarg</a>);</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;N&#39;</span>:   <span class="comment">// -N</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;n&#39;</span>:   <span class="comment">// -name</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;            <a class="code" href="../../d4/d31/musl_2include_2getopt_8h.html#adc503659d37af8017fb4b86d61c99086">name</a> = <a class="code" href="../../d8/d50/rl_8c.html#adb50a0eab9fed92fc3bfc7dfa4f2c410">optarg</a>;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;            <a class="code" href="../../d9/d65/individual_8c.html#a8323cea1cd613c0e2005086064a4b730">bb_show_usage</a>();</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        }</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    }</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <a class="code" href="../../d9/dd0/bash_2test_8c.html#af2efa898e9eed6fe6715279cb1ec35b0">argv</a> += <a class="code" href="../../d8/d50/rl_8c.html#ad5e1c16213bbee2d5e8cc363309f418c">optind</a>;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160; </div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="keywordflow">if</span> (opt_d) { <span class="comment">// -d</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d9/dd0/bash_2test_8c.html#af2efa898e9eed6fe6715279cb1ec35b0">argv</a>[0] &amp;&amp; !<a class="code" href="../../d9/dd0/bash_2test_8c.html#af2efa898e9eed6fe6715279cb1ec35b0">argv</a>[1]) {</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;            <span class="keywordtype">int</span> nbd = <a class="code" href="../../d7/dd7/libbb_8h.html#aa3e94e3ec137f40660b168c9f0840027">xopen</a>(<a class="code" href="../../d9/dd0/bash_2test_8c.html#af2efa898e9eed6fe6715279cb1ec35b0">argv</a>[0], <a class="code" href="../../d1/d85/filesystem_8hpp.html#abb0586253488ee61072b73557eeb873b">O_RDWR</a>);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;            <a class="code" href="../../d6/dfe/Userspace_2musl_2include_2stropts_8h.html#ae3a230c65883ec8edc50e3a09ca80003">ioctl</a>(nbd, <a class="code" href="../../d2/db6/nbd-client_8c.html#a6b526fee81512a2ba9559b490979f696">NBD_DISCONNECT</a>);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;            <a class="code" href="../../d6/dfe/Userspace_2musl_2include_2stropts_8h.html#ae3a230c65883ec8edc50e3a09ca80003">ioctl</a>(nbd, <a class="code" href="../../d2/db6/nbd-client_8c.html#a4629053b0c5499f1a1ea6257a7b720af">NBD_CLEAR_SOCK</a>);</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;            <span class="keywordflow">if</span> (ENABLE_FEATURE_CLEAN_UP)</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                <a class="code" href="../../db/dad/Userspace_2musl_2include_2unistd_8h.html#ae152484c890a24e4d9b4980e7b965be0">close</a>(nbd);</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        }</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        <a class="code" href="../../d9/d65/individual_8c.html#a8323cea1cd613c0e2005086064a4b730">bb_show_usage</a>();</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    }</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160; </div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="comment">// Allow only argv[] of: HOST [PORT] BLOCKDEV</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d9/dd0/bash_2test_8c.html#af2efa898e9eed6fe6715279cb1ec35b0">argv</a>[0] || !<a class="code" href="../../d9/dd0/bash_2test_8c.html#af2efa898e9eed6fe6715279cb1ec35b0">argv</a>[1] || (<a class="code" href="../../d9/dd0/bash_2test_8c.html#af2efa898e9eed6fe6715279cb1ec35b0">argv</a>[2] &amp;&amp; <a class="code" href="../../d9/dd0/bash_2test_8c.html#af2efa898e9eed6fe6715279cb1ec35b0">argv</a>[3])) {</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        <a class="code" href="../../d9/d65/individual_8c.html#a8323cea1cd613c0e2005086064a4b730">bb_show_usage</a>();</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    }</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160; </div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    host = <a class="code" href="../../d9/dd0/bash_2test_8c.html#af2efa898e9eed6fe6715279cb1ec35b0">argv</a>[0];</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <a class="code" href="../../d1/d4c/traceroute_8c.html#a2ed8e46b717479f8e2ef47a52d28d9ca">port</a> = <a class="code" href="../../d9/dd0/bash_2test_8c.html#af2efa898e9eed6fe6715279cb1ec35b0">argv</a>[2] ? <a class="code" href="../../d9/dd0/bash_2test_8c.html#af2efa898e9eed6fe6715279cb1ec35b0">argv</a>[1] : <span class="stringliteral">&quot;10809&quot;</span>;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <a class="code" href="../../d4/dcd/nmeter_8c.html#a8059c3b19eb356cf729e5d25b139647e">device</a> = <a class="code" href="../../d9/dd0/bash_2test_8c.html#af2efa898e9eed6fe6715279cb1ec35b0">argv</a>[2] ? <a class="code" href="../../d9/dd0/bash_2test_8c.html#af2efa898e9eed6fe6715279cb1ec35b0">argv</a>[2] : <a class="code" href="../../d9/dd0/bash_2test_8c.html#af2efa898e9eed6fe6715279cb1ec35b0">argv</a>[1];</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160; </div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="comment">// Repeat until spanked if -persist</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="preprocessor">#if BB_MMU</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    nofork = 0;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="../../dd/d54/bash_2lib_2readline_2colors_8h.html#af547d73b85f475c4abfafdb76bf0c301a31e1e49487a20fd86781fe9fe67d5de1">sock</a>, nbd;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        <span class="keywordtype">int</span> ro;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        <span class="keywordtype">int</span> proto_new; <span class="comment">// 0 for old, 1 for new</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="preprocessor">#if BB_MMU</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        <span class="keywordtype">char</span> *data;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160; </div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        <span class="comment">// Make sure BLOCKDEV exists</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        nbd = <a class="code" href="../../d7/dd7/libbb_8h.html#aa3e94e3ec137f40660b168c9f0840027">xopen</a>(<a class="code" href="../../d4/dcd/nmeter_8c.html#a8059c3b19eb356cf729e5d25b139647e">device</a>, <a class="code" href="../../d1/d85/filesystem_8hpp.html#abb0586253488ee61072b73557eeb873b">O_RDWR</a>);</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160; </div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <span class="comment">// Find and connect to server</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        <a class="code" href="../../dd/d54/bash_2lib_2readline_2colors_8h.html#af547d73b85f475c4abfafdb76bf0c301a31e1e49487a20fd86781fe9fe67d5de1">sock</a> = <a class="code" href="../../d7/dd7/libbb_8h.html#a298fe98a9e4f78ec55a049cacc04d595">create_and_connect_stream_or_die</a>(host, <a class="code" href="../../d7/dd7/libbb_8h.html#a8cfa674c3c36454a362cdb19df2bef9e">xatou16</a>(<a class="code" href="../../d1/d4c/traceroute_8c.html#a2ed8e46b717479f8e2ef47a52d28d9ca">port</a>));</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        <a class="code" href="../../d7/dd7/libbb_8h.html#a152b8ece1f1fdbe3bcc5b326afa7c415">setsockopt_1</a>(<a class="code" href="../../dd/d54/bash_2lib_2readline_2colors_8h.html#af547d73b85f475c4abfafdb76bf0c301a31e1e49487a20fd86781fe9fe67d5de1">sock</a>, <a class="code" href="../../d1/d10/in_8h.html#a94f83c72c1e5e6ef453e47cf59885fb5">IPPROTO_TCP</a>, <a class="code" href="../../d8/da5/tcp_8h.html#a8f02455d581f55196a37a12377ecfc0e">TCP_NODELAY</a>);</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160; </div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        <span class="comment">// Log on to the server</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        <a class="code" href="../../d7/dd7/libbb_8h.html#a99555f16e71f93f23622a8cce1265a5b">xread</a>(<a class="code" href="../../dd/d54/bash_2lib_2readline_2colors_8h.html#af547d73b85f475c4abfafdb76bf0c301a31e1e49487a20fd86781fe9fe67d5de1">sock</a>, &amp;nbd_header, 8 + 8);</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d3/d82/convert_8h.html#ac376fcece8fcc2d0f8b1cf3de18b10df">memcmp</a>(&amp;nbd_header.magic1, <span class="stringliteral">&quot;NBDMAGIC&quot;</span>,</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                <span class="keyword">sizeof</span>(nbd_header.magic1)) != 0</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        ) {</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;            <a class="code" href="../../d7/dd7/libbb_8h.html#aa7873f1b32526ae11612363558a2aa90">bb_simple_error_msg_and_die</a>(<span class="stringliteral">&quot;login failed&quot;</span>);</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        }</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d3/d82/convert_8h.html#ac376fcece8fcc2d0f8b1cf3de18b10df">memcmp</a>(&amp;nbd_header.magic2,</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                <span class="stringliteral">&quot;\x00\x00\x42\x02\x81\x86\x12\x53&quot;</span>,</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                <span class="keyword">sizeof</span>(nbd_header.magic2)) == 0</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        ) {</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;            proto_new = 0;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d3/d82/convert_8h.html#ac376fcece8fcc2d0f8b1cf3de18b10df">memcmp</a>(&amp;nbd_header.magic2, <span class="stringliteral">&quot;IHAVEOPT&quot;</span>, 8) == 0) {</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;            proto_new = 1;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;            <a class="code" href="../../d7/dd7/libbb_8h.html#aa7873f1b32526ae11612363558a2aa90">bb_simple_error_msg_and_die</a>(<span class="stringliteral">&quot;login failed&quot;</span>);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        }</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160; </div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        <span class="keywordflow">if</span> (!proto_new) {</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;            <a class="code" href="../../d7/dd7/libbb_8h.html#a99555f16e71f93f23622a8cce1265a5b">xread</a>(<a class="code" href="../../dd/d54/bash_2lib_2readline_2colors_8h.html#af547d73b85f475c4abfafdb76bf0c301a31e1e49487a20fd86781fe9fe67d5de1">sock</a>, &amp;old_nbd_header,</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                    <span class="keyword">sizeof</span>(old_nbd_header.devsize) +</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                    <span class="keyword">sizeof</span>(old_nbd_header.flags) +</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                    <span class="keyword">sizeof</span>(old_nbd_header.data));</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;            size_blocks = <a class="code" href="../../de/d03/platform_8h.html#ab25ec83fd461ee2a3c98f6abdfad0e23">SWAP_BE64</a>(old_nbd_header.devsize) / blksize;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;            <a class="code" href="../../d6/dfe/Userspace_2musl_2include_2stropts_8h.html#ae3a230c65883ec8edc50e3a09ca80003">ioctl</a>(nbd, <a class="code" href="../../d2/db6/nbd-client_8c.html#a3f55d436fcfabb35561673777625087b">NBD_SET_BLKSIZE</a>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>) blksize);</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;            <a class="code" href="../../d6/dfe/Userspace_2musl_2include_2stropts_8h.html#ae3a230c65883ec8edc50e3a09ca80003">ioctl</a>(nbd, <a class="code" href="../../d2/db6/nbd-client_8c.html#ac7c13bba5b1dda692597bf239557a11b">NBD_SET_SIZE_BLOCKS</a>, size_blocks);</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;            <a class="code" href="../../d6/dfe/Userspace_2musl_2include_2stropts_8h.html#ae3a230c65883ec8edc50e3a09ca80003">ioctl</a>(nbd, <a class="code" href="../../d2/db6/nbd-client_8c.html#a4629053b0c5499f1a1ea6257a7b720af">NBD_CLEAR_SOCK</a>);</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;            ro = !!(old_nbd_header.flags &amp; <a class="code" href="../../d8/d16/include_2arpa_2inet_8h.html#aec437835f2f42f362241b7c4535524ac">htons</a>(2));</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="preprocessor">#if BB_MMU</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;            data = old_nbd_header.data;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;            <span class="keywordtype">unsigned</span> <a class="code" href="../../dc/d72/fsck__minix_8c.html#ae35b977157df01917b1e9c24cb65d288">namelen</a>;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;            <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a5debae8b2a1ec20a6694c0c443ee399e">uint16_t</a> handshake_flags;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160; </div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            <a class="code" href="../../d7/dd7/libbb_8h.html#a99555f16e71f93f23622a8cce1265a5b">xread</a>(<a class="code" href="../../dd/d54/bash_2lib_2readline_2colors_8h.html#af547d73b85f475c4abfafdb76bf0c301a31e1e49487a20fd86781fe9fe67d5de1">sock</a>, &amp;handshake_flags, <span class="keyword">sizeof</span>(handshake_flags));</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            <a class="code" href="../../d7/dd7/libbb_8h.html#a406e6e7d1c51da582c1e82632b1f2bce">xwrite</a>(<a class="code" href="../../dd/d54/bash_2lib_2readline_2colors_8h.html#af547d73b85f475c4abfafdb76bf0c301a31e1e49487a20fd86781fe9fe67d5de1">sock</a>, &amp;<a class="code" href="../../d7/dd7/libbb_8h.html#a407ccf485b70a4ef2be2aa7b56fdb95a">const_int_0</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d7/dd7/libbb_8h.html#a407ccf485b70a4ef2be2aa7b56fdb95a">const_int_0</a>)); <span class="comment">// client_flags</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160; </div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            <a class="code" href="../../d3/d82/convert_8h.html#a309e07aa23e76adc2ad0830978663c45">memcpy</a>(&amp;nbd_opts.magic, <span class="stringliteral">&quot;IHAVEOPT&quot;</span>,</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                    <span class="keyword">sizeof</span>(nbd_opts.magic));</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;            nbd_opts.opt = <a class="code" href="../../d8/d16/include_2arpa_2inet_8h.html#afa0e455458258ff4741c5c3b2c737756">htonl</a>(1); <span class="comment">// NBD_OPT_EXPORT_NAME</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;            <a class="code" href="../../dc/d72/fsck__minix_8c.html#ae35b977157df01917b1e9c24cb65d288">namelen</a> = <a class="code" href="../../d3/d82/convert_8h.html#a7dcc610f4b04a8ee418f03a6d9256629">strlen</a>(<a class="code" href="../../d4/d31/musl_2include_2getopt_8h.html#adc503659d37af8017fb4b86d61c99086">name</a>);</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;            nbd_opts.len = <a class="code" href="../../d8/d16/include_2arpa_2inet_8h.html#afa0e455458258ff4741c5c3b2c737756">htonl</a>(<a class="code" href="../../dc/d72/fsck__minix_8c.html#ae35b977157df01917b1e9c24cb65d288">namelen</a>);</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;            <a class="code" href="../../d7/dd7/libbb_8h.html#a406e6e7d1c51da582c1e82632b1f2bce">xwrite</a>(<a class="code" href="../../dd/d54/bash_2lib_2readline_2colors_8h.html#af547d73b85f475c4abfafdb76bf0c301a31e1e49487a20fd86781fe9fe67d5de1">sock</a>, &amp;nbd_opts,</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                    <span class="keyword">sizeof</span>(nbd_opts.magic) +</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                    <span class="keyword">sizeof</span>(nbd_opts.opt) +</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                    <span class="keyword">sizeof</span>(nbd_opts.len));</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;            <a class="code" href="../../d7/dd7/libbb_8h.html#a406e6e7d1c51da582c1e82632b1f2bce">xwrite</a>(<a class="code" href="../../dd/d54/bash_2lib_2readline_2colors_8h.html#af547d73b85f475c4abfafdb76bf0c301a31e1e49487a20fd86781fe9fe67d5de1">sock</a>, <a class="code" href="../../d4/d31/musl_2include_2getopt_8h.html#adc503659d37af8017fb4b86d61c99086">name</a>, <a class="code" href="../../dc/d72/fsck__minix_8c.html#ae35b977157df01917b1e9c24cb65d288">namelen</a>);</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160; </div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;            <a class="code" href="../../d7/dd7/libbb_8h.html#a99555f16e71f93f23622a8cce1265a5b">xread</a>(<a class="code" href="../../dd/d54/bash_2lib_2readline_2colors_8h.html#af547d73b85f475c4abfafdb76bf0c301a31e1e49487a20fd86781fe9fe67d5de1">sock</a>, &amp;new_nbd_header,</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                    <span class="keyword">sizeof</span>(new_nbd_header.devsize) +</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                    <span class="keyword">sizeof</span>(new_nbd_header.transmission_flags) +</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                    <span class="keyword">sizeof</span>(new_nbd_header.data));</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;            size_blocks = <a class="code" href="../../de/d03/platform_8h.html#ab25ec83fd461ee2a3c98f6abdfad0e23">SWAP_BE64</a>(new_nbd_header.devsize) / blksize;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;            <a class="code" href="../../d6/dfe/Userspace_2musl_2include_2stropts_8h.html#ae3a230c65883ec8edc50e3a09ca80003">ioctl</a>(nbd, <a class="code" href="../../d2/db6/nbd-client_8c.html#a3f55d436fcfabb35561673777625087b">NBD_SET_BLKSIZE</a>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>) blksize);</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;            <a class="code" href="../../d6/dfe/Userspace_2musl_2include_2stropts_8h.html#ae3a230c65883ec8edc50e3a09ca80003">ioctl</a>(nbd, <a class="code" href="../../d2/db6/nbd-client_8c.html#ac7c13bba5b1dda692597bf239557a11b">NBD_SET_SIZE_BLOCKS</a>, size_blocks);</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;            <a class="code" href="../../d6/dfe/Userspace_2musl_2include_2stropts_8h.html#ae3a230c65883ec8edc50e3a09ca80003">ioctl</a>(nbd, <a class="code" href="../../d2/db6/nbd-client_8c.html#a4629053b0c5499f1a1ea6257a7b720af">NBD_CLEAR_SOCK</a>);</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;            <a class="code" href="../../d6/dfe/Userspace_2musl_2include_2stropts_8h.html#ae3a230c65883ec8edc50e3a09ca80003">ioctl</a>(nbd, <a class="code" href="../../d2/db6/nbd-client_8c.html#af279bf65a4d536625df3fb23e8337b93">NBD_SET_FLAGS</a>,</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                    <a class="code" href="../../d8/d16/include_2arpa_2inet_8h.html#a66a5628bb6e0a886d6ac34c8dfb6e12c">ntohs</a>(new_nbd_header.transmission_flags));</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            ro = !!(new_nbd_header.transmission_flags &amp; <a class="code" href="../../d8/d16/include_2arpa_2inet_8h.html#aec437835f2f42f362241b7c4535524ac">htons</a>(2));</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="preprocessor">#if BB_MMU</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;            data = new_nbd_header.data;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        }</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160; </div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d6/dfe/Userspace_2musl_2include_2stropts_8h.html#ae3a230c65883ec8edc50e3a09ca80003">ioctl</a>(nbd, <a class="code" href="../../d2/d29/mount_8h.html#a3044348f04bba93431a991dbcadf94dc">BLKROSET</a>, &amp;ro) &lt; 0) {</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;            <a class="code" href="../../d7/dd7/libbb_8h.html#a908d5535f4c6167da1ac613b29f4b7e4">bb_simple_perror_msg_and_die</a>(<span class="stringliteral">&quot;BLKROSET&quot;</span>);</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        }</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160; </div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d9/dbf/nc_8c.html#aee95051bab9d52640b37995884ab6979">timeout</a>) {</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d6/dfe/Userspace_2musl_2include_2stropts_8h.html#ae3a230c65883ec8edc50e3a09ca80003">ioctl</a>(nbd, <a class="code" href="../../d2/db6/nbd-client_8c.html#a804b974a9b1b9c4b4a815674d0f2f053">NBD_SET_TIMEOUT</a>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>) <a class="code" href="../../d9/dbf/nc_8c.html#aee95051bab9d52640b37995884ab6979">timeout</a>)) {</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                <a class="code" href="../../d7/dd7/libbb_8h.html#a908d5535f4c6167da1ac613b29f4b7e4">bb_simple_perror_msg_and_die</a>(<span class="stringliteral">&quot;NBD_SET_TIMEOUT&quot;</span>);</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;            }</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        }</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160; </div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d6/dfe/Userspace_2musl_2include_2stropts_8h.html#ae3a230c65883ec8edc50e3a09ca80003">ioctl</a>(nbd, <a class="code" href="../../d2/db6/nbd-client_8c.html#acba69b1ef9285369e2513bb9c734ebc0">NBD_SET_SOCK</a>, <a class="code" href="../../dd/d54/bash_2lib_2readline_2colors_8h.html#af547d73b85f475c4abfafdb76bf0c301a31e1e49487a20fd86781fe9fe67d5de1">sock</a>)) {</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;            <a class="code" href="../../d7/dd7/libbb_8h.html#a908d5535f4c6167da1ac613b29f4b7e4">bb_simple_perror_msg_and_die</a>(<span class="stringliteral">&quot;NBD_SET_SOCK&quot;</span>);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        }</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160; </div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        <span class="comment">//if (swap) mlockall(MCL_CURRENT|MCL_FUTURE);</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="preprocessor">#if BB_MMU</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        <span class="comment">// Open the device to force reread of the partition table.</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        <span class="comment">// Need to do it in a separate process, since open(device)</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        <span class="comment">// needs some other process to sit in ioctl(nbd, NBD_DO_IT).</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d3/d3a/jobs_8h.html#a04629be7bde8f11cbf56e09e66a62dcc">fork</a>() == 0) {</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;            <span class="comment">/* child */</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;            <span class="keywordtype">char</span> *<a class="code" href="../../df/d19/arpping_8c.html#ac9562ee4ecb3b8aeebeb04656e7e57a9">s</a> = <a class="code" href="../../d3/d82/convert_8h.html#a104a20698dd8f00e7d2711c811ea72ac">strrchr</a>(<a class="code" href="../../d4/dcd/nmeter_8c.html#a8059c3b19eb356cf729e5d25b139647e">device</a>, <span class="charliteral">&#39;/&#39;</span>);</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;            <a class="code" href="../../dc/df9/Kernel_2include_2printf_8h.html#a77dac04ed12a16543832b623c7778729">sprintf</a>(data, <span class="stringliteral">&quot;/sys/block/%.32s/pid&quot;</span>, <a class="code" href="../../df/d19/arpping_8c.html#ac9562ee4ecb3b8aeebeb04656e7e57a9">s</a> ? <a class="code" href="../../df/d19/arpping_8c.html#ac9562ee4ecb3b8aeebeb04656e7e57a9">s</a> + 1 : <a class="code" href="../../d4/dcd/nmeter_8c.html#a8059c3b19eb356cf729e5d25b139647e">device</a>);</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;            <span class="comment">// Is it up yet?</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;            <span class="keywordflow">for</span> (;;) {</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;                <span class="keywordtype">int</span> <a class="code" href="../../d2/db3/hdparm_8c.html#a4f1fe3896ed1cc62474c5180fcfc5fdda1e4d60e5b05464d07a30096747025a42">fd</a> = <a class="code" href="../../d2/d44/musl_2include_2fcntl_8h.html#aa138ddaa9bbe8b8ccca32ed43e75b72c">open</a>(data, <a class="code" href="../../d1/d85/filesystem_8hpp.html#a7a68c9ffaac7dbcd652225dd7c06a54b">O_RDONLY</a>);</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../d2/db3/hdparm_8c.html#a4f1fe3896ed1cc62474c5180fcfc5fdda1e4d60e5b05464d07a30096747025a42">fd</a> &gt;= 0) {</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;                    <span class="keywordflow">if</span> (ENABLE_FEATURE_CLEAN_UP)</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;                        <a class="code" href="../../db/dad/Userspace_2musl_2include_2unistd_8h.html#ae152484c890a24e4d9b4980e7b965be0">close</a>(<a class="code" href="../../d2/db3/hdparm_8c.html#a4f1fe3896ed1cc62474c5180fcfc5fdda1e4d60e5b05464d07a30096747025a42">fd</a>);</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                }</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                <a class="code" href="../../d7/dd7/libbb_8h.html#a17610f73e6ff5e6003d25bedf0a4be96">sleep1</a>();</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;            }</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;            <a class="code" href="../../d2/d44/musl_2include_2fcntl_8h.html#aa138ddaa9bbe8b8ccca32ed43e75b72c">open</a>(<a class="code" href="../../d4/dcd/nmeter_8c.html#a8059c3b19eb356cf729e5d25b139647e">device</a>, <a class="code" href="../../d1/d85/filesystem_8hpp.html#a7a68c9ffaac7dbcd652225dd7c06a54b">O_RDONLY</a>);</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        }</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160; </div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        <span class="comment">// Daemonize here</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        <span class="keywordflow">if</span> (!nofork) {</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;            <a class="code" href="../../dc/d21/daemon_8c.html#af298996def620cbda4cd529988218cb0">daemon</a>(0, 0);</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;            nofork = 1;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        }</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        <span class="comment">// This turns us (the process that calls this ioctl)</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        <span class="comment">// into a dedicated NBD request handler.</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        <span class="comment">// We block here for a long time.</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        <span class="comment">// When exactly ioctl returns? On a signal,</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        <span class="comment">// or if someone does ioctl(NBD_DISCONNECT) [nbd-client -d].</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d6/dfe/Userspace_2musl_2include_2stropts_8h.html#ae3a230c65883ec8edc50e3a09ca80003">ioctl</a>(nbd, <a class="code" href="../../d2/db6/nbd-client_8c.html#a8022df854c1c3199c84fe731892dad03">NBD_DO_IT</a>) &gt;= 0 || <a class="code" href="../../db/d0b/Kernel_2include__std_2errno_8h.html#ab03f640d90fbc5bcb75285d08a0f25ed">errno</a> == <a class="code" href="../../db/d0b/Kernel_2include__std_2errno_8h.html#aca1e9da0ef95864e910f550467d475fa">EBADR</a>) {</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;            <span class="comment">// Flush queue and exit</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;            <a class="code" href="../../d6/dfe/Userspace_2musl_2include_2stropts_8h.html#ae3a230c65883ec8edc50e3a09ca80003">ioctl</a>(nbd, <a class="code" href="../../d2/db6/nbd-client_8c.html#ae8486d097b9045bd3db9c676b576ec91">NBD_CLEAR_QUEUE</a>);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;            <a class="code" href="../../d6/dfe/Userspace_2musl_2include_2stropts_8h.html#ae3a230c65883ec8edc50e3a09ca80003">ioctl</a>(nbd, <a class="code" href="../../d2/db6/nbd-client_8c.html#a4629053b0c5499f1a1ea6257a7b720af">NBD_CLEAR_SOCK</a>);</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        }</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160; </div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        <a class="code" href="../../db/dad/Userspace_2musl_2include_2unistd_8h.html#ae152484c890a24e4d9b4980e7b965be0">close</a>(<a class="code" href="../../dd/d54/bash_2lib_2readline_2colors_8h.html#af547d73b85f475c4abfafdb76bf0c301a31e1e49487a20fd86781fe9fe67d5de1">sock</a>);</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        <a class="code" href="../../db/dad/Userspace_2musl_2include_2unistd_8h.html#ae152484c890a24e4d9b4980e7b965be0">close</a>(nbd);</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    } <span class="keywordflow">while</span> (opt_p);</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160; </div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;}</div>
<div class="ttc" id="aArithmeticOperations_8c_html_a435d1572bf3f880d55459d9805097f62"><div class="ttname"><a href="../../d0/d18/ArithmeticOperations_8c.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a></div><div class="ttdeci">unsigned int uint32_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d18/ArithmeticOperations_8c_source.html#l00295">ArithmeticOperations.c:295</a></div></div>
<div class="ttc" id="aArithmeticOperations_8c_html_aaa5d1cd013383c889537491c3cfd9aad"><div class="ttname"><a href="../../d0/d18/ArithmeticOperations_8c.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a></div><div class="ttdeci">unsigned long long uint64_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d18/ArithmeticOperations_8c_source.html#l00294">ArithmeticOperations.c:294</a></div></div>
<div class="ttc" id="aKernel_2include_2printf_8h_html_a77dac04ed12a16543832b623c7778729"><div class="ttname"><a href="../../dc/df9/Kernel_2include_2printf_8h.html#a77dac04ed12a16543832b623c7778729">sprintf</a></div><div class="ttdeci">PRINTF_VISIBILITY int sprintf(char *s, const char *format,...) ATTR_PRINTF(2</div></div>
<div class="ttc" id="aKernel_2include_2types_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../d0/df4/Kernel_2include_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/Kernel_2include_2types_8h_source.html#l00037">types.h:37</a></div></div>
<div class="ttc" id="aKernel_2include_2types_8h_html_a5debae8b2a1ec20a6694c0c443ee399e"><div class="ttname"><a href="../../d0/df4/Kernel_2include_2types_8h.html#a5debae8b2a1ec20a6694c0c443ee399e">uint16_t</a></div><div class="ttdeci">__UINT16_TYPE__ uint16_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/Kernel_2include_2types_8h_source.html#l00161">types.h:161</a></div></div>
<div class="ttc" id="aKernel_2include_2types_8h_html_afd049f7ad59dbe455f460807475c2841"><div class="ttname"><a href="../../d0/df4/Kernel_2include_2types_8h.html#afd049f7ad59dbe455f460807475c2841">offsetof</a></div><div class="ttdeci">#define offsetof(type, member)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/Kernel_2include_2types_8h_source.html#l00083">types.h:83</a></div></div>
<div class="ttc" id="aKernel_2include__std_2errno_8h_html_ab03f640d90fbc5bcb75285d08a0f25ed"><div class="ttname"><a href="../../db/d0b/Kernel_2include__std_2errno_8h.html#ab03f640d90fbc5bcb75285d08a0f25ed">errno</a></div><div class="ttdeci">#define errno</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0b/Kernel_2include__std_2errno_8h_source.html#l00409">errno.h:409</a></div></div>
<div class="ttc" id="aKernel_2include__std_2errno_8h_html_aca1e9da0ef95864e910f550467d475fa"><div class="ttname"><a href="../../db/d0b/Kernel_2include__std_2errno_8h.html#aca1e9da0ef95864e910f550467d475fa">EBADR</a></div><div class="ttdeci">#define EBADR</div><div class="ttdoc">Invalid request descriptor.</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0b/Kernel_2include__std_2errno_8h_source.html#l00175">errno.h:175</a></div></div>
<div class="ttc" id="aUserspace_2musl_2include_2stropts_8h_html_ae3a230c65883ec8edc50e3a09ca80003"><div class="ttname"><a href="../../d6/dfe/Userspace_2musl_2include_2stropts_8h.html#ae3a230c65883ec8edc50e3a09ca80003">ioctl</a></div><div class="ttdeci">int ioctl(int, int,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d32/ioctl_8c_source.html#l00128">ioctl.c:128</a></div></div>
<div class="ttc" id="aUserspace_2musl_2include_2unistd_8h_html_ae152484c890a24e4d9b4980e7b965be0"><div class="ttname"><a href="../../db/dad/Userspace_2musl_2include_2unistd_8h.html#ae152484c890a24e4d9b4980e7b965be0">close</a></div><div class="ttdeci">int close(int)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d22/close_8c_source.html#l00013">close.c:13</a></div></div>
<div class="ttc" id="aamd64_2Bootstrap_2Multiboot_21_2multiboot_8h_html_a6de3a6d27a7e07942958b912d39792e6"><div class="ttname"><a href="../../dd/daa/amd64_2Bootstrap_2Multiboot_21_2multiboot_8h.html#a6de3a6d27a7e07942958b912d39792e6">len</a></div><div class="ttdeci">multiboot_uint64_t len</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/daa/amd64_2Bootstrap_2Multiboot_21_2multiboot_8h_source.html#l00002">multiboot.h:2</a></div></div>
<div class="ttc" id="aarpping_8c_html_ac9562ee4ecb3b8aeebeb04656e7e57a9"><div class="ttname"><a href="../../df/d19/arpping_8c.html#ac9562ee4ecb3b8aeebeb04656e7e57a9">s</a></div><div class="ttdeci">#define s</div></div>
<div class="ttc" id="abash_2lib_2readline_2colors_8h_html_af547d73b85f475c4abfafdb76bf0c301a31e1e49487a20fd86781fe9fe67d5de1"><div class="ttname"><a href="../../dd/d54/bash_2lib_2readline_2colors_8h.html#af547d73b85f475c4abfafdb76bf0c301a31e1e49487a20fd86781fe9fe67d5de1">sock</a></div><div class="ttdeci">@ sock</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d54/bash_2lib_2readline_2colors_8h_source.html#l00112">colors.h:112</a></div></div>
<div class="ttc" id="abash_2test_8c_html_ad1447518f4372828b8435ae82e48499e"><div class="ttname"><a href="../../d9/dd0/bash_2test_8c.html#ad1447518f4372828b8435ae82e48499e">argc</a></div><div class="ttdeci">static int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd0/bash_2test_8c_source.html#l00109">test.c:109</a></div></div>
<div class="ttc" id="abash_2test_8c_html_af2efa898e9eed6fe6715279cb1ec35b0"><div class="ttname"><a href="../../d9/dd0/bash_2test_8c.html#af2efa898e9eed6fe6715279cb1ec35b0">argv</a></div><div class="ttdeci">static char ** argv</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd0/bash_2test_8c_source.html#l00110">test.c:110</a></div></div>
<div class="ttc" id="aconvert_8h_html_a104a20698dd8f00e7d2711c811ea72ac"><div class="ttname"><a href="../../d3/d82/convert_8h.html#a104a20698dd8f00e7d2711c811ea72ac">strrchr</a></div><div class="ttdeci">char * strrchr(const char *String, int Char)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/db0/string_8c_source.html#l00113">string.c:113</a></div></div>
<div class="ttc" id="aconvert_8h_html_a309e07aa23e76adc2ad0830978663c45"><div class="ttname"><a href="../../d3/d82/convert_8h.html#a309e07aa23e76adc2ad0830978663c45">memcpy</a></div><div class="ttdeci">#define memcpy(dest, src, n)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d82/convert_8h_source.html#l00116">convert.h:116</a></div></div>
<div class="ttc" id="aconvert_8h_html_a7dcc610f4b04a8ee418f03a6d9256629"><div class="ttname"><a href="../../d3/d82/convert_8h.html#a7dcc610f4b04a8ee418f03a6d9256629">strlen</a></div><div class="ttdeci">long unsigned strlen(const char s[])</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dc7/Convert_8cpp_source.html#l00064">Convert.cpp:64</a></div></div>
<div class="ttc" id="aconvert_8h_html_ac376fcece8fcc2d0f8b1cf3de18b10df"><div class="ttname"><a href="../../d3/d82/convert_8h.html#ac376fcece8fcc2d0f8b1cf3de18b10df">memcmp</a></div><div class="ttdeci">int memcmp(const void *vl, const void *vr, size_t n)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dc7/Convert_8cpp_source.html#l00030">Convert.cpp:30</a></div></div>
<div class="ttc" id="adaemon_8c_html_af298996def620cbda4cd529988218cb0"><div class="ttname"><a href="../../dc/d21/daemon_8c.html#af298996def620cbda4cd529988218cb0">daemon</a></div><div class="ttdeci">int daemon(int nochdir, int noclose)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d21/daemon_8c_source.html#l00005">daemon.c:5</a></div></div>
<div class="ttc" id="adumpkmap_8c_html_abb0829cce9dd20a40ae0d86890ae85c6"><div class="ttname"><a href="../../db/d66/dumpkmap_8c.html#abb0829cce9dd20a40ae0d86890ae85c6">flags</a></div><div class="ttdeci">#define flags</div></div>
<div class="ttc" id="afilesystem_8hpp_html_a7a68c9ffaac7dbcd652225dd7c06a54b"><div class="ttname"><a href="../../d1/d85/filesystem_8hpp.html#a7a68c9ffaac7dbcd652225dd7c06a54b">O_RDONLY</a></div><div class="ttdeci">#define O_RDONLY</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d85/filesystem_8hpp_source.html#l00050">filesystem.hpp:50</a></div></div>
<div class="ttc" id="afilesystem_8hpp_html_abb0586253488ee61072b73557eeb873b"><div class="ttname"><a href="../../d1/d85/filesystem_8hpp.html#abb0586253488ee61072b73557eeb873b">O_RDWR</a></div><div class="ttdeci">#define O_RDWR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d85/filesystem_8hpp_source.html#l00052">filesystem.hpp:52</a></div></div>
<div class="ttc" id="afsck__minix_8c_html_ae35b977157df01917b1e9c24cb65d288"><div class="ttname"><a href="../../dc/d72/fsck__minix_8c.html#ae35b977157df01917b1e9c24cb65d288">namelen</a></div><div class="ttdeci">#define namelen</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d72/fsck__minix_8c_source.html#l00196">fsck_minix.c:196</a></div></div>
<div class="ttc" id="ahdparm_8c_html_a4f1fe3896ed1cc62474c5180fcfc5fdda1e4d60e5b05464d07a30096747025a42"><div class="ttname"><a href="../../d2/db3/hdparm_8c.html#a4f1fe3896ed1cc62474c5180fcfc5fdda1e4d60e5b05464d07a30096747025a42">fd</a></div><div class="ttdeci">@ fd</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/hdparm_8c_source.html#l00352">hdparm.c:352</a></div></div>
<div class="ttc" id="ain_8h_html_a94f83c72c1e5e6ef453e47cf59885fb5"><div class="ttname"><a href="../../d1/d10/in_8h.html#a94f83c72c1e5e6ef453e47cf59885fb5">IPPROTO_TCP</a></div><div class="ttdeci">#define IPPROTO_TCP</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d10/in_8h_source.html#l00079">in.h:79</a></div></div>
<div class="ttc" id="ainclude_2arpa_2inet_8h_html_a66a5628bb6e0a886d6ac34c8dfb6e12c"><div class="ttname"><a href="../../d8/d16/include_2arpa_2inet_8h.html#a66a5628bb6e0a886d6ac34c8dfb6e12c">ntohs</a></div><div class="ttdeci">uint16_t ntohs(uint16_t)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d1a/ntohs_8c_source.html#l00004">ntohs.c:4</a></div></div>
<div class="ttc" id="ainclude_2arpa_2inet_8h_html_aec437835f2f42f362241b7c4535524ac"><div class="ttname"><a href="../../d8/d16/include_2arpa_2inet_8h.html#aec437835f2f42f362241b7c4535524ac">htons</a></div><div class="ttdeci">uint16_t htons(uint16_t)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/de8/htons_8c_source.html#l00004">htons.c:4</a></div></div>
<div class="ttc" id="ainclude_2arpa_2inet_8h_html_afa0e455458258ff4741c5c3b2c737756"><div class="ttname"><a href="../../d8/d16/include_2arpa_2inet_8h.html#afa0e455458258ff4741c5c3b2c737756">htonl</a></div><div class="ttdeci">uint32_t htonl(uint32_t)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df7/htonl_8c_source.html#l00004">htonl.c:4</a></div></div>
<div class="ttc" id="aindividual_8c_html_a8323cea1cd613c0e2005086064a4b730"><div class="ttname"><a href="../../d9/d65/individual_8c.html#a8323cea1cd613c0e2005086064a4b730">bb_show_usage</a></div><div class="ttdeci">void bb_show_usage(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d65/individual_8c_source.html#l00020">individual.c:20</a></div></div>
<div class="ttc" id="ajobs_8h_html_a04629be7bde8f11cbf56e09e66a62dcc"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#a04629be7bde8f11cbf56e09e66a62dcc">fork</a></div><div class="ttdeci">pid_t fork()</div></div>
<div class="ttc" id="alibbb_8h_html_a0fc08f11f6c83dbc94a75ca49d29fae8"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#a0fc08f11f6c83dbc94a75ca49d29fae8">BUILD_BUG_ON</a></div><div class="ttdeci">#define BUILD_BUG_ON(condition)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dd7/libbb_8h_source.html#l02418">libbb.h:2418</a></div></div>
<div class="ttc" id="alibbb_8h_html_a152b8ece1f1fdbe3bcc5b326afa7c415"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#a152b8ece1f1fdbe3bcc5b326afa7c415">setsockopt_1</a></div><div class="ttdeci">int setsockopt_1(int fd, int level, int optname) FAST_FUNC</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4c/xconnect_8c_source.html#l00023">xconnect.c:23</a></div></div>
<div class="ttc" id="alibbb_8h_html_a17610f73e6ff5e6003d25bedf0a4be96"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#a17610f73e6ff5e6003d25bedf0a4be96">sleep1</a></div><div class="ttdeci">void sleep1(void) FAST_FUNC</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dac/bb__do__delay_8c_source.html#l00032">bb_do_delay.c:32</a></div></div>
<div class="ttc" id="alibbb_8h_html_a298fe98a9e4f78ec55a049cacc04d595"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#a298fe98a9e4f78ec55a049cacc04d595">create_and_connect_stream_or_die</a></div><div class="ttdeci">int create_and_connect_stream_or_die(const char *peer, int port) FAST_FUNC</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4c/xconnect_8c_source.html#l00447">xconnect.c:447</a></div></div>
<div class="ttc" id="alibbb_8h_html_a406e6e7d1c51da582c1e82632b1f2bce"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#a406e6e7d1c51da582c1e82632b1f2bce">xwrite</a></div><div class="ttdeci">void xwrite(int fd, const void *buf, size_t count) FAST_FUNC</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd6/xfuncs__printf_8c_source.html#l00247">xfuncs_printf.c:247</a></div></div>
<div class="ttc" id="alibbb_8h_html_a407ccf485b70a4ef2be2aa7b56fdb95a"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#a407ccf485b70a4ef2be2aa7b56fdb95a">const_int_0</a></div><div class="ttdeci">const int const_int_0</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d0a/messages_8c_source.html#l00040">messages.c:40</a></div></div>
<div class="ttc" id="alibbb_8h_html_a84c830e6228ae0c402eed256d8bd7080a1c34121fab53a80426966b4601d0ebd0"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#a84c830e6228ae0c402eed256d8bd7080a1c34121fab53a80426966b4601d0ebd0">DAEMON_CLOSE_EXTRA_FDS</a></div><div class="ttdeci">@ DAEMON_CLOSE_EXTRA_FDS</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dd7/libbb_8h_source.html#l01311">libbb.h:1311</a></div></div>
<div class="ttc" id="alibbb_8h_html_a8bbc28a675d8fc508cde7df9687a83d8"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#a8bbc28a675d8fc508cde7df9687a83d8">bb_daemonize_or_rexec</a></div><div class="ttdeci">#define bb_daemonize_or_rexec(flags, argv)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dd7/libbb_8h_source.html#l01318">libbb.h:1318</a></div></div>
<div class="ttc" id="alibbb_8h_html_a8cfa674c3c36454a362cdb19df2bef9e"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#a8cfa674c3c36454a362cdb19df2bef9e">xatou16</a></div><div class="ttdeci">uint16_t xatou16(const char *numstr) FAST_FUNC</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/xatonum_8c_source.html#l00066">xatonum.c:66</a></div></div>
<div class="ttc" id="alibbb_8h_html_a908d5535f4c6167da1ac613b29f4b7e4"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#a908d5535f4c6167da1ac613b29f4b7e4">bb_simple_perror_msg_and_die</a></div><div class="ttdeci">void bb_simple_perror_msg_and_die(const char *s) NORETURN FAST_FUNC</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d45/perror__msg_8c_source.html#l00037">perror_msg.c:37</a></div></div>
<div class="ttc" id="alibbb_8h_html_a99555f16e71f93f23622a8cce1265a5b"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#a99555f16e71f93f23622a8cce1265a5b">xread</a></div><div class="ttdeci">void xread(int fd, void *buf, size_t count) FAST_FUNC</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/de6/read__printf_8c_source.html#l00215">read_printf.c:215</a></div></div>
<div class="ttc" id="alibbb_8h_html_aa3e94e3ec137f40660b168c9f0840027"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#aa3e94e3ec137f40660b168c9f0840027">xopen</a></div><div class="ttdeci">int xopen(const char *pathname, int flags) FAST_FUNC</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd6/xfuncs__printf_8c_source.html#l00155">xfuncs_printf.c:155</a></div></div>
<div class="ttc" id="alibbb_8h_html_aa7873f1b32526ae11612363558a2aa90"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#aa7873f1b32526ae11612363558a2aa90">bb_simple_error_msg_and_die</a></div><div class="ttdeci">void bb_simple_error_msg_and_die(const char *s) NORETURN FAST_FUNC</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/db5/verror__msg_8c_source.html#l00212">verror_msg.c:212</a></div></div>
<div class="ttc" id="amount_8h_html_a3044348f04bba93431a991dbcadf94dc"><div class="ttname"><a href="../../d2/d29/mount_8h.html#a3044348f04bba93431a991dbcadf94dc">BLKROSET</a></div><div class="ttdeci">#define BLKROSET</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d29/mount_8h_source.html#l00010">mount.h:10</a></div></div>
<div class="ttc" id="amusl_2include_2fcntl_8h_html_aa138ddaa9bbe8b8ccca32ed43e75b72c"><div class="ttname"><a href="../../d2/d44/musl_2include_2fcntl_8h.html#aa138ddaa9bbe8b8ccca32ed43e75b72c">open</a></div><div class="ttdeci">int open(const char *, int,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/deb/open_8c_source.html#l00005">open.c:5</a></div></div>
<div class="ttc" id="amusl_2include_2getopt_8h_html_a32498762f3b096900bdb5f14daccccdf"><div class="ttname"><a href="../../d4/d31/musl_2include_2getopt_8h.html#a32498762f3b096900bdb5f14daccccdf">getopt_long_only</a></div><div class="ttdeci">int getopt_long_only(int, char *const *, const char *, const struct option *, int *)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/de0/getopt__long_8c_source.html#l00145">getopt_long.c:145</a></div></div>
<div class="ttc" id="amusl_2include_2getopt_8h_html_a3bc1d5f667b5b4ca4b4abb685dc874ce"><div class="ttname"><a href="../../d4/d31/musl_2include_2getopt_8h.html#a3bc1d5f667b5b4ca4b4abb685dc874ce">no_argument</a></div><div class="ttdeci">#define no_argument</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d31/musl_2include_2getopt_8h_source.html#l00022">getopt.h:22</a></div></div>
<div class="ttc" id="amusl_2include_2getopt_8h_html_a6ece8d8dfa8378778f7290fdaba5b8bc"><div class="ttname"><a href="../../d4/d31/musl_2include_2getopt_8h.html#a6ece8d8dfa8378778f7290fdaba5b8bc">required_argument</a></div><div class="ttdeci">#define required_argument</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d31/musl_2include_2getopt_8h_source.html#l00023">getopt.h:23</a></div></div>
<div class="ttc" id="amusl_2include_2getopt_8h_html_adc503659d37af8017fb4b86d61c99086"><div class="ttname"><a href="../../d4/d31/musl_2include_2getopt_8h.html#adc503659d37af8017fb4b86d61c99086">option::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d31/musl_2include_2getopt_8h_source.html#l00013">getopt.h:13</a></div></div>
<div class="ttc" id="amusl_2include_2getopt_8h_html_d6/d43/structoption"><div class="ttname"><a href="../../d4/d31/musl_2include_2getopt_8h.html#d6/d43/structoption">option</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d31/musl_2include_2getopt_8h_source.html#l00012">getopt.h:12</a></div></div>
<div class="ttc" id="anbd-client_8c_html_a3f55d436fcfabb35561673777625087b"><div class="ttname"><a href="../../d2/db6/nbd-client_8c.html#a3f55d436fcfabb35561673777625087b">NBD_SET_BLKSIZE</a></div><div class="ttdeci">#define NBD_SET_BLKSIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db6/nbd-client_8c_source.html#l00022">nbd-client.c:22</a></div></div>
<div class="ttc" id="anbd-client_8c_html_a4629053b0c5499f1a1ea6257a7b720af"><div class="ttname"><a href="../../d2/db6/nbd-client_8c.html#a4629053b0c5499f1a1ea6257a7b720af">NBD_CLEAR_SOCK</a></div><div class="ttdeci">#define NBD_CLEAR_SOCK</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db6/nbd-client_8c_source.html#l00025">nbd-client.c:25</a></div></div>
<div class="ttc" id="anbd-client_8c_html_a6b526fee81512a2ba9559b490979f696"><div class="ttname"><a href="../../d2/db6/nbd-client_8c.html#a6b526fee81512a2ba9559b490979f696">NBD_DISCONNECT</a></div><div class="ttdeci">#define NBD_DISCONNECT</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db6/nbd-client_8c_source.html#l00029">nbd-client.c:29</a></div></div>
<div class="ttc" id="anbd-client_8c_html_a8022df854c1c3199c84fe731892dad03"><div class="ttname"><a href="../../d2/db6/nbd-client_8c.html#a8022df854c1c3199c84fe731892dad03">NBD_DO_IT</a></div><div class="ttdeci">#define NBD_DO_IT</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db6/nbd-client_8c_source.html#l00024">nbd-client.c:24</a></div></div>
<div class="ttc" id="anbd-client_8c_html_a804b974a9b1b9c4b4a815674d0f2f053"><div class="ttname"><a href="../../d2/db6/nbd-client_8c.html#a804b974a9b1b9c4b4a815674d0f2f053">NBD_SET_TIMEOUT</a></div><div class="ttdeci">#define NBD_SET_TIMEOUT</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db6/nbd-client_8c_source.html#l00030">nbd-client.c:30</a></div></div>
<div class="ttc" id="anbd-client_8c_html_ac7c13bba5b1dda692597bf239557a11b"><div class="ttname"><a href="../../d2/db6/nbd-client_8c.html#ac7c13bba5b1dda692597bf239557a11b">NBD_SET_SIZE_BLOCKS</a></div><div class="ttdeci">#define NBD_SET_SIZE_BLOCKS</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db6/nbd-client_8c_source.html#l00028">nbd-client.c:28</a></div></div>
<div class="ttc" id="anbd-client_8c_html_acba69b1ef9285369e2513bb9c734ebc0"><div class="ttname"><a href="../../d2/db6/nbd-client_8c.html#acba69b1ef9285369e2513bb9c734ebc0">NBD_SET_SOCK</a></div><div class="ttdeci">#define NBD_SET_SOCK</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db6/nbd-client_8c_source.html#l00021">nbd-client.c:21</a></div></div>
<div class="ttc" id="anbd-client_8c_html_ae8486d097b9045bd3db9c676b576ec91"><div class="ttname"><a href="../../d2/db6/nbd-client_8c.html#ae8486d097b9045bd3db9c676b576ec91">NBD_CLEAR_QUEUE</a></div><div class="ttdeci">#define NBD_CLEAR_QUEUE</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db6/nbd-client_8c_source.html#l00026">nbd-client.c:26</a></div></div>
<div class="ttc" id="anbd-client_8c_html_af279bf65a4d536625df3fb23e8337b93"><div class="ttname"><a href="../../d2/db6/nbd-client_8c.html#af279bf65a4d536625df3fb23e8337b93">NBD_SET_FLAGS</a></div><div class="ttdeci">#define NBD_SET_FLAGS</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db6/nbd-client_8c_source.html#l00031">nbd-client.c:31</a></div></div>
<div class="ttc" id="anc_8c_html_aee95051bab9d52640b37995884ab6979"><div class="ttname"><a href="../../d9/dbf/nc_8c.html#aee95051bab9d52640b37995884ab6979">timeout</a></div><div class="ttdeci">static void timeout(int signum UNUSED_PARAM)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dbf/nc_8c_source.html#l00113">nc.c:113</a></div></div>
<div class="ttc" id="anmeter_8c_html_a6b9d817d08c1417f5c533eb8ad775312"><div class="ttname"><a href="../../d4/dcd/nmeter_8c.html#a6b9d817d08c1417f5c533eb8ad775312">opt</a></div><div class="ttdeci">char opt</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dcd/nmeter_8c_source.html#l00626">nmeter.c:626</a></div></div>
<div class="ttc" id="anmeter_8c_html_a8059c3b19eb356cf729e5d25b139647e"><div class="ttname"><a href="../../d4/dcd/nmeter_8c.html#a8059c3b19eb356cf729e5d25b139647e">device</a></div><div class="ttdeci">const char * device</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dcd/nmeter_8c_source.html#l00581">nmeter.c:581</a></div></div>
<div class="ttc" id="aplatform_8h_html_ab25ec83fd461ee2a3c98f6abdfad0e23"><div class="ttname"><a href="../../de/d03/platform_8h.html#ab25ec83fd461ee2a3c98f6abdfad0e23">SWAP_BE64</a></div><div class="ttdeci">#define SWAP_BE64(x)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d03/platform_8h_source.html#l00215">platform.h:215</a></div></div>
<div class="ttc" id="arl_8c_html_ad5e1c16213bbee2d5e8cc363309f418c"><div class="ttname"><a href="../../d8/d50/rl_8c.html#ad5e1c16213bbee2d5e8cc363309f418c">optind</a></div><div class="ttdeci">int optind</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dee/musl_2src_2misc_2getopt_8c_source.html#l00011">getopt.c:11</a></div></div>
<div class="ttc" id="arl_8c_html_adb50a0eab9fed92fc3bfc7dfa4f2c410"><div class="ttname"><a href="../../d8/d50/rl_8c.html#adb50a0eab9fed92fc3bfc7dfa4f2c410">optarg</a></div><div class="ttdeci">char * optarg</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dee/musl_2src_2misc_2getopt_8c_source.html#l00010">getopt.c:10</a></div></div>
<div class="ttc" id="atcp_8h_html_a8f02455d581f55196a37a12377ecfc0e"><div class="ttname"><a href="../../d8/da5/tcp_8h.html#a8f02455d581f55196a37a12377ecfc0e">TCP_NODELAY</a></div><div class="ttdeci">#define TCP_NODELAY</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/da5/tcp_8h_source.html#l00006">tcp.h:6</a></div></div>
<div class="ttc" id="atraceroute_8c_html_a2ed8e46b717479f8e2ef47a52d28d9ca"><div class="ttname"><a href="../../d1/d4c/traceroute_8c.html#a2ed8e46b717479f8e2ef47a52d28d9ca">port</a></div><div class="ttdeci">#define port</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d4c/traceroute_8c_source.html#l00429">traceroute.c:429</a></div></div>
<div class="ttc" id="axatonum__template_8c_html_a15e04b577303ff026340f1b793f8466f"><div class="ttname"><a href="../../d7/dc3/xatonum__template_8c.html#a15e04b577303ff026340f1b793f8466f">xatou</a></div><div class="ttdeci">unsigned type FAST_FUNC xatou()(const char *numstr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dc3/xatonum__template_8c_source.html#l00116">xatonum_template.c:116</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d9/dd0/bash_2test_8c_source.html#l00109">argc</a>, <a class="el" href="../../d9/dd0/bash_2test_8c_source.html#l00110">argv</a>, <a class="el" href="../../d7/dd7/libbb_8h_source.html#l01318">bb_daemonize_or_rexec</a>, <a class="el" href="../../d9/d65/individual_8c_source.html#l00020">bb_show_usage()</a>, <a class="el" href="../../d5/db5/verror__msg_8c_source.html#l00212">bb_simple_error_msg_and_die()</a>, <a class="el" href="../../d9/d45/perror__msg_8c_source.html#l00037">bb_simple_perror_msg_and_die()</a>, <a class="el" href="../../d2/d29/mount_8h_source.html#l00010">BLKROSET</a>, <a class="el" href="../../d7/dd7/libbb_8h_source.html#l02418">BUILD_BUG_ON</a>, <a class="el" href="../../d9/d22/close_8c_source.html#l00013">close()</a>, <a class="el" href="../../dc/d0a/messages_8c_source.html#l00040">const_int_0</a>, <a class="el" href="../../d8/d4c/xconnect_8c_source.html#l00447">create_and_connect_stream_or_die()</a>, <a class="el" href="../../dc/d21/daemon_8c_source.html#l00005">daemon()</a>, <a class="el" href="../../d7/dd7/libbb_8h_source.html#l01311">DAEMON_CLOSE_EXTRA_FDS</a>, <a class="el" href="../../d4/dcd/nmeter_8c_source.html#l00581">device</a>, <a class="el" href="../../db/d0b/Kernel_2include__std_2errno_8h_source.html#l00175">EBADR</a>, <a class="el" href="../../db/d0b/Kernel_2include__std_2errno_8h_source.html#l00409">errno</a>, <a class="el" href="../../d2/db3/hdparm_8c_source.html#l00352">fd</a>, <a class="el" href="../../db/d66/dumpkmap_8c.html#abb0829cce9dd20a40ae0d86890ae85c6">flags</a>, <a class="el" href="../../d3/d3a/jobs_8h.html#a04629be7bde8f11cbf56e09e66a62dcc">fork()</a>, <a class="el" href="../../de/de0/getopt__long_8c_source.html#l00145">getopt_long_only()</a>, <a class="el" href="../../d9/df7/htonl_8c_source.html#l00004">htonl()</a>, <a class="el" href="../../d7/de8/htons_8c_source.html#l00004">htons()</a>, <a class="el" href="../../dc/d32/ioctl_8c_source.html#l00128">ioctl()</a>, <a class="el" href="../../d1/d10/in_8h_source.html#l00079">IPPROTO_TCP</a>, <a class="el" href="../../dd/daa/amd64_2Bootstrap_2Multiboot_21_2multiboot_8h_source.html#l00002">len</a>, <a class="el" href="../../d0/dc7/Convert_8cpp_source.html#l00030">memcmp()</a>, <a class="el" href="../../d3/d82/convert_8h_source.html#l00116">memcpy</a>, <a class="el" href="../../d4/d31/musl_2include_2getopt_8h_source.html#l00013">option::name</a>, <a class="el" href="../../dc/d72/fsck__minix_8c_source.html#l00196">namelen</a>, <a class="el" href="../../d2/db6/nbd-client_8c_source.html#l00026">NBD_CLEAR_QUEUE</a>, <a class="el" href="../../d2/db6/nbd-client_8c_source.html#l00025">NBD_CLEAR_SOCK</a>, <a class="el" href="../../d2/db6/nbd-client_8c_source.html#l00029">NBD_DISCONNECT</a>, <a class="el" href="../../d2/db6/nbd-client_8c_source.html#l00024">NBD_DO_IT</a>, <a class="el" href="../../d2/db6/nbd-client_8c_source.html#l00022">NBD_SET_BLKSIZE</a>, <a class="el" href="../../d2/db6/nbd-client_8c_source.html#l00031">NBD_SET_FLAGS</a>, <a class="el" href="../../d2/db6/nbd-client_8c_source.html#l00028">NBD_SET_SIZE_BLOCKS</a>, <a class="el" href="../../d2/db6/nbd-client_8c_source.html#l00021">NBD_SET_SOCK</a>, <a class="el" href="../../d2/db6/nbd-client_8c_source.html#l00030">NBD_SET_TIMEOUT</a>, <a class="el" href="../../d4/d31/musl_2include_2getopt_8h_source.html#l00022">no_argument</a>, <a class="el" href="../../da/d1a/ntohs_8c_source.html#l00004">ntohs()</a>, <a class="el" href="../../d0/df4/Kernel_2include_2types_8h_source.html#l00037">NULL</a>, <a class="el" href="../../d1/d85/filesystem_8hpp_source.html#l00050">O_RDONLY</a>, <a class="el" href="../../d1/d85/filesystem_8hpp_source.html#l00052">O_RDWR</a>, <a class="el" href="../../d0/df4/Kernel_2include_2types_8h_source.html#l00083">offsetof</a>, <a class="el" href="../../da/deb/open_8c_source.html#l00005">open()</a>, <a class="el" href="../../d4/dcd/nmeter_8c_source.html#l00626">opt</a>, <a class="el" href="../../d7/dee/musl_2src_2misc_2getopt_8c_source.html#l00010">optarg</a>, <a class="el" href="../../d7/dee/musl_2src_2misc_2getopt_8c_source.html#l00011">optind</a>, <a class="el" href="../../d1/d4c/traceroute_8c_source.html#l00429">port</a>, <a class="el" href="../../d4/d31/musl_2include_2getopt_8h_source.html#l00023">required_argument</a>, <a class="el" href="../../df/d19/arpping_8c.html#ac9562ee4ecb3b8aeebeb04656e7e57a9">s</a>, <a class="el" href="../../d8/d4c/xconnect_8c_source.html#l00023">setsockopt_1()</a>, <a class="el" href="../../d0/dac/bb__do__delay_8c_source.html#l00032">sleep1()</a>, <a class="el" href="../../dd/d54/bash_2lib_2readline_2colors_8h_source.html#l00112">sock</a>, <a class="el" href="../../dc/df9/Kernel_2include_2printf_8h.html#a77dac04ed12a16543832b623c7778729">sprintf()</a>, <a class="el" href="../../d0/dc7/Convert_8cpp_source.html#l00064">strlen()</a>, <a class="el" href="../../d1/db0/string_8c_source.html#l00113">strrchr()</a>, <a class="el" href="../../de/d03/platform_8h_source.html#l00215">SWAP_BE64</a>, <a class="el" href="../../d8/da5/tcp_8h_source.html#l00006">TCP_NODELAY</a>, <a class="el" href="../../d9/dbf/nc_8c_source.html#l00113">timeout()</a>, <a class="el" href="../../d7/dc3/xatonum__template_8c_source.html#l00116">xatou()</a>, <a class="el" href="../../d1/d80/xatonum_8c_source.html#l00066">xatou16()</a>, <a class="el" href="../../d9/dd6/xfuncs__printf_8c_source.html#l00155">xopen()</a>, <a class="el" href="../../d5/de6/read__printf_8c_source.html#l00215">xread()</a>, and <a class="el" href="../../d9/dd6/xfuncs__printf_8c_source.html#l00247">xwrite()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_97d86ce2f18c7710ea326fa47777d7d7.html">Userspace</a></li><li class="navelem"><a class="el" href="../../dir_0276b9b7d706caf6f8b101518c949f15.html">apps</a></li><li class="navelem"><a class="el" href="../../dir_825a5fc57f8484006531699dcb39fa0d.html">base</a></li><li class="navelem"><a class="el" href="../../dir_87e330aa425985c7f88c27f5b355b004.html">busybox</a></li><li class="navelem"><a class="el" href="../../dir_e8fbedeaf6f588ea7cb6456e98eed78d.html">networking</a></li><li class="navelem"><a class="el" href="../../d2/db6/nbd-client_8c.html">nbd-client.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
