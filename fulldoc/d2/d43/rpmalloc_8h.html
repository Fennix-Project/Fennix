<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Fennix: Kernel/core/memory/heap_allocators/rpmalloc/rpmalloc.h File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="../../custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Fennix
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
   <div id="projectbrief">Opeating System from scratch made in C and C++</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d2/d43/rpmalloc_8h.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">rpmalloc.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stddef.h&gt;</code><br />
</div>
<p><a href="../../d2/d43/rpmalloc_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:d1/d1a/structrpmalloc__global__statistics__t"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d43/rpmalloc_8h.html#d1/d1a/structrpmalloc__global__statistics__t">rpmalloc_global_statistics_t</a></td></tr>
<tr class="separator:d1/d1a/structrpmalloc__global__statistics__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:d0/d25/structrpmalloc__thread__statistics__t"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d43/rpmalloc_8h.html#d0/d25/structrpmalloc__thread__statistics__t">rpmalloc_thread_statistics_t</a></td></tr>
<tr class="separator:d0/d25/structrpmalloc__thread__statistics__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d42/structrpmalloc__config__t.html">rpmalloc_config_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:df/dbb/structrpmalloc__thread__statistics__t_8span__use"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d43/rpmalloc_8h.html#df/dbb/structrpmalloc__thread__statistics__t_8span__use">rpmalloc_thread_statistics_t.span_use</a></td></tr>
<tr class="memdesc:df/dbb/structrpmalloc__thread__statistics__t_8span__use"><td class="mdescLeft">&#160;</td><td class="mdescRight">Per span count statistics (only if ENABLE_STATISTICS=1)  <a href="../../d2/d43/rpmalloc_8h.html#df/dbb/structrpmalloc__thread__statistics__t_8span__use">More...</a><br /></td></tr>
<tr class="separator:df/dbb/structrpmalloc__thread__statistics__t_8span__use"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:d4/dd6/structrpmalloc__thread__statistics__t_8size__use"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d43/rpmalloc_8h.html#d4/dd6/structrpmalloc__thread__statistics__t_8size__use">rpmalloc_thread_statistics_t.size_use</a></td></tr>
<tr class="memdesc:d4/dd6/structrpmalloc__thread__statistics__t_8size__use"><td class="mdescLeft">&#160;</td><td class="mdescRight">Per size class statistics (only if ENABLE_STATISTICS=1)  <a href="../../d2/d43/rpmalloc_8h.html#d4/dd6/structrpmalloc__thread__statistics__t_8size__use">More...</a><br /></td></tr>
<tr class="separator:d4/dd6/structrpmalloc__thread__statistics__t_8size__use"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a2d18f870b8bad81e931c8c0a01e3672b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a2d18f870b8bad81e931c8c0a01e3672b">RPMALLOC_EXPORT</a></td></tr>
<tr class="separator:a2d18f870b8bad81e931c8c0a01e3672b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85561f3ac6a729bf480cdf706d6c75dc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a85561f3ac6a729bf480cdf706d6c75dc">RPMALLOC_ALLOCATOR</a></td></tr>
<tr class="separator:a85561f3ac6a729bf480cdf706d6c75dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaec208006a1707aadcfb577cd0e05014"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d43/rpmalloc_8h.html#aaec208006a1707aadcfb577cd0e05014">RPMALLOC_ATTRIB_MALLOC</a></td></tr>
<tr class="separator:aaec208006a1707aadcfb577cd0e05014"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa78a4db7a8c062ad908eb3756e88cc8a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d43/rpmalloc_8h.html#aa78a4db7a8c062ad908eb3756e88cc8a">RPMALLOC_ATTRIB_ALLOC_SIZE</a>(<a class="el" href="../../d7/d06/getpwent_8c.html#a854352f53b148adc24983a58a1866d66">size</a>)</td></tr>
<tr class="separator:aa78a4db7a8c062ad908eb3756e88cc8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a97eca6d8747153e041a7acbdf2d2d4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a5a97eca6d8747153e041a7acbdf2d2d4">RPMALLOC_ATTRIB_ALLOC_SIZE2</a>(<a class="el" href="../../d8/d48/at__quick__exit_8c.html#ad43c3812e6d13e0518d9f8b8f463ffcf">count</a>,  <a class="el" href="../../d7/d06/getpwent_8c.html#a854352f53b148adc24983a58a1866d66">size</a>)</td></tr>
<tr class="separator:a5a97eca6d8747153e041a7acbdf2d2d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c6929e86935eadfa5b1dc9c9ff2cd60"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a5c6929e86935eadfa5b1dc9c9ff2cd60">RPMALLOC_CDECL</a></td></tr>
<tr class="separator:a5c6929e86935eadfa5b1dc9c9ff2cd60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6dccadaf86473444d85530d361d4109d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a6dccadaf86473444d85530d361d4109d">RPMALLOC_CONFIGURABLE</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:a6dccadaf86473444d85530d361d4109d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Define RPMALLOC_CONFIGURABLE to enable configuring sizes. Will introduce.  <a href="../../d2/d43/rpmalloc_8h.html#a6dccadaf86473444d85530d361d4109d">More...</a><br /></td></tr>
<tr class="separator:a6dccadaf86473444d85530d361d4109d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa20456aea27df9da3c00efecb1dba3b4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d43/rpmalloc_8h.html#aa20456aea27df9da3c00efecb1dba3b4">RPMALLOC_FIRST_CLASS_HEAPS</a>&#160;&#160;&#160;0</td></tr>
<tr class="memdesc:aa20456aea27df9da3c00efecb1dba3b4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Define RPMALLOC_FIRST_CLASS_HEAPS to enable heap based API (rpmalloc_heap_* functions).  <a href="../../d2/d43/rpmalloc_8h.html#aa20456aea27df9da3c00efecb1dba3b4">More...</a><br /></td></tr>
<tr class="separator:aa20456aea27df9da3c00efecb1dba3b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:affda05352198b9ef86d42be851a1349f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d43/rpmalloc_8h.html#affda05352198b9ef86d42be851a1349f">RPMALLOC_NO_PRESERVE</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:affda05352198b9ef86d42be851a1349f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flag to rpaligned_realloc to not preserve content in reallocation.  <a href="../../d2/d43/rpmalloc_8h.html#affda05352198b9ef86d42be851a1349f">More...</a><br /></td></tr>
<tr class="separator:affda05352198b9ef86d42be851a1349f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3774a093749aeca1d4e387b11e79395"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d43/rpmalloc_8h.html#ab3774a093749aeca1d4e387b11e79395">RPMALLOC_GROW_OR_FAIL</a>&#160;&#160;&#160;2</td></tr>
<tr class="memdesc:ab3774a093749aeca1d4e387b11e79395"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flag to rpaligned_realloc to fail and return null pointer if grow cannot be done in-place,.  <a href="../../d2/d43/rpmalloc_8h.html#ab3774a093749aeca1d4e387b11e79395">More...</a><br /></td></tr>
<tr class="separator:ab3774a093749aeca1d4e387b11e79395"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a8ed79e533ed034f305cf34cff57bd4a7"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="../../d2/d43/rpmalloc_8h.html#d1/d1a/structrpmalloc__global__statistics__t">rpmalloc_global_statistics_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a8ed79e533ed034f305cf34cff57bd4a7">rpmalloc_global_statistics_t</a></td></tr>
<tr class="separator:a8ed79e533ed034f305cf34cff57bd4a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaef706ac2be95d5a4f00bfab78128234"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="../../d2/d43/rpmalloc_8h.html#d0/d25/structrpmalloc__thread__statistics__t">rpmalloc_thread_statistics_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d43/rpmalloc_8h.html#aaef706ac2be95d5a4f00bfab78128234">rpmalloc_thread_statistics_t</a></td></tr>
<tr class="separator:aaef706ac2be95d5a4f00bfab78128234"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afea1bd62321a935b2ce6e268c7bcaf10"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="../../df/d42/structrpmalloc__config__t.html">rpmalloc_config_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d43/rpmalloc_8h.html#afea1bd62321a935b2ce6e268c7bcaf10">rpmalloc_config_t</a></td></tr>
<tr class="separator:afea1bd62321a935b2ce6e268c7bcaf10"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a24bbaa4b2e6a5524d4ba62a6c9c939df"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a2d18f870b8bad81e931c8c0a01e3672b">RPMALLOC_EXPORT</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a24bbaa4b2e6a5524d4ba62a6c9c939df">rpmalloc_initialize</a> (void)</td></tr>
<tr class="memdesc:a24bbaa4b2e6a5524d4ba62a6c9c939df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize allocator with default configuration.  <a href="../../d2/d43/rpmalloc_8h.html#a24bbaa4b2e6a5524d4ba62a6c9c939df">More...</a><br /></td></tr>
<tr class="separator:a24bbaa4b2e6a5524d4ba62a6c9c939df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2159e8de05a62e3697024fd2aec1a8c2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a2d18f870b8bad81e931c8c0a01e3672b">RPMALLOC_EXPORT</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a2159e8de05a62e3697024fd2aec1a8c2">rpmalloc_initialize_config</a> (const <a class="el" href="../../df/d42/structrpmalloc__config__t.html">rpmalloc_config_t</a> *config)</td></tr>
<tr class="memdesc:a2159e8de05a62e3697024fd2aec1a8c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize allocator with given configuration.  <a href="../../d2/d43/rpmalloc_8h.html#a2159e8de05a62e3697024fd2aec1a8c2">More...</a><br /></td></tr>
<tr class="separator:a2159e8de05a62e3697024fd2aec1a8c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3544fcade64cec7d4a376747dbbaa01"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a2d18f870b8bad81e931c8c0a01e3672b">RPMALLOC_EXPORT</a> const <a class="el" href="../../df/d42/structrpmalloc__config__t.html">rpmalloc_config_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d43/rpmalloc_8h.html#ae3544fcade64cec7d4a376747dbbaa01">rpmalloc_config</a> (void)</td></tr>
<tr class="memdesc:ae3544fcade64cec7d4a376747dbbaa01"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get allocator configuration.  <a href="../../d2/d43/rpmalloc_8h.html#ae3544fcade64cec7d4a376747dbbaa01">More...</a><br /></td></tr>
<tr class="separator:ae3544fcade64cec7d4a376747dbbaa01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c1ba6b797d81b14895f0a2114d78476"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a2d18f870b8bad81e931c8c0a01e3672b">RPMALLOC_EXPORT</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a1c1ba6b797d81b14895f0a2114d78476">rpmalloc_finalize</a> (void)</td></tr>
<tr class="memdesc:a1c1ba6b797d81b14895f0a2114d78476"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finalize allocator.  <a href="../../d2/d43/rpmalloc_8h.html#a1c1ba6b797d81b14895f0a2114d78476">More...</a><br /></td></tr>
<tr class="separator:a1c1ba6b797d81b14895f0a2114d78476"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4166a6bd4ba8707f381910f73a0d858e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a2d18f870b8bad81e931c8c0a01e3672b">RPMALLOC_EXPORT</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a4166a6bd4ba8707f381910f73a0d858e">rpmalloc_thread_initialize</a> (void)</td></tr>
<tr class="memdesc:a4166a6bd4ba8707f381910f73a0d858e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize allocator for calling thread.  <a href="../../d2/d43/rpmalloc_8h.html#a4166a6bd4ba8707f381910f73a0d858e">More...</a><br /></td></tr>
<tr class="separator:a4166a6bd4ba8707f381910f73a0d858e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01edf01df2797283168e0eff740390b6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a2d18f870b8bad81e931c8c0a01e3672b">RPMALLOC_EXPORT</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a01edf01df2797283168e0eff740390b6">rpmalloc_thread_finalize</a> (int release_caches)</td></tr>
<tr class="memdesc:a01edf01df2797283168e0eff740390b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finalize allocator for calling thread.  <a href="../../d2/d43/rpmalloc_8h.html#a01edf01df2797283168e0eff740390b6">More...</a><br /></td></tr>
<tr class="separator:a01edf01df2797283168e0eff740390b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe32b20a0a8c471b85225975f22de7b0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a2d18f870b8bad81e931c8c0a01e3672b">RPMALLOC_EXPORT</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d43/rpmalloc_8h.html#afe32b20a0a8c471b85225975f22de7b0">rpmalloc_thread_collect</a> (void)</td></tr>
<tr class="memdesc:afe32b20a0a8c471b85225975f22de7b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform deferred deallocations pending for the calling thread heap.  <a href="../../d2/d43/rpmalloc_8h.html#afe32b20a0a8c471b85225975f22de7b0">More...</a><br /></td></tr>
<tr class="separator:afe32b20a0a8c471b85225975f22de7b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a651de9989dde0bba2f3eac7d4c09f97a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a2d18f870b8bad81e931c8c0a01e3672b">RPMALLOC_EXPORT</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a651de9989dde0bba2f3eac7d4c09f97a">rpmalloc_is_thread_initialized</a> (void)</td></tr>
<tr class="memdesc:a651de9989dde0bba2f3eac7d4c09f97a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Query if allocator is initialized for calling thread.  <a href="../../d2/d43/rpmalloc_8h.html#a651de9989dde0bba2f3eac7d4c09f97a">More...</a><br /></td></tr>
<tr class="separator:a651de9989dde0bba2f3eac7d4c09f97a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29c086aa3f5d9fbc936fea87cfa62e2e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a2d18f870b8bad81e931c8c0a01e3672b">RPMALLOC_EXPORT</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a29c086aa3f5d9fbc936fea87cfa62e2e">rpmalloc_thread_statistics</a> (<a class="el" href="../../d2/d43/rpmalloc_8h.html#d0/d25/structrpmalloc__thread__statistics__t">rpmalloc_thread_statistics_t</a> *stats)</td></tr>
<tr class="memdesc:a29c086aa3f5d9fbc936fea87cfa62e2e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get per-thread statistics.  <a href="../../d2/d43/rpmalloc_8h.html#a29c086aa3f5d9fbc936fea87cfa62e2e">More...</a><br /></td></tr>
<tr class="separator:a29c086aa3f5d9fbc936fea87cfa62e2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21dbb043c42cbe1bfd7ba3f1fe012f5f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a2d18f870b8bad81e931c8c0a01e3672b">RPMALLOC_EXPORT</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a21dbb043c42cbe1bfd7ba3f1fe012f5f">rpmalloc_global_statistics</a> (<a class="el" href="../../d2/d43/rpmalloc_8h.html#d1/d1a/structrpmalloc__global__statistics__t">rpmalloc_global_statistics_t</a> *stats)</td></tr>
<tr class="memdesc:a21dbb043c42cbe1bfd7ba3f1fe012f5f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get global statistics.  <a href="../../d2/d43/rpmalloc_8h.html#a21dbb043c42cbe1bfd7ba3f1fe012f5f">More...</a><br /></td></tr>
<tr class="separator:a21dbb043c42cbe1bfd7ba3f1fe012f5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c33a5925ba558f8dc534c668e344db1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a2d18f870b8bad81e931c8c0a01e3672b">RPMALLOC_EXPORT</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a3c33a5925ba558f8dc534c668e344db1">rpmalloc_dump_statistics</a> (void *<a class="el" href="../../d4/d78/expr_8h.html#d7/d3a/structfile">file</a>)</td></tr>
<tr class="memdesc:a3c33a5925ba558f8dc534c668e344db1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dump all statistics in human readable format to file (should be a FILE*)  <a href="../../d2/d43/rpmalloc_8h.html#a3c33a5925ba558f8dc534c668e344db1">More...</a><br /></td></tr>
<tr class="separator:a3c33a5925ba558f8dc534c668e344db1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a133b388f5ecf5412a1b6ad2aa066d520"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a2d18f870b8bad81e931c8c0a01e3672b">RPMALLOC_EXPORT</a> <a class="el" href="../../d2/d43/rpmalloc_8h.html#a85561f3ac6a729bf480cdf706d6c75dc">RPMALLOC_ALLOCATOR</a> void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a133b388f5ecf5412a1b6ad2aa066d520">rpmalloc</a> (<a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a> <a class="el" href="../../d7/d06/getpwent_8c.html#a854352f53b148adc24983a58a1866d66">size</a>) <a class="el" href="../../d2/d43/rpmalloc_8h.html#aaec208006a1707aadcfb577cd0e05014">RPMALLOC_ATTRIB_MALLOC</a> <a class="el" href="../../d2/d43/rpmalloc_8h.html#aa78a4db7a8c062ad908eb3756e88cc8a">RPMALLOC_ATTRIB_ALLOC_SIZE</a>(1)</td></tr>
<tr class="memdesc:a133b388f5ecf5412a1b6ad2aa066d520"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate a memory block of at least the given size.  <a href="../../d2/d43/rpmalloc_8h.html#a133b388f5ecf5412a1b6ad2aa066d520">More...</a><br /></td></tr>
<tr class="separator:a133b388f5ecf5412a1b6ad2aa066d520"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a608a7c1ac37d930b1d82748d98009149"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a2d18f870b8bad81e931c8c0a01e3672b">RPMALLOC_EXPORT</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a608a7c1ac37d930b1d82748d98009149">rpfree</a> (void *ptr)</td></tr>
<tr class="memdesc:a608a7c1ac37d930b1d82748d98009149"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free the given memory block.  <a href="../../d2/d43/rpmalloc_8h.html#a608a7c1ac37d930b1d82748d98009149">More...</a><br /></td></tr>
<tr class="separator:a608a7c1ac37d930b1d82748d98009149"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8993488ecdc244782f4b7527bcc3d6f4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a2d18f870b8bad81e931c8c0a01e3672b">RPMALLOC_EXPORT</a> <a class="el" href="../../d2/d43/rpmalloc_8h.html#a85561f3ac6a729bf480cdf706d6c75dc">RPMALLOC_ALLOCATOR</a> void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a8993488ecdc244782f4b7527bcc3d6f4">rpcalloc</a> (<a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a> <a class="el" href="../../d7/da1/fma_8c.html#d6/df8/structnum">num</a>, <a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a> <a class="el" href="../../d7/d06/getpwent_8c.html#a854352f53b148adc24983a58a1866d66">size</a>) <a class="el" href="../../d2/d43/rpmalloc_8h.html#aaec208006a1707aadcfb577cd0e05014">RPMALLOC_ATTRIB_MALLOC</a> <a class="el" href="../../d2/d43/rpmalloc_8h.html#a5a97eca6d8747153e041a7acbdf2d2d4">RPMALLOC_ATTRIB_ALLOC_SIZE2</a>(1</td></tr>
<tr class="memdesc:a8993488ecdc244782f4b7527bcc3d6f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate a memory block of at least the given size and zero initialize it.  <a href="../../d2/d43/rpmalloc_8h.html#a8993488ecdc244782f4b7527bcc3d6f4">More...</a><br /></td></tr>
<tr class="separator:a8993488ecdc244782f4b7527bcc3d6f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac52f702e04b8a41a925794512404375e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a2d18f870b8bad81e931c8c0a01e3672b">RPMALLOC_EXPORT</a> <a class="el" href="../../d2/d43/rpmalloc_8h.html#a85561f3ac6a729bf480cdf706d6c75dc">RPMALLOC_ALLOCATOR</a> void <a class="el" href="../../d2/d43/rpmalloc_8h.html#a2d18f870b8bad81e931c8c0a01e3672b">RPMALLOC_EXPORT</a> <a class="el" href="../../d2/d43/rpmalloc_8h.html#a85561f3ac6a729bf480cdf706d6c75dc">RPMALLOC_ALLOCATOR</a> void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d43/rpmalloc_8h.html#ac52f702e04b8a41a925794512404375e">rprealloc</a> (void *ptr, <a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a> <a class="el" href="../../d7/d06/getpwent_8c.html#a854352f53b148adc24983a58a1866d66">size</a>) <a class="el" href="../../d2/d43/rpmalloc_8h.html#aaec208006a1707aadcfb577cd0e05014">RPMALLOC_ATTRIB_MALLOC</a> <a class="el" href="../../d2/d43/rpmalloc_8h.html#aa78a4db7a8c062ad908eb3756e88cc8a">RPMALLOC_ATTRIB_ALLOC_SIZE</a>(2)</td></tr>
<tr class="memdesc:ac52f702e04b8a41a925794512404375e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reallocate the given block to at least the given size.  <a href="../../d2/d43/rpmalloc_8h.html#ac52f702e04b8a41a925794512404375e">More...</a><br /></td></tr>
<tr class="separator:ac52f702e04b8a41a925794512404375e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af02d9e329d817c877a2cbe5b155cd9d3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a2d18f870b8bad81e931c8c0a01e3672b">RPMALLOC_EXPORT</a> <a class="el" href="../../d2/d43/rpmalloc_8h.html#a85561f3ac6a729bf480cdf706d6c75dc">RPMALLOC_ALLOCATOR</a> void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d43/rpmalloc_8h.html#af02d9e329d817c877a2cbe5b155cd9d3">rpaligned_realloc</a> (void *ptr, <a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a> alignment, <a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a> <a class="el" href="../../d7/d06/getpwent_8c.html#a854352f53b148adc24983a58a1866d66">size</a>, <a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a> oldsize, unsigned int <a class="el" href="../../db/dd4/sm__loop_8c.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a>) <a class="el" href="../../d2/d43/rpmalloc_8h.html#aaec208006a1707aadcfb577cd0e05014">RPMALLOC_ATTRIB_MALLOC</a> <a class="el" href="../../d2/d43/rpmalloc_8h.html#aa78a4db7a8c062ad908eb3756e88cc8a">RPMALLOC_ATTRIB_ALLOC_SIZE</a>(3)</td></tr>
<tr class="memdesc:af02d9e329d817c877a2cbe5b155cd9d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reallocate the given block to at least the given size and alignment,.  <a href="../../d2/d43/rpmalloc_8h.html#af02d9e329d817c877a2cbe5b155cd9d3">More...</a><br /></td></tr>
<tr class="separator:af02d9e329d817c877a2cbe5b155cd9d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a657912db3072a6b4e9fa221f13c64c27"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a2d18f870b8bad81e931c8c0a01e3672b">RPMALLOC_EXPORT</a> <a class="el" href="../../d2/d43/rpmalloc_8h.html#a85561f3ac6a729bf480cdf706d6c75dc">RPMALLOC_ALLOCATOR</a> void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a657912db3072a6b4e9fa221f13c64c27">rpaligned_alloc</a> (<a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a> alignment, <a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a> <a class="el" href="../../d7/d06/getpwent_8c.html#a854352f53b148adc24983a58a1866d66">size</a>) <a class="el" href="../../d2/d43/rpmalloc_8h.html#aaec208006a1707aadcfb577cd0e05014">RPMALLOC_ATTRIB_MALLOC</a> <a class="el" href="../../d2/d43/rpmalloc_8h.html#aa78a4db7a8c062ad908eb3756e88cc8a">RPMALLOC_ATTRIB_ALLOC_SIZE</a>(2)</td></tr>
<tr class="memdesc:a657912db3072a6b4e9fa221f13c64c27"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate a memory block of at least the given size and alignment.  <a href="../../d2/d43/rpmalloc_8h.html#a657912db3072a6b4e9fa221f13c64c27">More...</a><br /></td></tr>
<tr class="separator:a657912db3072a6b4e9fa221f13c64c27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a121a9d09a4a46a336c0b5a250b7b66b0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a2d18f870b8bad81e931c8c0a01e3672b">RPMALLOC_EXPORT</a> <a class="el" href="../../d2/d43/rpmalloc_8h.html#a85561f3ac6a729bf480cdf706d6c75dc">RPMALLOC_ALLOCATOR</a> void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a121a9d09a4a46a336c0b5a250b7b66b0">rpaligned_calloc</a> (<a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a> alignment, <a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a> <a class="el" href="../../d7/da1/fma_8c.html#d6/df8/structnum">num</a>, <a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a> <a class="el" href="../../d7/d06/getpwent_8c.html#a854352f53b148adc24983a58a1866d66">size</a>) <a class="el" href="../../d2/d43/rpmalloc_8h.html#aaec208006a1707aadcfb577cd0e05014">RPMALLOC_ATTRIB_MALLOC</a> <a class="el" href="../../d2/d43/rpmalloc_8h.html#a5a97eca6d8747153e041a7acbdf2d2d4">RPMALLOC_ATTRIB_ALLOC_SIZE2</a>(2</td></tr>
<tr class="memdesc:a121a9d09a4a46a336c0b5a250b7b66b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate a memory block of at least the given size and alignment, and zero initialize it.  <a href="../../d2/d43/rpmalloc_8h.html#a121a9d09a4a46a336c0b5a250b7b66b0">More...</a><br /></td></tr>
<tr class="separator:a121a9d09a4a46a336c0b5a250b7b66b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aecd8ddbe73d43b6863725c693a7e9818"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a2d18f870b8bad81e931c8c0a01e3672b">RPMALLOC_EXPORT</a> <a class="el" href="../../d2/d43/rpmalloc_8h.html#a85561f3ac6a729bf480cdf706d6c75dc">RPMALLOC_ALLOCATOR</a> void <a class="el" href="../../d2/d43/rpmalloc_8h.html#a2d18f870b8bad81e931c8c0a01e3672b">RPMALLOC_EXPORT</a> <a class="el" href="../../d2/d43/rpmalloc_8h.html#a85561f3ac6a729bf480cdf706d6c75dc">RPMALLOC_ALLOCATOR</a> void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d43/rpmalloc_8h.html#aecd8ddbe73d43b6863725c693a7e9818">rpmemalign</a> (<a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a> alignment, <a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a> <a class="el" href="../../d7/d06/getpwent_8c.html#a854352f53b148adc24983a58a1866d66">size</a>) <a class="el" href="../../d2/d43/rpmalloc_8h.html#aaec208006a1707aadcfb577cd0e05014">RPMALLOC_ATTRIB_MALLOC</a> <a class="el" href="../../d2/d43/rpmalloc_8h.html#aa78a4db7a8c062ad908eb3756e88cc8a">RPMALLOC_ATTRIB_ALLOC_SIZE</a>(2)</td></tr>
<tr class="memdesc:aecd8ddbe73d43b6863725c693a7e9818"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate a memory block of at least the given size and alignment.  <a href="../../d2/d43/rpmalloc_8h.html#aecd8ddbe73d43b6863725c693a7e9818">More...</a><br /></td></tr>
<tr class="separator:aecd8ddbe73d43b6863725c693a7e9818"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f43fd4642bf70f3c43ed24694611bc3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a2d18f870b8bad81e931c8c0a01e3672b">RPMALLOC_EXPORT</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a3f43fd4642bf70f3c43ed24694611bc3">rpposix_memalign</a> (void **memptr, <a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a> alignment, <a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a> <a class="el" href="../../d7/d06/getpwent_8c.html#a854352f53b148adc24983a58a1866d66">size</a>)</td></tr>
<tr class="memdesc:a3f43fd4642bf70f3c43ed24694611bc3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate a memory block of at least the given size and alignment.  <a href="../../d2/d43/rpmalloc_8h.html#a3f43fd4642bf70f3c43ed24694611bc3">More...</a><br /></td></tr>
<tr class="separator:a3f43fd4642bf70f3c43ed24694611bc3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52b4c800cec1406d162b8a7787587a46"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a2d18f870b8bad81e931c8c0a01e3672b">RPMALLOC_EXPORT</a> <a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a52b4c800cec1406d162b8a7787587a46">rpmalloc_usable_size</a> (void *ptr)</td></tr>
<tr class="memdesc:a52b4c800cec1406d162b8a7787587a46"><td class="mdescLeft">&#160;</td><td class="mdescRight">Query the usable size of the given memory block (from given pointer to the end of block)  <a href="../../d2/d43/rpmalloc_8h.html#a52b4c800cec1406d162b8a7787587a46">More...</a><br /></td></tr>
<tr class="separator:a52b4c800cec1406d162b8a7787587a46"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<hr/><h2 class="groupheader">Data Structure Documentation</h2>
<a name="d1/d1a/structrpmalloc__global__statistics__t" id="d1/d1a/structrpmalloc__global__statistics__t"></a>
<h2 class="memtitle"><span class="permalink"><a href="#d1/d1a/structrpmalloc__global__statistics__t">&#9670;&nbsp;</a></span>rpmalloc_global_statistics_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct rpmalloc_global_statistics_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="../../d2/d43/rpmalloc_8h_source.html#l00069">69</a> of file <a class="el" href="../../d2/d43/rpmalloc_8h_source.html">rpmalloc.h</a>.</p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="a70b10faa79aac5df497ba5eccdd554ae"></a><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a></td>
<td class="fieldname">
cached</td>
<td class="fielddoc">
Current amount of memory in global caches for small and medium sizes (&lt;32KiB) </td></tr>
<tr><td class="fieldtype">
<a id="a5db28c5567049de1e58833c061841f7e"></a><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a></td>
<td class="fieldname">
huge_alloc</td>
<td class="fielddoc">
Current amount of memory allocated in huge allocations, i.e larger than LARGE_SIZE_LIMIT which is 2MiB by default (only if ENABLE_STATISTICS=1) </td></tr>
<tr><td class="fieldtype">
<a id="a308868b1a8740da06b79c1bdabae1997"></a><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a></td>
<td class="fieldname">
huge_alloc_peak</td>
<td class="fielddoc">
Peak amount of memory allocated in huge allocations, i.e larger than LARGE_SIZE_LIMIT which is 2MiB by default (only if ENABLE_STATISTICS=1) </td></tr>
<tr><td class="fieldtype">
<a id="ab0d895a6016dd1c5937f2a74370f2727"></a><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a></td>
<td class="fieldname">
mapped</td>
<td class="fielddoc">
Current amount of virtual memory mapped, all of which might not have been committed (only if ENABLE_STATISTICS=1) </td></tr>
<tr><td class="fieldtype">
<a id="ad5723376daeb707aa20547190ced2865"></a><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a></td>
<td class="fieldname">
mapped_peak</td>
<td class="fielddoc">
Peak amount of virtual memory mapped, all of which might not have been committed (only if ENABLE_STATISTICS=1) </td></tr>
<tr><td class="fieldtype">
<a id="af1916b4138cfc1e46ff0787ff9206375"></a><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a></td>
<td class="fieldname">
mapped_total</td>
<td class="fielddoc">
Total amount of memory mapped since initialization (only if ENABLE_STATISTICS=1) </td></tr>
<tr><td class="fieldtype">
<a id="aa896cafa124a63254f56621fe2c5241f"></a><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a></td>
<td class="fieldname">
unmapped_total</td>
<td class="fielddoc">
Total amount of memory unmapped since initialization (only if ENABLE_STATISTICS=1) </td></tr>
</table>

</div>
</div>
<a name="d0/d25/structrpmalloc__thread__statistics__t" id="d0/d25/structrpmalloc__thread__statistics__t"></a>
<h2 class="memtitle"><span class="permalink"><a href="#d0/d25/structrpmalloc__thread__statistics__t">&#9670;&nbsp;</a></span>rpmalloc_thread_statistics_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct rpmalloc_thread_statistics_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="../../d2/d43/rpmalloc_8h_source.html#l00087">87</a> of file <a class="el" href="../../d2/d43/rpmalloc_8h_source.html">rpmalloc.h</a>.</p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="a29f83756e4d2a2bdebcfdfc8a8908081"></a><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a></td>
<td class="fieldname">
global_to_thread</td>
<td class="fielddoc">
Total number of bytes transitioned from global cache to thread cache (only if ENABLE_STATISTICS=1) </td></tr>
<tr><td class="fieldtype">
<a id="ac5a79462677dd135cae918db93f5dfe1"></a>struct <a class="el" href="../../d2/d43/rpmalloc_8h.html#d4/dd6/structrpmalloc__thread__statistics__t_8size__use">rpmalloc_thread_statistics_t</a></td>
<td class="fieldname">
size_use[128]</td>
<td class="fielddoc">
Per size class statistics (only if ENABLE_STATISTICS=1) </td></tr>
<tr><td class="fieldtype">
<a id="ae1b16b8970cd1354befab4f0e4b993ac"></a><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a></td>
<td class="fieldname">
sizecache</td>
<td class="fielddoc">
Current number of bytes available in thread size class caches for small and medium sizes (&lt;32KiB) </td></tr>
<tr><td class="fieldtype">
<a id="a5d0cd8aecab18855e794487437dc593a"></a>struct <a class="el" href="../../d2/d43/rpmalloc_8h.html#df/dbb/structrpmalloc__thread__statistics__t_8span__use">rpmalloc_thread_statistics_t</a></td>
<td class="fieldname">
span_use[64]</td>
<td class="fielddoc">
Per span count statistics (only if ENABLE_STATISTICS=1) </td></tr>
<tr><td class="fieldtype">
<a id="af75f9eeddb63a098824a555506334c8a"></a><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a></td>
<td class="fieldname">
spancache</td>
<td class="fielddoc">
Current number of bytes available in thread span caches for small and medium sizes (&lt;32KiB) </td></tr>
<tr><td class="fieldtype">
<a id="affc9a9b9fff3b494c0f0dd63884be0e4"></a><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a></td>
<td class="fieldname">
thread_to_global</td>
<td class="fielddoc">
Total number of bytes transitioned from thread cache to global cache (only if ENABLE_STATISTICS=1) </td></tr>
</table>

</div>
</div>
<a name="df/dbb/structrpmalloc__thread__statistics__t_8span__use" id="df/dbb/structrpmalloc__thread__statistics__t_8span__use"></a>
<h2 class="memtitle"><span class="permalink"><a href="#df/dbb/structrpmalloc__thread__statistics__t_8span__use">&#9670;&nbsp;</a></span>rpmalloc_thread_statistics_t.span_use</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct rpmalloc_thread_statistics_t.span_use</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>Per span count statistics (only if ENABLE_STATISTICS=1) </p>

<p class="definition">Definition at line <a class="el" href="../../d2/d43/rpmalloc_8h_source.html#l00098">98</a> of file <a class="el" href="../../d2/d43/rpmalloc_8h_source.html">rpmalloc.h</a>.</p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="a43b5c9175984c071f30b873fdce0a000"></a><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a></td>
<td class="fieldname">
current</td>
<td class="fielddoc">
Currently used number of spans. </td></tr>
<tr><td class="fieldtype">
<a id="a223d680d597da186b9c777bb76e9093b"></a><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a></td>
<td class="fieldname">
from_cache</td>
<td class="fielddoc">
Number of spans transitioned from thread cache. </td></tr>
<tr><td class="fieldtype">
<a id="a4131727663e60249af1324b09055c74b"></a><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a></td>
<td class="fieldname">
from_global</td>
<td class="fielddoc">
Number of spans transitioned from global cache. </td></tr>
<tr><td class="fieldtype">
<a id="a21c50db268ca3dbafa60742bac4c2d42"></a><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a></td>
<td class="fieldname">
from_reserved</td>
<td class="fielddoc">
Number of spans transitioned from reserved state. </td></tr>
<tr><td class="fieldtype">
<a id="abbb5ec4fe467ecee0ad9b697b9753e84"></a><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a></td>
<td class="fieldname">
map_calls</td>
<td class="fielddoc">
Number of raw memory map calls (not hitting the reserve spans but resulting in actual OS mmap calls) </td></tr>
<tr><td class="fieldtype">
<a id="a34213baa0bd3b53ee9dd8098e70da2c7"></a><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a></td>
<td class="fieldname">
peak</td>
<td class="fielddoc">
High water mark of spans used. </td></tr>
<tr><td class="fieldtype">
<a id="a734575253e0adb2352bd6304190bc342"></a><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a></td>
<td class="fieldname">
to_cache</td>
<td class="fielddoc">
Number of spans transitioned to thread cache. </td></tr>
<tr><td class="fieldtype">
<a id="a2b59c56c05080a8b0f136c98b57ed3fd"></a><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a></td>
<td class="fieldname">
to_global</td>
<td class="fielddoc">
Number of spans transitioned to global cache. </td></tr>
<tr><td class="fieldtype">
<a id="a5939cd92469480539c882ed187ee69cb"></a><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a></td>
<td class="fieldname">
to_reserved</td>
<td class="fielddoc">
Number of spans transitioned to reserved state. </td></tr>
</table>

</div>
</div>
<a name="d4/dd6/structrpmalloc__thread__statistics__t_8size__use" id="d4/dd6/structrpmalloc__thread__statistics__t_8size__use"></a>
<h2 class="memtitle"><span class="permalink"><a href="#d4/dd6/structrpmalloc__thread__statistics__t_8size__use">&#9670;&nbsp;</a></span>rpmalloc_thread_statistics_t.size_use</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct rpmalloc_thread_statistics_t.size_use</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>Per size class statistics (only if ENABLE_STATISTICS=1) </p>

<p class="definition">Definition at line <a class="el" href="../../d2/d43/rpmalloc_8h_source.html#l00120">120</a> of file <a class="el" href="../../d2/d43/rpmalloc_8h_source.html">rpmalloc.h</a>.</p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="a39cc225282a6759cf2db47079d88b886"></a><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a></td>
<td class="fieldname">
alloc_current</td>
<td class="fielddoc">
Current number of allocations. </td></tr>
<tr><td class="fieldtype">
<a id="ae0dae1b74ae022beca542b2ff4a5e341"></a><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a></td>
<td class="fieldname">
alloc_peak</td>
<td class="fielddoc">
Peak number of allocations. </td></tr>
<tr><td class="fieldtype">
<a id="a4774555fc359e883021e2d814309152f"></a><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a></td>
<td class="fieldname">
alloc_total</td>
<td class="fielddoc">
Total number of allocations. </td></tr>
<tr><td class="fieldtype">
<a id="a6fbf81ffc4ee24452838538d6ec1299d"></a><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a></td>
<td class="fieldname">
free_total</td>
<td class="fielddoc">
Total number of frees. </td></tr>
<tr><td class="fieldtype">
<a id="abbb5ec4fe467ecee0ad9b697b9753e84"></a><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a></td>
<td class="fieldname">
map_calls</td>
<td class="fielddoc">
Number of raw memory map calls (not hitting the reserve spans but resulting in actual OS mmap calls) </td></tr>
<tr><td class="fieldtype">
<a id="ac7d40fd56f0e4da3436c4a6070f87683"></a><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a></td>
<td class="fieldname">
spans_from_cache</td>
<td class="fielddoc">
Number of spans transitioned from cache. </td></tr>
<tr><td class="fieldtype">
<a id="a95e4e0f703dbe344785b295b1f8c739b"></a><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a></td>
<td class="fieldname">
spans_from_reserved</td>
<td class="fielddoc">
Number of spans transitioned from reserved state. </td></tr>
<tr><td class="fieldtype">
<a id="a648f595f33c06da92bdd6eeeac080e1e"></a><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a></td>
<td class="fieldname">
spans_to_cache</td>
<td class="fielddoc">
Number of spans transitioned to cache. </td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a85561f3ac6a729bf480cdf706d6c75dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85561f3ac6a729bf480cdf706d6c75dc">&#9670;&nbsp;</a></span>RPMALLOC_ALLOCATOR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RPMALLOC_ALLOCATOR</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/d43/rpmalloc_8h_source.html#l00043">43</a> of file <a class="el" href="../../d2/d43/rpmalloc_8h_source.html">rpmalloc.h</a>.</p>

</div>
</div>
<a id="aa78a4db7a8c062ad908eb3756e88cc8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa78a4db7a8c062ad908eb3756e88cc8a">&#9670;&nbsp;</a></span>RPMALLOC_ATTRIB_ALLOC_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RPMALLOC_ATTRIB_ALLOC_SIZE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="../../d7/d06/getpwent_8c.html#a854352f53b148adc24983a58a1866d66">size</a></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/d43/rpmalloc_8h_source.html#l00045">45</a> of file <a class="el" href="../../d2/d43/rpmalloc_8h_source.html">rpmalloc.h</a>.</p>

</div>
</div>
<a id="a5a97eca6d8747153e041a7acbdf2d2d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a97eca6d8747153e041a7acbdf2d2d4">&#9670;&nbsp;</a></span>RPMALLOC_ATTRIB_ALLOC_SIZE2</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RPMALLOC_ATTRIB_ALLOC_SIZE2</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="../../d8/d48/at__quick__exit_8c.html#ad43c3812e6d13e0518d9f8b8f463ffcf">count</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="../../d7/d06/getpwent_8c.html#a854352f53b148adc24983a58a1866d66">size</a>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/d43/rpmalloc_8h_source.html#l00046">46</a> of file <a class="el" href="../../d2/d43/rpmalloc_8h_source.html">rpmalloc.h</a>.</p>

</div>
</div>
<a id="aaec208006a1707aadcfb577cd0e05014"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaec208006a1707aadcfb577cd0e05014">&#9670;&nbsp;</a></span>RPMALLOC_ATTRIB_MALLOC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RPMALLOC_ATTRIB_MALLOC</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/d43/rpmalloc_8h_source.html#l00044">44</a> of file <a class="el" href="../../d2/d43/rpmalloc_8h_source.html">rpmalloc.h</a>.</p>

</div>
</div>
<a id="a5c6929e86935eadfa5b1dc9c9ff2cd60"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c6929e86935eadfa5b1dc9c9ff2cd60">&#9670;&nbsp;</a></span>RPMALLOC_CDECL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RPMALLOC_CDECL</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/d43/rpmalloc_8h_source.html#l00047">47</a> of file <a class="el" href="../../d2/d43/rpmalloc_8h_source.html">rpmalloc.h</a>.</p>

</div>
</div>
<a id="a6dccadaf86473444d85530d361d4109d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6dccadaf86473444d85530d361d4109d">&#9670;&nbsp;</a></span>RPMALLOC_CONFIGURABLE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RPMALLOC_CONFIGURABLE&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Define RPMALLOC_CONFIGURABLE to enable configuring sizes. Will introduce. </p>

<p class="definition">Definition at line <a class="el" href="../../d2/d43/rpmalloc_8h_source.html#l00053">53</a> of file <a class="el" href="../../d2/d43/rpmalloc_8h_source.html">rpmalloc.h</a>.</p>

</div>
</div>
<a id="a2d18f870b8bad81e931c8c0a01e3672b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d18f870b8bad81e931c8c0a01e3672b">&#9670;&nbsp;</a></span>RPMALLOC_EXPORT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RPMALLOC_EXPORT</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/d43/rpmalloc_8h_source.html#l00042">42</a> of file <a class="el" href="../../d2/d43/rpmalloc_8h_source.html">rpmalloc.h</a>.</p>

</div>
</div>
<a id="aa20456aea27df9da3c00efecb1dba3b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa20456aea27df9da3c00efecb1dba3b4">&#9670;&nbsp;</a></span>RPMALLOC_FIRST_CLASS_HEAPS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RPMALLOC_FIRST_CLASS_HEAPS&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Define RPMALLOC_FIRST_CLASS_HEAPS to enable heap based API (rpmalloc_heap_* functions). </p>

<p class="definition">Definition at line <a class="el" href="../../d2/d43/rpmalloc_8h_source.html#l00059">59</a> of file <a class="el" href="../../d2/d43/rpmalloc_8h_source.html">rpmalloc.h</a>.</p>

</div>
</div>
<a id="ab3774a093749aeca1d4e387b11e79395"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3774a093749aeca1d4e387b11e79395">&#9670;&nbsp;</a></span>RPMALLOC_GROW_OR_FAIL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RPMALLOC_GROW_OR_FAIL&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Flag to rpaligned_realloc to fail and return null pointer if grow cannot be done in-place,. </p>

<p class="definition">Definition at line <a class="el" href="../../d2/d43/rpmalloc_8h_source.html#l00067">67</a> of file <a class="el" href="../../d2/d43/rpmalloc_8h_source.html">rpmalloc.h</a>.</p>

</div>
</div>
<a id="affda05352198b9ef86d42be851a1349f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#affda05352198b9ef86d42be851a1349f">&#9670;&nbsp;</a></span>RPMALLOC_NO_PRESERVE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RPMALLOC_NO_PRESERVE&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Flag to rpaligned_realloc to not preserve content in reallocation. </p>

<p class="definition">Definition at line <a class="el" href="../../d2/d43/rpmalloc_8h_source.html#l00063">63</a> of file <a class="el" href="../../d2/d43/rpmalloc_8h_source.html">rpmalloc.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="afea1bd62321a935b2ce6e268c7bcaf10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afea1bd62321a935b2ce6e268c7bcaf10">&#9670;&nbsp;</a></span>rpmalloc_config_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="../../df/d42/structrpmalloc__config__t.html">rpmalloc_config_t</a> <a class="el" href="../../df/d42/structrpmalloc__config__t.html">rpmalloc_config_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a8ed79e533ed034f305cf34cff57bd4a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ed79e533ed034f305cf34cff57bd4a7">&#9670;&nbsp;</a></span>rpmalloc_global_statistics_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="../../d2/d43/rpmalloc_8h.html#d1/d1a/structrpmalloc__global__statistics__t">rpmalloc_global_statistics_t</a> <a class="el" href="../../d2/d43/rpmalloc_8h.html#d1/d1a/structrpmalloc__global__statistics__t">rpmalloc_global_statistics_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aaef706ac2be95d5a4f00bfab78128234"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaef706ac2be95d5a4f00bfab78128234">&#9670;&nbsp;</a></span>rpmalloc_thread_statistics_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="../../d2/d43/rpmalloc_8h.html#d0/d25/structrpmalloc__thread__statistics__t">rpmalloc_thread_statistics_t</a> <a class="el" href="../../d2/d43/rpmalloc_8h.html#d0/d25/structrpmalloc__thread__statistics__t">rpmalloc_thread_statistics_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a657912db3072a6b4e9fa221f13c64c27"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a657912db3072a6b4e9fa221f13c64c27">&#9670;&nbsp;</a></span>rpaligned_alloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a2d18f870b8bad81e931c8c0a01e3672b">RPMALLOC_EXPORT</a> <a class="el" href="../../d2/d43/rpmalloc_8h.html#a85561f3ac6a729bf480cdf706d6c75dc">RPMALLOC_ALLOCATOR</a> void* rpaligned_alloc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>&#160;</td>
          <td class="paramname"><em>alignment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocate a memory block of at least the given size and alignment. </p>

<p class="definition">Definition at line <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l03140">3140</a> of file <a class="el" href="../../df/dc0/rpmalloc_8c_source.html">rpmalloc.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;{</div>
<div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;    <a class="code" href="../../d1/d7e/rpmalloc__compat_8cpp.html#d9/d8a/structheap__t">heap_t</a> *<a class="code" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a> = <a class="code" href="../../df/dc0/rpmalloc_8c.html#ae75d84f0a9ac27b96d18fcd652249cda">get_thread_heap</a>();</div>
<div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../df/dc0/rpmalloc_8c.html#a4be7846b7aabc5b469a4cc66dbc6fb36">_rpmalloc_aligned_allocate</a>(<a class="code" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a>, alignment, <a class="code" href="../../d1/dc0/multiboot_8h.html#a6d813a0f2b5281b18dea3f4cda696c33">size</a>);</div>
<div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;}</div>
<div class="ttc" id="ahuffman_8c_html_a256be6651fb2d98e76c466f9db72c614"><div class="ttname"><a href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a></div><div class="ttdeci">#define heap</div></div>
<div class="ttc" id="amultiboot_8h_html_a6d813a0f2b5281b18dea3f4cda696c33"><div class="ttname"><a href="../../d1/dc0/multiboot_8h.html#a6d813a0f2b5281b18dea3f4cda696c33">size</a></div><div class="ttdeci">multiboot_uint32_t size</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/multiboot_8h_source.html#l00000">multiboot.h:0</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_a4be7846b7aabc5b469a4cc66dbc6fb36"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#a4be7846b7aabc5b469a4cc66dbc6fb36">_rpmalloc_aligned_allocate</a></div><div class="ttdeci">static void * _rpmalloc_aligned_allocate(heap_t *heap, size_t alignment, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l02302">rpmalloc.c:2302</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_ae75d84f0a9ac27b96d18fcd652249cda"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#ae75d84f0a9ac27b96d18fcd652249cda">get_thread_heap</a></div><div class="ttdeci">static heap_t * get_thread_heap(void)</div><div class="ttdoc">Get the current thread heap.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00717">rpmalloc.c:717</a></div></div>
<div class="ttc" id="arpmalloc__compat_8cpp_html_d9/d8a/structheap__t"><div class="ttname"><a href="../../d1/d7e/rpmalloc__compat_8cpp.html#d9/d8a/structheap__t">heap_t</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00496">rpmalloc.c:497</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l02302">_rpmalloc_aligned_allocate()</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00717">get_thread_heap()</a>, <a class="el" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a>, and <a class="el" href="../../d1/dc0/multiboot_8h_source.html#l00000">size</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l03147">rpaligned_calloc()</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l03163">rpmemalign()</a>, and <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l03169">rpposix_memalign()</a>.</p>

</div>
</div>
<a id="a121a9d09a4a46a336c0b5a250b7b66b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a121a9d09a4a46a336c0b5a250b7b66b0">&#9670;&nbsp;</a></span>rpaligned_calloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a2d18f870b8bad81e931c8c0a01e3672b">RPMALLOC_EXPORT</a> <a class="el" href="../../d2/d43/rpmalloc_8h.html#a85561f3ac6a729bf480cdf706d6c75dc">RPMALLOC_ALLOCATOR</a> void* rpaligned_calloc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>&#160;</td>
          <td class="paramname"><em>alignment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>&#160;</td>
          <td class="paramname"><em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocate a memory block of at least the given size and alignment, and zero initialize it. </p>

</div>
</div>
<a id="af02d9e329d817c877a2cbe5b155cd9d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af02d9e329d817c877a2cbe5b155cd9d3">&#9670;&nbsp;</a></span>rpaligned_realloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a2d18f870b8bad81e931c8c0a01e3672b">RPMALLOC_EXPORT</a> <a class="el" href="../../d2/d43/rpmalloc_8h.html#a85561f3ac6a729bf480cdf706d6c75dc">RPMALLOC_ALLOCATOR</a> void* rpaligned_realloc </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>&#160;</td>
          <td class="paramname"><em>alignment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>&#160;</td>
          <td class="paramname"><em>oldsize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reallocate the given block to at least the given size and alignment,. </p>

<p class="definition">Definition at line <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l03129">3129</a> of file <a class="el" href="../../df/dc0/rpmalloc_8c_source.html">rpmalloc.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;{</div>
<div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;<span class="preprocessor">#if ENABLE_VALIDATE_ARGS</span></div>
<div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;    <a class="code" href="../../dc/d6b/Kernel_2include__std_2assert_8h.html#af576bf8ffa22a44e53018c67095ffbf0">assert</a>((<a class="code" href="../../d1/dc0/multiboot_8h.html#a6d813a0f2b5281b18dea3f4cda696c33">size</a> + alignment) &gt;= <a class="code" href="../../d1/dc0/multiboot_8h.html#a6d813a0f2b5281b18dea3f4cda696c33">size</a> &amp;&amp; (alignment &lt;= <a class="code" href="../../df/dc0/rpmalloc_8c.html#a3667b745f7290a10ff5c5a71575533d9">_memory_page_size</a>));</div>
<div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;    <a class="code" href="../../d1/d7e/rpmalloc__compat_8cpp.html#d9/d8a/structheap__t">heap_t</a> *<a class="code" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a> = <a class="code" href="../../df/dc0/rpmalloc_8c.html#ae75d84f0a9ac27b96d18fcd652249cda">get_thread_heap</a>();</div>
<div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../df/dc0/rpmalloc_8c.html#a0d0546abbe1244019d00ecf28aac359c">_rpmalloc_aligned_reallocate</a>(<a class="code" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a>, ptr, alignment, <a class="code" href="../../d1/dc0/multiboot_8h.html#a6d813a0f2b5281b18dea3f4cda696c33">size</a>, oldsize, <a class="code" href="../../db/d66/dumpkmap_8c.html#abb0829cce9dd20a40ae0d86890ae85c6">flags</a>);</div>
<div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;}</div>
<div class="ttc" id="aKernel_2include__std_2assert_8h_html_af576bf8ffa22a44e53018c67095ffbf0"><div class="ttname"><a href="../../dc/d6b/Kernel_2include__std_2assert_8h.html#af576bf8ffa22a44e53018c67095ffbf0">assert</a></div><div class="ttdeci">#define assert(x)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d6b/Kernel_2include__std_2assert_8h_source.html#l00023">assert.h:23</a></div></div>
<div class="ttc" id="adumpkmap_8c_html_abb0829cce9dd20a40ae0d86890ae85c6"><div class="ttname"><a href="../../db/d66/dumpkmap_8c.html#abb0829cce9dd20a40ae0d86890ae85c6">flags</a></div><div class="ttdeci">#define flags</div></div>
<div class="ttc" id="arpmalloc_8c_html_a0d0546abbe1244019d00ecf28aac359c"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#a0d0546abbe1244019d00ecf28aac359c">_rpmalloc_aligned_reallocate</a></div><div class="ttdeci">static void * _rpmalloc_aligned_reallocate(heap_t *heap, void *ptr, size_t alignment, size_t size, size_t oldsize, unsigned int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l02729">rpmalloc.c:2729</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_a3667b745f7290a10ff5c5a71575533d9"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#a3667b745f7290a10ff5c5a71575533d9">_memory_page_size</a></div><div class="ttdeci">static size_t _memory_page_size</div><div class="ttdoc">Memory page size.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00604">rpmalloc.c:604</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00604">_memory_page_size</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l02729">_rpmalloc_aligned_reallocate()</a>, <a class="el" href="../../dc/d6b/Kernel_2include__std_2assert_8h_source.html#l00023">assert</a>, <a class="el" href="../../db/d66/dumpkmap_8c.html#abb0829cce9dd20a40ae0d86890ae85c6">flags</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00717">get_thread_heap()</a>, <a class="el" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a>, and <a class="el" href="../../d1/dc0/multiboot_8h_source.html#l00000">size</a>.</p>

</div>
</div>
<a id="a8993488ecdc244782f4b7527bcc3d6f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8993488ecdc244782f4b7527bcc3d6f4">&#9670;&nbsp;</a></span>rpcalloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a2d18f870b8bad81e931c8c0a01e3672b">RPMALLOC_EXPORT</a> <a class="el" href="../../d2/d43/rpmalloc_8h.html#a85561f3ac6a729bf480cdf706d6c75dc">RPMALLOC_ALLOCATOR</a> void* rpcalloc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>&#160;</td>
          <td class="paramname"><em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocate a memory block of at least the given size and zero initialize it. </p>

</div>
</div>
<a id="a608a7c1ac37d930b1d82748d98009149"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a608a7c1ac37d930b1d82748d98009149">&#9670;&nbsp;</a></span>rpfree()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a2d18f870b8bad81e931c8c0a01e3672b">RPMALLOC_EXPORT</a> void rpfree </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Free the given memory block. </p>

<p class="definition">Definition at line <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l03096">3096</a> of file <a class="el" href="../../df/dc0/rpmalloc_8c_source.html">rpmalloc.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;{</div>
<div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;    <a class="code" href="../../df/dc0/rpmalloc_8c.html#ae324fa158db468143544693dfe539800">_rpmalloc_deallocate</a>(ptr);</div>
<div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;}</div>
<div class="ttc" id="arpmalloc_8c_html_ae324fa158db468143544693dfe539800"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#ae324fa158db468143544693dfe539800">_rpmalloc_deallocate</a></div><div class="ttdeci">static void _rpmalloc_deallocate(void *p)</div><div class="ttdoc">Deallocate the given block.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l02615">rpmalloc.c:2615</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l02615">_rpmalloc_deallocate()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d71/memory_8cpp_source.html#l00565">free()</a>.</p>

</div>
</div>
<a id="a133b388f5ecf5412a1b6ad2aa066d520"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a133b388f5ecf5412a1b6ad2aa066d520">&#9670;&nbsp;</a></span>rpmalloc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a2d18f870b8bad81e931c8c0a01e3672b">RPMALLOC_EXPORT</a> <a class="el" href="../../d2/d43/rpmalloc_8h.html#a85561f3ac6a729bf480cdf706d6c75dc">RPMALLOC_ALLOCATOR</a> void* rpmalloc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>&#160;</td>
          <td class="paramname"><em>size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Allocate a memory block of at least the given size. </p>

<p class="definition">Definition at line <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l03086">3086</a> of file <a class="el" href="../../df/dc0/rpmalloc_8c_source.html">rpmalloc.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;{</div>
<div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;<span class="preprocessor">#if ENABLE_VALIDATE_ARGS</span></div>
<div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;    <a class="code" href="../../dc/d6b/Kernel_2include__std_2assert_8h.html#af576bf8ffa22a44e53018c67095ffbf0">assert</a>(<a class="code" href="../../d1/dc0/multiboot_8h.html#a6d813a0f2b5281b18dea3f4cda696c33">size</a> &lt; <a class="code" href="../../df/dc0/rpmalloc_8c.html#a6ea14607e2b19ee5aa336addd0fdde01">MAX_ALLOC_SIZE</a>);</div>
<div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;    <a class="code" href="../../d1/d7e/rpmalloc__compat_8cpp.html#d9/d8a/structheap__t">heap_t</a> *<a class="code" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a> = <a class="code" href="../../df/dc0/rpmalloc_8c.html#ae75d84f0a9ac27b96d18fcd652249cda">get_thread_heap</a>();</div>
<div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../df/dc0/rpmalloc_8c.html#af8bd0cd08a93d20cb117e18d85f877cd">_rpmalloc_allocate</a>(<a class="code" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a>, <a class="code" href="../../d1/dc0/multiboot_8h.html#a6d813a0f2b5281b18dea3f4cda696c33">size</a>);</div>
<div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;}</div>
<div class="ttc" id="arpmalloc_8c_html_a6ea14607e2b19ee5aa336addd0fdde01"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#a6ea14607e2b19ee5aa336addd0fdde01">MAX_ALLOC_SIZE</a></div><div class="ttdeci">#define MAX_ALLOC_SIZE</div><div class="ttdoc">Maximum allocation size to avoid integer overflow.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00326">rpmalloc.c:326</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_af8bd0cd08a93d20cb117e18d85f877cd"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#af8bd0cd08a93d20cb117e18d85f877cd">_rpmalloc_allocate</a></div><div class="ttdeci">static void * _rpmalloc_allocate(heap_t *heap, size_t size)</div><div class="ttdoc">Allocate a block of the given size.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l02289">rpmalloc.c:2289</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l02289">_rpmalloc_allocate()</a>, <a class="el" href="../../dc/d6b/Kernel_2include__std_2assert_8h_source.html#l00023">assert</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00717">get_thread_heap()</a>, <a class="el" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00326">MAX_ALLOC_SIZE</a>, and <a class="el" href="../../d1/dc0/multiboot_8h_source.html#l00000">size</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d71/memory_8cpp_source.html#l00424">malloc()</a>.</p>

</div>
</div>
<a id="ae3544fcade64cec7d4a376747dbbaa01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3544fcade64cec7d4a376747dbbaa01">&#9670;&nbsp;</a></span>rpmalloc_config()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a2d18f870b8bad81e931c8c0a01e3672b">RPMALLOC_EXPORT</a> const <a class="el" href="../../df/d42/structrpmalloc__config__t.html">rpmalloc_config_t</a>* rpmalloc_config </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get allocator configuration. </p>

<p class="definition">Definition at line <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l03078">3078</a> of file <a class="el" href="../../df/dc0/rpmalloc_8c_source.html">rpmalloc.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;{</div>
<div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;    <span class="keywordflow">return</span> &amp;<a class="code" href="../../df/dc0/rpmalloc_8c.html#ae1f1297fe3d143e41deac95ee7a7f8d4">_memory_config</a>;</div>
<div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;}</div>
<div class="ttc" id="arpmalloc_8c_html_ae1f1297fe3d143e41deac95ee7a7f8d4"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#ae1f1297fe3d143e41deac95ee7a7f8d4">_memory_config</a></div><div class="ttdeci">static rpmalloc_config_t _memory_config</div><div class="ttdoc">Configuration.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00602">rpmalloc.c:602</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00602">_memory_config</a>.</p>

</div>
</div>
<a id="a3c33a5925ba558f8dc534c668e344db1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c33a5925ba558f8dc534c668e344db1">&#9670;&nbsp;</a></span>rpmalloc_dump_statistics()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a2d18f870b8bad81e931c8c0a01e3672b">RPMALLOC_EXPORT</a> void rpmalloc_dump_statistics </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>file</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Dump all statistics in human readable format to file (should be a FILE*) </p>

<p class="definition">Definition at line <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l03335">3335</a> of file <a class="el" href="../../df/dc0/rpmalloc_8c_source.html">rpmalloc.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160;{</div>
<div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;<span class="preprocessor">#if ENABLE_STATISTICS</span></div>
<div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> list_idx = 0; list_idx &lt; <a class="code" href="../../df/dc0/rpmalloc_8c.html#ac7e4a352a230ef04d4372db43a454b7f">HEAP_ARRAY_SIZE</a>; ++list_idx)</div>
<div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;    {</div>
<div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;        <a class="code" href="../../d1/d7e/rpmalloc__compat_8cpp.html#d9/d8a/structheap__t">heap_t</a> *<a class="code" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a> = <a class="code" href="../../df/dc0/rpmalloc_8c.html#a3e39052a111a2e243645494f1d6ca439">_memory_heaps</a>[list_idx];</div>
<div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160;        <span class="keywordflow">while</span> (<a class="code" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a>)</div>
<div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160;        {</div>
<div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;            <span class="keywordtype">int</span> need_dump = 0;</div>
<div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> iclass = 0; !need_dump &amp;&amp; (iclass &lt; <a class="code" href="../../df/dc0/rpmalloc_8c.html#aa74d427b2b9955ff2d9719693d9fc80e">SIZE_CLASS_COUNT</a>); ++iclass)</div>
<div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;            {</div>
<div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160;                <span class="keywordflow">if</span> (!atomic_load32(&amp;<a class="code" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a>-&gt;size_class_use[iclass].alloc_total))</div>
<div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;                {</div>
<div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;                    <a class="code" href="../../df/dc0/rpmalloc_8c.html#ad008ddf766a4f56fbde2edf2c51d9a87">rpmalloc_assert</a>(!atomic_load32(&amp;<a class="code" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a>-&gt;size_class_use[iclass].free_total), <span class="stringliteral">&quot;Heap statistics counter mismatch&quot;</span>);</div>
<div class="line"><a name="l03349"></a><span class="lineno"> 3349</span>&#160;                    <a class="code" href="../../df/dc0/rpmalloc_8c.html#ad008ddf766a4f56fbde2edf2c51d9a87">rpmalloc_assert</a>(!atomic_load32(&amp;<a class="code" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a>-&gt;size_class_use[iclass].spans_map_calls), <span class="stringliteral">&quot;Heap statistics counter mismatch&quot;</span>);</div>
<div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160;                }</div>
<div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160;                need_dump = 1;</div>
<div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160;            }</div>
<div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> iclass = 0; !need_dump &amp;&amp; (iclass &lt; <a class="code" href="../../df/dc0/rpmalloc_8c.html#a04406da3f5ff4e24f155c97591678ed9">LARGE_CLASS_COUNT</a>); ++iclass)</div>
<div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;            {</div>
<div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;                <span class="keywordflow">if</span> (!atomic_load32(&amp;<a class="code" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a>-&gt;span_use[iclass].high) &amp;&amp; !atomic_load32(&amp;<a class="code" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a>-&gt;span_use[iclass].spans_map_calls))</div>
<div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160;                need_dump = 1;</div>
<div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160;            }</div>
<div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160;            <span class="keywordflow">if</span> (need_dump)</div>
<div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160;                _memory_heap_dump_statistics(<a class="code" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a>, <a class="code" href="../../d4/d78/expr_8h.html#d7/d3a/structfile">file</a>);</div>
<div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;            <a class="code" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a> = <a class="code" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a>-&gt;next_heap;</div>
<div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;        }</div>
<div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;    }</div>
<div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;    <a class="code" href="../../d1/d6d/kernel__config_8cpp.html#a4db4281a3169b26f4f69f18f20440e5d">fprintf</a>(<a class="code" href="../../d4/d78/expr_8h.html#d7/d3a/structfile">file</a>, <span class="stringliteral">&quot;Global stats:\n&quot;</span>);</div>
<div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;    <span class="keywordtype">size_t</span> huge_current = (<a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>)atomic_load32(&amp;_huge_pages_current) * <a class="code" href="../../df/dc0/rpmalloc_8c.html#a3667b745f7290a10ff5c5a71575533d9">_memory_page_size</a>;</div>
<div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160;    <span class="keywordtype">size_t</span> huge_peak = (<a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>)_huge_pages_peak * <a class="code" href="../../df/dc0/rpmalloc_8c.html#a3667b745f7290a10ff5c5a71575533d9">_memory_page_size</a>;</div>
<div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;    <a class="code" href="../../d1/d6d/kernel__config_8cpp.html#a4db4281a3169b26f4f69f18f20440e5d">fprintf</a>(<a class="code" href="../../d4/d78/expr_8h.html#d7/d3a/structfile">file</a>, <span class="stringliteral">&quot;HugeCurrentMiB HugePeakMiB\n&quot;</span>);</div>
<div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160;    <a class="code" href="../../d1/d6d/kernel__config_8cpp.html#a4db4281a3169b26f4f69f18f20440e5d">fprintf</a>(<a class="code" href="../../d4/d78/expr_8h.html#d7/d3a/structfile">file</a>, <span class="stringliteral">&quot;%14zu %11zu\n&quot;</span>, huge_current / (<span class="keywordtype">size_t</span>)(1024 * 1024), huge_peak / (<span class="keywordtype">size_t</span>)(1024 * 1024));</div>
<div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160; </div>
<div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;    <a class="code" href="../../d1/d6d/kernel__config_8cpp.html#a4db4281a3169b26f4f69f18f20440e5d">fprintf</a>(<a class="code" href="../../d4/d78/expr_8h.html#d7/d3a/structfile">file</a>, <span class="stringliteral">&quot;GlobalCacheMiB\n&quot;</span>);</div>
<div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> iclass = 0; iclass &lt; <a class="code" href="../../df/dc0/rpmalloc_8c.html#a04406da3f5ff4e24f155c97591678ed9">LARGE_CLASS_COUNT</a>; ++iclass)</div>
<div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;    {</div>
<div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160;        <a class="code" href="../../df/dc0/rpmalloc_8c.html#db/d6b/structglobal__cache__t">global_cache_t</a> *cache = <a class="code" href="../../df/dc0/rpmalloc_8c.html#ad7af40ab0c9174515ec06efb45ebdd73">_memory_span_cache</a> + iclass;</div>
<div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160;        <span class="keywordtype">size_t</span> global_cache = (<a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>)cache-&gt;<a class="code" href="../../df/dc0/rpmalloc_8c.html#a440c6f31099f3836f7beb5e47d14fb2d">count</a> * iclass * <a class="code" href="../../df/dc0/rpmalloc_8c.html#a9fefa5277fefa0c58f69d5b86d679ccb">_memory_span_size</a>;</div>
<div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160; </div>
<div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160;        <span class="keywordtype">size_t</span> global_overflow_cache = 0;</div>
<div class="line"><a name="l03378"></a><span class="lineno"> 3378</span>&#160;        <a class="code" href="../../df/dc0/rpmalloc_8c.html#d1/d24/structspan__t">span_t</a> *span = cache-&gt;<a class="code" href="../../df/dc0/rpmalloc_8c.html#a8bb140aee00ffae527f7c0706d98c3d1">overflow</a>;</div>
<div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160;        <a class="code" href="../../d8/d64/glob__loop_8c.html#ac5ea133c26adb9b160cb33f3db9301f6">while</a> (span)</div>
<div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160;        {</div>
<div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160;            global_overflow_cache += iclass * <a class="code" href="../../df/dc0/rpmalloc_8c.html#a9fefa5277fefa0c58f69d5b86d679ccb">_memory_span_size</a>;</div>
<div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160;            span = span-&gt;next;</div>
<div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160;        }</div>
<div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;        <span class="keywordflow">if</span> (global_cache || global_overflow_cache || cache-&gt;insert_count || cache-&gt;extract_count)</div>
<div class="line"><a name="l03385"></a><span class="lineno"> 3385</span>&#160;            <a class="code" href="../../d1/d6d/kernel__config_8cpp.html#a4db4281a3169b26f4f69f18f20440e5d">fprintf</a>(<a class="code" href="../../d4/d78/expr_8h.html#d7/d3a/structfile">file</a>, <span class="stringliteral">&quot;%4zu: %8zuMiB (%8zuMiB overflow) %14zu insert %14zu extract\n&quot;</span>, iclass + 1, global_cache / (<span class="keywordtype">size_t</span>)(1024 * 1024), global_overflow_cache / (<span class="keywordtype">size_t</span>)(1024 * 1024), cache-&gt;insert_count, cache-&gt;extract_count);</div>
<div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160;    }</div>
<div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160; </div>
<div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;    <span class="keywordtype">size_t</span> mapped = (<a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>)atomic_load32(&amp;_mapped_pages) * <a class="code" href="../../df/dc0/rpmalloc_8c.html#a3667b745f7290a10ff5c5a71575533d9">_memory_page_size</a>;</div>
<div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160;    <span class="keywordtype">size_t</span> mapped_os = (<a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>)atomic_load32(&amp;_mapped_pages_os) * <a class="code" href="../../df/dc0/rpmalloc_8c.html#a3667b745f7290a10ff5c5a71575533d9">_memory_page_size</a>;</div>
<div class="line"><a name="l03390"></a><span class="lineno"> 3390</span>&#160;    <span class="keywordtype">size_t</span> mapped_peak = (<a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>)_mapped_pages_peak * <a class="code" href="../../df/dc0/rpmalloc_8c.html#a3667b745f7290a10ff5c5a71575533d9">_memory_page_size</a>;</div>
<div class="line"><a name="l03391"></a><span class="lineno"> 3391</span>&#160;    <span class="keywordtype">size_t</span> mapped_total = (<a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>)atomic_load32(&amp;_mapped_total) * <a class="code" href="../../df/dc0/rpmalloc_8c.html#a3667b745f7290a10ff5c5a71575533d9">_memory_page_size</a>;</div>
<div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160;    <span class="keywordtype">size_t</span> unmapped_total = (<a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>)atomic_load32(&amp;_unmapped_total) * <a class="code" href="../../df/dc0/rpmalloc_8c.html#a3667b745f7290a10ff5c5a71575533d9">_memory_page_size</a>;</div>
<div class="line"><a name="l03393"></a><span class="lineno"> 3393</span>&#160;    <a class="code" href="../../d1/d6d/kernel__config_8cpp.html#a4db4281a3169b26f4f69f18f20440e5d">fprintf</a>(<a class="code" href="../../d4/d78/expr_8h.html#d7/d3a/structfile">file</a>, <span class="stringliteral">&quot;MappedMiB MappedOSMiB MappedPeakMiB MappedTotalMiB UnmappedTotalMiB\n&quot;</span>);</div>
<div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160;    <a class="code" href="../../d1/d6d/kernel__config_8cpp.html#a4db4281a3169b26f4f69f18f20440e5d">fprintf</a>(<a class="code" href="../../d4/d78/expr_8h.html#d7/d3a/structfile">file</a>, <span class="stringliteral">&quot;%9zu %11zu %13zu %14zu %16zu\n&quot;</span>,</div>
<div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160;            mapped / (<span class="keywordtype">size_t</span>)(1024 * 1024),</div>
<div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160;            mapped_os / (<span class="keywordtype">size_t</span>)(1024 * 1024),</div>
<div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160;            mapped_peak / (<span class="keywordtype">size_t</span>)(1024 * 1024),</div>
<div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;            mapped_total / (<span class="keywordtype">size_t</span>)(1024 * 1024),</div>
<div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160;            unmapped_total / (<span class="keywordtype">size_t</span>)(1024 * 1024));</div>
<div class="line"><a name="l03400"></a><span class="lineno"> 3400</span>&#160; </div>
<div class="line"><a name="l03401"></a><span class="lineno"> 3401</span>&#160;    <a class="code" href="../../d1/d6d/kernel__config_8cpp.html#a4db4281a3169b26f4f69f18f20440e5d">fprintf</a>(<a class="code" href="../../d4/d78/expr_8h.html#d7/d3a/structfile">file</a>, <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l03402"></a><span class="lineno"> 3402</span>&#160;<span class="preprocessor">#if 0</span></div>
<div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160;    <a class="code" href="../../dd/ddd/arithmetic__operations_8c.html#a996e72f71b11a5bb8b3b7b6936b1516d">int64_t</a> allocated = <a class="code" href="../../df/dc0/rpmalloc_8c.html#a083ecd4af0f476009595e8ee78cf2ac0">atomic_load64</a>(&amp;_allocation_counter);</div>
<div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;    <a class="code" href="../../dd/ddd/arithmetic__operations_8c.html#a996e72f71b11a5bb8b3b7b6936b1516d">int64_t</a> deallocated = <a class="code" href="../../df/dc0/rpmalloc_8c.html#a083ecd4af0f476009595e8ee78cf2ac0">atomic_load64</a>(&amp;_deallocation_counter);</div>
<div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160;    <a class="code" href="../../d1/d6d/kernel__config_8cpp.html#a4db4281a3169b26f4f69f18f20440e5d">fprintf</a>(<a class="code" href="../../d4/d78/expr_8h.html#d7/d3a/structfile">file</a>, <span class="stringliteral">&quot;Allocation count: %lli\n&quot;</span>, allocated);</div>
<div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;    <a class="code" href="../../d1/d6d/kernel__config_8cpp.html#a4db4281a3169b26f4f69f18f20440e5d">fprintf</a>(<a class="code" href="../../d4/d78/expr_8h.html#d7/d3a/structfile">file</a>, <span class="stringliteral">&quot;Deallocation count: %lli\n&quot;</span>, deallocated);</div>
<div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;    <a class="code" href="../../d1/d6d/kernel__config_8cpp.html#a4db4281a3169b26f4f69f18f20440e5d">fprintf</a>(<a class="code" href="../../d4/d78/expr_8h.html#d7/d3a/structfile">file</a>, <span class="stringliteral">&quot;Current allocations: %lli\n&quot;</span>, (allocated - deallocated));</div>
<div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160;    <a class="code" href="../../d1/d6d/kernel__config_8cpp.html#a4db4281a3169b26f4f69f18f20440e5d">fprintf</a>(<a class="code" href="../../d4/d78/expr_8h.html#d7/d3a/structfile">file</a>, <span class="stringliteral">&quot;Master spans: %d\n&quot;</span>, atomic_load32(&amp;_master_spans));</div>
<div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;    <a class="code" href="../../d1/d6d/kernel__config_8cpp.html#a4db4281a3169b26f4f69f18f20440e5d">fprintf</a>(<a class="code" href="../../d4/d78/expr_8h.html#d7/d3a/structfile">file</a>, <span class="stringliteral">&quot;Dangling master spans: %d\n&quot;</span>, atomic_load32(&amp;_unmapped_master_spans));</div>
<div class="line"><a name="l03410"></a><span class="lineno"> 3410</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03411"></a><span class="lineno"> 3411</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03412"></a><span class="lineno"> 3412</span>&#160;    (void)<span class="keyword">sizeof</span>(<a class="code" href="../../d4/d78/expr_8h.html#d7/d3a/structfile">file</a>);</div>
<div class="line"><a name="l03413"></a><span class="lineno"> 3413</span>&#160;}</div>
<div class="ttc" id="aKernel_2include_2types_8h_html_aa9d55e2f20e580b7445617d0d12fff6e"><div class="ttname"><a href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a></div><div class="ttdeci">__SIZE_TYPE__ size_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/Kernel_2include_2types_8h_source.html#l00192">types.h:192</a></div></div>
<div class="ttc" id="aarithmetic__operations_8c_html_a996e72f71b11a5bb8b3b7b6936b1516d"><div class="ttname"><a href="../../dd/ddd/arithmetic__operations_8c.html#a996e72f71b11a5bb8b3b7b6936b1516d">int64_t</a></div><div class="ttdeci">long long int64_t</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/ddd/arithmetic__operations_8c_source.html#l00293">arithmetic_operations.c:293</a></div></div>
<div class="ttc" id="aexpr_8h_html_d7/d3a/structfile"><div class="ttname"><a href="../../d4/d78/expr_8h.html#d7/d3a/structfile">file</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d78/expr_8h_source.html#l00018">expr.h:18</a></div></div>
<div class="ttc" id="aglob__loop_8c_html_ac5ea133c26adb9b160cb33f3db9301f6"><div class="ttname"><a href="../../d8/d64/glob__loop_8c.html#ac5ea133c26adb9b160cb33f3db9301f6">while</a></div><div class="ttdeci">while((c=*p++) !=L('\0'))</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d64/glob__loop_8c_source.html#l00034">glob_loop.c:34</a></div></div>
<div class="ttc" id="akernel__config_8cpp_html_a4db4281a3169b26f4f69f18f20440e5d"><div class="ttname"><a href="../../d1/d6d/kernel__config_8cpp.html#a4db4281a3169b26f4f69f18f20440e5d">fprintf</a></div><div class="ttdeci">EXTERNC void fprintf(FILE *stream, const char *Format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d6d/kernel__config_8cpp_source.html#l00028">kernel_config.cpp:28</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_a04406da3f5ff4e24f155c97591678ed9"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#a04406da3f5ff4e24f155c97591678ed9">LARGE_CLASS_COUNT</a></div><div class="ttdeci">#define LARGE_CLASS_COUNT</div><div class="ttdoc">Number of large block size classes.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00304">rpmalloc.c:304</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_a083ecd4af0f476009595e8ee78cf2ac0"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#a083ecd4af0f476009595e8ee78cf2ac0">atomic_load64</a></div><div class="ttdeci">static FORCEINLINE int64_t atomic_load64(atomic64_t *val)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00185">rpmalloc.c:185</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_a3e39052a111a2e243645494f1d6ca439"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#a3e39052a111a2e243645494f1d6ca439">_memory_heaps</a></div><div class="ttdeci">static heap_t * _memory_heaps[HEAP_ARRAY_SIZE]</div><div class="ttdoc">All heaps.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00645">rpmalloc.c:645</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_a440c6f31099f3836f7beb5e47d14fb2d"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#a440c6f31099f3836f7beb5e47d14fb2d">global_cache_t::count</a></div><div class="ttdeci">uint32_t count</div><div class="ttdoc">Cache count.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00573">rpmalloc.c:573</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_a8bb140aee00ffae527f7c0706d98c3d1"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#a8bb140aee00ffae527f7c0706d98c3d1">global_cache_t::overflow</a></div><div class="ttdeci">span_t * overflow</div><div class="ttdoc">Unlimited cache overflow.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00583">rpmalloc.c:583</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_a9fefa5277fefa0c58f69d5b86d679ccb"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#a9fefa5277fefa0c58f69d5b86d679ccb">_memory_span_size</a></div><div class="ttdeci">static size_t _memory_span_size</div><div class="ttdoc">Size of a span of memory pages.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00611">rpmalloc.c:611</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_aa74d427b2b9955ff2d9719693d9fc80e"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#aa74d427b2b9955ff2d9719693d9fc80e">SIZE_CLASS_COUNT</a></div><div class="ttdeci">#define SIZE_CLASS_COUNT</div><div class="ttdoc">Total number of small + medium size classes.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00302">rpmalloc.c:302</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_ac7e4a352a230ef04d4372db43a454b7f"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#ac7e4a352a230ef04d4372db43a454b7f">HEAP_ARRAY_SIZE</a></div><div class="ttdeci">#define HEAP_ARRAY_SIZE</div><div class="ttdoc">Size of heap hashmap.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00033">rpmalloc.c:33</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_ad008ddf766a4f56fbde2edf2c51d9a87"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#ad008ddf766a4f56fbde2edf2c51d9a87">rpmalloc_assert</a></div><div class="ttdeci">#define rpmalloc_assert(truth, message)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00143">rpmalloc.c:143</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_ad7af40ab0c9174515ec06efb45ebdd73"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#ad7af40ab0c9174515ec06efb45ebdd73">_memory_span_cache</a></div><div class="ttdeci">static global_cache_t _memory_span_cache[LARGE_CLASS_COUNT]</div><div class="ttdoc">Global span cache.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00636">rpmalloc.c:636</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_d1/d24/structspan__t"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#d1/d24/structspan__t">span_t</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00430">rpmalloc.c:431</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_db/d6b/structglobal__cache__t"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#db/d6b/structglobal__cache__t">global_cache_t</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00568">rpmalloc.c:569</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00645">_memory_heaps</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00604">_memory_page_size</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00636">_memory_span_cache</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00611">_memory_span_size</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00185">atomic_load64()</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00573">global_cache_t::count</a>, <a class="el" href="../../d1/d6d/kernel__config_8cpp_source.html#l00028">fprintf()</a>, <a class="el" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00033">HEAP_ARRAY_SIZE</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00304">LARGE_CLASS_COUNT</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00463">span_t::next</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00583">global_cache_t::overflow</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00143">rpmalloc_assert</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00302">SIZE_CLASS_COUNT</a>, and <a class="el" href="../../d8/d64/glob__loop_8c_source.html#l00034">while()</a>.</p>

</div>
</div>
<a id="a1c1ba6b797d81b14895f0a2114d78476"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c1ba6b797d81b14895f0a2114d78476">&#9670;&nbsp;</a></span>rpmalloc_finalize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a2d18f870b8bad81e931c8c0a01e3672b">RPMALLOC_EXPORT</a> void rpmalloc_finalize </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Finalize allocator. </p>
<p>Finalize allocator. </p>

<p class="definition">Definition at line <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l02993">2993</a> of file <a class="el" href="../../df/dc0/rpmalloc_8c_source.html">rpmalloc.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;{</div>
<div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;    <a class="code" href="../../df/dc0/rpmalloc_8c.html#a6e5fc3857f84254caa88503e02bf163c">rpmalloc_thread_finalize</a>(1);</div>
<div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;    <span class="comment">// rpmalloc_dump_statistics(stdout);</span></div>
<div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160; </div>
<div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../df/dc0/rpmalloc_8c.html#a411d5d6c063a099c1a08fa853851b764">_memory_global_reserve</a>)</div>
<div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;    {</div>
<div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;        <a class="code" href="../../df/dc0/rpmalloc_8c.html#af327588f7260778f453d9a212396e0e0">atomic_add32</a>(&amp;<a class="code" href="../../df/dc0/rpmalloc_8c.html#a1d5126b78d2bb31fe3476abcd07dd801">_memory_global_reserve_master</a>-&gt;<a class="code" href="../../df/dc0/rpmalloc_8c.html#a4aecbd1cbb36425fddd53125ea1a84c7">remaining_spans</a>, -(<a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a0c18914b3041c2f583aba76f418399c2">int32_t</a>)<a class="code" href="../../df/dc0/rpmalloc_8c.html#a19d785146ca5053c2da69ad1ec4de94c">_memory_global_reserve_count</a>);</div>
<div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;        <a class="code" href="../../df/dc0/rpmalloc_8c.html#a1d5126b78d2bb31fe3476abcd07dd801">_memory_global_reserve_master</a> = 0;</div>
<div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;        <a class="code" href="../../df/dc0/rpmalloc_8c.html#a19d785146ca5053c2da69ad1ec4de94c">_memory_global_reserve_count</a> = 0;</div>
<div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;        <a class="code" href="../../df/dc0/rpmalloc_8c.html#a411d5d6c063a099c1a08fa853851b764">_memory_global_reserve</a> = 0;</div>
<div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;    }</div>
<div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;    <a class="code" href="../../df/dc0/rpmalloc_8c.html#a2a87a6060d5387fe8491a00600073687">atomic_store32_release</a>(&amp;<a class="code" href="../../df/dc0/rpmalloc_8c.html#a1cb428169705ddd63fb35383132dbc40">_memory_global_lock</a>, 0);</div>
<div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160; </div>
<div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;    <span class="comment">// Free all thread caches and fully free spans</span></div>
<div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> list_idx = 0; list_idx &lt; <a class="code" href="../../df/dc0/rpmalloc_8c.html#ac7e4a352a230ef04d4372db43a454b7f">HEAP_ARRAY_SIZE</a>; ++list_idx)</div>
<div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;    {</div>
<div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;        <a class="code" href="../../d1/d7e/rpmalloc__compat_8cpp.html#d9/d8a/structheap__t">heap_t</a> *<a class="code" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a> = <a class="code" href="../../df/dc0/rpmalloc_8c.html#a3e39052a111a2e243645494f1d6ca439">_memory_heaps</a>[list_idx];</div>
<div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;        <span class="keywordflow">while</span> (<a class="code" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a>)</div>
<div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;        {</div>
<div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;            <a class="code" href="../../d1/d7e/rpmalloc__compat_8cpp.html#d9/d8a/structheap__t">heap_t</a> *next_heap = <a class="code" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a>-&gt;next_heap;</div>
<div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;            <a class="code" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a>-&gt;finalize = 1;</div>
<div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;            <a class="code" href="../../df/dc0/rpmalloc_8c.html#a2f7a67a3403fd19a70e7a0418714af57">_rpmalloc_heap_global_finalize</a>(<a class="code" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a>);</div>
<div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;            <a class="code" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a> = next_heap;</div>
<div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;        }</div>
<div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;    }</div>
<div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160; </div>
<div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;<span class="preprocessor">#if ENABLE_GLOBAL_CACHE</span></div>
<div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;    <span class="comment">// Free global caches</span></div>
<div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> iclass = 0; iclass &lt; <a class="code" href="../../df/dc0/rpmalloc_8c.html#a04406da3f5ff4e24f155c97591678ed9">LARGE_CLASS_COUNT</a>; ++iclass)</div>
<div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;        <a class="code" href="../../df/dc0/rpmalloc_8c.html#ad3b62974f1bafcc293cde80eb05a7abe">_rpmalloc_global_cache_finalize</a>(&amp;<a class="code" href="../../df/dc0/rpmalloc_8c.html#ad7af40ab0c9174515ec06efb45ebdd73">_memory_span_cache</a>[iclass]);</div>
<div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160; </div>
<div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;<span class="preprocessor">#if (defined(__APPLE__) || defined(__HAIKU__)) &amp;&amp; ENABLE_PRELOAD</span></div>
<div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;    <a class="code" href="../../df/d00/Userspace_2musl_2include_2pthread_8h.html#a8d29d10e1e6b4fa6c05a427bb86fc4cb">pthread_key_delete</a>(<a class="code" href="../../df/dc0/rpmalloc_8c.html#a0c3d121b2c7e431b109863973cff023c">_memory_thread_heap</a>);</div>
<div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;<span class="preprocessor">#if defined(_WIN32) &amp;&amp; (!defined(BUILD_DYNAMIC_LINK) || !BUILD_DYNAMIC_LINK)</span></div>
<div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;    FlsFree(fls_key);</div>
<div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;    fls_key = 0;</div>
<div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;<span class="preprocessor">#if ENABLE_STATISTICS</span></div>
<div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;    <span class="comment">// If you hit these asserts you probably have memory leaks (perhaps global scope data doing dynamic allocations) or double frees in your code</span></div>
<div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;    <a class="code" href="../../df/dc0/rpmalloc_8c.html#ad008ddf766a4f56fbde2edf2c51d9a87">rpmalloc_assert</a>(atomic_load32(&amp;_mapped_pages) == 0, <span class="stringliteral">&quot;Memory leak detected&quot;</span>);</div>
<div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;    <a class="code" href="../../df/dc0/rpmalloc_8c.html#ad008ddf766a4f56fbde2edf2c51d9a87">rpmalloc_assert</a>(atomic_load32(&amp;_mapped_pages_os) == 0, <span class="stringliteral">&quot;Memory leak detected&quot;</span>);</div>
<div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160; </div>
<div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;    <a class="code" href="../../df/dc0/rpmalloc_8c.html#a6414f61e9643ce358f1a33e6a2c6aeaa">_rpmalloc_initialized</a> = 0;</div>
<div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;}</div>
<div class="ttc" id="aKernel_2include_2types_8h_html_a0c18914b3041c2f583aba76f418399c2"><div class="ttname"><a href="../../d0/df4/Kernel_2include_2types_8h.html#a0c18914b3041c2f583aba76f418399c2">int32_t</a></div><div class="ttdeci">__INT32_TYPE__ int32_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/Kernel_2include_2types_8h_source.html#l00157">types.h:157</a></div></div>
<div class="ttc" id="aUserspace_2musl_2include_2pthread_8h_html_a8d29d10e1e6b4fa6c05a427bb86fc4cb"><div class="ttname"><a href="../../df/d00/Userspace_2musl_2include_2pthread_8h.html#a8d29d10e1e6b4fa6c05a427bb86fc4cb">pthread_key_delete</a></div><div class="ttdeci">int pthread_key_delete(pthread_key_t)</div></div>
<div class="ttc" id="arpmalloc_8c_html_a0c3d121b2c7e431b109863973cff023c"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#a0c3d121b2c7e431b109863973cff023c">_memory_thread_heap</a></div><div class="ttdeci">#define _memory_thread_heap</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00706">rpmalloc.c:706</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_a19d785146ca5053c2da69ad1ec4de94c"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#a19d785146ca5053c2da69ad1ec4de94c">_memory_global_reserve_count</a></div><div class="ttdeci">static size_t _memory_global_reserve_count</div><div class="ttdoc">Global reserved count.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00641">rpmalloc.c:641</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_a1cb428169705ddd63fb35383132dbc40"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#a1cb428169705ddd63fb35383132dbc40">_memory_global_lock</a></div><div class="ttdeci">static atomic32_t _memory_global_lock</div><div class="ttdoc">Used to restrict access to mapping memory for huge pages.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00647">rpmalloc.c:647</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_a1d5126b78d2bb31fe3476abcd07dd801"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#a1d5126b78d2bb31fe3476abcd07dd801">_memory_global_reserve_master</a></div><div class="ttdeci">static span_t * _memory_global_reserve_master</div><div class="ttdoc">Global reserved master.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00643">rpmalloc.c:643</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_a2a87a6060d5387fe8491a00600073687"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#a2a87a6060d5387fe8491a00600073687">atomic_store32_release</a></div><div class="ttdeci">static FORCEINLINE void atomic_store32_release(atomic32_t *dst, int32_t val)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00184">rpmalloc.c:184</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_a2f7a67a3403fd19a70e7a0418714af57"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#a2f7a67a3403fd19a70e7a0418714af57">_rpmalloc_heap_global_finalize</a></div><div class="ttdeci">static void _rpmalloc_heap_global_finalize(heap_t *heap)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l01585">rpmalloc.c:1585</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_a411d5d6c063a099c1a08fa853851b764"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#a411d5d6c063a099c1a08fa853851b764">_memory_global_reserve</a></div><div class="ttdeci">static span_t * _memory_global_reserve</div><div class="ttdoc">Global reserved spans.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00639">rpmalloc.c:639</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_a4aecbd1cbb36425fddd53125ea1a84c7"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#a4aecbd1cbb36425fddd53125ea1a84c7">span_t::remaining_spans</a></div><div class="ttdeci">atomic32_t remaining_spans</div><div class="ttdoc">Remaining span counter, for master spans.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00457">rpmalloc.c:457</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_a6414f61e9643ce358f1a33e6a2c6aeaa"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#a6414f61e9643ce358f1a33e6a2c6aeaa">_rpmalloc_initialized</a></div><div class="ttdeci">static int _rpmalloc_initialized</div><div class="ttdoc">Initialized flag.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00598">rpmalloc.c:598</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_a6e5fc3857f84254caa88503e02bf163c"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#a6e5fc3857f84254caa88503e02bf163c">rpmalloc_thread_finalize</a></div><div class="ttdeci">void rpmalloc_thread_finalize(int release_caches)</div><div class="ttdoc">Finalize thread, orphan heap.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l03061">rpmalloc.c:3061</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_ad3b62974f1bafcc293cde80eb05a7abe"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#ad3b62974f1bafcc293cde80eb05a7abe">_rpmalloc_global_cache_finalize</a></div><div class="ttdeci">static void _rpmalloc_global_cache_finalize(global_cache_t *cache)</div><div class="ttdoc">Finalize a global cache.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l01347">rpmalloc.c:1347</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_af327588f7260778f453d9a212396e0e0"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#af327588f7260778f453d9a212396e0e0">atomic_add32</a></div><div class="ttdeci">static FORCEINLINE int32_t atomic_add32(atomic32_t *val, int32_t add)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00182">rpmalloc.c:182</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00647">_memory_global_lock</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00639">_memory_global_reserve</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00641">_memory_global_reserve_count</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00643">_memory_global_reserve_master</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00645">_memory_heaps</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00636">_memory_span_cache</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00706">_memory_thread_heap</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l01347">_rpmalloc_global_cache_finalize()</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l01585">_rpmalloc_heap_global_finalize()</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00598">_rpmalloc_initialized</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00182">atomic_add32()</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00184">atomic_store32_release()</a>, <a class="el" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00033">HEAP_ARRAY_SIZE</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00304">LARGE_CLASS_COUNT</a>, <a class="el" href="../../df/d00/Userspace_2musl_2include_2pthread_8h.html#a8d29d10e1e6b4fa6c05a427bb86fc4cb">pthread_key_delete()</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00457">span_t::remaining_spans</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00143">rpmalloc_assert</a>, and <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l03061">rpmalloc_thread_finalize()</a>.</p>

</div>
</div>
<a id="a21dbb043c42cbe1bfd7ba3f1fe012f5f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21dbb043c42cbe1bfd7ba3f1fe012f5f">&#9670;&nbsp;</a></span>rpmalloc_global_statistics()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a2d18f870b8bad81e931c8c0a01e3672b">RPMALLOC_EXPORT</a> void rpmalloc_global_statistics </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d43/rpmalloc_8h.html#d1/d1a/structrpmalloc__global__statistics__t">rpmalloc_global_statistics_t</a> *&#160;</td>
          <td class="paramname"><em>stats</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get global statistics. </p>

<p class="definition">Definition at line <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l03262">3262</a> of file <a class="el" href="../../df/dc0/rpmalloc_8c_source.html">rpmalloc.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03263"></a><span class="lineno"> 3263</span>&#160;{</div>
<div class="line"><a name="l03264"></a><span class="lineno"> 3264</span>&#160;    <a class="code" href="../../d3/d82/convert_8h.html#a9c1f204516a55affa9ba118907e5ab6b">memset_unsafe</a>(stats, 0, <span class="keyword">sizeof</span>(<a class="code" href="../../d2/d43/rpmalloc_8h.html#d1/d1a/structrpmalloc__global__statistics__t">rpmalloc_global_statistics_t</a>));</div>
<div class="line"><a name="l03265"></a><span class="lineno"> 3265</span>&#160;<span class="preprocessor">#if ENABLE_STATISTICS</span></div>
<div class="line"><a name="l03266"></a><span class="lineno"> 3266</span>&#160;    stats-&gt;<a class="code" href="../../d2/d43/rpmalloc_8h.html#ab0d895a6016dd1c5937f2a74370f2727">mapped</a> = (<a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>)atomic_load32(&amp;_mapped_pages) * <a class="code" href="../../df/dc0/rpmalloc_8c.html#a3667b745f7290a10ff5c5a71575533d9">_memory_page_size</a>;</div>
<div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160;    stats-&gt;<a class="code" href="../../d2/d43/rpmalloc_8h.html#ad5723376daeb707aa20547190ced2865">mapped_peak</a> = (<a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>)_mapped_pages_peak * <a class="code" href="../../df/dc0/rpmalloc_8c.html#a3667b745f7290a10ff5c5a71575533d9">_memory_page_size</a>;</div>
<div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160;    stats-&gt;<a class="code" href="../../d2/d43/rpmalloc_8h.html#af1916b4138cfc1e46ff0787ff9206375">mapped_total</a> = (<a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>)atomic_load32(&amp;_mapped_total) * <a class="code" href="../../df/dc0/rpmalloc_8c.html#a3667b745f7290a10ff5c5a71575533d9">_memory_page_size</a>;</div>
<div class="line"><a name="l03269"></a><span class="lineno"> 3269</span>&#160;    stats-&gt;<a class="code" href="../../d2/d43/rpmalloc_8h.html#aa896cafa124a63254f56621fe2c5241f">unmapped_total</a> = (<a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>)atomic_load32(&amp;_unmapped_total) * <a class="code" href="../../df/dc0/rpmalloc_8c.html#a3667b745f7290a10ff5c5a71575533d9">_memory_page_size</a>;</div>
<div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160;    stats-&gt;<a class="code" href="../../d2/d43/rpmalloc_8h.html#a5db28c5567049de1e58833c061841f7e">huge_alloc</a> = (<a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>)atomic_load32(&amp;_huge_pages_current) * <a class="code" href="../../df/dc0/rpmalloc_8c.html#a3667b745f7290a10ff5c5a71575533d9">_memory_page_size</a>;</div>
<div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;    stats-&gt;<a class="code" href="../../d2/d43/rpmalloc_8h.html#a308868b1a8740da06b79c1bdabae1997">huge_alloc_peak</a> = (<a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>)_huge_pages_peak * <a class="code" href="../../df/dc0/rpmalloc_8c.html#a3667b745f7290a10ff5c5a71575533d9">_memory_page_size</a>;</div>
<div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;<span class="preprocessor">#if ENABLE_GLOBAL_CACHE</span></div>
<div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> iclass = 0; iclass &lt; <a class="code" href="../../df/dc0/rpmalloc_8c.html#a04406da3f5ff4e24f155c97591678ed9">LARGE_CLASS_COUNT</a>; ++iclass)</div>
<div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;        stats-&gt;<a class="code" href="../../d2/d43/rpmalloc_8h.html#a70b10faa79aac5df497ba5eccdd554ae">cached</a> += <a class="code" href="../../df/dc0/rpmalloc_8c.html#ad7af40ab0c9174515ec06efb45ebdd73">_memory_span_cache</a>[iclass].<a class="code" href="../../df/dc0/rpmalloc_8c.html#a440c6f31099f3836f7beb5e47d14fb2d">count</a> * (iclass + 1) * <a class="code" href="../../df/dc0/rpmalloc_8c.html#a9fefa5277fefa0c58f69d5b86d679ccb">_memory_span_size</a>;</div>
<div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;}</div>
<div class="ttc" id="aconvert_8h_html_a9c1f204516a55affa9ba118907e5ab6b"><div class="ttname"><a href="../../d3/d82/convert_8h.html#a9c1f204516a55affa9ba118907e5ab6b">memset_unsafe</a></div><div class="ttdeci">void * memset_unsafe(void *dest, int c, size_t n)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/df3/Kernel_2library_2memop_8c_source.html#l00214">memop.c:214</a></div></div>
<div class="ttc" id="arpmalloc_8h_html_a308868b1a8740da06b79c1bdabae1997"><div class="ttname"><a href="../../d2/d43/rpmalloc_8h.html#a308868b1a8740da06b79c1bdabae1997">rpmalloc_global_statistics_t::huge_alloc_peak</a></div><div class="ttdeci">size_t huge_alloc_peak</div><div class="ttdoc">Peak amount of memory allocated in huge allocations, i.e larger than LARGE_SIZE_LIMIT which is 2MiB b...</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d43/rpmalloc_8h_source.html#l00080">rpmalloc.h:80</a></div></div>
<div class="ttc" id="arpmalloc_8h_html_a5db28c5567049de1e58833c061841f7e"><div class="ttname"><a href="../../d2/d43/rpmalloc_8h.html#a5db28c5567049de1e58833c061841f7e">rpmalloc_global_statistics_t::huge_alloc</a></div><div class="ttdeci">size_t huge_alloc</div><div class="ttdoc">Current amount of memory allocated in huge allocations, i.e larger than LARGE_SIZE_LIMIT which is 2Mi...</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d43/rpmalloc_8h_source.html#l00078">rpmalloc.h:78</a></div></div>
<div class="ttc" id="arpmalloc_8h_html_a70b10faa79aac5df497ba5eccdd554ae"><div class="ttname"><a href="../../d2/d43/rpmalloc_8h.html#a70b10faa79aac5df497ba5eccdd554ae">rpmalloc_global_statistics_t::cached</a></div><div class="ttdeci">size_t cached</div><div class="ttdoc">Current amount of memory in global caches for small and medium sizes (&lt;32KiB)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d43/rpmalloc_8h_source.html#l00076">rpmalloc.h:76</a></div></div>
<div class="ttc" id="arpmalloc_8h_html_aa896cafa124a63254f56621fe2c5241f"><div class="ttname"><a href="../../d2/d43/rpmalloc_8h.html#aa896cafa124a63254f56621fe2c5241f">rpmalloc_global_statistics_t::unmapped_total</a></div><div class="ttdeci">size_t unmapped_total</div><div class="ttdoc">Total amount of memory unmapped since initialization (only if ENABLE_STATISTICS=1)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d43/rpmalloc_8h_source.html#l00084">rpmalloc.h:84</a></div></div>
<div class="ttc" id="arpmalloc_8h_html_ab0d895a6016dd1c5937f2a74370f2727"><div class="ttname"><a href="../../d2/d43/rpmalloc_8h.html#ab0d895a6016dd1c5937f2a74370f2727">rpmalloc_global_statistics_t::mapped</a></div><div class="ttdeci">size_t mapped</div><div class="ttdoc">Current amount of virtual memory mapped, all of which might not have been committed (only if ENABLE_S...</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d43/rpmalloc_8h_source.html#l00072">rpmalloc.h:72</a></div></div>
<div class="ttc" id="arpmalloc_8h_html_ad5723376daeb707aa20547190ced2865"><div class="ttname"><a href="../../d2/d43/rpmalloc_8h.html#ad5723376daeb707aa20547190ced2865">rpmalloc_global_statistics_t::mapped_peak</a></div><div class="ttdeci">size_t mapped_peak</div><div class="ttdoc">Peak amount of virtual memory mapped, all of which might not have been committed (only if ENABLE_STAT...</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d43/rpmalloc_8h_source.html#l00074">rpmalloc.h:74</a></div></div>
<div class="ttc" id="arpmalloc_8h_html_af1916b4138cfc1e46ff0787ff9206375"><div class="ttname"><a href="../../d2/d43/rpmalloc_8h.html#af1916b4138cfc1e46ff0787ff9206375">rpmalloc_global_statistics_t::mapped_total</a></div><div class="ttdeci">size_t mapped_total</div><div class="ttdoc">Total amount of memory mapped since initialization (only if ENABLE_STATISTICS=1)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d43/rpmalloc_8h_source.html#l00082">rpmalloc.h:82</a></div></div>
<div class="ttc" id="arpmalloc_8h_html_d1/d1a/structrpmalloc__global__statistics__t"><div class="ttname"><a href="../../d2/d43/rpmalloc_8h.html#d1/d1a/structrpmalloc__global__statistics__t">rpmalloc_global_statistics_t</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d43/rpmalloc_8h_source.html#l00069">rpmalloc.h:70</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00604">_memory_page_size</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00636">_memory_span_cache</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00611">_memory_span_size</a>, <a class="el" href="../../d2/d43/rpmalloc_8h_source.html#l00076">rpmalloc_global_statistics_t::cached</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00573">global_cache_t::count</a>, <a class="el" href="../../d2/d43/rpmalloc_8h_source.html#l00078">rpmalloc_global_statistics_t::huge_alloc</a>, <a class="el" href="../../d2/d43/rpmalloc_8h_source.html#l00080">rpmalloc_global_statistics_t::huge_alloc_peak</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00304">LARGE_CLASS_COUNT</a>, <a class="el" href="../../d2/d43/rpmalloc_8h_source.html#l00072">rpmalloc_global_statistics_t::mapped</a>, <a class="el" href="../../d2/d43/rpmalloc_8h_source.html#l00074">rpmalloc_global_statistics_t::mapped_peak</a>, <a class="el" href="../../d2/d43/rpmalloc_8h_source.html#l00082">rpmalloc_global_statistics_t::mapped_total</a>, <a class="el" href="../../d3/df3/Kernel_2library_2memop_8c_source.html#l00214">memset_unsafe()</a>, and <a class="el" href="../../d2/d43/rpmalloc_8h_source.html#l00084">rpmalloc_global_statistics_t::unmapped_total</a>.</p>

</div>
</div>
<a id="a24bbaa4b2e6a5524d4ba62a6c9c939df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24bbaa4b2e6a5524d4ba62a6c9c939df">&#9670;&nbsp;</a></span>rpmalloc_initialize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a2d18f870b8bad81e931c8c0a01e3672b">RPMALLOC_EXPORT</a> int rpmalloc_initialize </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialize allocator with default configuration. </p>
<p>Initialize allocator with default configuration. </p>

<p class="definition">Definition at line <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l02814">2814</a> of file <a class="el" href="../../df/dc0/rpmalloc_8c_source.html">rpmalloc.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;{</div>
<div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../df/dc0/rpmalloc_8c.html#a6414f61e9643ce358f1a33e6a2c6aeaa">_rpmalloc_initialized</a>)</div>
<div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;    {</div>
<div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;        <a class="code" href="../../df/dc0/rpmalloc_8c.html#a85a64540090a42380ee6d969ec1897c1">rpmalloc_thread_initialize</a>();</div>
<div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;    }</div>
<div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../df/dc0/rpmalloc_8c.html#a2ae01990651a75a352409fb1fbf85d05">rpmalloc_initialize_config</a>(0);</div>
<div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;}</div>
<div class="ttc" id="arpmalloc_8c_html_a2ae01990651a75a352409fb1fbf85d05"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#a2ae01990651a75a352409fb1fbf85d05">rpmalloc_initialize_config</a></div><div class="ttdeci">int rpmalloc_initialize_config(const rpmalloc_config_t *config)</div><div class="ttdoc">Initialize allocator with given configuration.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l02824">rpmalloc.c:2824</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_a85a64540090a42380ee6d969ec1897c1"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#a85a64540090a42380ee6d969ec1897c1">rpmalloc_thread_initialize</a></div><div class="ttdeci">void rpmalloc_thread_initialize(void)</div><div class="ttdoc">Initialize thread, assign heap.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l03044">rpmalloc.c:3044</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00598">_rpmalloc_initialized</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l02824">rpmalloc_initialize_config()</a>, and <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l03044">rpmalloc_thread_initialize()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00717">get_thread_heap()</a>, and <a class="el" href="../../d8/d71/memory_8cpp_source.html#l00296">InitializeMemoryManagement()</a>.</p>

</div>
</div>
<a id="a2159e8de05a62e3697024fd2aec1a8c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2159e8de05a62e3697024fd2aec1a8c2">&#9670;&nbsp;</a></span>rpmalloc_initialize_config()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a2d18f870b8bad81e931c8c0a01e3672b">RPMALLOC_EXPORT</a> int rpmalloc_initialize_config </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../df/d42/structrpmalloc__config__t.html">rpmalloc_config_t</a> *&#160;</td>
          <td class="paramname"><em>config</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize allocator with given configuration. </p>

<p class="definition">Definition at line <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l02824">2824</a> of file <a class="el" href="../../df/dc0/rpmalloc_8c_source.html">rpmalloc.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;{</div>
<div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../df/dc0/rpmalloc_8c.html#a6414f61e9643ce358f1a33e6a2c6aeaa">_rpmalloc_initialized</a>)</div>
<div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;    {</div>
<div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;        <a class="code" href="../../df/dc0/rpmalloc_8c.html#a85a64540090a42380ee6d969ec1897c1">rpmalloc_thread_initialize</a>();</div>
<div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;    }</div>
<div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;    <a class="code" href="../../df/dc0/rpmalloc_8c.html#a6414f61e9643ce358f1a33e6a2c6aeaa">_rpmalloc_initialized</a> = 1;</div>
<div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160; </div>
<div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;    <span class="keywordflow">if</span> (config)</div>
<div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;        <a class="code" href="../../d3/d82/convert_8h.html#a7a71051d6440816fca3ad080ae2539f4">memcpy_unsafe</a>(&amp;<a class="code" href="../../df/dc0/rpmalloc_8c.html#ae1f1297fe3d143e41deac95ee7a7f8d4">_memory_config</a>, config, <span class="keyword">sizeof</span>(<a class="code" href="../../df/d42/structrpmalloc__config__t.html">rpmalloc_config_t</a>));</div>
<div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;        <a class="code" href="../../d3/d82/convert_8h.html#a9c1f204516a55affa9ba118907e5ab6b">memset_unsafe</a>(&amp;<a class="code" href="../../df/dc0/rpmalloc_8c.html#ae1f1297fe3d143e41deac95ee7a7f8d4">_memory_config</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="../../df/d42/structrpmalloc__config__t.html">rpmalloc_config_t</a>));</div>
<div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160; </div>
<div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../df/dc0/rpmalloc_8c.html#ae1f1297fe3d143e41deac95ee7a7f8d4">_memory_config</a>.<a class="code" href="../../df/d42/structrpmalloc__config__t.html#ab1a81b9e7c3dee077fafc85b5327ea6b">memory_map</a> || !<a class="code" href="../../df/dc0/rpmalloc_8c.html#ae1f1297fe3d143e41deac95ee7a7f8d4">_memory_config</a>.<a class="code" href="../../df/d42/structrpmalloc__config__t.html#a10fb22a2f8775aafd70b1c79f6b80630">memory_unmap</a>)</div>
<div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;    {</div>
<div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;        <a class="code" href="../../df/dc0/rpmalloc_8c.html#ae1f1297fe3d143e41deac95ee7a7f8d4">_memory_config</a>.<a class="code" href="../../df/d42/structrpmalloc__config__t.html#ab1a81b9e7c3dee077fafc85b5327ea6b">memory_map</a> = <a class="code" href="../../df/dc0/rpmalloc_8c.html#aa3b1a6473db3c198691da8c7b8918f7a">_rpmalloc_mmap_os</a>;</div>
<div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;        <a class="code" href="../../df/dc0/rpmalloc_8c.html#ae1f1297fe3d143e41deac95ee7a7f8d4">_memory_config</a>.<a class="code" href="../../df/d42/structrpmalloc__config__t.html#a10fb22a2f8775aafd70b1c79f6b80630">memory_unmap</a> = <a class="code" href="../../df/dc0/rpmalloc_8c.html#a693c463bae081b54b0b799e97bf84fb5">_rpmalloc_unmap_os</a>;</div>
<div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;    }</div>
<div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160; </div>
<div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;    <a class="code" href="../../df/dc0/rpmalloc_8c.html#a1e29d8d18139babda354d5d92d46ca02">_memory_map_granularity</a> = (<a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>)<a class="code" href="../../df/dc0/rpmalloc_8c.html#a97f4a6378f5e22e4e38e32cf9f370430">__rpmalloc_sysconf</a>(<a class="code" href="../../d2/d58/Kernel_2include__std_2unistd_8h.html#af8524bbbaf09850389a58789b72caf52">_SC_PAGESIZE</a>);</div>
<div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160; </div>
<div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;<span class="preprocessor">#if RPMALLOC_CONFIGURABLE</span></div>
<div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;    <a class="code" href="../../df/dc0/rpmalloc_8c.html#a3667b745f7290a10ff5c5a71575533d9">_memory_page_size</a> = <a class="code" href="../../df/dc0/rpmalloc_8c.html#ae1f1297fe3d143e41deac95ee7a7f8d4">_memory_config</a>.<a class="code" href="../../df/d42/structrpmalloc__config__t.html#adcf8dfc992b8b4a4e6cd72e213bf1035">page_size</a>;</div>
<div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;    <a class="code" href="../../df/dc0/rpmalloc_8c.html#a3667b745f7290a10ff5c5a71575533d9">_memory_page_size</a> = 0;</div>
<div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;    <a class="code" href="../../df/dc0/rpmalloc_8c.html#a4cdf64413eaa3e80f8a1dfe158bd2525">_memory_huge_pages</a> = 0;</div>
<div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../df/dc0/rpmalloc_8c.html#a3667b745f7290a10ff5c5a71575533d9">_memory_page_size</a>)</div>
<div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;    {</div>
<div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;        <a class="code" href="../../df/dc0/rpmalloc_8c.html#a3667b745f7290a10ff5c5a71575533d9">_memory_page_size</a> = <a class="code" href="../../df/dc0/rpmalloc_8c.html#a1e29d8d18139babda354d5d92d46ca02">_memory_map_granularity</a>;</div>
<div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../df/dc0/rpmalloc_8c.html#ae1f1297fe3d143e41deac95ee7a7f8d4">_memory_config</a>.<a class="code" href="../../df/d42/structrpmalloc__config__t.html#a9cfb1a2f571e8ebe68185b387f04260b">enable_huge_pages</a>)</div>
<div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;        {</div>
<div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;<span class="preprocessor">#if defined(__linux__)</span></div>
<div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;            <span class="keywordtype">size_t</span> huge_page_size = 0;</div>
<div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;            <a class="code" href="../../d1/d37/cargs_8h.html#a69437b5d572dd16d6d4fdbcbd066c7a9">FILE</a> *meminfo = <a class="code" href="../../d1/d85/filesystem_8hpp.html#ae2ec3b9037ed12c33f4f7327099f615c">fopen</a>(<span class="stringliteral">&quot;/proc/meminfo&quot;</span>, <span class="stringliteral">&quot;r&quot;</span>);</div>
<div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;            <span class="keywordflow">if</span> (meminfo)</div>
<div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;            {</div>
<div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;                <span class="keywordtype">char</span> <a class="code" href="../../dd/d7b/powertop_8c.html#d4/d85/structline">line</a>[128];</div>
<div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;                <span class="keywordflow">while</span> (!huge_page_size &amp;&amp; <a class="code" href="../../d7/dd7/libbb_8h.html#a458f311e9a7d803457d8ac51bf5aae4b">fgets</a>(<a class="code" href="../../dd/d7b/powertop_8c.html#d4/d85/structline">line</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../dd/d7b/powertop_8c.html#d4/d85/structline">line</a>) - 1, meminfo))</div>
<div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;                {</div>
<div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;                    <a class="code" href="../../dd/d7b/powertop_8c.html#d4/d85/structline">line</a>[<span class="keyword">sizeof</span>(<a class="code" href="../../dc/d37/inetd_8c.html#a5bdec07ba0f5f220bcb40d5258725d95">line</a>) - 1] = 0;</div>
<div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d82/convert_8h.html#a4a710d86541afc6b7dafddcdb4b1c94f">strstr</a>(<a class="code" href="../../dd/d7b/powertop_8c.html#d4/d85/structline">line</a>, <span class="stringliteral">&quot;Hugepagesize:&quot;</span>))</div>
<div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;                        huge_page_size = (<span class="keywordtype">size_t</span>)<a class="code" href="../../d3/d82/convert_8h.html#a2ce966cd04da3c32320f54c332569e03">strtol</a>(<a class="code" href="../../dd/d7b/powertop_8c.html#d4/d85/structline">line</a> + 13, 0, 10) * 1024;</div>
<div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;                }</div>
<div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;                <a class="code" href="../../d1/d85/filesystem_8hpp.html#a575cfdaca3a77c3f910df16d56d7240c">fclose</a>(meminfo);</div>
<div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;            }</div>
<div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;            <span class="keywordflow">if</span> (huge_page_size)</div>
<div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;            {</div>
<div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;                <a class="code" href="../../df/dc0/rpmalloc_8c.html#a4cdf64413eaa3e80f8a1dfe158bd2525">_memory_huge_pages</a> = 1;</div>
<div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;                <a class="code" href="../../df/dc0/rpmalloc_8c.html#a3667b745f7290a10ff5c5a71575533d9">_memory_page_size</a> = huge_page_size;</div>
<div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;                <a class="code" href="../../df/dc0/rpmalloc_8c.html#a1e29d8d18139babda354d5d92d46ca02">_memory_map_granularity</a> = huge_page_size;</div>
<div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;            }</div>
<div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;        }</div>
<div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;    }</div>
<div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;    {</div>
<div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../df/dc0/rpmalloc_8c.html#ae1f1297fe3d143e41deac95ee7a7f8d4">_memory_config</a>.<a class="code" href="../../df/d42/structrpmalloc__config__t.html#a9cfb1a2f571e8ebe68185b387f04260b">enable_huge_pages</a>)</div>
<div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;            <a class="code" href="../../df/dc0/rpmalloc_8c.html#a4cdf64413eaa3e80f8a1dfe158bd2525">_memory_huge_pages</a> = 1;</div>
<div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;    }</div>
<div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160; </div>
<div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;    <span class="keywordtype">size_t</span> min_span_size = 256;</div>
<div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;    <span class="keywordtype">size_t</span> max_page_size;</div>
<div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;<span class="preprocessor">#if UINTPTR_MAX &gt; 0xFFFFFFFF</span></div>
<div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;    max_page_size = 4096ULL * 1024ULL * 1024ULL;</div>
<div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;    max_page_size = 4 * 1024 * 1024;</div>
<div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../df/dc0/rpmalloc_8c.html#a3667b745f7290a10ff5c5a71575533d9">_memory_page_size</a> &lt; min_span_size)</div>
<div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;        <a class="code" href="../../df/dc0/rpmalloc_8c.html#a3667b745f7290a10ff5c5a71575533d9">_memory_page_size</a> = min_span_size;</div>
<div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../df/dc0/rpmalloc_8c.html#a3667b745f7290a10ff5c5a71575533d9">_memory_page_size</a> &gt; max_page_size)</div>
<div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;        <a class="code" href="../../df/dc0/rpmalloc_8c.html#a3667b745f7290a10ff5c5a71575533d9">_memory_page_size</a> = max_page_size;</div>
<div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;    <a class="code" href="../../df/dc0/rpmalloc_8c.html#a9d7ec974d864302bb4f8516859c4b212">_memory_page_size_shift</a> = 0;</div>
<div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;    <span class="keywordtype">size_t</span> page_size_bit = <a class="code" href="../../df/dc0/rpmalloc_8c.html#a3667b745f7290a10ff5c5a71575533d9">_memory_page_size</a>;</div>
<div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;    <span class="keywordflow">while</span> (page_size_bit != 1)</div>
<div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;    {</div>
<div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;        ++<a class="code" href="../../df/dc0/rpmalloc_8c.html#a9d7ec974d864302bb4f8516859c4b212">_memory_page_size_shift</a>;</div>
<div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;        page_size_bit &gt;&gt;= 1;</div>
<div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;    }</div>
<div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;    <a class="code" href="../../df/dc0/rpmalloc_8c.html#a3667b745f7290a10ff5c5a71575533d9">_memory_page_size</a> = ((<a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>)1 &lt;&lt; <a class="code" href="../../df/dc0/rpmalloc_8c.html#a9d7ec974d864302bb4f8516859c4b212">_memory_page_size_shift</a>);</div>
<div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160; </div>
<div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;<span class="preprocessor">#if RPMALLOC_CONFIGURABLE</span></div>
<div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../df/dc0/rpmalloc_8c.html#ae1f1297fe3d143e41deac95ee7a7f8d4">_memory_config</a>.<a class="code" href="../../df/d42/structrpmalloc__config__t.html#ab730f9de6da78affe64497f859d6d345">span_size</a>)</div>
<div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;    {</div>
<div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;        <a class="code" href="../../df/dc0/rpmalloc_8c.html#a9fefa5277fefa0c58f69d5b86d679ccb">_memory_span_size</a> = <a class="code" href="../../df/dc0/rpmalloc_8c.html#a04a025a8c2529bc60cb95c78d3948c52">_memory_default_span_size</a>;</div>
<div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;        <a class="code" href="../../df/dc0/rpmalloc_8c.html#adb538a1ad8a86db6b92895d9ebf6d907">_memory_span_size_shift</a> = <a class="code" href="../../df/dc0/rpmalloc_8c.html#a3dedf1d71cda4a8f3d1f372934ddad30">_memory_default_span_size_shift</a>;</div>
<div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;        <a class="code" href="../../df/dc0/rpmalloc_8c.html#ae7b97ba12e15609b6d63926ed2e30238">_memory_span_mask</a> = <a class="code" href="../../df/dc0/rpmalloc_8c.html#ada0a343b3498bb882ebd7e0c3caa0935">_memory_default_span_mask</a>;</div>
<div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;    }</div>
<div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;    {</div>
<div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;        <span class="keywordtype">size_t</span> span_size = <a class="code" href="../../df/dc0/rpmalloc_8c.html#ae1f1297fe3d143e41deac95ee7a7f8d4">_memory_config</a>.<a class="code" href="../../df/d42/structrpmalloc__config__t.html#ab730f9de6da78affe64497f859d6d345">span_size</a>;</div>
<div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;        <span class="keywordflow">if</span> (span_size &gt; (256 * 1024))</div>
<div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;            span_size = (256 * 1024);</div>
<div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;        <a class="code" href="../../df/dc0/rpmalloc_8c.html#a9fefa5277fefa0c58f69d5b86d679ccb">_memory_span_size</a> = 4096;</div>
<div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;        <a class="code" href="../../df/dc0/rpmalloc_8c.html#adb538a1ad8a86db6b92895d9ebf6d907">_memory_span_size_shift</a> = 12;</div>
<div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;        <span class="keywordflow">while</span> (<a class="code" href="../../df/dc0/rpmalloc_8c.html#a9fefa5277fefa0c58f69d5b86d679ccb">_memory_span_size</a> &lt; span_size)</div>
<div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;        {</div>
<div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;            <a class="code" href="../../df/dc0/rpmalloc_8c.html#a9fefa5277fefa0c58f69d5b86d679ccb">_memory_span_size</a> &lt;&lt;= 1;</div>
<div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;            ++<a class="code" href="../../df/dc0/rpmalloc_8c.html#adb538a1ad8a86db6b92895d9ebf6d907">_memory_span_size_shift</a>;</div>
<div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;        }</div>
<div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;        <a class="code" href="../../df/dc0/rpmalloc_8c.html#ae7b97ba12e15609b6d63926ed2e30238">_memory_span_mask</a> = ~(<a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a4788399d1d0b37ccf098a7da82254808">uintptr_t</a>)(<a class="code" href="../../df/dc0/rpmalloc_8c.html#a9fefa5277fefa0c58f69d5b86d679ccb">_memory_span_size</a> - 1);</div>
<div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;    }</div>
<div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160; </div>
<div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;    <a class="code" href="../../df/dc0/rpmalloc_8c.html#a3d9a7f69f3e3cc2dc7ea18d8c58b274c">_memory_span_map_count</a> = (<a class="code" href="../../df/dc0/rpmalloc_8c.html#ae1f1297fe3d143e41deac95ee7a7f8d4">_memory_config</a>.<a class="code" href="../../df/d42/structrpmalloc__config__t.html#a84cfc60f2a133ca255a762778cc024c6">span_map_count</a> ? <a class="code" href="../../df/dc0/rpmalloc_8c.html#ae1f1297fe3d143e41deac95ee7a7f8d4">_memory_config</a>.<a class="code" href="../../df/d42/structrpmalloc__config__t.html#a84cfc60f2a133ca255a762778cc024c6">span_map_count</a> : <a class="code" href="../../df/dc0/rpmalloc_8c.html#af8803f4eab133ac4c823104577553d78">DEFAULT_SPAN_MAP_COUNT</a>);</div>
<div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="../../df/dc0/rpmalloc_8c.html#a9fefa5277fefa0c58f69d5b86d679ccb">_memory_span_size</a> * <a class="code" href="../../df/dc0/rpmalloc_8c.html#a3d9a7f69f3e3cc2dc7ea18d8c58b274c">_memory_span_map_count</a>) &lt; <a class="code" href="../../df/dc0/rpmalloc_8c.html#a3667b745f7290a10ff5c5a71575533d9">_memory_page_size</a>)</div>
<div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;        <a class="code" href="../../df/dc0/rpmalloc_8c.html#a3d9a7f69f3e3cc2dc7ea18d8c58b274c">_memory_span_map_count</a> = (<a class="code" href="../../df/dc0/rpmalloc_8c.html#a3667b745f7290a10ff5c5a71575533d9">_memory_page_size</a> / <a class="code" href="../../df/dc0/rpmalloc_8c.html#a9fefa5277fefa0c58f69d5b86d679ccb">_memory_span_size</a>);</div>
<div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="../../df/dc0/rpmalloc_8c.html#a3667b745f7290a10ff5c5a71575533d9">_memory_page_size</a> &gt;= <a class="code" href="../../df/dc0/rpmalloc_8c.html#a9fefa5277fefa0c58f69d5b86d679ccb">_memory_span_size</a>) &amp;&amp; ((<a class="code" href="../../df/dc0/rpmalloc_8c.html#a3d9a7f69f3e3cc2dc7ea18d8c58b274c">_memory_span_map_count</a> * <a class="code" href="../../df/dc0/rpmalloc_8c.html#a9fefa5277fefa0c58f69d5b86d679ccb">_memory_span_size</a>) % <a class="code" href="../../df/dc0/rpmalloc_8c.html#a3667b745f7290a10ff5c5a71575533d9">_memory_page_size</a>))</div>
<div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;        <a class="code" href="../../df/dc0/rpmalloc_8c.html#a3d9a7f69f3e3cc2dc7ea18d8c58b274c">_memory_span_map_count</a> = (<a class="code" href="../../df/dc0/rpmalloc_8c.html#a3667b745f7290a10ff5c5a71575533d9">_memory_page_size</a> / <a class="code" href="../../df/dc0/rpmalloc_8c.html#a9fefa5277fefa0c58f69d5b86d679ccb">_memory_span_size</a>);</div>
<div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;    <a class="code" href="../../df/dc0/rpmalloc_8c.html#ada12637cd22672d5ad52ceba482b7f5c">_memory_heap_reserve_count</a> = (<a class="code" href="../../df/dc0/rpmalloc_8c.html#a3d9a7f69f3e3cc2dc7ea18d8c58b274c">_memory_span_map_count</a> &gt; <a class="code" href="../../df/dc0/rpmalloc_8c.html#af8803f4eab133ac4c823104577553d78">DEFAULT_SPAN_MAP_COUNT</a>) ? <a class="code" href="../../df/dc0/rpmalloc_8c.html#af8803f4eab133ac4c823104577553d78">DEFAULT_SPAN_MAP_COUNT</a> : <a class="code" href="../../df/dc0/rpmalloc_8c.html#a3d9a7f69f3e3cc2dc7ea18d8c58b274c">_memory_span_map_count</a>;</div>
<div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160; </div>
<div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;    <a class="code" href="../../df/dc0/rpmalloc_8c.html#ae1f1297fe3d143e41deac95ee7a7f8d4">_memory_config</a>.<a class="code" href="../../df/d42/structrpmalloc__config__t.html#adcf8dfc992b8b4a4e6cd72e213bf1035">page_size</a> = <a class="code" href="../../df/dc0/rpmalloc_8c.html#a3667b745f7290a10ff5c5a71575533d9">_memory_page_size</a>;</div>
<div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;    <a class="code" href="../../df/dc0/rpmalloc_8c.html#ae1f1297fe3d143e41deac95ee7a7f8d4">_memory_config</a>.<a class="code" href="../../df/d42/structrpmalloc__config__t.html#ab730f9de6da78affe64497f859d6d345">span_size</a> = <a class="code" href="../../df/dc0/rpmalloc_8c.html#a9fefa5277fefa0c58f69d5b86d679ccb">_memory_span_size</a>;</div>
<div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;    <a class="code" href="../../df/dc0/rpmalloc_8c.html#ae1f1297fe3d143e41deac95ee7a7f8d4">_memory_config</a>.<a class="code" href="../../df/d42/structrpmalloc__config__t.html#a84cfc60f2a133ca255a762778cc024c6">span_map_count</a> = <a class="code" href="../../df/dc0/rpmalloc_8c.html#a3d9a7f69f3e3cc2dc7ea18d8c58b274c">_memory_span_map_count</a>;</div>
<div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;    <a class="code" href="../../df/dc0/rpmalloc_8c.html#ae1f1297fe3d143e41deac95ee7a7f8d4">_memory_config</a>.<a class="code" href="../../df/d42/structrpmalloc__config__t.html#a9cfb1a2f571e8ebe68185b387f04260b">enable_huge_pages</a> = <a class="code" href="../../df/dc0/rpmalloc_8c.html#a4cdf64413eaa3e80f8a1dfe158bd2525">_memory_huge_pages</a>;</div>
<div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160; </div>
<div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;<span class="preprocessor">#if ((defined(__APPLE__) || defined(__HAIKU__)) &amp;&amp; ENABLE_PRELOAD) || defined(__TINYC__)</span></div>
<div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../df/d00/Userspace_2musl_2include_2pthread_8h.html#a74969d08c03097db757218adda625264">pthread_key_create</a>(&amp;<a class="code" href="../../df/dc0/rpmalloc_8c.html#a0c3d121b2c7e431b109863973cff023c">_memory_thread_heap</a>, <a class="code" href="../../df/dc0/rpmalloc_8c.html#a375befcec19545c40cb27c22512501bb">_rpmalloc_heap_release_raw_fc</a>))</div>
<div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160; </div>
<div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;    <span class="comment">// Setup all small and medium size classes</span></div>
<div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;    <span class="keywordtype">size_t</span> iclass = 0;</div>
<div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;    <a class="code" href="../../df/dc0/rpmalloc_8c.html#a33cddb08b9ee0f969cc82dbf9cddb947">_memory_size_class</a>[iclass].<a class="code" href="../../df/dc0/rpmalloc_8c.html#a007fc7dd52ba1f95d9a6ce88f47a614b">block_size</a> = <a class="code" href="../../df/dc0/rpmalloc_8c.html#a000afcda168a6fd19a9435e049508463">SMALL_GRANULARITY</a>;</div>
<div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;    <a class="code" href="../../df/dc0/rpmalloc_8c.html#a223c890fd871bff9081258f6520fc8a9">_rpmalloc_adjust_size_class</a>(iclass);</div>
<div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;    <span class="keywordflow">for</span> (iclass = 1; iclass &lt; <a class="code" href="../../df/dc0/rpmalloc_8c.html#afef7a20458b75404cdbba364a751694a">SMALL_CLASS_COUNT</a>; ++iclass)</div>
<div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;    {</div>
<div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;        <span class="keywordtype">size_t</span> <a class="code" href="../../d1/dc0/multiboot_8h.html#a6d813a0f2b5281b18dea3f4cda696c33">size</a> = iclass * <a class="code" href="../../df/dc0/rpmalloc_8c.html#a000afcda168a6fd19a9435e049508463">SMALL_GRANULARITY</a>;</div>
<div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;        <a class="code" href="../../df/dc0/rpmalloc_8c.html#a33cddb08b9ee0f969cc82dbf9cddb947">_memory_size_class</a>[iclass].<a class="code" href="../../df/dc0/rpmalloc_8c.html#a007fc7dd52ba1f95d9a6ce88f47a614b">block_size</a> = (<a class="code" href="../../dd/ddd/arithmetic__operations_8c.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>)<a class="code" href="../../d1/dc0/multiboot_8h.html#a6d813a0f2b5281b18dea3f4cda696c33">size</a>;</div>
<div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;        <a class="code" href="../../df/dc0/rpmalloc_8c.html#a223c890fd871bff9081258f6520fc8a9">_rpmalloc_adjust_size_class</a>(iclass);</div>
<div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;    }</div>
<div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;    <span class="comment">// At least two blocks per span, then fall back to large allocations</span></div>
<div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;    <a class="code" href="../../df/dc0/rpmalloc_8c.html#a9641beb0030ad56b2df025775823b2af">_memory_medium_size_limit</a> = (<a class="code" href="../../df/dc0/rpmalloc_8c.html#a9fefa5277fefa0c58f69d5b86d679ccb">_memory_span_size</a> - <a class="code" href="../../df/dc0/rpmalloc_8c.html#a645356809d937167848705edabde7d44">SPAN_HEADER_SIZE</a>) &gt;&gt; 1;</div>
<div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../df/dc0/rpmalloc_8c.html#a9641beb0030ad56b2df025775823b2af">_memory_medium_size_limit</a> &gt; <a class="code" href="../../df/dc0/rpmalloc_8c.html#aecb085054ab2d682b41748925519c084">MEDIUM_SIZE_LIMIT</a>)</div>
<div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;        <a class="code" href="../../df/dc0/rpmalloc_8c.html#a9641beb0030ad56b2df025775823b2af">_memory_medium_size_limit</a> = <a class="code" href="../../df/dc0/rpmalloc_8c.html#aecb085054ab2d682b41748925519c084">MEDIUM_SIZE_LIMIT</a>;</div>
<div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;    <span class="keywordflow">for</span> (iclass = 0; iclass &lt; <a class="code" href="../../df/dc0/rpmalloc_8c.html#a554df4bc024ffaa8328e6ef37cec5c77">MEDIUM_CLASS_COUNT</a>; ++iclass)</div>
<div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;    {</div>
<div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;        <span class="keywordtype">size_t</span> <a class="code" href="../../d1/dc0/multiboot_8h.html#a6d813a0f2b5281b18dea3f4cda696c33">size</a> = <a class="code" href="../../df/dc0/rpmalloc_8c.html#aecf578949f89fb109c5f6f527a2dc49d">SMALL_SIZE_LIMIT</a> + ((iclass + 1) * <a class="code" href="../../df/dc0/rpmalloc_8c.html#a0cbe158c682e307dc9372ee5a0b5167a">MEDIUM_GRANULARITY</a>);</div>
<div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d1/dc0/multiboot_8h.html#a6d813a0f2b5281b18dea3f4cda696c33">size</a> &gt; <a class="code" href="../../df/dc0/rpmalloc_8c.html#a9641beb0030ad56b2df025775823b2af">_memory_medium_size_limit</a>)</div>
<div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;        <a class="code" href="../../df/dc0/rpmalloc_8c.html#a33cddb08b9ee0f969cc82dbf9cddb947">_memory_size_class</a>[<a class="code" href="../../df/dc0/rpmalloc_8c.html#afef7a20458b75404cdbba364a751694a">SMALL_CLASS_COUNT</a> + iclass].<a class="code" href="../../df/dc0/rpmalloc_8c.html#a007fc7dd52ba1f95d9a6ce88f47a614b">block_size</a> = (<a class="code" href="../../dd/ddd/arithmetic__operations_8c.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>)<a class="code" href="../../d1/dc0/multiboot_8h.html#a6d813a0f2b5281b18dea3f4cda696c33">size</a>;</div>
<div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;        <a class="code" href="../../df/dc0/rpmalloc_8c.html#a223c890fd871bff9081258f6520fc8a9">_rpmalloc_adjust_size_class</a>(<a class="code" href="../../df/dc0/rpmalloc_8c.html#afef7a20458b75404cdbba364a751694a">SMALL_CLASS_COUNT</a> + iclass);</div>
<div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;    }</div>
<div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160; </div>
<div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;    <a class="code" href="../../df/dc0/rpmalloc_8c.html#ae3a524405e2a853229e95546df284be2">_memory_orphan_heaps</a> = 0;</div>
<div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;<span class="preprocessor">#if RPMALLOC_FIRST_CLASS_HEAPS</span></div>
<div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;    _memory_first_class_orphan_heaps = 0;</div>
<div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;<span class="preprocessor">#if ENABLE_STATISTICS</span></div>
<div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;    <a class="code" href="../../df/dc0/rpmalloc_8c.html#aa1ee77cdccf0341222f64395d0be2626">atomic_store32</a>(&amp;_memory_active_heaps, 0);</div>
<div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;    <a class="code" href="../../df/dc0/rpmalloc_8c.html#aa1ee77cdccf0341222f64395d0be2626">atomic_store32</a>(&amp;_mapped_pages, 0);</div>
<div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;    _mapped_pages_peak = 0;</div>
<div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;    <a class="code" href="../../df/dc0/rpmalloc_8c.html#aa1ee77cdccf0341222f64395d0be2626">atomic_store32</a>(&amp;_master_spans, 0);</div>
<div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;    <a class="code" href="../../df/dc0/rpmalloc_8c.html#aa1ee77cdccf0341222f64395d0be2626">atomic_store32</a>(&amp;_mapped_total, 0);</div>
<div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;    <a class="code" href="../../df/dc0/rpmalloc_8c.html#aa1ee77cdccf0341222f64395d0be2626">atomic_store32</a>(&amp;_unmapped_total, 0);</div>
<div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;    <a class="code" href="../../df/dc0/rpmalloc_8c.html#aa1ee77cdccf0341222f64395d0be2626">atomic_store32</a>(&amp;_mapped_pages_os, 0);</div>
<div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;    <a class="code" href="../../df/dc0/rpmalloc_8c.html#aa1ee77cdccf0341222f64395d0be2626">atomic_store32</a>(&amp;_huge_pages_current, 0);</div>
<div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;    _huge_pages_peak = 0;</div>
<div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;    <a class="code" href="../../d3/d82/convert_8h.html#a9c1f204516a55affa9ba118907e5ab6b">memset_unsafe</a>(<a class="code" href="../../df/dc0/rpmalloc_8c.html#a3e39052a111a2e243645494f1d6ca439">_memory_heaps</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="../../df/dc0/rpmalloc_8c.html#a3e39052a111a2e243645494f1d6ca439">_memory_heaps</a>));</div>
<div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;    <a class="code" href="../../df/dc0/rpmalloc_8c.html#a2a87a6060d5387fe8491a00600073687">atomic_store32_release</a>(&amp;<a class="code" href="../../df/dc0/rpmalloc_8c.html#a1cb428169705ddd63fb35383132dbc40">_memory_global_lock</a>, 0);</div>
<div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160; </div>
<div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;    <span class="comment">// Initialize this thread</span></div>
<div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;    <a class="code" href="../../df/dc0/rpmalloc_8c.html#a85a64540090a42380ee6d969ec1897c1">rpmalloc_thread_initialize</a>();</div>
<div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;}</div>
<div class="ttc" id="aKernel_2include_2types_8h_html_a4788399d1d0b37ccf098a7da82254808"><div class="ttname"><a href="../../d0/df4/Kernel_2include_2types_8h.html#a4788399d1d0b37ccf098a7da82254808">uintptr_t</a></div><div class="ttdeci">__UINTPTR_TYPE__ uintptr_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/Kernel_2include_2types_8h_source.html#l00186">types.h:186</a></div></div>
<div class="ttc" id="aKernel_2include__std_2unistd_8h_html_af8524bbbaf09850389a58789b72caf52"><div class="ttname"><a href="../../d2/d58/Kernel_2include__std_2unistd_8h.html#af8524bbbaf09850389a58789b72caf52">_SC_PAGESIZE</a></div><div class="ttdeci">#define _SC_PAGESIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d58/Kernel_2include__std_2unistd_8h_source.html#l00023">unistd.h:23</a></div></div>
<div class="ttc" id="aUserspace_2musl_2include_2pthread_8h_html_a74969d08c03097db757218adda625264"><div class="ttname"><a href="../../df/d00/Userspace_2musl_2include_2pthread_8h.html#a74969d08c03097db757218adda625264">pthread_key_create</a></div><div class="ttdeci">int pthread_key_create(pthread_key_t *, void(*)(void *))</div></div>
<div class="ttc" id="aarithmetic__operations_8c_html_a435d1572bf3f880d55459d9805097f62"><div class="ttname"><a href="../../dd/ddd/arithmetic__operations_8c.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a></div><div class="ttdeci">unsigned int uint32_t</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/ddd/arithmetic__operations_8c_source.html#l00295">arithmetic_operations.c:295</a></div></div>
<div class="ttc" id="acargs_8h_html_a69437b5d572dd16d6d4fdbcbd066c7a9"><div class="ttname"><a href="../../d1/d37/cargs_8h.html#a69437b5d572dd16d6d4fdbcbd066c7a9">FILE</a></div><div class="ttdeci">unsigned int FILE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d37/cargs_8h_source.html#l00038">cargs.h:38</a></div></div>
<div class="ttc" id="aconvert_8h_html_a2ce966cd04da3c32320f54c332569e03"><div class="ttname"><a href="../../d3/d82/convert_8h.html#a2ce966cd04da3c32320f54c332569e03">strtol</a></div><div class="ttdeci">long int strtol(const char *str, char **endptr, int base)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d68/convert_8cpp_source.html#l00202">convert.cpp:202</a></div></div>
<div class="ttc" id="aconvert_8h_html_a4a710d86541afc6b7dafddcdb4b1c94f"><div class="ttname"><a href="../../d3/d82/convert_8h.html#a4a710d86541afc6b7dafddcdb4b1c94f">strstr</a></div><div class="ttdeci">char * strstr(const char *haystack, const char *needle)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d68/convert_8cpp_source.html#l00156">convert.cpp:156</a></div></div>
<div class="ttc" id="aconvert_8h_html_a7a71051d6440816fca3ad080ae2539f4"><div class="ttname"><a href="../../d3/d82/convert_8h.html#a7a71051d6440816fca3ad080ae2539f4">memcpy_unsafe</a></div><div class="ttdeci">void * memcpy_unsafe(void *dest, const void *src, size_t n)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/df3/Kernel_2library_2memop_8c_source.html#l00035">memop.c:35</a></div></div>
<div class="ttc" id="afilesystem_8hpp_html_a575cfdaca3a77c3f910df16d56d7240c"><div class="ttname"><a href="../../d1/d85/filesystem_8hpp.html#a575cfdaca3a77c3f910df16d56d7240c">fclose</a></div><div class="ttdeci">int fclose(int fd)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d5c/kernel__io_8cpp_source.html#l00077">kernel_io.cpp:77</a></div></div>
<div class="ttc" id="afilesystem_8hpp_html_ae2ec3b9037ed12c33f4f7327099f615c"><div class="ttname"><a href="../../d1/d85/filesystem_8hpp.html#ae2ec3b9037ed12c33f4f7327099f615c">fopen</a></div><div class="ttdeci">int fopen(const char *pathname, const char *mode)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d5c/kernel__io_8cpp_source.html#l00033">kernel_io.cpp:33</a></div></div>
<div class="ttc" id="ainetd_8c_html_a5bdec07ba0f5f220bcb40d5258725d95"><div class="ttname"><a href="../../dc/d37/inetd_8c.html#a5bdec07ba0f5f220bcb40d5258725d95">line</a></div><div class="ttdeci">#define line</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d37/inetd_8c_source.html#l00427">inetd.c:427</a></div></div>
<div class="ttc" id="alibbb_8h_html_a458f311e9a7d803457d8ac51bf5aae4b"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#a458f311e9a7d803457d8ac51bf5aae4b">fgets</a></div><div class="ttdeci">#define fgets(s, n, stream)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dd7/libbb_8h_source.html#l00236">libbb.h:236</a></div></div>
<div class="ttc" id="apowertop_8c_html_d4/d85/structline"><div class="ttname"><a href="../../dd/d7b/powertop_8c.html#d4/d85/structline">line</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dff/diff_8c_source.html#l00351">diff.c:351</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_a000afcda168a6fd19a9435e049508463"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#a000afcda168a6fd19a9435e049508463">SMALL_GRANULARITY</a></div><div class="ttdeci">#define SMALL_GRANULARITY</div><div class="ttdoc">Granularity of a small allocation block (must be power of two)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00288">rpmalloc.c:288</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_a007fc7dd52ba1f95d9a6ce88f47a614b"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#a007fc7dd52ba1f95d9a6ce88f47a614b">size_class_t::block_size</a></div><div class="ttdeci">uint32_t block_size</div><div class="ttdoc">Size of blocks in this class.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00560">rpmalloc.c:560</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_a04a025a8c2529bc60cb95c78d3948c52"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#a04a025a8c2529bc60cb95c78d3948c52">_memory_default_span_size</a></div><div class="ttdeci">#define _memory_default_span_size</div><div class="ttdoc">Default span size (64KiB)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00593">rpmalloc.c:593</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_a0cbe158c682e307dc9372ee5a0b5167a"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#a0cbe158c682e307dc9372ee5a0b5167a">MEDIUM_GRANULARITY</a></div><div class="ttdeci">#define MEDIUM_GRANULARITY</div><div class="ttdoc">Granularity of a medium allocation block.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00296">rpmalloc.c:296</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_a1e29d8d18139babda354d5d92d46ca02"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#a1e29d8d18139babda354d5d92d46ca02">_memory_map_granularity</a></div><div class="ttdeci">static size_t _memory_map_granularity</div><div class="ttdoc">Granularity at which memory pages are mapped by OS.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00608">rpmalloc.c:608</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_a223c890fd871bff9081258f6520fc8a9"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#a223c890fd871bff9081258f6520fc8a9">_rpmalloc_adjust_size_class</a></div><div class="ttdeci">static void _rpmalloc_adjust_size_class(size_t iclass)</div><div class="ttdoc">Adjust and optimize the size class properties for the given class.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l02788">rpmalloc.c:2788</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_a33cddb08b9ee0f969cc82dbf9cddb947"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#a33cddb08b9ee0f969cc82dbf9cddb947">_memory_size_class</a></div><div class="ttdeci">static size_class_t _memory_size_class[SIZE_CLASS_COUNT]</div><div class="ttdoc">Global size classes.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00627">rpmalloc.c:627</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_a375befcec19545c40cb27c22512501bb"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#a375befcec19545c40cb27c22512501bb">_rpmalloc_heap_release_raw_fc</a></div><div class="ttdeci">static void _rpmalloc_heap_release_raw_fc(void *heapptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l02063">rpmalloc.c:2063</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_a3d9a7f69f3e3cc2dc7ea18d8c58b274c"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#a3d9a7f69f3e3cc2dc7ea18d8c58b274c">_memory_span_map_count</a></div><div class="ttdeci">static size_t _memory_span_map_count</div><div class="ttdoc">Number of spans to map in each map call.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00623">rpmalloc.c:623</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_a3dedf1d71cda4a8f3d1f372934ddad30"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#a3dedf1d71cda4a8f3d1f372934ddad30">_memory_default_span_size_shift</a></div><div class="ttdeci">#define _memory_default_span_size_shift</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00594">rpmalloc.c:594</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_a4cdf64413eaa3e80f8a1dfe158bd2525"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#a4cdf64413eaa3e80f8a1dfe158bd2525">_memory_huge_pages</a></div><div class="ttdeci">static int _memory_huge_pages</div><div class="ttdoc">Huge page support.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00633">rpmalloc.c:633</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_a554df4bc024ffaa8328e6ef37cec5c77"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#a554df4bc024ffaa8328e6ef37cec5c77">MEDIUM_CLASS_COUNT</a></div><div class="ttdeci">#define MEDIUM_CLASS_COUNT</div><div class="ttdoc">Number of medium block size classes.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00300">rpmalloc.c:300</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_a645356809d937167848705edabde7d44"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#a645356809d937167848705edabde7d44">SPAN_HEADER_SIZE</a></div><div class="ttdeci">#define SPAN_HEADER_SIZE</div><div class="ttdoc">Size of a span header (must be a multiple of SMALL_GRANULARITY and a power of two)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00310">rpmalloc.c:310</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_a693c463bae081b54b0b799e97bf84fb5"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#a693c463bae081b54b0b799e97bf84fb5">_rpmalloc_unmap_os</a></div><div class="ttdeci">static void _rpmalloc_unmap_os(void *address, size_t size, size_t offset, size_t release)</div><div class="ttdoc">Default implementation to unmap pages from virtual memory.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00874">rpmalloc.c:874</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_a9641beb0030ad56b2df025775823b2af"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#a9641beb0030ad56b2df025775823b2af">_memory_medium_size_limit</a></div><div class="ttdeci">static size_t _memory_medium_size_limit</div><div class="ttdoc">Run-time size limit of medium blocks.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00629">rpmalloc.c:629</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_a97f4a6378f5e22e4e38e32cf9f370430"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#a97f4a6378f5e22e4e38e32cf9f370430">__rpmalloc_sysconf</a></div><div class="ttdeci">long __rpmalloc_sysconf(int name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d7e/rpmalloc__compat_8cpp_source.html#l00058">rpmalloc_compat.cpp:58</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_a9d7ec974d864302bb4f8516859c4b212"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#a9d7ec974d864302bb4f8516859c4b212">_memory_page_size_shift</a></div><div class="ttdeci">static size_t _memory_page_size_shift</div><div class="ttdoc">Shift to divide by page size.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00606">rpmalloc.c:606</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_aa1ee77cdccf0341222f64395d0be2626"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#aa1ee77cdccf0341222f64395d0be2626">atomic_store32</a></div><div class="ttdeci">static FORCEINLINE void atomic_store32(atomic32_t *dst, int32_t val)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00179">rpmalloc.c:179</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_aa3b1a6473db3c198691da8c7b8918f7a"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#aa3b1a6473db3c198691da8c7b8918f7a">_rpmalloc_mmap_os</a></div><div class="ttdeci">static void * _rpmalloc_mmap_os(size_t size, size_t *offset)</div><div class="ttdoc">Default implementation to map new pages to virtual memory.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00835">rpmalloc.c:835</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_ada0a343b3498bb882ebd7e0c3caa0935"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#ada0a343b3498bb882ebd7e0c3caa0935">_memory_default_span_mask</a></div><div class="ttdeci">#define _memory_default_span_mask</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00595">rpmalloc.c:595</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_ada12637cd22672d5ad52ceba482b7f5c"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#ada12637cd22672d5ad52ceba482b7f5c">_memory_heap_reserve_count</a></div><div class="ttdeci">static size_t _memory_heap_reserve_count</div><div class="ttdoc">Number of spans to keep reserved in each heap.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00625">rpmalloc.c:625</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_adb538a1ad8a86db6b92895d9ebf6d907"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#adb538a1ad8a86db6b92895d9ebf6d907">_memory_span_size_shift</a></div><div class="ttdeci">static size_t _memory_span_size_shift</div><div class="ttdoc">Shift to divide by span size.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00613">rpmalloc.c:613</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_ae3a524405e2a853229e95546df284be2"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#ae3a524405e2a853229e95546df284be2">_memory_orphan_heaps</a></div><div class="ttdeci">static heap_t * _memory_orphan_heaps</div><div class="ttdoc">Orphaned heaps.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00649">rpmalloc.c:649</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_ae7b97ba12e15609b6d63926ed2e30238"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#ae7b97ba12e15609b6d63926ed2e30238">_memory_span_mask</a></div><div class="ttdeci">static uintptr_t _memory_span_mask</div><div class="ttdoc">Mask to get to start of a memory span.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00615">rpmalloc.c:615</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_aecb085054ab2d682b41748925519c084"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#aecb085054ab2d682b41748925519c084">MEDIUM_SIZE_LIMIT</a></div><div class="ttdeci">#define MEDIUM_SIZE_LIMIT</div><div class="ttdoc">Maximum size of a medium block.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00306">rpmalloc.c:306</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_aecf578949f89fb109c5f6f527a2dc49d"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#aecf578949f89fb109c5f6f527a2dc49d">SMALL_SIZE_LIMIT</a></div><div class="ttdeci">#define SMALL_SIZE_LIMIT</div><div class="ttdoc">Maximum size of a small block.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00294">rpmalloc.c:294</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_af8803f4eab133ac4c823104577553d78"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#af8803f4eab133ac4c823104577553d78">DEFAULT_SPAN_MAP_COUNT</a></div><div class="ttdeci">#define DEFAULT_SPAN_MAP_COUNT</div><div class="ttdoc">Default number of spans to map in call to map more virtual memory (default values yield 4MiB here)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00077">rpmalloc.c:77</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_afef7a20458b75404cdbba364a751694a"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#afef7a20458b75404cdbba364a751694a">SMALL_CLASS_COUNT</a></div><div class="ttdeci">#define SMALL_CLASS_COUNT</div><div class="ttdoc">Number of small block size classes.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00292">rpmalloc.c:292</a></div></div>
<div class="ttc" id="astructrpmalloc__config__t_html"><div class="ttname"><a href="../../df/d42/structrpmalloc__config__t.html">rpmalloc_config_t</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d43/rpmalloc_8h_source.html#l00141">rpmalloc.h:142</a></div></div>
<div class="ttc" id="astructrpmalloc__config__t_html_a10fb22a2f8775aafd70b1c79f6b80630"><div class="ttname"><a href="../../df/d42/structrpmalloc__config__t.html#a10fb22a2f8775aafd70b1c79f6b80630">rpmalloc_config_t::memory_unmap</a></div><div class="ttdeci">void(* memory_unmap)(void *address, size_t size, size_t offset, size_t release)</div><div class="ttdoc">Unmap the memory pages starting at address and spanning the given number of bytes.</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d43/rpmalloc_8h_source.html#l00163">rpmalloc.h:163</a></div></div>
<div class="ttc" id="astructrpmalloc__config__t_html_a84cfc60f2a133ca255a762778cc024c6"><div class="ttname"><a href="../../df/d42/structrpmalloc__config__t.html#a84cfc60f2a133ca255a762778cc024c6">rpmalloc_config_t::span_map_count</a></div><div class="ttdeci">size_t span_map_count</div><div class="ttdoc">Number of spans to map at each request to map new virtual memory blocks. This can.</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d43/rpmalloc_8h_source.html#l00186">rpmalloc.h:186</a></div></div>
<div class="ttc" id="astructrpmalloc__config__t_html_a9cfb1a2f571e8ebe68185b387f04260b"><div class="ttname"><a href="../../df/d42/structrpmalloc__config__t.html#a9cfb1a2f571e8ebe68185b387f04260b">rpmalloc_config_t::enable_huge_pages</a></div><div class="ttdeci">int enable_huge_pages</div><div class="ttdoc">Enable use of large/huge pages. If this flag is set to non-zero and page size is.</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d43/rpmalloc_8h_source.html#l00194">rpmalloc.h:194</a></div></div>
<div class="ttc" id="astructrpmalloc__config__t_html_ab1a81b9e7c3dee077fafc85b5327ea6b"><div class="ttname"><a href="../../df/d42/structrpmalloc__config__t.html#ab1a81b9e7c3dee077fafc85b5327ea6b">rpmalloc_config_t::memory_map</a></div><div class="ttdeci">void *(* memory_map)(size_t size, size_t *offset)</div><div class="ttdoc">Map memory pages for the given number of bytes. The returned address MUST be.</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d43/rpmalloc_8h_source.html#l00154">rpmalloc.h:154</a></div></div>
<div class="ttc" id="astructrpmalloc__config__t_html_ab730f9de6da78affe64497f859d6d345"><div class="ttname"><a href="../../df/d42/structrpmalloc__config__t.html#ab730f9de6da78affe64497f859d6d345">rpmalloc_config_t::span_size</a></div><div class="ttdeci">size_t span_size</div><div class="ttdoc">Size of a span of memory blocks. MUST be a power of two, and in [4096,262144].</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d43/rpmalloc_8h_source.html#l00180">rpmalloc.h:180</a></div></div>
<div class="ttc" id="astructrpmalloc__config__t_html_adcf8dfc992b8b4a4e6cd72e213bf1035"><div class="ttname"><a href="../../df/d42/structrpmalloc__config__t.html#adcf8dfc992b8b4a4e6cd72e213bf1035">rpmalloc_config_t::page_size</a></div><div class="ttdeci">size_t page_size</div><div class="ttdoc">Size of memory pages. The page size MUST be a power of two. All memory mapping.</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d43/rpmalloc_8h_source.html#l00176">rpmalloc.h:176</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d1/d7e/rpmalloc__compat_8cpp_source.html#l00058">__rpmalloc_sysconf()</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00602">_memory_config</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00595">_memory_default_span_mask</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00593">_memory_default_span_size</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00594">_memory_default_span_size_shift</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00647">_memory_global_lock</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00625">_memory_heap_reserve_count</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00645">_memory_heaps</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00633">_memory_huge_pages</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00608">_memory_map_granularity</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00629">_memory_medium_size_limit</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00649">_memory_orphan_heaps</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00604">_memory_page_size</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00606">_memory_page_size_shift</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00627">_memory_size_class</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00623">_memory_span_map_count</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00615">_memory_span_mask</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00611">_memory_span_size</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00613">_memory_span_size_shift</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00706">_memory_thread_heap</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l02788">_rpmalloc_adjust_size_class()</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l02063">_rpmalloc_heap_release_raw_fc()</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00598">_rpmalloc_initialized</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00835">_rpmalloc_mmap_os()</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00874">_rpmalloc_unmap_os()</a>, <a class="el" href="../../d2/d58/Kernel_2include__std_2unistd_8h_source.html#l00023">_SC_PAGESIZE</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00179">atomic_store32()</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00184">atomic_store32_release()</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00560">size_class_t::block_size</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00077">DEFAULT_SPAN_MAP_COUNT</a>, <a class="el" href="../../d2/d43/rpmalloc_8h_source.html#l00194">rpmalloc_config_t::enable_huge_pages</a>, <a class="el" href="../../d8/d5c/kernel__io_8cpp_source.html#l00077">fclose()</a>, <a class="el" href="../../d7/dd7/libbb_8h_source.html#l00236">fgets</a>, <a class="el" href="../../d8/d5c/kernel__io_8cpp_source.html#l00033">fopen()</a>, <a class="el" href="../../dc/d37/inetd_8c_source.html#l00427">line</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00300">MEDIUM_CLASS_COUNT</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00296">MEDIUM_GRANULARITY</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00306">MEDIUM_SIZE_LIMIT</a>, <a class="el" href="../../d3/df3/Kernel_2library_2memop_8c_source.html#l00035">memcpy_unsafe()</a>, <a class="el" href="../../d2/d43/rpmalloc_8h_source.html#l00154">rpmalloc_config_t::memory_map</a>, <a class="el" href="../../d2/d43/rpmalloc_8h_source.html#l00163">rpmalloc_config_t::memory_unmap</a>, <a class="el" href="../../d3/df3/Kernel_2library_2memop_8c_source.html#l00214">memset_unsafe()</a>, <a class="el" href="../../d2/d43/rpmalloc_8h_source.html#l00176">rpmalloc_config_t::page_size</a>, <a class="el" href="../../df/d00/Userspace_2musl_2include_2pthread_8h.html#a74969d08c03097db757218adda625264">pthread_key_create()</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l03044">rpmalloc_thread_initialize()</a>, <a class="el" href="../../d1/dc0/multiboot_8h_source.html#l00000">size</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00292">SMALL_CLASS_COUNT</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00288">SMALL_GRANULARITY</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00294">SMALL_SIZE_LIMIT</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00310">SPAN_HEADER_SIZE</a>, <a class="el" href="../../d2/d43/rpmalloc_8h_source.html#l00186">rpmalloc_config_t::span_map_count</a>, <a class="el" href="../../d2/d43/rpmalloc_8h_source.html#l00180">rpmalloc_config_t::span_size</a>, <a class="el" href="../../d3/d68/convert_8cpp_source.html#l00156">strstr()</a>, and <a class="el" href="../../d3/d68/convert_8cpp_source.html#l00202">strtol()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d71/memory_8cpp_source.html#l00296">InitializeMemoryManagement()</a>, and <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l02814">rpmalloc_initialize()</a>.</p>

</div>
</div>
<a id="a651de9989dde0bba2f3eac7d4c09f97a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a651de9989dde0bba2f3eac7d4c09f97a">&#9670;&nbsp;</a></span>rpmalloc_is_thread_initialized()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a2d18f870b8bad81e931c8c0a01e3672b">RPMALLOC_EXPORT</a> int rpmalloc_is_thread_initialized </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Query if allocator is initialized for calling thread. </p>

<p class="definition">Definition at line <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l03072">3072</a> of file <a class="el" href="../../df/dc0/rpmalloc_8c_source.html">rpmalloc.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;{</div>
<div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="../../df/dc0/rpmalloc_8c.html#af7213260e19fbad385988302247150d4">get_thread_heap_raw</a>() != 0) ? 1 : 0;</div>
<div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;}</div>
<div class="ttc" id="arpmalloc_8c_html_af7213260e19fbad385988302247150d4"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#af7213260e19fbad385988302247150d4">get_thread_heap_raw</a></div><div class="ttdeci">static heap_t * get_thread_heap_raw(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00710">rpmalloc.c:710</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00710">get_thread_heap_raw()</a>.</p>

</div>
</div>
<a id="afe32b20a0a8c471b85225975f22de7b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe32b20a0a8c471b85225975f22de7b0">&#9670;&nbsp;</a></span>rpmalloc_thread_collect()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a2d18f870b8bad81e931c8c0a01e3672b">RPMALLOC_EXPORT</a> void rpmalloc_thread_collect </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Perform deferred deallocations pending for the calling thread heap. </p>

<p class="definition">Definition at line <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l03185">3185</a> of file <a class="el" href="../../df/dc0/rpmalloc_8c_source.html">rpmalloc.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;{</div>
<div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a01edf01df2797283168e0eff740390b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01edf01df2797283168e0eff740390b6">&#9670;&nbsp;</a></span>rpmalloc_thread_finalize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a2d18f870b8bad81e931c8c0a01e3672b">RPMALLOC_EXPORT</a> void rpmalloc_thread_finalize </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>release_caches</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Finalize allocator for calling thread. </p>
<p>Finalize allocator for calling thread. </p>

<p class="definition">Definition at line <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l03061">3061</a> of file <a class="el" href="../../df/dc0/rpmalloc_8c_source.html">rpmalloc.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;{</div>
<div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;    <a class="code" href="../../d1/d7e/rpmalloc__compat_8cpp.html#d9/d8a/structheap__t">heap_t</a> *<a class="code" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a> = <a class="code" href="../../df/dc0/rpmalloc_8c.html#af7213260e19fbad385988302247150d4">get_thread_heap_raw</a>();</div>
<div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a>)</div>
<div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;        <a class="code" href="../../df/dc0/rpmalloc_8c.html#aa378f245dd9ff587c375db42472ac954">_rpmalloc_heap_release_raw</a>(<a class="code" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a>, release_caches);</div>
<div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;    <a class="code" href="../../df/dc0/rpmalloc_8c.html#a4a224c6ef987eb60f3e3be98239109ec">set_thread_heap</a>(0);</div>
<div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;<span class="preprocessor">#if defined(_WIN32) &amp;&amp; (!defined(BUILD_DYNAMIC_LINK) || !BUILD_DYNAMIC_LINK)</span></div>
<div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;    FlsSetValue(fls_key, 0);</div>
<div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;}</div>
<div class="ttc" id="arpmalloc_8c_html_a4a224c6ef987eb60f3e3be98239109ec"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#a4a224c6ef987eb60f3e3be98239109ec">set_thread_heap</a></div><div class="ttdeci">static void set_thread_heap(heap_t *heap)</div><div class="ttdoc">Set the current thread heap.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00738">rpmalloc.c:738</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_aa378f245dd9ff587c375db42472ac954"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#aa378f245dd9ff587c375db42472ac954">_rpmalloc_heap_release_raw</a></div><div class="ttdeci">static void _rpmalloc_heap_release_raw(void *heapptr, int release_cache)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l02057">rpmalloc.c:2057</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l02057">_rpmalloc_heap_release_raw()</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00710">get_thread_heap_raw()</a>, <a class="el" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a>, and <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00738">set_thread_heap()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l02993">rpmalloc_finalize()</a>.</p>

</div>
</div>
<a id="a4166a6bd4ba8707f381910f73a0d858e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4166a6bd4ba8707f381910f73a0d858e">&#9670;&nbsp;</a></span>rpmalloc_thread_initialize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a2d18f870b8bad81e931c8c0a01e3672b">RPMALLOC_EXPORT</a> void rpmalloc_thread_initialize </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialize allocator for calling thread. </p>
<p>Initialize allocator for calling thread. </p>

<p class="definition">Definition at line <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l03044">3044</a> of file <a class="el" href="../../df/dc0/rpmalloc_8c_source.html">rpmalloc.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;{</div>
<div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../df/dc0/rpmalloc_8c.html#af7213260e19fbad385988302247150d4">get_thread_heap_raw</a>())</div>
<div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;    {</div>
<div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;        <a class="code" href="../../d1/d7e/rpmalloc__compat_8cpp.html#d9/d8a/structheap__t">heap_t</a> *<a class="code" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a> = <a class="code" href="../../df/dc0/rpmalloc_8c.html#a4ca7faed398dff40d231cbce5ebcc845">_rpmalloc_heap_allocate</a>(0);</div>
<div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a>)</div>
<div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;        {</div>
<div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;            <a class="code" href="../../df/dc0/rpmalloc_8c.html#ab51bbcd0d9d41ba9c6f4ad547ba77405">_rpmalloc_stat_inc</a>(&amp;_memory_active_heaps);</div>
<div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;            <a class="code" href="../../df/dc0/rpmalloc_8c.html#a4a224c6ef987eb60f3e3be98239109ec">set_thread_heap</a>(<a class="code" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a>);</div>
<div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;<span class="preprocessor">#if defined(_WIN32) &amp;&amp; (!defined(BUILD_DYNAMIC_LINK) || !BUILD_DYNAMIC_LINK)</span></div>
<div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;            FlsSetValue(fls_key, <a class="code" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a>);</div>
<div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;        }</div>
<div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;    }</div>
<div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;}</div>
<div class="ttc" id="arpmalloc_8c_html_a4ca7faed398dff40d231cbce5ebcc845"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#a4ca7faed398dff40d231cbce5ebcc845">_rpmalloc_heap_allocate</a></div><div class="ttdeci">static heap_t * _rpmalloc_heap_allocate(int first_class)</div><div class="ttdoc">Allocate a new heap, potentially reusing a previously orphaned heap.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l01978">rpmalloc.c:1978</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_ab51bbcd0d9d41ba9c6f4ad547ba77405"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#ab51bbcd0d9d41ba9c6f4ad547ba77405">_rpmalloc_stat_inc</a></div><div class="ttdeci">#define _rpmalloc_stat_inc(counter)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00249">rpmalloc.c:249</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l01978">_rpmalloc_heap_allocate()</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00249">_rpmalloc_stat_inc</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00710">get_thread_heap_raw()</a>, <a class="el" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a>, and <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00738">set_thread_heap()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l02814">rpmalloc_initialize()</a>, and <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l02824">rpmalloc_initialize_config()</a>.</p>

</div>
</div>
<a id="a29c086aa3f5d9fbc936fea87cfa62e2e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29c086aa3f5d9fbc936fea87cfa62e2e">&#9670;&nbsp;</a></span>rpmalloc_thread_statistics()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a2d18f870b8bad81e931c8c0a01e3672b">RPMALLOC_EXPORT</a> void rpmalloc_thread_statistics </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d43/rpmalloc_8h.html#d0/d25/structrpmalloc__thread__statistics__t">rpmalloc_thread_statistics_t</a> *&#160;</td>
          <td class="paramname"><em>stats</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get per-thread statistics. </p>

<p class="definition">Definition at line <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l03189">3189</a> of file <a class="el" href="../../df/dc0/rpmalloc_8c_source.html">rpmalloc.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;{</div>
<div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;    <a class="code" href="../../d3/d82/convert_8h.html#a9c1f204516a55affa9ba118907e5ab6b">memset_unsafe</a>(stats, 0, <span class="keyword">sizeof</span>(<a class="code" href="../../d2/d43/rpmalloc_8h.html#d0/d25/structrpmalloc__thread__statistics__t">rpmalloc_thread_statistics_t</a>));</div>
<div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;    <a class="code" href="../../d1/d7e/rpmalloc__compat_8cpp.html#d9/d8a/structheap__t">heap_t</a> *<a class="code" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a> = <a class="code" href="../../df/dc0/rpmalloc_8c.html#af7213260e19fbad385988302247150d4">get_thread_heap_raw</a>();</div>
<div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a>)</div>
<div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160; </div>
<div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> iclass = 0; iclass &lt; <a class="code" href="../../df/dc0/rpmalloc_8c.html#aa74d427b2b9955ff2d9719693d9fc80e">SIZE_CLASS_COUNT</a>; ++iclass)</div>
<div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;    {</div>
<div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;        <a class="code" href="../../df/dc0/rpmalloc_8c.html#d2/daa/structsize__class__t">size_class_t</a> *size_class = <a class="code" href="../../df/dc0/rpmalloc_8c.html#a33cddb08b9ee0f969cc82dbf9cddb947">_memory_size_class</a> + iclass;</div>
<div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;        <a class="code" href="../../df/dc0/rpmalloc_8c.html#d1/d24/structspan__t">span_t</a> *span = <a class="code" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a>-&gt;size_class[iclass].partial_span;</div>
<div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;        <span class="keywordflow">while</span> (span)</div>
<div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;        {</div>
<div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;            <span class="keywordtype">size_t</span> free_count = span-&gt;<a class="code" href="../../df/dc0/rpmalloc_8c.html#ad842dbc76a30fb5beee77a2d773a3e91">list_size</a>;</div>
<div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;            <span class="keywordtype">size_t</span> block_count = size_class-&gt;<a class="code" href="../../df/dc0/rpmalloc_8c.html#aeded978bd21c13b71d9b0310b5bb09ec">block_count</a>;</div>
<div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;            <span class="keywordflow">if</span> (span-&gt;<a class="code" href="../../df/dc0/rpmalloc_8c.html#af093d9cb1719d72c20f96a9b467590f5">free_list_limit</a> &lt; block_count)</div>
<div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;                block_count = span-&gt;<a class="code" href="../../df/dc0/rpmalloc_8c.html#af093d9cb1719d72c20f96a9b467590f5">free_list_limit</a>;</div>
<div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;            free_count += (block_count - span-&gt;<a class="code" href="../../df/dc0/rpmalloc_8c.html#abf4fa6f8f0e7baff0d6a7a96df58bcca">used_count</a>);</div>
<div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;            stats-&gt;<a class="code" href="../../d2/d43/rpmalloc_8h.html#ae1b16b8970cd1354befab4f0e4b993ac">sizecache</a> = free_count * size_class-&gt;<a class="code" href="../../df/dc0/rpmalloc_8c.html#a007fc7dd52ba1f95d9a6ce88f47a614b">block_size</a>;</div>
<div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;            span = span-&gt;<a class="code" href="../../df/dc0/rpmalloc_8c.html#ac62e0e77eb38ebff4443eb5db3ccd45c">next</a>;</div>
<div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;        }</div>
<div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;    }</div>
<div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160; </div>
<div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;<span class="preprocessor">#if ENABLE_THREAD_CACHE</span></div>
<div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> iclass = 0; iclass &lt; <a class="code" href="../../df/dc0/rpmalloc_8c.html#a04406da3f5ff4e24f155c97591678ed9">LARGE_CLASS_COUNT</a>; ++iclass)</div>
<div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;    {</div>
<div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;        <a class="code" href="../../df/dc0/rpmalloc_8c.html#da/d15/structspan__cache__t">span_cache_t</a> *span_cache;</div>
<div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;        <span class="keywordflow">if</span> (!iclass)</div>
<div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;            span_cache = &amp;<a class="code" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a>-&gt;span_cache;</div>
<div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;            span_cache = (<a class="code" href="../../df/dc0/rpmalloc_8c.html#da/d15/structspan__cache__t">span_cache_t</a> *)(<a class="code" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a>-&gt;span_large_cache + (iclass - 1));</div>
<div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;        stats-&gt;<a class="code" href="../../d2/d43/rpmalloc_8h.html#af75f9eeddb63a098824a555506334c8a">spancache</a> = span_cache-&gt;<a class="code" href="../../df/dc0/rpmalloc_8c.html#a894a66f329862f01de7619aee1954d19">count</a> * (iclass + 1) * <a class="code" href="../../df/dc0/rpmalloc_8c.html#a9fefa5277fefa0c58f69d5b86d679ccb">_memory_span_size</a>;</div>
<div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;    }</div>
<div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160; </div>
<div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;    <a class="code" href="../../df/dc0/rpmalloc_8c.html#d1/d24/structspan__t">span_t</a> *deferred = (<a class="code" href="../../df/dc0/rpmalloc_8c.html#d1/d24/structspan__t">span_t</a> *)<a class="code" href="../../df/dc0/rpmalloc_8c.html#a83ddc23debb02a3c47f0b00939fc8f35">atomic_load_ptr</a>(&amp;<a class="code" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a>-&gt;span_free_deferred);</div>
<div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;    <span class="keywordflow">while</span> (deferred)</div>
<div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;    {</div>
<div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;        <span class="keywordflow">if</span> (deferred-&gt;<a class="code" href="../../df/dc0/rpmalloc_8c.html#a5a977febdd2e9ae15bcf66f83d0cf817">size_class</a> != <a class="code" href="../../df/dc0/rpmalloc_8c.html#a284460248778c94b6ee9ea1529299439">SIZE_CLASS_HUGE</a>)</div>
<div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;            stats-&gt;<a class="code" href="../../d2/d43/rpmalloc_8h.html#af75f9eeddb63a098824a555506334c8a">spancache</a> = (<a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>)deferred-&gt;<a class="code" href="../../df/dc0/rpmalloc_8c.html#ae77d9a2cdd2a2fd46e3b27739d6c88cc">span_count</a> * <a class="code" href="../../df/dc0/rpmalloc_8c.html#a9fefa5277fefa0c58f69d5b86d679ccb">_memory_span_size</a>;</div>
<div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160;        deferred = (<a class="code" href="../../df/dc0/rpmalloc_8c.html#d1/d24/structspan__t">span_t</a> *)deferred-&gt;<a class="code" href="../../df/dc0/rpmalloc_8c.html#a85527ad364915bcb39b7d421524d0bd6">free_list</a>;</div>
<div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;    }</div>
<div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160; </div>
<div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;<span class="preprocessor">#if ENABLE_STATISTICS</span></div>
<div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;    stats-&gt;<a class="code" href="../../d2/d43/rpmalloc_8h.html#affc9a9b9fff3b494c0f0dd63884be0e4">thread_to_global</a> = (<a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>)<a class="code" href="../../df/dc0/rpmalloc_8c.html#a083ecd4af0f476009595e8ee78cf2ac0">atomic_load64</a>(&amp;<a class="code" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a>-&gt;thread_to_global);</div>
<div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;    stats-&gt;<a class="code" href="../../d2/d43/rpmalloc_8h.html#a29f83756e4d2a2bdebcfdfc8a8908081">global_to_thread</a> = (<a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>)<a class="code" href="../../df/dc0/rpmalloc_8c.html#a083ecd4af0f476009595e8ee78cf2ac0">atomic_load64</a>(&amp;<a class="code" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a>-&gt;global_to_thread);</div>
<div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160; </div>
<div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> iclass = 0; iclass &lt; <a class="code" href="../../df/dc0/rpmalloc_8c.html#a04406da3f5ff4e24f155c97591678ed9">LARGE_CLASS_COUNT</a>; ++iclass)</div>
<div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;    {</div>
<div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;        stats-&gt;<a class="code" href="../../d2/d43/rpmalloc_8h.html#a5d0cd8aecab18855e794487437dc593a">span_use</a>[iclass].current = (<a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>)atomic_load32(&amp;<a class="code" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a>-&gt;span_use[iclass].current);</div>
<div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160;        stats-&gt;<a class="code" href="../../d2/d43/rpmalloc_8h.html#a5d0cd8aecab18855e794487437dc593a">span_use</a>[iclass].peak = (<a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>)atomic_load32(&amp;<a class="code" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a>-&gt;span_use[iclass].high);</div>
<div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;        stats-&gt;<a class="code" href="../../d2/d43/rpmalloc_8h.html#a5d0cd8aecab18855e794487437dc593a">span_use</a>[iclass].to_global = (<a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>)atomic_load32(&amp;<a class="code" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a>-&gt;span_use[iclass].spans_to_global);</div>
<div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;        stats-&gt;<a class="code" href="../../d2/d43/rpmalloc_8h.html#a5d0cd8aecab18855e794487437dc593a">span_use</a>[iclass].from_global = (<a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>)atomic_load32(&amp;<a class="code" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a>-&gt;span_use[iclass].spans_from_global);</div>
<div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;        stats-&gt;<a class="code" href="../../d2/d43/rpmalloc_8h.html#a5d0cd8aecab18855e794487437dc593a">span_use</a>[iclass].to_cache = (<a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>)atomic_load32(&amp;<a class="code" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a>-&gt;span_use[iclass].spans_to_cache);</div>
<div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;        stats-&gt;<a class="code" href="../../d2/d43/rpmalloc_8h.html#a5d0cd8aecab18855e794487437dc593a">span_use</a>[iclass].from_cache = (<a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>)atomic_load32(&amp;<a class="code" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a>-&gt;span_use[iclass].spans_from_cache);</div>
<div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;        stats-&gt;<a class="code" href="../../d2/d43/rpmalloc_8h.html#a5d0cd8aecab18855e794487437dc593a">span_use</a>[iclass].to_reserved = (<a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>)atomic_load32(&amp;<a class="code" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a>-&gt;span_use[iclass].spans_to_reserved);</div>
<div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;        stats-&gt;<a class="code" href="../../d2/d43/rpmalloc_8h.html#a5d0cd8aecab18855e794487437dc593a">span_use</a>[iclass].from_reserved = (<a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>)atomic_load32(&amp;<a class="code" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a>-&gt;span_use[iclass].spans_from_reserved);</div>
<div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160;        stats-&gt;<a class="code" href="../../d2/d43/rpmalloc_8h.html#a5d0cd8aecab18855e794487437dc593a">span_use</a>[iclass].map_calls = (<a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>)atomic_load32(&amp;<a class="code" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a>-&gt;span_use[iclass].spans_map_calls);</div>
<div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;    }</div>
<div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> iclass = 0; iclass &lt; <a class="code" href="../../df/dc0/rpmalloc_8c.html#aa74d427b2b9955ff2d9719693d9fc80e">SIZE_CLASS_COUNT</a>; ++iclass)</div>
<div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;    {</div>
<div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;        stats-&gt;<a class="code" href="../../d2/d43/rpmalloc_8h.html#ac5a79462677dd135cae918db93f5dfe1">size_use</a>[iclass].alloc_current = (<a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>)atomic_load32(&amp;<a class="code" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a>-&gt;size_class_use[iclass].alloc_current);</div>
<div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;        stats-&gt;<a class="code" href="../../d2/d43/rpmalloc_8h.html#ac5a79462677dd135cae918db93f5dfe1">size_use</a>[iclass].alloc_peak = (<a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>)<a class="code" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a>-&gt;size_class_use[iclass].alloc_peak;</div>
<div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;        stats-&gt;<a class="code" href="../../d2/d43/rpmalloc_8h.html#ac5a79462677dd135cae918db93f5dfe1">size_use</a>[iclass].alloc_total = (<span class="keywordtype">size_t</span>)atomic_load32(&amp;<a class="code" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a>-&gt;size_class_use[iclass].alloc_total);</div>
<div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;        stats-&gt;<a class="code" href="../../d2/d43/rpmalloc_8h.html#ac5a79462677dd135cae918db93f5dfe1">size_use</a>[iclass].free_total = (<a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>)atomic_load32(&amp;<a class="code" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a>-&gt;size_class_use[iclass].free_total);</div>
<div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160;        stats-&gt;<a class="code" href="../../d2/d43/rpmalloc_8h.html#ac5a79462677dd135cae918db93f5dfe1">size_use</a>[iclass].spans_to_cache = (<a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>)atomic_load32(&amp;<a class="code" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a>-&gt;size_class_use[iclass].spans_to_cache);</div>
<div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;        stats-&gt;<a class="code" href="../../d2/d43/rpmalloc_8h.html#ac5a79462677dd135cae918db93f5dfe1">size_use</a>[iclass].spans_from_cache = (<a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>)atomic_load32(&amp;<a class="code" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a>-&gt;size_class_use[iclass].spans_from_cache);</div>
<div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;        stats-&gt;<a class="code" href="../../d2/d43/rpmalloc_8h.html#ac5a79462677dd135cae918db93f5dfe1">size_use</a>[iclass].spans_from_reserved = (<a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>)atomic_load32(&amp;<a class="code" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a>-&gt;size_class_use[iclass].spans_from_reserved);</div>
<div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160;        stats-&gt;<a class="code" href="../../d2/d43/rpmalloc_8h.html#ac5a79462677dd135cae918db93f5dfe1">size_use</a>[iclass].map_calls = (<a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>)atomic_load32(&amp;<a class="code" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a>-&gt;size_class_use[iclass].spans_map_calls);</div>
<div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;    }</div>
<div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;}</div>
<div class="ttc" id="arpmalloc_8c_html_a284460248778c94b6ee9ea1529299439"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#a284460248778c94b6ee9ea1529299439">SIZE_CLASS_HUGE</a></div><div class="ttdeci">#define SIZE_CLASS_HUGE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00335">rpmalloc.c:335</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_a5a977febdd2e9ae15bcf66f83d0cf817"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#a5a977febdd2e9ae15bcf66f83d0cf817">span_t::size_class</a></div><div class="ttdeci">uint32_t size_class</div><div class="ttdoc">Size class.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00437">rpmalloc.c:437</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_a83ddc23debb02a3c47f0b00939fc8f35"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#a83ddc23debb02a3c47f0b00939fc8f35">atomic_load_ptr</a></div><div class="ttdeci">static FORCEINLINE void * atomic_load_ptr(atomicptr_t *src)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00187">rpmalloc.c:187</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_a85527ad364915bcb39b7d421524d0bd6"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#a85527ad364915bcb39b7d421524d0bd6">span_t::free_list</a></div><div class="ttdeci">void * free_list</div><div class="ttdoc">Free list.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00433">rpmalloc.c:433</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_a894a66f329862f01de7619aee1954d19"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#a894a66f329862f01de7619aee1954d19">span_cache_t::count</a></div><div class="ttdeci">size_t count</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00471">rpmalloc.c:471</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_abf4fa6f8f0e7baff0d6a7a96df58bcca"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#abf4fa6f8f0e7baff0d6a7a96df58bcca">span_t::used_count</a></div><div class="ttdeci">uint32_t used_count</div><div class="ttdoc">Number of used blocks remaining when in partial state.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00441">rpmalloc.c:441</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_ac62e0e77eb38ebff4443eb5db3ccd45c"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#ac62e0e77eb38ebff4443eb5db3ccd45c">span_t::next</a></div><div class="ttdeci">span_t * next</div><div class="ttdoc">Next span.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00463">rpmalloc.c:463</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_ad842dbc76a30fb5beee77a2d773a3e91"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#ad842dbc76a30fb5beee77a2d773a3e91">span_t::list_size</a></div><div class="ttdeci">uint32_t list_size</div><div class="ttdoc">Size of deferred free list, or list of spans when part of a cache list.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00445">rpmalloc.c:445</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_ae77d9a2cdd2a2fd46e3b27739d6c88cc"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#ae77d9a2cdd2a2fd46e3b27739d6c88cc">span_t::span_count</a></div><div class="ttdeci">uint32_t span_count</div><div class="ttdoc">Number of spans.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00451">rpmalloc.c:451</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_aeded978bd21c13b71d9b0310b5bb09ec"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#aeded978bd21c13b71d9b0310b5bb09ec">size_class_t::block_count</a></div><div class="ttdeci">uint16_t block_count</div><div class="ttdoc">Number of blocks in each chunk.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00562">rpmalloc.c:562</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_af093d9cb1719d72c20f96a9b467590f5"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#af093d9cb1719d72c20f96a9b467590f5">span_t::free_list_limit</a></div><div class="ttdeci">uint32_t free_list_limit</div><div class="ttdoc">Index of last block initialized in free list.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00439">rpmalloc.c:439</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_d2/daa/structsize__class__t"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#d2/daa/structsize__class__t">size_class_t</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00557">rpmalloc.c:558</a></div></div>
<div class="ttc" id="arpmalloc_8c_html_da/d15/structspan__cache__t"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#da/d15/structspan__cache__t">span_cache_t</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l00469">rpmalloc.c:470</a></div></div>
<div class="ttc" id="arpmalloc_8h_html_a29f83756e4d2a2bdebcfdfc8a8908081"><div class="ttname"><a href="../../d2/d43/rpmalloc_8h.html#a29f83756e4d2a2bdebcfdfc8a8908081">rpmalloc_thread_statistics_t::global_to_thread</a></div><div class="ttdeci">size_t global_to_thread</div><div class="ttdoc">Total number of bytes transitioned from global cache to thread cache (only if ENABLE_STATISTICS=1)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d43/rpmalloc_8h_source.html#l00096">rpmalloc.h:96</a></div></div>
<div class="ttc" id="arpmalloc_8h_html_a5d0cd8aecab18855e794487437dc593a"><div class="ttname"><a href="../../d2/d43/rpmalloc_8h.html#a5d0cd8aecab18855e794487437dc593a">rpmalloc_thread_statistics_t::span_use</a></div><div class="ttdeci">struct rpmalloc_thread_statistics_t::@33 span_use[64]</div><div class="ttdoc">Per span count statistics (only if ENABLE_STATISTICS=1)</div></div>
<div class="ttc" id="arpmalloc_8h_html_ac5a79462677dd135cae918db93f5dfe1"><div class="ttname"><a href="../../d2/d43/rpmalloc_8h.html#ac5a79462677dd135cae918db93f5dfe1">rpmalloc_thread_statistics_t::size_use</a></div><div class="ttdeci">struct rpmalloc_thread_statistics_t::@34 size_use[128]</div><div class="ttdoc">Per size class statistics (only if ENABLE_STATISTICS=1)</div></div>
<div class="ttc" id="arpmalloc_8h_html_ae1b16b8970cd1354befab4f0e4b993ac"><div class="ttname"><a href="../../d2/d43/rpmalloc_8h.html#ae1b16b8970cd1354befab4f0e4b993ac">rpmalloc_thread_statistics_t::sizecache</a></div><div class="ttdeci">size_t sizecache</div><div class="ttdoc">Current number of bytes available in thread size class caches for small and medium sizes (&lt;32KiB)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d43/rpmalloc_8h_source.html#l00090">rpmalloc.h:90</a></div></div>
<div class="ttc" id="arpmalloc_8h_html_af75f9eeddb63a098824a555506334c8a"><div class="ttname"><a href="../../d2/d43/rpmalloc_8h.html#af75f9eeddb63a098824a555506334c8a">rpmalloc_thread_statistics_t::spancache</a></div><div class="ttdeci">size_t spancache</div><div class="ttdoc">Current number of bytes available in thread span caches for small and medium sizes (&lt;32KiB)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d43/rpmalloc_8h_source.html#l00092">rpmalloc.h:92</a></div></div>
<div class="ttc" id="arpmalloc_8h_html_affc9a9b9fff3b494c0f0dd63884be0e4"><div class="ttname"><a href="../../d2/d43/rpmalloc_8h.html#affc9a9b9fff3b494c0f0dd63884be0e4">rpmalloc_thread_statistics_t::thread_to_global</a></div><div class="ttdeci">size_t thread_to_global</div><div class="ttdoc">Total number of bytes transitioned from thread cache to global cache (only if ENABLE_STATISTICS=1)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d43/rpmalloc_8h_source.html#l00094">rpmalloc.h:94</a></div></div>
<div class="ttc" id="arpmalloc_8h_html_d0/d25/structrpmalloc__thread__statistics__t"><div class="ttname"><a href="../../d2/d43/rpmalloc_8h.html#d0/d25/structrpmalloc__thread__statistics__t">rpmalloc_thread_statistics_t</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d43/rpmalloc_8h_source.html#l00087">rpmalloc.h:88</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00627">_memory_size_class</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00611">_memory_span_size</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00185">atomic_load64()</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00187">atomic_load_ptr()</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00562">size_class_t::block_count</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00560">size_class_t::block_size</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00471">span_cache_t::count</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00433">span_t::free_list</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00439">span_t::free_list_limit</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00710">get_thread_heap_raw()</a>, <a class="el" href="../../d2/d43/rpmalloc_8h_source.html#l00096">rpmalloc_thread_statistics_t::global_to_thread</a>, <a class="el" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00304">LARGE_CLASS_COUNT</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00445">span_t::list_size</a>, <a class="el" href="../../d3/df3/Kernel_2library_2memop_8c_source.html#l00214">memset_unsafe()</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00463">span_t::next</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00437">span_t::size_class</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00302">SIZE_CLASS_COUNT</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00335">SIZE_CLASS_HUGE</a>, <a class="el" href="../../d2/d43/rpmalloc_8h.html#ac5a79462677dd135cae918db93f5dfe1">rpmalloc_thread_statistics_t::size_use</a>, <a class="el" href="../../d2/d43/rpmalloc_8h_source.html#l00090">rpmalloc_thread_statistics_t::sizecache</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00451">span_t::span_count</a>, <a class="el" href="../../d2/d43/rpmalloc_8h.html#a5d0cd8aecab18855e794487437dc593a">rpmalloc_thread_statistics_t::span_use</a>, <a class="el" href="../../d2/d43/rpmalloc_8h_source.html#l00092">rpmalloc_thread_statistics_t::spancache</a>, <a class="el" href="../../d2/d43/rpmalloc_8h_source.html#l00094">rpmalloc_thread_statistics_t::thread_to_global</a>, and <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00441">span_t::used_count</a>.</p>

</div>
</div>
<a id="a52b4c800cec1406d162b8a7787587a46"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52b4c800cec1406d162b8a7787587a46">&#9670;&nbsp;</a></span>rpmalloc_usable_size()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a2d18f870b8bad81e931c8c0a01e3672b">RPMALLOC_EXPORT</a> <a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a> rpmalloc_usable_size </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Query the usable size of the given memory block (from given pointer to the end of block) </p>

<p class="definition">Definition at line <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l03179">3179</a> of file <a class="el" href="../../df/dc0/rpmalloc_8c_source.html">rpmalloc.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;{</div>
<div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;    <span class="keywordflow">return</span> (ptr ? <a class="code" href="../../df/dc0/rpmalloc_8c.html#adc5743a6b15192da5b7e023f85360208">_rpmalloc_usable_size</a>(ptr) : 0);</div>
<div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;}</div>
<div class="ttc" id="arpmalloc_8c_html_adc5743a6b15192da5b7e023f85360208"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#adc5743a6b15192da5b7e023f85360208">_rpmalloc_usable_size</a></div><div class="ttdeci">static size_t _rpmalloc_usable_size(void *p)</div><div class="ttdoc">Get the usable size of the given block.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l02765">rpmalloc.c:2765</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l02765">_rpmalloc_usable_size()</a>.</p>

</div>
</div>
<a id="aecd8ddbe73d43b6863725c693a7e9818"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aecd8ddbe73d43b6863725c693a7e9818">&#9670;&nbsp;</a></span>rpmemalign()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a2d18f870b8bad81e931c8c0a01e3672b">RPMALLOC_EXPORT</a> <a class="el" href="../../d2/d43/rpmalloc_8h.html#a85561f3ac6a729bf480cdf706d6c75dc">RPMALLOC_ALLOCATOR</a> void <a class="el" href="../../d2/d43/rpmalloc_8h.html#a2d18f870b8bad81e931c8c0a01e3672b">RPMALLOC_EXPORT</a> <a class="el" href="../../d2/d43/rpmalloc_8h.html#a85561f3ac6a729bf480cdf706d6c75dc">RPMALLOC_ALLOCATOR</a> void* rpmemalign </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>&#160;</td>
          <td class="paramname"><em>alignment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Allocate a memory block of at least the given size and alignment. </p>

<p class="definition">Definition at line <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l03163">3163</a> of file <a class="el" href="../../df/dc0/rpmalloc_8c_source.html">rpmalloc.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;{</div>
<div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../df/dc0/rpmalloc_8c.html#af696dfc58704b5b75dc6b0a02c6fed66">rpaligned_alloc</a>(alignment, <a class="code" href="../../d1/dc0/multiboot_8h.html#a6d813a0f2b5281b18dea3f4cda696c33">size</a>);</div>
<div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;}</div>
<div class="ttc" id="arpmalloc_8c_html_af696dfc58704b5b75dc6b0a02c6fed66"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#af696dfc58704b5b75dc6b0a02c6fed66">rpaligned_alloc</a></div><div class="ttdeci">RPMALLOC_ALLOCATOR void * rpaligned_alloc(size_t alignment, size_t size)</div><div class="ttdoc">Allocate a memory block of at least the given size and alignment.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l03140">rpmalloc.c:3140</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l03140">rpaligned_alloc()</a>, and <a class="el" href="../../d1/dc0/multiboot_8h_source.html#l00000">size</a>.</p>

</div>
</div>
<a id="a3f43fd4642bf70f3c43ed24694611bc3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f43fd4642bf70f3c43ed24694611bc3">&#9670;&nbsp;</a></span>rpposix_memalign()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a2d18f870b8bad81e931c8c0a01e3672b">RPMALLOC_EXPORT</a> int rpposix_memalign </td>
          <td>(</td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>memptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>&#160;</td>
          <td class="paramname"><em>alignment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Allocate a memory block of at least the given size and alignment. </p>

<p class="definition">Definition at line <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l03169">3169</a> of file <a class="el" href="../../df/dc0/rpmalloc_8c_source.html">rpmalloc.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;{</div>
<div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;    <span class="keywordflow">if</span> (memptr)</div>
<div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;        *memptr = <a class="code" href="../../df/dc0/rpmalloc_8c.html#af696dfc58704b5b75dc6b0a02c6fed66">rpaligned_alloc</a>(alignment, <a class="code" href="../../d1/dc0/multiboot_8h.html#a6d813a0f2b5281b18dea3f4cda696c33">size</a>);</div>
<div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../db/d0b/Kernel_2include__std_2errno_8h.html#a2d1678d5a7cc8ce499643f3b8957def4">EINVAL</a>;</div>
<div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;    <span class="keywordflow">return</span> *memptr ? 0 : <a class="code" href="../../db/d0b/Kernel_2include__std_2errno_8h.html#a6a05c923dad0c1208043e9c20a58c8e5">ENOMEM</a>;</div>
<div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;}</div>
<div class="ttc" id="aKernel_2include__std_2errno_8h_html_a2d1678d5a7cc8ce499643f3b8957def4"><div class="ttname"><a href="../../db/d0b/Kernel_2include__std_2errno_8h.html#a2d1678d5a7cc8ce499643f3b8957def4">EINVAL</a></div><div class="ttdeci">#define EINVAL</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0b/Kernel_2include__std_2errno_8h_source.html#l00085">errno.h:85</a></div></div>
<div class="ttc" id="aKernel_2include__std_2errno_8h_html_a6a05c923dad0c1208043e9c20a58c8e5"><div class="ttname"><a href="../../db/d0b/Kernel_2include__std_2errno_8h.html#a6a05c923dad0c1208043e9c20a58c8e5">ENOMEM</a></div><div class="ttdeci">#define ENOMEM</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0b/Kernel_2include__std_2errno_8h_source.html#l00055">errno.h:55</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../db/d0b/Kernel_2include__std_2errno_8h_source.html#l00085">EINVAL</a>, <a class="el" href="../../db/d0b/Kernel_2include__std_2errno_8h_source.html#l00055">ENOMEM</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l03140">rpaligned_alloc()</a>, and <a class="el" href="../../d1/dc0/multiboot_8h_source.html#l00000">size</a>.</p>

</div>
</div>
<a id="ac52f702e04b8a41a925794512404375e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac52f702e04b8a41a925794512404375e">&#9670;&nbsp;</a></span>rprealloc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/d43/rpmalloc_8h.html#a2d18f870b8bad81e931c8c0a01e3672b">RPMALLOC_EXPORT</a> <a class="el" href="../../d2/d43/rpmalloc_8h.html#a85561f3ac6a729bf480cdf706d6c75dc">RPMALLOC_ALLOCATOR</a> void <a class="el" href="../../d2/d43/rpmalloc_8h.html#a2d18f870b8bad81e931c8c0a01e3672b">RPMALLOC_EXPORT</a> <a class="el" href="../../d2/d43/rpmalloc_8h.html#a85561f3ac6a729bf480cdf706d6c75dc">RPMALLOC_ALLOCATOR</a> void* rprealloc </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reallocate the given block to at least the given size. </p>

<p class="definition">Definition at line <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l03119">3119</a> of file <a class="el" href="../../df/dc0/rpmalloc_8c_source.html">rpmalloc.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;{</div>
<div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;<span class="preprocessor">#if ENABLE_VALIDATE_ARGS</span></div>
<div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;    <a class="code" href="../../dc/d6b/Kernel_2include__std_2assert_8h.html#af576bf8ffa22a44e53018c67095ffbf0">assert</a>(<a class="code" href="../../d1/dc0/multiboot_8h.html#a6d813a0f2b5281b18dea3f4cda696c33">size</a> &lt; <a class="code" href="../../df/dc0/rpmalloc_8c.html#a6ea14607e2b19ee5aa336addd0fdde01">MAX_ALLOC_SIZE</a>);</div>
<div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;    <a class="code" href="../../d1/d7e/rpmalloc__compat_8cpp.html#d9/d8a/structheap__t">heap_t</a> *<a class="code" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a> = <a class="code" href="../../df/dc0/rpmalloc_8c.html#ae75d84f0a9ac27b96d18fcd652249cda">get_thread_heap</a>();</div>
<div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../df/dc0/rpmalloc_8c.html#a5c46183a2d82b761e9438c65b0dbad62">_rpmalloc_reallocate</a>(<a class="code" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a>, ptr, <a class="code" href="../../d1/dc0/multiboot_8h.html#a6d813a0f2b5281b18dea3f4cda696c33">size</a>, 0, 0);</div>
<div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;}</div>
<div class="ttc" id="arpmalloc_8c_html_a5c46183a2d82b761e9438c65b0dbad62"><div class="ttname"><a href="../../df/dc0/rpmalloc_8c.html#a5c46183a2d82b761e9438c65b0dbad62">_rpmalloc_reallocate</a></div><div class="ttdeci">static void * _rpmalloc_reallocate(heap_t *heap, void *p, size_t size, size_t oldsize, unsigned int flags)</div><div class="ttdoc">Reallocate the given block to the given size.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dc0/rpmalloc_8c_source.html#l02641">rpmalloc.c:2641</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l02641">_rpmalloc_reallocate()</a>, <a class="el" href="../../dc/d6b/Kernel_2include__std_2assert_8h_source.html#l00023">assert</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00717">get_thread_heap()</a>, <a class="el" href="../../da/d71/huffman_8c.html#a256be6651fb2d98e76c466f9db72c614">heap</a>, <a class="el" href="../../df/dc0/rpmalloc_8c_source.html#l00326">MAX_ALLOC_SIZE</a>, and <a class="el" href="../../d1/dc0/multiboot_8h_source.html#l00000">size</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d71/memory_8cpp_source.html#l00518">realloc()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_52bed8acfaac088d5968cb2c84d7645d.html">Kernel</a></li><li class="navelem"><a class="el" href="../../dir_4b43f92f3b36afcf854dcf934e6beeae.html">core</a></li><li class="navelem"><a class="el" href="../../dir_0324a785b1c9bd6cbd91488045f3d0b5.html">memory</a></li><li class="navelem"><a class="el" href="../../dir_c5ea9415aa1db88b86345b822e37d7c6.html">heap_allocators</a></li><li class="navelem"><a class="el" href="../../dir_4170784ae1708a215052b93ed4398a20.html">rpmalloc</a></li><li class="navelem"><a class="el" href="../../d2/d43/rpmalloc_8h.html">rpmalloc.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
