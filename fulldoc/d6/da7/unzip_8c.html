<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Fennix: Userspace/apps/base/busybox/archival/unzip.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="../../custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Fennix
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
   <div id="projectbrief">Opeating System from scratch made in C and C++</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d6/da7/unzip_8c.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">unzip.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="../../d7/dd7/libbb_8h_source.html">libbb.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d1/d94/bb__archive_8h_source.html">bb_archive.h</a>&quot;</code><br />
</div>
<p><a href="../../d6/da7/unzip_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:de/de3/unionzip__header__t"><td class="memItemLeft" align="right" valign="top">union &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da7/unzip_8c.html#de/de3/unionzip__header__t">zip_header_t</a></td></tr>
<tr class="separator:de/de3/unionzip__header__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:dc/d5c/unioncdf__header__t"><td class="memItemLeft" align="right" valign="top">union &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da7/unzip_8c.html#dc/d5c/unioncdf__header__t">cdf_header_t</a></td></tr>
<tr class="separator:dc/d5c/unioncdf__header__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:db/d03/unioncde__t"><td class="memItemLeft" align="right" valign="top">union &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da7/unzip_8c.html#db/d03/unioncde__t">cde_t</a></td></tr>
<tr class="separator:db/d03/unioncde__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:d2/d25/structBUG"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da7/unzip_8c.html#d2/d25/structBUG">BUG</a></td></tr>
<tr class="separator:d2/d25/structBUG"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:dd/d70/structzip__header__t_8PACKED"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da7/unzip_8c.html#dd/d70/structzip__header__t_8PACKED">zip_header_t.PACKED</a></td></tr>
<tr class="separator:dd/d70/structzip__header__t_8PACKED"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:d5/d34/structcdf__header__t_8PACKED"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da7/unzip_8c.html#d5/d34/structcdf__header__t_8PACKED">cdf_header_t.PACKED</a></td></tr>
<tr class="separator:d5/d34/structcdf__header__t_8PACKED"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:de/d7b/structcde__t_8PACKED"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da7/unzip_8c.html#de/d7b/structcde__t_8PACKED">cde_t.PACKED</a></td></tr>
<tr class="separator:de/d7b/structcde__t_8PACKED"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:aadf47595f4fdb31176441bb4415eecac"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da7/unzip_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(...)&#160;&#160;&#160;((void)0)</td></tr>
<tr class="separator:aadf47595f4fdb31176441bb4415eecac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abcfbf62120411c95b230af50a8f69400"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da7/unzip_8c.html#abcfbf62120411c95b230af50a8f69400">ZIP_HEADER_LEN</a>&#160;&#160;&#160;26</td></tr>
<tr class="separator:abcfbf62120411c95b230af50a8f69400"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac29f2b46f9cd80e3eca73751d0f74cff"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da7/unzip_8c.html#ac29f2b46f9cd80e3eca73751d0f74cff">FIX_ENDIANNESS_ZIP</a>(<a class="el" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>)</td></tr>
<tr class="separator:ac29f2b46f9cd80e3eca73751d0f74cff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf6369957ec23085f37246183f8f58c6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da7/unzip_8c.html#acf6369957ec23085f37246183f8f58c6">CDF_HEADER_LEN</a>&#160;&#160;&#160;42</td></tr>
<tr class="separator:acf6369957ec23085f37246183f8f58c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab60ed489bda9cbdae50dd8ebea6b9161"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da7/unzip_8c.html#ab60ed489bda9cbdae50dd8ebea6b9161">FIX_ENDIANNESS_CDF</a>(cdf)</td></tr>
<tr class="separator:ab60ed489bda9cbdae50dd8ebea6b9161"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5143219e8f343d69042da6900432c5c9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da7/unzip_8c.html#a5143219e8f343d69042da6900432c5c9">CDE_LEN</a>&#160;&#160;&#160;16</td></tr>
<tr class="separator:a5143219e8f343d69042da6900432c5c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2dbfffceffb80eb937cc4773a74c9e9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da7/unzip_8c.html#ab2dbfffceffb80eb937cc4773a74c9e9">FIX_ENDIANNESS_CDE</a>(cde)</td></tr>
<tr class="separator:ab2dbfffceffb80eb937cc4773a74c9e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3191226e15f98abba647c064e58cfeba"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da7/unzip_8c.html#a3191226e15f98abba647c064e58cfeba">BAD_CDF_OFFSET</a>&#160;&#160;&#160;((<a class="el" href="../../dd/ddd/arithmetic__operations_8c.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>)0xffffffff)</td></tr>
<tr class="separator:a3191226e15f98abba647c064e58cfeba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17bed8eb757cdeef77953e2d67656622"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da7/unzip_8c.html#a17bed8eb757cdeef77953e2d67656622">find_cdf_offset</a>()&#160;&#160;&#160;<a class="el" href="../../d6/da7/unzip_8c.html#a3191226e15f98abba647c064e58cfeba">BAD_CDF_OFFSET</a></td></tr>
<tr class="separator:a17bed8eb757cdeef77953e2d67656622"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a5bbe8448fe1109247a34da39af35c5fe"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <br />
&#160;&#160;<a class="el" href="../../d6/da7/unzip_8c.html#a5bbe8448fe1109247a34da39af35c5fea6938ecb1b43b5af26f578a062ba4e3e4">ZIP_FILEHEADER_MAGIC</a> = 0x04034b50
, <a class="el" href="../../d6/da7/unzip_8c.html#a5bbe8448fe1109247a34da39af35c5feab4248e71f9a00c5383d314a30d58a735">ZIP_CDF_MAGIC</a> = 0x02014b50
, <a class="el" href="../../d6/da7/unzip_8c.html#a5bbe8448fe1109247a34da39af35c5fea38ab42ecda2227362233170d6a1ff64b">ZIP_CDE_MAGIC</a> = 0x06054b50
, <a class="el" href="../../d6/da7/unzip_8c.html#a5bbe8448fe1109247a34da39af35c5feaaf6ac782999fd8872e87127e55957fea">ZIP64_CDE_MAGIC</a> = 0x06064b50
, <br />
&#160;&#160;<a class="el" href="../../d6/da7/unzip_8c.html#a5bbe8448fe1109247a34da39af35c5fea5e01fbd5aed2d55dcf0603f80d8bbf4b">ZIP_DD_MAGIC</a> = 0x08074b50
<br />
 }</td></tr>
<tr class="separator:a5bbe8448fe1109247a34da39af35c5fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c4e2be2550d52c8ccdfca737ac675d2"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="../../d6/da7/unzip_8c.html#a2c4e2be2550d52c8ccdfca737ac675d2ac5d1c375f88d748cd917127ae9f0ed0a">zip_fd</a> = 3
 }</td></tr>
<tr class="separator:a2c4e2be2550d52c8ccdfca737ac675d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a11c04263f55bfdbc7ab2a6d5a665a223"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da7/unzip_8c.html#a11c04263f55bfdbc7ab2a6d5a665a223">die_if_bad_fnamesize</a> (unsigned sz)</td></tr>
<tr class="separator:a11c04263f55bfdbc7ab2a6d5a665a223"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6af16d7efc8712ea1e9009e9c4939ce9"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da7/unzip_8c.html#a6af16d7efc8712ea1e9009e9c4939ce9">unzip_skip</a> (<a class="el" href="../../d4/dba/Drivers_2include_2types_8h.html#a37aff01e955441499997a359a4153b3d">off_t</a> <a class="el" href="../../d1/dac/od__bloaty_8c.html#a6a7bbf9f9349e35f142046203e3d2b6b">skip</a>)</td></tr>
<tr class="separator:a6af16d7efc8712ea1e9009e9c4939ce9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff8e343da65f840a4bf77846567426be"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da7/unzip_8c.html#aff8e343da65f840a4bf77846567426be">unzip_create_leading_dirs</a> (const char *fn)</td></tr>
<tr class="separator:aff8e343da65f840a4bf77846567426be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abad37ee2fe013e5534599f1c897d9821"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da7/unzip_8c.html#abad37ee2fe013e5534599f1c897d9821">unzip_extract</a> (<a class="el" href="../../d6/da7/unzip_8c.html#de/de3/unionzip__header__t">zip_header_t</a> *<a class="el" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>, int dst_fd)</td></tr>
<tr class="separator:abad37ee2fe013e5534599f1c897d9821"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a107380b3c0b625c0d01447586a797628"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da7/unzip_8c.html#a107380b3c0b625c0d01447586a797628">my_fgets80</a> (char *buf80)</td></tr>
<tr class="separator:a107380b3c0b625c0d01447586a797628"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aafcf719d11c3d3b4e077e4955af3ba30"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da7/unzip_8c.html#aafcf719d11c3d3b4e077e4955af3ba30">get_lstat_mode</a> (const char *dst_fn)</td></tr>
<tr class="separator:aafcf719d11c3d3b4e077e4955af3ba30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08bce2ac37d0e77346a9a30de27d96e6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/da7/unzip_8c.html#a08bce2ac37d0e77346a9a30de27d96e6">unzip_main</a> (int <a class="el" href="../../d9/dd0/bash_2test_8c.html#ad1447518f4372828b8435ae82e48499e">argc</a>, char **<a class="el" href="../../d9/dd0/bash_2test_8c.html#af2efa898e9eed6fe6715279cb1ec35b0">argv</a>) <a class="el" href="../../d7/dd7/libbb_8h.html#a50bff3dbf83ecbd070954b228becba4e">MAIN_EXTERNALLY_VISIBLE</a></td></tr>
<tr class="separator:a08bce2ac37d0e77346a9a30de27d96e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<hr/><h2 class="groupheader">Data Structure Documentation</h2>
<a name="de/de3/unionzip__header__t" id="de/de3/unionzip__header__t"></a>
<h2 class="memtitle"><span class="permalink"><a href="#de/de3/unionzip__header__t">&#9670;&nbsp;</a></span>zip_header_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">union zip_header_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="../../d6/da7/unzip_8c_source.html#l00100">100</a> of file <a class="el" href="../../d6/da7/unzip_8c_source.html">unzip.c</a>.</p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="aed1540d81b9de4a3a36b25f64be6df4a"></a>struct <a class="el" href="../../d6/da7/unzip_8c.html#dd/d70/structzip__header__t_8PACKED">zip_header_t</a></td>
<td class="fieldname">
PACKED</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a51340a0dcef63d088c6e5512f2f240b8"></a><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#a3cb4a16b0e8d6af0af86d4fd6ba5fd9d">uint8_t</a></td>
<td class="fieldname">
raw[<a class="el" href="../../d6/da7/unzip_8c.html#abcfbf62120411c95b230af50a8f69400">ZIP_HEADER_LEN</a>]</td>
<td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<a name="dc/d5c/unioncdf__header__t" id="dc/d5c/unioncdf__header__t"></a>
<h2 class="memtitle"><span class="permalink"><a href="#dc/d5c/unioncdf__header__t">&#9670;&nbsp;</a></span>cdf_header_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">union cdf_header_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="../../d6/da7/unzip_8c_source.html#l00133">133</a> of file <a class="el" href="../../d6/da7/unzip_8c_source.html">unzip.c</a>.</p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="aa56934f64625655ae88a18690b0bf766"></a>struct <a class="el" href="../../d6/da7/unzip_8c.html#d5/d34/structcdf__header__t_8PACKED">cdf_header_t</a></td>
<td class="fieldname">
PACKED</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a1b498e534f594cd83ad3e4ef55d58b69"></a><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#a3cb4a16b0e8d6af0af86d4fd6ba5fd9d">uint8_t</a></td>
<td class="fieldname">
raw[<a class="el" href="../../d6/da7/unzip_8c.html#acf6369957ec23085f37246183f8f58c6">CDF_HEADER_LEN</a>]</td>
<td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<a name="db/d03/unioncde__t" id="db/d03/unioncde__t"></a>
<h2 class="memtitle"><span class="permalink"><a href="#db/d03/unioncde__t">&#9670;&nbsp;</a></span>cde_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">union cde_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="../../d6/da7/unzip_8c_source.html#l00177">177</a> of file <a class="el" href="../../d6/da7/unzip_8c_source.html">unzip.c</a>.</p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="a87c962fb24f00cfb191fc8bd08396bb4"></a>struct <a class="el" href="../../d6/da7/unzip_8c.html#de/d7b/structcde__t_8PACKED">cde_t</a></td>
<td class="fieldname">
PACKED</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="aa90fbfd9e555efba4c161fe7adf4798d"></a><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#a3cb4a16b0e8d6af0af86d4fd6ba5fd9d">uint8_t</a></td>
<td class="fieldname">
raw[<a class="el" href="../../d6/da7/unzip_8c.html#a5143219e8f343d69042da6900432c5c9">CDE_LEN</a>]</td>
<td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<a name="d2/d25/structBUG" id="d2/d25/structBUG"></a>
<h2 class="memtitle"><span class="permalink"><a href="#d2/d25/structBUG">&#9670;&nbsp;</a></span>BUG</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct BUG</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="../../d6/da7/unzip_8c_source.html#l00197">197</a> of file <a class="el" href="../../d6/da7/unzip_8c_source.html">unzip.c</a>.</p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="af96fbee9cc4d2473563e8045fd173f29"></a>char</td>
<td class="fieldname">
BUG_cde_must_be_16_bytes[sizeof(<a class="el" href="../../d6/da7/unzip_8c.html#db/d03/unioncde__t">cde_t</a>)==<a class="el" href="../../d6/da7/unzip_8c.html#a5143219e8f343d69042da6900432c5c9">CDE_LEN</a> ? 1 :-1]</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="af11242875226cf5f3c9254be0f14d10d"></a>char</td>
<td class="fieldname">
BUG_cdf_header_must_be_42_bytes[<a class="el" href="../../d7/d3a/Userspace_2musl_2include_2stddef_8h.html#afd049f7ad59dbe455f460807475c2841">offsetof</a>(<a class="el" href="../../d6/da7/unzip_8c.html#dc/d5c/unioncdf__header__t">cdf_header_t</a>, fmt.relative_offset_of_local_header)+4==<a class="el" href="../../d6/da7/unzip_8c.html#acf6369957ec23085f37246183f8f58c6">CDF_HEADER_LEN</a> ? 1 :-1]</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a849f973747abed593c9eaa154bd1c7b3"></a>char</td>
<td class="fieldname">
BUG_zip_header_must_be_26_bytes[<a class="el" href="../../d7/d3a/Userspace_2musl_2include_2stddef_8h.html#afd049f7ad59dbe455f460807475c2841">offsetof</a>(<a class="el" href="../../d6/da7/unzip_8c.html#de/de3/unionzip__header__t">zip_header_t</a>, fmt.extra_len)+2==<a class="el" href="../../d6/da7/unzip_8c.html#abcfbf62120411c95b230af50a8f69400">ZIP_HEADER_LEN</a> ? 1 :-1]</td>
<td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<a name="dd/d70/structzip__header__t_8PACKED" id="dd/d70/structzip__header__t_8PACKED"></a>
<h2 class="memtitle"><span class="permalink"><a href="#dd/d70/structzip__header__t_8PACKED">&#9670;&nbsp;</a></span>zip_header_t.PACKED</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct zip_header_t.PACKED</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="../../d6/da7/unzip_8c_source.html#l00102">102</a> of file <a class="el" href="../../d6/da7/unzip_8c_source.html">unzip.c</a>.</p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="a7c094edfeacb8dc3199f863746c43cf3"></a><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#a5debae8b2a1ec20a6694c0c443ee399e">uint16_t</a></td>
<td class="fieldname">
extra_len</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="ae1c4b7c677ccb719496b9d0f56ac8b8a"></a><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#a5debae8b2a1ec20a6694c0c443ee399e">uint16_t</a></td>
<td class="fieldname">
filename_len</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="aea9f6aca279138c58f705c8d4cb4b8ce"></a><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#a5debae8b2a1ec20a6694c0c443ee399e">uint16_t</a></td>
<td class="fieldname">
method</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a724054b2a9638d85d0baf3a0cf8a5202"></a><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#a5debae8b2a1ec20a6694c0c443ee399e">uint16_t</a></td>
<td class="fieldname">
moddate</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a7f6cd8fe0b2897b55b13d253c09f9683"></a><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#a5debae8b2a1ec20a6694c0c443ee399e">uint16_t</a></td>
<td class="fieldname">
modtime</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a8421e7d8df9d1639b871bac663a3fc3e"></a><a class="el" href="../../dd/ddd/arithmetic__operations_8c.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> <a class="el" href="../../d3/daf/Kernel_2library_2crc32_8c.html#ab1d9d8ae9650c837dc15e66466135105">crc32</a></td>
<td class="fieldname">
PACKED</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a8421e7d8df9d1639b871bac663a3fc3e"></a><a class="el" href="../../dd/ddd/arithmetic__operations_8c.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> cmpsize</td>
<td class="fieldname">
PACKED</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a8421e7d8df9d1639b871bac663a3fc3e"></a><a class="el" href="../../dd/ddd/arithmetic__operations_8c.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> ucmpsize</td>
<td class="fieldname">
PACKED</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a2af72f100c356273d46284f6fd1dfc08"></a><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#a5debae8b2a1ec20a6694c0c443ee399e">uint16_t</a></td>
<td class="fieldname">
version</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="abf1d0eb62dcae45f9ea3262b71d50449"></a><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#a5debae8b2a1ec20a6694c0c443ee399e">uint16_t</a></td>
<td class="fieldname">
zip_flags</td>
<td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<a name="d5/d34/structcdf__header__t_8PACKED" id="d5/d34/structcdf__header__t_8PACKED"></a>
<h2 class="memtitle"><span class="permalink"><a href="#d5/d34/structcdf__header__t_8PACKED">&#9670;&nbsp;</a></span>cdf_header_t.PACKED</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct cdf_header_t.PACKED</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="../../d6/da7/unzip_8c_source.html#l00135">135</a> of file <a class="el" href="../../d6/da7/unzip_8c_source.html">unzip.c</a>.</p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="aa75b35476af7628120613e08d7ef4147"></a><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#a5debae8b2a1ec20a6694c0c443ee399e">uint16_t</a></td>
<td class="fieldname">
cdf_flags</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="af6284c37119ab425705f7f91022226ee"></a><a class="el" href="../../dd/ddd/arithmetic__operations_8c.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a></td>
<td class="fieldname">
cmpsize</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a058063301b99cb43d6165291cb9f086a"></a><a class="el" href="../../dd/ddd/arithmetic__operations_8c.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a></td>
<td class="fieldname">
crc32</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a025d64ee8cd535ed78f440a45ad3aa69"></a><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#a5debae8b2a1ec20a6694c0c443ee399e">uint16_t</a></td>
<td class="fieldname">
disk_number_start</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a7c094edfeacb8dc3199f863746c43cf3"></a><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#a5debae8b2a1ec20a6694c0c443ee399e">uint16_t</a></td>
<td class="fieldname">
extra_len</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="ad77b9d7522031fd0a9ae5d373d1bf95e"></a><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#a5debae8b2a1ec20a6694c0c443ee399e">uint16_t</a></td>
<td class="fieldname">
file_comment_length</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="ae1c4b7c677ccb719496b9d0f56ac8b8a"></a><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#a5debae8b2a1ec20a6694c0c443ee399e">uint16_t</a></td>
<td class="fieldname">
filename_len</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a297fb98f34a4224b0fa899defaca19ce"></a><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#a5debae8b2a1ec20a6694c0c443ee399e">uint16_t</a></td>
<td class="fieldname">
internal_attributes</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="aea9f6aca279138c58f705c8d4cb4b8ce"></a><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#a5debae8b2a1ec20a6694c0c443ee399e">uint16_t</a></td>
<td class="fieldname">
method</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a724054b2a9638d85d0baf3a0cf8a5202"></a><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#a5debae8b2a1ec20a6694c0c443ee399e">uint16_t</a></td>
<td class="fieldname">
moddate</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a7f6cd8fe0b2897b55b13d253c09f9683"></a><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#a5debae8b2a1ec20a6694c0c443ee399e">uint16_t</a></td>
<td class="fieldname">
modtime</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a8421e7d8df9d1639b871bac663a3fc3e"></a><a class="el" href="../../dd/ddd/arithmetic__operations_8c.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> external_attributes</td>
<td class="fieldname">
PACKED</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a8421e7d8df9d1639b871bac663a3fc3e"></a><a class="el" href="../../dd/ddd/arithmetic__operations_8c.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> relative_offset_of_local_header</td>
<td class="fieldname">
PACKED</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="aba1fd380f088474fa8f809a78b08e264"></a><a class="el" href="../../dd/ddd/arithmetic__operations_8c.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a></td>
<td class="fieldname">
ucmpsize</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a2c754ce662a5d192c21cb39c667264c1"></a><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#a5debae8b2a1ec20a6694c0c443ee399e">uint16_t</a></td>
<td class="fieldname">
version_made_by</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a38454b2f67e4071413244f01781a3cb7"></a><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#a5debae8b2a1ec20a6694c0c443ee399e">uint16_t</a></td>
<td class="fieldname">
version_needed</td>
<td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<a name="de/d7b/structcde__t_8PACKED" id="de/d7b/structcde__t_8PACKED"></a>
<h2 class="memtitle"><span class="permalink"><a href="#de/d7b/structcde__t_8PACKED">&#9670;&nbsp;</a></span>cde_t.PACKED</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct cde_t.PACKED</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="../../d6/da7/unzip_8c_source.html#l00179">179</a> of file <a class="el" href="../../d6/da7/unzip_8c_source.html">unzip.c</a>.</p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="a3c5ac8fa4f33d84b20196eecf94dfb83"></a><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#a5debae8b2a1ec20a6694c0c443ee399e">uint16_t</a></td>
<td class="fieldname">
cdf_entries_on_this_disk</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a36cba4cd399746256dcafcfe9180f802"></a><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#a5debae8b2a1ec20a6694c0c443ee399e">uint16_t</a></td>
<td class="fieldname">
cdf_entries_total</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a88b4650f1a2ca587b3fd4925b8b33b63"></a><a class="el" href="../../dd/ddd/arithmetic__operations_8c.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a></td>
<td class="fieldname">
cdf_offset</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="aa4e531f0666b365f5a195d059c5719dc"></a><a class="el" href="../../dd/ddd/arithmetic__operations_8c.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a></td>
<td class="fieldname">
cdf_size</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a726967e784e85d0eaefdf53b8d3547e3"></a><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#a5debae8b2a1ec20a6694c0c443ee399e">uint16_t</a></td>
<td class="fieldname">
disk_with_cdf_no</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a431800ccd42633929bbaa8b68748258c"></a><a class="el" href="../../d0/df4/Kernel_2include_2types_8h.html#a5debae8b2a1ec20a6694c0c443ee399e">uint16_t</a></td>
<td class="fieldname">
this_disk_no</td>
<td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a3191226e15f98abba647c064e58cfeba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3191226e15f98abba647c064e58cfeba">&#9670;&nbsp;</a></span>BAD_CDF_OFFSET</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BAD_CDF_OFFSET&#160;&#160;&#160;((<a class="el" href="../../dd/ddd/arithmetic__operations_8c.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>)0xffffffff)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/da7/unzip_8c_source.html#l00217">217</a> of file <a class="el" href="../../d6/da7/unzip_8c_source.html">unzip.c</a>.</p>

</div>
</div>
<a id="a5143219e8f343d69042da6900432c5c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5143219e8f343d69042da6900432c5c9">&#9670;&nbsp;</a></span>CDE_LEN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CDE_LEN&#160;&#160;&#160;16</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/da7/unzip_8c_source.html#l00175">175</a> of file <a class="el" href="../../d6/da7/unzip_8c_source.html">unzip.c</a>.</p>

</div>
</div>
<a id="acf6369957ec23085f37246183f8f58c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf6369957ec23085f37246183f8f58c6">&#9670;&nbsp;</a></span>CDF_HEADER_LEN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CDF_HEADER_LEN&#160;&#160;&#160;42</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/da7/unzip_8c_source.html#l00131">131</a> of file <a class="el" href="../../d6/da7/unzip_8c_source.html">unzip.c</a>.</p>

</div>
</div>
<a id="aadf47595f4fdb31176441bb4415eecac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aadf47595f4fdb31176441bb4415eecac">&#9670;&nbsp;</a></span>dbg</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define dbg</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em></td><td>)</td>
          <td>&#160;&#160;&#160;((void)0)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/da7/unzip_8c_source.html#l00079">79</a> of file <a class="el" href="../../d6/da7/unzip_8c_source.html">unzip.c</a>.</p>

</div>
</div>
<a id="a17bed8eb757cdeef77953e2d67656622"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17bed8eb757cdeef77953e2d67656622">&#9670;&nbsp;</a></span>find_cdf_offset</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define find_cdf_offset</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="../../d6/da7/unzip_8c.html#a3191226e15f98abba647c064e58cfeba">BAD_CDF_OFFSET</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/da7/unzip_8c_source.html#l00221">221</a> of file <a class="el" href="../../d6/da7/unzip_8c_source.html">unzip.c</a>.</p>

</div>
</div>
<a id="ab2dbfffceffb80eb937cc4773a74c9e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab2dbfffceffb80eb937cc4773a74c9e9">&#9670;&nbsp;</a></span>FIX_ENDIANNESS_CDE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FIX_ENDIANNESS_CDE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">cde</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> { <span class="keywordflow">if</span> (BB_BIG_ENDIAN) { \</div>
<div class="line">    (cde).fmt.cdf_offset = <a class="code" href="../../de/d03/platform_8h.html#a3154d0c2e8d9f1dd3410e9408cad21a2">SWAP_LE32</a>((cde).fmt.cdf_offset); \</div>
<div class="line">}} <span class="keywordflow">while</span> (0)</div>
<div class="ttc" id="aplatform_8h_html_a3154d0c2e8d9f1dd3410e9408cad21a2"><div class="ttname"><a href="../../de/d03/platform_8h.html#a3154d0c2e8d9f1dd3410e9408cad21a2">SWAP_LE32</a></div><div class="ttdeci">#define SWAP_LE32(x)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d03/platform_8h_source.html#l00217">platform.h:217</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../d6/da7/unzip_8c_source.html#l00192">192</a> of file <a class="el" href="../../d6/da7/unzip_8c_source.html">unzip.c</a>.</p>

</div>
</div>
<a id="ab60ed489bda9cbdae50dd8ebea6b9161"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab60ed489bda9cbdae50dd8ebea6b9161">&#9670;&nbsp;</a></span>FIX_ENDIANNESS_CDF</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FIX_ENDIANNESS_CDF</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">cdf</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> { <span class="keywordflow">if</span> (BB_BIG_ENDIAN) { \</div>
<div class="line">    (cdf).fmt.version_made_by = <a class="code" href="../../de/d03/platform_8h.html#a446b1e303411b0b2f6846315015ba096">SWAP_LE16</a>((cdf).fmt.version_made_by); \</div>
<div class="line">    (cdf).fmt.version_needed  = <a class="code" href="../../de/d03/platform_8h.html#a446b1e303411b0b2f6846315015ba096">SWAP_LE16</a>((cdf).fmt.version_needed ); \</div>
<div class="line">    (cdf).fmt.method          = <a class="code" href="../../de/d03/platform_8h.html#a446b1e303411b0b2f6846315015ba096">SWAP_LE16</a>((cdf).fmt.method         ); \</div>
<div class="line">    (cdf).fmt.modtime         = <a class="code" href="../../de/d03/platform_8h.html#a446b1e303411b0b2f6846315015ba096">SWAP_LE16</a>((cdf).fmt.modtime        ); \</div>
<div class="line">    (cdf).fmt.moddate         = <a class="code" href="../../de/d03/platform_8h.html#a446b1e303411b0b2f6846315015ba096">SWAP_LE16</a>((cdf).fmt.moddate        ); \</div>
<div class="line">    (cdf).fmt.crc32           = <a class="code" href="../../de/d03/platform_8h.html#a3154d0c2e8d9f1dd3410e9408cad21a2">SWAP_LE32</a>((cdf).fmt.crc32          ); \</div>
<div class="line">    (cdf).fmt.cmpsize         = <a class="code" href="../../de/d03/platform_8h.html#a3154d0c2e8d9f1dd3410e9408cad21a2">SWAP_LE32</a>((cdf).fmt.cmpsize        ); \</div>
<div class="line">    (cdf).fmt.ucmpsize        = <a class="code" href="../../de/d03/platform_8h.html#a3154d0c2e8d9f1dd3410e9408cad21a2">SWAP_LE32</a>((cdf).fmt.ucmpsize       ); \</div>
<div class="line">    (cdf).fmt.filename_len    = <a class="code" href="../../de/d03/platform_8h.html#a446b1e303411b0b2f6846315015ba096">SWAP_LE16</a>((cdf).fmt.filename_len   ); \</div>
<div class="line">    (cdf).fmt.extra_len       = <a class="code" href="../../de/d03/platform_8h.html#a446b1e303411b0b2f6846315015ba096">SWAP_LE16</a>((cdf).fmt.extra_len      ); \</div>
<div class="line">    (cdf).fmt.file_comment_length = <a class="code" href="../../de/d03/platform_8h.html#a446b1e303411b0b2f6846315015ba096">SWAP_LE16</a>((cdf).fmt.file_comment_length); \</div>
<div class="line">    (cdf).fmt.external_attributes = <a class="code" href="../../de/d03/platform_8h.html#a3154d0c2e8d9f1dd3410e9408cad21a2">SWAP_LE32</a>((cdf).fmt.external_attributes); \</div>
<div class="line">}} <span class="keywordflow">while</span> (0)</div>
<div class="ttc" id="aplatform_8h_html_a446b1e303411b0b2f6846315015ba096"><div class="ttname"><a href="../../de/d03/platform_8h.html#a446b1e303411b0b2f6846315015ba096">SWAP_LE16</a></div><div class="ttdeci">#define SWAP_LE16(x)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d03/platform_8h_source.html#l00216">platform.h:216</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../d6/da7/unzip_8c_source.html#l00159">159</a> of file <a class="el" href="../../d6/da7/unzip_8c_source.html">unzip.c</a>.</p>

</div>
</div>
<a id="ac29f2b46f9cd80e3eca73751d0f74cff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac29f2b46f9cd80e3eca73751d0f74cff">&#9670;&nbsp;</a></span>FIX_ENDIANNESS_ZIP</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FIX_ENDIANNESS_ZIP</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> { <span class="keywordflow">if</span> (BB_BIG_ENDIAN) { \</div>
<div class="line">    (<a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>).fmt.method        = <a class="code" href="../../de/d03/platform_8h.html#a446b1e303411b0b2f6846315015ba096">SWAP_LE16</a>((<a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>).fmt.method      ); \</div>
<div class="line">    (<a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>).fmt.modtime       = <a class="code" href="../../de/d03/platform_8h.html#a446b1e303411b0b2f6846315015ba096">SWAP_LE16</a>((<a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>).fmt.modtime     ); \</div>
<div class="line">    (<a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>).fmt.moddate       = <a class="code" href="../../de/d03/platform_8h.html#a446b1e303411b0b2f6846315015ba096">SWAP_LE16</a>((<a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>).fmt.moddate     ); \</div>
<div class="line">    (<a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>).fmt.crc32         = <a class="code" href="../../de/d03/platform_8h.html#a3154d0c2e8d9f1dd3410e9408cad21a2">SWAP_LE32</a>((<a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>).fmt.crc32       ); \</div>
<div class="line">    (<a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>).fmt.cmpsize       = <a class="code" href="../../de/d03/platform_8h.html#a3154d0c2e8d9f1dd3410e9408cad21a2">SWAP_LE32</a>((<a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>).fmt.cmpsize     ); \</div>
<div class="line">    (<a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>).fmt.ucmpsize      = <a class="code" href="../../de/d03/platform_8h.html#a3154d0c2e8d9f1dd3410e9408cad21a2">SWAP_LE32</a>((<a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>).fmt.ucmpsize    ); \</div>
<div class="line">    (<a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>).fmt.filename_len  = <a class="code" href="../../de/d03/platform_8h.html#a446b1e303411b0b2f6846315015ba096">SWAP_LE16</a>((<a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>).fmt.filename_len); \</div>
<div class="line">    (<a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>).fmt.extra_len     = <a class="code" href="../../de/d03/platform_8h.html#a446b1e303411b0b2f6846315015ba096">SWAP_LE16</a>((<a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>).fmt.extra_len   ); \</div>
<div class="line">}} <span class="keywordflow">while</span> (0)</div>
<div class="ttc" id="agzip_8c_html_a7cb45ef656fb9cf20098916225b691d6"><div class="ttname"><a href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a></div><div class="ttdeci">static void zip(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd0/gzip_8c_source.html#l02064">gzip.c:2064</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../d6/da7/unzip_8c_source.html#l00119">119</a> of file <a class="el" href="../../d6/da7/unzip_8c_source.html">unzip.c</a>.</p>

</div>
</div>
<a id="abcfbf62120411c95b230af50a8f69400"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abcfbf62120411c95b230af50a8f69400">&#9670;&nbsp;</a></span>ZIP_HEADER_LEN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ZIP_HEADER_LEN&#160;&#160;&#160;26</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/da7/unzip_8c_source.html#l00098">98</a> of file <a class="el" href="../../d6/da7/unzip_8c_source.html">unzip.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a5bbe8448fe1109247a34da39af35c5fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5bbe8448fe1109247a34da39af35c5fe">&#9670;&nbsp;</a></span>anonymous enum</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a5bbe8448fe1109247a34da39af35c5fea6938ecb1b43b5af26f578a062ba4e3e4"></a>ZIP_FILEHEADER_MAGIC&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a5bbe8448fe1109247a34da39af35c5feab4248e71f9a00c5383d314a30d58a735"></a>ZIP_CDF_MAGIC&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a5bbe8448fe1109247a34da39af35c5fea38ab42ecda2227362233170d6a1ff64b"></a>ZIP_CDE_MAGIC&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a5bbe8448fe1109247a34da39af35c5feaaf6ac782999fd8872e87127e55957fea"></a>ZIP64_CDE_MAGIC&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a5bbe8448fe1109247a34da39af35c5fea5e01fbd5aed2d55dcf0603f80d8bbf4b"></a>ZIP_DD_MAGIC&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../d6/da7/unzip_8c_source.html#l00082">82</a> of file <a class="el" href="../../d6/da7/unzip_8c_source.html">unzip.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;     {</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="preprocessor">#if BB_BIG_ENDIAN</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <a class="code" href="../../d6/da7/unzip_8c.html#a5bbe8448fe1109247a34da39af35c5fea6938ecb1b43b5af26f578a062ba4e3e4">ZIP_FILEHEADER_MAGIC</a> = 0x504b0304,</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <a class="code" href="../../d6/da7/unzip_8c.html#a5bbe8448fe1109247a34da39af35c5feab4248e71f9a00c5383d314a30d58a735">ZIP_CDF_MAGIC</a>        = 0x504b0102, <span class="comment">/* CDF item */</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <a class="code" href="../../d6/da7/unzip_8c.html#a5bbe8448fe1109247a34da39af35c5fea38ab42ecda2227362233170d6a1ff64b">ZIP_CDE_MAGIC</a>        = 0x504b0506, <span class="comment">/* End of CDF */</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <a class="code" href="../../d6/da7/unzip_8c.html#a5bbe8448fe1109247a34da39af35c5feaaf6ac782999fd8872e87127e55957fea">ZIP64_CDE_MAGIC</a>      = 0x504b0606, <span class="comment">/* End of Zip64 CDF */</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <a class="code" href="../../d6/da7/unzip_8c.html#a5bbe8448fe1109247a34da39af35c5fea5e01fbd5aed2d55dcf0603f80d8bbf4b">ZIP_DD_MAGIC</a>         = 0x504b0708,</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <a class="code" href="../../d6/da7/unzip_8c.html#a5bbe8448fe1109247a34da39af35c5fea6938ecb1b43b5af26f578a062ba4e3e4">ZIP_FILEHEADER_MAGIC</a> = 0x04034b50,</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <a class="code" href="../../d6/da7/unzip_8c.html#a5bbe8448fe1109247a34da39af35c5feab4248e71f9a00c5383d314a30d58a735">ZIP_CDF_MAGIC</a>        = 0x02014b50,</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <a class="code" href="../../d6/da7/unzip_8c.html#a5bbe8448fe1109247a34da39af35c5fea38ab42ecda2227362233170d6a1ff64b">ZIP_CDE_MAGIC</a>        = 0x06054b50,</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <a class="code" href="../../d6/da7/unzip_8c.html#a5bbe8448fe1109247a34da39af35c5feaaf6ac782999fd8872e87127e55957fea">ZIP64_CDE_MAGIC</a>      = 0x06064b50,</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <a class="code" href="../../d6/da7/unzip_8c.html#a5bbe8448fe1109247a34da39af35c5fea5e01fbd5aed2d55dcf0603f80d8bbf4b">ZIP_DD_MAGIC</a>         = 0x08074b50,</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;};</div>
<div class="ttc" id="aunzip_8c_html_a5bbe8448fe1109247a34da39af35c5fea38ab42ecda2227362233170d6a1ff64b"><div class="ttname"><a href="../../d6/da7/unzip_8c.html#a5bbe8448fe1109247a34da39af35c5fea38ab42ecda2227362233170d6a1ff64b">ZIP_CDE_MAGIC</a></div><div class="ttdeci">@ ZIP_CDE_MAGIC</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/da7/unzip_8c_source.html#l00092">unzip.c:92</a></div></div>
<div class="ttc" id="aunzip_8c_html_a5bbe8448fe1109247a34da39af35c5fea5e01fbd5aed2d55dcf0603f80d8bbf4b"><div class="ttname"><a href="../../d6/da7/unzip_8c.html#a5bbe8448fe1109247a34da39af35c5fea5e01fbd5aed2d55dcf0603f80d8bbf4b">ZIP_DD_MAGIC</a></div><div class="ttdeci">@ ZIP_DD_MAGIC</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/da7/unzip_8c_source.html#l00094">unzip.c:94</a></div></div>
<div class="ttc" id="aunzip_8c_html_a5bbe8448fe1109247a34da39af35c5fea6938ecb1b43b5af26f578a062ba4e3e4"><div class="ttname"><a href="../../d6/da7/unzip_8c.html#a5bbe8448fe1109247a34da39af35c5fea6938ecb1b43b5af26f578a062ba4e3e4">ZIP_FILEHEADER_MAGIC</a></div><div class="ttdeci">@ ZIP_FILEHEADER_MAGIC</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/da7/unzip_8c_source.html#l00090">unzip.c:90</a></div></div>
<div class="ttc" id="aunzip_8c_html_a5bbe8448fe1109247a34da39af35c5feaaf6ac782999fd8872e87127e55957fea"><div class="ttname"><a href="../../d6/da7/unzip_8c.html#a5bbe8448fe1109247a34da39af35c5feaaf6ac782999fd8872e87127e55957fea">ZIP64_CDE_MAGIC</a></div><div class="ttdeci">@ ZIP64_CDE_MAGIC</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/da7/unzip_8c_source.html#l00093">unzip.c:93</a></div></div>
<div class="ttc" id="aunzip_8c_html_a5bbe8448fe1109247a34da39af35c5feab4248e71f9a00c5383d314a30d58a735"><div class="ttname"><a href="../../d6/da7/unzip_8c.html#a5bbe8448fe1109247a34da39af35c5feab4248e71f9a00c5383d314a30d58a735">ZIP_CDF_MAGIC</a></div><div class="ttdeci">@ ZIP_CDF_MAGIC</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/da7/unzip_8c_source.html#l00091">unzip.c:91</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2c4e2be2550d52c8ccdfca737ac675d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c4e2be2550d52c8ccdfca737ac675d2">&#9670;&nbsp;</a></span>anonymous enum</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a2c4e2be2550d52c8ccdfca737ac675d2ac5d1c375f88d748cd917127ae9f0ed0a"></a>zip_fd&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../d6/da7/unzip_8c_source.html#l00213">213</a> of file <a class="el" href="../../d6/da7/unzip_8c_source.html">unzip.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;{ <a class="code" href="../../d6/da7/unzip_8c.html#a2c4e2be2550d52c8ccdfca737ac675d2ac5d1c375f88d748cd917127ae9f0ed0a">zip_fd</a> = 3 };</div>
<div class="ttc" id="aunzip_8c_html_a2c4e2be2550d52c8ccdfca737ac675d2ac5d1c375f88d748cd917127ae9f0ed0a"><div class="ttname"><a href="../../d6/da7/unzip_8c.html#a2c4e2be2550d52c8ccdfca737ac675d2ac5d1c375f88d748cd917127ae9f0ed0a">zip_fd</a></div><div class="ttdeci">@ zip_fd</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/da7/unzip_8c_source.html#l00213">unzip.c:213</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a11c04263f55bfdbc7ab2a6d5a665a223"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11c04263f55bfdbc7ab2a6d5a665a223">&#9670;&nbsp;</a></span>die_if_bad_fnamesize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void die_if_bad_fnamesize </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>sz</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/da7/unzip_8c_source.html#l00342">342</a> of file <a class="el" href="../../d6/da7/unzip_8c_source.html">unzip.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;{</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="keywordflow">if</span> (sz &gt; 0xfff) <span class="comment">/* more than 4k?! no funny business please */</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;        <a class="code" href="../../d7/dd7/libbb_8h.html#aa7873f1b32526ae11612363558a2aa90">bb_simple_error_msg_and_die</a>(<span class="stringliteral">&quot;bad archive&quot;</span>);</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;}</div>
<div class="ttc" id="alibbb_8h_html_aa7873f1b32526ae11612363558a2aa90"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#aa7873f1b32526ae11612363558a2aa90">bb_simple_error_msg_and_die</a></div><div class="ttdeci">void bb_simple_error_msg_and_die(const char *s) NORETURN FAST_FUNC</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/db5/verror__msg_8c_source.html#l00212">verror_msg.c:212</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d5/db5/verror__msg_8c_source.html#l00212">bb_simple_error_msg_and_die()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d83/get__header__tar_8c_source.html#l00158">get_header_tar()</a>, and <a class="el" href="../../d6/da7/unzip_8c_source.html#l00492">unzip_main()</a>.</p>

</div>
</div>
<a id="aafcf719d11c3d3b4e077e4955af3ba30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aafcf719d11c3d3b4e077e4955af3ba30">&#9670;&nbsp;</a></span>get_lstat_mode()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int get_lstat_mode </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>dst_fn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/da7/unzip_8c_source.html#l00476">476</a> of file <a class="el" href="../../d6/da7/unzip_8c_source.html">unzip.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;{</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../db/df2/Userspace_2musl_2arch_2x86__64_2bits_2stat_8h.html#da/de7/structstat">stat</a> stat_buf;</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d4/d11/apps_2base_2bash_2lib_2sh_2getcwd_8c.html#ae730c85752284268b39560df693cb207">lstat</a>(dst_fn, &amp;stat_buf) == -1) {</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../db/d0b/Kernel_2include__std_2errno_8h.html#ab03f640d90fbc5bcb75285d08a0f25ed">errno</a> != <a class="code" href="../../db/d0b/Kernel_2include__std_2errno_8h.html#a03e689f378f643d16ea7537918528a48">ENOENT</a>) {</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;            <a class="code" href="../../d7/dd7/libbb_8h.html#ad3b9a4415e25d8fb7e9980347357dc95">bb_perror_msg_and_die</a>(<span class="stringliteral">&quot;can&#39;t stat &#39;%s&#39;&quot;</span>,</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;                dst_fn</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;            );</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        }</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;        <span class="comment">/* File does not exist */</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    }</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="keywordflow">return</span> stat_buf.st_mode;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;}</div>
<div class="ttc" id="aKernel_2include__std_2errno_8h_html_a03e689f378f643d16ea7537918528a48"><div class="ttname"><a href="../../db/d0b/Kernel_2include__std_2errno_8h.html#a03e689f378f643d16ea7537918528a48">ENOENT</a></div><div class="ttdeci">#define ENOENT</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0b/Kernel_2include__std_2errno_8h_source.html#l00025">errno.h:25</a></div></div>
<div class="ttc" id="aKernel_2include__std_2errno_8h_html_ab03f640d90fbc5bcb75285d08a0f25ed"><div class="ttname"><a href="../../db/d0b/Kernel_2include__std_2errno_8h.html#ab03f640d90fbc5bcb75285d08a0f25ed">errno</a></div><div class="ttdeci">#define errno</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0b/Kernel_2include__std_2errno_8h_source.html#l00410">errno.h:410</a></div></div>
<div class="ttc" id="aUserspace_2musl_2arch_2x86__64_2bits_2stat_8h_html_da/de7/structstat"><div class="ttname"><a href="../../db/df2/Userspace_2musl_2arch_2x86__64_2bits_2stat_8h.html#da/de7/structstat">stat</a></div><div class="ttdoc">Structure holding information about a file, as returned by the stat function.</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d85/filesystem_8hpp_source.html#l00094">filesystem.hpp:95</a></div></div>
<div class="ttc" id="aapps_2base_2bash_2lib_2sh_2getcwd_8c_html_ae730c85752284268b39560df693cb207"><div class="ttname"><a href="../../d4/d11/apps_2base_2bash_2lib_2sh_2getcwd_8c.html#ae730c85752284268b39560df693cb207">lstat</a></div><div class="ttdeci">#define lstat</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d11/apps_2base_2bash_2lib_2sh_2getcwd_8c_source.html#l00064">getcwd.c:64</a></div></div>
<div class="ttc" id="alibbb_8h_html_ad3b9a4415e25d8fb7e9980347357dc95"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#ad3b9a4415e25d8fb7e9980347357dc95">bb_perror_msg_and_die</a></div><div class="ttdeci">void bb_perror_msg_and_die(const char *s,...) __attribute__((noreturn</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/dd7/libbb_8h.html#ad3b9a4415e25d8fb7e9980347357dc95">bb_perror_msg_and_die()</a>, <a class="el" href="../../db/d0b/Kernel_2include__std_2errno_8h_source.html#l00025">ENOENT</a>, <a class="el" href="../../db/d0b/Kernel_2include__std_2errno_8h_source.html#l00410">errno</a>, <a class="el" href="../../d4/d11/apps_2base_2bash_2lib_2sh_2getcwd_8c_source.html#l00064">lstat</a>, and <a class="el" href="../../d1/d85/filesystem_8hpp_source.html#l00101">stat::st_mode</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/da7/unzip_8c_source.html#l00492">unzip_main()</a>.</p>

</div>
</div>
<a id="a107380b3c0b625c0d01447586a797628"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a107380b3c0b625c0d01447586a797628">&#9670;&nbsp;</a></span>my_fgets80()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void my_fgets80 </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf80</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/da7/unzip_8c_source.html#l00468">468</a> of file <a class="el" href="../../d6/da7/unzip_8c_source.html">unzip.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;{</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    <a class="code" href="../../d7/dd7/libbb_8h.html#a8f037f44db72dcde4db67b3cb5dee815">fflush_all</a>();</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d7/dd7/libbb_8h.html#a458f311e9a7d803457d8ac51bf5aae4b">fgets</a>(buf80, 80, <a class="code" href="../../dd/d69/Userspace_2libc_2include_2stdio_8h.html#aaca70138f0cb63ddb026921afc635179">stdin</a>)) {</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        <a class="code" href="../../d7/dd7/libbb_8h.html#a908d5535f4c6167da1ac613b29f4b7e4">bb_simple_perror_msg_and_die</a>(<span class="stringliteral">&quot;can&#39;t read standard input&quot;</span>);</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    }</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;}</div>
<div class="ttc" id="aUserspace_2libc_2include_2stdio_8h_html_aaca70138f0cb63ddb026921afc635179"><div class="ttname"><a href="../../dd/d69/Userspace_2libc_2include_2stdio_8h.html#aaca70138f0cb63ddb026921afc635179">stdin</a></div><div class="ttdeci">#define stdin</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d69/Userspace_2libc_2include_2stdio_8h_source.html#l00056">stdio.h:56</a></div></div>
<div class="ttc" id="alibbb_8h_html_a458f311e9a7d803457d8ac51bf5aae4b"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#a458f311e9a7d803457d8ac51bf5aae4b">fgets</a></div><div class="ttdeci">#define fgets(s, n, stream)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dd7/libbb_8h_source.html#l00236">libbb.h:236</a></div></div>
<div class="ttc" id="alibbb_8h_html_a8f037f44db72dcde4db67b3cb5dee815"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#a8f037f44db72dcde4db67b3cb5dee815">fflush_all</a></div><div class="ttdeci">int fflush_all(void) FAST_FUNC</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd6/xfuncs__printf_8c_source.html#l00307">xfuncs_printf.c:307</a></div></div>
<div class="ttc" id="alibbb_8h_html_a908d5535f4c6167da1ac613b29f4b7e4"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#a908d5535f4c6167da1ac613b29f4b7e4">bb_simple_perror_msg_and_die</a></div><div class="ttdeci">void bb_simple_perror_msg_and_die(const char *s) NORETURN FAST_FUNC</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d45/perror__msg_8c_source.html#l00037">perror_msg.c:37</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d9/d45/perror__msg_8c_source.html#l00037">bb_simple_perror_msg_and_die()</a>, <a class="el" href="../../d9/dd6/xfuncs__printf_8c_source.html#l00307">fflush_all()</a>, <a class="el" href="../../d7/dd7/libbb_8h_source.html#l00236">fgets</a>, and <a class="el" href="../../dd/d69/Userspace_2libc_2include_2stdio_8h_source.html#l00056">stdin</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/da7/unzip_8c_source.html#l00492">unzip_main()</a>.</p>

</div>
</div>
<a id="aff8e343da65f840a4bf77846567426be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff8e343da65f840a4bf77846567426be">&#9670;&nbsp;</a></span>unzip_create_leading_dirs()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void unzip_create_leading_dirs </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/da7/unzip_8c_source.html#l00355">355</a> of file <a class="el" href="../../d6/da7/unzip_8c_source.html">unzip.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;{</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="comment">/* Create all leading directories */</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="keywordtype">char</span> *name = <a class="code" href="../../dc/dd1/pathchk_8c.html#ac7a701bce03d77bad6b57003d0fe73df">xstrdup</a>(fn);</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160; </div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="comment">/* mode of -1: set mode according to umask */</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d7/dd7/libbb_8h.html#ab3f99a71d530e3ef3d85df861cc3979f">bb_make_directory</a>(<a class="code" href="../../da/d36/bindtextdom_8c.html#ab8a2fd169b20f0b9d33959f7b17d35aa">dirname</a>(name), -1, <a class="code" href="../../d7/dd7/libbb_8h.html#a2763d34240a976ef812fed988f944d41a74077bdd3be6551dcc6318ca2a22dc44">FILEUTILS_RECUR</a>)) {</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        <a class="code" href="../../d7/dd7/libbb_8h.html#a94a607b4c69c9d6883ee67ee8d46aec4">xfunc_die</a>(); <span class="comment">/* bb_make_directory is noisy */</span></div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    }</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <a class="code" href="../../d5/db0/dynlink_8c.html#a2c6efa7679f8cd9f61af96e105017560">free</a>(name);</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;}</div>
<div class="ttc" id="abindtextdom_8c_html_ab8a2fd169b20f0b9d33959f7b17d35aa"><div class="ttname"><a href="../../da/d36/bindtextdom_8c.html#ab8a2fd169b20f0b9d33959f7b17d35aa">dirname</a></div><div class="ttdeci">const char * dirname</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d36/bindtextdom_8c_source.html#l00355">bindtextdom.c:355</a></div></div>
<div class="ttc" id="adynlink_8c_html_a2c6efa7679f8cd9f61af96e105017560"><div class="ttname"><a href="../../d5/db0/dynlink_8c.html#a2c6efa7679f8cd9f61af96e105017560">free</a></div><div class="ttdeci">#define free</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/db0/dynlink_8c_source.html#l00036">dynlink.c:36</a></div></div>
<div class="ttc" id="alibbb_8h_html_a2763d34240a976ef812fed988f944d41a74077bdd3be6551dcc6318ca2a22dc44"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#a2763d34240a976ef812fed988f944d41a74077bdd3be6551dcc6318ca2a22dc44">FILEUTILS_RECUR</a></div><div class="ttdeci">@ FILEUTILS_RECUR</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dd7/libbb_8h_source.html#l00467">libbb.h:467</a></div></div>
<div class="ttc" id="alibbb_8h_html_a94a607b4c69c9d6883ee67ee8d46aec4"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#a94a607b4c69c9d6883ee67ee8d46aec4">xfunc_die</a></div><div class="ttdeci">void xfunc_die(void) NORETURN FAST_FUNC</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d42/xfunc__die_8c_source.html#l00016">xfunc_die.c:16</a></div></div>
<div class="ttc" id="alibbb_8h_html_ab3f99a71d530e3ef3d85df861cc3979f"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#ab3f99a71d530e3ef3d85df861cc3979f">bb_make_directory</a></div><div class="ttdeci">int bb_make_directory(char *path, long mode, int flags) FAST_FUNC</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d37/make__directory_8c_source.html#l00027">make_directory.c:27</a></div></div>
<div class="ttc" id="apathchk_8c_html_ac7a701bce03d77bad6b57003d0fe73df"><div class="ttname"><a href="../../dc/dd1/pathchk_8c.html#ac7a701bce03d77bad6b57003d0fe73df">xstrdup</a></div><div class="ttdeci">static char * xstrdup(char *s)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd1/pathchk_8c_source.html#l00258">pathchk.c:258</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d0/d37/make__directory_8c_source.html#l00027">bb_make_directory()</a>, <a class="el" href="../../da/d36/bindtextdom_8c_source.html#l00355">dirname</a>, <a class="el" href="../../d7/dd7/libbb_8h_source.html#l00467">FILEUTILS_RECUR</a>, <a class="el" href="../../d5/db0/dynlink_8c_source.html#l00036">free</a>, <a class="el" href="../../d8/d42/xfunc__die_8c_source.html#l00016">xfunc_die()</a>, and <a class="el" href="../../dc/dd1/pathchk_8c_source.html#l00258">xstrdup()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/da7/unzip_8c_source.html#l00492">unzip_main()</a>.</p>

</div>
</div>
<a id="abad37ee2fe013e5534599f1c897d9821"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abad37ee2fe013e5534599f1c897d9821">&#9670;&nbsp;</a></span>unzip_extract()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void unzip_extract </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/da7/unzip_8c.html#de/de3/unionzip__header__t">zip_header_t</a> *&#160;</td>
          <td class="paramname"><em>zip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dst_fd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/da7/unzip_8c_source.html#l00403">403</a> of file <a class="el" href="../../d6/da7/unzip_8c_source.html">unzip.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;{</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <a class="code" href="../../d5/d6e/structtransformer__state__t.html">transformer_state_t</a> xstate;</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160; </div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>-&gt;fmt.method == 0) {</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        <span class="comment">/* Method 0 - stored (not compressed) */</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        <a class="code" href="../../d4/dba/Drivers_2include_2types_8h.html#a37aff01e955441499997a359a4153b3d">off_t</a> <a class="code" href="../../d1/dc0/multiboot_8h.html#a6d813a0f2b5281b18dea3f4cda696c33">size</a> = <a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>-&gt;fmt.ucmpsize;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d1/dc0/multiboot_8h.html#a6d813a0f2b5281b18dea3f4cda696c33">size</a>)</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;            <a class="code" href="../../d7/dd7/libbb_8h.html#ab7f49aa607fe330106f866bc09fa3a9b">bb_copyfd_exact_size</a>(<a class="code" href="../../d6/da7/unzip_8c.html#a2c4e2be2550d52c8ccdfca737ac675d2ac5d1c375f88d748cd917127ae9f0ed0a">zip_fd</a>, dst_fd, <a class="code" href="../../d1/dc0/multiboot_8h.html#a6d813a0f2b5281b18dea3f4cda696c33">size</a>);</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    }</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160; </div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <a class="code" href="../../d5/daf/open__transformer_8c.html#a063b13312d0890bf24fb02e0cd1a2557">init_transformer_state</a>(&amp;xstate);</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    xstate.<a class="code" href="../../d5/d6e/structtransformer__state__t.html#ad98778c6fbf0413d729369ad7a160281">bytes_in</a> = <a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>-&gt;fmt.cmpsize;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    xstate.<a class="code" href="../../d5/d6e/structtransformer__state__t.html#a57249c8631246a327683fccfee70067d">src_fd</a> = <a class="code" href="../../d6/da7/unzip_8c.html#a2c4e2be2550d52c8ccdfca737ac675d2ac5d1c375f88d748cd917127ae9f0ed0a">zip_fd</a>;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    xstate.<a class="code" href="../../d5/d6e/structtransformer__state__t.html#a1644cea0476ac9d30b379031ffe2dbac">dst_fd</a> = dst_fd;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>-&gt;fmt.method == 8) {</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        <span class="comment">/* Method 8 - inflate */</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        <span class="keywordflow">if</span> (inflate_unzip(&amp;xstate) &lt; 0)</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;            <a class="code" href="../../d7/dd7/libbb_8h.html#aa7873f1b32526ae11612363558a2aa90">bb_simple_error_msg_and_die</a>(<span class="stringliteral">&quot;inflate error&quot;</span>);</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        <span class="comment">/* Validate decompression - crc */</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>-&gt;fmt.crc32 != (xstate.<a class="code" href="../../d5/d6e/structtransformer__state__t.html#aedb46b5b7843d44a7b5eaae93c336144">crc32</a> ^ 0xffffffffL)) {</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;            <a class="code" href="../../d7/dd7/libbb_8h.html#aa7873f1b32526ae11612363558a2aa90">bb_simple_error_msg_and_die</a>(<span class="stringliteral">&quot;crc error&quot;</span>);</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        }</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    }</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="preprocessor">#if ENABLE_FEATURE_UNZIP_BZIP2</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>-&gt;fmt.method == 12) {</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        <span class="comment">/* Tested. Unpacker reads too much, but we use CDF</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<span class="comment">         * and will seek to the correct beginning of next file.</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        xstate.<a class="code" href="../../d5/d6e/structtransformer__state__t.html#ac27e49f85c9a40e18de0b8b34fb6b448">bytes_out</a> = unpack_bz2_stream(&amp;xstate);</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        <span class="keywordflow">if</span> (xstate.<a class="code" href="../../d5/d6e/structtransformer__state__t.html#ac27e49f85c9a40e18de0b8b34fb6b448">bytes_out</a> &lt; 0)</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;            <a class="code" href="../../d7/dd7/libbb_8h.html#aa7873f1b32526ae11612363558a2aa90">bb_simple_error_msg_and_die</a>(<span class="stringliteral">&quot;inflate error&quot;</span>);</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    }</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="preprocessor">#if ENABLE_FEATURE_UNZIP_LZMA</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>-&gt;fmt.method == 14) {</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        <span class="comment">/* Not tested yet */</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        xstate.<a class="code" href="../../d5/d6e/structtransformer__state__t.html#ac27e49f85c9a40e18de0b8b34fb6b448">bytes_out</a> = unpack_lzma_stream(&amp;xstate);</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        <span class="keywordflow">if</span> (xstate.<a class="code" href="../../d5/d6e/structtransformer__state__t.html#ac27e49f85c9a40e18de0b8b34fb6b448">bytes_out</a> &lt; 0)</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;            <a class="code" href="../../d7/dd7/libbb_8h.html#aa7873f1b32526ae11612363558a2aa90">bb_simple_error_msg_and_die</a>(<span class="stringliteral">&quot;inflate error&quot;</span>);</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    }</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="preprocessor">#if ENABLE_FEATURE_UNZIP_XZ</span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>-&gt;fmt.method == 95) {</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        <span class="comment">/* Not tested yet */</span></div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        xstate.<a class="code" href="../../d5/d6e/structtransformer__state__t.html#ac27e49f85c9a40e18de0b8b34fb6b448">bytes_out</a> = unpack_xz_stream(&amp;xstate);</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        <span class="keywordflow">if</span> (xstate.<a class="code" href="../../d5/d6e/structtransformer__state__t.html#ac27e49f85c9a40e18de0b8b34fb6b448">bytes_out</a> &lt; 0)</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;            <a class="code" href="../../d7/dd7/libbb_8h.html#aa7873f1b32526ae11612363558a2aa90">bb_simple_error_msg_and_die</a>(<span class="stringliteral">&quot;inflate error&quot;</span>);</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    }</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        <a class="code" href="../../d7/dd7/libbb_8h.html#a1992b68ae7d01f7da91e31e351ca3b33">bb_error_msg_and_die</a>(<span class="stringliteral">&quot;unsupported method %u&quot;</span>, <a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>-&gt;fmt.method);</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    }</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160; </div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    <span class="comment">/* Validate decompression - size */</span></div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>-&gt;fmt.ucmpsize != 0xffffffff <span class="comment">/* seen on files with &gt;4GB uncompressed data */</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;     &amp;&amp; <a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>-&gt;fmt.ucmpsize != xstate.<a class="code" href="../../d5/d6e/structtransformer__state__t.html#ac27e49f85c9a40e18de0b8b34fb6b448">bytes_out</a></div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    ) {</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        <span class="comment">/* Don&#39;t die. Who knows, maybe len calculation</span></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="comment">         * was botched somewhere. After all, crc matched! */</span></div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        <a class="code" href="../../d7/dd7/libbb_8h.html#adda54c033215173332478fed15ec2fa5">bb_simple_error_msg</a>(<span class="stringliteral">&quot;bad length&quot;</span>);</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    }</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;}</div>
<div class="ttc" id="aDrivers_2include_2types_8h_html_a37aff01e955441499997a359a4153b3d"><div class="ttname"><a href="../../d4/dba/Drivers_2include_2types_8h.html#a37aff01e955441499997a359a4153b3d">off_t</a></div><div class="ttdeci">__SIZE_TYPE__ off_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dba/Drivers_2include_2types_8h_source.html#l00058">types.h:58</a></div></div>
<div class="ttc" id="alibbb_8h_html_a1992b68ae7d01f7da91e31e351ca3b33"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#a1992b68ae7d01f7da91e31e351ca3b33">bb_error_msg_and_die</a></div><div class="ttdeci">void bb_error_msg_and_die(const char *s,...) __attribute__((noreturn</div></div>
<div class="ttc" id="alibbb_8h_html_ab7f49aa607fe330106f866bc09fa3a9b"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#ab7f49aa607fe330106f866bc09fa3a9b">bb_copyfd_exact_size</a></div><div class="ttdeci">void bb_copyfd_exact_size(int fd1, int fd2, off_t size) FAST_FUNC</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df3/copyfd_8c_source.html#l00148">copyfd.c:148</a></div></div>
<div class="ttc" id="alibbb_8h_html_adda54c033215173332478fed15ec2fa5"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#adda54c033215173332478fed15ec2fa5">bb_simple_error_msg</a></div><div class="ttdeci">void bb_simple_error_msg(const char *s) FAST_FUNC</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/db5/verror__msg_8c_source.html#l00207">verror_msg.c:207</a></div></div>
<div class="ttc" id="amultiboot_8h_html_a6d813a0f2b5281b18dea3f4cda696c33"><div class="ttname"><a href="../../d1/dc0/multiboot_8h.html#a6d813a0f2b5281b18dea3f4cda696c33">size</a></div><div class="ttdeci">multiboot_uint32_t size</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/multiboot_8h_source.html#l00000">multiboot.h:0</a></div></div>
<div class="ttc" id="aopen__transformer_8c_html_a063b13312d0890bf24fb02e0cd1a2557"><div class="ttname"><a href="../../d5/daf/open__transformer_8c.html#a063b13312d0890bf24fb02e0cd1a2557">init_transformer_state</a></div><div class="ttdeci">void FAST_FUNC init_transformer_state(transformer_state_t *xstate)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/daf/open__transformer_8c_source.html#l00008">open_transformer.c:8</a></div></div>
<div class="ttc" id="astructtransformer__state__t_html"><div class="ttname"><a href="../../d5/d6e/structtransformer__state__t.html">transformer_state_t</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/bb__archive_8h_source.html#l00220">bb_archive.h:220</a></div></div>
<div class="ttc" id="astructtransformer__state__t_html_a1644cea0476ac9d30b379031ffe2dbac"><div class="ttname"><a href="../../d5/d6e/structtransformer__state__t.html#a1644cea0476ac9d30b379031ffe2dbac">transformer_state_t::dst_fd</a></div><div class="ttdeci">int dst_fd</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/bb__archive_8h_source.html#l00229">bb_archive.h:229</a></div></div>
<div class="ttc" id="astructtransformer__state__t_html_a57249c8631246a327683fccfee70067d"><div class="ttname"><a href="../../d5/d6e/structtransformer__state__t.html#a57249c8631246a327683fccfee70067d">transformer_state_t::src_fd</a></div><div class="ttdeci">int src_fd</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/bb__archive_8h_source.html#l00227">bb_archive.h:227</a></div></div>
<div class="ttc" id="astructtransformer__state__t_html_ac27e49f85c9a40e18de0b8b34fb6b448"><div class="ttname"><a href="../../d5/d6e/structtransformer__state__t.html#ac27e49f85c9a40e18de0b8b34fb6b448">transformer_state_t::bytes_out</a></div><div class="ttdeci">off_t bytes_out</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/bb__archive_8h_source.html#l00234">bb_archive.h:234</a></div></div>
<div class="ttc" id="astructtransformer__state__t_html_ad98778c6fbf0413d729369ad7a160281"><div class="ttname"><a href="../../d5/d6e/structtransformer__state__t.html#ad98778c6fbf0413d729369ad7a160281">transformer_state_t::bytes_in</a></div><div class="ttdeci">off_t bytes_in</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/bb__archive_8h_source.html#l00235">bb_archive.h:235</a></div></div>
<div class="ttc" id="astructtransformer__state__t_html_aedb46b5b7843d44a7b5eaae93c336144"><div class="ttname"><a href="../../d5/d6e/structtransformer__state__t.html#aedb46b5b7843d44a7b5eaae93c336144">transformer_state_t::crc32</a></div><div class="ttdeci">uint32_t crc32</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/bb__archive_8h_source.html#l00236">bb_archive.h:236</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d0/df3/copyfd_8c_source.html#l00148">bb_copyfd_exact_size()</a>, <a class="el" href="../../d7/dd7/libbb_8h.html#a1992b68ae7d01f7da91e31e351ca3b33">bb_error_msg_and_die()</a>, <a class="el" href="../../d5/db5/verror__msg_8c_source.html#l00207">bb_simple_error_msg()</a>, <a class="el" href="../../d5/db5/verror__msg_8c_source.html#l00212">bb_simple_error_msg_and_die()</a>, <a class="el" href="../../d1/d94/bb__archive_8h_source.html#l00235">transformer_state_t::bytes_in</a>, <a class="el" href="../../d1/d94/bb__archive_8h_source.html#l00234">transformer_state_t::bytes_out</a>, <a class="el" href="../../d1/d94/bb__archive_8h_source.html#l00236">transformer_state_t::crc32</a>, <a class="el" href="../../d1/d94/bb__archive_8h_source.html#l00229">transformer_state_t::dst_fd</a>, <a class="el" href="../../d5/daf/open__transformer_8c_source.html#l00008">init_transformer_state()</a>, <a class="el" href="../../d1/dc0/multiboot_8h_source.html#l00000">size</a>, <a class="el" href="../../d1/d94/bb__archive_8h_source.html#l00227">transformer_state_t::src_fd</a>, <a class="el" href="../../d6/dd0/gzip_8c_source.html#l02064">zip()</a>, and <a class="el" href="../../d6/da7/unzip_8c_source.html#l00213">zip_fd</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/da7/unzip_8c_source.html#l00492">unzip_main()</a>.</p>

</div>
</div>
<a id="a08bce2ac37d0e77346a9a30de27d96e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08bce2ac37d0e77346a9a30de27d96e6">&#9670;&nbsp;</a></span>unzip_main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int unzip_main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>argv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/da7/unzip_8c_source.html#l00492">492</a> of file <a class="el" href="../../d6/da7/unzip_8c_source.html">unzip.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;{</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <span class="keyword">enum</span> {</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        <a class="code" href="../../d5/d87/nandwrite_8c.html#aa0a86f788bd9ec97c7ff91bff4dafe63">OPT_l</a> = (1 &lt;&lt; 0),</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        <a class="code" href="../../d1/d08/mountpoint_8c.html#a86450ca8fb061c5ccf2dc56d8e38825d">OPT_x</a> = (1 &lt;&lt; 1),</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        <a class="code" href="../../d1/dac/od__bloaty_8c.html#a58562587eaf0c784eeac869888a97303a0f9b0c7d8f51d9ffaba812a83673086c">OPT_j</a> = (1 &lt;&lt; 2),</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;        <a class="code" href="../../d8/d6a/tcpudp_8c.html#a7cfee661bb838892b5f0feca7c0d5e46af845ba972eeee15878954faf92b03deb">OPT_K</a> = (1 &lt;&lt; 3),</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    };</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="keywordtype">unsigned</span> opts;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <a class="code" href="../../de/d03/platform_8h.html#ad05b39cab98c2ea86551b631e839efbf">smallint</a> quiet = 0;</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    IF_NOT_FEATURE_UNZIP_CDF(<span class="keyword">const</span>) <a class="code" href="../../de/d03/platform_8h.html#ad05b39cab98c2ea86551b631e839efbf">smallint</a> <a class="code" href="../../d1/de7/httpd_8c.html#afe0534ca994b08a0ec5edf614aa48e9c">verbose</a> = 0;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    enum { O_PROMPT, O_NEVER, O_ALWAYS };</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <a class="code" href="../../de/d03/platform_8h.html#ad05b39cab98c2ea86551b631e839efbf">smallint</a> overwrite = O_PROMPT;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <a class="code" href="../../dd/ddd/arithmetic__operations_8c.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> cdf_offset;</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> total_usize;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> total_size;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <span class="keywordtype">unsigned</span> total_entries;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <span class="keywordtype">int</span> dst_fd = -1;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <span class="keywordtype">char</span> *src_fn = <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <span class="keywordtype">char</span> *dst_fn = <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    <a class="code" href="../../d7/dd7/libbb_8h.html#da/d28/structllist__t">llist_t</a> *zaccept = <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <a class="code" href="../../d7/dd7/libbb_8h.html#da/d28/structllist__t">llist_t</a> *zreject = <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <span class="keywordtype">char</span> *base_dir = <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;<span class="preprocessor">#if ENABLE_FEATURE_UNZIP_CDF</span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <a class="code" href="../../d7/dd7/libbb_8h.html#da/d28/structllist__t">llist_t</a> *symlink_placeholders = <a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <span class="keywordtype">char</span> key_buf[80]; <span class="comment">/* must match size used by my_fgets80 */</span></div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160; </div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<span class="comment">/* -q, -l and -v: UnZip 5.52 of 28 February 2005, by Info-ZIP:</span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="comment"> * # /usr/bin/unzip -qq -v decompress_unlzma.i.zip</span></div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;<span class="comment"> *   204372  Defl:N    35278  83%  09-06-09 14:23  0d056252  decompress_unlzma.i</span></div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;<span class="comment"> * # /usr/bin/unzip -q -v decompress_unlzma.i.zip</span></div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;<span class="comment"> *  Length   Method    Size  Ratio   Date   Time   CRC-32    Name</span></div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;<span class="comment"> * --------  ------  ------- -----   ----   ----   ------    ----</span></div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;<span class="comment"> *   204372  Defl:N    35278  83%  09-06-09 14:23  0d056252  decompress_unlzma.i</span></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="comment"> * --------          -------  ---                            -------</span></div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<span class="comment"> *   204372            35278  83%                            1 file</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="comment"> * # /usr/bin/unzip -v decompress_unlzma.i.zip</span></div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="comment"> * Archive:  decompress_unlzma.i.zip</span></div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="comment"> *  Length   Method    Size  Ratio   Date   Time   CRC-32    Name</span></div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<span class="comment"> * --------  ------  ------- -----   ----   ----   ------    ----</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;<span class="comment"> *   204372  Defl:N    35278  83%  09-06-09 14:23  0d056252  decompress_unlzma.i</span></div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;<span class="comment"> * --------          -------  ---                            -------</span></div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;<span class="comment"> *   204372            35278  83%                            1 file</span></div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;<span class="comment"> * # unzip -v decompress_unlzma.i.zip</span></div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="comment"> * Archive:  decompress_unlzma.i.zip</span></div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<span class="comment"> *   Length     Date   Time    Name</span></div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;<span class="comment"> *  --------    ----   ----    ----</span></div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;<span class="comment"> *    204372  09-06-09 14:23   decompress_unlzma.i</span></div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;<span class="comment"> *  --------                   -------</span></div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;<span class="comment"> *    204372                   1 files</span></div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="comment"> * # /usr/bin/unzip -l -qq decompress_unlzma.i.zip</span></div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;<span class="comment"> *    204372  09-06-09 14:23   decompress_unlzma.i</span></div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;<span class="comment"> * # /usr/bin/unzip -l -q decompress_unlzma.i.zip</span></div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;<span class="comment"> *   Length     Date   Time    Name</span></div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;<span class="comment"> *  --------    ----   ----    ----</span></div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;<span class="comment"> *    204372  09-06-09 14:23   decompress_unlzma.i</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;<span class="comment"> *  --------                   -------</span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;<span class="comment"> *    204372                   1 file</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;<span class="comment"> * # /usr/bin/unzip -l decompress_unlzma.i.zip</span></div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;<span class="comment"> * Archive:  decompress_unlzma.i.zip</span></div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;<span class="comment"> *   Length     Date   Time    Name</span></div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;<span class="comment"> *  --------    ----   ----    ----</span></div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="comment"> *    204372  09-06-09 14:23   decompress_unlzma.i</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="comment"> *  --------                   -------</span></div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;<span class="comment"> *    204372                   1 file</span></div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160; </div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    opts = 0;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    <span class="comment">/* &#39;-&#39; makes getopt return 1 for non-options */</span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <span class="keywordflow">while</span> ((<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> = <a class="code" href="../../d4/d31/musl_2include_2getopt_8h.html#acbd3b0584888b80a8e7f16d4d794eb2c">getopt</a>(<a class="code" href="../../d9/dd0/bash_2test_8c.html#ad1447518f4372828b8435ae82e48499e">argc</a>, <a class="code" href="../../d9/dd0/bash_2test_8c.html#af2efa898e9eed6fe6715279cb1ec35b0">argv</a>, <span class="stringliteral">&quot;-d:lnotpqxjvK&quot;</span>)) != -1) {</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        <span class="keywordflow">switch</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>) {</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;d&#39;</span>:  <span class="comment">/* Extract to base directory */</span></div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;            base_dir = <a class="code" href="../../d8/d50/rl_8c.html#adb50a0eab9fed92fc3bfc7dfa4f2c410">optarg</a>;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160; </div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;l&#39;</span>: <span class="comment">/* List */</span></div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;            opts |= <a class="code" href="../../d5/d87/nandwrite_8c.html#aa0a86f788bd9ec97c7ff91bff4dafe63">OPT_l</a>;</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160; </div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;n&#39;</span>: <span class="comment">/* Never overwrite existing files */</span></div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;            overwrite = O_NEVER;</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160; </div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;o&#39;</span>: <span class="comment">/* Always overwrite existing files */</span></div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;            overwrite = O_ALWAYS;</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160; </div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;t&#39;</span>: <span class="comment">/* Extract files to /dev/null */</span></div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;            <a class="code" href="../../d7/dd7/libbb_8h.html#ad480de907b2c37655e34b8aa0ee3f158">xmove_fd</a>(<a class="code" href="../../d7/dd7/libbb_8h.html#aa3e94e3ec137f40660b168c9f0840027">xopen</a>(<span class="stringliteral">&quot;/dev/null&quot;</span>, <a class="code" href="../../d1/d85/filesystem_8hpp.html#a11b644a8526139c4cc1850dac1271ced">O_WRONLY</a>), <a class="code" href="../../db/dad/Userspace_2musl_2include_2unistd_8h.html#abd165ee6474b5b75bf075842fff13a04">STDOUT_FILENO</a>);</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;            <span class="comment">/*fallthrough*/</span></div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160; </div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;p&#39;</span>: <span class="comment">/* Extract files to stdout */</span></div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;            dst_fd = <a class="code" href="../../db/dad/Userspace_2musl_2include_2unistd_8h.html#abd165ee6474b5b75bf075842fff13a04">STDOUT_FILENO</a>;</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;            <span class="comment">/*fallthrough*/</span></div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160; </div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;q&#39;</span>: <span class="comment">/* Be quiet */</span></div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;            quiet++;</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160; </div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;v&#39;</span>: <span class="comment">/* Verbose list */</span></div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;            IF_FEATURE_UNZIP_CDF(<a class="code" href="../../d1/de7/httpd_8c.html#afe0534ca994b08a0ec5edf614aa48e9c">verbose</a>++;)</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;            opts |= <a class="code" href="../../d5/d87/nandwrite_8c.html#aa0a86f788bd9ec97c7ff91bff4dafe63">OPT_l</a>;</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160; </div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;x&#39;</span>:</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;            opts |= <a class="code" href="../../d1/d08/mountpoint_8c.html#a86450ca8fb061c5ccf2dc56d8e38825d">OPT_x</a>;</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160; </div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;j&#39;</span>:</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;            opts |= <a class="code" href="../../d1/dac/od__bloaty_8c.html#a58562587eaf0c784eeac869888a97303a0f9b0c7d8f51d9ffaba812a83673086c">OPT_j</a>;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160; </div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;K&#39;</span>:</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;            opts |= <a class="code" href="../../d8/d6a/tcpudp_8c.html#a7cfee661bb838892b5f0feca7c0d5e46af845ba972eeee15878954faf92b03deb">OPT_K</a>;</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160; </div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;        <span class="keywordflow">case</span> 1:</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;            <span class="keywordflow">if</span> (!src_fn) {</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;                <span class="comment">/* The zip file */</span></div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;                <span class="comment">/* +5: space for &quot;.zip&quot; and NUL */</span></div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;                src_fn = <a class="code" href="../../db/d0a/tre_8h.html#a6af5faec3f9662b20ffc9903f923dec0">xmalloc</a>(<a class="code" href="../../d3/d5a/base_8h.html#a57cca470e9dd0a2807b6b1ff3ceda9bb">strlen</a>(<a class="code" href="../../d8/d50/rl_8c.html#adb50a0eab9fed92fc3bfc7dfa4f2c410">optarg</a>) + 5);</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;                <a class="code" href="../../d3/d82/convert_8h.html#a06688b0d2444199f657ccb56b0ce11b3">strcpy</a>(src_fn, <a class="code" href="../../d8/d50/rl_8c.html#adb50a0eab9fed92fc3bfc7dfa4f2c410">optarg</a>);</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!(opts &amp; <a class="code" href="../../d1/d08/mountpoint_8c.html#a86450ca8fb061c5ccf2dc56d8e38825d">OPT_x</a>)) {</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;                <span class="comment">/* Include files */</span></div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;                <a class="code" href="../../d7/dd7/libbb_8h.html#ac1428a8eb5f3de46969e7d3bfa8be3c3">llist_add_to</a>(&amp;zaccept, <a class="code" href="../../d8/d50/rl_8c.html#adb50a0eab9fed92fc3bfc7dfa4f2c410">optarg</a>);</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;                <span class="comment">/* Exclude files */</span></div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;                <a class="code" href="../../d7/dd7/libbb_8h.html#ac1428a8eb5f3de46969e7d3bfa8be3c3">llist_add_to</a>(&amp;zreject, <a class="code" href="../../d8/d50/rl_8c.html#adb50a0eab9fed92fc3bfc7dfa4f2c410">optarg</a>);</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;            }</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160; </div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;            <a class="code" href="../../d9/d65/individual_8c.html#a8323cea1cd613c0e2005086064a4b730">bb_show_usage</a>();</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;        }</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    }</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160; </div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;<span class="preprocessor">#ifndef __GLIBC__</span></div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;<span class="comment">     * This code is needed for non-GNU getopt</span></div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;<span class="comment">     * which doesn&#39;t understand &quot;-&quot; in option string.</span></div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;<span class="comment">     * The -x option won&#39;t work properly in this case:</span></div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;<span class="comment">     * &quot;unzip a.zip q -x w e&quot; will be interpreted as</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;<span class="comment">     * &quot;unzip a.zip q w e -x&quot; = &quot;unzip a.zip q w e&quot;</span></div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    <a class="code" href="../../d9/dd0/bash_2test_8c.html#af2efa898e9eed6fe6715279cb1ec35b0">argv</a> += <a class="code" href="../../d8/d50/rl_8c.html#ad5e1c16213bbee2d5e8cc363309f418c">optind</a>;</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d9/dd0/bash_2test_8c.html#af2efa898e9eed6fe6715279cb1ec35b0">argv</a>[0]) {</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;        <span class="comment">/* +5: space for &quot;.zip&quot; and NUL */</span></div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;        src_fn = <a class="code" href="../../db/d0a/tre_8h.html#a6af5faec3f9662b20ffc9903f923dec0">xmalloc</a>(<a class="code" href="../../d3/d5a/base_8h.html#a57cca470e9dd0a2807b6b1ff3ceda9bb">strlen</a>(<a class="code" href="../../d9/dd0/bash_2test_8c.html#af2efa898e9eed6fe6715279cb1ec35b0">argv</a>[0]) + 5);</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;        <a class="code" href="../../d3/d82/convert_8h.html#a06688b0d2444199f657ccb56b0ce11b3">strcpy</a>(src_fn, <a class="code" href="../../d9/dd0/bash_2test_8c.html#af2efa898e9eed6fe6715279cb1ec35b0">argv</a>[0]);</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;        <span class="keywordflow">while</span> (*++<a class="code" href="../../d9/dd0/bash_2test_8c.html#af2efa898e9eed6fe6715279cb1ec35b0">argv</a>)</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;            <a class="code" href="../../d7/dd7/libbb_8h.html#ac1428a8eb5f3de46969e7d3bfa8be3c3">llist_add_to</a>(&amp;zaccept, *<a class="code" href="../../d9/dd0/bash_2test_8c.html#af2efa898e9eed6fe6715279cb1ec35b0">argv</a>);</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    }</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160; </div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    <span class="keywordflow">if</span> (!src_fn) {</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;        <a class="code" href="../../d9/d65/individual_8c.html#a8323cea1cd613c0e2005086064a4b730">bb_show_usage</a>();</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    }</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160; </div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    <span class="comment">/* Open input file */</span></div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d7/dd7/libbb_8h.html#ae3c705adc31efb61b8a23829e028028e">LONE_DASH</a>(src_fn)) {</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;        <a class="code" href="../../d7/dd7/libbb_8h.html#aabff0b84c2d301250b6f676d86871aaf">xdup2</a>(<a class="code" href="../../d6/d4f/excallback_8c.html#afcf80a6d91178952d107ad00b165752b">STDIN_FILENO</a>, <a class="code" href="../../d6/da7/unzip_8c.html#a2c4e2be2550d52c8ccdfca737ac675d2ac5d1c375f88d748cd917127ae9f0ed0a">zip_fd</a>);</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;        <span class="comment">/* Cannot use prompt mode since zip data is arriving on STDIN */</span></div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;        <span class="keywordflow">if</span> (overwrite == O_PROMPT)</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;            overwrite = O_NEVER;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;        <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> extn[][5] <a class="code" href="../../d2/d21/usage__pod_8c.html#a048289fa87432e63cfa9a627c94be27c">ALIGN1</a> = { <span class="stringliteral">&quot;.zip&quot;</span>, <span class="stringliteral">&quot;.ZIP&quot;</span> };</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;        <span class="keywordtype">char</span> *ext = src_fn + <a class="code" href="../../d3/d5a/base_8h.html#a57cca470e9dd0a2807b6b1ff3ceda9bb">strlen</a>(src_fn);</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;        <span class="keywordtype">int</span> src_fd;</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160; </div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;        <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> = 0;</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;        <span class="keywordflow">for</span> (;;) {</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;            src_fd = <a class="code" href="../../d2/d44/musl_2include_2fcntl_8h.html#aa138ddaa9bbe8b8ccca32ed43e75b72c">open</a>(src_fn, <a class="code" href="../../d1/d85/filesystem_8hpp.html#a7a68c9ffaac7dbcd652225dd7c06a54b">O_RDONLY</a>);</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;            <span class="keywordflow">if</span> (src_fd &gt;= 0)</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;            <span class="keywordflow">if</span> (++<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> &gt; 2) {</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;                *ext = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;                <a class="code" href="../../d7/dd7/libbb_8h.html#a1992b68ae7d01f7da91e31e351ca3b33">bb_error_msg_and_die</a>(<span class="stringliteral">&quot;can&#39;t open %s[.zip]&quot;</span>,</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;                    src_fn</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;                );</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;            }</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;            <a class="code" href="../../d3/d82/convert_8h.html#a06688b0d2444199f657ccb56b0ce11b3">strcpy</a>(ext, extn[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> - 1]);</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;        }</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;        <a class="code" href="../../d7/dd7/libbb_8h.html#ad480de907b2c37655e34b8aa0ee3f158">xmove_fd</a>(src_fd, <a class="code" href="../../d6/da7/unzip_8c.html#a2c4e2be2550d52c8ccdfca737ac675d2ac5d1c375f88d748cd917127ae9f0ed0a">zip_fd</a>);</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    }</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160; </div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    <span class="comment">/* Change dir if necessary */</span></div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    <span class="keywordflow">if</span> (base_dir) {</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;        <span class="comment">/* -p DIR: try to create, errors don&#39;t matter.</span></div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;<span class="comment">         * UnZip 6.00 does no multi-level mkdir (-p DIR1/DIR2 syntax),</span></div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;<span class="comment">         * not using bb_make_directory() here (yet?)</span></div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;        <a class="code" href="../../d2/d5c/Userspace_2libc_2include_2sys_2stat_8h.html#a548e5b744ca2e97beb61ad7aa41114e2">mkdir</a>(base_dir, 0777);</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;        <a class="code" href="../../d7/dd7/libbb_8h.html#a31cfbfe02fa96c10d92748f7830b0624">xchdir</a>(base_dir);</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    }</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160; </div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    <span class="keywordflow">if</span> (quiet &lt;= 1) { <span class="comment">/* not -qq */</span></div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;        <span class="keywordflow">if</span> (quiet == 0) {</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;            <a class="code" href="../../d5/ddb/Kernel_2core_2memory_2heap__allocators_2liballoc__1__1_2liballoc__1__1_8c.html#ae34a762828cbff7cce62bda6571b2bc0">printf</a>(<span class="stringliteral">&quot;Archive:  %s\n&quot;</span>,</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;                <a class="code" href="../../d7/dd7/libbb_8h.html#a19de965ba99b29e5a6c2e921b86f1134">printable_string</a>(src_fn)</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;            );</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;        }</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;        <span class="keywordflow">if</span> (opts &amp; <a class="code" href="../../d5/d87/nandwrite_8c.html#aa0a86f788bd9ec97c7ff91bff4dafe63">OPT_l</a>) {</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;            <a class="code" href="../../dd/d69/Userspace_2libc_2include_2stdio_8h.html#ad41876f99f190c7488e64ef39c50a23f">puts</a>(<a class="code" href="../../d1/de7/httpd_8c.html#afe0534ca994b08a0ec5edf614aa48e9c">verbose</a> ?</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;                <span class="stringliteral">&quot; Length   Method    Size  Cmpr    Date    Time   CRC-32   Name\n&quot;</span></div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;                <span class="stringliteral">&quot;--------  ------  ------- ---- ---------- ----- --------  ----&quot;</span></div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;                :</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;                <span class="stringliteral">&quot;  Length      Date    Time    Name\n&quot;</span></div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;                <span class="stringliteral">&quot;---------  ---------- -----   ----&quot;</span></div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;                );</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;        }</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    }</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160; </div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;<span class="comment">/* Example of an archive with one 0-byte long file named &#39;z&#39;</span></div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;<span class="comment"> * created by Zip 2.31 on Unix:</span></div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;<span class="comment"> * 0000 [50 4b]03 04 0a 00 00 00 00 00 42 1a b8 3c 00 00 |PK........B..&lt;..|</span></div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;<span class="comment"> *       sig........ vneed flags compr mtime mdate crc32&gt;</span></div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;<span class="comment"> * 0010  00 00 00 00 00 00 00 00 00 00 01 00 15 00 7a 55 |..............zU|</span></div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;<span class="comment"> *      &gt;..... csize...... usize...... fnlen exlen fn ex&gt;</span></div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;<span class="comment"> * 0020  54 09 00 03 cc d3 f9 4b cc d3 f9 4b 55 78 04 00 |T......K...KUx..|</span></div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;<span class="comment"> *      &gt;tra_field......................................</span></div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;<span class="comment"> * 0030  00 00 00 00[50 4b]01 02 17 03 0a 00 00 00 00 00 |....PK..........|</span></div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;<span class="comment"> *       ........... sig........ vmade vneed flags compr</span></div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;<span class="comment"> * 0040  42 1a b8 3c 00 00 00 00 00 00 00 00 00 00 00 00 |B..&lt;............|</span></div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;<span class="comment"> *       mtime mdate crc32...... csize...... usize......</span></div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;<span class="comment"> * 0050  01 00 0d 00 00 00 00 00 00 00 00 00 a4 81 00 00 |................|</span></div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;<span class="comment"> *       fnlen exlen clen. dnum. iattr eattr...... relofs&gt; (eattr = rw-r--r--)</span></div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;<span class="comment"> * 0060  00 00 7a 55 54 05 00 03 cc d3 f9 4b 55 78 00 00 |..zUT......KUx..|</span></div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;<span class="comment"> *      &gt;..... fn extra_field...........................</span></div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;<span class="comment"> * 0070 [50 4b]05 06 00 00 00 00 01 00 01 00 3c 00 00 00 |PK..........&lt;...|</span></div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;<span class="comment"> * 0080  34 00 00 00 00 00                               |4.....|</span></div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    total_usize = 0;</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    total_size = 0;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    total_entries = 0;</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    cdf_offset = <a class="code" href="../../d6/da7/unzip_8c.html#a17bed8eb757cdeef77953e2d67656622">find_cdf_offset</a>(); <span class="comment">/* try to seek to the end, find CDE and CDF start */</span></div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    <span class="keywordflow">while</span> (1) {</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;        <a class="code" href="../../d6/da7/unzip_8c.html#de/de3/unionzip__header__t">zip_header_t</a> <a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>;</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;        <a class="code" href="../../d4/dba/Drivers_2include_2types_8h.html#a4c39e0c5c2965112d6b55652a6b7f781">mode_t</a> dir_mode = 0777;</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;<span class="preprocessor">#if ENABLE_FEATURE_UNZIP_CDF</span></div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;        <a class="code" href="../../d4/dba/Drivers_2include_2types_8h.html#a4c39e0c5c2965112d6b55652a6b7f781">mode_t</a> file_mode = 0666;</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160; </div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;        <span class="keywordflow">if</span> (!ENABLE_FEATURE_UNZIP_CDF || cdf_offset == <a class="code" href="../../d6/da7/unzip_8c.html#a3191226e15f98abba647c064e58cfeba">BAD_CDF_OFFSET</a>) {</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;            <span class="comment">/* Normally happens when input is unseekable.</span></div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;<span class="comment">             *</span></div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;<span class="comment">             * Valid ZIP file has Central Directory at the end</span></div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;<span class="comment">             * with central directory file headers (CDFs).</span></div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;<span class="comment">             * After it, there is a Central Directory End structure.</span></div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;<span class="comment">             * CDFs identify what files are in the ZIP and where</span></div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;<span class="comment">             * they are located. This allows ZIP readers to load</span></div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;<span class="comment">             * the list of files without reading the entire ZIP archive.</span></div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;<span class="comment">             * ZIP files may be appended to, only files specified in</span></div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;<span class="comment">             * the CD are valid. Scanning for local file headers is</span></div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;<span class="comment">             * not a correct algorithm.</span></div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;<span class="comment">             *</span></div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;<span class="comment">             * We try to do the above, and resort to &quot;linear&quot; reading</span></div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;<span class="comment">             * of ZIP file only if seek failed or CDE wasn&#39;t found.</span></div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;<span class="comment">             */</span></div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;            <a class="code" href="../../dd/ddd/arithmetic__operations_8c.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> magic;</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160; </div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;            <span class="comment">/* Check magic number */</span></div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;            <a class="code" href="../../d7/dd7/libbb_8h.html#a99555f16e71f93f23622a8cce1265a5b">xread</a>(<a class="code" href="../../d6/da7/unzip_8c.html#a2c4e2be2550d52c8ccdfca737ac675d2ac5d1c375f88d748cd917127ae9f0ed0a">zip_fd</a>, &amp;magic, 4);</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;            <span class="comment">/* CDF item? Assume there are no more files, exit */</span></div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;            <span class="keywordflow">if</span> (magic == <a class="code" href="../../d6/da7/unzip_8c.html#a5bbe8448fe1109247a34da39af35c5feab4248e71f9a00c5383d314a30d58a735">ZIP_CDF_MAGIC</a>) {</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;                <a class="code" href="../../d6/da7/unzip_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;got ZIP_CDF_MAGIC&quot;</span>);</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;            }</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;            <span class="comment">/* Data descriptor? It was a streaming file, go on */</span></div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;            <span class="keywordflow">if</span> (magic == <a class="code" href="../../d6/da7/unzip_8c.html#a5bbe8448fe1109247a34da39af35c5fea5e01fbd5aed2d55dcf0603f80d8bbf4b">ZIP_DD_MAGIC</a>) {</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;                <a class="code" href="../../d6/da7/unzip_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;got ZIP_DD_MAGIC&quot;</span>);</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;                <span class="comment">/* skip over duplicate crc32, cmpsize and ucmpsize */</span></div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;                <a class="code" href="../../d6/da7/unzip_8c.html#a6af16d7efc8712ea1e9009e9c4939ce9">unzip_skip</a>(3 * 4);</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;            }</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;            <span class="keywordflow">if</span> (magic != <a class="code" href="../../d6/da7/unzip_8c.html#a5bbe8448fe1109247a34da39af35c5fea6938ecb1b43b5af26f578a062ba4e3e4">ZIP_FILEHEADER_MAGIC</a>)</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;                <a class="code" href="../../d7/dd7/libbb_8h.html#a1992b68ae7d01f7da91e31e351ca3b33">bb_error_msg_and_die</a>(<span class="stringliteral">&quot;invalid zip magic %08X&quot;</span>, (<span class="keywordtype">int</span>)magic);</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;            <a class="code" href="../../d6/da7/unzip_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;got ZIP_FILEHEADER_MAGIC&quot;</span>);</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160; </div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;            <a class="code" href="../../d7/dd7/libbb_8h.html#a99555f16e71f93f23622a8cce1265a5b">xread</a>(<a class="code" href="../../d6/da7/unzip_8c.html#a2c4e2be2550d52c8ccdfca737ac675d2ac5d1c375f88d748cd917127ae9f0ed0a">zip_fd</a>, <a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>.raw, <a class="code" href="../../d6/da7/unzip_8c.html#abcfbf62120411c95b230af50a8f69400">ZIP_HEADER_LEN</a>);</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;            <a class="code" href="../../d6/da7/unzip_8c.html#ac29f2b46f9cd80e3eca73751d0f74cff">FIX_ENDIANNESS_ZIP</a>(<a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>);</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>.fmt.zip_flags &amp; <a class="code" href="../../de/d03/platform_8h.html#a446b1e303411b0b2f6846315015ba096">SWAP_LE16</a>(0x0008)) {</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;                <a class="code" href="../../d7/dd7/libbb_8h.html#a1992b68ae7d01f7da91e31e351ca3b33">bb_error_msg_and_die</a>(<span class="stringliteral">&quot;zip flag %s is not supported&quot;</span>,</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;                    <span class="stringliteral">&quot;8 (streaming)&quot;</span>);</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;            }</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;        }</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;<span class="preprocessor">#if ENABLE_FEATURE_UNZIP_CDF</span></div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;        <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;            <span class="comment">/* cdf_offset is valid (and we know the file is seekable) */</span></div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;            <a class="code" href="../../d6/da7/unzip_8c.html#dc/d5c/unioncdf__header__t">cdf_header_t</a> cdf;</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;            cdf_offset = read_next_cdf(cdf_offset, &amp;cdf);</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;            <span class="keywordflow">if</span> (cdf_offset == 0) <span class="comment">/* EOF? */</span></div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;<span class="preprocessor"># if 1</span></div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;            <a class="code" href="../../d7/dd7/libbb_8h.html#a5177068c77d2dc439e0aa92b4ba6e09e">xlseek</a>(<a class="code" href="../../d6/da7/unzip_8c.html#a2c4e2be2550d52c8ccdfca737ac675d2ac5d1c375f88d748cd917127ae9f0ed0a">zip_fd</a>,</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;                <a class="code" href="../../de/d03/platform_8h.html#a3154d0c2e8d9f1dd3410e9408cad21a2">SWAP_LE32</a>(cdf.fmt.relative_offset_of_local_header) + 4,</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;                <a class="code" href="../../d1/d85/filesystem_8hpp.html#a0d112bae8fd35be772185b6ec6bcbe64">SEEK_SET</a>);</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;            <a class="code" href="../../d7/dd7/libbb_8h.html#a99555f16e71f93f23622a8cce1265a5b">xread</a>(<a class="code" href="../../d6/da7/unzip_8c.html#a2c4e2be2550d52c8ccdfca737ac675d2ac5d1c375f88d748cd917127ae9f0ed0a">zip_fd</a>, <a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>.raw, <a class="code" href="../../d6/da7/unzip_8c.html#abcfbf62120411c95b230af50a8f69400">ZIP_HEADER_LEN</a>);</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;            <a class="code" href="../../d6/da7/unzip_8c.html#ac29f2b46f9cd80e3eca73751d0f74cff">FIX_ENDIANNESS_ZIP</a>(<a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>);</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>.fmt.zip_flags &amp; <a class="code" href="../../de/d03/platform_8h.html#a446b1e303411b0b2f6846315015ba096">SWAP_LE16</a>(0x0008)) {</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;                <span class="comment">/* 0x0008 - streaming. [u]cmpsize can be reliably gotten</span></div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;<span class="comment">                 * only from Central Directory.</span></div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;<span class="comment">                 */</span></div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;                <a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>.fmt.crc32    = cdf.fmt.crc32;</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;                <a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>.fmt.cmpsize  = cdf.fmt.cmpsize;</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;                <a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>.fmt.ucmpsize = cdf.fmt.ucmpsize;</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;            }</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;<span class="comment">// Seen in some zipfiles: central directory 9 byte extra field contains</span></div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;<span class="comment">// a subfield with ID 0x5455 and 5 data bytes, which is a Unix-style UTC mtime.</span></div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;<span class="comment">// Local header version:</span></div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;<span class="comment">//  u16 0x5455 (&quot;UT&quot;)</span></div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;<span class="comment">//  u16 size (1 + 4 * n)</span></div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;<span class="comment">//  u8  flags: bit 0:mtime is present, bit 1:atime is present, bit 2:ctime is present</span></div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;<span class="comment">//  u32 mtime</span></div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;<span class="comment">//  u32 atime</span></div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;<span class="comment">//  u32 ctime</span></div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;<span class="comment">// Central header version:</span></div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;<span class="comment">//  u16 0x5455 (&quot;UT&quot;)</span></div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;<span class="comment">//  u16 size (5 (or 1?))</span></div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;<span class="comment">//  u8  flags: bit 0:mtime is present, bit 1:atime is present, bit 2:ctime is present</span></div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;<span class="comment">//  u32 mtime (CDF does not store atime/ctime)</span></div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;<span class="preprocessor"># else</span></div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;            <span class="comment">/* CDF has the same data as local header, no need to read the latter...</span></div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;<span class="comment">             * ...not really. An archive was seen with cdf.extra_len == 6 but</span></div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;<span class="comment">             * zip.extra_len == 0.</span></div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;<span class="comment">             */</span></div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;            <a class="code" href="../../d3/d82/convert_8h.html#a309e07aa23e76adc2ad0830978663c45">memcpy</a>(&amp;<a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>.fmt.version,</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;                &amp;cdf.fmt.version_needed, <a class="code" href="../../d6/da7/unzip_8c.html#abcfbf62120411c95b230af50a8f69400">ZIP_HEADER_LEN</a>);</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;            <a class="code" href="../../d7/dd7/libbb_8h.html#a5177068c77d2dc439e0aa92b4ba6e09e">xlseek</a>(<a class="code" href="../../d6/da7/unzip_8c.html#a2c4e2be2550d52c8ccdfca737ac675d2ac5d1c375f88d748cd917127ae9f0ed0a">zip_fd</a>,</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;                <a class="code" href="../../de/d03/platform_8h.html#a3154d0c2e8d9f1dd3410e9408cad21a2">SWAP_LE32</a>(cdf.fmt.relative_offset_of_local_header) + 4 + <a class="code" href="../../d6/da7/unzip_8c.html#abcfbf62120411c95b230af50a8f69400">ZIP_HEADER_LEN</a>,</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;                <a class="code" href="../../d1/d85/filesystem_8hpp.html#a0d112bae8fd35be772185b6ec6bcbe64">SEEK_SET</a>);</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;<span class="preprocessor"># endif</span></div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;            <span class="keywordflow">if</span> ((cdf.fmt.version_made_by &gt;&gt; 8) == 3) {</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;                <span class="comment">/* This archive is created on Unix */</span></div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;                file_mode = (cdf.fmt.external_attributes &gt;&gt; 16);</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;                <span class="keywordflow">if</span> (!(opts &amp; <a class="code" href="../../d8/d6a/tcpudp_8c.html#a7cfee661bb838892b5f0feca7c0d5e46af845ba972eeee15878954faf92b03deb">OPT_K</a>))</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;                    file_mode &amp;= ~(<a class="code" href="../../d4/dba/Drivers_2include_2types_8h.html#a4c39e0c5c2965112d6b55652a6b7f781">mode_t</a>)(<a class="code" href="../../d2/d44/musl_2include_2fcntl_8h.html#a30384a8cd2feb1615efd5eadc243684b">S_ISUID</a> | <a class="code" href="../../d2/d44/musl_2include_2fcntl_8h.html#a9c9e4cc0a8acc43c99ae6c3d972ae2d8">S_ISGID</a>);</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;                dir_mode = file_mode;</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;            }</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;        }</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160; </div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>.fmt.zip_flags &amp; <a class="code" href="../../de/d03/platform_8h.html#a446b1e303411b0b2f6846315015ba096">SWAP_LE16</a>(0x0001)) {</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;            <span class="comment">/* 0x0001 - encrypted */</span></div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;            <a class="code" href="../../d7/dd7/libbb_8h.html#a1992b68ae7d01f7da91e31e351ca3b33">bb_error_msg_and_die</a>(<span class="stringliteral">&quot;zip flag %s is not supported&quot;</span>,</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;                    <span class="stringliteral">&quot;1 (encryption)&quot;</span>);</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;        }</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;        <a class="code" href="../../d6/da7/unzip_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a>(<span class="stringliteral">&quot;File cmpsize:0x%x extra_len:0x%x ucmpsize:0x%x&quot;</span>,</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;            (<span class="keywordtype">unsigned</span>)<a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>.fmt.cmpsize,</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;            (<span class="keywordtype">unsigned</span>)<a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>.fmt.extra_len,</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;            (<span class="keywordtype">unsigned</span>)<a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>.fmt.ucmpsize</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;        );</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160; </div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;        <span class="comment">/* Read filename */</span></div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;        <a class="code" href="../../d5/db0/dynlink_8c.html#a2c6efa7679f8cd9f61af96e105017560">free</a>(dst_fn);</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;        <a class="code" href="../../d6/da7/unzip_8c.html#a11c04263f55bfdbc7ab2a6d5a665a223">die_if_bad_fnamesize</a>(<a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>.fmt.filename_len);</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;        dst_fn = <a class="code" href="../../d7/dd7/libbb_8h.html#a6b9d12af476b8fa4b9de87028b0ac27c">xzalloc</a>(<a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>.fmt.filename_len + 1);</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;        <a class="code" href="../../d7/dd7/libbb_8h.html#a99555f16e71f93f23622a8cce1265a5b">xread</a>(<a class="code" href="../../d6/da7/unzip_8c.html#a2c4e2be2550d52c8ccdfca737ac675d2ac5d1c375f88d748cd917127ae9f0ed0a">zip_fd</a>, dst_fn, <a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>.fmt.filename_len);</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;        <span class="comment">/* Skip extra header bytes */</span></div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;        <a class="code" href="../../d6/da7/unzip_8c.html#a6af16d7efc8712ea1e9009e9c4939ce9">unzip_skip</a>(<a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>.fmt.extra_len);</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160; </div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;        <span class="comment">/* Guard against &quot;/abspath&quot;, &quot;/../&quot; and similar attacks */</span></div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;        <a class="code" href="../../d7/dd7/libbb_8h.html#a9f80115b3cb2f6290449fa0b62fee8ba">overlapping_strcpy</a>(dst_fn, <a class="code" href="../../d3/d19/unsafe__prefix_8c.html#aa8a644aeffa1306a2c14c1ac658cfbc8">strip_unsafe_prefix</a>(dst_fn));</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160; </div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;        <span class="comment">/* Filter zip entries */</span></div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d8/dcb/find__list__entry_8c.html#aec467591340af67ed8cb3428a837a97a">find_list_entry</a>(zreject, dst_fn)</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;         || (zaccept &amp;&amp; !<a class="code" href="../../d8/dcb/find__list__entry_8c.html#aec467591340af67ed8cb3428a837a97a">find_list_entry</a>(zaccept, dst_fn))</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;        ) { <span class="comment">/* Skip entry */</span></div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;            <span class="keywordflow">goto</span> skip_cmpsize;</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;        }</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160; </div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;        <span class="keywordflow">if</span> (opts &amp; <a class="code" href="../../d5/d87/nandwrite_8c.html#aa0a86f788bd9ec97c7ff91bff4dafe63">OPT_l</a>) {</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;            <span class="comment">/* List entry */</span></div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;            <span class="keywordtype">char</span> dtbuf[<span class="keyword">sizeof</span>(<span class="stringliteral">&quot;mm-dd-yyyy hh:mm&quot;</span>)];</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;            <a class="code" href="../../dc/df9/Kernel_2include_2printf_8h.html#a77dac04ed12a16543832b623c7778729">sprintf</a>(dtbuf, <span class="stringliteral">&quot;%02u-%02u-%04u %02u:%02u&quot;</span>,</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;                (<a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>.fmt.moddate &gt;&gt; 5) &amp; 0xf,  <span class="comment">// mm: 0x01e0</span></div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;                (<a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>.fmt.moddate)      &amp; 0x1f, <span class="comment">// dd: 0x001f</span></div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;                (<a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>.fmt.moddate &gt;&gt; 9) + 1980, <span class="comment">// yy: 0xfe00</span></div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;                (<a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>.fmt.modtime &gt;&gt; 11),       <span class="comment">// hh: 0xf800</span></div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;                (<a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>.fmt.modtime &gt;&gt; 5) &amp; 0x3f  <span class="comment">// mm: 0x07e0</span></div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;                <span class="comment">// seconds/2 not shown, encoded in -- 0x001f</span></div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;            );</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="../../d1/de7/httpd_8c.html#afe0534ca994b08a0ec5edf614aa48e9c">verbose</a>) {</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;                <span class="comment">//      &quot;  Length      Date    Time    Name\n&quot;</span></div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;                <span class="comment">//      &quot;---------  ---------- -----   ----&quot;</span></div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;                <a class="code" href="../../d5/ddb/Kernel_2core_2memory_2heap__allocators_2liballoc__1__1_2liballoc__1__1_8c.html#ae34a762828cbff7cce62bda6571b2bc0">printf</a>(       <span class="stringliteral">&quot;%9u  &quot;</span> <span class="stringliteral">&quot;%s   &quot;</span>         <span class="stringliteral">&quot;%s\n&quot;</span>,</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;                    (<span class="keywordtype">unsigned</span>)<a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>.fmt.ucmpsize,</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;                    dtbuf,</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;                    <a class="code" href="../../d7/dd7/libbb_8h.html#a19de965ba99b29e5a6c2e921b86f1134">printable_string</a>(dst_fn)</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;                );</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;                <span class="keywordtype">char</span> method6[7];</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;                <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> percents;</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160; </div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;                <a class="code" href="../../dc/df9/Kernel_2include_2printf_8h.html#a77dac04ed12a16543832b623c7778729">sprintf</a>(method6, <span class="stringliteral">&quot;%6u&quot;</span>, <a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>.fmt.method);</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>.fmt.method == 0) {</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;                    <a class="code" href="../../d3/d82/convert_8h.html#a06688b0d2444199f657ccb56b0ce11b3">strcpy</a>(method6, <span class="stringliteral">&quot;Stored&quot;</span>);</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;                }</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>.fmt.method == 8) {</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;                    <a class="code" href="../../d3/d82/convert_8h.html#a06688b0d2444199f657ccb56b0ce11b3">strcpy</a>(method6, <span class="stringliteral">&quot;Defl:N&quot;</span>);</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;                    <span class="comment">/* normal, maximum, fast, superfast */</span></div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;                    <a class="code" href="../../d2/ddb/bzip2_8c.html#a0bf525753bdf2da2e545f683843a7891">IF_DESKTOP</a>(method6[5] = <span class="stringliteral">&quot;NXFS&quot;</span>[(<a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>.fmt.zip_flags &gt;&gt; 1) &amp; 3];)</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;                }</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;                percents = <a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>.fmt.ucmpsize - <a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>.fmt.cmpsize;</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;                <span class="keywordflow">if</span> ((<a class="code" href="../../d0/df4/Kernel_2include_2types_8h.html#a0c18914b3041c2f583aba76f418399c2">int32_t</a>)percents &lt; 0)</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;                    percents = 0; <span class="comment">/* happens if ucmpsize &lt; cmpsize */</span></div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;                percents = percents * 100;</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>.fmt.ucmpsize)</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;                    percents /= <a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>.fmt.ucmpsize;</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;                <span class="comment">//      &quot; Length   Method    Size  Cmpr    Date    Time   CRC-32   Name\n&quot;</span></div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;                <span class="comment">//      &quot;--------  ------  ------- ---- ---------- ----- --------  ----&quot;</span></div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;                <a class="code" href="../../d5/ddb/Kernel_2core_2memory_2heap__allocators_2liballoc__1__1_2liballoc__1__1_8c.html#ae34a762828cbff7cce62bda6571b2bc0">printf</a>(      <span class="stringliteral">&quot;%8u  %s&quot;</span>        <span class="stringliteral">&quot;%9u%4u%% &quot;</span> <span class="stringliteral">&quot;%s &quot;</span>         <span class="stringliteral">&quot;%08x  &quot;</span>  <span class="stringliteral">&quot;%s\n&quot;</span>,</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;                    (<span class="keywordtype">unsigned</span>)<a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>.fmt.ucmpsize,</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;                    method6,</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;                    (<span class="keywordtype">unsigned</span>)<a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>.fmt.cmpsize,</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;                    (<span class="keywordtype">unsigned</span>)percents,</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;                    dtbuf,</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;                    <a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>.fmt.crc32,</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;                    <a class="code" href="../../d7/dd7/libbb_8h.html#a19de965ba99b29e5a6c2e921b86f1134">printable_string</a>(dst_fn)</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;                );</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;                total_size += <a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>.fmt.cmpsize;</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;            }</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;            total_usize += <a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>.fmt.ucmpsize;</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;            <span class="keywordflow">goto</span> skip_cmpsize;</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;        }</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160; </div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;        <span class="keywordflow">if</span> (dst_fd == <a class="code" href="../../db/dad/Userspace_2musl_2include_2unistd_8h.html#abd165ee6474b5b75bf075842fff13a04">STDOUT_FILENO</a>) {</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;            <span class="comment">/* Extracting to STDOUT */</span></div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;            <span class="keywordflow">goto</span> do_extract;</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;        }</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160; </div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;        <span class="comment">/* Strip paths (after -l: unzip -lj a.zip lists full names) */</span></div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;        <span class="keywordflow">if</span> (opts &amp; <a class="code" href="../../d1/dac/od__bloaty_8c.html#a58562587eaf0c784eeac869888a97303a0f9b0c7d8f51d9ffaba812a83673086c">OPT_j</a>)</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;            <a class="code" href="../../d7/dd7/libbb_8h.html#a9f80115b3cb2f6290449fa0b62fee8ba">overlapping_strcpy</a>(dst_fn, <a class="code" href="../../d7/dd7/libbb_8h.html#ae08d0a76a2c4bbeda2dbe9491d857bd6">bb_basename</a>(dst_fn));</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;        <span class="comment">/* Did this strip everything (&quot;DIR/&quot; case)? Then skip */</span></div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;        <span class="keywordflow">if</span> (!dst_fn[0])</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;            <span class="keywordflow">goto</span> skip_cmpsize;</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160; </div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d7/dd7/libbb_8h.html#a1ca30613255c7ecb6c80159b4eeb6d13">last_char_is</a>(dst_fn, <span class="charliteral">&#39;/&#39;</span>)) {</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;            <span class="keywordtype">int</span> mode;</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160; </div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;            <span class="comment">/* Extract directory */</span></div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;            mode = <a class="code" href="../../d6/da7/unzip_8c.html#aafcf719d11c3d3b4e077e4955af3ba30">get_lstat_mode</a>(dst_fn);</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;            <span class="keywordflow">if</span> (mode == -1) { <span class="comment">/* ENOENT */</span></div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;                <span class="keywordflow">if</span> (!quiet) {</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;                    <a class="code" href="../../d5/ddb/Kernel_2core_2memory_2heap__allocators_2liballoc__1__1_2liballoc__1__1_8c.html#ae34a762828cbff7cce62bda6571b2bc0">printf</a>(<span class="stringliteral">&quot;   creating: %s\n&quot;</span>, <a class="code" href="../../d7/dd7/libbb_8h.html#a19de965ba99b29e5a6c2e921b86f1134">printable_string</a>(dst_fn));</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;                }</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;                <a class="code" href="../../d6/da7/unzip_8c.html#aff8e343da65f840a4bf77846567426be">unzip_create_leading_dirs</a>(dst_fn);</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../d7/dd7/libbb_8h.html#ab3f99a71d530e3ef3d85df861cc3979f">bb_make_directory</a>(dst_fn, dir_mode, <a class="code" href="../../d7/dd7/libbb_8h.html#a2763d34240a976ef812fed988f944d41ac1450b06c0ff0cafcfba04d2b9eb63eb">FILEUTILS_IGNORE_CHMOD_ERR</a>)) {</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;                    <a class="code" href="../../d7/dd7/libbb_8h.html#a94a607b4c69c9d6883ee67ee8d46aec4">xfunc_die</a>();</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;                }</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="../../d1/d85/filesystem_8hpp.html#a3746cdc5aac871e6f6504fbcbd29ef1d">S_ISDIR</a>(mode)) {</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;                    <a class="code" href="../../d7/dd7/libbb_8h.html#a1992b68ae7d01f7da91e31e351ca3b33">bb_error_msg_and_die</a>(<span class="stringliteral">&quot;&#39;%s&#39; exists but is not a %s&quot;</span>,</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;                        <a class="code" href="../../d7/dd7/libbb_8h.html#a19de965ba99b29e5a6c2e921b86f1134">printable_string</a>(dst_fn),</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;                        <span class="stringliteral">&quot;directory&quot;</span></div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;                    );</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;                }</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;            }</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;            <span class="keywordflow">goto</span> skip_cmpsize;</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;        }</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160; <a class="code" href="../../dc/d72/fsck__minix_8c.html#a90cc07b143cc00b7dbf4d05dcbc580c4">check_file</a>:</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;        <span class="comment">/* Does target file already exist? */</span></div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;        {</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;            <span class="keywordtype">int</span> mode = <a class="code" href="../../d6/da7/unzip_8c.html#aafcf719d11c3d3b4e077e4955af3ba30">get_lstat_mode</a>(dst_fn);</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;            <span class="keywordflow">if</span> (mode == -1) {</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;                <span class="comment">/* ENOENT: does not exist */</span></div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;                <span class="keywordflow">goto</span> do_open_and_extract;</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;            }</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;            <span class="keywordflow">if</span> (overwrite == O_NEVER) {</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;                <span class="keywordflow">goto</span> skip_cmpsize;</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;            }</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="../../d1/d85/filesystem_8hpp.html#aad0f32c2c182238f2ff71c83e6ab65a0">S_ISREG</a>(mode)) {</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160; fishy:</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;                <a class="code" href="../../d7/dd7/libbb_8h.html#a1992b68ae7d01f7da91e31e351ca3b33">bb_error_msg_and_die</a>(<span class="stringliteral">&quot;&#39;%s&#39; exists but is not a %s&quot;</span>,</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;                    <a class="code" href="../../d7/dd7/libbb_8h.html#a19de965ba99b29e5a6c2e921b86f1134">printable_string</a>(dst_fn),</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;                    <span class="stringliteral">&quot;regular file&quot;</span></div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;                );</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;            }</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;            <span class="keywordflow">if</span> (overwrite == O_ALWAYS) {</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;                <span class="keywordflow">goto</span> do_open_and_extract;</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;            }</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;            <a class="code" href="../../d5/ddb/Kernel_2core_2memory_2heap__allocators_2liballoc__1__1_2liballoc__1__1_8c.html#ae34a762828cbff7cce62bda6571b2bc0">printf</a>(<span class="stringliteral">&quot;replace %s? [y]es, [n]o, [A]ll, [N]one, [r]ename: &quot;</span>,</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;                <a class="code" href="../../d7/dd7/libbb_8h.html#a19de965ba99b29e5a6c2e921b86f1134">printable_string</a>(dst_fn)</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;            );</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;            <a class="code" href="../../d6/da7/unzip_8c.html#a107380b3c0b625c0d01447586a797628">my_fgets80</a>(key_buf);</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;            <span class="comment">/* User input could take a long time. Is it still a regular file? */</span></div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;            mode = <a class="code" href="../../d6/da7/unzip_8c.html#aafcf719d11c3d3b4e077e4955af3ba30">get_lstat_mode</a>(dst_fn);</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="../../d1/d85/filesystem_8hpp.html#aad0f32c2c182238f2ff71c83e6ab65a0">S_ISREG</a>(mode))</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;                <span class="keywordflow">goto</span> fishy;</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;        }</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160; </div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;        <span class="comment">/* Extract (or skip) it */</span></div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;        <span class="keywordflow">switch</span> (key_buf[0]) {</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;A&#39;</span>:</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;            overwrite = O_ALWAYS;</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;y&#39;</span>: <span class="comment">/* Open file and fall into unzip */</span></div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160; do_open_and_extract:</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;            <a class="code" href="../../d6/da7/unzip_8c.html#aff8e343da65f840a4bf77846567426be">unzip_create_leading_dirs</a>(dst_fn);</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;<span class="preprocessor">#if ENABLE_FEATURE_UNZIP_CDF</span></div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;            dst_fd = -1;</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="../../d1/d85/filesystem_8hpp.html#a765eef536bcb3bd7bacdd675dc2fba13">S_ISLNK</a>(file_mode)) {</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;                dst_fd = <a class="code" href="../../d7/dd7/libbb_8h.html#a45969b022eaa2fb20084d255e226ee74">xopen3</a>(dst_fn,</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;                    <a class="code" href="../../d1/d85/filesystem_8hpp.html#a11b644a8526139c4cc1850dac1271ced">O_WRONLY</a> | <a class="code" href="../../d1/d85/filesystem_8hpp.html#a1cf6b1de1fffedaa1d26b189e9a8d2cc">O_CREAT</a> | <a class="code" href="../../d1/d85/filesystem_8hpp.html#ad1d67e453fb3031f40f8cd3403773813">O_TRUNC</a> | <a class="code" href="../../d7/d86/musl_2arch_2aarch64_2bits_2fcntl_8h.html#a82d4d551b214905742c9e045185d352a">O_NOFOLLOW</a>,</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;                    file_mode);</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;            }</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;            <span class="comment">/* O_NOFOLLOW defends against symlink attacks */</span></div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;            dst_fd = <a class="code" href="../../d7/dd7/libbb_8h.html#aa3e94e3ec137f40660b168c9f0840027">xopen</a>(dst_fn, <a class="code" href="../../d1/d85/filesystem_8hpp.html#a11b644a8526139c4cc1850dac1271ced">O_WRONLY</a> | <a class="code" href="../../d1/d85/filesystem_8hpp.html#a1cf6b1de1fffedaa1d26b189e9a8d2cc">O_CREAT</a> | <a class="code" href="../../d1/d85/filesystem_8hpp.html#ad1d67e453fb3031f40f8cd3403773813">O_TRUNC</a> | <a class="code" href="../../d7/d86/musl_2arch_2aarch64_2bits_2fcntl_8h.html#a82d4d551b214905742c9e045185d352a">O_NOFOLLOW</a>);</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;            <span class="keywordflow">if</span> (!quiet) {</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;                <a class="code" href="../../d5/ddb/Kernel_2core_2memory_2heap__allocators_2liballoc__1__1_2liballoc__1__1_8c.html#ae34a762828cbff7cce62bda6571b2bc0">printf</a>(<span class="comment">/* zip.fmt.method == 0</span></div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;<span class="comment">                    ? &quot; extracting: %s\n&quot;</span></div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;<span class="comment">                    : */</span> <span class="stringliteral">&quot;  inflating: %s\n&quot;</span>,</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;                    <a class="code" href="../../d7/dd7/libbb_8h.html#a19de965ba99b29e5a6c2e921b86f1134">printable_string</a>(dst_fn)</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;                );</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;            }</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160; do_extract:</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;<span class="preprocessor">#if ENABLE_FEATURE_UNZIP_CDF</span></div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d1/d85/filesystem_8hpp.html#a765eef536bcb3bd7bacdd675dc2fba13">S_ISLNK</a>(file_mode)) {</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;                <span class="keywordflow">if</span> (dst_fd != <a class="code" href="../../db/dad/Userspace_2musl_2include_2unistd_8h.html#abd165ee6474b5b75bf075842fff13a04">STDOUT_FILENO</a>) <span class="comment">/* not -p? */</span></div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;                    unzip_extract_symlink(&amp;symlink_placeholders, &amp;<a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>, dst_fn);</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;            } <span class="keywordflow">else</span></div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;            {</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;                <a class="code" href="../../d6/da7/unzip_8c.html#abad37ee2fe013e5534599f1c897d9821">unzip_extract</a>(&amp;<a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>, dst_fd);</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;                <span class="keywordflow">if</span> (dst_fd != <a class="code" href="../../db/dad/Userspace_2musl_2include_2unistd_8h.html#abd165ee6474b5b75bf075842fff13a04">STDOUT_FILENO</a>) {</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;                    <span class="comment">/* closing STDOUT is potentially bad for future business */</span></div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;                    <a class="code" href="../../db/dad/Userspace_2musl_2include_2unistd_8h.html#ae152484c890a24e4d9b4980e7b965be0">close</a>(dst_fd);</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;                }</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;            }</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160; </div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;N&#39;</span>:</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;            overwrite = O_NEVER;</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;n&#39;</span>: <span class="comment">/* Skip entry data */</span></div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160; skip_cmpsize:</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;            <a class="code" href="../../d6/da7/unzip_8c.html#a6af16d7efc8712ea1e9009e9c4939ce9">unzip_skip</a>(<a class="code" href="../../d6/dd0/gzip_8c.html#a7cb45ef656fb9cf20098916225b691d6">zip</a>.fmt.cmpsize);</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160; </div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;r&#39;</span>:</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;            <span class="comment">/* Prompt for new name */</span></div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;            <a class="code" href="../../d5/ddb/Kernel_2core_2memory_2heap__allocators_2liballoc__1__1_2liballoc__1__1_8c.html#ae34a762828cbff7cce62bda6571b2bc0">printf</a>(<span class="stringliteral">&quot;new name: &quot;</span>);</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;            <a class="code" href="../../d6/da7/unzip_8c.html#a107380b3c0b625c0d01447586a797628">my_fgets80</a>(key_buf);</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;            <a class="code" href="../../d5/db0/dynlink_8c.html#a2c6efa7679f8cd9f61af96e105017560">free</a>(dst_fn);</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;            dst_fn = <a class="code" href="../../dc/dd1/pathchk_8c.html#ac7a701bce03d77bad6b57003d0fe73df">xstrdup</a>(key_buf);</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;            <a class="code" href="../../d7/dd7/libbb_8h.html#a74d945dbe8ebcacb0aee5b4abdb374d9">chomp</a>(dst_fn);</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="../../dc/d72/fsck__minix_8c.html#a90cc07b143cc00b7dbf4d05dcbc580c4">check_file</a>;</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160; </div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;            <a class="code" href="../../d5/ddb/Kernel_2core_2memory_2heap__allocators_2liballoc__1__1_2liballoc__1__1_8c.html#ae34a762828cbff7cce62bda6571b2bc0">printf</a>(<span class="stringliteral">&quot;error: invalid response [%c]\n&quot;</span>, (<span class="keywordtype">char</span>)key_buf[0]);</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="../../dc/d72/fsck__minix_8c.html#a90cc07b143cc00b7dbf4d05dcbc580c4">check_file</a>;</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;        }</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160; </div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;        total_entries++;</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;    }</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160; </div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;<span class="preprocessor">#if ENABLE_FEATURE_UNZIP_CDF</span></div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;    <a class="code" href="../../d5/d5f/unsafe__symlink__target_8c.html#a5153a0a8afb32d8330d30ecf7a2b1b55">create_links_from_list</a>(symlink_placeholders);</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160; </div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;    <span class="keywordflow">if</span> ((opts &amp; <a class="code" href="../../d5/d87/nandwrite_8c.html#aa0a86f788bd9ec97c7ff91bff4dafe63">OPT_l</a>) &amp;&amp; quiet &lt;= 1) {</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../d1/de7/httpd_8c.html#afe0534ca994b08a0ec5edf614aa48e9c">verbose</a>) {</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;            <span class="comment">//  &quot;  Length      Date    Time    Name\n&quot;</span></div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;            <span class="comment">//  &quot;---------  ---------- -----   ----&quot;</span></div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;            <a class="code" href="../../d5/ddb/Kernel_2core_2memory_2heap__allocators_2liballoc__1__1_2liballoc__1__1_8c.html#ae34a762828cbff7cce62bda6571b2bc0">printf</a>( <span class="stringliteral">&quot; --------%21s&quot;</span>               <span class="stringliteral">&quot;-------\n&quot;</span></div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;                     <span class="stringliteral">&quot;%9lu%21s&quot;</span>               <span class="stringliteral">&quot;%u files\n&quot;</span>,</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;                <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;                total_usize, <span class="stringliteral">&quot;&quot;</span>, total_entries);</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> percents = total_usize - total_size;</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;            <span class="keywordflow">if</span> ((<span class="keywordtype">long</span>)percents &lt; 0)</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;                percents = 0; <span class="comment">/* happens if usize &lt; size */</span></div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;            percents = percents * 100;</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;            <span class="keywordflow">if</span> (total_usize)</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;                percents /= total_usize;</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;            <span class="comment">//  &quot; Length   Method    Size  Cmpr    Date    Time   CRC-32   Name\n&quot;</span></div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;            <span class="comment">//  &quot;--------  ------  ------- ---- ---------- ----- --------  ----&quot;</span></div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;            <a class="code" href="../../d5/ddb/Kernel_2core_2memory_2heap__allocators_2liballoc__1__1_2liballoc__1__1_8c.html#ae34a762828cbff7cce62bda6571b2bc0">printf</a>( <span class="stringliteral">&quot;--------          ------- ----%28s&quot;</span>                      <span class="stringliteral">&quot;----\n&quot;</span></div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;                <span class="stringliteral">&quot;%8lu&quot;</span>              <span class="stringliteral">&quot;%17lu%4u%%%28s&quot;</span>                      <span class="stringliteral">&quot;%u files\n&quot;</span>,</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;                <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;                total_usize, total_size, (<span class="keywordtype">unsigned</span>)percents, <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;                total_entries);</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;        }</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;    }</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160; </div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;}</div>
<div class="ttc" id="aDrivers_2include_2types_8h_html_a4c39e0c5c2965112d6b55652a6b7f781"><div class="ttname"><a href="../../d4/dba/Drivers_2include_2types_8h.html#a4c39e0c5c2965112d6b55652a6b7f781">mode_t</a></div><div class="ttdeci">__INT32_TYPE__ mode_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dba/Drivers_2include_2types_8h_source.html#l00059">types.h:59</a></div></div>
<div class="ttc" id="aKernel_2core_2memory_2heap__allocators_2liballoc__1__1_2liballoc__1__1_8c_html_ae34a762828cbff7cce62bda6571b2bc0"><div class="ttname"><a href="../../d5/ddb/Kernel_2core_2memory_2heap__allocators_2liballoc__1__1_2liballoc__1__1_8c.html#ae34a762828cbff7cce62bda6571b2bc0">printf</a></div><div class="ttdeci">#define printf(m,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/ddb/Kernel_2core_2memory_2heap__allocators_2liballoc__1__1_2liballoc__1__1_8c_source.html#l00061">liballoc_1_1.c:61</a></div></div>
<div class="ttc" id="aKernel_2include_2printf_8h_html_a77dac04ed12a16543832b623c7778729"><div class="ttname"><a href="../../dc/df9/Kernel_2include_2printf_8h.html#a77dac04ed12a16543832b623c7778729">sprintf</a></div><div class="ttdeci">PRINTF_VISIBILITY int sprintf(char *s, const char *format,...) ATTR_PRINTF(2</div></div>
<div class="ttc" id="aKernel_2include_2types_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../d0/df4/Kernel_2include_2types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/Kernel_2include_2types_8h_source.html#l00037">types.h:37</a></div></div>
<div class="ttc" id="aKernel_2include_2types_8h_html_a0c18914b3041c2f583aba76f418399c2"><div class="ttname"><a href="../../d0/df4/Kernel_2include_2types_8h.html#a0c18914b3041c2f583aba76f418399c2">int32_t</a></div><div class="ttdeci">__INT32_TYPE__ int32_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/Kernel_2include_2types_8h_source.html#l00157">types.h:157</a></div></div>
<div class="ttc" id="aUserspace_2libc_2include_2stdio_8h_html_ad41876f99f190c7488e64ef39c50a23f"><div class="ttname"><a href="../../dd/d69/Userspace_2libc_2include_2stdio_8h.html#ad41876f99f190c7488e64ef39c50a23f">puts</a></div><div class="ttdeci">int puts(const char *s)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d79/put_8c_source.html#l00027">put.c:27</a></div></div>
<div class="ttc" id="aUserspace_2libc_2include_2sys_2stat_8h_html_a548e5b744ca2e97beb61ad7aa41114e2"><div class="ttname"><a href="../../d2/d5c/Userspace_2libc_2include_2sys_2stat_8h.html#a548e5b744ca2e97beb61ad7aa41114e2">mkdir</a></div><div class="ttdeci">int mkdir(const char *path, mode_t mode)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dfb/sys__stat_8c_source.html#l00005">sys_stat.c:5</a></div></div>
<div class="ttc" id="aUserspace_2musl_2include_2unistd_8h_html_abd165ee6474b5b75bf075842fff13a04"><div class="ttname"><a href="../../db/dad/Userspace_2musl_2include_2unistd_8h.html#abd165ee6474b5b75bf075842fff13a04">STDOUT_FILENO</a></div><div class="ttdeci">#define STDOUT_FILENO</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dad/Userspace_2musl_2include_2unistd_8h_source.html#l00011">unistd.h:11</a></div></div>
<div class="ttc" id="aUserspace_2musl_2include_2unistd_8h_html_ae152484c890a24e4d9b4980e7b965be0"><div class="ttname"><a href="../../db/dad/Userspace_2musl_2include_2unistd_8h.html#ae152484c890a24e4d9b4980e7b965be0">close</a></div><div class="ttdeci">int close(int)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d22/close_8c_source.html#l00013">close.c:13</a></div></div>
<div class="ttc" id="aarithmetic__operations_8c_html_a435d1572bf3f880d55459d9805097f62"><div class="ttname"><a href="../../dd/ddd/arithmetic__operations_8c.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a></div><div class="ttdeci">unsigned int uint32_t</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/ddd/arithmetic__operations_8c_source.html#l00295">arithmetic_operations.c:295</a></div></div>
<div class="ttc" id="abase_8h_html_a57cca470e9dd0a2807b6b1ff3ceda9bb"><div class="ttname"><a href="../../d3/d5a/base_8h.html#a57cca470e9dd0a2807b6b1ff3ceda9bb">strlen</a></div><div class="ttdeci">#define strlen(str)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5a/base_8h_source.html#l00275">base.h:275</a></div></div>
<div class="ttc" id="abash_2test_8c_html_ad1447518f4372828b8435ae82e48499e"><div class="ttname"><a href="../../d9/dd0/bash_2test_8c.html#ad1447518f4372828b8435ae82e48499e">argc</a></div><div class="ttdeci">static int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd0/bash_2test_8c_source.html#l00109">test.c:109</a></div></div>
<div class="ttc" id="abash_2test_8c_html_af2efa898e9eed6fe6715279cb1ec35b0"><div class="ttname"><a href="../../d9/dd0/bash_2test_8c.html#af2efa898e9eed6fe6715279cb1ec35b0">argv</a></div><div class="ttdeci">static char ** argv</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd0/bash_2test_8c_source.html#l00110">test.c:110</a></div></div>
<div class="ttc" id="abzip2_8c_html_a0bf525753bdf2da2e545f683843a7891"><div class="ttname"><a href="../../d2/ddb/bzip2_8c.html#a0bf525753bdf2da2e545f683843a7891">IF_DESKTOP</a></div><div class="ttdeci">static IF_DESKTOP(long long)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddb/bzip2_8c_source.html#l00126">bzip2.c:126</a></div></div>
<div class="ttc" id="aconvert_8h_html_a06688b0d2444199f657ccb56b0ce11b3"><div class="ttname"><a href="../../d3/d82/convert_8h.html#a06688b0d2444199f657ccb56b0ce11b3">strcpy</a></div><div class="ttdeci">#define strcpy(dest, src)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d82/convert_8h_source.html#l00141">convert.h:141</a></div></div>
<div class="ttc" id="aconvert_8h_html_a309e07aa23e76adc2ad0830978663c45"><div class="ttname"><a href="../../d3/d82/convert_8h.html#a309e07aa23e76adc2ad0830978663c45">memcpy</a></div><div class="ttdeci">#define memcpy(dest, src, n)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d82/convert_8h_source.html#l00125">convert.h:125</a></div></div>
<div class="ttc" id="aexcallback_8c_html_afcf80a6d91178952d107ad00b165752b"><div class="ttname"><a href="../../d6/d4f/excallback_8c.html#afcf80a6d91178952d107ad00b165752b">STDIN_FILENO</a></div><div class="ttdeci">#define STDIN_FILENO</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d4f/excallback_8c_source.html#l00062">excallback.c:62</a></div></div>
<div class="ttc" id="afilesystem_8hpp_html_a0d112bae8fd35be772185b6ec6bcbe64"><div class="ttname"><a href="../../d1/d85/filesystem_8hpp.html#a0d112bae8fd35be772185b6ec6bcbe64">SEEK_SET</a></div><div class="ttdeci">#define SEEK_SET</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d85/filesystem_8hpp_source.html#l00030">filesystem.hpp:30</a></div></div>
<div class="ttc" id="afilesystem_8hpp_html_a11b644a8526139c4cc1850dac1271ced"><div class="ttname"><a href="../../d1/d85/filesystem_8hpp.html#a11b644a8526139c4cc1850dac1271ced">O_WRONLY</a></div><div class="ttdeci">#define O_WRONLY</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d85/filesystem_8hpp_source.html#l00061">filesystem.hpp:61</a></div></div>
<div class="ttc" id="afilesystem_8hpp_html_a1cf6b1de1fffedaa1d26b189e9a8d2cc"><div class="ttname"><a href="../../d1/d85/filesystem_8hpp.html#a1cf6b1de1fffedaa1d26b189e9a8d2cc">O_CREAT</a></div><div class="ttdeci">#define O_CREAT</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d85/filesystem_8hpp_source.html#l00063">filesystem.hpp:63</a></div></div>
<div class="ttc" id="afilesystem_8hpp_html_a3746cdc5aac871e6f6504fbcbd29ef1d"><div class="ttname"><a href="../../d1/d85/filesystem_8hpp.html#a3746cdc5aac871e6f6504fbcbd29ef1d">S_ISDIR</a></div><div class="ttdeci">#define S_ISDIR(mode)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d85/filesystem_8hpp_source.html#l00079">filesystem.hpp:79</a></div></div>
<div class="ttc" id="afilesystem_8hpp_html_a765eef536bcb3bd7bacdd675dc2fba13"><div class="ttname"><a href="../../d1/d85/filesystem_8hpp.html#a765eef536bcb3bd7bacdd675dc2fba13">S_ISLNK</a></div><div class="ttdeci">#define S_ISLNK(mode)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d85/filesystem_8hpp_source.html#l00084">filesystem.hpp:84</a></div></div>
<div class="ttc" id="afilesystem_8hpp_html_a7a68c9ffaac7dbcd652225dd7c06a54b"><div class="ttname"><a href="../../d1/d85/filesystem_8hpp.html#a7a68c9ffaac7dbcd652225dd7c06a54b">O_RDONLY</a></div><div class="ttdeci">#define O_RDONLY</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d85/filesystem_8hpp_source.html#l00060">filesystem.hpp:60</a></div></div>
<div class="ttc" id="afilesystem_8hpp_html_aad0f32c2c182238f2ff71c83e6ab65a0"><div class="ttname"><a href="../../d1/d85/filesystem_8hpp.html#aad0f32c2c182238f2ff71c83e6ab65a0">S_ISREG</a></div><div class="ttdeci">#define S_ISREG(mode)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d85/filesystem_8hpp_source.html#l00082">filesystem.hpp:82</a></div></div>
<div class="ttc" id="afilesystem_8hpp_html_ad1d67e453fb3031f40f8cd3403773813"><div class="ttname"><a href="../../d1/d85/filesystem_8hpp.html#ad1d67e453fb3031f40f8cd3403773813">O_TRUNC</a></div><div class="ttdeci">#define O_TRUNC</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d85/filesystem_8hpp_source.html#l00065">filesystem.hpp:65</a></div></div>
<div class="ttc" id="afind__list__entry_8c_html_aec467591340af67ed8cb3428a837a97a"><div class="ttname"><a href="../../d8/dcb/find__list__entry_8c.html#aec467591340af67ed8cb3428a837a97a">find_list_entry</a></div><div class="ttdeci">const llist_t *FAST_FUNC find_list_entry(const llist_t *list, const char *filename)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dcb/find__list__entry_8c_source.html#l00012">find_list_entry.c:12</a></div></div>
<div class="ttc" id="afsck__minix_8c_html_a90cc07b143cc00b7dbf4d05dcbc580c4"><div class="ttname"><a href="../../dc/d72/fsck__minix_8c.html#a90cc07b143cc00b7dbf4d05dcbc580c4">check_file</a></div><div class="ttdeci">static void check_file(struct minix1_inode *dir, unsigned offset)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d72/fsck__minix_8c_source.html#l00961">fsck_minix.c:961</a></div></div>
<div class="ttc" id="agettextP_8h_html_a68428151ad44e31b19041cdeb8972a91"><div class="ttname"><a href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a></div><div class="ttdeci">static nls_uint32 nls_uint32 i</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/gettextP_8h_source.html#l00074">gettextP.h:74</a></div></div>
<div class="ttc" id="ahttpd_8c_html_afe0534ca994b08a0ec5edf614aa48e9c"><div class="ttname"><a href="../../d1/de7/httpd_8c.html#afe0534ca994b08a0ec5edf614aa48e9c">verbose</a></div><div class="ttdeci">#define verbose</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/de7/httpd_8c_source.html#l00511">httpd.c:511</a></div></div>
<div class="ttc" id="aindividual_8c_html_a8323cea1cd613c0e2005086064a4b730"><div class="ttname"><a href="../../d9/d65/individual_8c.html#a8323cea1cd613c0e2005086064a4b730">bb_show_usage</a></div><div class="ttdeci">void bb_show_usage(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d65/individual_8c_source.html#l00020">individual.c:20</a></div></div>
<div class="ttc" id="alibbb_8h_html_a19de965ba99b29e5a6c2e921b86f1134"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#a19de965ba99b29e5a6c2e921b86f1134">printable_string</a></div><div class="ttdeci">const char *FAST_FUNC printable_string(const char *str)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d25/printable__string_8c_source.html#l00059">printable_string.c:59</a></div></div>
<div class="ttc" id="alibbb_8h_html_a1ca30613255c7ecb6c80159b4eeb6d13"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#a1ca30613255c7ecb6c80159b4eeb6d13">last_char_is</a></div><div class="ttdeci">char * last_char_is(const char *s, int c) FAST_FUNC</div><div class="ttdef"><b>Definition:</b> <a href="../../db/db4/last__char__is_8c_source.html#l00012">last_char_is.c:12</a></div></div>
<div class="ttc" id="alibbb_8h_html_a2763d34240a976ef812fed988f944d41ac1450b06c0ff0cafcfba04d2b9eb63eb"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#a2763d34240a976ef812fed988f944d41ac1450b06c0ff0cafcfba04d2b9eb63eb">FILEUTILS_IGNORE_CHMOD_ERR</a></div><div class="ttdeci">@ FILEUTILS_IGNORE_CHMOD_ERR</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dd7/libbb_8h_source.html#l00500">libbb.h:500</a></div></div>
<div class="ttc" id="alibbb_8h_html_a31cfbfe02fa96c10d92748f7830b0624"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#a31cfbfe02fa96c10d92748f7830b0624">xchdir</a></div><div class="ttdeci">void xchdir(const char *path) FAST_FUNC</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd6/xfuncs__printf_8c_source.html#l00426">xfuncs_printf.c:426</a></div></div>
<div class="ttc" id="alibbb_8h_html_a45969b022eaa2fb20084d255e226ee74"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#a45969b022eaa2fb20084d255e226ee74">xopen3</a></div><div class="ttdeci">int xopen3(const char *pathname, int flags, int mode) FAST_FUNC</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd6/xfuncs__printf_8c_source.html#l00143">xfuncs_printf.c:143</a></div></div>
<div class="ttc" id="alibbb_8h_html_a5177068c77d2dc439e0aa92b4ba6e09e"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#a5177068c77d2dc439e0aa92b4ba6e09e">xlseek</a></div><div class="ttdeci">off_t xlseek(int fd, off_t offset, int whence) FAST_FUNC</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd6/xfuncs__printf_8c_source.html#l00275">xfuncs_printf.c:275</a></div></div>
<div class="ttc" id="alibbb_8h_html_a6b9d12af476b8fa4b9de87028b0ac27c"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#a6b9d12af476b8fa4b9de87028b0ac27c">xzalloc</a></div><div class="ttdeci">void * xzalloc(size_t size) FAST_FUNC RETURNS_MALLOC</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd6/xfuncs__printf_8c_source.html#l00069">xfuncs_printf.c:69</a></div></div>
<div class="ttc" id="alibbb_8h_html_a74d945dbe8ebcacb0aee5b4abdb374d9"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#a74d945dbe8ebcacb0aee5b4abdb374d9">chomp</a></div><div class="ttdeci">void chomp(char *s) FAST_FUNC</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/de5/chomp_8c_source.html#l00012">chomp.c:12</a></div></div>
<div class="ttc" id="alibbb_8h_html_a99555f16e71f93f23622a8cce1265a5b"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#a99555f16e71f93f23622a8cce1265a5b">xread</a></div><div class="ttdeci">void xread(int fd, void *buf, size_t count) FAST_FUNC</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/de6/read__printf_8c_source.html#l00215">read_printf.c:215</a></div></div>
<div class="ttc" id="alibbb_8h_html_a9f80115b3cb2f6290449fa0b62fee8ba"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#a9f80115b3cb2f6290449fa0b62fee8ba">overlapping_strcpy</a></div><div class="ttdeci">void overlapping_strcpy(char *dst, const char *src) FAST_FUNC</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/db9/safe__strncpy_8c_source.html#l00020">safe_strncpy.c:20</a></div></div>
<div class="ttc" id="alibbb_8h_html_aa3e94e3ec137f40660b168c9f0840027"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#aa3e94e3ec137f40660b168c9f0840027">xopen</a></div><div class="ttdeci">int xopen(const char *pathname, int flags) FAST_FUNC</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd6/xfuncs__printf_8c_source.html#l00155">xfuncs_printf.c:155</a></div></div>
<div class="ttc" id="alibbb_8h_html_aabff0b84c2d301250b6f676d86871aaf"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#aabff0b84c2d301250b6f676d86871aaf">xdup2</a></div><div class="ttdeci">void xdup2(int, int) FAST_FUNC</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd6/xfuncs__printf_8c_source.html#l00230">xfuncs_printf.c:230</a></div></div>
<div class="ttc" id="alibbb_8h_html_ac1428a8eb5f3de46969e7d3bfa8be3c3"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#ac1428a8eb5f3de46969e7d3bfa8be3c3">llist_add_to</a></div><div class="ttdeci">void llist_add_to(llist_t **old_head, void *data) FAST_FUNC</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de1/llist_8c_source.html#l00015">llist.c:15</a></div></div>
<div class="ttc" id="alibbb_8h_html_ad480de907b2c37655e34b8aa0ee3f158"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#ad480de907b2c37655e34b8aa0ee3f158">xmove_fd</a></div><div class="ttdeci">void xmove_fd(int, int) FAST_FUNC</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd6/xfuncs__printf_8c_source.html#l00238">xfuncs_printf.c:238</a></div></div>
<div class="ttc" id="alibbb_8h_html_ae08d0a76a2c4bbeda2dbe9491d857bd6"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#ae08d0a76a2c4bbeda2dbe9491d857bd6">bb_basename</a></div><div class="ttdeci">const char * bb_basename(const char *name) FAST_FUNC</div><div class="ttdef"><b>Definition:</b> <a href="../../db/db4/get__last__path__component_8c_source.html#l00011">get_last_path_component.c:11</a></div></div>
<div class="ttc" id="alibbb_8h_html_ae3c705adc31efb61b8a23829e028028e"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#ae3c705adc31efb61b8a23829e028028e">LONE_DASH</a></div><div class="ttdeci">#define LONE_DASH(s)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dd7/libbb_8h_source.html#l00937">libbb.h:937</a></div></div>
<div class="ttc" id="alibbb_8h_html_da/d28/structllist__t"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#da/d28/structllist__t">llist_t</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dd7/libbb_8h_source.html#l01383">libbb.h:1383</a></div></div>
<div class="ttc" id="amountpoint_8c_html_a86450ca8fb061c5ccf2dc56d8e38825d"><div class="ttname"><a href="../../d1/d08/mountpoint_8c.html#a86450ca8fb061c5ccf2dc56d8e38825d">OPT_x</a></div><div class="ttdeci">#define OPT_x</div></div>
<div class="ttc" id="amusl_2arch_2aarch64_2bits_2fcntl_8h_html_a82d4d551b214905742c9e045185d352a"><div class="ttname"><a href="../../d7/d86/musl_2arch_2aarch64_2bits_2fcntl_8h.html#a82d4d551b214905742c9e045185d352a">O_NOFOLLOW</a></div><div class="ttdeci">#define O_NOFOLLOW</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d86/musl_2arch_2aarch64_2bits_2fcntl_8h_source.html#l00011">fcntl.h:11</a></div></div>
<div class="ttc" id="amusl_2include_2fcntl_8h_html_a30384a8cd2feb1615efd5eadc243684b"><div class="ttname"><a href="../../d2/d44/musl_2include_2fcntl_8h.html#a30384a8cd2feb1615efd5eadc243684b">S_ISUID</a></div><div class="ttdeci">#define S_ISUID</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d44/musl_2include_2fcntl_8h_source.html#l00083">fcntl.h:83</a></div></div>
<div class="ttc" id="amusl_2include_2fcntl_8h_html_a9c9e4cc0a8acc43c99ae6c3d972ae2d8"><div class="ttname"><a href="../../d2/d44/musl_2include_2fcntl_8h.html#a9c9e4cc0a8acc43c99ae6c3d972ae2d8">S_ISGID</a></div><div class="ttdeci">#define S_ISGID</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d44/musl_2include_2fcntl_8h_source.html#l00084">fcntl.h:84</a></div></div>
<div class="ttc" id="amusl_2include_2fcntl_8h_html_aa138ddaa9bbe8b8ccca32ed43e75b72c"><div class="ttname"><a href="../../d2/d44/musl_2include_2fcntl_8h.html#aa138ddaa9bbe8b8ccca32ed43e75b72c">open</a></div><div class="ttdeci">int open(const char *, int,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/deb/open_8c_source.html#l00005">open.c:5</a></div></div>
<div class="ttc" id="amusl_2include_2getopt_8h_html_acbd3b0584888b80a8e7f16d4d794eb2c"><div class="ttname"><a href="../../d4/d31/musl_2include_2getopt_8h.html#acbd3b0584888b80a8e7f16d4d794eb2c">getopt</a></div><div class="ttdeci">int getopt(int, char *const [], const char *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dee/musl_2src_2misc_2getopt_8c_source.html#l00028">getopt.c:28</a></div></div>
<div class="ttc" id="anandwrite_8c_html_aa0a86f788bd9ec97c7ff91bff4dafe63"><div class="ttname"><a href="../../d5/d87/nandwrite_8c.html#aa0a86f788bd9ec97c7ff91bff4dafe63">OPT_l</a></div><div class="ttdeci">#define OPT_l</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d87/nandwrite_8c_source.html#l00071">nandwrite.c:71</a></div></div>
<div class="ttc" id="aod__bloaty_8c_html_a58562587eaf0c784eeac869888a97303a0f9b0c7d8f51d9ffaba812a83673086c"><div class="ttname"><a href="../../d1/dac/od__bloaty_8c.html#a58562587eaf0c784eeac869888a97303a0f9b0c7d8f51d9ffaba812a83673086c">OPT_j</a></div><div class="ttdeci">@ OPT_j</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dac/od__bloaty_8c_source.html#l00049">od_bloaty.c:49</a></div></div>
<div class="ttc" id="aplatform_8h_html_ad05b39cab98c2ea86551b631e839efbf"><div class="ttname"><a href="../../de/d03/platform_8h.html#ad05b39cab98c2ea86551b631e839efbf">smallint</a></div><div class="ttdeci">int smallint</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d03/platform_8h_source.html#l00289">platform.h:289</a></div></div>
<div class="ttc" id="arl_8c_html_ad5e1c16213bbee2d5e8cc363309f418c"><div class="ttname"><a href="../../d8/d50/rl_8c.html#ad5e1c16213bbee2d5e8cc363309f418c">optind</a></div><div class="ttdeci">int optind</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dee/musl_2src_2misc_2getopt_8c_source.html#l00011">getopt.c:11</a></div></div>
<div class="ttc" id="arl_8c_html_adb50a0eab9fed92fc3bfc7dfa4f2c410"><div class="ttname"><a href="../../d8/d50/rl_8c.html#adb50a0eab9fed92fc3bfc7dfa4f2c410">optarg</a></div><div class="ttdeci">char * optarg</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dee/musl_2src_2misc_2getopt_8c_source.html#l00010">getopt.c:10</a></div></div>
<div class="ttc" id="atcpudp_8c_html_a7cfee661bb838892b5f0feca7c0d5e46af845ba972eeee15878954faf92b03deb"><div class="ttname"><a href="../../d8/d6a/tcpudp_8c.html#a7cfee661bb838892b5f0feca7c0d5e46af845ba972eeee15878954faf92b03deb">OPT_K</a></div><div class="ttdeci">@ OPT_K</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d6a/tcpudp_8c_source.html#l00216">tcpudp.c:216</a></div></div>
<div class="ttc" id="atre_8h_html_a6af5faec3f9662b20ffc9903f923dec0"><div class="ttname"><a href="../../db/d0a/tre_8h.html#a6af5faec3f9662b20ffc9903f923dec0">xmalloc</a></div><div class="ttdeci">#define xmalloc</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0a/tre_8h_source.html#l00227">tre.h:227</a></div></div>
<div class="ttc" id="aunsafe__prefix_8c_html_aa8a644aeffa1306a2c14c1ac658cfbc8"><div class="ttname"><a href="../../d3/d19/unsafe__prefix_8c.html#aa8a644aeffa1306a2c14c1ac658cfbc8">strip_unsafe_prefix</a></div><div class="ttdeci">const char *FAST_FUNC strip_unsafe_prefix(const char *str)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d19/unsafe__prefix_8c_source.html#l00008">unsafe_prefix.c:8</a></div></div>
<div class="ttc" id="aunsafe__symlink__target_8c_html_a5153a0a8afb32d8330d30ecf7a2b1b55"><div class="ttname"><a href="../../d5/d5f/unsafe__symlink__target_8c.html#a5153a0a8afb32d8330d30ecf7a2b1b55">create_links_from_list</a></div><div class="ttdeci">void FAST_FUNC create_links_from_list(llist_t *list)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d5f/unsafe__symlink__target_8c_source.html#l00027">unsafe_symlink_target.c:27</a></div></div>
<div class="ttc" id="aunzip_8c_html_a107380b3c0b625c0d01447586a797628"><div class="ttname"><a href="../../d6/da7/unzip_8c.html#a107380b3c0b625c0d01447586a797628">my_fgets80</a></div><div class="ttdeci">static void my_fgets80(char *buf80)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/da7/unzip_8c_source.html#l00468">unzip.c:468</a></div></div>
<div class="ttc" id="aunzip_8c_html_a11c04263f55bfdbc7ab2a6d5a665a223"><div class="ttname"><a href="../../d6/da7/unzip_8c.html#a11c04263f55bfdbc7ab2a6d5a665a223">die_if_bad_fnamesize</a></div><div class="ttdeci">static void die_if_bad_fnamesize(unsigned sz)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/da7/unzip_8c_source.html#l00342">unzip.c:342</a></div></div>
<div class="ttc" id="aunzip_8c_html_a17bed8eb757cdeef77953e2d67656622"><div class="ttname"><a href="../../d6/da7/unzip_8c.html#a17bed8eb757cdeef77953e2d67656622">find_cdf_offset</a></div><div class="ttdeci">#define find_cdf_offset()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/da7/unzip_8c_source.html#l00221">unzip.c:221</a></div></div>
<div class="ttc" id="aunzip_8c_html_a3191226e15f98abba647c064e58cfeba"><div class="ttname"><a href="../../d6/da7/unzip_8c.html#a3191226e15f98abba647c064e58cfeba">BAD_CDF_OFFSET</a></div><div class="ttdeci">#define BAD_CDF_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/da7/unzip_8c_source.html#l00217">unzip.c:217</a></div></div>
<div class="ttc" id="aunzip_8c_html_a6af16d7efc8712ea1e9009e9c4939ce9"><div class="ttname"><a href="../../d6/da7/unzip_8c.html#a6af16d7efc8712ea1e9009e9c4939ce9">unzip_skip</a></div><div class="ttdeci">static void unzip_skip(off_t skip)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/da7/unzip_8c_source.html#l00348">unzip.c:348</a></div></div>
<div class="ttc" id="aunzip_8c_html_aadf47595f4fdb31176441bb4415eecac"><div class="ttname"><a href="../../d6/da7/unzip_8c.html#aadf47595f4fdb31176441bb4415eecac">dbg</a></div><div class="ttdeci">#define dbg(...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/da7/unzip_8c_source.html#l00079">unzip.c:79</a></div></div>
<div class="ttc" id="aunzip_8c_html_aafcf719d11c3d3b4e077e4955af3ba30"><div class="ttname"><a href="../../d6/da7/unzip_8c.html#aafcf719d11c3d3b4e077e4955af3ba30">get_lstat_mode</a></div><div class="ttdeci">static int get_lstat_mode(const char *dst_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/da7/unzip_8c_source.html#l00476">unzip.c:476</a></div></div>
<div class="ttc" id="aunzip_8c_html_abad37ee2fe013e5534599f1c897d9821"><div class="ttname"><a href="../../d6/da7/unzip_8c.html#abad37ee2fe013e5534599f1c897d9821">unzip_extract</a></div><div class="ttdeci">static void unzip_extract(zip_header_t *zip, int dst_fd)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/da7/unzip_8c_source.html#l00403">unzip.c:403</a></div></div>
<div class="ttc" id="aunzip_8c_html_abcfbf62120411c95b230af50a8f69400"><div class="ttname"><a href="../../d6/da7/unzip_8c.html#abcfbf62120411c95b230af50a8f69400">ZIP_HEADER_LEN</a></div><div class="ttdeci">#define ZIP_HEADER_LEN</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/da7/unzip_8c_source.html#l00098">unzip.c:98</a></div></div>
<div class="ttc" id="aunzip_8c_html_ac29f2b46f9cd80e3eca73751d0f74cff"><div class="ttname"><a href="../../d6/da7/unzip_8c.html#ac29f2b46f9cd80e3eca73751d0f74cff">FIX_ENDIANNESS_ZIP</a></div><div class="ttdeci">#define FIX_ENDIANNESS_ZIP(zip)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/da7/unzip_8c_source.html#l00119">unzip.c:119</a></div></div>
<div class="ttc" id="aunzip_8c_html_aff8e343da65f840a4bf77846567426be"><div class="ttname"><a href="../../d6/da7/unzip_8c.html#aff8e343da65f840a4bf77846567426be">unzip_create_leading_dirs</a></div><div class="ttdeci">static void unzip_create_leading_dirs(const char *fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/da7/unzip_8c_source.html#l00355">unzip.c:355</a></div></div>
<div class="ttc" id="aunzip_8c_html_dc/d5c/unioncdf__header__t"><div class="ttname"><a href="../../d6/da7/unzip_8c.html#dc/d5c/unioncdf__header__t">cdf_header_t</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/da7/unzip_8c_source.html#l00133">unzip.c:133</a></div></div>
<div class="ttc" id="aunzip_8c_html_de/de3/unionzip__header__t"><div class="ttname"><a href="../../d6/da7/unzip_8c.html#de/de3/unionzip__header__t">zip_header_t</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/da7/unzip_8c_source.html#l00100">unzip.c:100</a></div></div>
<div class="ttc" id="ausage__pod_8c_html_a048289fa87432e63cfa9a627c94be27c"><div class="ttname"><a href="../../d2/d21/usage__pod_8c.html#a048289fa87432e63cfa9a627c94be27c">ALIGN1</a></div><div class="ttdeci">#define ALIGN1</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d21/usage__pod_8c_source.html#l00016">usage_pod.c:16</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d2/d21/usage__pod_8c_source.html#l00016">ALIGN1</a>, <a class="el" href="../../d9/dd0/bash_2test_8c_source.html#l00109">argc</a>, <a class="el" href="../../d9/dd0/bash_2test_8c_source.html#l00110">argv</a>, <a class="el" href="../../d6/da7/unzip_8c_source.html#l00217">BAD_CDF_OFFSET</a>, <a class="el" href="../../db/db4/get__last__path__component_8c_source.html#l00011">bb_basename()</a>, <a class="el" href="../../d7/dd7/libbb_8h.html#a1992b68ae7d01f7da91e31e351ca3b33">bb_error_msg_and_die()</a>, <a class="el" href="../../d0/d37/make__directory_8c_source.html#l00027">bb_make_directory()</a>, <a class="el" href="../../d9/d65/individual_8c_source.html#l00020">bb_show_usage()</a>, <a class="el" href="../../dc/d72/fsck__minix_8c_source.html#l00961">check_file()</a>, <a class="el" href="../../d6/de5/chomp_8c_source.html#l00012">chomp()</a>, <a class="el" href="../../d9/d22/close_8c_source.html#l00013">close()</a>, <a class="el" href="../../d5/d5f/unsafe__symlink__target_8c_source.html#l00027">create_links_from_list()</a>, <a class="el" href="../../d6/da7/unzip_8c_source.html#l00079">dbg</a>, <a class="el" href="../../d6/da7/unzip_8c_source.html#l00342">die_if_bad_fnamesize()</a>, <a class="el" href="../../d7/dd7/libbb_8h_source.html#l00500">FILEUTILS_IGNORE_CHMOD_ERR</a>, <a class="el" href="../../d6/da7/unzip_8c_source.html#l00221">find_cdf_offset</a>, <a class="el" href="../../d8/dcb/find__list__entry_8c_source.html#l00012">find_list_entry()</a>, <a class="el" href="../../d6/da7/unzip_8c_source.html#l00119">FIX_ENDIANNESS_ZIP</a>, <a class="el" href="../../d5/db0/dynlink_8c_source.html#l00036">free</a>, <a class="el" href="../../d6/da7/unzip_8c_source.html#l00476">get_lstat_mode()</a>, <a class="el" href="../../d7/dee/musl_2src_2misc_2getopt_8c_source.html#l00028">getopt()</a>, <a class="el" href="../../dd/d71/gettextP_8h_source.html#l00074">i</a>, <a class="el" href="../../d2/ddb/bzip2_8c_source.html#l00126">IF_DESKTOP()</a>, <a class="el" href="../../db/db4/last__char__is_8c_source.html#l00012">last_char_is()</a>, <a class="el" href="../../d4/de1/llist_8c_source.html#l00015">llist_add_to()</a>, <a class="el" href="../../d7/dd7/libbb_8h_source.html#l00937">LONE_DASH</a>, <a class="el" href="../../d3/d82/convert_8h_source.html#l00125">memcpy</a>, <a class="el" href="../../d1/dfb/sys__stat_8c_source.html#l00005">mkdir()</a>, <a class="el" href="../../d6/da7/unzip_8c_source.html#l00468">my_fgets80()</a>, <a class="el" href="../../d0/df4/Kernel_2include_2types_8h_source.html#l00037">NULL</a>, <a class="el" href="../../d1/d85/filesystem_8hpp_source.html#l00063">O_CREAT</a>, <a class="el" href="../../d7/d86/musl_2arch_2aarch64_2bits_2fcntl_8h_source.html#l00011">O_NOFOLLOW</a>, <a class="el" href="../../d1/d85/filesystem_8hpp_source.html#l00060">O_RDONLY</a>, <a class="el" href="../../d1/d85/filesystem_8hpp_source.html#l00065">O_TRUNC</a>, <a class="el" href="../../d1/d85/filesystem_8hpp_source.html#l00061">O_WRONLY</a>, <a class="el" href="../../da/deb/open_8c_source.html#l00005">open()</a>, <a class="el" href="../../d1/dac/od__bloaty_8c_source.html#l00049">OPT_j</a>, <a class="el" href="../../d8/d6a/tcpudp_8c_source.html#l00216">OPT_K</a>, <a class="el" href="../../d5/d87/nandwrite_8c_source.html#l00071">OPT_l</a>, <a class="el" href="../../d1/d08/mountpoint_8c.html#a86450ca8fb061c5ccf2dc56d8e38825d">OPT_x</a>, <a class="el" href="../../d7/dee/musl_2src_2misc_2getopt_8c_source.html#l00010">optarg</a>, <a class="el" href="../../d7/dee/musl_2src_2misc_2getopt_8c_source.html#l00011">optind</a>, <a class="el" href="../../d0/db9/safe__strncpy_8c_source.html#l00020">overlapping_strcpy()</a>, <a class="el" href="../../d6/d25/printable__string_8c_source.html#l00059">printable_string()</a>, <a class="el" href="../../d5/ddb/Kernel_2core_2memory_2heap__allocators_2liballoc__1__1_2liballoc__1__1_8c_source.html#l00061">printf</a>, <a class="el" href="../../df/d79/put_8c_source.html#l00027">puts()</a>, <a class="el" href="../../d1/d85/filesystem_8hpp_source.html#l00079">S_ISDIR</a>, <a class="el" href="../../d2/d44/musl_2include_2fcntl_8h_source.html#l00084">S_ISGID</a>, <a class="el" href="../../d1/d85/filesystem_8hpp_source.html#l00084">S_ISLNK</a>, <a class="el" href="../../d1/d85/filesystem_8hpp_source.html#l00082">S_ISREG</a>, <a class="el" href="../../d2/d44/musl_2include_2fcntl_8h_source.html#l00083">S_ISUID</a>, <a class="el" href="../../d1/d85/filesystem_8hpp_source.html#l00030">SEEK_SET</a>, <a class="el" href="../../dc/df9/Kernel_2include_2printf_8h.html#a77dac04ed12a16543832b623c7778729">sprintf()</a>, <a class="el" href="../../d6/d4f/excallback_8c_source.html#l00062">STDIN_FILENO</a>, <a class="el" href="../../db/dad/Userspace_2musl_2include_2unistd_8h_source.html#l00011">STDOUT_FILENO</a>, <a class="el" href="../../d3/d82/convert_8h_source.html#l00141">strcpy</a>, <a class="el" href="../../d3/d19/unsafe__prefix_8c_source.html#l00008">strip_unsafe_prefix()</a>, <a class="el" href="../../d3/d5a/base_8h_source.html#l00275">strlen</a>, <a class="el" href="../../de/d03/platform_8h_source.html#l00216">SWAP_LE16</a>, <a class="el" href="../../de/d03/platform_8h_source.html#l00217">SWAP_LE32</a>, <a class="el" href="../../d6/da7/unzip_8c_source.html#l00355">unzip_create_leading_dirs()</a>, <a class="el" href="../../d6/da7/unzip_8c_source.html#l00403">unzip_extract()</a>, <a class="el" href="../../d6/da7/unzip_8c_source.html#l00348">unzip_skip()</a>, <a class="el" href="../../d1/de7/httpd_8c_source.html#l00511">verbose</a>, <a class="el" href="../../d9/dd6/xfuncs__printf_8c_source.html#l00426">xchdir()</a>, <a class="el" href="../../d9/dd6/xfuncs__printf_8c_source.html#l00230">xdup2()</a>, <a class="el" href="../../d8/d42/xfunc__die_8c_source.html#l00016">xfunc_die()</a>, <a class="el" href="../../d9/dd6/xfuncs__printf_8c_source.html#l00275">xlseek()</a>, <a class="el" href="../../db/d0a/tre_8h_source.html#l00227">xmalloc</a>, <a class="el" href="../../d9/dd6/xfuncs__printf_8c_source.html#l00238">xmove_fd()</a>, <a class="el" href="../../d9/dd6/xfuncs__printf_8c_source.html#l00155">xopen()</a>, <a class="el" href="../../d9/dd6/xfuncs__printf_8c_source.html#l00143">xopen3()</a>, <a class="el" href="../../d5/de6/read__printf_8c_source.html#l00215">xread()</a>, <a class="el" href="../../dc/dd1/pathchk_8c_source.html#l00258">xstrdup()</a>, <a class="el" href="../../d9/dd6/xfuncs__printf_8c_source.html#l00069">xzalloc()</a>, <a class="el" href="../../d6/dd0/gzip_8c_source.html#l02064">zip()</a>, <a class="el" href="../../d6/da7/unzip_8c_source.html#l00091">ZIP_CDF_MAGIC</a>, <a class="el" href="../../d6/da7/unzip_8c_source.html#l00094">ZIP_DD_MAGIC</a>, <a class="el" href="../../d6/da7/unzip_8c_source.html#l00213">zip_fd</a>, <a class="el" href="../../d6/da7/unzip_8c_source.html#l00090">ZIP_FILEHEADER_MAGIC</a>, and <a class="el" href="../../d6/da7/unzip_8c_source.html#l00098">ZIP_HEADER_LEN</a>.</p>

</div>
</div>
<a id="a6af16d7efc8712ea1e9009e9c4939ce9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6af16d7efc8712ea1e9009e9c4939ce9">&#9670;&nbsp;</a></span>unzip_skip()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void unzip_skip </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/dba/Drivers_2include_2types_8h.html#a37aff01e955441499997a359a4153b3d">off_t</a>&#160;</td>
          <td class="paramname"><em>skip</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d6/da7/unzip_8c_source.html#l00348">348</a> of file <a class="el" href="../../d6/da7/unzip_8c_source.html">unzip.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;{</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d2/dd6/dd_8c.html#aca953b4d1629f79e7c2e9a5f9ae30c69">skip</a> != 0)</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d1/d85/filesystem_8hpp.html#a8bd74caed008a66808d92d57fa74d9f6">lseek</a>(<a class="code" href="../../d6/da7/unzip_8c.html#a2c4e2be2550d52c8ccdfca737ac675d2ac5d1c375f88d748cd917127ae9f0ed0a">zip_fd</a>, <a class="code" href="../../d2/dd6/dd_8c.html#aca953b4d1629f79e7c2e9a5f9ae30c69">skip</a>, <a class="code" href="../../d1/d85/filesystem_8hpp.html#a4c8d0b76b470ba65a43ca46a88320f39">SEEK_CUR</a>) == (<a class="code" href="../../d4/dba/Drivers_2include_2types_8h.html#a37aff01e955441499997a359a4153b3d">off_t</a>)-1)</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;            <a class="code" href="../../d7/dd7/libbb_8h.html#ab7f49aa607fe330106f866bc09fa3a9b">bb_copyfd_exact_size</a>(<a class="code" href="../../d6/da7/unzip_8c.html#a2c4e2be2550d52c8ccdfca737ac675d2ac5d1c375f88d748cd917127ae9f0ed0a">zip_fd</a>, -1, <a class="code" href="../../d2/dd6/dd_8c.html#aca953b4d1629f79e7c2e9a5f9ae30c69">skip</a>);</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;}</div>
<div class="ttc" id="add_8c_html_aca953b4d1629f79e7c2e9a5f9ae30c69"><div class="ttname"><a href="../../d2/dd6/dd_8c.html#aca953b4d1629f79e7c2e9a5f9ae30c69">skip</a></div><div class="ttdeci">#define skip</div></div>
<div class="ttc" id="afilesystem_8hpp_html_a4c8d0b76b470ba65a43ca46a88320f39"><div class="ttname"><a href="../../d1/d85/filesystem_8hpp.html#a4c8d0b76b470ba65a43ca46a88320f39">SEEK_CUR</a></div><div class="ttdeci">#define SEEK_CUR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d85/filesystem_8hpp_source.html#l00031">filesystem.hpp:31</a></div></div>
<div class="ttc" id="afilesystem_8hpp_html_a8bd74caed008a66808d92d57fa74d9f6"><div class="ttname"><a href="../../d1/d85/filesystem_8hpp.html#a8bd74caed008a66808d92d57fa74d9f6">lseek</a></div><div class="ttdeci">off_t lseek(int fd, off_t offset, int whence)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d5c/kernel__io_8cpp_source.html#l00088">kernel_io.cpp:88</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d0/df3/copyfd_8c_source.html#l00148">bb_copyfd_exact_size()</a>, <a class="el" href="../../d8/d5c/kernel__io_8cpp_source.html#l00088">lseek()</a>, <a class="el" href="../../d1/d85/filesystem_8hpp_source.html#l00031">SEEK_CUR</a>, <a class="el" href="../../d2/dd6/dd_8c.html#aca953b4d1629f79e7c2e9a5f9ae30c69">skip</a>, and <a class="el" href="../../d6/da7/unzip_8c_source.html#l00213">zip_fd</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/da7/unzip_8c_source.html#l00492">unzip_main()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_97d86ce2f18c7710ea326fa47777d7d7.html">Userspace</a></li><li class="navelem"><a class="el" href="../../dir_0276b9b7d706caf6f8b101518c949f15.html">apps</a></li><li class="navelem"><a class="el" href="../../dir_825a5fc57f8484006531699dcb39fa0d.html">base</a></li><li class="navelem"><a class="el" href="../../dir_87e330aa425985c7f88c27f5b355b004.html">busybox</a></li><li class="navelem"><a class="el" href="../../dir_fb7611e8dc699bb7e6b65315cf0049ad.html">archival</a></li><li class="navelem"><a class="el" href="../../d6/da7/unzip_8c.html">unzip.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
