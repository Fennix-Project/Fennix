<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Fennix Kernel: PCI::Manager Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="../../custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Fennix Kernel
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
   <div id="projectbrief">Kernel Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d4/dad/classPCI_1_1Manager.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a>  </div>
  <div class="headertitle">
<div class="title">PCI::Manager Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="../../d9/dd5/pci_8hpp_source.html">pci.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a168c35931536a3bdafa81956fbc9bda9"><td class="memItemLeft" align="right" valign="top">std::list&lt; <a class="el" href="../../d0/d8f/namespacePCI.html#d2/d9d/structPCI_1_1PCIDevice">PCIDevice</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dad/classPCI_1_1Manager.html#a168c35931536a3bdafa81956fbc9bda9">GetDevices</a> ()</td></tr>
<tr class="separator:a168c35931536a3bdafa81956fbc9bda9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14af279e0fc618184821475afb86b65c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dad/classPCI_1_1Manager.html#a14af279e0fc618184821475afb86b65c">MapPCIAddresses</a> (<a class="el" href="../../d0/d8f/namespacePCI.html#d2/d9d/structPCI_1_1PCIDevice">PCIDevice</a> Device, <a class="el" href="../../df/d1d/classMemory_1_1PageTable.html">Memory::PageTable</a> *Table)</td></tr>
<tr class="separator:a14af279e0fc618184821475afb86b65c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b205ba96418a407e3c338d70c453fa4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dad/classPCI_1_1Manager.html#a4b205ba96418a407e3c338d70c453fa4">EnumerateFunction</a> (<a class="el" href="../../dd/ddd/arithmetic__operations_8c.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a> DeviceAddress, <a class="el" href="../../dd/ddd/arithmetic__operations_8c.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> Function, <a class="el" href="../../d0/d8f/namespacePCI.html#d2/d9d/structPCI_1_1PCIDevice">PCIDevice</a> dev)</td></tr>
<tr class="separator:a4b205ba96418a407e3c338d70c453fa4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66f9a85ecc01b7aa44b3ae80012ea0aa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dad/classPCI_1_1Manager.html#a66f9a85ecc01b7aa44b3ae80012ea0aa">EnumerateDevice</a> (<a class="el" href="../../dd/ddd/arithmetic__operations_8c.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a> BusAddress, <a class="el" href="../../dd/ddd/arithmetic__operations_8c.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> Device, <a class="el" href="../../d0/d8f/namespacePCI.html#d2/d9d/structPCI_1_1PCIDevice">PCIDevice</a> dev)</td></tr>
<tr class="separator:a66f9a85ecc01b7aa44b3ae80012ea0aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ae75b9d56c909afa47d8e581788d051"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dad/classPCI_1_1Manager.html#a4ae75b9d56c909afa47d8e581788d051">EnumerateBus</a> (<a class="el" href="../../dd/ddd/arithmetic__operations_8c.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a> BaseAddress, <a class="el" href="../../dd/ddd/arithmetic__operations_8c.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> Bus, <a class="el" href="../../d0/d8f/namespacePCI.html#d2/d9d/structPCI_1_1PCIDevice">PCIDevice</a> dev)</td></tr>
<tr class="separator:a4ae75b9d56c909afa47d8e581788d051"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23e4aaaaf6c352ecb4e38029b08cfeda"><td class="memItemLeft" align="right" valign="top">std::list&lt; <a class="el" href="../../d0/d8f/namespacePCI.html#d2/d9d/structPCI_1_1PCIDevice">PCIDevice</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dad/classPCI_1_1Manager.html#a23e4aaaaf6c352ecb4e38029b08cfeda">FindPCIDevice</a> (<a class="el" href="../../d6/de6/include_2types_8h.html#a3cb4a16b0e8d6af0af86d4fd6ba5fd9d">uint8_t</a> Class, <a class="el" href="../../d6/de6/include_2types_8h.html#a3cb4a16b0e8d6af0af86d4fd6ba5fd9d">uint8_t</a> Subclass, <a class="el" href="../../d6/de6/include_2types_8h.html#a3cb4a16b0e8d6af0af86d4fd6ba5fd9d">uint8_t</a> ProgIF)</td></tr>
<tr class="separator:a23e4aaaaf6c352ecb4e38029b08cfeda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40090cb7912dcbfdf2b551eb5e37a806"><td class="memItemLeft" align="right" valign="top">std::list&lt; <a class="el" href="../../d0/d8f/namespacePCI.html#d2/d9d/structPCI_1_1PCIDevice">PCIDevice</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dad/classPCI_1_1Manager.html#a40090cb7912dcbfdf2b551eb5e37a806">FindPCIDevice</a> (<a class="el" href="../../d6/de6/include_2types_8h.html#a5debae8b2a1ec20a6694c0c443ee399e">uint16_t</a> VendorID, <a class="el" href="../../d6/de6/include_2types_8h.html#a5debae8b2a1ec20a6694c0c443ee399e">uint16_t</a> DeviceID)</td></tr>
<tr class="separator:a40090cb7912dcbfdf2b551eb5e37a806"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8f8f071da2179cb83cc265baa5e965c"><td class="memItemLeft" align="right" valign="top">std::list&lt; <a class="el" href="../../d0/d8f/namespacePCI.html#d2/d9d/structPCI_1_1PCIDevice">PCIDevice</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dad/classPCI_1_1Manager.html#af8f8f071da2179cb83cc265baa5e965c">FindPCIDevice</a> (std::list&lt; <a class="el" href="../../d6/de6/include_2types_8h.html#a5debae8b2a1ec20a6694c0c443ee399e">uint16_t</a> &gt; VendorIDs, std::list&lt; <a class="el" href="../../d6/de6/include_2types_8h.html#a5debae8b2a1ec20a6694c0c443ee399e">uint16_t</a> &gt; DeviceIDs)</td></tr>
<tr class="separator:af8f8f071da2179cb83cc265baa5e965c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbab2ad7b5546945232d509932f4d0cb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dad/classPCI_1_1Manager.html#abbab2ad7b5546945232d509932f4d0cb">Manager</a> ()</td></tr>
<tr class="separator:abbab2ad7b5546945232d509932f4d0cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47707770b5bfa9a188aba15b57cc6993"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dad/classPCI_1_1Manager.html#a47707770b5bfa9a188aba15b57cc6993">~Manager</a> ()</td></tr>
<tr class="separator:a47707770b5bfa9a188aba15b57cc6993"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a3f636dd3bf86e541fac9b4797caa389f"><td class="memItemLeft" align="right" valign="top">std::list&lt; <a class="el" href="../../d0/d8f/namespacePCI.html#d2/d9d/structPCI_1_1PCIDevice">PCIDevice</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dad/classPCI_1_1Manager.html#a3f636dd3bf86e541fac9b4797caa389f">Devices</a></td></tr>
<tr class="separator:a3f636dd3bf86e541fac9b4797caa389f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="../../d9/dd5/pci_8hpp_source.html#l00227">227</a> of file <a class="el" href="../../d9/dd5/pci_8hpp_source.html">pci.hpp</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="abbab2ad7b5546945232d509932f4d0cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abbab2ad7b5546945232d509932f4d0cb">&#9670;&nbsp;</a></span>Manager()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PCI::Manager::Manager </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d87/pci_8cpp_source.html#l01101">1101</a> of file <a class="el" href="../../d5/d87/pci_8cpp_source.html">pci.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;    {</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;<span class="preprocessor">#if defined(a86)</span></div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../dd/d24/kernel_8cpp.html#ac4acbd97a34e46e0e3b1f643e7d9ce94">PowerManager</a>-&gt;<a class="code" href="../../d0/df9/classPower_1_1Power.html#a4da25ce55b83a893d1c217a23a443c8d">GetACPI</a>())</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;        {</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;            <a class="code" href="../../db/d16/debug_8h.html#a65f6c7faf3bfe3937629a7a365e06574">error</a>(<span class="stringliteral">&quot;ACPI not found&quot;</span>);</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;        }</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160; </div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;        <span class="keywordflow">if</span> (!((<a class="code" href="../../d3/d21/classACPI_1_1ACPI.html">ACPI::ACPI</a> *)<a class="code" href="../../dd/d24/kernel_8cpp.html#ac4acbd97a34e46e0e3b1f643e7d9ce94">PowerManager</a>-&gt;<a class="code" href="../../d0/df9/classPower_1_1Power.html#a4da25ce55b83a893d1c217a23a443c8d">GetACPI</a>())-&gt;MCFG)</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;        {</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;            <a class="code" href="../../db/d16/debug_8h.html#a65f6c7faf3bfe3937629a7a365e06574">error</a>(<span class="stringliteral">&quot;MCFG not found&quot;</span>);</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;        }</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160; </div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="../../d9/def/mb__64bit__map_8cpp.html#a9e27d048ee5d6937dd755a81b0e7b81e">Entries</a> = s_cst(<span class="keywordtype">int</span>, ((((<a class="code" href="../../d3/d21/classACPI_1_1ACPI.html">ACPI::ACPI</a> *)<a class="code" href="../../dd/d24/kernel_8cpp.html#ac4acbd97a34e46e0e3b1f643e7d9ce94">PowerManager</a>-&gt;<a class="code" href="../../d0/df9/classPower_1_1Power.html#a4da25ce55b83a893d1c217a23a443c8d">GetACPI</a>())-&gt;MCFG-&gt;Header.Length) - <span class="keyword">sizeof</span>(<a class="code" href="../../d3/d21/classACPI_1_1ACPI.html#dd/db0/structACPI_1_1ACPI_1_1MCFGHeader">ACPI::ACPI::MCFGHeader</a>)) / <span class="keyword">sizeof</span>(DeviceConfig));</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;        <a class="code" href="../../db/d82/classMemory_1_1Virtual.html">Memory::Virtual</a> vmm(<a class="code" href="../../d8/d71/memory_8cpp.html#a4333668045042c7f091a54e4962e51e9">KernelPageTable</a>);</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> t = 0; t &lt; <a class="code" href="../../d9/def/mb__64bit__map_8cpp.html#a9e27d048ee5d6937dd755a81b0e7b81e">Entries</a>; t++)</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;        {</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;            DeviceConfig *NewDeviceConfig = (DeviceConfig *)((<a class="code" href="../../d6/de6/include_2types_8h.html#a4788399d1d0b37ccf098a7da82254808">uintptr_t</a>)((<a class="code" href="../../d3/d21/classACPI_1_1ACPI.html">ACPI::ACPI</a> *)<a class="code" href="../../dd/d24/kernel_8cpp.html#ac4acbd97a34e46e0e3b1f643e7d9ce94">PowerManager</a>-&gt;<a class="code" href="../../d0/df9/classPower_1_1Power.html#a4da25ce55b83a893d1c217a23a443c8d">GetACPI</a>())-&gt;MCFG + <span class="keyword">sizeof</span>(<a class="code" href="../../d3/d21/classACPI_1_1ACPI.html#dd/db0/structACPI_1_1ACPI_1_1MCFGHeader">ACPI::ACPI::MCFGHeader</a>) + (<span class="keyword">sizeof</span>(DeviceConfig) * t));</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;            vmm.Map((<span class="keywordtype">void</span> *)NewDeviceConfig-&gt;BaseAddress, (<span class="keywordtype">void</span> *)NewDeviceConfig-&gt;BaseAddress, <a class="code" href="../../d3/d97/namespaceMemory.html#a0e8df7832e7ea87aa8937798d28472b2a2e2cbfec756dc2799e930bcb018f3da0">Memory::PTFlag::RW</a>);</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;            <a class="code" href="../../db/d16/debug_8h.html#a31e7d5c5946947277dce12f2584e7a43">debug</a>(<span class="stringliteral">&quot;PCI Entry %d Address:%p BUS:%#x-%#x&quot;</span>, t, NewDeviceConfig-&gt;BaseAddress,</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;                  NewDeviceConfig-&gt;StartBus, NewDeviceConfig-&gt;EndBus);</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160; </div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;            PCIDevice dev{};</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;            dev.Config = NewDeviceConfig;</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="../../dd/ddd/arithmetic__operations_8c.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> Bus = NewDeviceConfig-&gt;StartBus; Bus &lt; NewDeviceConfig-&gt;EndBus; Bus++)</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;                <a class="code" href="../../d4/dad/classPCI_1_1Manager.html#a4ae75b9d56c909afa47d8e581788d051">EnumerateBus</a>(NewDeviceConfig-&gt;BaseAddress, Bus, dev);</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;        }</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;<span class="preprocessor">#elif defined(aa64)</span></div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;        <a class="code" href="../../db/d16/debug_8h.html#a65f6c7faf3bfe3937629a7a365e06574">error</a>(<span class="stringliteral">&quot;PCI not implemented on aarch64&quot;</span>);</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;    }</div>
<div class="ttc" id="aarithmetic__operations_8c_html_a435d1572bf3f880d55459d9805097f62"><div class="ttname"><a href="../../dd/ddd/arithmetic__operations_8c.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a></div><div class="ttdeci">unsigned int uint32_t</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/ddd/arithmetic__operations_8c_source.html#l00295">arithmetic_operations.c:295</a></div></div>
<div class="ttc" id="aclassACPI_1_1ACPI_html"><div class="ttname"><a href="../../d3/d21/classACPI_1_1ACPI.html">ACPI::ACPI</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d90/acpi_8hpp_source.html#l00031">acpi.hpp:32</a></div></div>
<div class="ttc" id="aclassACPI_1_1ACPI_html_dd/db0/structACPI_1_1ACPI_1_1MCFGHeader"><div class="ttname"><a href="../../d3/d21/classACPI_1_1ACPI.html#dd/db0/structACPI_1_1ACPI_1_1MCFGHeader">ACPI::ACPI::MCFGHeader</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d90/acpi_8hpp_source.html#l00116">acpi.hpp:117</a></div></div>
<div class="ttc" id="aclassMemory_1_1Virtual_html"><div class="ttname"><a href="../../db/d82/classMemory_1_1Virtual.html">Memory::Virtual</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dff/virtual_8hpp_source.html#l00029">virtual.hpp:30</a></div></div>
<div class="ttc" id="aclassPCI_1_1Manager_html_a4ae75b9d56c909afa47d8e581788d051"><div class="ttname"><a href="../../d4/dad/classPCI_1_1Manager.html#a4ae75b9d56c909afa47d8e581788d051">PCI::Manager::EnumerateBus</a></div><div class="ttdeci">void EnumerateBus(uint64_t BaseAddress, uint32_t Bus, PCIDevice dev)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d87/pci_8cpp_source.html#l01024">pci.cpp:1024</a></div></div>
<div class="ttc" id="aclassPower_1_1Power_html_a4da25ce55b83a893d1c217a23a443c8d"><div class="ttname"><a href="../../d0/df9/classPower_1_1Power.html#a4da25ce55b83a893d1c217a23a443c8d">Power::Power::GetACPI</a></div><div class="ttdeci">void * GetACPI()</div><div class="ttdoc">Get Advanced Configuration and Power Interface. (Available only on x32 and x64)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfa/power_8hpp_source.html#l00038">power.hpp:38</a></div></div>
<div class="ttc" id="adebug_8h_html_a31e7d5c5946947277dce12f2584e7a43"><div class="ttname"><a href="../../db/d16/debug_8h.html#a31e7d5c5946947277dce12f2584e7a43">debug</a></div><div class="ttdeci">#define debug(Format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d16/debug_8h_source.html#l00094">debug.h:94</a></div></div>
<div class="ttc" id="adebug_8h_html_a65f6c7faf3bfe3937629a7a365e06574"><div class="ttname"><a href="../../db/d16/debug_8h.html#a65f6c7faf3bfe3937629a7a365e06574">error</a></div><div class="ttdeci">#define error(Format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d16/debug_8h_source.html#l00086">debug.h:86</a></div></div>
<div class="ttc" id="ainclude_2types_8h_html_a4788399d1d0b37ccf098a7da82254808"><div class="ttname"><a href="../../d6/de6/include_2types_8h.html#a4788399d1d0b37ccf098a7da82254808">uintptr_t</a></div><div class="ttdeci">__UINTPTR_TYPE__ uintptr_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/de6/include_2types_8h_source.html#l00186">types.h:186</a></div></div>
<div class="ttc" id="akernel_8cpp_html_ac4acbd97a34e46e0e3b1f643e7d9ce94"><div class="ttname"><a href="../../dd/d24/kernel_8cpp.html#ac4acbd97a34e46e0e3b1f643e7d9ce94">PowerManager</a></div><div class="ttdeci">Power::Power * PowerManager</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d24/kernel_8cpp_source.html#l00061">kernel.cpp:61</a></div></div>
<div class="ttc" id="amb__64bit__map_8cpp_html_a9e27d048ee5d6937dd755a81b0e7b81e"><div class="ttname"><a href="../../d9/def/mb__64bit__map_8cpp.html#a9e27d048ee5d6937dd755a81b0e7b81e">Entries</a></div><div class="ttdeci">PageMapLevel4 Entries[512]</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/def/mb__64bit__map_8cpp_source.html#l00000">mb_64bit_map.cpp:0</a></div></div>
<div class="ttc" id="amemory_8cpp_html_a4333668045042c7f091a54e4962e51e9"><div class="ttname"><a href="../../d8/d71/memory_8cpp.html#a4333668045042c7f091a54e4962e51e9">KernelPageTable</a></div><div class="ttdeci">PageTable * KernelPageTable</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d71/memory_8cpp_source.html#l00045">memory.cpp:45</a></div></div>
<div class="ttc" id="anamespaceMemory_html_a0e8df7832e7ea87aa8937798d28472b2a2e2cbfec756dc2799e930bcb018f3da0"><div class="ttname"><a href="../../d3/d97/namespaceMemory.html#a0e8df7832e7ea87aa8937798d28472b2a2e2cbfec756dc2799e930bcb018f3da0">Memory::RW</a></div><div class="ttdeci">@ RW</div><div class="ttdoc">Read/Write.</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2d/table_8hpp_source.html#l00035">table.hpp:35</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d9/dd5/pci_8hpp_source.html#l00211">PCI::DeviceConfig::BaseAddress</a>, <a class="el" href="../../d9/dd5/pci_8hpp_source.html#l00221">PCI::PCIDevice::Config</a>, <a class="el" href="../../db/d16/debug_8h_source.html#l00094">debug</a>, <a class="el" href="../../d9/dd5/pci_8hpp_source.html#l00214">PCI::DeviceConfig::EndBus</a>, <a class="el" href="../../d9/def/mb__64bit__map_8cpp_source.html#l00000">Entries</a>, <a class="el" href="../../d5/d87/pci_8cpp_source.html#l01024">EnumerateBus()</a>, <a class="el" href="../../db/d16/debug_8h_source.html#l00086">error</a>, <a class="el" href="../../db/dfa/power_8hpp_source.html#l00038">Power::Power::GetACPI()</a>, <a class="el" href="../../d8/d71/memory_8cpp_source.html#l00045">KernelPageTable</a>, <a class="el" href="../../d0/d6c/arch_2aarch64_2memory_2vmm_8cpp_source.html#l00033">Memory::Virtual::Map()</a>, <a class="el" href="../../dd/d24/kernel_8cpp_source.html#l00061">PowerManager</a>, <a class="el" href="../../de/d2d/table_8hpp_source.html#l00035">Memory::RW</a>, and <a class="el" href="../../d9/dd5/pci_8hpp_source.html#l00213">PCI::DeviceConfig::StartBus</a>.</p>

</div>
</div>
<a id="a47707770b5bfa9a188aba15b57cc6993"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47707770b5bfa9a188aba15b57cc6993">&#9670;&nbsp;</a></span>~Manager()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PCI::Manager::~Manager </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d87/pci_8cpp_source.html#l01135">1135</a> of file <a class="el" href="../../d5/d87/pci_8cpp_source.html">pci.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;{}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a4ae75b9d56c909afa47d8e581788d051"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ae75b9d56c909afa47d8e581788d051">&#9670;&nbsp;</a></span>EnumerateBus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PCI::Manager::EnumerateBus </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/ddd/arithmetic__operations_8c.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a>&#160;</td>
          <td class="paramname"><em>BaseAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/ddd/arithmetic__operations_8c.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td>
          <td class="paramname"><em>Bus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/d8f/namespacePCI.html#d2/d9d/structPCI_1_1PCIDevice">PCIDevice</a>&#160;</td>
          <td class="paramname"><em>dev</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d87/pci_8cpp_source.html#l01024">1024</a> of file <a class="el" href="../../d5/d87/pci_8cpp_source.html">pci.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;    {</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;        dev.Bus = Bus;</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160; </div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;        <a class="code" href="../../d6/de6/include_2types_8h.html#a4788399d1d0b37ccf098a7da82254808">uintptr_t</a> Offset = Bus &lt;&lt; 20;</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;        <a class="code" href="../../dd/ddd/arithmetic__operations_8c.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a> BusAddress = BaseAddress + Offset;</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;        <a class="code" href="../../db/d82/classMemory_1_1Virtual.html">Memory::Virtual</a>(<a class="code" href="../../d8/d71/memory_8cpp.html#a4333668045042c7f091a54e4962e51e9">KernelPageTable</a>).<a class="code" href="../../db/d82/classMemory_1_1Virtual.html#a1a5c185804c552d127a0e90162600f27">Map</a>((<span class="keywordtype">void</span> *)BusAddress, (<span class="keywordtype">void</span> *)BusAddress, <a class="code" href="../../d3/d97/namespaceMemory.html#a0e8df7832e7ea87aa8937798d28472b2a2e2cbfec756dc2799e930bcb018f3da0">Memory::PTFlag::RW</a>);</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;        PCIDeviceHeader *PCIDeviceHdr = (PCIDeviceHeader *)BusAddress;</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160; </div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;        <span class="keywordflow">if</span> (Bus != 0) <span class="comment">// TODO: VirtualBox workaround (UNTESTED ON REAL HARDWARE!)</span></div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;        {</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;            <span class="keywordflow">if</span> (PCIDeviceHdr-&gt;DeviceID == 0)</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;            <span class="keywordflow">if</span> (PCIDeviceHdr-&gt;DeviceID == 0xFFFF)</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;        }</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160; </div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;        <a class="code" href="../../db/d16/debug_8h.html#a31e7d5c5946947277dce12f2584e7a43">debug</a>(<span class="stringliteral">&quot;PCI Bus DeviceID:%#x VendorID:%#x BIST:%#x Cache:%#x Class:%#x Cmd:%#x HdrType:%#x LatencyTimer:%#x ProgIF:%#x RevID:%#x Status:%#x SubClass:%#x &quot;</span>,</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;              PCIDeviceHdr-&gt;DeviceID, PCIDeviceHdr-&gt;VendorID, PCIDeviceHdr-&gt;BIST,</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;              PCIDeviceHdr-&gt;CacheLineSize, PCIDeviceHdr-&gt;Class, PCIDeviceHdr-&gt;Command,</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;              PCIDeviceHdr-&gt;HeaderType, PCIDeviceHdr-&gt;LatencyTimer, PCIDeviceHdr-&gt;ProgIF,</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;              PCIDeviceHdr-&gt;RevisionID, PCIDeviceHdr-&gt;Status, PCIDeviceHdr-&gt;Subclass);</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160; </div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="../../dd/ddd/arithmetic__operations_8c.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> Device = 0; Device &lt; 32; Device++)</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;            <a class="code" href="../../d4/dad/classPCI_1_1Manager.html#a66f9a85ecc01b7aa44b3ae80012ea0aa">EnumerateDevice</a>(BusAddress, Device, dev);</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;    }</div>
<div class="ttc" id="aarithmetic__operations_8c_html_aaa5d1cd013383c889537491c3cfd9aad"><div class="ttname"><a href="../../dd/ddd/arithmetic__operations_8c.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a></div><div class="ttdeci">unsigned long long uint64_t</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/ddd/arithmetic__operations_8c_source.html#l00294">arithmetic_operations.c:294</a></div></div>
<div class="ttc" id="aclassMemory_1_1Virtual_html_a1a5c185804c552d127a0e90162600f27"><div class="ttname"><a href="../../db/d82/classMemory_1_1Virtual.html#a1a5c185804c552d127a0e90162600f27">Memory::Virtual::Map</a></div><div class="ttdeci">void Map(void *VirtualAddress, void *PhysicalAddress, uint64_t Flag=PTFlag::P, MapType Type=MapType::FourKiB)</div><div class="ttdoc">Map page.</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6c/arch_2aarch64_2memory_2vmm_8cpp_source.html#l00033">vmm.cpp:33</a></div></div>
<div class="ttc" id="aclassPCI_1_1Manager_html_a66f9a85ecc01b7aa44b3ae80012ea0aa"><div class="ttname"><a href="../../d4/dad/classPCI_1_1Manager.html#a66f9a85ecc01b7aa44b3ae80012ea0aa">PCI::Manager::EnumerateDevice</a></div><div class="ttdeci">void EnumerateDevice(uint64_t BusAddress, uint32_t Device, PCIDevice dev)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d87/pci_8cpp_source.html#l01006">pci.cpp:1006</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d9/dd5/pci_8hpp_source.html#l00124">PCI::PCIDeviceHeader::BIST</a>, <a class="el" href="../../d9/dd5/pci_8hpp_source.html#l00222">PCI::PCIDevice::Bus</a>, <a class="el" href="../../d9/dd5/pci_8hpp_source.html#l00121">PCI::PCIDeviceHeader::CacheLineSize</a>, <a class="el" href="../../d9/dd5/pci_8hpp_source.html#l00120">PCI::PCIDeviceHeader::Class</a>, <a class="el" href="../../d9/dd5/pci_8hpp_source.html#l00115">PCI::PCIDeviceHeader::Command</a>, <a class="el" href="../../db/d16/debug_8h_source.html#l00094">debug</a>, <a class="el" href="../../d9/dd5/pci_8hpp_source.html#l00114">PCI::PCIDeviceHeader::DeviceID</a>, <a class="el" href="../../d5/d87/pci_8cpp_source.html#l01006">EnumerateDevice()</a>, <a class="el" href="../../d9/dd5/pci_8hpp_source.html#l00123">PCI::PCIDeviceHeader::HeaderType</a>, <a class="el" href="../../d8/d71/memory_8cpp_source.html#l00045">KernelPageTable</a>, <a class="el" href="../../d9/dd5/pci_8hpp_source.html#l00122">PCI::PCIDeviceHeader::LatencyTimer</a>, <a class="el" href="../../d0/d6c/arch_2aarch64_2memory_2vmm_8cpp_source.html#l00033">Memory::Virtual::Map()</a>, <a class="el" href="../../d9/dd5/pci_8hpp_source.html#l00118">PCI::PCIDeviceHeader::ProgIF</a>, <a class="el" href="../../d9/dd5/pci_8hpp_source.html#l00117">PCI::PCIDeviceHeader::RevisionID</a>, <a class="el" href="../../de/d2d/table_8hpp_source.html#l00035">Memory::RW</a>, <a class="el" href="../../d9/dd5/pci_8hpp_source.html#l00116">PCI::PCIDeviceHeader::Status</a>, <a class="el" href="../../d9/dd5/pci_8hpp_source.html#l00119">PCI::PCIDeviceHeader::Subclass</a>, and <a class="el" href="../../d9/dd5/pci_8hpp_source.html#l00113">PCI::PCIDeviceHeader::VendorID</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d87/pci_8cpp_source.html#l01101">Manager()</a>.</p>

</div>
</div>
<a id="a66f9a85ecc01b7aa44b3ae80012ea0aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66f9a85ecc01b7aa44b3ae80012ea0aa">&#9670;&nbsp;</a></span>EnumerateDevice()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PCI::Manager::EnumerateDevice </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/ddd/arithmetic__operations_8c.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a>&#160;</td>
          <td class="paramname"><em>BusAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/ddd/arithmetic__operations_8c.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td>
          <td class="paramname"><em>Device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/d8f/namespacePCI.html#d2/d9d/structPCI_1_1PCIDevice">PCIDevice</a>&#160;</td>
          <td class="paramname"><em>dev</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d87/pci_8cpp_source.html#l01006">1006</a> of file <a class="el" href="../../d5/d87/pci_8cpp_source.html">pci.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;    {</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;        dev.Device = Device;</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160; </div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;        <a class="code" href="../../d6/de6/include_2types_8h.html#a4788399d1d0b37ccf098a7da82254808">uintptr_t</a> Offset = Device &lt;&lt; 15;</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;        <a class="code" href="../../dd/ddd/arithmetic__operations_8c.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a> DeviceAddress = BusAddress + Offset;</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;        <a class="code" href="../../db/d82/classMemory_1_1Virtual.html">Memory::Virtual</a>(<a class="code" href="../../d8/d71/memory_8cpp.html#a4333668045042c7f091a54e4962e51e9">KernelPageTable</a>).<a class="code" href="../../db/d82/classMemory_1_1Virtual.html#a1a5c185804c552d127a0e90162600f27">Map</a>((<span class="keywordtype">void</span> *)DeviceAddress, (<span class="keywordtype">void</span> *)DeviceAddress, <a class="code" href="../../d3/d97/namespaceMemory.html#a0e8df7832e7ea87aa8937798d28472b2a2e2cbfec756dc2799e930bcb018f3da0">Memory::PTFlag::RW</a>);</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;        PCIDeviceHeader *PCIDeviceHdr = (PCIDeviceHeader *)DeviceAddress;</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160; </div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;        <span class="keywordflow">if</span> (PCIDeviceHdr-&gt;DeviceID == 0)</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;        <span class="keywordflow">if</span> (PCIDeviceHdr-&gt;DeviceID == 0xFFFF)</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160; </div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="../../dd/ddd/arithmetic__operations_8c.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> Function = 0; Function &lt; 8; Function++)</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;            <a class="code" href="../../d4/dad/classPCI_1_1Manager.html#a4b205ba96418a407e3c338d70c453fa4">EnumerateFunction</a>(DeviceAddress, Function, dev);</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    }</div>
<div class="ttc" id="aclassPCI_1_1Manager_html_a4b205ba96418a407e3c338d70c453fa4"><div class="ttname"><a href="../../d4/dad/classPCI_1_1Manager.html#a4b205ba96418a407e3c338d70c453fa4">PCI::Manager::EnumerateFunction</a></div><div class="ttdeci">void EnumerateFunction(uint64_t DeviceAddress, uint32_t Function, PCIDevice dev)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d87/pci_8cpp_source.html#l00985">pci.cpp:985</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d9/dd5/pci_8hpp_source.html#l00223">PCI::PCIDevice::Device</a>, <a class="el" href="../../d9/dd5/pci_8hpp_source.html#l00114">PCI::PCIDeviceHeader::DeviceID</a>, <a class="el" href="../../d5/d87/pci_8cpp_source.html#l00985">EnumerateFunction()</a>, <a class="el" href="../../d8/d71/memory_8cpp_source.html#l00045">KernelPageTable</a>, <a class="el" href="../../d0/d6c/arch_2aarch64_2memory_2vmm_8cpp_source.html#l00033">Memory::Virtual::Map()</a>, and <a class="el" href="../../de/d2d/table_8hpp_source.html#l00035">Memory::RW</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d87/pci_8cpp_source.html#l01024">EnumerateBus()</a>.</p>

</div>
</div>
<a id="a4b205ba96418a407e3c338d70c453fa4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b205ba96418a407e3c338d70c453fa4">&#9670;&nbsp;</a></span>EnumerateFunction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PCI::Manager::EnumerateFunction </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/ddd/arithmetic__operations_8c.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a>&#160;</td>
          <td class="paramname"><em>DeviceAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/ddd/arithmetic__operations_8c.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td>
          <td class="paramname"><em>Function</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/d8f/namespacePCI.html#d2/d9d/structPCI_1_1PCIDevice">PCIDevice</a>&#160;</td>
          <td class="paramname"><em>dev</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d87/pci_8cpp_source.html#l00985">985</a> of file <a class="el" href="../../d5/d87/pci_8cpp_source.html">pci.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;    {</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;        dev.Function = Function;</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160; </div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;        <a class="code" href="../../d6/de6/include_2types_8h.html#a4788399d1d0b37ccf098a7da82254808">uintptr_t</a> Offset = Function &lt;&lt; 12;</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;        <a class="code" href="../../dd/ddd/arithmetic__operations_8c.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a> FunctionAddress = DeviceAddress + Offset;</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;        <a class="code" href="../../db/d82/classMemory_1_1Virtual.html">Memory::Virtual</a>(<a class="code" href="../../d8/d71/memory_8cpp.html#a4333668045042c7f091a54e4962e51e9">KernelPageTable</a>).<a class="code" href="../../db/d82/classMemory_1_1Virtual.html#a1a5c185804c552d127a0e90162600f27">Map</a>((<span class="keywordtype">void</span> *)FunctionAddress, (<span class="keywordtype">void</span> *)FunctionAddress, <a class="code" href="../../d3/d97/namespaceMemory.html#a0e8df7832e7ea87aa8937798d28472b2a2e2cbfec756dc2799e930bcb018f3da0">Memory::PTFlag::RW</a>);</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;        PCIDeviceHeader *PCIDeviceHdr = (PCIDeviceHeader *)FunctionAddress;</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;        dev.Header = PCIDeviceHdr;</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160; </div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;        <span class="keywordflow">if</span> (PCIDeviceHdr-&gt;DeviceID == 0)</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;        <span class="keywordflow">if</span> (PCIDeviceHdr-&gt;DeviceID == 0xFFFF)</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160; </div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;        <a class="code" href="../../d4/dad/classPCI_1_1Manager.html#a3f636dd3bf86e541fac9b4797caa389f">Devices</a>.push_back(dev);</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;        e(dev);</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;    }</div>
<div class="ttc" id="aclassPCI_1_1Manager_html_a3f636dd3bf86e541fac9b4797caa389f"><div class="ttname"><a href="../../d4/dad/classPCI_1_1Manager.html#a3f636dd3bf86e541fac9b4797caa389f">PCI::Manager::Devices</a></div><div class="ttdeci">std::list&lt; PCIDevice &gt; Devices</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd5/pci_8hpp_source.html#l00230">pci.hpp:230</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d9/dd5/pci_8hpp_source.html#l00114">PCI::PCIDeviceHeader::DeviceID</a>, <a class="el" href="../../d9/dd5/pci_8hpp_source.html#l00230">Devices</a>, <a class="el" href="../../d9/dd5/pci_8hpp_source.html#l00224">PCI::PCIDevice::Function</a>, <a class="el" href="../../d9/dd5/pci_8hpp_source.html#l00220">PCI::PCIDevice::Header</a>, <a class="el" href="../../d8/d71/memory_8cpp_source.html#l00045">KernelPageTable</a>, <a class="el" href="../../d0/d6c/arch_2aarch64_2memory_2vmm_8cpp_source.html#l00033">Memory::Virtual::Map()</a>, and <a class="el" href="../../de/d2d/table_8hpp_source.html#l00035">Memory::RW</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d87/pci_8cpp_source.html#l01006">EnumerateDevice()</a>.</p>

</div>
</div>
<a id="af8f8f071da2179cb83cc265baa5e965c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8f8f071da2179cb83cc265baa5e965c">&#9670;&nbsp;</a></span>FindPCIDevice() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::list&lt; <a class="el" href="../../d0/d8f/namespacePCI.html#d2/d9d/structPCI_1_1PCIDevice">PCIDevice</a> &gt; PCI::Manager::FindPCIDevice </td>
          <td>(</td>
          <td class="paramtype">std::list&lt; <a class="el" href="../../d6/de6/include_2types_8h.html#a5debae8b2a1ec20a6694c0c443ee399e">uint16_t</a> &gt;&#160;</td>
          <td class="paramname"><em>VendorIDs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::list&lt; <a class="el" href="../../d6/de6/include_2types_8h.html#a5debae8b2a1ec20a6694c0c443ee399e">uint16_t</a> &gt;&#160;</td>
          <td class="paramname"><em>DeviceIDs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d87/pci_8cpp_source.html#l01080">1080</a> of file <a class="el" href="../../d5/d87/pci_8cpp_source.html">pci.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;    {</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;        std::list&lt;PCIDevice&gt; DeviceFound;</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;        <span class="keywordflow">foreach</span> (<span class="keyword">auto</span> dev <span class="keywordflow">in</span> <a class="code" href="../../d4/dad/classPCI_1_1Manager.html#a3f636dd3bf86e541fac9b4797caa389f">Devices</a>)</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;        {</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;            <span class="keywordflow">foreach</span> (<span class="keyword">auto</span> VendorID <span class="keywordflow">in</span> VendorIDs)</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;            {</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;                <span class="keywordflow">foreach</span> (<span class="keyword">auto</span> DeviceID <span class="keywordflow">in</span> DeviceIDs)</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;                {</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;                    <span class="keywordflow">if</span> (dev.Header-&gt;VendorID == VendorID &amp;&amp;</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;                        dev.Header-&gt;DeviceID == DeviceID)</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;                    {</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;                        DeviceFound.push_back(dev);</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;                    }</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;                }</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;            }</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;        }</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;        <span class="keywordflow">return</span> DeviceFound;</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d9/dd5/pci_8hpp_source.html#l00230">Devices</a>.</p>

</div>
</div>
<a id="a40090cb7912dcbfdf2b551eb5e37a806"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40090cb7912dcbfdf2b551eb5e37a806">&#9670;&nbsp;</a></span>FindPCIDevice() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::list&lt; <a class="el" href="../../d0/d8f/namespacePCI.html#d2/d9d/structPCI_1_1PCIDevice">PCIDevice</a> &gt; PCI::Manager::FindPCIDevice </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/de6/include_2types_8h.html#a5debae8b2a1ec20a6694c0c443ee399e">uint16_t</a>&#160;</td>
          <td class="paramname"><em>VendorID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/de6/include_2types_8h.html#a5debae8b2a1ec20a6694c0c443ee399e">uint16_t</a>&#160;</td>
          <td class="paramname"><em>DeviceID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d87/pci_8cpp_source.html#l01066">1066</a> of file <a class="el" href="../../d5/d87/pci_8cpp_source.html">pci.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;    {</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;        std::list&lt;PCIDevice&gt; DeviceFound;</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;        <span class="keywordflow">foreach</span> (<span class="keyword">auto</span> dev <span class="keywordflow">in</span> <a class="code" href="../../d4/dad/classPCI_1_1Manager.html#a3f636dd3bf86e541fac9b4797caa389f">Devices</a>)</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;        {</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;            <span class="keywordflow">if</span> (dev.Header-&gt;VendorID == VendorID &amp;&amp;</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;                dev.Header-&gt;DeviceID == DeviceID)</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;            {</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;                DeviceFound.push_back(dev);</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;            }</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;        }</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;        <span class="keywordflow">return</span> DeviceFound;</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d9/dd5/pci_8hpp_source.html#l00230">Devices</a>.</p>

</div>
</div>
<a id="a23e4aaaaf6c352ecb4e38029b08cfeda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23e4aaaaf6c352ecb4e38029b08cfeda">&#9670;&nbsp;</a></span>FindPCIDevice() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::list&lt; <a class="el" href="../../d0/d8f/namespacePCI.html#d2/d9d/structPCI_1_1PCIDevice">PCIDevice</a> &gt; PCI::Manager::FindPCIDevice </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/de6/include_2types_8h.html#a3cb4a16b0e8d6af0af86d4fd6ba5fd9d">uint8_t</a>&#160;</td>
          <td class="paramname"><em>Class</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/de6/include_2types_8h.html#a3cb4a16b0e8d6af0af86d4fd6ba5fd9d">uint8_t</a>&#160;</td>
          <td class="paramname"><em>Subclass</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/de6/include_2types_8h.html#a3cb4a16b0e8d6af0af86d4fd6ba5fd9d">uint8_t</a>&#160;</td>
          <td class="paramname"><em>ProgIF</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d87/pci_8cpp_source.html#l01051">1051</a> of file <a class="el" href="../../d5/d87/pci_8cpp_source.html">pci.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;    {</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;        std::list&lt;PCIDevice&gt; DeviceFound;</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;        <span class="keywordflow">foreach</span> (<span class="keyword">auto</span> dev <span class="keywordflow">in</span> <a class="code" href="../../d4/dad/classPCI_1_1Manager.html#a3f636dd3bf86e541fac9b4797caa389f">Devices</a>)</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;        {</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;            <span class="keywordflow">if</span> (dev.Header-&gt;Class == Class &amp;&amp;</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;                dev.Header-&gt;Subclass == Subclass &amp;&amp;</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;                dev.Header-&gt;ProgIF == ProgIF)</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;            {</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;                DeviceFound.push_back(dev);</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;            }</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;        }</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;        <span class="keywordflow">return</span> DeviceFound;</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d9/dd5/pci_8hpp_source.html#l00230">Devices</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d48/api_8cpp_source.html#l00542">Driver::GetPCIDevices()</a>.</p>

</div>
</div>
<a id="a168c35931536a3bdafa81956fbc9bda9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a168c35931536a3bdafa81956fbc9bda9">&#9670;&nbsp;</a></span>GetDevices()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::list&lt;<a class="el" href="../../d0/d8f/namespacePCI.html#d2/d9d/structPCI_1_1PCIDevice">PCIDevice</a>&gt; PCI::Manager::GetDevices </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/dd5/pci_8hpp_source.html#l00233">233</a> of file <a class="el" href="../../d9/dd5/pci_8hpp_source.html">pci.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="../../d4/dad/classPCI_1_1Manager.html#a3f636dd3bf86e541fac9b4797caa389f">Devices</a>; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d9/dd5/pci_8hpp_source.html#l00230">Devices</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d8d/lspci_8cpp_source.html#l00026">cmd_lspci()</a>.</p>

</div>
</div>
<a id="a14af279e0fc618184821475afb86b65c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14af279e0fc618184821475afb86b65c">&#9670;&nbsp;</a></span>MapPCIAddresses()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PCI::Manager::MapPCIAddresses </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d8f/namespacePCI.html#d2/d9d/structPCI_1_1PCIDevice">PCIDevice</a>&#160;</td>
          <td class="paramname"><em>Device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../df/d1d/classMemory_1_1PageTable.html">Memory::PageTable</a> *&#160;</td>
          <td class="paramname"><em>Table</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d5/d87/pci_8cpp_source.html#l00877">877</a> of file <a class="el" href="../../d5/d87/pci_8cpp_source.html">pci.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;    {</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;        <a class="code" href="../../db/d16/debug_8h.html#a31e7d5c5946947277dce12f2584e7a43">debug</a>(<span class="stringliteral">&quot;Header Type: %d&quot;</span>, Device.Header-&gt;HeaderType);</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;        <span class="keywordflow">switch</span> (Device.Header-&gt;HeaderType)</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;        {</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;        <span class="keywordflow">case</span> 128:</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;            <a class="code" href="../../db/d16/debug_8h.html#a1d297376472cc7f4ad7c70327efa7b55">warn</a>(<span class="stringliteral">&quot;Unknown header type %d! Guessing PCI Header 0&quot;</span>,</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;                 Device.Header-&gt;HeaderType);</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;            [[fallthrough]];</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;        <span class="keywordflow">case</span> 0: <span class="comment">/* PCI Header 0 */</span></div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;        {</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;            PCIHeader0 *hdr0 = (PCIHeader0 *)Device.Header;</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160; </div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;            <a class="code" href="../../dd/ddd/arithmetic__operations_8c.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> BAR[6];</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;            <span class="keywordtype">size_t</span> BARsSize[6];</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160; </div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;            BAR[0] = hdr0-&gt;BAR0;</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;            BAR[1] = hdr0-&gt;BAR1;</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;            BAR[2] = hdr0-&gt;BAR2;</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;            BAR[3] = hdr0-&gt;BAR3;</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;            BAR[4] = hdr0-&gt;BAR4;</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;            BAR[5] = hdr0-&gt;BAR5;</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160; </div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;            <a class="code" href="../../db/d16/debug_8h.html#a31e7d5c5946947277dce12f2584e7a43">debug</a>(<span class="stringliteral">&quot;Type: %d; IOBase: %#lx; MemoryBase: %#lx&quot;</span>,</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;                  BAR[0] &amp; 1, BAR[1] &amp; (~3), BAR[0] &amp; (~15));</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160; </div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;            <span class="comment">/* BARs Size */</span></div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">short</span> i = 0; i &lt; 6; i++)</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;            {</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;                <span class="keywordflow">if</span> (BAR[i] == 0)</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160; </div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;                <span class="keywordtype">size_t</span> <a class="code" href="../../d1/dc0/multiboot_8h.html#a6d813a0f2b5281b18dea3f4cda696c33">size</a>;</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;                <span class="keywordflow">if</span> ((BAR[i] &amp; 1) == 0) <span class="comment">/* Memory Base */</span></div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;                {</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;                    hdr0-&gt;BAR0 = 0xFFFFFFFF;</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;                    <a class="code" href="../../d1/dc0/multiboot_8h.html#a6d813a0f2b5281b18dea3f4cda696c33">size</a> = hdr0-&gt;BAR0;</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;                    hdr0-&gt;BAR0 = BAR[i];</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;                    BARsSize[i] = <a class="code" href="../../d1/dc0/multiboot_8h.html#a6d813a0f2b5281b18dea3f4cda696c33">size</a> &amp; (~15);</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;                    BARsSize[i] = ~BARsSize[i] + 1;</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;                    BARsSize[i] = BARsSize[i] &amp; 0xFFFFFFFF;</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;                    <a class="code" href="../../db/d16/debug_8h.html#a31e7d5c5946947277dce12f2584e7a43">debug</a>(<span class="stringliteral">&quot;BAR%d %#lx size: %d&quot;</span>,</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;                          i, BAR[i], BARsSize[i]);</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;                }</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((BAR[i] &amp; 1) == 1) <span class="comment">/* I/O Base */</span></div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;                {</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;                    hdr0-&gt;BAR1 = 0xFFFFFFFF;</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;                    <a class="code" href="../../d1/dc0/multiboot_8h.html#a6d813a0f2b5281b18dea3f4cda696c33">size</a> = hdr0-&gt;BAR1;</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;                    hdr0-&gt;BAR1 = BAR[i];</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;                    BARsSize[i] = <a class="code" href="../../d1/dc0/multiboot_8h.html#a6d813a0f2b5281b18dea3f4cda696c33">size</a> &amp; (~3);</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;                    BARsSize[i] = ~BARsSize[i] + 1;</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;                    BARsSize[i] = BARsSize[i] &amp; 0xFFFF;</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;                    <a class="code" href="../../db/d16/debug_8h.html#a31e7d5c5946947277dce12f2584e7a43">debug</a>(<span class="stringliteral">&quot;BAR%d %#lx size: %d&quot;</span>,</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;                          i, BAR[i], BARsSize[i]);</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;                }</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;            }</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160; </div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;            <span class="comment">/* Mapping the BARs */</span></div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">short</span> i = 0; i &lt; 6; i++)</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;            {</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;                <span class="keywordflow">if</span> (BAR[i] == 0)</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160; </div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;                <span class="keywordflow">if</span> ((BAR[i] &amp; 1) == 0) <span class="comment">/* Memory Base */</span></div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;                {</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;                    <a class="code" href="../../d6/de6/include_2types_8h.html#a4788399d1d0b37ccf098a7da82254808">uintptr_t</a> BARBase = BAR[i] &amp; (~15);</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;                    <span class="keywordtype">size_t</span> BARSize = BARsSize[i];</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160; </div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;                    <a class="code" href="../../db/d16/debug_8h.html#a31e7d5c5946947277dce12f2584e7a43">debug</a>(<span class="stringliteral">&quot;Mapping BAR%d %#lx-%#lx&quot;</span>,</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;                          i, BARBase, BARBase + BARSize);</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160; </div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;                    <span class="keywordflow">if</span> (BARSize &gt; 0)</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;                        <a class="code" href="../../db/d82/classMemory_1_1Virtual.html">Memory::Virtual</a>(Table).<a class="code" href="../../db/d82/classMemory_1_1Virtual.html#a1a5c185804c552d127a0e90162600f27">Map</a>((<span class="keywordtype">void</span> *)BARBase, (<span class="keywordtype">void</span> *)BARBase,</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;                                                   BARSize, <a class="code" href="../../d3/d97/namespaceMemory.html#a0e8df7832e7ea87aa8937798d28472b2a2e2cbfec756dc2799e930bcb018f3da0">Memory::RW</a> | <a class="code" href="../../d3/d97/namespaceMemory.html#a0e8df7832e7ea87aa8937798d28472b2a90b062749a0e0013b88dabde45494ed2">Memory::PWT</a>);</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;                }</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((BAR[i] &amp; 1) == 1) <span class="comment">/* I/O Base */</span></div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;                {</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;                    <a class="code" href="../../d6/de6/include_2types_8h.html#a4788399d1d0b37ccf098a7da82254808">uintptr_t</a> BARBase = BAR[i] &amp; (~3);</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;                    <span class="keywordtype">size_t</span> BARSize = BARsSize[i];</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160; </div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;                    <a class="code" href="../../db/d16/debug_8h.html#a31e7d5c5946947277dce12f2584e7a43">debug</a>(<span class="stringliteral">&quot;Mapping BAR%d %#x-%#x&quot;</span>,</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;                          i, BARBase, BARBase + BARSize);</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160; </div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;                    <span class="keywordflow">if</span> (BARSize &gt; 0)</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;                        <a class="code" href="../../db/d82/classMemory_1_1Virtual.html">Memory::Virtual</a>(Table).<a class="code" href="../../db/d82/classMemory_1_1Virtual.html#a1a5c185804c552d127a0e90162600f27">Map</a>((<span class="keywordtype">void</span> *)BARBase, (<span class="keywordtype">void</span> *)BARBase,</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;                                                   BARSize, <a class="code" href="../../d3/d97/namespaceMemory.html#a0e8df7832e7ea87aa8937798d28472b2a2e2cbfec756dc2799e930bcb018f3da0">Memory::RW</a> | <a class="code" href="../../d3/d97/namespaceMemory.html#a0e8df7832e7ea87aa8937798d28472b2a90b062749a0e0013b88dabde45494ed2">Memory::PWT</a>);</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;                }</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;            }</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;        }</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;        <span class="keywordflow">case</span> 1: <span class="comment">/* PCI Header 1 (PCI-to-PCI Bridge) */</span></div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;        {</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;            <a class="code" href="../../db/d16/debug_8h.html#abd4acaf7c67bd126aefd672fbbd5747f">fixme</a>(<span class="stringliteral">&quot;PCI Header 1 (PCI-to-PCI Bridge) not implemented yet&quot;</span>);</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;        }</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;        <span class="keywordflow">case</span> 2: <span class="comment">/* PCI Header 2 (PCI-to-CardBus Bridge) */</span></div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;        {</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;            <a class="code" href="../../db/d16/debug_8h.html#abd4acaf7c67bd126aefd672fbbd5747f">fixme</a>(<span class="stringliteral">&quot;PCI Header 2 (PCI-to-CardBus Bridge) not implemented yet&quot;</span>);</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;        }</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;        {</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;            <a class="code" href="../../db/d16/debug_8h.html#a65f6c7faf3bfe3937629a7a365e06574">error</a>(<span class="stringliteral">&quot;Unknown header type %d&quot;</span>, Device.Header-&gt;HeaderType);</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;        }</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;        }</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    }</div>
<div class="ttc" id="adebug_8h_html_a1d297376472cc7f4ad7c70327efa7b55"><div class="ttname"><a href="../../db/d16/debug_8h.html#a1d297376472cc7f4ad7c70327efa7b55">warn</a></div><div class="ttdeci">#define warn(Format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d16/debug_8h_source.html#l00087">debug.h:87</a></div></div>
<div class="ttc" id="adebug_8h_html_abd4acaf7c67bd126aefd672fbbd5747f"><div class="ttname"><a href="../../db/d16/debug_8h.html#abd4acaf7c67bd126aefd672fbbd5747f">fixme</a></div><div class="ttdeci">#define fixme(Format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d16/debug_8h_source.html#l00099">debug.h:99</a></div></div>
<div class="ttc" id="amultiboot_8h_html_a6d813a0f2b5281b18dea3f4cda696c33"><div class="ttname"><a href="../../d1/dc0/multiboot_8h.html#a6d813a0f2b5281b18dea3f4cda696c33">size</a></div><div class="ttdeci">multiboot_uint32_t size</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/multiboot_8h_source.html#l00000">multiboot.h:0</a></div></div>
<div class="ttc" id="anamespaceMemory_html_a0e8df7832e7ea87aa8937798d28472b2a90b062749a0e0013b88dabde45494ed2"><div class="ttname"><a href="../../d3/d97/namespaceMemory.html#a0e8df7832e7ea87aa8937798d28472b2a90b062749a0e0013b88dabde45494ed2">Memory::PWT</a></div><div class="ttdeci">@ PWT</div><div class="ttdoc">Write-Through.</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2d/table_8hpp_source.html#l00041">table.hpp:41</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d9/dd5/pci_8hpp_source.html#l00131">PCI::PCIHeader0::BAR0</a>, <a class="el" href="../../d9/dd5/pci_8hpp_source.html#l00132">PCI::PCIHeader0::BAR1</a>, <a class="el" href="../../d9/dd5/pci_8hpp_source.html#l00133">PCI::PCIHeader0::BAR2</a>, <a class="el" href="../../d9/dd5/pci_8hpp_source.html#l00134">PCI::PCIHeader0::BAR3</a>, <a class="el" href="../../d9/dd5/pci_8hpp_source.html#l00135">PCI::PCIHeader0::BAR4</a>, <a class="el" href="../../d9/dd5/pci_8hpp_source.html#l00136">PCI::PCIHeader0::BAR5</a>, <a class="el" href="../../db/d16/debug_8h_source.html#l00094">debug</a>, <a class="el" href="../../db/d16/debug_8h_source.html#l00086">error</a>, <a class="el" href="../../db/d16/debug_8h_source.html#l00099">fixme</a>, <a class="el" href="../../d9/dd5/pci_8hpp_source.html#l00220">PCI::PCIDevice::Header</a>, <a class="el" href="../../d9/dd5/pci_8hpp_source.html#l00123">PCI::PCIDeviceHeader::HeaderType</a>, <a class="el" href="../../d0/d6c/arch_2aarch64_2memory_2vmm_8cpp_source.html#l00033">Memory::Virtual::Map()</a>, <a class="el" href="../../de/d2d/table_8hpp_source.html#l00041">Memory::PWT</a>, <a class="el" href="../../de/d2d/table_8hpp_source.html#l00035">Memory::RW</a>, <a class="el" href="../../d1/dc0/multiboot_8h_source.html#l00000">size</a>, and <a class="el" href="../../db/d16/debug_8h_source.html#l00087">warn</a>.</p>

</div>
</div>
<h2 class="groupheader">Field Documentation</h2>
<a id="a3f636dd3bf86e541fac9b4797caa389f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f636dd3bf86e541fac9b4797caa389f">&#9670;&nbsp;</a></span>Devices</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::list&lt;<a class="el" href="../../d0/d8f/namespacePCI.html#d2/d9d/structPCI_1_1PCIDevice">PCIDevice</a>&gt; PCI::Manager::Devices</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/dd5/pci_8hpp_source.html#l00230">230</a> of file <a class="el" href="../../d9/dd5/pci_8hpp_source.html">pci.hpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d87/pci_8cpp_source.html#l00985">EnumerateFunction()</a>, <a class="el" href="../../d5/d87/pci_8cpp_source.html#l01051">FindPCIDevice()</a>, and <a class="el" href="../../d9/dd5/pci_8hpp_source.html#l00233">GetDevices()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>Kernel/include/<a class="el" href="../../d9/dd5/pci_8hpp_source.html">pci.hpp</a></li>
<li>Kernel/core/<a class="el" href="../../d5/d87/pci_8cpp_source.html">pci.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d0/d8f/namespacePCI.html">PCI</a></li><li class="navelem"><a class="el" href="../../d4/dad/classPCI_1_1Manager.html">Manager</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
