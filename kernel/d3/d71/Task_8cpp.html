<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Fennix Kernel: Kernel/Tasking/Task.cpp File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="../../custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Fennix Kernel
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
   <div id="projectbrief">Opeating System from scratch made in C and C++</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d3/d71/Task_8cpp.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Task.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="../../d8/da1/task_8hpp_source.html">task.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d5/dd9/dumper_8hpp_source.html">dumper.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d3/d82/convert_8h_source.html">convert.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d0/d44/lock_8hpp_source.html">lock.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d3/d6b/printf_8h_source.html">printf.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../d4/d33/smp_8hpp_source.html">smp.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="../../dc/dac/io_8h_source.html">io.h</a>&gt;</code><br />
<code>#include &quot;<a class="el" href="../../d0/daa/kernel_8h_source.html">../kernel.h</a>&quot;</code><br />
</div>
<p><a href="../../d3/d71/Task_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:d9/d3e/namespaceTasking"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d3e/namespaceTasking.html">Tasking</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:aace3a9b0e5fd50db66d27fe07b390253"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d71/Task_8cpp.html#aace3a9b0e5fd50db66d27fe07b390253">tskdbg</a>(m, ...)</td></tr>
<tr class="separator:aace3a9b0e5fd50db66d27fe07b390253"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a5bdf8797953487a5859c703349ec35ac"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d71/Task_8cpp.html#a5bdf8797953487a5859c703349ec35ac">NewLock</a> (TaskingLock)</td></tr>
<tr class="separator:a5bdf8797953487a5859c703349ec35ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e42a6833fd6750b7c411b0c0f017f82"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d71/Task_8cpp.html#a9e42a6833fd6750b7c411b0c0f017f82">ThreadDoExit</a> ()</td></tr>
<tr class="separator:a9e42a6833fd6750b7c411b0c0f017f82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3fc106411b73fe948d67a194da6597a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d71/Task_8cpp.html#af3fc106411b73fe948d67a194da6597a">__no_sanitize</a> (&quot;undefined&quot;) TCB *Task</td></tr>
<tr class="separator:af3fc106411b73fe948d67a194da6597a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="aace3a9b0e5fd50db66d27fe07b390253"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aace3a9b0e5fd50db66d27fe07b390253">&#9670;&nbsp;</a></span>tskdbg</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define tskdbg</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">m, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d71/Task_8cpp_source.html#l00044">44</a> of file <a class="el" href="../../d3/d71/Task_8cpp_source.html">Task.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="af3fc106411b73fe948d67a194da6597a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3fc106411b73fe948d67a194da6597a">&#9670;&nbsp;</a></span>__no_sanitize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__no_sanitize </td>
          <td>(</td>
          <td class="paramtype">&quot;undefined&quot;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d71/Task_8cpp_source.html#l00350">350</a> of file <a class="el" href="../../d3/d71/Task_8cpp_source.html">Task.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    {</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        SmartLock(TaskingLock);</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        TCB *Thread = <span class="keyword">new</span> TCB;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        <span class="keywordflow">if</span> (Parent == <span class="keyword">nullptr</span>)</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        {</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;            Thread-&gt;Parent = this-&gt;GetCurrentProcess();</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;            <span class="keywordflow">if</span> (Thread-&gt;Parent == <span class="keyword">nullptr</span>)</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;            {</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;                <a class="code" href="../../db/d16/debug_8h.html#a65f6c7faf3bfe3937629a7a365e06574">error</a>(<span class="stringliteral">&quot;Failed to get current process. Thread cannot be created.&quot;</span>);</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                <span class="keyword">delete</span> Thread;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;            }</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        }</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;            Thread-&gt;Parent = Parent;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160; </div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        <span class="keywordflow">if</span> (InvalidPCB(Parent))</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        {</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;            <a class="code" href="../../db/d16/debug_8h.html#a65f6c7faf3bfe3937629a7a365e06574">error</a>(<span class="stringliteral">&quot;Parent is invalid&quot;</span>);</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;            <span class="keyword">delete</span> Thread;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        }</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160; </div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        Thread-&gt;ID = this-&gt;NextTID++;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        <a class="code" href="../../d3/d82/convert_8h.html#a06688b0d2444199f657ccb56b0ce11b3">strcpy</a>(Thread-&gt;Name, Parent-&gt;Name);</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        Thread-&gt;EntryPoint = <a class="code" href="../../d0/da5/Fex_8hpp.html#af279c0af4cb38234d36db472572d28b3">EntryPoint</a>;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        Thread-&gt;Offset = Offset;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        Thread-&gt;ExitCode = 0xdead;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        <span class="keywordflow">if</span> (ThreadNotReady)</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;            Thread-&gt;Status = <a class="code" href="../../d9/d3e/namespaceTasking.html#aa3e6e5078f8745bcb20a52db054b3a78af0c3719b73450e078a5c5c2d05cd5b83">TaskStatus::Waiting</a>;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;            Thread-&gt;Status = <a class="code" href="../../d9/d3e/namespaceTasking.html#aa3e6e5078f8745bcb20a52db054b3a78ad63d08060d63334012f68b23d130f56e">TaskStatus::Ready</a>;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        Thread-&gt;Memory = <span class="keyword">new</span> Memory::MemMgr(Parent-&gt;PageTable, Parent-&gt;memDirectory);</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        Thread-&gt;FPU = (CPU::x64::FXState *)Thread-&gt;Memory-&gt;RequestPages(TO_PAGES(<span class="keyword">sizeof</span>(CPU::x64::FXState) + 1));</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        <a class="code" href="../../d0/dc7/Convert_8cpp.html#ae577b1098c1f745563eb0789fa58ae14">memset</a>(Thread-&gt;FPU, 0, <span class="keyword">sizeof</span>(CPU::x64::FXState));</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160; </div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        Thread-&gt;Security.TrustLevel = Parent-&gt;Security.TrustLevel;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        Thread-&gt;Security.UniqueToken = SecurityManager.CreateToken();</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160; </div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        <span class="comment">// TODO: Is really a good idea to use the FPU in kernel mode?</span></div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        Thread-&gt;FPU-&gt;mxcsr = 0b0001111110000000;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        Thread-&gt;FPU-&gt;mxcsrmask = 0b1111111110111111;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        Thread-&gt;FPU-&gt;fcw = 0b0000001100111111;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160; </div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        <span class="comment">// CPU::x64::fxrstor(Thread-&gt;FPU);</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;        <span class="comment">// uint16_t FCW = 0b1100111111;</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        <span class="comment">// asmv(&quot;fldcw %0&quot;</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        <span class="comment">//      :</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        <span class="comment">//      : &quot;m&quot;(FCW)</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        <span class="comment">//      : &quot;memory&quot;);</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        <span class="comment">// uint32_t MXCSR = 0b1111110000000;</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        <span class="comment">// asmv(&quot;ldmxcsr %0&quot;</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        <span class="comment">//      :</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        <span class="comment">//      : &quot;m&quot;(MXCSR)</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        <span class="comment">//      : &quot;memory&quot;);</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        <span class="comment">// CPU::x64::fxsave(Thread-&gt;FPU);</span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160; </div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<span class="preprocessor">#if defined(a64)</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        <a class="code" href="../../d0/dc7/Convert_8cpp.html#ae577b1098c1f745563eb0789fa58ae14">memset</a>(&amp;Thread-&gt;Registers, 0, <span class="keyword">sizeof</span>(<a class="code" href="../../de/d52/namespacex32.html#a515e205dfa6bc04692d842221231442f">CPU::x64::TrapFrame</a>)); <span class="comment">// Just in case</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        Thread-&gt;Registers.rip = (<a class="code" href="../../d0/da5/Fex_8hpp.html#af279c0af4cb38234d36db472572d28b3">EntryPoint</a> + Offset);</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;<span class="preprocessor">#elif defined(a32)</span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;<span class="preprocessor">#elif defined(aa64)</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        <span class="keywordflow">switch</span> (Parent-&gt;Security.TrustLevel)</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        {</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d9/d3e/namespaceTasking.html#a6b9393cc83799934196d53b04f097af8ac865bd0f2d82647acb1e77354e0b5247">TaskTrustLevel::System</a>:</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;            <a class="code" href="../../db/d16/debug_8h.html#a1d297376472cc7f4ad7c70327efa7b55">warn</a>(<span class="stringliteral">&quot;Trust level not supported.&quot;</span>);</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;            [[fallthrough]];</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d9/d3e/namespaceTasking.html#a6b9393cc83799934196d53b04f097af8a954df91fe1d707441efeafbafa086b37">TaskTrustLevel::Kernel</a>:</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        {</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;            Thread-&gt;Security.IsCritical = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;            Thread-&gt;Stack = <span class="keyword">new</span> Memory::StackGuard(<span class="keyword">false</span>, Parent-&gt;PageTable);</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<span class="preprocessor">#if defined(a64)</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;            SecurityManager.TrustToken(Thread-&gt;Security.UniqueToken, <a class="code" href="../../d9/d3e/namespaceTasking.html#a9442509928b162fbf931920fa77dcf93a540fdfc5743805f1f50b557677599607">TTL::TrustedByKernel</a>);</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;            Thread-&gt;ShadowGSBase = CPU::x64::rdmsr(<a class="code" href="../../de/d78/namespaceCPU_1_1x32.html#a6c41656dc4a6f098c79385cfedda7ff6ad9676cd8b3d999882cafe63abbf8465a">CPU::x64::MSRID::MSR_SHADOW_GS_BASE</a>);</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;            Thread-&gt;GSBase = CPU::x64::rdmsr(<a class="code" href="../../de/d78/namespaceCPU_1_1x32.html#a6c41656dc4a6f098c79385cfedda7ff6a6f21504ca2d52f6f0106a7e67a3ac101">CPU::x64::MSRID::MSR_GS_BASE</a>);</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;            Thread-&gt;FSBase = CPU::x64::rdmsr(<a class="code" href="../../de/d78/namespaceCPU_1_1x32.html#a6c41656dc4a6f098c79385cfedda7ff6a721d94f76546608c66dbd55be19779a1">CPU::x64::MSRID::MSR_FS_BASE</a>);</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;            Thread-&gt;Registers.cs = <a class="code" href="../../d8/dc7/amd64_2cpu_2gdt_8hpp.html#ab0bd808397c97f7db4701ca69009a547">GDT_KERNEL_CODE</a>;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;            Thread-&gt;Registers.ss = <a class="code" href="../../d8/dc7/amd64_2cpu_2gdt_8hpp.html#a1b5a711dc01ab783bb986902240f1cce">GDT_KERNEL_DATA</a>;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;            Thread-&gt;Registers.rflags.AlwaysOne = 1;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;            Thread-&gt;Registers.rflags.IF = 1;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;            Thread-&gt;Registers.rflags.ID = 1;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;            Thread-&gt;Registers.rsp = ((<a class="code" href="../../d6/de6/include_2types_8h.html#a4788399d1d0b37ccf098a7da82254808">uintptr_t</a>)Thread-&gt;Stack-&gt;GetStackTop());</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;            <a class="code" href="../../d6/de6/include_2types_8h.html#a116392a97f8ae7523a63a135a0403e74">POKE</a>(<a class="code" href="../../d6/de6/include_2types_8h.html#a4788399d1d0b37ccf098a7da82254808">uintptr_t</a>, Thread-&gt;Registers.rsp) = (<a class="code" href="../../d6/de6/include_2types_8h.html#a4788399d1d0b37ccf098a7da82254808">uintptr_t</a>)<a class="code" href="../../d3/d71/Task_8cpp.html#a9e42a6833fd6750b7c411b0c0f017f82">ThreadDoExit</a>;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<span class="preprocessor">#elif defined(a32)</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;<span class="preprocessor">#elif defined(aa64)</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;        }</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d9/d3e/namespaceTasking.html#a6b9393cc83799934196d53b04f097af8ab4361355ef5fe95d2d097e6250288db6">TaskTrustLevel::User</a>:</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        {</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;            Thread-&gt;Stack = <span class="keyword">new</span> Memory::StackGuard(<span class="keyword">true</span>, Parent-&gt;PageTable);</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="preprocessor">#if defined(a64)</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;            SecurityManager.TrustToken(Thread-&gt;Security.UniqueToken, <a class="code" href="../../d9/d3e/namespaceTasking.html#a9442509928b162fbf931920fa77dcf93a9c7125309ba38adbf43f5e795271147f">TTL::Untrusted</a>);</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;            Thread-&gt;ShadowGSBase = CPU::x64::rdmsr(<a class="code" href="../../de/d78/namespaceCPU_1_1x32.html#a6c41656dc4a6f098c79385cfedda7ff6ad9676cd8b3d999882cafe63abbf8465a">CPU::x64::MSRID::MSR_SHADOW_GS_BASE</a>);</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;            Thread-&gt;GSBase = 0;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;            Thread-&gt;FSBase = 0;</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;            Thread-&gt;Registers.cs = <a class="code" href="../../d8/dc7/amd64_2cpu_2gdt_8hpp.html#af5c033543fb4db7939b4b7587de03867">GDT_USER_CODE</a>;</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;            Thread-&gt;Registers.ss = <a class="code" href="../../d8/dc7/amd64_2cpu_2gdt_8hpp.html#a9670040bead28fb1c0b09ea363152cd2">GDT_USER_DATA</a>;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;            Thread-&gt;Registers.rflags.AlwaysOne = 1;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;            Thread-&gt;Registers.rflags.IF = 1;</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;            Thread-&gt;Registers.rflags.ID = 1;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;            <span class="comment">/* We need to leave the libc&#39;s crt</span></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;<span class="comment">               to make a syscall when the Thread</span></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="comment">               is exited or we are going to get</span></div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="comment">               GPF or PF exception. */</span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160; </div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="preprocessor">#pragma region</span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;            <span class="keywordtype">size_t</span> ArgvSize = 0;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;            <span class="keywordflow">if</span> (argv)</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;                <span class="keywordflow">while</span> (argv[ArgvSize] != <span class="keyword">nullptr</span>)</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;                    ArgvSize++;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160; </div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;            <span class="keywordtype">size_t</span> EnvpSize = 0;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;            <span class="keywordflow">if</span> (envp)</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;                <span class="keywordflow">while</span> (envp[EnvpSize] != <span class="keyword">nullptr</span>)</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;                    EnvpSize++;</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160; </div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;            <a class="code" href="../../db/d16/debug_8h.html#a31e7d5c5946947277dce12f2584e7a43">debug</a>(<span class="stringliteral">&quot;ArgvSize: %d&quot;</span>, ArgvSize);</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;            <a class="code" href="../../db/d16/debug_8h.html#a31e7d5c5946947277dce12f2584e7a43">debug</a>(<span class="stringliteral">&quot;EnvpSize: %d&quot;</span>, EnvpSize);</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160; </div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;            <span class="comment">/* https://articles.manugarg.com/aboutelfauxiliaryvectors.html */</span></div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;            <span class="comment">/* https://refspecs.linuxbase.org/elf/x86_64-abi-0.99.pdf#figure.3.9 */</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;            <span class="comment">// rsp is the top of the stack</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;            <span class="keywordtype">char</span> *<a class="code" href="../../d4/d33/smp_8hpp.html#a98988c09e59995d8f6a571039d35e3c8">Stack</a> = (<span class="keywordtype">char</span> *)Thread-&gt;Stack-&gt;GetStackPhysicalTop();</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;            <span class="comment">// Temporary stack pointer for strings</span></div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;            <span class="keywordtype">char</span> *StackStrings = (<span class="keywordtype">char</span> *)<a class="code" href="../../d4/d33/smp_8hpp.html#a98988c09e59995d8f6a571039d35e3c8">Stack</a>;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;            <span class="keywordtype">char</span> *StackStringsVirtual = (<span class="keywordtype">char</span> *)Thread-&gt;Stack-&gt;GetStackTop();</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160; </div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;            <span class="comment">// Store string pointers for later</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;            <a class="code" href="../../d6/de6/include_2types_8h.html#a4788399d1d0b37ccf098a7da82254808">uintptr_t</a> *ArgvStrings = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;            <a class="code" href="../../d6/de6/include_2types_8h.html#a4788399d1d0b37ccf098a7da82254808">uintptr_t</a> *EnvpStrings = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;            <span class="keywordflow">if</span> (ArgvSize &gt; 0)</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                ArgvStrings = <span class="keyword">new</span> <a class="code" href="../../d6/de6/include_2types_8h.html#a4788399d1d0b37ccf098a7da82254808">uintptr_t</a>[ArgvSize];</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;            <span class="keywordflow">if</span> (EnvpSize &gt; 0)</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;                EnvpStrings = <span class="keyword">new</span> <a class="code" href="../../d6/de6/include_2types_8h.html#a4788399d1d0b37ccf098a7da82254808">uintptr_t</a>[EnvpSize];</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160; </div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; ArgvSize; i++)</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;            {</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                <span class="comment">// Subtract the length of the string and the null terminator</span></div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;                StackStrings -= <a class="code" href="../../d3/d82/convert_8h.html#a7dcc610f4b04a8ee418f03a6d9256629">strlen</a>(argv[i]) + 1;</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;                StackStringsVirtual -= <a class="code" href="../../d3/d82/convert_8h.html#a7dcc610f4b04a8ee418f03a6d9256629">strlen</a>(argv[i]) + 1;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;                <span class="comment">// Store the pointer to the string</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;                ArgvStrings[i] = (<a class="code" href="../../d6/de6/include_2types_8h.html#a4788399d1d0b37ccf098a7da82254808">uintptr_t</a>)StackStringsVirtual;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;                <span class="comment">// Copy the string to the stack</span></div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;                <a class="code" href="../../d3/d82/convert_8h.html#a06688b0d2444199f657ccb56b0ce11b3">strcpy</a>(StackStrings, argv[i]);</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;            }</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160; </div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; EnvpSize; i++)</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;            {</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;                <span class="comment">// Subtract the length of the string and the null terminator</span></div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;                StackStrings -= <a class="code" href="../../d3/d82/convert_8h.html#a7dcc610f4b04a8ee418f03a6d9256629">strlen</a>(envp[i]) + 1;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;                StackStringsVirtual -= <a class="code" href="../../d3/d82/convert_8h.html#a7dcc610f4b04a8ee418f03a6d9256629">strlen</a>(envp[i]) + 1;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;                <span class="comment">// Store the pointer to the string</span></div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;                EnvpStrings[i] = (<a class="code" href="../../d6/de6/include_2types_8h.html#a4788399d1d0b37ccf098a7da82254808">uintptr_t</a>)StackStringsVirtual;</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;                <span class="comment">// Copy the string to the stack</span></div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;                <a class="code" href="../../d3/d82/convert_8h.html#a06688b0d2444199f657ccb56b0ce11b3">strcpy</a>(StackStrings, envp[i]);</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;            }</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160; </div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;            <span class="comment">// Align the stack to 16 bytes</span></div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;            StackStrings -= (<a class="code" href="../../d6/de6/include_2types_8h.html#a4788399d1d0b37ccf098a7da82254808">uintptr_t</a>)StackStrings &amp; 0xF;</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;            <span class="comment">// Set &quot;Stack&quot; to the new stack pointer</span></div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;            <a class="code" href="../../d4/d33/smp_8hpp.html#a98988c09e59995d8f6a571039d35e3c8">Stack</a> = (<span class="keywordtype">char</span> *)StackStrings;</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;            <span class="comment">// If argv and envp sizes are odd then we need to align the stack</span></div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;            <a class="code" href="../../d4/d33/smp_8hpp.html#a98988c09e59995d8f6a571039d35e3c8">Stack</a> -= (ArgvSize + EnvpSize) % 2;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160; </div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;            <span class="comment">// We need 8 bit pointers for the stack from here</span></div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;            <a class="code" href="../../d6/de6/include_2types_8h.html#a4788399d1d0b37ccf098a7da82254808">uintptr_t</a> *Stack64 = (<a class="code" href="../../d6/de6/include_2types_8h.html#a4788399d1d0b37ccf098a7da82254808">uintptr_t</a> *)<a class="code" href="../../d4/d33/smp_8hpp.html#a98988c09e59995d8f6a571039d35e3c8">Stack</a>;</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160; </div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;            <span class="comment">// Store the null terminator</span></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;            Stack64--;</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;            *Stack64 = <a class="code" href="../../df/d31/abi_8h.html#aa893f7231479240d49c660c5649cac5b">AT_NULL</a>;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160; </div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;            <span class="comment">// auxv_array is initialized with auxv elements. If the array is empty then we add a null terminator</span></div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;            <a class="code" href="../../dd/d4e/classstd_1_1vector.html">std::vector&lt;AuxiliaryVector&gt;</a> auxv_array = auxv;</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;            <span class="keywordflow">if</span> (auxv_array.<a class="code" href="../../dd/d4e/classstd_1_1vector.html#a1f73db8ddff6714e062a5c4d4c81413f">size</a>() == 0)</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;                auxv_array.<a class="code" href="../../dd/d4e/classstd_1_1vector.html#ae3591264e2e843675344d7ee057832e8">push_back</a>({.archaux = {.a_type = <a class="code" href="../../df/d31/abi_8h.html#aa893f7231479240d49c660c5649cac5b">AT_NULL</a>, .a_un = {.a_val = 0}}});</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160; </div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;            <span class="comment">// Store auxillary vector</span></div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;            <span class="keywordflow">foreach</span> (<a class="code" href="../../df/d31/abi_8h.html#db/d1d/structAuxiliaryVector">AuxiliaryVector</a> var <span class="keywordflow">in</span> auxv_array)</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;            {</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;                <span class="comment">// Subtract the size of the auxillary vector</span></div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;                Stack64 -= <span class="keyword">sizeof</span>(<a class="code" href="../../df/d31/abi_8h.html#d9/de7/structElf64__auxv__t">Elf64_auxv_t</a>) / <span class="keyword">sizeof</span>(<a class="code" href="../../d6/de6/include_2types_8h.html#a4788399d1d0b37ccf098a7da82254808">uintptr_t</a>);</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;                <span class="comment">// Store the auxillary vector</span></div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;                <a class="code" href="../../d6/de6/include_2types_8h.html#a116392a97f8ae7523a63a135a0403e74">POKE</a>(<a class="code" href="../../df/d31/abi_8h.html#d9/de7/structElf64__auxv__t">Elf64_auxv_t</a>, Stack64) = var.archaux;</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;                <span class="comment">// TODO: Store strings to the stack</span></div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;            }</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160; </div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;            <span class="comment">// Store the null terminator</span></div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;            Stack64--;</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;            *Stack64 = <a class="code" href="../../df/d31/abi_8h.html#aa893f7231479240d49c660c5649cac5b">AT_NULL</a>;</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160; </div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;            <span class="comment">// Store EnvpStrings[] to the stack</span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;            Stack64 -= EnvpSize; <span class="comment">// (1 Stack64 = 8 bits; Stack64 = 8 * EnvpSize)</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; EnvpSize; i++)</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;            {</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;                *(Stack64 + i) = (<a class="code" href="../../d6/de6/include_2types_8h.html#a4788399d1d0b37ccf098a7da82254808">uintptr_t</a>)EnvpStrings[i];</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;                <a class="code" href="../../db/d16/debug_8h.html#a31e7d5c5946947277dce12f2584e7a43">debug</a>(<span class="stringliteral">&quot;EnvpStrings[%d]: %#lx&quot;</span>, i, EnvpStrings[i]);</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;            }</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160; </div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;            <span class="comment">// Store the null terminator</span></div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;            Stack64--;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;            *Stack64 = <a class="code" href="../../df/d31/abi_8h.html#aa893f7231479240d49c660c5649cac5b">AT_NULL</a>;</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160; </div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;            <span class="comment">// Store ArgvStrings[] to the stack</span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;            Stack64 -= ArgvSize; <span class="comment">// (1 Stack64 = 8 bits; Stack64 = 8 * ArgvSize)</span></div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; ArgvSize; i++)</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;            {</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;                *(Stack64 + i) = (<a class="code" href="../../d6/de6/include_2types_8h.html#a4788399d1d0b37ccf098a7da82254808">uintptr_t</a>)ArgvStrings[i];</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;                <a class="code" href="../../db/d16/debug_8h.html#a31e7d5c5946947277dce12f2584e7a43">debug</a>(<span class="stringliteral">&quot;ArgvStrings[%d]: %#lx&quot;</span>, i, ArgvStrings[i]);</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;            }</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160; </div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;            <span class="comment">// Store the argc</span></div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;            Stack64--;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;            *Stack64 = ArgvSize;</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160; </div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;            <span class="comment">// Set &quot;Stack&quot; to the new stack pointer</span></div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;            <a class="code" href="../../d4/d33/smp_8hpp.html#a98988c09e59995d8f6a571039d35e3c8">Stack</a> = (<span class="keywordtype">char</span> *)Stack64;</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160; </div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;            <span class="comment">/* We need the virtual address but because we are in the kernel we can&#39;t use the process page table.</span></div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;<span class="comment">                So we modify the physical address and store how much we need to subtract to get the virtual address for RSP. */</span></div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;            <a class="code" href="../../d6/de6/include_2types_8h.html#a4788399d1d0b37ccf098a7da82254808">uintptr_t</a> SubtractStack = (<a class="code" href="../../d6/de6/include_2types_8h.html#a4788399d1d0b37ccf098a7da82254808">uintptr_t</a>)Thread-&gt;Stack-&gt;GetStackPhysicalTop() - (<a class="code" href="../../d6/de6/include_2types_8h.html#a4788399d1d0b37ccf098a7da82254808">uintptr_t</a>)<a class="code" href="../../d4/d33/smp_8hpp.html#a98988c09e59995d8f6a571039d35e3c8">Stack</a>;</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;            <a class="code" href="../../db/d16/debug_8h.html#a31e7d5c5946947277dce12f2584e7a43">debug</a>(<span class="stringliteral">&quot;SubtractStack: %#lx&quot;</span>, SubtractStack);</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160; </div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;            <span class="comment">// Set the stack pointer to the new stack</span></div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;            Thread-&gt;Registers.rsp = ((<a class="code" href="../../d6/de6/include_2types_8h.html#a4788399d1d0b37ccf098a7da82254808">uintptr_t</a>)Thread-&gt;Stack-&gt;GetStackTop() - SubtractStack);</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160; </div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;            <span class="keywordflow">if</span> (ArgvSize &gt; 0)</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;                <span class="keyword">delete</span>[] ArgvStrings;</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;            <span class="keywordflow">if</span> (EnvpSize &gt; 0)</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;                <span class="keyword">delete</span>[] EnvpStrings;</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160; </div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;            <a class="code" href="../../d5/dd9/dumper_8hpp.html#a0fc66b31c24d157f0d3f5cc901f9d8cd">DumpData</a>(<span class="stringliteral">&quot;Stack Data&quot;</span>, (<span class="keywordtype">void</span> *)((<a class="code" href="../../d6/de6/include_2types_8h.html#a4788399d1d0b37ccf098a7da82254808">uintptr_t</a>)Thread-&gt;Stack-&gt;GetStackPhysicalTop() - (<a class="code" href="../../d6/de6/include_2types_8h.html#a4788399d1d0b37ccf098a7da82254808">uintptr_t</a>)SubtractStack), SubtractStack);</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160; </div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;            Thread-&gt;Registers.rdi = (<a class="code" href="../../d6/de6/include_2types_8h.html#a4788399d1d0b37ccf098a7da82254808">uintptr_t</a>)ArgvSize;                                         <span class="comment">// argc</span></div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;            Thread-&gt;Registers.rsi = (<a class="code" href="../../d6/de6/include_2types_8h.html#a4788399d1d0b37ccf098a7da82254808">uintptr_t</a>)(Thread-&gt;Registers.rsp + 8);                      <span class="comment">// argv</span></div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;            Thread-&gt;Registers.rcx = (<a class="code" href="../../d6/de6/include_2types_8h.html#a4788399d1d0b37ccf098a7da82254808">uintptr_t</a>)EnvpSize;                                         <span class="comment">// envc</span></div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;            Thread-&gt;Registers.rdx = (<a class="code" href="../../d6/de6/include_2types_8h.html#a4788399d1d0b37ccf098a7da82254808">uintptr_t</a>)(Thread-&gt;Registers.rsp + 8 + (8 * ArgvSize) + 8); <span class="comment">// envp</span></div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160; </div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;<span class="preprocessor">#pragma endregion</span></div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160; </div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;<span class="preprocessor">#elif defined(a32)</span></div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;<span class="preprocessor">#elif defined(aa64)</span></div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;<span class="preprocessor">#ifdef DEBUG_TASKING</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;            <a class="code" href="../../d5/dd9/dumper_8hpp.html#a0fc66b31c24d157f0d3f5cc901f9d8cd">DumpData</a>(Thread-&gt;Name, Thread-&gt;Stack, STACK_SIZE);</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        }</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;        {</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;            <a class="code" href="../../db/d16/debug_8h.html#a65f6c7faf3bfe3937629a7a365e06574">error</a>(<span class="stringliteral">&quot;Unknown elevation.&quot;</span>);</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;            <span class="keyword">delete</span> Thread-&gt;Stack;</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;            this-&gt;NextTID--;</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;            <span class="keyword">delete</span> Thread;</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;        }</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;        }</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160; </div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;        Thread-&gt;Info = {};</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;        Thread-&gt;Info.SpawnTime = <a class="code" href="../../d2/d00/Kernel_8cpp.html#ad5fb15538e6988f0db36d754a4a7d08d">TimeManager</a>-&gt;<a class="code" href="../../dd/d8d/classTime_1_1time.html#a3fb6d85ca30d0a2dfab46ede31bfa2f6">GetCounter</a>();</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;        Thread-&gt;Info.Year = 0;</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;        Thread-&gt;Info.Month = 0;</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;        Thread-&gt;Info.Day = 0;</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;        Thread-&gt;Info.Hour = 0;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;        Thread-&gt;Info.Minute = 0;</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;        Thread-&gt;Info.Second = 0;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../d4/d33/smp_8hpp.html#a163aa934e4e42ebaea98661d54c0af08">MAX_CPU</a>; i++)</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;        {</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;            Thread-&gt;Info.Affinity[i] = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;        }</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;        Thread-&gt;Info.Priority = <a class="code" href="../../d9/d3e/namespaceTasking.html#a6e7b9a12601b9ef62ca79d6b801c29c8a2c0d0b4c155a1f028ae8ee9d328c1829">TaskPriority::Normal</a>;</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;        Thread-&gt;Info.Architecture = Architecture;</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;        Thread-&gt;Info.Compatibility = Compatibility;</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160; </div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;<span class="preprocessor">#ifdef a64</span></div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        <a class="code" href="../../db/d16/debug_8h.html#a31e7d5c5946947277dce12f2584e7a43">debug</a>(<span class="stringliteral">&quot;Thread offset is %#lx (EntryPoint: %#lx) =&gt; RIP: %#lx&quot;</span>, Thread-&gt;Offset, Thread-&gt;EntryPoint, Thread-&gt;Registers.rip);</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;        <span class="keywordflow">if</span> (Parent-&gt;Security.TrustLevel == <a class="code" href="../../d9/d3e/namespaceTasking.html#a6b9393cc83799934196d53b04f097af8ab4361355ef5fe95d2d097e6250288db6">TaskTrustLevel::User</a>)</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;            <a class="code" href="../../db/d16/debug_8h.html#a31e7d5c5946947277dce12f2584e7a43">debug</a>(<span class="stringliteral">&quot;Thread stack region is %#lx-%#lx (U) and rsp is %#lx&quot;</span>, Thread-&gt;Stack-&gt;GetStackBottom(), Thread-&gt;Stack-&gt;GetStackTop(), Thread-&gt;Registers.rsp);</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;            <a class="code" href="../../db/d16/debug_8h.html#a31e7d5c5946947277dce12f2584e7a43">debug</a>(<span class="stringliteral">&quot;Thread stack region is %#lx-%#lx (K) and rsp is %#lx&quot;</span>, Thread-&gt;Stack-&gt;GetStackBottom(), Thread-&gt;Stack-&gt;GetStackTop(), Thread-&gt;Registers.rsp);</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;<span class="preprocessor">#elif defined(a32)</span></div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;        <a class="code" href="../../db/d16/debug_8h.html#a31e7d5c5946947277dce12f2584e7a43">debug</a>(<span class="stringliteral">&quot;Thread offset is %#lx (EntryPoint: %#lx) =&gt; RIP: %#lx&quot;</span>, Thread-&gt;Offset, Thread-&gt;EntryPoint, Thread-&gt;Registers.eip);</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;        <span class="keywordflow">if</span> (Parent-&gt;Security.TrustLevel == <a class="code" href="../../d9/d3e/namespaceTasking.html#a6b9393cc83799934196d53b04f097af8ab4361355ef5fe95d2d097e6250288db6">TaskTrustLevel::User</a>)</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;            <a class="code" href="../../db/d16/debug_8h.html#a31e7d5c5946947277dce12f2584e7a43">debug</a>(<span class="stringliteral">&quot;Thread stack region is %#lx-%#lx (U) and rsp is %#lx&quot;</span>, Thread-&gt;Stack-&gt;GetStackBottom(), Thread-&gt;Stack-&gt;GetStackTop(), Thread-&gt;Registers.esp);</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;            <a class="code" href="../../db/d16/debug_8h.html#a31e7d5c5946947277dce12f2584e7a43">debug</a>(<span class="stringliteral">&quot;Thread stack region is %#lx-%#lx (K) and rsp is %#lx&quot;</span>, Thread-&gt;Stack-&gt;GetStackBottom(), Thread-&gt;Stack-&gt;GetStackTop(), Thread-&gt;Registers.esp);</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;<span class="preprocessor">#elif defined(aa64)</span></div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;        <a class="code" href="../../db/d16/debug_8h.html#a31e7d5c5946947277dce12f2584e7a43">debug</a>(<span class="stringliteral">&quot;Created thread \&quot;%s\&quot;(%d) in process \&quot;%s\&quot;(%d)&quot;</span>,</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;              Thread-&gt;Name, Thread-&gt;ID,</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;              Thread-&gt;Parent-&gt;Name, Thread-&gt;Parent-&gt;ID);</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160; </div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;        Parent-&gt;Threads.push_back(Thread);</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;        <span class="keywordflow">return</span> Thread;</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    }</div>
<div class="ttc" id="aConvert_8cpp_html_ae577b1098c1f745563eb0789fa58ae14"><div class="ttname"><a href="../../d0/dc7/Convert_8cpp.html#ae577b1098c1f745563eb0789fa58ae14">memset</a></div><div class="ttdeci">EXTERNC __no_stack_protector void * memset(void *dest, int val, size_t len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dc7/Convert_8cpp_source.html#l01057">Convert.cpp:1057</a></div></div>
<div class="ttc" id="aFex_8hpp_html_af279c0af4cb38234d36db472572d28b3"><div class="ttname"><a href="../../d0/da5/Fex_8hpp.html#af279c0af4cb38234d36db472572d28b3">EntryPoint</a></div><div class="ttdeci">int(* EntryPoint)(void *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da5/Fex_8hpp_source.html#l00003">Fex.hpp:3</a></div></div>
<div class="ttc" id="aKernel_8cpp_html_ad5fb15538e6988f0db36d754a4a7d08d"><div class="ttname"><a href="../../d2/d00/Kernel_8cpp.html#ad5fb15538e6988f0db36d754a4a7d08d">TimeManager</a></div><div class="ttdeci">Time::time * TimeManager</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d00/Kernel_8cpp_source.html#l00205">Kernel.cpp:205</a></div></div>
<div class="ttc" id="aTask_8cpp_html_a9e42a6833fd6750b7c411b0c0f017f82"><div class="ttname"><a href="../../d3/d71/Task_8cpp.html#a9e42a6833fd6750b7c411b0c0f017f82">ThreadDoExit</a></div><div class="ttdeci">void ThreadDoExit()</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d71/Task_8cpp_source.html#l00188">Task.cpp:188</a></div></div>
<div class="ttc" id="aabi_8h_html_aa893f7231479240d49c660c5649cac5b"><div class="ttname"><a href="../../df/d31/abi_8h.html#aa893f7231479240d49c660c5649cac5b">AT_NULL</a></div><div class="ttdeci">#define AT_NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d31/abi_8h_source.html#l00023">abi.h:23</a></div></div>
<div class="ttc" id="aabi_8h_html_d9/de7/structElf64__auxv__t"><div class="ttname"><a href="../../df/d31/abi_8h.html#d9/de7/structElf64__auxv__t">Elf64_auxv_t</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d31/abi_8h_source.html#l00071">abi.h:72</a></div></div>
<div class="ttc" id="aabi_8h_html_db/d1d/structAuxiliaryVector"><div class="ttname"><a href="../../df/d31/abi_8h.html#db/d1d/structAuxiliaryVector">AuxiliaryVector</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d31/abi_8h_source.html#l00080">abi.h:81</a></div></div>
<div class="ttc" id="aamd64_2cpu_2gdt_8hpp_html_a1b5a711dc01ab783bb986902240f1cce"><div class="ttname"><a href="../../d8/dc7/amd64_2cpu_2gdt_8hpp.html#a1b5a711dc01ab783bb986902240f1cce">GDT_KERNEL_DATA</a></div><div class="ttdeci">#define GDT_KERNEL_DATA</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc7/amd64_2cpu_2gdt_8hpp_source.html#l00219">gdt.hpp:219</a></div></div>
<div class="ttc" id="aamd64_2cpu_2gdt_8hpp_html_a9670040bead28fb1c0b09ea363152cd2"><div class="ttname"><a href="../../d8/dc7/amd64_2cpu_2gdt_8hpp.html#a9670040bead28fb1c0b09ea363152cd2">GDT_USER_DATA</a></div><div class="ttdeci">#define GDT_USER_DATA</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc7/amd64_2cpu_2gdt_8hpp_source.html#l00221">gdt.hpp:221</a></div></div>
<div class="ttc" id="aamd64_2cpu_2gdt_8hpp_html_ab0bd808397c97f7db4701ca69009a547"><div class="ttname"><a href="../../d8/dc7/amd64_2cpu_2gdt_8hpp.html#ab0bd808397c97f7db4701ca69009a547">GDT_KERNEL_CODE</a></div><div class="ttdeci">#define GDT_KERNEL_CODE</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc7/amd64_2cpu_2gdt_8hpp_source.html#l00218">gdt.hpp:218</a></div></div>
<div class="ttc" id="aamd64_2cpu_2gdt_8hpp_html_af5c033543fb4db7939b4b7587de03867"><div class="ttname"><a href="../../d8/dc7/amd64_2cpu_2gdt_8hpp.html#af5c033543fb4db7939b4b7587de03867">GDT_USER_CODE</a></div><div class="ttdeci">#define GDT_USER_CODE</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dc7/amd64_2cpu_2gdt_8hpp_source.html#l00220">gdt.hpp:220</a></div></div>
<div class="ttc" id="aclassTime_1_1time_html_a3fb6d85ca30d0a2dfab46ede31bfa2f6"><div class="ttname"><a href="../../dd/d8d/classTime_1_1time.html#a3fb6d85ca30d0a2dfab46ede31bfa2f6">Time::time::GetCounter</a></div><div class="ttdeci">uint64_t GetCounter()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dc2/Timer_8cpp_source.html#l00064">Timer.cpp:64</a></div></div>
<div class="ttc" id="aclassstd_1_1vector_html"><div class="ttname"><a href="../../dd/d4e/classstd_1_1vector.html">std::vector&lt; AuxiliaryVector &gt;</a></div></div>
<div class="ttc" id="aclassstd_1_1vector_html_a1f73db8ddff6714e062a5c4d4c81413f"><div class="ttname"><a href="../../dd/d4e/classstd_1_1vector.html#a1f73db8ddff6714e062a5c4d4c81413f">std::vector::size</a></div><div class="ttdeci">NIF size_t size() const</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d16/vector_8hpp_source.html#l00187">vector.hpp:187</a></div></div>
<div class="ttc" id="aclassstd_1_1vector_html_ae3591264e2e843675344d7ee057832e8"><div class="ttname"><a href="../../dd/d4e/classstd_1_1vector.html#ae3591264e2e843675344d7ee057832e8">std::vector::push_back</a></div><div class="ttdeci">NIF void push_back(const T &amp;Value)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d16/vector_8hpp_source.html#l00199">vector.hpp:199</a></div></div>
<div class="ttc" id="aconvert_8h_html_a06688b0d2444199f657ccb56b0ce11b3"><div class="ttname"><a href="../../d3/d82/convert_8h.html#a06688b0d2444199f657ccb56b0ce11b3">strcpy</a></div><div class="ttdeci">#define strcpy(dest, src)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d82/convert_8h_source.html#l00132">convert.h:132</a></div></div>
<div class="ttc" id="aconvert_8h_html_a7dcc610f4b04a8ee418f03a6d9256629"><div class="ttname"><a href="../../d3/d82/convert_8h.html#a7dcc610f4b04a8ee418f03a6d9256629">strlen</a></div><div class="ttdeci">long unsigned strlen(const char s[])</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dc7/Convert_8cpp_source.html#l00064">Convert.cpp:64</a></div></div>
<div class="ttc" id="adebug_8h_html_a1d297376472cc7f4ad7c70327efa7b55"><div class="ttname"><a href="../../db/d16/debug_8h.html#a1d297376472cc7f4ad7c70327efa7b55">warn</a></div><div class="ttdeci">#define warn(Format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d16/debug_8h_source.html#l00079">debug.h:79</a></div></div>
<div class="ttc" id="adebug_8h_html_a31e7d5c5946947277dce12f2584e7a43"><div class="ttname"><a href="../../db/d16/debug_8h.html#a31e7d5c5946947277dce12f2584e7a43">debug</a></div><div class="ttdeci">#define debug(Format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d16/debug_8h_source.html#l00085">debug.h:85</a></div></div>
<div class="ttc" id="adebug_8h_html_a65f6c7faf3bfe3937629a7a365e06574"><div class="ttname"><a href="../../db/d16/debug_8h.html#a65f6c7faf3bfe3937629a7a365e06574">error</a></div><div class="ttdeci">#define error(Format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d16/debug_8h_source.html#l00078">debug.h:78</a></div></div>
<div class="ttc" id="adumper_8hpp_html_a0fc66b31c24d157f0d3f5cc901f9d8cd"><div class="ttname"><a href="../../d5/dd9/dumper_8hpp.html#a0fc66b31c24d157f0d3f5cc901f9d8cd">DumpData</a></div><div class="ttdeci">void DumpData(const char *Description, void *Address, unsigned long Length)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dbb/dumper_8cpp_source.html#l00046">dumper.cpp:46</a></div></div>
<div class="ttc" id="ainclude_2types_8h_html_a116392a97f8ae7523a63a135a0403e74"><div class="ttname"><a href="../../d6/de6/include_2types_8h.html#a116392a97f8ae7523a63a135a0403e74">POKE</a></div><div class="ttdeci">#define POKE(type, address)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/de6/include_2types_8h_source.html#l00088">types.h:88</a></div></div>
<div class="ttc" id="ainclude_2types_8h_html_a4788399d1d0b37ccf098a7da82254808"><div class="ttname"><a href="../../d6/de6/include_2types_8h.html#a4788399d1d0b37ccf098a7da82254808">uintptr_t</a></div><div class="ttdeci">__UINTPTR_TYPE__ uintptr_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/de6/include_2types_8h_source.html#l00171">types.h:171</a></div></div>
<div class="ttc" id="anamespaceCPU_1_1x32_html_a6c41656dc4a6f098c79385cfedda7ff6a6f21504ca2d52f6f0106a7e67a3ac101"><div class="ttname"><a href="../../de/d78/namespaceCPU_1_1x32.html#a6c41656dc4a6f098c79385cfedda7ff6a6f21504ca2d52f6f0106a7e67a3ac101">CPU::x32::MSR_GS_BASE</a></div><div class="ttdeci">@ MSR_GS_BASE</div><div class="ttdoc">64bit GS base (0xC0000101)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d82/x32_2msr_8hpp_source.html#l00395">msr.hpp:395</a></div></div>
<div class="ttc" id="anamespaceCPU_1_1x32_html_a6c41656dc4a6f098c79385cfedda7ff6a721d94f76546608c66dbd55be19779a1"><div class="ttname"><a href="../../de/d78/namespaceCPU_1_1x32.html#a6c41656dc4a6f098c79385cfedda7ff6a721d94f76546608c66dbd55be19779a1">CPU::x32::MSR_FS_BASE</a></div><div class="ttdeci">@ MSR_FS_BASE</div><div class="ttdoc">64bit FS base (0xC0000100)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d82/x32_2msr_8hpp_source.html#l00393">msr.hpp:393</a></div></div>
<div class="ttc" id="anamespaceCPU_1_1x32_html_a6c41656dc4a6f098c79385cfedda7ff6ad9676cd8b3d999882cafe63abbf8465a"><div class="ttname"><a href="../../de/d78/namespaceCPU_1_1x32.html#a6c41656dc4a6f098c79385cfedda7ff6ad9676cd8b3d999882cafe63abbf8465a">CPU::x32::MSR_SHADOW_GS_BASE</a></div><div class="ttdeci">@ MSR_SHADOW_GS_BASE</div><div class="ttdoc">SwapGS GS shadow (0xC0000102)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d82/x32_2msr_8hpp_source.html#l00397">msr.hpp:397</a></div></div>
<div class="ttc" id="anamespaceTasking_html_a6b9393cc83799934196d53b04f097af8a954df91fe1d707441efeafbafa086b37"><div class="ttname"><a href="../../d9/d3e/namespaceTasking.html#a6b9393cc83799934196d53b04f097af8a954df91fe1d707441efeafbafa086b37">Tasking::Kernel</a></div><div class="ttdeci">@ Kernel</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/da1/task_8hpp_source.html#l00061">task.hpp:61</a></div></div>
<div class="ttc" id="anamespaceTasking_html_a6b9393cc83799934196d53b04f097af8ab4361355ef5fe95d2d097e6250288db6"><div class="ttname"><a href="../../d9/d3e/namespaceTasking.html#a6b9393cc83799934196d53b04f097af8ab4361355ef5fe95d2d097e6250288db6">Tasking::User</a></div><div class="ttdeci">@ User</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/da1/task_8hpp_source.html#l00064">task.hpp:63</a></div></div>
<div class="ttc" id="anamespaceTasking_html_a6b9393cc83799934196d53b04f097af8ac865bd0f2d82647acb1e77354e0b5247"><div class="ttname"><a href="../../d9/d3e/namespaceTasking.html#a6b9393cc83799934196d53b04f097af8ac865bd0f2d82647acb1e77354e0b5247">Tasking::System</a></div><div class="ttdeci">@ System</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/da1/task_8hpp_source.html#l00062">task.hpp:62</a></div></div>
<div class="ttc" id="anamespaceTasking_html_a6e7b9a12601b9ef62ca79d6b801c29c8a2c0d0b4c155a1f028ae8ee9d328c1829"><div class="ttname"><a href="../../d9/d3e/namespaceTasking.html#a6e7b9a12601b9ef62ca79d6b801c29c8a2c0d0b4c155a1f028ae8ee9d328c1829">Tasking::Normal</a></div><div class="ttdeci">@ Normal</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/da1/task_8hpp_source.html#l00082">task.hpp:82</a></div></div>
<div class="ttc" id="anamespaceTasking_html_a9442509928b162fbf931920fa77dcf93a540fdfc5743805f1f50b557677599607"><div class="ttname"><a href="../../d9/d3e/namespaceTasking.html#a9442509928b162fbf931920fa77dcf93a540fdfc5743805f1f50b557677599607">Tasking::TrustedByKernel</a></div><div class="ttdeci">@ TrustedByKernel</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/da1/task_8hpp_source.html#l00211">task.hpp:211</a></div></div>
<div class="ttc" id="anamespaceTasking_html_a9442509928b162fbf931920fa77dcf93a9c7125309ba38adbf43f5e795271147f"><div class="ttname"><a href="../../d9/d3e/namespaceTasking.html#a9442509928b162fbf931920fa77dcf93a9c7125309ba38adbf43f5e795271147f">Tasking::Untrusted</a></div><div class="ttdeci">@ Untrusted</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/da1/task_8hpp_source.html#l00209">task.hpp:209</a></div></div>
<div class="ttc" id="anamespaceTasking_html_aa3e6e5078f8745bcb20a52db054b3a78ad63d08060d63334012f68b23d130f56e"><div class="ttname"><a href="../../d9/d3e/namespaceTasking.html#aa3e6e5078f8745bcb20a52db054b3a78ad63d08060d63334012f68b23d130f56e">Tasking::Ready</a></div><div class="ttdeci">@ Ready</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/da1/task_8hpp_source.html#l00069">task.hpp:69</a></div></div>
<div class="ttc" id="anamespaceTasking_html_aa3e6e5078f8745bcb20a52db054b3a78af0c3719b73450e078a5c5c2d05cd5b83"><div class="ttname"><a href="../../d9/d3e/namespaceTasking.html#aa3e6e5078f8745bcb20a52db054b3a78af0c3719b73450e078a5c5c2d05cd5b83">Tasking::Waiting</a></div><div class="ttdeci">@ Waiting</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/da1/task_8hpp_source.html#l00072">task.hpp:72</a></div></div>
<div class="ttc" id="anamespacex32_html_a515e205dfa6bc04692d842221231442f"><div class="ttname"><a href="../../de/d52/namespacex32.html#a515e205dfa6bc04692d842221231442f">x32::TrapFrame</a></div><div class="ttdeci">struct x32::TrapFrame TrapFrame</div></div>
<div class="ttc" id="asmp_8hpp_html_a163aa934e4e42ebaea98661d54c0af08"><div class="ttname"><a href="../../d4/d33/smp_8hpp.html#a163aa934e4e42ebaea98661d54c0af08">MAX_CPU</a></div><div class="ttdeci">#define MAX_CPU</div><div class="ttdoc">Maximum supported number of CPU cores by the kernel.</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d33/smp_8hpp_source.html#l00026">smp.hpp:26</a></div></div>
<div class="ttc" id="asmp_8hpp_html_a98988c09e59995d8f6a571039d35e3c8"><div class="ttname"><a href="../../d4/d33/smp_8hpp.html#a98988c09e59995d8f6a571039d35e3c8">Stack</a></div><div class="ttdeci">uintptr_t Stack</div><div class="ttdoc">Used by CPU.</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d33/smp_8hpp_source.html#l00007">smp.hpp:7</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d31/abi_8h_source.html#l00023">AT_NULL</a>, <a class="el" href="../../db/d16/debug_8h_source.html#l00085">debug</a>, <a class="el" href="../../d0/da5/Fex_8hpp_source.html#l00003">EntryPoint</a>, <a class="el" href="../../db/d16/debug_8h_source.html#l00078">error</a>, <a class="el" href="../../d8/dc7/amd64_2cpu_2gdt_8hpp_source.html#l00218">GDT_KERNEL_CODE</a>, <a class="el" href="../../d8/dc7/amd64_2cpu_2gdt_8hpp_source.html#l00219">GDT_KERNEL_DATA</a>, <a class="el" href="../../d8/dc7/amd64_2cpu_2gdt_8hpp_source.html#l00220">GDT_USER_CODE</a>, <a class="el" href="../../d8/dc7/amd64_2cpu_2gdt_8hpp_source.html#l00221">GDT_USER_DATA</a>, <a class="el" href="../../d8/da1/task_8hpp_source.html#l00061">Tasking::Kernel</a>, <a class="el" href="../../d0/dc7/Convert_8cpp_source.html#l01057">memset()</a>, <a class="el" href="../../d3/d82/x32_2msr_8hpp_source.html#l00393">CPU::x32::MSR_FS_BASE</a>, <a class="el" href="../../d3/d82/x32_2msr_8hpp_source.html#l00395">CPU::x32::MSR_GS_BASE</a>, <a class="el" href="../../d3/d82/x32_2msr_8hpp_source.html#l00397">CPU::x32::MSR_SHADOW_GS_BASE</a>, <a class="el" href="../../d6/de6/include_2types_8h_source.html#l00088">POKE</a>, <a class="el" href="../../da/d16/vector_8hpp_source.html#l00199">std::vector&lt; T &gt;::push_back()</a>, <a class="el" href="../../d8/da1/task_8hpp_source.html#l00069">Tasking::Ready</a>, <a class="el" href="../../da/d16/vector_8hpp_source.html#l00187">std::vector&lt; T &gt;::size()</a>, <a class="el" href="../../d4/d33/smp_8hpp_source.html#l00007">Stack</a>, <a class="el" href="../../d3/d82/convert_8h_source.html#l00132">strcpy</a>, <a class="el" href="../../d0/dc7/Convert_8cpp_source.html#l00064">strlen()</a>, <a class="el" href="../../d8/da1/task_8hpp_source.html#l00062">Tasking::System</a>, <a class="el" href="../../d3/d71/Task_8cpp_source.html#l00188">ThreadDoExit()</a>, <a class="el" href="../../d8/da1/task_8hpp_source.html#l00211">Tasking::TrustedByKernel</a>, <a class="el" href="../../d8/da1/task_8hpp_source.html#l00209">Tasking::Untrusted</a>, <a class="el" href="../../d8/da1/task_8hpp_source.html#l00063">Tasking::User</a>, <a class="el" href="../../d8/da1/task_8hpp_source.html#l00072">Tasking::Waiting</a>, and <a class="el" href="../../db/d16/debug_8h_source.html#l00079">warn</a>.</p>

</div>
</div>
<a id="a5bdf8797953487a5859c703349ec35ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5bdf8797953487a5859c703349ec35ac">&#9670;&nbsp;</a></span>NewLock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">NewLock </td>
          <td>(</td>
          <td class="paramtype">TaskingLock&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a9e42a6833fd6750b7c411b0c0f017f82"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e42a6833fd6750b7c411b0c0f017f82">&#9670;&nbsp;</a></span>ThreadDoExit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ThreadDoExit </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d71/Task_8cpp_source.html#l00188">188</a> of file <a class="el" href="../../d3/d71/Task_8cpp_source.html">Task.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    {</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        <span class="comment">// TODO: How I can lock the scheduler without causing a deadlock?</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        <a class="code" href="../../d4/d33/smp_8hpp.html#de/df9/structCPUData">CPUData</a> *<a class="code" href="../../d4/d33/smp_8hpp.html#de/df9/structCPUData">CPUData</a> = <a class="code" href="../../d2/d7d/aarch64_2cpu_2SymmetricMultiprocessing_8cpp.html#aa53a3783575d262dc378af3a30ca775d">GetCurrentCPU</a>();</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        <a class="code" href="../../d4/d33/smp_8hpp.html#de/df9/structCPUData">CPUData</a>-&gt;<a class="code" href="../../d4/d33/smp_8hpp.html#a491373d6c819684bf4b29bbae4422703">CurrentThread</a>-&gt;<a class="code" href="../../de/d96/structTasking_1_1TCB.html#a9baa991272d9cca97b1cc7315c2670c7">Status</a> = <a class="code" href="../../d9/d3e/namespaceTasking.html#aa3e6e5078f8745bcb20a52db054b3a78a773f96280709f0b4ee36122b01357f51">TaskStatus::Terminated</a>;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        <a class="code" href="../../db/d16/debug_8h.html#a31e7d5c5946947277dce12f2584e7a43">debug</a>(<span class="stringliteral">&quot;\&quot;%s\&quot;(%d) exited with code: %#lx&quot;</span>, <a class="code" href="../../d4/d33/smp_8hpp.html#de/df9/structCPUData">CPUData</a>-&gt;<a class="code" href="../../d4/d33/smp_8hpp.html#a491373d6c819684bf4b29bbae4422703">CurrentThread</a>-&gt;<a class="code" href="../../de/d96/structTasking_1_1TCB.html#a480209ab7e1471a5b6b8599512341b91">Name</a>, <a class="code" href="../../d4/d33/smp_8hpp.html#de/df9/structCPUData">CPUData</a>-&gt;<a class="code" href="../../d4/d33/smp_8hpp.html#a491373d6c819684bf4b29bbae4422703">CurrentThread</a>-&gt;<a class="code" href="../../de/d96/structTasking_1_1TCB.html#a851c7efc607cdb7e23e392fe4ed7ff29">ID</a>, <a class="code" href="../../d4/d33/smp_8hpp.html#de/df9/structCPUData">CPUData</a>-&gt;<a class="code" href="../../d4/d33/smp_8hpp.html#a491373d6c819684bf4b29bbae4422703">CurrentThread</a>-&gt;<a class="code" href="../../de/d96/structTasking_1_1TCB.html#ad559303402b3927ebff520bfa3777af4">ExitCode</a>);</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        <a class="code" href="../../df/dbe/cpu_8hpp.html#a1723d109de3be441538d14f47f432120">CPU::Halt</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    }</div>
<div class="ttc" id="aaarch64_2cpu_2SymmetricMultiprocessing_8cpp_html_aa53a3783575d262dc378af3a30ca775d"><div class="ttname"><a href="../../d2/d7d/aarch64_2cpu_2SymmetricMultiprocessing_8cpp.html#aa53a3783575d262dc378af3a30ca775d">GetCurrentCPU</a></div><div class="ttdeci">CPUData * GetCurrentCPU()</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d7d/aarch64_2cpu_2SymmetricMultiprocessing_8cpp_source.html#l00033">SymmetricMultiprocessing.cpp:33</a></div></div>
<div class="ttc" id="acpu_8hpp_html_a1723d109de3be441538d14f47f432120"><div class="ttname"><a href="../../df/dbe/cpu_8hpp.html#a1723d109de3be441538d14f47f432120">Halt</a></div><div class="ttdeci">static SafeFunction void Halt(bool Loop=false)</div><div class="ttdoc">Halt the CPU.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dbe/cpu_8hpp_source.html#l00177">cpu.hpp:177</a></div></div>
<div class="ttc" id="anamespaceTasking_html_aa3e6e5078f8745bcb20a52db054b3a78a773f96280709f0b4ee36122b01357f51"><div class="ttname"><a href="../../d9/d3e/namespaceTasking.html#aa3e6e5078f8745bcb20a52db054b3a78a773f96280709f0b4ee36122b01357f51">Tasking::Terminated</a></div><div class="ttdeci">@ Terminated</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/da1/task_8hpp_source.html#l00075">task.hpp:74</a></div></div>
<div class="ttc" id="asmp_8hpp_html_a491373d6c819684bf4b29bbae4422703"><div class="ttname"><a href="../../d4/d33/smp_8hpp.html#a491373d6c819684bf4b29bbae4422703">CPUData::CurrentThread</a></div><div class="ttdeci">std::atomic&lt; Tasking::TCB * &gt; CurrentThread</div><div class="ttdoc">Current running thread.</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d33/smp_8hpp_source.html#l00062">smp.hpp:62</a></div></div>
<div class="ttc" id="asmp_8hpp_html_de/df9/structCPUData"><div class="ttname"><a href="../../d4/d33/smp_8hpp.html#de/df9/structCPUData">CPUData</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d33/smp_8hpp_source.html#l00041">smp.hpp:42</a></div></div>
<div class="ttc" id="astructTasking_1_1TCB_html_a480209ab7e1471a5b6b8599512341b91"><div class="ttname"><a href="../../de/d96/structTasking_1_1TCB.html#a480209ab7e1471a5b6b8599512341b91">Tasking::TCB::Name</a></div><div class="ttdeci">char Name[256]</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/da1/task_8hpp_source.html#l00113">task.hpp:113</a></div></div>
<div class="ttc" id="astructTasking_1_1TCB_html_a851c7efc607cdb7e23e392fe4ed7ff29"><div class="ttname"><a href="../../de/d96/structTasking_1_1TCB.html#a851c7efc607cdb7e23e392fe4ed7ff29">Tasking::TCB::ID</a></div><div class="ttdeci">UTID ID</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/da1/task_8hpp_source.html#l00112">task.hpp:112</a></div></div>
<div class="ttc" id="astructTasking_1_1TCB_html_a9baa991272d9cca97b1cc7315c2670c7"><div class="ttname"><a href="../../de/d96/structTasking_1_1TCB.html#a9baa991272d9cca97b1cc7315c2670c7">Tasking::TCB::Status</a></div><div class="ttdeci">TaskStatus Status</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/da1/task_8hpp_source.html#l00120">task.hpp:120</a></div></div>
<div class="ttc" id="astructTasking_1_1TCB_html_ad559303402b3927ebff520bfa3777af4"><div class="ttname"><a href="../../de/d96/structTasking_1_1TCB.html#ad559303402b3927ebff520bfa3777af4">Tasking::TCB::ExitCode</a></div><div class="ttdeci">int ExitCode</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/da1/task_8hpp_source.html#l00117">task.hpp:117</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d4/d33/smp_8hpp_source.html#l00062">CPUData::CurrentThread</a>, <a class="el" href="../../db/d16/debug_8h_source.html#l00085">debug</a>, <a class="el" href="../../d8/da1/task_8hpp_source.html#l00117">Tasking::TCB::ExitCode</a>, <a class="el" href="../../d2/d7d/aarch64_2cpu_2SymmetricMultiprocessing_8cpp_source.html#l00033">GetCurrentCPU()</a>, <a class="el" href="../../df/dbe/cpu_8hpp_source.html#l00177">Halt()</a>, <a class="el" href="../../d8/da1/task_8hpp_source.html#l00112">Tasking::TCB::ID</a>, <a class="el" href="../../d8/da1/task_8hpp_source.html#l00113">Tasking::TCB::Name</a>, <a class="el" href="../../d8/da1/task_8hpp_source.html#l00120">Tasking::TCB::Status</a>, and <a class="el" href="../../d8/da1/task_8hpp_source.html#l00074">Tasking::Terminated</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d71/Task_8cpp_source.html#l00350">__no_sanitize()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_52bed8acfaac088d5968cb2c84d7645d.html">Kernel</a></li><li class="navelem"><a class="el" href="../../dir_e84271607a0ed4280951d9e6a4794fe3.html">Tasking</a></li><li class="navelem"><a class="el" href="../../d3/d71/Task_8cpp.html">Task.cpp</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
