<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Fennix Userspace: Userspace/apps/base/bash/jobs.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="../../custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Fennix Userspace
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
   <div id="projectbrief">Userspace Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('df/d8e/jobs_8c.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">jobs.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="../../db/d16/config_8h_source.html">config.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d6/d21/bashtypes_8h_source.html">bashtypes.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d7/d0b/trap_8h_source.html">trap.h</a>&quot;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;signal.h&gt;</code><br />
<code>#include &lt;errno.h&gt;</code><br />
<code>#include &quot;posixtime.h&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d4/d1c/filecntl_8h_source.html">filecntl.h</a>&quot;</code><br />
<code>#include &lt;<a class="el" href="../../d3/d9a/include_2sys_2ioctl_8h_source.html">sys/ioctl.h</a>&gt;</code><br />
<code>#include &quot;<a class="el" href="../../d0/d9e/shtty_8h_source.html">shtty.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d9/d82/bashansi_8h_source.html">bashansi.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d7/dcd/bashintl_8h_source.html">bashintl.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../df/d03/shell_8h_source.html">shell.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d36/parser_8h_source.html">parser.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d3/d3a/jobs_8h_source.html">jobs.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/da7/execute__cmd_8h_source.html">execute_cmd.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d9/da0/flags_8h_source.html">flags.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/d2c/typemax_8h_source.html">typemax.h</a>&quot;</code><br />
<code>#include &quot;builtins/builtext.h&quot;</code><br />
<code>#include &quot;<a class="el" href="../../df/d28/bash_2builtins_2common_8h_source.html">builtins/common.h</a>&quot;</code><br />
</div>
<p><a href="../../df/d8e/jobs_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a626cd506cc8c8753532f784d12b382e2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a626cd506cc8c8753532f784d12b382e2">DEFAULT_CHILD_MAX</a>&#160;&#160;&#160;4096</td></tr>
<tr class="separator:a626cd506cc8c8753532f784d12b382e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93df246677de7b76e2b8e743da164ba1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a93df246677de7b76e2b8e743da164ba1">MAX_CHILD_MAX</a>&#160;&#160;&#160;32768</td></tr>
<tr class="separator:a93df246677de7b76e2b8e743da164ba1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae73608c2e00c712414d7a3262dbe2a20"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#ae73608c2e00c712414d7a3262dbe2a20">MAX_JOBS_IN_ARRAY</a>&#160;&#160;&#160;4096		/* production */</td></tr>
<tr class="separator:ae73608c2e00c712414d7a3262dbe2a20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa52b3fc7fe43cf6aba78123f474f050a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#aa52b3fc7fe43cf6aba78123f474f050a">PIDSTAT_TABLE_SZ</a>&#160;&#160;&#160;4096</td></tr>
<tr class="separator:aa52b3fc7fe43cf6aba78123f474f050a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a539c77a9dfeaf7df64b89278a020702e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a539c77a9dfeaf7df64b89278a020702e">BGPIDS_TABLE_SZ</a>&#160;&#160;&#160;512</td></tr>
<tr class="separator:a539c77a9dfeaf7df64b89278a020702e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1782af65c1d301fe419504e0f00853b0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a1782af65c1d301fe419504e0f00853b0">DEL_WARNSTOPPED</a>&#160;&#160;&#160;1	/* <a class="el" href="../../da/d80/err_8c.html#af80d19f1297a11626fab61a248959c71">warn</a> about deleting <a class="el" href="../../db/de2/am__map_8c.html#a2eb95bdb1f863f25767706ff8d2d4bda">stopped</a> <a class="el" href="../../d3/d3a/jobs_8h.html#a6cce913474372029492267b46b745d88">jobs</a> */</td></tr>
<tr class="separator:a1782af65c1d301fe419504e0f00853b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7144363c25cc07fb8cd621d1db3f9584"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a7144363c25cc07fb8cd621d1db3f9584">DEL_NOBGPID</a>&#160;&#160;&#160;2	/* don'<a class="el" href="../../d6/dec/gm__loop_8c.html#ac310d9181e916ba43604099aee272c71">t</a> <a class="el" href="../../d6/dae/dc_8c.html#a75eb888902f992b6613fed5e90eca946">add</a> pgrp leader to <a class="el" href="../../d3/d3a/jobs_8h.html#d9/deb/structbgpids">bgpids</a> */</td></tr>
<tr class="separator:a7144363c25cc07fb8cd621d1db3f9584"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3aa5418612f55083950f87b97f60ce33"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a3aa5418612f55083950f87b97f60ce33">WAITPID</a>(<a class="el" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>,  statusp,  <a class="el" href="../../d3/df2/ifconfig_8c.html#d1/d38/structoptions">options</a>)&#160;&#160;&#160;	<a class="el" href="../../d5/d4e/wait3_8c.html#aa87e6b0bf8e10243dae4df9795430762">wait3</a> (statusp, <a class="el" href="../../d3/df2/ifconfig_8c.html#d1/d38/structoptions">options</a>, (int *)0)</td></tr>
<tr class="separator:a3aa5418612f55083950f87b97f60ce33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a891da39663805f56b077cf8aab2d68"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a0a891da39663805f56b077cf8aab2d68">getpgid</a>(<a class="el" href="../../d6/d23/wi__stuff_8c.html#a5f53dec9fe800012c2be6ab5167d2cfd">p</a>)&#160;&#160;&#160;<a class="el" href="../../d1/d4d/getpgrp_8c.html#a06f4ba65249f92cacdba5782a8d70eba">getpgrp</a> (<a class="el" href="../../d6/d23/wi__stuff_8c.html#a5f53dec9fe800012c2be6ab5167d2cfd">p</a>)</td></tr>
<tr class="separator:a0a891da39663805f56b077cf8aab2d68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af213fd428488fc5ae5bbda14bcea275e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#af213fd428488fc5ae5bbda14bcea275e">REINSTALL_SIGCHLD_HANDLER</a></td></tr>
<tr class="separator:af213fd428488fc5ae5bbda14bcea275e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afcc090a70f53d677b748f4b1a4b896e6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#afcc090a70f53d677b748f4b1a4b896e6">WCONTINUED</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:afcc090a70f53d677b748f4b1a4b896e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5533b3213b8e81491aa4212ac8fc602"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#ae5533b3213b8e81491aa4212ac8fc602">WIFCONTINUED</a>(<a class="el" href="../../df/d19/arpping_8c.html#ac9562ee4ecb3b8aeebeb04656e7e57a9">s</a>)&#160;&#160;&#160;(0)</td></tr>
<tr class="separator:ae5533b3213b8e81491aa4212ac8fc602"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47e7841cbc97ed0297e01ff639346405"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a47e7841cbc97ed0297e01ff639346405">JOB_SLOTS</a>&#160;&#160;&#160;8</td></tr>
<tr class="separator:a47e7841cbc97ed0297e01ff639346405"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94c540ad458707a7ced24d74a260e1e2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a94c540ad458707a7ced24d74a260e1e2">QUEUE_SIGCHLD</a>(os)&#160;&#160;&#160;(os) = <a class="el" href="../../df/d8e/jobs_8c.html#aa332884f0c3ecd93a329263848b7fa04">sigchld</a>, <a class="el" href="../../d8/d8d/nojobs_8c.html#af553b22eef984c5245e4eae3e4a36cd5">queue_sigchld</a>++</td></tr>
<tr class="separator:a94c540ad458707a7ced24d74a260e1e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54543fd2ec1a59443849d1dfdabdadbc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a54543fd2ec1a59443849d1dfdabdadbc">UNQUEUE_SIGCHLD</a>(os)</td></tr>
<tr class="separator:a54543fd2ec1a59443849d1dfdabdadbc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af35bd0de8c2181231698de03bbdd58ca"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#af35bd0de8c2181231698de03bbdd58ca">setpgid</a>(<a class="el" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>,  pgrp)&#160;&#160;&#160;<a class="el" href="../../d0/d0e/setpgrp_8c.html#ada2b1e6782cd8fc506fde243f7d313ec">setpgrp</a> (<a class="el" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, pgrp)</td></tr>
<tr class="separator:af35bd0de8c2181231698de03bbdd58ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a701bcb628c909e9932c9f53c133be6bf"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a701bcb628c909e9932c9f53c133be6bf">tcsetpgrp</a>(<a class="el" href="../../d3/d46/textbox_8c.html#a6f8059414f0228f0256115e024eeed4b">fd</a>,  pgrp)&#160;&#160;&#160;<a class="el" href="../../dc/d32/ioctl_8c.html#a6762739f1ceb8c62fa4f26304a76fb36">ioctl</a> ((<a class="el" href="../../d3/d46/textbox_8c.html#a6f8059414f0228f0256115e024eeed4b">fd</a>), <a class="el" href="../../d9/ded/arch_2sh_2bits_2ioctl_8h.html#a6bac3310268b3480d529afac9bb5ca01">TIOCSPGRP</a>, &amp;(pgrp))</td></tr>
<tr class="separator:a701bcb628c909e9932c9f53c133be6bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23dc422a1eed633a3a9ce331720ca21c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a23dc422a1eed633a3a9ce331720ca21c">input_tty</a>()&#160;&#160;&#160;(<a class="el" href="../../d8/d8d/nojobs_8c.html#ae43d281c5f91cb3d7ad00fc46971b4da">shell_tty</a> != -1) ? <a class="el" href="../../d8/d8d/nojobs_8c.html#ae43d281c5f91cb3d7ad00fc46971b4da">shell_tty</a> : <a class="el" href="../../d7/d6b/fileno_8c.html#a8262871768d894c0962fa898b9680ce4">fileno</a> (<a class="el" href="../../d9/d72/stderr_8c.html#ab5048bac2b854814f318bc2405535f31">stderr</a>)</td></tr>
<tr class="separator:a23dc422a1eed633a3a9ce331720ca21c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4236e83af520841a9f9b18cab6952df1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a4236e83af520841a9f9b18cab6952df1">INVALID_SIGNAL_HANDLER</a>&#160;&#160;&#160;(<a class="el" href="../../dd/db7/bash_2lib_2readline_2signals_8c.html#a1f8d6bb6b9aaad1c21141fc327620e99">SigHandler</a> *)<a class="el" href="../../d8/d8d/nojobs_8c.html#a78ed3b2eb7b5f681be73c08ed2f15946">wait_for_background_pids</a></td></tr>
<tr class="separator:a4236e83af520841a9f9b18cab6952df1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b48ad51922d930d3b692dc8517627d4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a6b48ad51922d930d3b692dc8517627d4">FIND_CHILD</a>(<a class="el" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>,  <a class="el" href="../../d3/d16/pstree_8c.html#d6/d07/structchild">child</a>)</td></tr>
<tr class="separator:a6b48ad51922d930d3b692dc8517627d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ab7fb6f5d79d54cd7838e62c8a97d2a84"><td class="memItemLeft" align="right" valign="top">typedef int sh_job_map_func_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#ab7fb6f5d79d54cd7838e62c8a97d2a84">PARAMS</a>((<a class="el" href="../../d3/d3a/jobs_8h.html#ad1f8bdd512539c00ae7093dfcbe0a473">JOB</a> *, int, int, int))</td></tr>
<tr class="separator:ab7fb6f5d79d54cd7838e62c8a97d2a84"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a8120557116c791c66f695dd5956c03e4"><td class="memItemLeft" align="right" valign="top">int <a class="el" href="../../d8/d73/killpg_8c.html#a7ffdc3cae8a7a29a324c1a86410597e1">killpg</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a8120557116c791c66f695dd5956c03e4">PARAMS</a> ((<a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a>, int))</td></tr>
<tr class="separator:a8120557116c791c66f695dd5956c03e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1cfef33b620cf092bcf422924864647"><td class="memItemLeft" align="right" valign="top">void <a class="el" href="../../dc/d6f/trap_8c.html#a16eea6a0b6ebfc715568ee23e0ae83b9">set_original_signal</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#ab1cfef33b620cf092bcf422924864647">PARAMS</a> ((int, <a class="el" href="../../dd/db7/bash_2lib_2readline_2signals_8c.html#a1f8d6bb6b9aaad1c21141fc327620e99">SigHandler</a> *))</td></tr>
<tr class="separator:ab1cfef33b620cf092bcf422924864647"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf7e994e6b7a6080266c91a2f8c2b0c4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#aaf7e994e6b7a6080266c91a2f8c2b0c4">debug_print_pgrps</a> (void)</td></tr>
<tr class="separator:aaf7e994e6b7a6080266c91a2f8c2b0c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa79e921627e6969eedc9af7b3d968651"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d0/dde/rl-callbacktest_8c.html#a2be1284fe65357755b6161a039fb59e4">sighandler</a> <a class="el" href="../../d8/d8d/nojobs_8c.html#a89ced87614d7f6c88e27c96091684467">wait_sigint_handler</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#aa79e921627e6969eedc9af7b3d968651">PARAMS</a> ((int))</td></tr>
<tr class="separator:aa79e921627e6969eedc9af7b3d968651"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc79923b100861c2751458ba6b55a49e"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d3/d3a/jobs_8h.html#aefa2ee881236dafa12ac2427bb9c5088">PROCESS</a> *<a class="el" href="../../df/d8e/jobs_8c.html#a902def40ee6ba9df31a8c4d126229005">find_pid_in_pipeline</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#adc79923b100861c2751458ba6b55a49e">PARAMS</a> ((<a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a>, <a class="el" href="../../d3/d3a/jobs_8h.html#aefa2ee881236dafa12ac2427bb9c5088">PROCESS</a> *, int))</td></tr>
<tr class="separator:adc79923b100861c2751458ba6b55a49e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a685152789c57d78d917ddba8873dac81"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d3/d3a/jobs_8h.html#aefa2ee881236dafa12ac2427bb9c5088">PROCESS</a> *<a class="el" href="../../df/d8e/jobs_8c.html#a6581f40e1e7657048cbecabb416f13bb">find_pipeline</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a685152789c57d78d917ddba8873dac81">PARAMS</a> ((<a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a>, int, int *))</td></tr>
<tr class="separator:a685152789c57d78d917ddba8873dac81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1dd8860d8ef9359620953562aa272ff"><td class="memItemLeft" align="right" valign="top">static char *<a class="el" href="../../df/d8e/jobs_8c.html#aa00dc6ac57f419e8d59ff822cc7b51ab">current_working_directory</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#ac1dd8860d8ef9359620953562aa272ff">PARAMS</a> ((void))</td></tr>
<tr class="separator:ac1dd8860d8ef9359620953562aa272ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abeff4d37d45dd1f1617eaf93c87e306d"><td class="memItemLeft" align="right" valign="top">static int <a class="el" href="../../df/d8e/jobs_8c.html#aafea484f3bce52ca817d92f7c7b833ed">map_over_jobs</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#abeff4d37d45dd1f1617eaf93c87e306d">PARAMS</a> ((sh_job_map_func_t *, int, int))</td></tr>
<tr class="separator:abeff4d37d45dd1f1617eaf93c87e306d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab0f1a0def64862cc5bd9bd0f0c9759c"><td class="memItemLeft" align="right" valign="top">static int <a class="el" href="../../df/d8e/jobs_8c.html#a63606668cb8599788b6876b0f8683418">most_recent_job_in_state</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#aab0f1a0def64862cc5bd9bd0f0c9759c">PARAMS</a> ((int, <a class="el" href="../../d3/d3a/jobs_8h.html#a27f134c9d8392fc50ee339c518707f57">JOB_STATE</a>))</td></tr>
<tr class="separator:aab0f1a0def64862cc5bd9bd0f0c9759c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bc653575844f2f849fd226b4de7ba33"><td class="memItemLeft" align="right" valign="top">static int <a class="el" href="../../df/d8e/jobs_8c.html#a99584c8b38b45a70629677a975056374">find_job</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a3bc653575844f2f849fd226b4de7ba33">PARAMS</a> ((<a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a>, int, <a class="el" href="../../d3/d3a/jobs_8h.html#aefa2ee881236dafa12ac2427bb9c5088">PROCESS</a> **))</td></tr>
<tr class="separator:a3bc653575844f2f849fd226b4de7ba33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaded572b92c8194bd4267cf902737fdf"><td class="memItemLeft" align="right" valign="top">static int <a class="el" href="../../d8/d8d/nojobs_8c.html#ab424b34a1f2efb697ac04e6ae1b67bd9">process_exit_status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#aaded572b92c8194bd4267cf902737fdf">PARAMS</a> ((<a class="el" href="../../d9/dab/posixwait_8h.html#ad83fd8df8943a816e70cd8a3a31df5c3">WAIT</a>))</td></tr>
<tr class="separator:aaded572b92c8194bd4267cf902737fdf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1f71fae63033e9e3a59fd90213da5c9"><td class="memItemLeft" align="right" valign="top">static void <a class="el" href="../../df/d8e/jobs_8c.html#ac5deaaec3f7af2c959d1508e9f5f8fce">add_process</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#aa1f71fae63033e9e3a59fd90213da5c9">PARAMS</a> ((char *, <a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a>))</td></tr>
<tr class="separator:aa1f71fae63033e9e3a59fd90213da5c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42bfae6b35b9cab06c3f312ecf9cb735"><td class="memItemLeft" align="right" valign="top">static void <a class="el" href="../../df/d8e/jobs_8c.html#acc4f7a8abd55aaf9f35c58fe4afc0989">print_pipeline</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a42bfae6b35b9cab06c3f312ecf9cb735">PARAMS</a> ((<a class="el" href="../../d3/d3a/jobs_8h.html#aefa2ee881236dafa12ac2427bb9c5088">PROCESS</a> *, int, int, <a class="el" href="../../dc/d4d/libc_2include_2stdio_8h.html#a912af5ab9f8a52ddd387b7defc0b49f1">FILE</a> *))</td></tr>
<tr class="separator:a42bfae6b35b9cab06c3f312ecf9cb735"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6a3b163e38cb8ca9249e7bf16ff4e16"><td class="memItemLeft" align="right" valign="top">static void <a class="el" href="../../df/d8e/jobs_8c.html#af63ad360618b0a85b34755c7bc513b08">pretty_print_job</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#aa6a3b163e38cb8ca9249e7bf16ff4e16">PARAMS</a> ((int, int, <a class="el" href="../../dc/d4d/libc_2include_2stdio_8h.html#a912af5ab9f8a52ddd387b7defc0b49f1">FILE</a> *))</td></tr>
<tr class="separator:aa6a3b163e38cb8ca9249e7bf16ff4e16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5489327bf55be2da2ed8a48e9e027549"><td class="memItemLeft" align="right" valign="top">static int <a class="el" href="../../df/d8e/jobs_8c.html#ade652681afa73d6b7c0b50697d071f83">maybe_give_terminal_to</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a5489327bf55be2da2ed8a48e9e027549">PARAMS</a> ((<a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a>, <a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a>, int))</td></tr>
<tr class="separator:a5489327bf55be2da2ed8a48e9e027549"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30c3edb2b02399d64b5e8eaaf7fe40e6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a30c3edb2b02399d64b5e8eaaf7fe40e6">tcgetpgrp</a> (int <a class="el" href="../../d3/d46/textbox_8c.html#a6f8059414f0228f0256115e024eeed4b">fd</a>)</td></tr>
<tr class="separator:a30c3edb2b02399d64b5e8eaaf7fe40e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f9d98a5ac1e452fa40b1ca93285843a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a1f9d98a5ac1e452fa40b1ca93285843a">init_job_stats</a> ()</td></tr>
<tr class="separator:a1f9d98a5ac1e452fa40b1ca93285843a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa00dc6ac57f419e8d59ff822cc7b51ab"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#aa00dc6ac57f419e8d59ff822cc7b51ab">current_working_directory</a> ()</td></tr>
<tr class="separator:aa00dc6ac57f419e8d59ff822cc7b51ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a504a46e0a88bc784f96093dc7506e6fa"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a504a46e0a88bc784f96093dc7506e6fa">job_working_directory</a> ()</td></tr>
<tr class="separator:a504a46e0a88bc784f96093dc7506e6fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52091bff84389f379c1dfae1369c019e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a52091bff84389f379c1dfae1369c019e">making_children</a> ()</td></tr>
<tr class="separator:a52091bff84389f379c1dfae1369c019e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d4feeb769d599bb634672546e5a19ff"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a5d4feeb769d599bb634672546e5a19ff">stop_making_children</a> ()</td></tr>
<tr class="separator:a5d4feeb769d599bb634672546e5a19ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad2d2f6a2251b71cf26012d046f93d89"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#aad2d2f6a2251b71cf26012d046f93d89">cleanup_the_pipeline</a> ()</td></tr>
<tr class="separator:aad2d2f6a2251b71cf26012d046f93d89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae076d60db4f63dd44d8093842fd79a4c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#ae076d60db4f63dd44d8093842fd79a4c">discard_last_procsub_child</a> ()</td></tr>
<tr class="separator:ae076d60db4f63dd44d8093842fd79a4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8fe3d7879405c3910a34e0b8dda55bb"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d3/d3a/jobs_8h.html#d8/df7/structpipeline__saver">pipeline_saver</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#ae8fe3d7879405c3910a34e0b8dda55bb">alloc_pipeline_saver</a> ()</td></tr>
<tr class="separator:ae8fe3d7879405c3910a34e0b8dda55bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1181af998ba25683752c7cd4bdf91091"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a1181af998ba25683752c7cd4bdf91091">save_pipeline</a> (int clear)</td></tr>
<tr class="separator:a1181af998ba25683752c7cd4bdf91091"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19307882067f71f056dc87339565cce1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d3a/jobs_8h.html#aefa2ee881236dafa12ac2427bb9c5088">PROCESS</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a19307882067f71f056dc87339565cce1">restore_pipeline</a> (int discard)</td></tr>
<tr class="separator:a19307882067f71f056dc87339565cce1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a718ce465ffb026f4a2b67b4a6eab4761"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a718ce465ffb026f4a2b67b4a6eab4761">start_pipeline</a> ()</td></tr>
<tr class="separator:a718ce465ffb026f4a2b67b4a6eab4761"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad569e95d0123bab22a08e7d38a3a06e1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#ad569e95d0123bab22a08e7d38a3a06e1">stop_pipeline</a> (int async, <a class="el" href="../../d1/d47/fileman_8c.html#dc/d56/structCOMMAND">COMMAND</a> *deferred)</td></tr>
<tr class="separator:ad569e95d0123bab22a08e7d38a3a06e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e03148121047cff6dda436442ac7960"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a5e03148121047cff6dda436442ac7960">bgp_resize</a> ()</td></tr>
<tr class="separator:a5e03148121047cff6dda436442ac7960"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14eab3b775a7ec5d490e506cf833dec9"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d3/d3a/jobs_8h.html#a677d6488545fa3193e7cb54647b4ae5c">ps_index_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a14eab3b775a7ec5d490e506cf833dec9">bgp_getindex</a> ()</td></tr>
<tr class="separator:a14eab3b775a7ec5d490e506cf833dec9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e0bb0533cedbd5496331c5aae1e1d60"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d3/d3a/jobs_8h.html#a677d6488545fa3193e7cb54647b4ae5c">ps_index_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a7e0bb0533cedbd5496331c5aae1e1d60">pshash_getbucket</a> (<a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a> <a class="el" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>)</td></tr>
<tr class="separator:a7e0bb0533cedbd5496331c5aae1e1d60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac44d197b4771154fac5c0eefca1052f6"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d3/d3a/jobs_8h.html#d5/d37/structpidstat">pidstat</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#ac44d197b4771154fac5c0eefca1052f6">bgp_add</a> (<a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a> <a class="el" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, int <a class="el" href="../../d7/d5b/mail_8c.html#a6943d6e2e83995c648644bc0a4d36f53">status</a>)</td></tr>
<tr class="separator:ac44d197b4771154fac5c0eefca1052f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe405cc65c61bf8889e6147876a49c75"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#afe405cc65c61bf8889e6147876a49c75">pshash_delindex</a> (<a class="el" href="../../d3/d3a/jobs_8h.html#a677d6488545fa3193e7cb54647b4ae5c">ps_index_t</a> psi)</td></tr>
<tr class="separator:afe405cc65c61bf8889e6147876a49c75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1944a12e8c62f7d7a9b419a9228a89a9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a1944a12e8c62f7d7a9b419a9228a89a9">bgp_delete</a> (<a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a> <a class="el" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>)</td></tr>
<tr class="separator:a1944a12e8c62f7d7a9b419a9228a89a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2aa5e9feea832a14471ef39a355c91a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#ab2aa5e9feea832a14471ef39a355c91a">bgp_clear</a> ()</td></tr>
<tr class="separator:ab2aa5e9feea832a14471ef39a355c91a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9ed29155697136943ee817c237314e1"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#ad9ed29155697136943ee817c237314e1">bgp_search</a> (<a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a> <a class="el" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>)</td></tr>
<tr class="separator:ad9ed29155697136943ee817c237314e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f7487af98f3470c275daee9e343d1e8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a0f7487af98f3470c275daee9e343d1e8">save_proc_status</a> (<a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a> <a class="el" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, int <a class="el" href="../../d7/d5b/mail_8c.html#a6943d6e2e83995c648644bc0a4d36f53">status</a>)</td></tr>
<tr class="separator:a0f7487af98f3470c275daee9e343d1e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a037783844d1b44bdec0f7eef30dd6ede"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a037783844d1b44bdec0f7eef30dd6ede">reset_job_indices</a> ()</td></tr>
<tr class="separator:a037783844d1b44bdec0f7eef30dd6ede"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47c393729bc38de011d2422746de634c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a47c393729bc38de011d2422746de634c">cleanup_dead_jobs</a> ()</td></tr>
<tr class="separator:a47c393729bc38de011d2422746de634c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3e9a0b379bd8615de3876b2e6b6754d"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#ac3e9a0b379bd8615de3876b2e6b6754d">processes_in_job</a> (int <a class="el" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>)</td></tr>
<tr class="separator:ac3e9a0b379bd8615de3876b2e6b6754d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b6e7c7a458539929974e288a59a2f38"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a5b6e7c7a458539929974e288a59a2f38">delete_old_job</a> (<a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a> <a class="el" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>)</td></tr>
<tr class="separator:a5b6e7c7a458539929974e288a59a2f38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a062169660044519b9a33a27f35cf6a85"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a062169660044519b9a33a27f35cf6a85">realloc_jobs_list</a> ()</td></tr>
<tr class="separator:a062169660044519b9a33a27f35cf6a85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d9dd03ba5aadbebe470c27eae2209da"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a9d9dd03ba5aadbebe470c27eae2209da">compact_jobs_list</a> (int <a class="el" href="../../db/dd4/sm__loop_8c.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a>)</td></tr>
<tr class="separator:a9d9dd03ba5aadbebe470c27eae2209da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6f3e928efd8e712697fe9c5903b7610"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#ae6f3e928efd8e712697fe9c5903b7610">delete_job</a> (int job_index, int dflags)</td></tr>
<tr class="separator:ae6f3e928efd8e712697fe9c5903b7610"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9711d4d0e7ed711f9160dbfcf22aa75c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a9711d4d0e7ed711f9160dbfcf22aa75c">nohup_job</a> (int job_index)</td></tr>
<tr class="separator:a9711d4d0e7ed711f9160dbfcf22aa75c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aefd8badf09efc12aee9dfa1cfaaef024"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#aefd8badf09efc12aee9dfa1cfaaef024">discard_pipeline</a> (<a class="el" href="../../d3/d3a/jobs_8h.html#aefa2ee881236dafa12ac2427bb9c5088">PROCESS</a> *<a class="el" href="../../de/dcc/awk_8c.html#a9ad4afc25cc6f9f5d90444710081b250">chain</a>)</td></tr>
<tr class="separator:aefd8badf09efc12aee9dfa1cfaaef024"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5deaaec3f7af2c959d1508e9f5f8fce"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#ac5deaaec3f7af2c959d1508e9f5f8fce">add_process</a> (char *name, <a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a> <a class="el" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>)</td></tr>
<tr class="separator:ac5deaaec3f7af2c959d1508e9f5f8fce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00c2a1d6f9dcaf3f68f9f66726827b7f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a00c2a1d6f9dcaf3f68f9f66726827b7f">append_process</a> (char *name, <a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a> <a class="el" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, int <a class="el" href="../../d7/d5b/mail_8c.html#a6943d6e2e83995c648644bc0a4d36f53">status</a>, int jid)</td></tr>
<tr class="separator:a00c2a1d6f9dcaf3f68f9f66726827b7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aafea484f3bce52ca817d92f7c7b833ed"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#aafea484f3bce52ca817d92f7c7b833ed">map_over_jobs</a> (sh_job_map_func_t *<a class="el" href="../../de/dcc/awk_8c.html#a553299c54ca0f9dd61768a1f8a0e481a">func</a>, int arg1, int arg2)</td></tr>
<tr class="separator:aafea484f3bce52ca817d92f7c7b833ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56a3393f655f01d7c763be6f034b57b7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a56a3393f655f01d7c763be6f034b57b7">terminate_current_pipeline</a> ()</td></tr>
<tr class="separator:a56a3393f655f01d7c763be6f034b57b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac172ca161ecd7a5b6baf30e9c239c65"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#aac172ca161ecd7a5b6baf30e9c239c65">terminate_stopped_jobs</a> ()</td></tr>
<tr class="separator:aac172ca161ecd7a5b6baf30e9c239c65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9399fb7055be9b3b9aeb362c96a53f7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#ac9399fb7055be9b3b9aeb362c96a53f7">hangup_all_jobs</a> ()</td></tr>
<tr class="separator:ac9399fb7055be9b3b9aeb362c96a53f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac29c70bbf156a302776a486f60cb31e0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#ac29c70bbf156a302776a486f60cb31e0">kill_current_pipeline</a> ()</td></tr>
<tr class="separator:ac29c70bbf156a302776a486f60cb31e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a902def40ee6ba9df31a8c4d126229005"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d3/d3a/jobs_8h.html#aefa2ee881236dafa12ac2427bb9c5088">PROCESS</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a902def40ee6ba9df31a8c4d126229005">find_pid_in_pipeline</a> (<a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a> <a class="el" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, <a class="el" href="../../d3/d3a/jobs_8h.html#aefa2ee881236dafa12ac2427bb9c5088">PROCESS</a> *<a class="el" href="../../d1/dbe/ash_8c.html#aa4d0786b62ad8f3eb6b8196eb8aef78d">pipeline</a>, int alive_only)</td></tr>
<tr class="separator:a902def40ee6ba9df31a8c4d126229005"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6581f40e1e7657048cbecabb416f13bb"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d3/d3a/jobs_8h.html#aefa2ee881236dafa12ac2427bb9c5088">PROCESS</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a6581f40e1e7657048cbecabb416f13bb">find_pipeline</a> (<a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a> <a class="el" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, int alive_only, int *jobp)</td></tr>
<tr class="separator:a6581f40e1e7657048cbecabb416f13bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16d3beacf583f9f0822f8b06b83695fe"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d3/d3a/jobs_8h.html#aefa2ee881236dafa12ac2427bb9c5088">PROCESS</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a16d3beacf583f9f0822f8b06b83695fe">find_process</a> (<a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a> <a class="el" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, int alive_only, int *jobp)</td></tr>
<tr class="separator:a16d3beacf583f9f0822f8b06b83695fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99584c8b38b45a70629677a975056374"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a99584c8b38b45a70629677a975056374">find_job</a> (<a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a> <a class="el" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, int alive_only, <a class="el" href="../../d3/d3a/jobs_8h.html#aefa2ee881236dafa12ac2427bb9c5088">PROCESS</a> **procp)</td></tr>
<tr class="separator:a99584c8b38b45a70629677a975056374"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfd27f1febc093990e9b072643ecdac7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#adfd27f1febc093990e9b072643ecdac7">get_job_by_pid</a> (<a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a> <a class="el" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, int block, <a class="el" href="../../d3/d3a/jobs_8h.html#aefa2ee881236dafa12ac2427bb9c5088">PROCESS</a> **procp)</td></tr>
<tr class="separator:adfd27f1febc093990e9b072643ecdac7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e05c5efdbabb700ce1f089aa2208017"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a6e05c5efdbabb700ce1f089aa2208017">describe_pid</a> (<a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a> <a class="el" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>)</td></tr>
<tr class="separator:a6e05c5efdbabb700ce1f089aa2208017"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73562e7524f0f619567b2414e0a15309"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a73562e7524f0f619567b2414e0a15309">j_strsignal</a> (int <a class="el" href="../../df/d19/arpping_8c.html#ac9562ee4ecb3b8aeebeb04656e7e57a9">s</a>)</td></tr>
<tr class="separator:a73562e7524f0f619567b2414e0a15309"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa39fb0570606ccbbce86ce48dfb52a9e"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#aa39fb0570606ccbbce86ce48dfb52a9e">printable_job_status</a> (int <a class="el" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a>, <a class="el" href="../../d3/d3a/jobs_8h.html#aefa2ee881236dafa12ac2427bb9c5088">PROCESS</a> *<a class="el" href="../../d6/d23/wi__stuff_8c.html#a5f53dec9fe800012c2be6ab5167d2cfd">p</a>, int <a class="el" href="../../d7/dd7/libbb_8h.html#ad09bf069f1dc789b35e313c3e2748329">format</a>)</td></tr>
<tr class="separator:aa39fb0570606ccbbce86ce48dfb52a9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc4f7a8abd55aaf9f35c58fe4afc0989"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#acc4f7a8abd55aaf9f35c58fe4afc0989">print_pipeline</a> (<a class="el" href="../../d3/d3a/jobs_8h.html#aefa2ee881236dafa12ac2427bb9c5088">PROCESS</a> *<a class="el" href="../../d6/d23/wi__stuff_8c.html#a5f53dec9fe800012c2be6ab5167d2cfd">p</a>, int job_index, int <a class="el" href="../../d7/dd7/libbb_8h.html#ad09bf069f1dc789b35e313c3e2748329">format</a>, <a class="el" href="../../dc/d4d/libc_2include_2stdio_8h.html#a912af5ab9f8a52ddd387b7defc0b49f1">FILE</a> *stream)</td></tr>
<tr class="separator:acc4f7a8abd55aaf9f35c58fe4afc0989"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af63ad360618b0a85b34755c7bc513b08"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#af63ad360618b0a85b34755c7bc513b08">pretty_print_job</a> (int job_index, int <a class="el" href="../../d7/dd7/libbb_8h.html#ad09bf069f1dc789b35e313c3e2748329">format</a>, <a class="el" href="../../dc/d4d/libc_2include_2stdio_8h.html#a912af5ab9f8a52ddd387b7defc0b49f1">FILE</a> *stream)</td></tr>
<tr class="separator:af63ad360618b0a85b34755c7bc513b08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86dc11f7ce9b7fa8cb388f1e9029ac46"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a86dc11f7ce9b7fa8cb388f1e9029ac46">print_job</a> (<a class="el" href="../../d3/d3a/jobs_8h.html#ad1f8bdd512539c00ae7093dfcbe0a473">JOB</a> *<a class="el" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>, int <a class="el" href="../../d7/dd7/libbb_8h.html#ad09bf069f1dc789b35e313c3e2748329">format</a>, int <a class="el" href="../../d6/d23/wi__stuff_8c.html#a102a30241e29b7ae7a452418431f728d">state</a>, int job_index)</td></tr>
<tr class="separator:a86dc11f7ce9b7fa8cb388f1e9029ac46"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae858994fe6f851d06889c330f0372bfb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#ae858994fe6f851d06889c330f0372bfb">list_one_job</a> (<a class="el" href="../../d3/d3a/jobs_8h.html#ad1f8bdd512539c00ae7093dfcbe0a473">JOB</a> *<a class="el" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>, int <a class="el" href="../../d7/dd7/libbb_8h.html#ad09bf069f1dc789b35e313c3e2748329">format</a>, int <a class="el" href="../../d0/d11/fsck_8c.html#a5b2083482543865af1fe0c0f3cb7af50">ignore</a>, int job_index)</td></tr>
<tr class="separator:ae858994fe6f851d06889c330f0372bfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a445f3a091027fd8aed287e6463e92283"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a445f3a091027fd8aed287e6463e92283">list_stopped_jobs</a> (int <a class="el" href="../../d7/dd7/libbb_8h.html#ad09bf069f1dc789b35e313c3e2748329">format</a>)</td></tr>
<tr class="separator:a445f3a091027fd8aed287e6463e92283"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85b9d5bdb58ebb4c7556f9f4350d557e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a85b9d5bdb58ebb4c7556f9f4350d557e">list_running_jobs</a> (int <a class="el" href="../../d7/dd7/libbb_8h.html#ad09bf069f1dc789b35e313c3e2748329">format</a>)</td></tr>
<tr class="separator:a85b9d5bdb58ebb4c7556f9f4350d557e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac165de0465f02a6ff7a7b5c705837bcf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#ac165de0465f02a6ff7a7b5c705837bcf">list_all_jobs</a> (int <a class="el" href="../../d7/dd7/libbb_8h.html#ad09bf069f1dc789b35e313c3e2748329">format</a>)</td></tr>
<tr class="separator:ac165de0465f02a6ff7a7b5c705837bcf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6ee1058c7a454b7e482ce8fa34ddbb7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#ab6ee1058c7a454b7e482ce8fa34ddbb7">make_child</a> (char *<a class="el" href="../../d6/d90/hush_8c.html#dc/d76/structcommand">command</a>, int <a class="el" href="../../db/dd4/sm__loop_8c.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a>)</td></tr>
<tr class="separator:ab6ee1058c7a454b7e482ce8fa34ddbb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b224dea42fc99fc8f75137c74d10d8c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a0b224dea42fc99fc8f75137c74d10d8c">ignore_tty_job_signals</a> ()</td></tr>
<tr class="separator:a0b224dea42fc99fc8f75137c74d10d8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35131fce775aec129aca6c1ea1127f97"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a35131fce775aec129aca6c1ea1127f97">default_tty_job_signals</a> ()</td></tr>
<tr class="separator:a35131fce775aec129aca6c1ea1127f97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a186a35817ae0f49ac740cbae8f598edb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a186a35817ae0f49ac740cbae8f598edb">get_original_tty_job_signals</a> ()</td></tr>
<tr class="separator:a186a35817ae0f49ac740cbae8f598edb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37d6118360319f23c01a9a326ad32906"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a37d6118360319f23c01a9a326ad32906">get_tty_state</a> ()</td></tr>
<tr class="separator:a37d6118360319f23c01a9a326ad32906"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9dc901cdc105f8060eafdc6301fe2de"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#ab9dc901cdc105f8060eafdc6301fe2de">set_tty_state</a> ()</td></tr>
<tr class="separator:ab9dc901cdc105f8060eafdc6301fe2de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a439aacb4e64d3b5ec52640311fbdcf"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d3/d3a/jobs_8h.html#aefa2ee881236dafa12ac2427bb9c5088">PROCESS</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a3a439aacb4e64d3b5ec52640311fbdcf">find_last_proc</a> (int <a class="el" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>, int block)</td></tr>
<tr class="separator:a3a439aacb4e64d3b5ec52640311fbdcf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a758086bb1f3a53e925371b718b1068ab"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a758086bb1f3a53e925371b718b1068ab">find_last_pid</a> (int <a class="el" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>, int block)</td></tr>
<tr class="separator:a758086bb1f3a53e925371b718b1068ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a637f8e438a0ea8c409d891cb8ccb523e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a637f8e438a0ea8c409d891cb8ccb523e">wait_for_single_pid</a> (<a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a> <a class="el" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, int <a class="el" href="../../db/dd4/sm__loop_8c.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a>)</td></tr>
<tr class="separator:a637f8e438a0ea8c409d891cb8ccb523e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78ed3b2eb7b5f681be73c08ed2f15946"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a78ed3b2eb7b5f681be73c08ed2f15946">wait_for_background_pids</a> (struct <a class="el" href="../../d1/dbe/ash_8c.html#d3/d9e/structprocstat">procstat</a> *ps)</td></tr>
<tr class="separator:a78ed3b2eb7b5f681be73c08ed2f15946"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ced6c7ceaf0cf2f9983aa5262dfe392"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a1ced6c7ceaf0cf2f9983aa5262dfe392">wait_sigint_cleanup</a> ()</td></tr>
<tr class="separator:a1ced6c7ceaf0cf2f9983aa5262dfe392"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abaf052f06c9c04a236219814419b7e83"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#abaf052f06c9c04a236219814419b7e83">restore_sigint_handler</a> ()</td></tr>
<tr class="separator:abaf052f06c9c04a236219814419b7e83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89ced87614d7f6c88e27c96091684467"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d0/dde/rl-callbacktest_8c.html#a2be1284fe65357755b6161a039fb59e4">sighandler</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a89ced87614d7f6c88e27c96091684467">wait_sigint_handler</a> (int sig)</td></tr>
<tr class="separator:a89ced87614d7f6c88e27c96091684467"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa55261d2e8eb934ebde20d623e5e05d2"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#aa55261d2e8eb934ebde20d623e5e05d2">process_exit_signal</a> (<a class="el" href="../../d9/dab/posixwait_8h.html#ad83fd8df8943a816e70cd8a3a31df5c3">WAIT</a> <a class="el" href="../../d7/d5b/mail_8c.html#a6943d6e2e83995c648644bc0a4d36f53">status</a>)</td></tr>
<tr class="separator:aa55261d2e8eb934ebde20d623e5e05d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab424b34a1f2efb697ac04e6ae1b67bd9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#ab424b34a1f2efb697ac04e6ae1b67bd9">process_exit_status</a> (<a class="el" href="../../d9/dab/posixwait_8h.html#ad83fd8df8943a816e70cd8a3a31df5c3">WAIT</a> <a class="el" href="../../d7/d5b/mail_8c.html#a6943d6e2e83995c648644bc0a4d36f53">status</a>)</td></tr>
<tr class="separator:ab424b34a1f2efb697ac04e6ae1b67bd9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98276db28c5fb03624f84aabe134de90"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d9/dab/posixwait_8h.html#ad83fd8df8943a816e70cd8a3a31df5c3">WAIT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a98276db28c5fb03624f84aabe134de90">job_signal_status</a> (int <a class="el" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>)</td></tr>
<tr class="separator:a98276db28c5fb03624f84aabe134de90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af88686bf38197f4c2a43031f5ddbbec8"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d9/dab/posixwait_8h.html#ad83fd8df8943a816e70cd8a3a31df5c3">WAIT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#af88686bf38197f4c2a43031f5ddbbec8">raw_job_exit_status</a> (int <a class="el" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>)</td></tr>
<tr class="separator:af88686bf38197f4c2a43031f5ddbbec8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a997643f3b98ece63e0acd25b30a1b93e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a997643f3b98ece63e0acd25b30a1b93e">job_exit_status</a> (int <a class="el" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>)</td></tr>
<tr class="separator:a997643f3b98ece63e0acd25b30a1b93e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa66bc71748a428c3e27ab8271a4459ce"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#aa66bc71748a428c3e27ab8271a4459ce">job_exit_signal</a> (int <a class="el" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>)</td></tr>
<tr class="separator:aa66bc71748a428c3e27ab8271a4459ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa16d61880057512c4b0d5e127d4cd6bb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#aa16d61880057512c4b0d5e127d4cd6bb">wait_for</a> (<a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a> <a class="el" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, int <a class="el" href="../../db/dd4/sm__loop_8c.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a>)</td></tr>
<tr class="separator:aa16d61880057512c4b0d5e127d4cd6bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0503fdca670f3197749736949ba2d49d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a0503fdca670f3197749736949ba2d49d">wait_for_job</a> (int <a class="el" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>, int <a class="el" href="../../db/dd4/sm__loop_8c.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a>, struct <a class="el" href="../../d1/dbe/ash_8c.html#d3/d9e/structprocstat">procstat</a> *ps)</td></tr>
<tr class="separator:a0503fdca670f3197749736949ba2d49d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acefcaa25eb74ccbb6df628c760cde11a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#acefcaa25eb74ccbb6df628c760cde11a">wait_for_any_job</a> (int <a class="el" href="../../db/dd4/sm__loop_8c.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a>, struct <a class="el" href="../../d1/dbe/ash_8c.html#d3/d9e/structprocstat">procstat</a> *ps)</td></tr>
<tr class="separator:acefcaa25eb74ccbb6df628c760cde11a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf243013e184887caa6995be05126873"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#adf243013e184887caa6995be05126873">notify_and_cleanup</a> ()</td></tr>
<tr class="separator:adf243013e184887caa6995be05126873"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8113aecd5926c83f5bec94aaded2476a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a8113aecd5926c83f5bec94aaded2476a">reap_dead_jobs</a> ()</td></tr>
<tr class="separator:a8113aecd5926c83f5bec94aaded2476a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63606668cb8599788b6876b0f8683418"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a63606668cb8599788b6876b0f8683418">most_recent_job_in_state</a> (int <a class="el" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>, <a class="el" href="../../d3/d3a/jobs_8h.html#a27f134c9d8392fc50ee339c518707f57">JOB_STATE</a> <a class="el" href="../../d6/d23/wi__stuff_8c.html#a102a30241e29b7ae7a452418431f728d">state</a>)</td></tr>
<tr class="separator:a63606668cb8599788b6876b0f8683418"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65da6d0fa85ebbb91282a70c186172ee"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a65da6d0fa85ebbb91282a70c186172ee">job_last_stopped</a> (int <a class="el" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>)</td></tr>
<tr class="separator:a65da6d0fa85ebbb91282a70c186172ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16770b5754c59e8942a2a4e577d3489b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a16770b5754c59e8942a2a4e577d3489b">job_last_running</a> (int <a class="el" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>)</td></tr>
<tr class="separator:a16770b5754c59e8942a2a4e577d3489b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a418c0d4ef10f2149706710f16d250882"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a418c0d4ef10f2149706710f16d250882">set_current_job</a> (int <a class="el" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>)</td></tr>
<tr class="separator:a418c0d4ef10f2149706710f16d250882"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8461670b988ab55fb068f3546e2dbceb"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a8461670b988ab55fb068f3546e2dbceb">reset_current</a> ()</td></tr>
<tr class="separator:a8461670b988ab55fb068f3546e2dbceb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61bf5bf35899dc2c1e91cd412de1876b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a61bf5bf35899dc2c1e91cd412de1876b">set_job_running</a> (int <a class="el" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>)</td></tr>
<tr class="separator:a61bf5bf35899dc2c1e91cd412de1876b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf725a8b0ca073cc1140e9f1d88b0c26"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#abf725a8b0ca073cc1140e9f1d88b0c26">start_job</a> (int <a class="el" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>, int foreground)</td></tr>
<tr class="separator:abf725a8b0ca073cc1140e9f1d88b0c26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf4ffb95309a2a66455507a242a6ff7e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#acf4ffb95309a2a66455507a242a6ff7e">kill_pid</a> (<a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a> <a class="el" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, int sig, int <a class="el" href="../../dd/dbc/meta_8h.html#d3/d08/structgroup">group</a>)</td></tr>
<tr class="separator:acf4ffb95309a2a66455507a242a6ff7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ff305f4a0cb3c0f7ccb33c71cc2d0d2"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d0/dde/rl-callbacktest_8c.html#a2be1284fe65357755b6161a039fb59e4">sighandler</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a2ff305f4a0cb3c0f7ccb33c71cc2d0d2">sigchld_handler</a> (int sig)</td></tr>
<tr class="separator:a2ff305f4a0cb3c0f7ccb33c71cc2d0d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84e054741c4b7e3132b43efce8064090"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a84e054741c4b7e3132b43efce8064090">waitchld</a> (<a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a> wpid, int block)</td></tr>
<tr class="separator:a84e054741c4b7e3132b43efce8064090"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b699391d568903c90bbce6a46a744fb"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a5b699391d568903c90bbce6a46a744fb">set_job_status_and_cleanup</a> (int <a class="el" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>)</td></tr>
<tr class="separator:a5b699391d568903c90bbce6a46a744fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28bc0018a01c0f1991274a6a2e6d79f4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a28bc0018a01c0f1991274a6a2e6d79f4">setjstatus</a> (int <a class="el" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a>)</td></tr>
<tr class="separator:a28bc0018a01c0f1991274a6a2e6d79f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abdbc0219d409378ba6c6732891257457"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#abdbc0219d409378ba6c6732891257457">run_sigchld_trap</a> (int nchild)</td></tr>
<tr class="separator:abdbc0219d409378ba6c6732891257457"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d9c4222b40edc2f52cb70d3df978b22"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a4d9c4222b40edc2f52cb70d3df978b22">notify_of_job_status</a> ()</td></tr>
<tr class="separator:a4d9c4222b40edc2f52cb70d3df978b22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9447ba6eda1088457e76cc37da06b7b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#aa9447ba6eda1088457e76cc37da06b7b">initialize_job_control</a> (int <a class="el" href="../../dc/d4b/bash_2examples_2loadables_2rm_8c.html#a52de43b6faa0d9601f10db8b3826f11a">force</a>)</td></tr>
<tr class="separator:aa9447ba6eda1088457e76cc37da06b7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a498a633d49209b6c93d81baf6e7e1430"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a498a633d49209b6c93d81baf6e7e1430">set_new_line_discipline</a> (int tty)</td></tr>
<tr class="separator:a498a633d49209b6c93d81baf6e7e1430"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3bf0c468c5caa52e82aa6a68f6a3099"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#ab3bf0c468c5caa52e82aa6a68f6a3099">initialize_job_signals</a> ()</td></tr>
<tr class="separator:ab3bf0c468c5caa52e82aa6a68f6a3099"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9da7fe878f86821d72ebb991092f2a13"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d0/dde/rl-callbacktest_8c.html#a2be1284fe65357755b6161a039fb59e4">sighandler</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a9da7fe878f86821d72ebb991092f2a13">sigcont_sighandler</a> (int sig)</td></tr>
<tr class="separator:a9da7fe878f86821d72ebb991092f2a13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff70c2f626e4ae983bc38f0dc5a375e8"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d0/dde/rl-callbacktest_8c.html#a2be1284fe65357755b6161a039fb59e4">sighandler</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#aff70c2f626e4ae983bc38f0dc5a375e8">sigstop_sighandler</a> (int sig)</td></tr>
<tr class="separator:aff70c2f626e4ae983bc38f0dc5a375e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8db3c891f1a77a1b3412544323ae6eb4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a8db3c891f1a77a1b3412544323ae6eb4">give_terminal_to</a> (<a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a> pgrp, int <a class="el" href="../../dc/d4b/bash_2examples_2loadables_2rm_8c.html#a52de43b6faa0d9601f10db8b3826f11a">force</a>)</td></tr>
<tr class="separator:a8db3c891f1a77a1b3412544323ae6eb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade652681afa73d6b7c0b50697d071f83"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#ade652681afa73d6b7c0b50697d071f83">maybe_give_terminal_to</a> (<a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a> opgrp, <a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a> npgrp, int <a class="el" href="../../db/dd4/sm__loop_8c.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a>)</td></tr>
<tr class="separator:ade652681afa73d6b7c0b50697d071f83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab54a0986c5e457b5d7941b97a4bdce80"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#ab54a0986c5e457b5d7941b97a4bdce80">delete_all_jobs</a> (int running_only)</td></tr>
<tr class="separator:ab54a0986c5e457b5d7941b97a4bdce80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b7eaf2f1db72714e7e3faf6991471a2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a2b7eaf2f1db72714e7e3faf6991471a2">nohup_all_jobs</a> (int running_only)</td></tr>
<tr class="separator:a2b7eaf2f1db72714e7e3faf6991471a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adaf7a0885abd94848dabd18ba344eb66"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#adaf7a0885abd94848dabd18ba344eb66">count_all_jobs</a> ()</td></tr>
<tr class="separator:adaf7a0885abd94848dabd18ba344eb66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8ab905a192c6341c12fd82f166374a2"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#af8ab905a192c6341c12fd82f166374a2">mark_all_jobs_as_dead</a> ()</td></tr>
<tr class="separator:af8ab905a192c6341c12fd82f166374a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17ec09b97c22e3e745e6fe463418e203"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a17ec09b97c22e3e745e6fe463418e203">mark_dead_jobs_as_notified</a> (int <a class="el" href="../../dc/d4b/bash_2examples_2loadables_2rm_8c.html#a52de43b6faa0d9601f10db8b3826f11a">force</a>)</td></tr>
<tr class="separator:a17ec09b97c22e3e745e6fe463418e203"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac04bd8c6bbeec0e7e6f542d3a8a9f09f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#ac04bd8c6bbeec0e7e6f542d3a8a9f09f">freeze_jobs_list</a> ()</td></tr>
<tr class="separator:ac04bd8c6bbeec0e7e6f542d3a8a9f09f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc347c3553987b2835c81ebaffd378d6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#acc347c3553987b2835c81ebaffd378d6">unfreeze_jobs_list</a> ()</td></tr>
<tr class="separator:acc347c3553987b2835c81ebaffd378d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c5a796b3c5e2ddcc0ea88c494e324ea"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a9c5a796b3c5e2ddcc0ea88c494e324ea">set_jobs_list_frozen</a> (int <a class="el" href="../../df/d19/arpping_8c.html#ac9562ee4ecb3b8aeebeb04656e7e57a9">s</a>)</td></tr>
<tr class="separator:a9c5a796b3c5e2ddcc0ea88c494e324ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95d21d57cdf01784017ec41245a7ccf2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a95d21d57cdf01784017ec41245a7ccf2">set_job_control</a> (int <a class="el" href="../../d1/d40/vfwprintf_8c.html#d9/ddc/unionarg">arg</a>)</td></tr>
<tr class="separator:a95d21d57cdf01784017ec41245a7ccf2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9244e49349e5265eef7d020233848ae"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#ab9244e49349e5265eef7d020233848ae">without_job_control</a> ()</td></tr>
<tr class="separator:ab9244e49349e5265eef7d020233848ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a923886e6daaac9b0ff0e27b137e268cc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a923886e6daaac9b0ff0e27b137e268cc">end_job_control</a> ()</td></tr>
<tr class="separator:a923886e6daaac9b0ff0e27b137e268cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d4f082d7fb9a88caf928c7ee833156a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a2d4f082d7fb9a88caf928c7ee833156a">restart_job_control</a> ()</td></tr>
<tr class="separator:a2d4f082d7fb9a88caf928c7ee833156a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a137086a1fb1016e07d53473ef106d1f0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a137086a1fb1016e07d53473ef106d1f0">set_maxchild</a> (int nchild)</td></tr>
<tr class="separator:a137086a1fb1016e07d53473ef106d1f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c3599dc5b071245445a30237eefbe9c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a9c3599dc5b071245445a30237eefbe9c">set_sigchld_handler</a> ()</td></tr>
<tr class="separator:a9c3599dc5b071245445a30237eefbe9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ad65a8842cc674e3ddf69355898c0ecbf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></td></tr>
<tr class="separator:ad65a8842cc674e3ddf69355898c0ecbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8635881c32ee192e781422e8234f603f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d0/d09/command_8h.html#ab063e3018b56525d499b4215d6c745f0">WORD_LIST</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a8635881c32ee192e781422e8234f603f">subst_assign_varlist</a></td></tr>
<tr class="separator:a8635881c32ee192e781422e8234f603f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09b47218f3174e8bc8f36377308fd33a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dd/db7/bash_2lib_2readline_2signals_8c.html#a1f8d6bb6b9aaad1c21141fc327620e99">SigHandler</a> **&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a09b47218f3174e8bc8f36377308fd33a">original_signals</a></td></tr>
<tr class="separator:a09b47218f3174e8bc8f36377308fd33a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00a528c63ad265bc45f9dd8892147fd1"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d3/d3a/jobs_8h.html#d9/dff/structjobstats">jobstats</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a00a528c63ad265bc45f9dd8892147fd1">zerojs</a> = { -1<a class="el" href="../../d1/df8/smatch_8c.html#a1f82449e0d84122ede24741e7fcfdd22">L</a>, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, <a class="el" href="../../d3/d3a/jobs_8h.html#a6eba094b1ac1bc00e5883edd166bd944">NO_JOB</a>, <a class="el" href="../../d3/d3a/jobs_8h.html#a6eba094b1ac1bc00e5883edd166bd944">NO_JOB</a>, 0, 0 }</td></tr>
<tr class="separator:a00a528c63ad265bc45f9dd8892147fd1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afed1e71c6cd6951355514e19454fd26a"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d3/d3a/jobs_8h.html#d9/dff/structjobstats">jobstats</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a> = { -1<a class="el" href="../../d1/df8/smatch_8c.html#a1f82449e0d84122ede24741e7fcfdd22">L</a>, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, <a class="el" href="../../d3/d3a/jobs_8h.html#a6eba094b1ac1bc00e5883edd166bd944">NO_JOB</a>, <a class="el" href="../../d3/d3a/jobs_8h.html#a6eba094b1ac1bc00e5883edd166bd944">NO_JOB</a>, 0, 0 }</td></tr>
<tr class="separator:afed1e71c6cd6951355514e19454fd26a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad64c488ea31ee4a9aba985c9336bb0fa"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d3a/jobs_8h.html#a677d6488545fa3193e7cb54647b4ae5c">ps_index_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#ad64c488ea31ee4a9aba985c9336bb0fa">pidstat_table</a> [<a class="el" href="../../df/d8e/jobs_8c.html#aa52b3fc7fe43cf6aba78123f474f050a">PIDSTAT_TABLE_SZ</a>]</td></tr>
<tr class="separator:ad64c488ea31ee4a9aba985c9336bb0fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a402293945126f92a09d7cc87aee212a9"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d3/d3a/jobs_8h.html#d9/deb/structbgpids">bgpids</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a402293945126f92a09d7cc87aee212a9">bgpids</a> = { 0, 0, 0, 0 }</td></tr>
<tr class="separator:a402293945126f92a09d7cc87aee212a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5def2bc94cab4967a7897b4591b7a883"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d3/d3a/jobs_8h.html#da/dd5/structprocchain">procchain</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a5def2bc94cab4967a7897b4591b7a883">procsubs</a> = { 0, 0, 0 }</td></tr>
<tr class="separator:a5def2bc94cab4967a7897b4591b7a883"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6cce913474372029492267b46b745d88"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d3a/jobs_8h.html#ad1f8bdd512539c00ae7093dfcbe0a473">JOB</a> **&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a> = (<a class="el" href="../../d3/d3a/jobs_8h.html#ad1f8bdd512539c00ae7093dfcbe0a473">JOB</a> **)<a class="el" href="../../dc/d9b/include_2wchar_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></td></tr>
<tr class="separator:a6cce913474372029492267b46b745d88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae43d281c5f91cb3d7ad00fc46971b4da"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#ae43d281c5f91cb3d7ad00fc46971b4da">shell_tty</a> = -1</td></tr>
<tr class="separator:ae43d281c5f91cb3d7ad00fc46971b4da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12352dc576f1c23274468beca1ccf916"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a12352dc576f1c23274468beca1ccf916">shell_pgrp</a> = <a class="el" href="../../d3/d3a/jobs_8h.html#ad40327c746e8ef715109d9b9257eb991">NO_PID</a></td></tr>
<tr class="separator:a12352dc576f1c23274468beca1ccf916"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb36f80c8f1667339f6f23318ff29b50"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#aeb36f80c8f1667339f6f23318ff29b50">terminal_pgrp</a> = <a class="el" href="../../d3/d3a/jobs_8h.html#ad40327c746e8ef715109d9b9257eb991">NO_PID</a></td></tr>
<tr class="separator:aeb36f80c8f1667339f6f23318ff29b50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a927de0d08067183bd327b538a1b77f73"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a927de0d08067183bd327b538a1b77f73">original_pgrp</a> = <a class="el" href="../../d3/d3a/jobs_8h.html#ad40327c746e8ef715109d9b9257eb991">NO_PID</a></td></tr>
<tr class="separator:a927de0d08067183bd327b538a1b77f73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cf043826d84509527bdbcfbd5f68b68"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a4cf043826d84509527bdbcfbd5f68b68">pipeline_pgrp</a> = (<a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a>)0</td></tr>
<tr class="separator:a4cf043826d84509527bdbcfbd5f68b68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6014bc30456423f628a211bf8007fbe0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d1/dd5/localcharset_8c.html#af55a5e48555be7d32ad73e76cf5d4db0">volatile</a> <a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a6014bc30456423f628a211bf8007fbe0">last_made_pid</a> = <a class="el" href="../../d3/d3a/jobs_8h.html#ad40327c746e8ef715109d9b9257eb991">NO_PID</a></td></tr>
<tr class="separator:a6014bc30456423f628a211bf8007fbe0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2819d9527c8d26be39bb531290f4b597"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d1/dd5/localcharset_8c.html#af55a5e48555be7d32ad73e76cf5d4db0">volatile</a> <a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a2819d9527c8d26be39bb531290f4b597">last_asynchronous_pid</a> = <a class="el" href="../../d3/d3a/jobs_8h.html#ad40327c746e8ef715109d9b9257eb991">NO_PID</a></td></tr>
<tr class="separator:a2819d9527c8d26be39bb531290f4b597"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5efe88eb6aefb268d1259a51812164b2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d3a/jobs_8h.html#aefa2ee881236dafa12ac2427bb9c5088">PROCESS</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a5efe88eb6aefb268d1259a51812164b2">the_pipeline</a> = (<a class="el" href="../../d3/d3a/jobs_8h.html#aefa2ee881236dafa12ac2427bb9c5088">PROCESS</a> *)<a class="el" href="../../dc/d9b/include_2wchar_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></td></tr>
<tr class="separator:a5efe88eb6aefb268d1259a51812164b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3002cbcd4a652dec2c5cef5ff3da446f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a3002cbcd4a652dec2c5cef5ff3da446f">job_control</a> = 1</td></tr>
<tr class="separator:a3002cbcd4a652dec2c5cef5ff3da446f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2b44c9005c5a931c29ae6588e237636"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#ad2b44c9005c5a931c29ae6588e237636">running_in_background</a> = 0</td></tr>
<tr class="separator:ad2b44c9005c5a931c29ae6588e237636"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab73b81916e1b9c693ec186cb41e9f4e5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#ab73b81916e1b9c693ec186cb41e9f4e5">already_making_children</a> = 0</td></tr>
<tr class="separator:ab73b81916e1b9c693ec186cb41e9f4e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27ab938bc70e7696ed8fc9e10a4834c4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a27ab938bc70e7696ed8fc9e10a4834c4">check_window_size</a> = <a class="el" href="../../d8/d20/config-top_8h.html#a533e5612b0a36f3dde51f89fb40c87f0">CHECKWINSIZE_DEFAULT</a></td></tr>
<tr class="separator:a27ab938bc70e7696ed8fc9e10a4834c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00b3fcd8506b159c50c98186435d1f13"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d3a/jobs_8h.html#aefa2ee881236dafa12ac2427bb9c5088">PROCESS</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a00b3fcd8506b159c50c98186435d1f13">last_procsub_child</a> = (<a class="el" href="../../d3/d3a/jobs_8h.html#aefa2ee881236dafa12ac2427bb9c5088">PROCESS</a> *)<a class="el" href="../../dc/d9b/include_2wchar_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></td></tr>
<tr class="separator:a00b3fcd8506b159c50c98186435d1f13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa332884f0c3ecd93a329263848b7fa04"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#aa332884f0c3ecd93a329263848b7fa04">sigchld</a></td></tr>
<tr class="separator:aa332884f0c3ecd93a329263848b7fa04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af553b22eef984c5245e4eae3e4a36cd5"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#af553b22eef984c5245e4eae3e4a36cd5">queue_sigchld</a></td></tr>
<tr class="separator:af553b22eef984c5245e4eae3e4a36cd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2117a3ea7b950d08a1de610d18291bf1"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/db7/bash_2lib_2readline_2signals_8c.html#a1f8d6bb6b9aaad1c21141fc327620e99">SigHandler</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a2117a3ea7b950d08a1de610d18291bf1">old_tstp</a></td></tr>
<tr class="separator:a2117a3ea7b950d08a1de610d18291bf1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c44b645419b61a2eeab9833fe2abc97"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/db7/bash_2lib_2readline_2signals_8c.html#a1f8d6bb6b9aaad1c21141fc327620e99">SigHandler</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a6c44b645419b61a2eeab9833fe2abc97">old_ttou</a></td></tr>
<tr class="separator:a6c44b645419b61a2eeab9833fe2abc97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c33b0e2f430ff18bc36dd8fa19c14d1"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/db7/bash_2lib_2readline_2signals_8c.html#a1f8d6bb6b9aaad1c21141fc327620e99">SigHandler</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a0c33b0e2f430ff18bc36dd8fa19c14d1">old_ttin</a></td></tr>
<tr class="separator:a0c33b0e2f430ff18bc36dd8fa19c14d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b18b8d320ae7eae035b6fdc7cf3111a"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/db7/bash_2lib_2readline_2signals_8c.html#a1f8d6bb6b9aaad1c21141fc327620e99">SigHandler</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a2b18b8d320ae7eae035b6fdc7cf3111a">old_cont</a> = (<a class="el" href="../../dd/db7/bash_2lib_2readline_2signals_8c.html#a1f8d6bb6b9aaad1c21141fc327620e99">SigHandler</a> *)<a class="el" href="../../de/d2b/musl_2include_2signal_8h.html#a27d5dc561093d6243542e6a2465bc0f8">SIG_DFL</a></td></tr>
<tr class="separator:a2b18b8d320ae7eae035b6fdc7cf3111a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60e714219004a4142832cea6d34ebc97"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d3/d3a/jobs_8h.html#d8/df7/structpipeline__saver">pipeline_saver</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a60e714219004a4142832cea6d34ebc97">saved_pipeline</a></td></tr>
<tr class="separator:a60e714219004a4142832cea6d34ebc97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a788ff02a9abd424b3160a4315e6cdbac"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a788ff02a9abd424b3160a4315e6cdbac">saved_already_making_children</a></td></tr>
<tr class="separator:a788ff02a9abd424b3160a4315e6cdbac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57e47a8425e68a1907ac493cd673ca41"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#a57e47a8425e68a1907ac493cd673ca41">jobs_list_frozen</a></td></tr>
<tr class="separator:a57e47a8425e68a1907ac493cd673ca41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac5dfe821e90fd3b3f3a0c4a0d1f09a1"><td class="memItemLeft" align="right" valign="top">static char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#aac5dfe821e90fd3b3f3a0c4a0d1f09a1">retcode_name_buffer</a> [64]</td></tr>
<tr class="separator:aac5dfe821e90fd3b3f3a0c4a0d1f09a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9fe5481268cb2aed5102ece6ef18bbb"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d0/d9e/shtty_8h.html#ae9c880f6a41e70ef8258f18fd3345067">TTYSTRUCT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#ad9fe5481268cb2aed5102ece6ef18bbb">shell_tty_info</a></td></tr>
<tr class="separator:ad9fe5481268cb2aed5102ece6ef18bbb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae15b67160f6705f527ba4c23e11e64d3"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/db7/bash_2lib_2readline_2signals_8c.html#a1f8d6bb6b9aaad1c21141fc327620e99">SigHandler</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#ae15b67160f6705f527ba4c23e11e64d3">old_sigint_handler</a> = <a class="el" href="../../d8/d8d/nojobs_8c.html#a4236e83af520841a9f9b18cab6952df1">INVALID_SIGNAL_HANDLER</a></td></tr>
<tr class="separator:ae15b67160f6705f527ba4c23e11e64d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc216a9180c7ff0368811af940fe3c4f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#acc216a9180c7ff0368811af940fe3c4f">wait_sigint_received</a></td></tr>
<tr class="separator:acc216a9180c7ff0368811af940fe3c4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3281e6cc7874bc09819bc9f5afad595"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#ad3281e6cc7874bc09819bc9f5afad595">child_caught_sigint</a></td></tr>
<tr class="separator:ad3281e6cc7874bc09819bc9f5afad595"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3275b044b48a9ba5da272b925ba6d9e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d8e/jobs_8c.html#af3275b044b48a9ba5da272b925ba6d9e">waiting_for_child</a></td></tr>
<tr class="separator:af3275b044b48a9ba5da272b925ba6d9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a539c77a9dfeaf7df64b89278a020702e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a539c77a9dfeaf7df64b89278a020702e">&#9670;&nbsp;</a></span>BGPIDS_TABLE_SZ</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BGPIDS_TABLE_SZ&#160;&#160;&#160;512</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00109">109</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>

</div>
</div>
<a id="a626cd506cc8c8753532f784d12b382e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a626cd506cc8c8753532f784d12b382e2">&#9670;&nbsp;</a></span>DEFAULT_CHILD_MAX</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_CHILD_MAX&#160;&#160;&#160;4096</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00094">94</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>

</div>
</div>
<a id="a7144363c25cc07fb8cd621d1db3f9584"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7144363c25cc07fb8cd621d1db3f9584">&#9670;&nbsp;</a></span>DEL_NOBGPID</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEL_NOBGPID&#160;&#160;&#160;2	/* don'<a class="el" href="../../d6/dec/gm__loop_8c.html#ac310d9181e916ba43604099aee272c71">t</a> <a class="el" href="../../d6/dae/dc_8c.html#a75eb888902f992b6613fed5e90eca946">add</a> pgrp leader to <a class="el" href="../../d3/d3a/jobs_8h.html#d9/deb/structbgpids">bgpids</a> */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00113">113</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>

</div>
</div>
<a id="a1782af65c1d301fe419504e0f00853b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1782af65c1d301fe419504e0f00853b0">&#9670;&nbsp;</a></span>DEL_WARNSTOPPED</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEL_WARNSTOPPED&#160;&#160;&#160;1	/* <a class="el" href="../../da/d80/err_8c.html#af80d19f1297a11626fab61a248959c71">warn</a> about deleting <a class="el" href="../../db/de2/am__map_8c.html#a2eb95bdb1f863f25767706ff8d2d4bda">stopped</a> <a class="el" href="../../d3/d3a/jobs_8h.html#a6cce913474372029492267b46b745d88">jobs</a> */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00112">112</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>

</div>
</div>
<a id="a6b48ad51922d930d3b692dc8517627d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b48ad51922d930d3b692dc8517627d4">&#9670;&nbsp;</a></span>FIND_CHILD</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FIND_CHILD</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="../../d3/d16/pstree_8c.html#d6/d07/structchild">child</a>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">  <span class="keywordflow">do</span> \</div>
<div class="line">    { \</div>
<div class="line">      child = <a class="code" href="../../df/d8e/jobs_8c.html#a6581f40e1e7657048cbecabb416f13bb">find_pipeline</a> (<a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, 0, (<span class="keywordtype">int</span> *)<a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>); \</div>
<div class="line">      if (<a class="code" href="../../d3/d16/pstree_8c.html#d6/d07/structchild">child</a> == 0) \</div>
<div class="line">    { \</div>
<div class="line">      give_terminal_to (<a class="code" href="../../df/d8e/jobs_8c.html#a12352dc576f1c23274468beca1ccf916">shell_pgrp</a>, 0); \</div>
<div class="line">      UNBLOCK_CHILD (oset); \</div>
<div class="line">      internal_error (<a class="code" href="../../d7/dcd/bashintl_8h.html#a86a239addea586602343007a370bf8ad">_</a>(<span class="stringliteral">&quot;wait_for: No record of process %ld&quot;</span>), (<span class="keywordtype">long</span>)<a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>); \</div>
<div class="line">      restore_sigint_handler (); \</div>
<div class="line">      return (termination_state = 127); \</div>
<div class="line">    } \</div>
<div class="line">    } \</div>
<div class="line">  while (0)</div>
<div class="ttc" id="abashintl_8h_html_a86a239addea586602343007a370bf8ad"><div class="ttname"><a href="../../d7/dcd/bashintl_8h.html#a86a239addea586602343007a370bf8ad">_</a></div><div class="ttdeci">#define _(msgid)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dcd/bashintl_8h_source.html#l00036">bashintl.h:36</a></div></div>
<div class="ttc" id="ageneral_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d14/general_8h_source.html#l00053">general.h:53</a></div></div>
<div class="ttc" id="ajobs_8c_html_a12352dc576f1c23274468beca1ccf916"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a12352dc576f1c23274468beca1ccf916">shell_pgrp</a></div><div class="ttdeci">pid_t shell_pgrp</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l00194">jobs.c:194</a></div></div>
<div class="ttc" id="ajobs_8c_html_a6581f40e1e7657048cbecabb416f13bb"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a6581f40e1e7657048cbecabb416f13bb">find_pipeline</a></div><div class="ttdeci">static PROCESS * find_pipeline(pid_t pid, int alive_only, int *jobp)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l01711">jobs.c:1711</a></div></div>
<div class="ttc" id="amconf_8c_html_ae0d46a978d5cd6707411f276ad869b9c"><div class="ttname"><a href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a></div><div class="ttdeci">pid_t pid</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d43/mconf_8c_source.html#l00450">mconf.c:450</a></div></div>
<div class="ttc" id="apstree_8c_html_d6/d07/structchild"><div class="ttname"><a href="../../d3/d16/pstree_8c.html#d6/d07/structchild">child</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d16/pstree_8c_source.html#l00056">pstree.c:56</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l02879">2879</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>

</div>
</div>
<a id="a0a891da39663805f56b077cf8aab2d68"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a891da39663805f56b077cf8aab2d68">&#9670;&nbsp;</a></span>getpgid</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define getpgid</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="../../d6/d23/wi__stuff_8c.html#a5f53dec9fe800012c2be6ab5167d2cfd">p</a></td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="../../d1/d4d/getpgrp_8c.html#a06f4ba65249f92cacdba5782a8d70eba">getpgrp</a> (<a class="el" href="../../d6/d23/wi__stuff_8c.html#a5f53dec9fe800012c2be6ab5167d2cfd">p</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00142">142</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>

</div>
</div>
<a id="a23dc422a1eed633a3a9ce331720ca21c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23dc422a1eed633a3a9ce331720ca21c">&#9670;&nbsp;</a></span>input_tty</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define input_tty</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;(<a class="el" href="../../d8/d8d/nojobs_8c.html#ae43d281c5f91cb3d7ad00fc46971b4da">shell_tty</a> != -1) ? <a class="el" href="../../d8/d8d/nojobs_8c.html#ae43d281c5f91cb3d7ad00fc46971b4da">shell_tty</a> : <a class="el" href="../../d7/d6b/fileno_8c.html#a8262871768d894c0962fa898b9680ce4">fileno</a> (<a class="el" href="../../d9/d72/stderr_8c.html#ab5048bac2b854814f318bc2405535f31">stderr</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l02467">2467</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>

</div>
</div>
<a id="a4236e83af520841a9f9b18cab6952df1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4236e83af520841a9f9b18cab6952df1">&#9670;&nbsp;</a></span>INVALID_SIGNAL_HANDLER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INVALID_SIGNAL_HANDLER&#160;&#160;&#160;(<a class="el" href="../../dd/db7/bash_2lib_2readline_2signals_8c.html#a1f8d6bb6b9aaad1c21141fc327620e99">SigHandler</a> *)<a class="el" href="../../d8/d8d/nojobs_8c.html#a78ed3b2eb7b5f681be73c08ed2f15946">wait_for_background_pids</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l02718">2718</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>

</div>
</div>
<a id="a47e7841cbc97ed0297e01ff639346405"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47e7841cbc97ed0297e01ff639346405">&#9670;&nbsp;</a></span>JOB_SLOTS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define JOB_SLOTS&#160;&#160;&#160;8</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00163">163</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>

</div>
</div>
<a id="a93df246677de7b76e2b8e743da164ba1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93df246677de7b76e2b8e743da164ba1">&#9670;&nbsp;</a></span>MAX_CHILD_MAX</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_CHILD_MAX&#160;&#160;&#160;32768</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00098">98</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>

</div>
</div>
<a id="ae73608c2e00c712414d7a3262dbe2a20"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae73608c2e00c712414d7a3262dbe2a20">&#9670;&nbsp;</a></span>MAX_JOBS_IN_ARRAY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_JOBS_IN_ARRAY&#160;&#160;&#160;4096		/* production */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00102">102</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>

</div>
</div>
<a id="aa52b3fc7fe43cf6aba78123f474f050a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa52b3fc7fe43cf6aba78123f474f050a">&#9670;&nbsp;</a></span>PIDSTAT_TABLE_SZ</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PIDSTAT_TABLE_SZ&#160;&#160;&#160;4096</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00108">108</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>

</div>
</div>
<a id="a94c540ad458707a7ced24d74a260e1e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94c540ad458707a7ced24d74a260e1e2">&#9670;&nbsp;</a></span>QUEUE_SIGCHLD</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define QUEUE_SIGCHLD</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">os</td><td>)</td>
          <td>&#160;&#160;&#160;(os) = <a class="el" href="../../df/d8e/jobs_8c.html#aa332884f0c3ecd93a329263848b7fa04">sigchld</a>, <a class="el" href="../../d8/d8d/nojobs_8c.html#af553b22eef984c5245e4eae3e4a36cd5">queue_sigchld</a>++</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00320">320</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>

</div>
</div>
<a id="af213fd428488fc5ae5bbda14bcea275e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af213fd428488fc5ae5bbda14bcea275e">&#9670;&nbsp;</a></span>REINSTALL_SIGCHLD_HANDLER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define REINSTALL_SIGCHLD_HANDLER</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00150">150</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>

</div>
</div>
<a id="af35bd0de8c2181231698de03bbdd58ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af35bd0de8c2181231698de03bbdd58ca">&#9670;&nbsp;</a></span>setpgid</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define setpgid</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">pgrp&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;<a class="el" href="../../d0/d0e/setpgrp_8c.html#ada2b1e6782cd8fc506fde243f7d313ec">setpgrp</a> (<a class="el" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, pgrp)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00354">354</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>

</div>
</div>
<a id="a701bcb628c909e9932c9f53c133be6bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a701bcb628c909e9932c9f53c133be6bf">&#9670;&nbsp;</a></span>tcsetpgrp</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define tcsetpgrp</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="../../d3/d46/textbox_8c.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">pgrp&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;<a class="el" href="../../dc/d32/ioctl_8c.html#a6762739f1ceb8c62fa4f26304a76fb36">ioctl</a> ((<a class="el" href="../../d3/d46/textbox_8c.html#a6f8059414f0228f0256115e024eeed4b">fd</a>), <a class="el" href="../../d9/ded/arch_2sh_2bits_2ioctl_8h.html#a6bac3310268b3480d529afac9bb5ca01">TIOCSPGRP</a>, &amp;(pgrp))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00355">355</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>

</div>
</div>
<a id="a54543fd2ec1a59443849d1dfdabdadbc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a54543fd2ec1a59443849d1dfdabdadbc">&#9670;&nbsp;</a></span>UNQUEUE_SIGCHLD</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UNQUEUE_SIGCHLD</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">os</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">    <span class="keywordflow">do</span> { \</div>
<div class="line">      queue_sigchld--; \</div>
<div class="line">      if (<a class="code" href="../../df/d8e/jobs_8c.html#af553b22eef984c5245e4eae3e4a36cd5">queue_sigchld</a> == 0 &amp;&amp; os != <a class="code" href="../../df/d8e/jobs_8c.html#aa332884f0c3ecd93a329263848b7fa04">sigchld</a>) \</div>
<div class="line">        { \</div>
<div class="line">          queue_sigchld = 1; \</div>
<div class="line">          waitchld (-1, 0); \</div>
<div class="line">          queue_sigchld = 0; \</div>
<div class="line">        } \</div>
<div class="line">    } <span class="keywordflow">while</span> (0)</div>
<div class="ttc" id="ajobs_8c_html_aa332884f0c3ecd93a329263848b7fa04"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#aa332884f0c3ecd93a329263848b7fa04">sigchld</a></div><div class="ttdeci">static int sigchld</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l00317">jobs.c:317</a></div></div>
<div class="ttc" id="ajobs_8c_html_af553b22eef984c5245e4eae3e4a36cd5"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#af553b22eef984c5245e4eae3e4a36cd5">queue_sigchld</a></div><div class="ttdeci">static int queue_sigchld</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l00318">jobs.c:318</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00324">324</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>

</div>
</div>
<a id="a3aa5418612f55083950f87b97f60ce33"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3aa5418612f55083950f87b97f60ce33">&#9670;&nbsp;</a></span>WAITPID</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WAITPID</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">statusp, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="../../d3/df2/ifconfig_8c.html#d1/d38/structoptions">options</a>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;	<a class="el" href="../../d5/d4e/wait3_8c.html#aa87e6b0bf8e10243dae4df9795430762">wait3</a> (statusp, <a class="el" href="../../d3/df2/ifconfig_8c.html#d1/d38/structoptions">options</a>, (int *)0)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00131">131</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>

</div>
</div>
<a id="afcc090a70f53d677b748f4b1a4b896e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afcc090a70f53d677b748f4b1a4b896e6">&#9670;&nbsp;</a></span>WCONTINUED</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WCONTINUED&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00156">156</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>

</div>
</div>
<a id="ae5533b3213b8e81491aa4212ac8fc602"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5533b3213b8e81491aa4212ac8fc602">&#9670;&nbsp;</a></span>WIFCONTINUED</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WIFCONTINUED</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="../../df/d19/arpping_8c.html#ac9562ee4ecb3b8aeebeb04656e7e57a9">s</a></td><td>)</td>
          <td>&#160;&#160;&#160;(0)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00159">159</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="ab7fb6f5d79d54cd7838e62c8a97d2a84"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7fb6f5d79d54cd7838e62c8a97d2a84">&#9670;&nbsp;</a></span>PARAMS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int sh_job_map_func_t PARAMS((<a class="el" href="../../d3/d3a/jobs_8h.html#ad1f8bdd512539c00ae7093dfcbe0a473">JOB</a> *, int, int, int))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00165">165</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ac5deaaec3f7af2c959d1508e9f5f8fce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5deaaec3f7af2c959d1508e9f5f8fce">&#9670;&nbsp;</a></span>add_process()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void add_process </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a>&#160;</td>
          <td class="paramname"><em>pid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l01488">1488</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;{</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;  <a class="code" href="../../d3/d3a/jobs_8h.html#d8/d20/structprocess">PROCESS</a> *<a class="code" href="../../d6/dec/gm__loop_8c.html#ac310d9181e916ba43604099aee272c71">t</a>, *<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>;</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160; </div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;<span class="preprocessor">#if defined (RECYCLES_PIDS)</span></div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a>;</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;  <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> = <a class="code" href="../../df/d8e/jobs_8c.html#a16d3beacf583f9f0822f8b06b83695fe">find_process</a> (<a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, 0, &amp;<a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a>);</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>)</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;    {</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a> == <a class="code" href="../../d3/d3a/jobs_8h.html#a6eba094b1ac1bc00e5883edd166bd944">NO_JOB</a>)</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;    <a class="code" href="../../db/dcc/error_8c.html#a419859286a2b95b4a1c8133df4e65e75">internal_debug</a> (<span class="stringliteral">&quot;add_process: process %5ld (%s) in the_pipeline&quot;</span>, (<span class="keywordtype">long</span>)<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;pid, <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;command);</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d3/d3a/jobs_8h.html#a4f29476eb81762940d28edc76520c035">PALIVE</a> (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>))</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;    <a class="code" href="../../db/dcc/error_8c.html#a18ffbfac4ece05ba6cc56c02d783a9ee">internal_warning</a> (<a class="code" href="../../d7/dcd/bashintl_8h.html#a86a239addea586602343007a370bf8ad">_</a>(<span class="stringliteral">&quot;add_process: pid %5ld (%s) marked as still alive&quot;</span>), (<span class="keywordtype">long</span>)<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;pid, <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;command);</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;      <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;running = <a class="code" href="../../d3/d3a/jobs_8h.html#ad41680df7976be34f5b9285abe327247">PS_RECYCLED</a>;     <span class="comment">/* mark as recycled */</span></div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;    }</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160; </div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;  <a class="code" href="../../d6/dec/gm__loop_8c.html#ac310d9181e916ba43604099aee272c71">t</a> = (<a class="code" href="../../d3/d3a/jobs_8h.html#d8/d20/structprocess">PROCESS</a> *)<a class="code" href="../../db/d0a/tre_8h.html#a6af5faec3f9662b20ffc9903f923dec0">xmalloc</a> (<span class="keyword">sizeof</span> (<a class="code" href="../../d3/d3a/jobs_8h.html#d8/d20/structprocess">PROCESS</a>));</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;  <a class="code" href="../../d6/dec/gm__loop_8c.html#ac310d9181e916ba43604099aee272c71">t</a>-&gt;next = <a class="code" href="../../df/d8e/jobs_8c.html#a5efe88eb6aefb268d1259a51812164b2">the_pipeline</a>;</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;  <a class="code" href="../../d6/dec/gm__loop_8c.html#ac310d9181e916ba43604099aee272c71">t</a>-&gt;pid = <a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>;</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;  <a class="code" href="../../d9/dab/posixwait_8h.html#a369bfd939bb8dd38f7f8813cc7aa3fdb">WSTATUS</a> (<a class="code" href="../../d6/dec/gm__loop_8c.html#ac310d9181e916ba43604099aee272c71">t</a>-&gt;status) = 0;</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;  <a class="code" href="../../d6/dec/gm__loop_8c.html#ac310d9181e916ba43604099aee272c71">t</a>-&gt;running = <a class="code" href="../../d3/d3a/jobs_8h.html#a228659160deea0a4abee765afda81df3">PS_RUNNING</a>;</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;  <a class="code" href="../../d6/dec/gm__loop_8c.html#ac310d9181e916ba43604099aee272c71">t</a>-&gt;command = name;</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#a5efe88eb6aefb268d1259a51812164b2">the_pipeline</a> = <a class="code" href="../../d6/dec/gm__loop_8c.html#ac310d9181e916ba43604099aee272c71">t</a>;</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160; </div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d6/dec/gm__loop_8c.html#ac310d9181e916ba43604099aee272c71">t</a>-&gt;next == 0)</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;    <a class="code" href="../../d6/dec/gm__loop_8c.html#ac310d9181e916ba43604099aee272c71">t</a>-&gt;next = <a class="code" href="../../d6/dec/gm__loop_8c.html#ac310d9181e916ba43604099aee272c71">t</a>;</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;    {</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;      <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> = <a class="code" href="../../d6/dec/gm__loop_8c.html#ac310d9181e916ba43604099aee272c71">t</a>-&gt;next;</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;      <span class="keywordflow">while</span> (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;next != <a class="code" href="../../d6/dec/gm__loop_8c.html#ac310d9181e916ba43604099aee272c71">t</a>-&gt;next)</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;    <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> = <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;next;</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;      <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;next = <a class="code" href="../../d6/dec/gm__loop_8c.html#ac310d9181e916ba43604099aee272c71">t</a>;</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;    }</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;}</div>
<div class="ttc" id="aerror_8c_html_a18ffbfac4ece05ba6cc56c02d783a9ee"><div class="ttname"><a href="../../db/dcc/error_8c.html#a18ffbfac4ece05ba6cc56c02d783a9ee">internal_warning</a></div><div class="ttdeci">void internal_warning(char *format, va_alist) const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dcc/error_8c_source.html#l00256">error.c:256</a></div></div>
<div class="ttc" id="aerror_8c_html_a419859286a2b95b4a1c8133df4e65e75"><div class="ttname"><a href="../../db/dcc/error_8c.html#a419859286a2b95b4a1c8133df4e65e75">internal_debug</a></div><div class="ttdeci">void internal_debug(char *format, va_alist) const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dcc/error_8c_source.html#l00301">error.c:301</a></div></div>
<div class="ttc" id="aglob__loop_8c_html_ac483f6ce851c9ecd9fb835ff7551737c"><div class="ttname"><a href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a></div><div class="ttdeci">p</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d64/glob__loop_8c_source.html#l00031">glob_loop.c:31</a></div></div>
<div class="ttc" id="agm__loop_8c_html_ac310d9181e916ba43604099aee272c71"><div class="ttname"><a href="../../d6/dec/gm__loop_8c.html#ac310d9181e916ba43604099aee272c71">t</a></div><div class="ttdeci">int t</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dec/gm__loop_8c_source.html#l00079">gm_loop.c:79</a></div></div>
<div class="ttc" id="ajobs_8c_html_a16d3beacf583f9f0822f8b06b83695fe"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a16d3beacf583f9f0822f8b06b83695fe">find_process</a></div><div class="ttdeci">static PROCESS * find_process(pid_t pid, int alive_only, int *jobp)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l01748">jobs.c:1748</a></div></div>
<div class="ttc" id="ajobs_8c_html_a5efe88eb6aefb268d1259a51812164b2"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a5efe88eb6aefb268d1259a51812164b2">the_pipeline</a></div><div class="ttdeci">PROCESS * the_pipeline</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l00219">jobs.c:219</a></div></div>
<div class="ttc" id="ajobs_8h_html_a228659160deea0a4abee765afda81df3"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#a228659160deea0a4abee765afda81df3">PS_RUNNING</a></div><div class="ttdeci">#define PS_RUNNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00059">jobs.h:59</a></div></div>
<div class="ttc" id="ajobs_8h_html_a4f29476eb81762940d28edc76520c035"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#a4f29476eb81762940d28edc76520c035">PALIVE</a></div><div class="ttdeci">#define PALIVE(p)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00081">jobs.h:81</a></div></div>
<div class="ttc" id="ajobs_8h_html_a6eba094b1ac1bc00e5883edd166bd944"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#a6eba094b1ac1bc00e5883edd166bd944">NO_JOB</a></div><div class="ttdeci">#define NO_JOB</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00193">jobs.h:193</a></div></div>
<div class="ttc" id="ajobs_8h_html_ad41680df7976be34f5b9285abe327247"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#ad41680df7976be34f5b9285abe327247">PS_RECYCLED</a></div><div class="ttdeci">#define PS_RECYCLED</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00061">jobs.h:61</a></div></div>
<div class="ttc" id="ajobs_8h_html_d8/d20/structprocess"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#d8/d20/structprocess">process</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00065">jobs.h:65</a></div></div>
<div class="ttc" id="amusl_2src_2prng_2random_8c_html_a37d972ae0b47b9099e30983131d31916"><div class="ttname"><a href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a></div><div class="ttdeci">static int j</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da2/musl_2src_2prng_2random_8c_source.html#l00024">random.c:24</a></div></div>
<div class="ttc" id="aposixwait_8h_html_a369bfd939bb8dd38f7f8813cc7aa3fdb"><div class="ttname"><a href="../../d9/dab/posixwait_8h.html#a369bfd939bb8dd38f7f8813cc7aa3fdb">WSTATUS</a></div><div class="ttdeci">#define WSTATUS(t)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dab/posixwait_8h_source.html#l00039">posixwait.h:39</a></div></div>
<div class="ttc" id="atre_8h_html_a6af5faec3f9662b20ffc9903f923dec0"><div class="ttname"><a href="../../db/d0a/tre_8h.html#a6af5faec3f9662b20ffc9903f923dec0">xmalloc</a></div><div class="ttdeci">#define xmalloc</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0a/tre_8h_source.html#l00227">tre.h:227</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/dcd/bashintl_8h_source.html#l00036">_</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01748">find_process()</a>, <a class="el" href="../../db/dcc/error_8c_source.html#l00301">internal_debug()</a>, <a class="el" href="../../db/dcc/error_8c_source.html#l00256">internal_warning()</a>, <a class="el" href="../../dc/da2/musl_2src_2prng_2random_8c_source.html#l00024">j</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00193">NO_JOB</a>, <a class="el" href="../../d8/d64/glob__loop_8c_source.html#l00031">p</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00081">PALIVE</a>, <a class="el" href="../../d0/d43/mconf_8c_source.html#l00450">pid</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00061">PS_RECYCLED</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00059">PS_RUNNING</a>, <a class="el" href="../../d6/dec/gm__loop_8c_source.html#l00079">t</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00219">the_pipeline</a>, <a class="el" href="../../d9/dab/posixwait_8h_source.html#l00039">WSTATUS</a>, and <a class="el" href="../../db/d0a/tre_8h_source.html#l00227">xmalloc</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l02121">make_child()</a>.</p>

</div>
</div>
<a id="ae8fe3d7879405c3910a34e0b8dda55bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8fe3d7879405c3910a34e0b8dda55bb">&#9670;&nbsp;</a></span>alloc_pipeline_saver()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d3/d3a/jobs_8h.html#d8/df7/structpipeline__saver">pipeline_saver</a>* alloc_pipeline_saver </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00468">468</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;{</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;  <span class="keyword">struct </span><a class="code" href="../../d3/d3a/jobs_8h.html#d8/df7/structpipeline__saver">pipeline_saver</a> *ret;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160; </div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;  ret = (<span class="keyword">struct </span><a class="code" href="../../d3/d3a/jobs_8h.html#d8/df7/structpipeline__saver">pipeline_saver</a> *)<a class="code" href="../../db/d0a/tre_8h.html#a6af5faec3f9662b20ffc9903f923dec0">xmalloc</a> (<span class="keyword">sizeof</span> (<span class="keyword">struct</span> <a class="code" href="../../d3/d3a/jobs_8h.html#d8/df7/structpipeline__saver">pipeline_saver</a>));</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;  ret-&gt;<a class="code" href="../../d3/d3a/jobs_8h.html#a150b4d503a5673894709f96b053de8b2">pipeline</a> = 0;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  ret-&gt;<a class="code" href="../../d3/d3a/jobs_8h.html#a736199ba9d005768c1a764a5da6a69e6">next</a> = 0;</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;  <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;}</div>
<div class="ttc" id="ajobs_8h_html_a150b4d503a5673894709f96b053de8b2"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#a150b4d503a5673894709f96b053de8b2">pipeline_saver::pipeline</a></div><div class="ttdeci">struct process * pipeline</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00074">jobs.h:74</a></div></div>
<div class="ttc" id="ajobs_8h_html_a736199ba9d005768c1a764a5da6a69e6"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#a736199ba9d005768c1a764a5da6a69e6">pipeline_saver::next</a></div><div class="ttdeci">struct pipeline_saver * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00075">jobs.h:75</a></div></div>
<div class="ttc" id="ajobs_8h_html_d8/df7/structpipeline__saver"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#d8/df7/structpipeline__saver">pipeline_saver</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00073">jobs.h:73</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00075">pipeline_saver::next</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00074">pipeline_saver::pipeline</a>, and <a class="el" href="../../db/d0a/tre_8h_source.html#l00227">xmalloc</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l00479">save_pipeline()</a>.</p>

</div>
</div>
<a id="a00c2a1d6f9dcaf3f68f9f66726827b7f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00c2a1d6f9dcaf3f68f9f66726827b7f">&#9670;&nbsp;</a></span>append_process()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void append_process </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a>&#160;</td>
          <td class="paramname"><em>pid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>status</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>jid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l01529">1529</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;{</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;  <a class="code" href="../../d3/d3a/jobs_8h.html#d8/d20/structprocess">PROCESS</a> *<a class="code" href="../../d6/dec/gm__loop_8c.html#ac310d9181e916ba43604099aee272c71">t</a>, *<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>;</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160; </div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;  <a class="code" href="../../d6/dec/gm__loop_8c.html#ac310d9181e916ba43604099aee272c71">t</a> = (<a class="code" href="../../d3/d3a/jobs_8h.html#d8/d20/structprocess">PROCESS</a> *)<a class="code" href="../../db/d0a/tre_8h.html#a6af5faec3f9662b20ffc9903f923dec0">xmalloc</a> (<span class="keyword">sizeof</span> (<a class="code" href="../../d3/d3a/jobs_8h.html#d8/d20/structprocess">PROCESS</a>));</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;  <a class="code" href="../../d6/dec/gm__loop_8c.html#ac310d9181e916ba43604099aee272c71">t</a>-&gt;next = (<a class="code" href="../../d3/d3a/jobs_8h.html#d8/d20/structprocess">PROCESS</a> *)<a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;  <a class="code" href="../../d6/dec/gm__loop_8c.html#ac310d9181e916ba43604099aee272c71">t</a>-&gt;pid = <a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>;</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;  <span class="comment">/* set process exit status using offset discovered by configure */</span></div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;  <a class="code" href="../../d6/dec/gm__loop_8c.html#ac310d9181e916ba43604099aee272c71">t</a>-&gt;status = (<a class="code" href="../../d7/d5b/mail_8c.html#a6943d6e2e83995c648644bc0a4d36f53">status</a> &amp; 0xff) &lt;&lt; WEXITSTATUS_OFFSET;</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;  <a class="code" href="../../d6/dec/gm__loop_8c.html#ac310d9181e916ba43604099aee272c71">t</a>-&gt;running = <a class="code" href="../../d3/d3a/jobs_8h.html#ab3f16fed1877b48f617e7b3e8485723d">PS_DONE</a>;</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;  <a class="code" href="../../d6/dec/gm__loop_8c.html#ac310d9181e916ba43604099aee272c71">t</a>-&gt;command = name;</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160; </div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a9eba978ad89cdb8068837ea21189d4c9">c_reaped</a>++;    <span class="comment">/* XXX */</span></div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160; </div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> = <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[jid]-&gt;<a class="code" href="../../d6/d90/hush_8c.html#d8/d53/structpipe">pipe</a>; <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;next != <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[jid]-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#a7e5648df5ec2f0d459900325c2cc5816">pipe</a>; <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> = <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;next)</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;    ;</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;  <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;next = <a class="code" href="../../d6/dec/gm__loop_8c.html#ac310d9181e916ba43604099aee272c71">t</a>;</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;  <a class="code" href="../../d6/dec/gm__loop_8c.html#ac310d9181e916ba43604099aee272c71">t</a>-&gt;next = <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[jid]-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#a7e5648df5ec2f0d459900325c2cc5816">pipe</a>;</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;}</div>
<div class="ttc" id="aash_8c_html_a7e5648df5ec2f0d459900325c2cc5816"><div class="ttname"><a href="../../d1/dbe/ash_8c.html#a7e5648df5ec2f0d459900325c2cc5816">job::pipe</a></div><div class="ttdeci">PROCESS * pipe</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00122">jobs.h:122</a></div></div>
<div class="ttc" id="ahush_8c_html_d8/d53/structpipe"><div class="ttname"><a href="../../d6/d90/hush_8c.html#d8/d53/structpipe">pipe</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/hush_8c_source.html#l00701">hush.c:701</a></div></div>
<div class="ttc" id="ajobs_8c_html_a6cce913474372029492267b46b745d88"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a></div><div class="ttdeci">JOB ** jobs</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l00183">jobs.c:183</a></div></div>
<div class="ttc" id="ajobs_8c_html_afed1e71c6cd6951355514e19454fd26a"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a></div><div class="ttdeci">struct jobstats js</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l00172">jobs.c:175</a></div></div>
<div class="ttc" id="ajobs_8h_html_a9eba978ad89cdb8068837ea21189d4c9"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#a9eba978ad89cdb8068837ea21189d4c9">jobstats::c_reaped</a></div><div class="ttdeci">int c_reaped</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00138">jobs.h:138</a></div></div>
<div class="ttc" id="ajobs_8h_html_ab3f16fed1877b48f617e7b3e8485723d"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#ab3f16fed1877b48f617e7b3e8485723d">PS_DONE</a></div><div class="ttdeci">#define PS_DONE</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00058">jobs.h:58</a></div></div>
<div class="ttc" id="amail_8c_html_a6943d6e2e83995c648644bc0a4d36f53"><div class="ttname"><a href="../../d7/d5b/mail_8c.html#a6943d6e2e83995c648644bc0a4d36f53">status</a></div><div class="ttdeci">#define status</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00138">jobstats::c_reaped</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00183">jobs</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00175">js</a>, <a class="el" href="../../d9/d14/general_8h_source.html#l00053">NULL</a>, <a class="el" href="../../d8/d64/glob__loop_8c_source.html#l00031">p</a>, <a class="el" href="../../d0/d43/mconf_8c_source.html#l00450">pid</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00122">job::pipe</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00058">PS_DONE</a>, <a class="el" href="../../d7/d5b/mail_8c.html#a6943d6e2e83995c648644bc0a4d36f53">status</a>, <a class="el" href="../../d6/dec/gm__loop_8c_source.html#l00079">t</a>, and <a class="el" href="../../db/d0a/tre_8h_source.html#l00227">xmalloc</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d3d/execute__cmd_8c_source.html#l02496">execute_pipeline()</a>.</p>

</div>
</div>
<a id="ac44d197b4771154fac5c0eefca1052f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac44d197b4771154fac5c0eefca1052f6">&#9670;&nbsp;</a></span>bgp_add()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d3/d3a/jobs_8h.html#d5/d37/structpidstat">pidstat</a>* bgp_add </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a>&#160;</td>
          <td class="paramname"><em>pid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00822">822</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;{</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;  <a class="code" href="../../d3/d3a/jobs_8h.html#a677d6488545fa3193e7cb54647b4ae5c">ps_index_t</a> *bucket, psi;</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;  <span class="keyword">struct </span><a class="code" href="../../d3/d3a/jobs_8h.html#d5/d37/structpidstat">pidstat</a> *ps;</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160; </div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;  <span class="comment">/* bucket == existing chain of pids hashing to same value</span></div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;<span class="comment">     psi = where were going to put this pid/status */</span></div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160; </div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;  bucket = <a class="code" href="../../df/d8e/jobs_8c.html#a7e0bb0533cedbd5496331c5aae1e1d60">pshash_getbucket</a> (<a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>);  <span class="comment">/* index into pidstat_table */</span></div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;  psi = <a class="code" href="../../df/d8e/jobs_8c.html#a14eab3b775a7ec5d490e506cf833dec9">bgp_getindex</a> ();        <span class="comment">/* bgpids.head, index into storage */</span></div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160; </div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;  <span class="comment">/* XXX - what if psi == *bucket? */</span></div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;  <span class="keywordflow">if</span> (psi == *bucket)</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    {</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;      <a class="code" href="../../db/dcc/error_8c.html#a419859286a2b95b4a1c8133df4e65e75">internal_debug</a> (<span class="stringliteral">&quot;hashed pid %d (pid %d) collides with bgpids.head, skipping&quot;</span>, psi, <a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>);</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;      <a class="code" href="../../d3/d3a/jobs_8h.html#d9/deb/structbgpids">bgpids</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a9e1b9f32d9f6e5db5387b07d9e5440ff">storage</a>[psi].<a class="code" href="../../d3/d3a/jobs_8h.html#a9720eaa7788ca953a6130f2b8d1d1a23">pid</a> = <a class="code" href="../../d3/d3a/jobs_8h.html#ad40327c746e8ef715109d9b9257eb991">NO_PID</a>;     <span class="comment">/* make sure */</span></div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;      psi = <a class="code" href="../../df/d8e/jobs_8c.html#a14eab3b775a7ec5d490e506cf833dec9">bgp_getindex</a> ();            <span class="comment">/* skip to next one */</span></div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    }</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160; </div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;  ps = &amp;<a class="code" href="../../d3/d3a/jobs_8h.html#d9/deb/structbgpids">bgpids</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a9e1b9f32d9f6e5db5387b07d9e5440ff">storage</a>[psi];</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160; </div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;  ps-&gt;<a class="code" href="../../d3/d3a/jobs_8h.html#a9720eaa7788ca953a6130f2b8d1d1a23">pid</a> = <a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>;</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;  ps-&gt;<a class="code" href="../../d3/d3a/jobs_8h.html#a7feadc8da0ca4c76cd76c3b97274e622">status</a> = <a class="code" href="../../d7/d5b/mail_8c.html#a6943d6e2e83995c648644bc0a4d36f53">status</a>;</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;  ps-&gt;<a class="code" href="../../d3/d3a/jobs_8h.html#a6848a528a59f93911847b61d0b329ee5">bucket_next</a> = *bucket;</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;  ps-&gt;<a class="code" href="../../d3/d3a/jobs_8h.html#a5b7cfb7d4d5f30b11eaa92db21ec71a0">bucket_prev</a> = <a class="code" href="../../d3/d3a/jobs_8h.html#aa0ca45454a6e8f383c4d1e490dcb6bb3">NO_PIDSTAT</a>;</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160; </div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;  <a class="code" href="../../d3/d3a/jobs_8h.html#d9/deb/structbgpids">bgpids</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a3b393c1d3d52cb76efbe24e0fffc2871">npid</a>++;</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160; </div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;<span class="preprocessor">#if 0</span></div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d3/d3a/jobs_8h.html#d9/deb/structbgpids">bgpids</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a3b393c1d3d52cb76efbe24e0fffc2871">npid</a> &gt; <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a3c74d4692759e4d8ec8089acefa23583">c_childmax</a>)</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    bgp_prune ();</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160; </div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;  <span class="keywordflow">if</span> (ps-&gt;<a class="code" href="../../d3/d3a/jobs_8h.html#a6848a528a59f93911847b61d0b329ee5">bucket_next</a> != <a class="code" href="../../d3/d3a/jobs_8h.html#aa0ca45454a6e8f383c4d1e490dcb6bb3">NO_PIDSTAT</a>)</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    <a class="code" href="../../d3/d3a/jobs_8h.html#d9/deb/structbgpids">bgpids</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a9e1b9f32d9f6e5db5387b07d9e5440ff">storage</a>[ps-&gt;<a class="code" href="../../d3/d3a/jobs_8h.html#a6848a528a59f93911847b61d0b329ee5">bucket_next</a>].<a class="code" href="../../d3/d3a/jobs_8h.html#a5b7cfb7d4d5f30b11eaa92db21ec71a0">bucket_prev</a> = psi;</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160; </div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;  *bucket = psi;        <span class="comment">/* set chain head in hash table */</span></div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160; </div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;  <span class="keywordflow">return</span> ps;</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;}</div>
<div class="ttc" id="ajobs_8c_html_a14eab3b775a7ec5d490e506cf833dec9"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a14eab3b775a7ec5d490e506cf833dec9">bgp_getindex</a></div><div class="ttdeci">static ps_index_t bgp_getindex()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l00802">jobs.c:802</a></div></div>
<div class="ttc" id="ajobs_8c_html_a7e0bb0533cedbd5496331c5aae1e1d60"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a7e0bb0533cedbd5496331c5aae1e1d60">pshash_getbucket</a></div><div class="ttdeci">static ps_index_t * pshash_getbucket(pid_t pid)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l00812">jobs.c:812</a></div></div>
<div class="ttc" id="ajobs_8h_html_a3b393c1d3d52cb76efbe24e0fffc2871"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#a3b393c1d3d52cb76efbe24e0fffc2871">bgpids::npid</a></div><div class="ttdeci">int npid</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00174">jobs.h:174</a></div></div>
<div class="ttc" id="ajobs_8h_html_a3c74d4692759e4d8ec8089acefa23583"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#a3c74d4692759e4d8ec8089acefa23583">jobstats::c_childmax</a></div><div class="ttdeci">long c_childmax</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00135">jobs.h:135</a></div></div>
<div class="ttc" id="ajobs_8h_html_a5b7cfb7d4d5f30b11eaa92db21ec71a0"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#a5b7cfb7d4d5f30b11eaa92db21ec71a0">pidstat::bucket_prev</a></div><div class="ttdeci">ps_index_t bucket_prev</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00162">jobs.h:162</a></div></div>
<div class="ttc" id="ajobs_8h_html_a677d6488545fa3193e7cb54647b4ae5c"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#a677d6488545fa3193e7cb54647b4ae5c">ps_index_t</a></div><div class="ttdeci">pid_t ps_index_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00158">jobs.h:158</a></div></div>
<div class="ttc" id="ajobs_8h_html_a6848a528a59f93911847b61d0b329ee5"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#a6848a528a59f93911847b61d0b329ee5">pidstat::bucket_next</a></div><div class="ttdeci">ps_index_t bucket_next</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00161">jobs.h:161</a></div></div>
<div class="ttc" id="ajobs_8h_html_a7feadc8da0ca4c76cd76c3b97274e622"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#a7feadc8da0ca4c76cd76c3b97274e622">pidstat::status</a></div><div class="ttdeci">bits16_t status</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00165">jobs.h:165</a></div></div>
<div class="ttc" id="ajobs_8h_html_a9720eaa7788ca953a6130f2b8d1d1a23"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#a9720eaa7788ca953a6130f2b8d1d1a23">pidstat::pid</a></div><div class="ttdeci">pid_t pid</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00164">jobs.h:164</a></div></div>
<div class="ttc" id="ajobs_8h_html_a9e1b9f32d9f6e5db5387b07d9e5440ff"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#a9e1b9f32d9f6e5db5387b07d9e5440ff">bgpids::storage</a></div><div class="ttdeci">struct pidstat * storage</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00169">jobs.h:169</a></div></div>
<div class="ttc" id="ajobs_8h_html_aa0ca45454a6e8f383c4d1e490dcb6bb3"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#aa0ca45454a6e8f383c4d1e490dcb6bb3">NO_PIDSTAT</a></div><div class="ttdeci">#define NO_PIDSTAT</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00177">jobs.h:177</a></div></div>
<div class="ttc" id="ajobs_8h_html_ad40327c746e8ef715109d9b9257eb991"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#ad40327c746e8ef715109d9b9257eb991">NO_PID</a></div><div class="ttdeci">#define NO_PID</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00198">jobs.h:198</a></div></div>
<div class="ttc" id="ajobs_8h_html_d5/d37/structpidstat"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#d5/d37/structpidstat">pidstat</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00160">jobs.h:160</a></div></div>
<div class="ttc" id="ajobs_8h_html_d9/deb/structbgpids"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#d9/deb/structbgpids">bgpids</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00168">jobs.h:168</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d8e/jobs_8c_source.html#l00802">bgp_getindex()</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00161">pidstat::bucket_next</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00162">pidstat::bucket_prev</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00135">jobstats::c_childmax</a>, <a class="el" href="../../db/dcc/error_8c_source.html#l00301">internal_debug()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00175">js</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00198">NO_PID</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00177">NO_PIDSTAT</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00174">bgpids::npid</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00164">pidstat::pid</a>, <a class="el" href="../../d0/d43/mconf_8c_source.html#l00450">pid</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00812">pshash_getbucket()</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00165">pidstat::status</a>, <a class="el" href="../../d7/d5b/mail_8c.html#a6943d6e2e83995c648644bc0a4d36f53">status</a>, and <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00169">bgpids::storage</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l01386">delete_job()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l00979">save_proc_status()</a>.</p>

</div>
</div>
<a id="ab2aa5e9feea832a14471ef39a355c91a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab2aa5e9feea832a14471ef39a355c91a">&#9670;&nbsp;</a></span>bgp_clear()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void bgp_clear </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00927">927</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;{</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d3/d3a/jobs_8h.html#d9/deb/structbgpids">bgpids</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a9e1b9f32d9f6e5db5387b07d9e5440ff">storage</a> == 0 || <a class="code" href="../../d3/d3a/jobs_8h.html#d9/deb/structbgpids">bgpids</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a370d36e85fac1b1cf2fdbc18b66903ae">nalloc</a> == 0)</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160; </div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;  <a class="code" href="../../d5/db0/dynlink_8c.html#a2c6efa7679f8cd9f61af96e105017560">free</a> (<a class="code" href="../../d3/d3a/jobs_8h.html#d9/deb/structbgpids">bgpids</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a9e1b9f32d9f6e5db5387b07d9e5440ff">storage</a>);</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160; </div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;  <a class="code" href="../../d3/d3a/jobs_8h.html#d9/deb/structbgpids">bgpids</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a9e1b9f32d9f6e5db5387b07d9e5440ff">storage</a> = 0;</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;  <a class="code" href="../../d3/d3a/jobs_8h.html#d9/deb/structbgpids">bgpids</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a370d36e85fac1b1cf2fdbc18b66903ae">nalloc</a> = 0;</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;  <a class="code" href="../../d3/d3a/jobs_8h.html#d9/deb/structbgpids">bgpids</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#adf6139c912fc1e79278110429b95aaee">head</a> = 0;</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160; </div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;  <a class="code" href="../../d3/d3a/jobs_8h.html#d9/deb/structbgpids">bgpids</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a3b393c1d3d52cb76efbe24e0fffc2871">npid</a> = 0;</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;}</div>
<div class="ttc" id="adynlink_8c_html_a2c6efa7679f8cd9f61af96e105017560"><div class="ttname"><a href="../../d5/db0/dynlink_8c.html#a2c6efa7679f8cd9f61af96e105017560">free</a></div><div class="ttdeci">#define free</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/db0/dynlink_8c_source.html#l00036">dynlink.c:36</a></div></div>
<div class="ttc" id="ajobs_8h_html_a370d36e85fac1b1cf2fdbc18b66903ae"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#a370d36e85fac1b1cf2fdbc18b66903ae">bgpids::nalloc</a></div><div class="ttdeci">ps_index_t nalloc</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00172">jobs.h:172</a></div></div>
<div class="ttc" id="ajobs_8h_html_adf6139c912fc1e79278110429b95aaee"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#adf6139c912fc1e79278110429b95aaee">bgpids::head</a></div><div class="ttdeci">ps_index_t head</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00171">jobs.h:171</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d5/db0/dynlink_8c_source.html#l00036">free</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00171">bgpids::head</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00172">bgpids::nalloc</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00174">bgpids::npid</a>, and <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00169">bgpids::storage</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l04712">delete_all_jobs()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l02648">wait_for_background_pids()</a>.</p>

</div>
</div>
<a id="a1944a12e8c62f7d7a9b419a9228a89a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1944a12e8c62f7d7a9b419a9228a89a9">&#9670;&nbsp;</a></span>bgp_delete()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int bgp_delete </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a>&#160;</td>
          <td class="paramname"><em>pid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00892">892</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;{</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;  <a class="code" href="../../d3/d3a/jobs_8h.html#a677d6488545fa3193e7cb54647b4ae5c">ps_index_t</a> psi, orig_psi;</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160; </div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d3/d3a/jobs_8h.html#d9/deb/structbgpids">bgpids</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a9e1b9f32d9f6e5db5387b07d9e5440ff">storage</a> == 0 || <a class="code" href="../../d3/d3a/jobs_8h.html#d9/deb/structbgpids">bgpids</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a370d36e85fac1b1cf2fdbc18b66903ae">nalloc</a> == 0 || <a class="code" href="../../d3/d3a/jobs_8h.html#d9/deb/structbgpids">bgpids</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a3b393c1d3d52cb76efbe24e0fffc2871">npid</a> == 0)</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160; </div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;  <span class="comment">/* Search chain using hash to find bucket in pidstat_table */</span></div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;  <span class="keywordflow">for</span> (orig_psi = psi = *(<a class="code" href="../../df/d8e/jobs_8c.html#a7e0bb0533cedbd5496331c5aae1e1d60">pshash_getbucket</a> (<a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>)); psi != <a class="code" href="../../d3/d3a/jobs_8h.html#aa0ca45454a6e8f383c4d1e490dcb6bb3">NO_PIDSTAT</a>; psi = <a class="code" href="../../d3/d3a/jobs_8h.html#d9/deb/structbgpids">bgpids</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a9e1b9f32d9f6e5db5387b07d9e5440ff">storage</a>[psi].<a class="code" href="../../d3/d3a/jobs_8h.html#a6848a528a59f93911847b61d0b329ee5">bucket_next</a>)</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;    {</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d3/d3a/jobs_8h.html#d9/deb/structbgpids">bgpids</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a9e1b9f32d9f6e5db5387b07d9e5440ff">storage</a>[psi].<a class="code" href="../../d3/d3a/jobs_8h.html#a9720eaa7788ca953a6130f2b8d1d1a23">pid</a> == <a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>)</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;      <span class="keywordflow">if</span> (orig_psi == <a class="code" href="../../d3/d3a/jobs_8h.html#d9/deb/structbgpids">bgpids</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a9e1b9f32d9f6e5db5387b07d9e5440ff">storage</a>[psi].<a class="code" href="../../d3/d3a/jobs_8h.html#a6848a528a59f93911847b61d0b329ee5">bucket_next</a>)  <span class="comment">/* catch reported bug */</span></div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    {</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;      <a class="code" href="../../db/dcc/error_8c.html#a18ffbfac4ece05ba6cc56c02d783a9ee">internal_warning</a> (<a class="code" href="../../d7/dcd/bashintl_8h.html#a86a239addea586602343007a370bf8ad">_</a>(<span class="stringliteral">&quot;bgp_delete: LOOP: psi (%d) == storage[psi].bucket_next&quot;</span>), psi);</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;      <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;    }</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;    }</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160; </div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;  <span class="keywordflow">if</span> (psi == <a class="code" href="../../d3/d3a/jobs_8h.html#aa0ca45454a6e8f383c4d1e490dcb6bb3">NO_PIDSTAT</a>)</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;    <span class="keywordflow">return</span> 0;       <span class="comment">/* not found */</span></div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160; </div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;<span class="preprocessor">#if 0</span></div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;  itrace(<span class="stringliteral">&quot;bgp_delete: deleting %d&quot;</span>, <a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>);</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160; </div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#afe405cc65c61bf8889e6147876a49c75">pshash_delindex</a> (psi);    <span class="comment">/* hash table management */</span></div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160; </div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;  <a class="code" href="../../d3/d3a/jobs_8h.html#d9/deb/structbgpids">bgpids</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a3b393c1d3d52cb76efbe24e0fffc2871">npid</a>--;</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;  <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;}</div>
<div class="ttc" id="ajobs_8c_html_afe405cc65c61bf8889e6147876a49c75"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#afe405cc65c61bf8889e6147876a49c75">pshash_delindex</a></div><div class="ttdeci">static void pshash_delindex(ps_index_t psi)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l00866">jobs.c:866</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/dcd/bashintl_8h_source.html#l00036">_</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00161">pidstat::bucket_next</a>, <a class="el" href="../../db/dcc/error_8c_source.html#l00256">internal_warning()</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00172">bgpids::nalloc</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00177">NO_PIDSTAT</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00174">bgpids::npid</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00164">pidstat::pid</a>, <a class="el" href="../../d0/d43/mconf_8c_source.html#l00450">pid</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00866">pshash_delindex()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00812">pshash_getbucket()</a>, and <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00169">bgpids::storage</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l02121">make_child()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l02586">wait_for_single_pid()</a>.</p>

</div>
</div>
<a id="a14eab3b775a7ec5d490e506cf833dec9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14eab3b775a7ec5d490e506cf833dec9">&#9670;&nbsp;</a></span>bgp_getindex()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d3/d3a/jobs_8h.html#a677d6488545fa3193e7cb54647b4ae5c">ps_index_t</a> bgp_getindex </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00802">802</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;{</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d3/d3a/jobs_8h.html#d9/deb/structbgpids">bgpids</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a370d36e85fac1b1cf2fdbc18b66903ae">nalloc</a> &lt; (<a class="code" href="../../d3/d3a/jobs_8h.html#a677d6488545fa3193e7cb54647b4ae5c">ps_index_t</a>)<a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a3c74d4692759e4d8ec8089acefa23583">c_childmax</a> || <a class="code" href="../../d3/d3a/jobs_8h.html#d9/deb/structbgpids">bgpids</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#adf6139c912fc1e79278110429b95aaee">head</a> &gt;= <a class="code" href="../../d3/d3a/jobs_8h.html#d9/deb/structbgpids">bgpids</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a370d36e85fac1b1cf2fdbc18b66903ae">nalloc</a>)</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#a5e03148121047cff6dda436442ac7960">bgp_resize</a> ();</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160; </div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#afe405cc65c61bf8889e6147876a49c75">pshash_delindex</a> (<a class="code" href="../../d3/d3a/jobs_8h.html#d9/deb/structbgpids">bgpids</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#adf6139c912fc1e79278110429b95aaee">head</a>);        <span class="comment">/* XXX - clear before reusing */</span></div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/d3a/jobs_8h.html#d9/deb/structbgpids">bgpids</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#adf6139c912fc1e79278110429b95aaee">head</a>++;</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;}</div>
<div class="ttc" id="ajobs_8c_html_a5e03148121047cff6dda436442ac7960"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a5e03148121047cff6dda436442ac7960">bgp_resize</a></div><div class="ttdeci">static void bgp_resize()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l00759">jobs.c:759</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d8e/jobs_8c_source.html#l00759">bgp_resize()</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00135">jobstats::c_childmax</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00171">bgpids::head</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00175">js</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00172">bgpids::nalloc</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l00866">pshash_delindex()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l00822">bgp_add()</a>.</p>

</div>
</div>
<a id="a5e03148121047cff6dda436442ac7960"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e03148121047cff6dda436442ac7960">&#9670;&nbsp;</a></span>bgp_resize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void bgp_resize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00759">759</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;{</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;  <a class="code" href="../../d3/d3a/jobs_8h.html#a677d6488545fa3193e7cb54647b4ae5c">ps_index_t</a> nsize, nsize_cur, nsize_max;</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;  <a class="code" href="../../d3/d3a/jobs_8h.html#a677d6488545fa3193e7cb54647b4ae5c">ps_index_t</a> psi;</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160; </div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d3/d3a/jobs_8h.html#d9/deb/structbgpids">bgpids</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a370d36e85fac1b1cf2fdbc18b66903ae">nalloc</a> == 0)</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    {</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;      <span class="comment">/* invalidate hash table when bgpids table is reallocated */</span></div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;      <span class="keywordflow">for</span> (psi = 0; psi &lt; <a class="code" href="../../df/d8e/jobs_8c.html#aa52b3fc7fe43cf6aba78123f474f050a">PIDSTAT_TABLE_SZ</a>; psi++)</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;        <a class="code" href="../../df/d8e/jobs_8c.html#ad64c488ea31ee4a9aba985c9336bb0fa">pidstat_table</a>[psi] = <a class="code" href="../../d3/d3a/jobs_8h.html#aa0ca45454a6e8f383c4d1e490dcb6bb3">NO_PIDSTAT</a>;</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;      nsize = <a class="code" href="../../df/d8e/jobs_8c.html#a539c77a9dfeaf7df64b89278a020702e">BGPIDS_TABLE_SZ</a>;  <span class="comment">/* should be power of 2 */</span></div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;      <a class="code" href="../../d3/d3a/jobs_8h.html#d9/deb/structbgpids">bgpids</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#adf6139c912fc1e79278110429b95aaee">head</a> = 0;</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    }</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    nsize = <a class="code" href="../../d3/d3a/jobs_8h.html#d9/deb/structbgpids">bgpids</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a370d36e85fac1b1cf2fdbc18b66903ae">nalloc</a>;</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160; </div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;  nsize_max = <a class="code" href="../../dc/d2c/typemax_8h.html#ac1ddc411d5dc12a29330bfe364f79f71">TYPE_MAXIMUM</a> (<a class="code" href="../../d3/d3a/jobs_8h.html#a677d6488545fa3193e7cb54647b4ae5c">ps_index_t</a>);</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;  nsize_cur = (<a class="code" href="../../d3/d3a/jobs_8h.html#a677d6488545fa3193e7cb54647b4ae5c">ps_index_t</a>)<a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a3c74d4692759e4d8ec8089acefa23583">c_childmax</a>;</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;  <a class="code" href="../../db/dd4/sm__loop_8c.html#a45a537235d3d9968fa1c984289b3c3c6">if</a> (nsize_cur &lt; 0)                <span class="comment">/* overflow */</span></div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    nsize_cur = <a class="code" href="../../df/d8e/jobs_8c.html#a93df246677de7b76e2b8e743da164ba1">MAX_CHILD_MAX</a>;</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160; </div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;  <span class="keywordflow">while</span> (nsize &gt; 0 &amp;&amp; nsize &lt; nsize_cur)    <span class="comment">/* &gt; 0 should catch overflow */</span></div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    nsize &lt;&lt;= 1;</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;  <span class="keywordflow">if</span> (nsize &gt; nsize_max || nsize &lt;= 0)      <span class="comment">/* overflow? */</span></div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    nsize = nsize_max;</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;  <span class="keywordflow">if</span> (nsize &gt; <a class="code" href="../../df/d8e/jobs_8c.html#a93df246677de7b76e2b8e743da164ba1">MAX_CHILD_MAX</a>)</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    nsize = nsize_max = <a class="code" href="../../df/d8e/jobs_8c.html#a93df246677de7b76e2b8e743da164ba1">MAX_CHILD_MAX</a>;      <span class="comment">/* hard cap */</span></div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160; </div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d3/d3a/jobs_8h.html#d9/deb/structbgpids">bgpids</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a370d36e85fac1b1cf2fdbc18b66903ae">nalloc</a> &lt; nsize_cur &amp;&amp; <a class="code" href="../../d3/d3a/jobs_8h.html#d9/deb/structbgpids">bgpids</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a370d36e85fac1b1cf2fdbc18b66903ae">nalloc</a> &lt; nsize_max)</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    {</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;      <a class="code" href="../../d3/d3a/jobs_8h.html#d9/deb/structbgpids">bgpids</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a9e1b9f32d9f6e5db5387b07d9e5440ff">storage</a> = (<span class="keyword">struct </span><a class="code" href="../../d3/d3a/jobs_8h.html#d5/d37/structpidstat">pidstat</a> *)<a class="code" href="../../db/d0a/tre_8h.html#a40740062faf2d95d4935112447c464ef">xrealloc</a> (<a class="code" href="../../d3/d3a/jobs_8h.html#d9/deb/structbgpids">bgpids</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a9e1b9f32d9f6e5db5387b07d9e5440ff">storage</a>, nsize * sizeof (<span class="keyword">struct</span> <a class="code" href="../../d3/d3a/jobs_8h.html#d5/d37/structpidstat">pidstat</a>));</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160; </div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;      <span class="keywordflow">for</span> (psi = <a class="code" href="../../d3/d3a/jobs_8h.html#d9/deb/structbgpids">bgpids</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a370d36e85fac1b1cf2fdbc18b66903ae">nalloc</a>; psi &lt; nsize; psi++)</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    <a class="code" href="../../d3/d3a/jobs_8h.html#d9/deb/structbgpids">bgpids</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a9e1b9f32d9f6e5db5387b07d9e5440ff">storage</a>[psi].<a class="code" href="../../d3/d3a/jobs_8h.html#a9720eaa7788ca953a6130f2b8d1d1a23">pid</a> = <a class="code" href="../../d3/d3a/jobs_8h.html#ad40327c746e8ef715109d9b9257eb991">NO_PID</a>;</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160; </div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;      <a class="code" href="../../d3/d3a/jobs_8h.html#d9/deb/structbgpids">bgpids</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a370d36e85fac1b1cf2fdbc18b66903ae">nalloc</a> = nsize;</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160; </div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    }</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d3/d3a/jobs_8h.html#d9/deb/structbgpids">bgpids</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#adf6139c912fc1e79278110429b95aaee">head</a> &gt;= <a class="code" href="../../d3/d3a/jobs_8h.html#d9/deb/structbgpids">bgpids</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a370d36e85fac1b1cf2fdbc18b66903ae">nalloc</a>)    <span class="comment">/* wrap around */</span></div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    <a class="code" href="../../d3/d3a/jobs_8h.html#d9/deb/structbgpids">bgpids</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#adf6139c912fc1e79278110429b95aaee">head</a> = 0;</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;}</div>
<div class="ttc" id="ajobs_8c_html_a539c77a9dfeaf7df64b89278a020702e"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a539c77a9dfeaf7df64b89278a020702e">BGPIDS_TABLE_SZ</a></div><div class="ttdeci">#define BGPIDS_TABLE_SZ</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l00109">jobs.c:109</a></div></div>
<div class="ttc" id="ajobs_8c_html_a93df246677de7b76e2b8e743da164ba1"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a93df246677de7b76e2b8e743da164ba1">MAX_CHILD_MAX</a></div><div class="ttdeci">#define MAX_CHILD_MAX</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l00098">jobs.c:98</a></div></div>
<div class="ttc" id="ajobs_8c_html_aa52b3fc7fe43cf6aba78123f474f050a"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#aa52b3fc7fe43cf6aba78123f474f050a">PIDSTAT_TABLE_SZ</a></div><div class="ttdeci">#define PIDSTAT_TABLE_SZ</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l00108">jobs.c:108</a></div></div>
<div class="ttc" id="ajobs_8c_html_ad64c488ea31ee4a9aba985c9336bb0fa"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#ad64c488ea31ee4a9aba985c9336bb0fa">pidstat_table</a></div><div class="ttdeci">ps_index_t pidstat_table[PIDSTAT_TABLE_SZ]</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l00177">jobs.c:177</a></div></div>
<div class="ttc" id="asm__loop_8c_html_a45a537235d3d9968fa1c984289b3c3c6"><div class="ttname"><a href="../../db/dd4/sm__loop_8c.html#a45a537235d3d9968fa1c984289b3c3c6">if</a></div><div class="ttdeci">if(return(GMATCH(string==0||pattern==0)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dd4/sm__loop_8c_source.html#l00046">sm_loop.c:46</a></div></div>
<div class="ttc" id="atre_8h_html_a40740062faf2d95d4935112447c464ef"><div class="ttname"><a href="../../db/d0a/tre_8h.html#a40740062faf2d95d4935112447c464ef">xrealloc</a></div><div class="ttdeci">#define xrealloc</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0a/tre_8h_source.html#l00230">tre.h:230</a></div></div>
<div class="ttc" id="atypemax_8h_html_ac1ddc411d5dc12a29330bfe364f79f71"><div class="ttname"><a href="../../dc/d2c/typemax_8h.html#ac1ddc411d5dc12a29330bfe364f79f71">TYPE_MAXIMUM</a></div><div class="ttdeci">#define TYPE_MAXIMUM(t)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2c/typemax_8h_source.html#l00051">typemax.h:51</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d8e/jobs_8c_source.html#l00109">BGPIDS_TABLE_SZ</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00135">jobstats::c_childmax</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00171">bgpids::head</a>, <a class="el" href="../../db/dd4/sm__loop_8c_source.html#l00046">if()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00175">js</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00098">MAX_CHILD_MAX</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00172">bgpids::nalloc</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00198">NO_PID</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00177">NO_PIDSTAT</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00164">pidstat::pid</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00177">pidstat_table</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00108">PIDSTAT_TABLE_SZ</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00169">bgpids::storage</a>, <a class="el" href="../../dc/d2c/typemax_8h_source.html#l00051">TYPE_MAXIMUM</a>, and <a class="el" href="../../db/d0a/tre_8h_source.html#l00230">xrealloc</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l00802">bgp_getindex()</a>.</p>

</div>
</div>
<a id="ad9ed29155697136943ee817c237314e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9ed29155697136943ee817c237314e1">&#9670;&nbsp;</a></span>bgp_search()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int bgp_search </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a>&#160;</td>
          <td class="paramname"><em>pid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00945">945</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;{</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;  <a class="code" href="../../d3/d3a/jobs_8h.html#a677d6488545fa3193e7cb54647b4ae5c">ps_index_t</a> psi, orig_psi;</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160; </div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d3/d3a/jobs_8h.html#d9/deb/structbgpids">bgpids</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a9e1b9f32d9f6e5db5387b07d9e5440ff">storage</a> == 0 || <a class="code" href="../../d3/d3a/jobs_8h.html#d9/deb/structbgpids">bgpids</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a370d36e85fac1b1cf2fdbc18b66903ae">nalloc</a> == 0 || <a class="code" href="../../d3/d3a/jobs_8h.html#d9/deb/structbgpids">bgpids</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a3b393c1d3d52cb76efbe24e0fffc2871">npid</a> == 0)</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160; </div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;  <span class="comment">/* Search chain using hash to find bucket in pidstat_table */</span></div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;  <span class="keywordflow">for</span> (orig_psi = psi = *(<a class="code" href="../../df/d8e/jobs_8c.html#a7e0bb0533cedbd5496331c5aae1e1d60">pshash_getbucket</a> (<a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>)); psi != <a class="code" href="../../d3/d3a/jobs_8h.html#aa0ca45454a6e8f383c4d1e490dcb6bb3">NO_PIDSTAT</a>; psi = <a class="code" href="../../d3/d3a/jobs_8h.html#d9/deb/structbgpids">bgpids</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a9e1b9f32d9f6e5db5387b07d9e5440ff">storage</a>[psi].<a class="code" href="../../d3/d3a/jobs_8h.html#a6848a528a59f93911847b61d0b329ee5">bucket_next</a>)</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    {</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d3/d3a/jobs_8h.html#d9/deb/structbgpids">bgpids</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a9e1b9f32d9f6e5db5387b07d9e5440ff">storage</a>[psi].<a class="code" href="../../d3/d3a/jobs_8h.html#a9720eaa7788ca953a6130f2b8d1d1a23">pid</a> == <a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>)</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="../../d3/d3a/jobs_8h.html#d9/deb/structbgpids">bgpids</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a9e1b9f32d9f6e5db5387b07d9e5440ff">storage</a>[psi].<a class="code" href="../../d3/d3a/jobs_8h.html#a7feadc8da0ca4c76cd76c3b97274e622">status</a>);</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;      <span class="keywordflow">if</span> (orig_psi == <a class="code" href="../../d3/d3a/jobs_8h.html#d9/deb/structbgpids">bgpids</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a9e1b9f32d9f6e5db5387b07d9e5440ff">storage</a>[psi].<a class="code" href="../../d3/d3a/jobs_8h.html#a6848a528a59f93911847b61d0b329ee5">bucket_next</a>)  <span class="comment">/* catch reported bug */</span></div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;    {</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;      <a class="code" href="../../db/dcc/error_8c.html#a18ffbfac4ece05ba6cc56c02d783a9ee">internal_warning</a> (<a class="code" href="../../d7/dcd/bashintl_8h.html#a86a239addea586602343007a370bf8ad">_</a>(<span class="stringliteral">&quot;bgp_search: LOOP: psi (%d) == storage[psi].bucket_next&quot;</span>), psi);</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;      <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;    }</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;    }</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160; </div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;  <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/dcd/bashintl_8h_source.html#l00036">_</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00161">pidstat::bucket_next</a>, <a class="el" href="../../db/dcc/error_8c_source.html#l00256">internal_warning()</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00172">bgpids::nalloc</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00177">NO_PIDSTAT</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00174">bgpids::npid</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00164">pidstat::pid</a>, <a class="el" href="../../d0/d43/mconf_8c_source.html#l00450">pid</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00812">pshash_getbucket()</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00165">pidstat::status</a>, and <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00169">bgpids::storage</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l02586">wait_for_single_pid()</a>.</p>

</div>
</div>
<a id="a47c393729bc38de011d2422746de634c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47c393729bc38de011d2422746de634c">&#9670;&nbsp;</a></span>cleanup_dead_jobs()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void cleanup_dead_jobs </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l01210">1210</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;{</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;  <span class="keyword">register</span> <span class="keywordtype">int</span> <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>;</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;  <span class="keywordtype">int</span> os;</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;  <a class="code" href="../../d3/d3a/jobs_8h.html#d8/d20/structprocess">PROCESS</a> *discard;</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160; </div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ad107b5818741c0309ebdb7af7318309e">j_jobslots</a> == 0 || <a class="code" href="../../df/d8e/jobs_8c.html#a57e47a8425e68a1907ac493cd673ca41">jobs_list_frozen</a>)</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160; </div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#a94c540ad458707a7ced24d74a260e1e2">QUEUE_SIGCHLD</a>(os);</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160; </div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;  <span class="comment">/* XXX could use js.j_firstj and js.j_lastj here */</span></div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> = 0; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> &lt; <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ad107b5818741c0309ebdb7af7318309e">j_jobslots</a>; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>++)</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;    {</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> &lt; <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a41979e2d342c40d347381152156fc26d">j_firstj</a> &amp;&amp; <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>])</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;    <a class="code" href="../../da/d41/error_8h.html#a1c7d66dc03b5cb6a3a6c2a79bcbf8e4d">INTERNAL_DEBUG</a> ((<span class="stringliteral">&quot;cleanup_dead_jobs: job %d non-null before js.j_firstj (%d)&quot;</span>, <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>, <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a41979e2d342c40d347381152156fc26d">j_firstj</a>));</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> &gt; <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ac29ea4e478fa590943c6f7ae902f3a46">j_lastj</a> &amp;&amp; <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>])</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;    <a class="code" href="../../da/d41/error_8h.html#a1c7d66dc03b5cb6a3a6c2a79bcbf8e4d">INTERNAL_DEBUG</a>((<span class="stringliteral">&quot;cleanup_dead_jobs: job %d non-null after js.j_lastj (%d)&quot;</span>, <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>, <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ac29ea4e478fa590943c6f7ae902f3a46">j_lastj</a>));</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160; </div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>] &amp;&amp; <a class="code" href="../../d3/d3a/jobs_8h.html#a15d782ba433bae3ec145926e26c9ea37">DEADJOB</a> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>) &amp;&amp; <a class="code" href="../../d3/d3a/jobs_8h.html#a264330cfc7dfcc3a68791098619b1b10">IS_NOTIFIED</a> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>))</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#ae6f3e928efd8e712697fe9c5903b7610">delete_job</a> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>, 0);</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;    }</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160; </div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;<span class="preprocessor">#if defined (PROCESS_SUBSTITUTION)</span></div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;  procsub_prune ();</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#a00b3fcd8506b159c50c98186435d1f13">last_procsub_child</a> = (<a class="code" href="../../d3/d3a/jobs_8h.html#d8/d20/structprocess">PROCESS</a> *)<a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160; </div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;<span class="preprocessor">#if defined (COPROCESS_SUPPORT)</span></div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;  coproc_reap ();</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160; </div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#a54543fd2ec1a59443849d1dfdabdadbc">UNQUEUE_SIGCHLD</a>(os);</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;}</div>
<div class="ttc" id="aerror_8h_html_a1c7d66dc03b5cb6a3a6c2a79bcbf8e4d"><div class="ttname"><a href="../../da/d41/error_8h.html#a1c7d66dc03b5cb6a3a6c2a79bcbf8e4d">INTERNAL_DEBUG</a></div><div class="ttdeci">#define INTERNAL_DEBUG(x)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d41/error_8h_source.html#l00079">error.h:79</a></div></div>
<div class="ttc" id="agettextP_8h_html_a68428151ad44e31b19041cdeb8972a91"><div class="ttname"><a href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a></div><div class="ttdeci">static nls_uint32 nls_uint32 i</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/gettextP_8h_source.html#l00074">gettextP.h:74</a></div></div>
<div class="ttc" id="ajobs_8c_html_a00b3fcd8506b159c50c98186435d1f13"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a00b3fcd8506b159c50c98186435d1f13">last_procsub_child</a></div><div class="ttdeci">PROCESS * last_procsub_child</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l00234">jobs.c:234</a></div></div>
<div class="ttc" id="ajobs_8c_html_a54543fd2ec1a59443849d1dfdabdadbc"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a54543fd2ec1a59443849d1dfdabdadbc">UNQUEUE_SIGCHLD</a></div><div class="ttdeci">#define UNQUEUE_SIGCHLD(os)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l00324">jobs.c:324</a></div></div>
<div class="ttc" id="ajobs_8c_html_a57e47a8425e68a1907ac493cd673ca41"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a57e47a8425e68a1907ac493cd673ca41">jobs_list_frozen</a></div><div class="ttdeci">static int jobs_list_frozen</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l00346">jobs.c:346</a></div></div>
<div class="ttc" id="ajobs_8c_html_a94c540ad458707a7ced24d74a260e1e2"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a94c540ad458707a7ced24d74a260e1e2">QUEUE_SIGCHLD</a></div><div class="ttdeci">#define QUEUE_SIGCHLD(os)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l00320">jobs.c:320</a></div></div>
<div class="ttc" id="ajobs_8c_html_ae6f3e928efd8e712697fe9c5903b7610"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#ae6f3e928efd8e712697fe9c5903b7610">delete_job</a></div><div class="ttdeci">void delete_job(int job_index, int dflags)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l01386">jobs.c:1386</a></div></div>
<div class="ttc" id="ajobs_8h_html_a15d782ba433bae3ec145926e26c9ea37"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#a15d782ba433bae3ec145926e26c9ea37">DEADJOB</a></div><div class="ttdeci">#define DEADJOB(j)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00100">jobs.h:100</a></div></div>
<div class="ttc" id="ajobs_8h_html_a264330cfc7dfcc3a68791098619b1b10"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#a264330cfc7dfcc3a68791098619b1b10">IS_NOTIFIED</a></div><div class="ttdeci">#define IS_NOTIFIED(j)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00115">jobs.h:115</a></div></div>
<div class="ttc" id="ajobs_8h_html_a41979e2d342c40d347381152156fc26d"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#a41979e2d342c40d347381152156fc26d">jobstats::j_firstj</a></div><div class="ttdeci">int j_firstj</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00146">jobs.h:146</a></div></div>
<div class="ttc" id="ajobs_8h_html_ac29ea4e478fa590943c6f7ae902f3a46"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#ac29ea4e478fa590943c6f7ae902f3a46">jobstats::j_lastj</a></div><div class="ttdeci">int j_lastj</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00145">jobs.h:145</a></div></div>
<div class="ttc" id="ajobs_8h_html_ad107b5818741c0309ebdb7af7318309e"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#ad107b5818741c0309ebdb7af7318309e">jobstats::j_jobslots</a></div><div class="ttdeci">int j_jobslots</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00144">jobs.h:144</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00100">DEADJOB</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01386">delete_job()</a>, <a class="el" href="../../dd/d71/gettextP_8h_source.html#l00074">i</a>, <a class="el" href="../../da/d41/error_8h_source.html#l00079">INTERNAL_DEBUG</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00115">IS_NOTIFIED</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00146">jobstats::j_firstj</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00144">jobstats::j_jobslots</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00145">jobstats::j_lastj</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00183">jobs</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00346">jobs_list_frozen</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00175">js</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00234">last_procsub_child</a>, <a class="el" href="../../d9/d14/general_8h_source.html#l00053">NULL</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00320">QUEUE_SIGCHLD</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l00324">UNQUEUE_SIGCHLD</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l02109">list_all_jobs()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02082">list_one_job()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02099">list_running_jobs()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02091">list_stopped_jobs()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l03353">notify_and_cleanup()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l03367">reap_dead_jobs()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00553">stop_pipeline()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02648">wait_for_background_pids()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l02586">wait_for_single_pid()</a>.</p>

</div>
</div>
<a id="aad2d2f6a2251b71cf26012d046f93d89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad2d2f6a2251b71cf26012d046f93d89">&#9670;&nbsp;</a></span>cleanup_the_pipeline()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cleanup_the_pipeline </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00437">437</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;{</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  <a class="code" href="../../d3/d3a/jobs_8h.html#d8/d20/structprocess">PROCESS</a> *disposer;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  <a class="code" href="../../d8/d90/sigset__t_8h.html#a9140a5882f847f67b8155c759ac6aa05">sigset_t</a> set, oset;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160; </div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;  <a class="code" href="../../de/d62/sig_8h.html#a37d156f6ab7c2ade277f9a274314d258">BLOCK_CHILD</a> (set, oset);</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;  disposer = <a class="code" href="../../df/d8e/jobs_8c.html#a5efe88eb6aefb268d1259a51812164b2">the_pipeline</a>;</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#a5efe88eb6aefb268d1259a51812164b2">the_pipeline</a> = (<a class="code" href="../../d3/d3a/jobs_8h.html#d8/d20/structprocess">PROCESS</a> *)<a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  <a class="code" href="../../de/d62/sig_8h.html#aa9262558d91ca8060065606f36167783">UNBLOCK_CHILD</a> (oset);</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160; </div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  <span class="keywordflow">if</span> (disposer)</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#aefd8badf09efc12aee9dfa1cfaaef024">discard_pipeline</a> (disposer);</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;}</div>
<div class="ttc" id="ajobs_8c_html_aefd8badf09efc12aee9dfa1cfaaef024"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#aefd8badf09efc12aee9dfa1cfaaef024">discard_pipeline</a></div><div class="ttdeci">int discard_pipeline(PROCESS *chain)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l01463">jobs.c:1463</a></div></div>
<div class="ttc" id="asig_8h_html_a37d156f6ab7c2ade277f9a274314d258"><div class="ttname"><a href="../../de/d62/sig_8h.html#a37d156f6ab7c2ade277f9a274314d258">BLOCK_CHILD</a></div><div class="ttdeci">#define BLOCK_CHILD(nvar, ovar)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d62/sig_8h_source.html#l00100">sig.h:100</a></div></div>
<div class="ttc" id="asig_8h_html_aa9262558d91ca8060065606f36167783"><div class="ttname"><a href="../../de/d62/sig_8h.html#aa9262558d91ca8060065606f36167783">UNBLOCK_CHILD</a></div><div class="ttdeci">#define UNBLOCK_CHILD(ovar)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d62/sig_8h_source.html#l00101">sig.h:101</a></div></div>
<div class="ttc" id="asigset__t_8h_html_a9140a5882f847f67b8155c759ac6aa05"><div class="ttname"><a href="../../d8/d90/sigset__t_8h.html#a9140a5882f847f67b8155c759ac6aa05">sigset_t</a></div><div class="ttdeci">unsigned long sigset_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d90/sigset__t_8h_source.html#l00004">sigset_t.h:4</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../de/d62/sig_8h_source.html#l00100">BLOCK_CHILD</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01463">discard_pipeline()</a>, <a class="el" href="../../d9/d14/general_8h_source.html#l00053">NULL</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00219">the_pipeline</a>, and <a class="el" href="../../de/d62/sig_8h_source.html#l00101">UNBLOCK_CHILD</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/d93/subst_8c_source.html#l06919">command_substitute()</a>, <a class="el" href="../../d6/ddd/push_8c_source.html#l00042">push_builtin()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l00523">start_pipeline()</a>.</p>

</div>
</div>
<a id="a9d9dd03ba5aadbebe470c27eae2209da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d9dd03ba5aadbebe470c27eae2209da">&#9670;&nbsp;</a></span>compact_jobs_list()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int compact_jobs_list </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l01367">1367</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;{</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ad107b5818741c0309ebdb7af7318309e">j_jobslots</a> == 0 || <a class="code" href="../../df/d8e/jobs_8c.html#a57e47a8425e68a1907ac493cd673ca41">jobs_list_frozen</a>)</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ad107b5818741c0309ebdb7af7318309e">j_jobslots</a>;</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160; </div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#a8113aecd5926c83f5bec94aaded2476a">reap_dead_jobs</a> ();</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#a062169660044519b9a33a27f35cf6a85">realloc_jobs_list</a> ();</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160; </div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;<span class="preprocessor">#if 0</span></div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;  itrace(<span class="stringliteral">&quot;compact_jobs_list: returning %d&quot;</span>, (<a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ac29ea4e478fa590943c6f7ae902f3a46">j_lastj</a> || <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ac29ea4e478fa590943c6f7ae902f3a46">j_lastj</a>]) ? <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ac29ea4e478fa590943c6f7ae902f3a46">j_lastj</a> + 1 : 0);</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160; </div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;  <span class="keywordflow">return</span> ((<a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ac29ea4e478fa590943c6f7ae902f3a46">j_lastj</a> || <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ac29ea4e478fa590943c6f7ae902f3a46">j_lastj</a>]) ? <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ac29ea4e478fa590943c6f7ae902f3a46">j_lastj</a> + 1 : 0);</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;}</div>
<div class="ttc" id="ajobs_8c_html_a062169660044519b9a33a27f35cf6a85"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a062169660044519b9a33a27f35cf6a85">realloc_jobs_list</a></div><div class="ttdeci">static void realloc_jobs_list()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l01290">jobs.c:1290</a></div></div>
<div class="ttc" id="ajobs_8c_html_a8113aecd5926c83f5bec94aaded2476a"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a8113aecd5926c83f5bec94aaded2476a">reap_dead_jobs</a></div><div class="ttdeci">void reap_dead_jobs()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l03367">jobs.c:3367</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00144">jobstats::j_jobslots</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00145">jobstats::j_lastj</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00183">jobs</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00346">jobs_list_frozen</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00175">js</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01290">realloc_jobs_list()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l03367">reap_dead_jobs()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l00553">stop_pipeline()</a>.</p>

</div>
</div>
<a id="adaf7a0885abd94848dabd18ba344eb66"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adaf7a0885abd94848dabd18ba344eb66">&#9670;&nbsp;</a></span>count_all_jobs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int count_all_jobs </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l04778">4778</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l04779"></a><span class="lineno"> 4779</span>&#160;{</div>
<div class="line"><a name="l04780"></a><span class="lineno"> 4780</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>, <a class="code" href="../../d0/d32/dcigettext_8c.html#a58257445f1a929304e537613b62ebb35">n</a>;</div>
<div class="line"><a name="l04781"></a><span class="lineno"> 4781</span>&#160;  <a class="code" href="../../d8/d90/sigset__t_8h.html#a9140a5882f847f67b8155c759ac6aa05">sigset_t</a> set, oset;</div>
<div class="line"><a name="l04782"></a><span class="lineno"> 4782</span>&#160; </div>
<div class="line"><a name="l04783"></a><span class="lineno"> 4783</span>&#160;  <span class="comment">/* This really counts all non-dead jobs. */</span></div>
<div class="line"><a name="l04784"></a><span class="lineno"> 4784</span>&#160;  <a class="code" href="../../de/d62/sig_8h.html#a37d156f6ab7c2ade277f9a274314d258">BLOCK_CHILD</a> (set, oset);</div>
<div class="line"><a name="l04785"></a><span class="lineno"> 4785</span>&#160;  <span class="comment">/* XXX could use js.j_firstj here */</span></div>
<div class="line"><a name="l04786"></a><span class="lineno"> 4786</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> = <a class="code" href="../../d0/d32/dcigettext_8c.html#a58257445f1a929304e537613b62ebb35">n</a> = 0; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> &lt; <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ad107b5818741c0309ebdb7af7318309e">j_jobslots</a>; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>++)</div>
<div class="line"><a name="l04787"></a><span class="lineno"> 4787</span>&#160;    {</div>
<div class="line"><a name="l04788"></a><span class="lineno"> 4788</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> &lt; <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a41979e2d342c40d347381152156fc26d">j_firstj</a> &amp;&amp; <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>])</div>
<div class="line"><a name="l04789"></a><span class="lineno"> 4789</span>&#160;    <a class="code" href="../../da/d41/error_8h.html#a1c7d66dc03b5cb6a3a6c2a79bcbf8e4d">INTERNAL_DEBUG</a> ((<span class="stringliteral">&quot;count_all_jobs: job %d non-null before js.j_firstj (%d)&quot;</span>, <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>, <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a41979e2d342c40d347381152156fc26d">j_firstj</a>));</div>
<div class="line"><a name="l04790"></a><span class="lineno"> 4790</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> &gt; <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ac29ea4e478fa590943c6f7ae902f3a46">j_lastj</a> &amp;&amp; <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>])</div>
<div class="line"><a name="l04791"></a><span class="lineno"> 4791</span>&#160;    <a class="code" href="../../da/d41/error_8h.html#a1c7d66dc03b5cb6a3a6c2a79bcbf8e4d">INTERNAL_DEBUG</a> ((<span class="stringliteral">&quot;count_all_jobs: job %d non-null after js.j_lastj (%d)&quot;</span>, <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>, <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ac29ea4e478fa590943c6f7ae902f3a46">j_lastj</a>));</div>
<div class="line"><a name="l04792"></a><span class="lineno"> 4792</span>&#160; </div>
<div class="line"><a name="l04793"></a><span class="lineno"> 4793</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>] &amp;&amp; <a class="code" href="../../d3/d3a/jobs_8h.html#a15d782ba433bae3ec145926e26c9ea37">DEADJOB</a>(<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>) == 0)</div>
<div class="line"><a name="l04794"></a><span class="lineno"> 4794</span>&#160;    <a class="code" href="../../d0/d32/dcigettext_8c.html#a58257445f1a929304e537613b62ebb35">n</a>++;</div>
<div class="line"><a name="l04795"></a><span class="lineno"> 4795</span>&#160;    }</div>
<div class="line"><a name="l04796"></a><span class="lineno"> 4796</span>&#160;  <a class="code" href="../../de/d62/sig_8h.html#aa9262558d91ca8060065606f36167783">UNBLOCK_CHILD</a> (oset);</div>
<div class="line"><a name="l04797"></a><span class="lineno"> 4797</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d0/d32/dcigettext_8c.html#a58257445f1a929304e537613b62ebb35">n</a>;</div>
<div class="line"><a name="l04798"></a><span class="lineno"> 4798</span>&#160;}</div>
<div class="ttc" id="adcigettext_8c_html_a58257445f1a929304e537613b62ebb35"><div class="ttname"><a href="../../d0/d32/dcigettext_8c.html#a58257445f1a929304e537613b62ebb35">n</a></div><div class="ttdeci">unsigned long int n</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d32/dcigettext_8c_source.html#l00441">dcigettext.c:441</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../de/d62/sig_8h_source.html#l00100">BLOCK_CHILD</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00100">DEADJOB</a>, <a class="el" href="../../dd/d71/gettextP_8h_source.html#l00074">i</a>, <a class="el" href="../../da/d41/error_8h_source.html#l00079">INTERNAL_DEBUG</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00146">jobstats::j_firstj</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00144">jobstats::j_jobslots</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00145">jobstats::j_lastj</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00183">jobs</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00175">js</a>, <a class="el" href="../../d0/d32/dcigettext_8c_source.html#l00441">n</a>, and <a class="el" href="../../de/d62/sig_8h_source.html#l00101">UNBLOCK_CHILD</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/def/y_8tab_8c_source.html#l07992">decode_prompt_string()</a>.</p>

</div>
</div>
<a id="aa00dc6ac57f419e8d59ff822cc7b51ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa00dc6ac57f419e8d59ff822cc7b51ab">&#9670;&nbsp;</a></span>current_working_directory()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* current_working_directory </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00383">383</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;{</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  <span class="keywordtype">char</span> *<a class="code" href="../../df/dde/runsv_8c.html#ad45ef284071e5bd5627127837e94bc27">dir</a>;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">char</span> d[<a class="code" href="../../d0/daa/maxpath_8h.html#ae688d728e1acdfe5988c7db45d6f0166">PATH_MAX</a>];</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160; </div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  <a class="code" href="../../df/dde/runsv_8c.html#ad45ef284071e5bd5627127837e94bc27">dir</a> = <a class="code" href="../../d5/de8/variables_8c.html#ad4773a87954c85e830411739af9bf4ff">get_string_value</a> (<span class="stringliteral">&quot;PWD&quot;</span>);</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160; </div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../df/dde/runsv_8c.html#ad45ef284071e5bd5627127837e94bc27">dir</a> == 0 &amp;&amp; <a class="code" href="../../de/da3/bash_2builtins_2common_8c.html#ac4e220c8b532367b34ea538eaaea2c24">the_current_working_directory</a> &amp;&amp; <a class="code" href="../../d8/d70/flags_8c.html#a4e7fa520c5fac785fe4b5e9d9607d3d9">no_symbolic_links</a>)</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <a class="code" href="../../df/dde/runsv_8c.html#ad45ef284071e5bd5627127837e94bc27">dir</a> = <a class="code" href="../../de/da3/bash_2builtins_2common_8c.html#ac4e220c8b532367b34ea538eaaea2c24">the_current_working_directory</a>;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160; </div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../df/dde/runsv_8c.html#ad45ef284071e5bd5627127837e94bc27">dir</a> == 0)</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    {</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;      <a class="code" href="../../df/dde/runsv_8c.html#ad45ef284071e5bd5627127837e94bc27">dir</a> = <a class="code" href="../../d0/d32/dcigettext_8c.html#ad4a56f6b40d7a5953d0fd8c9b192f5f2">getcwd</a> (d, <span class="keyword">sizeof</span>(d));</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/dde/runsv_8c.html#ad45ef284071e5bd5627127837e94bc27">dir</a>)</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <a class="code" href="../../df/dde/runsv_8c.html#ad45ef284071e5bd5627127837e94bc27">dir</a> = d;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    }</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160; </div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  <span class="keywordflow">return</span> (<a class="code" href="../../df/dde/runsv_8c.html#ad45ef284071e5bd5627127837e94bc27">dir</a> == 0) ? <span class="stringliteral">&quot;&lt;unknown&gt;&quot;</span> : <a class="code" href="../../df/dde/runsv_8c.html#ad45ef284071e5bd5627127837e94bc27">dir</a>;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;}</div>
<div class="ttc" id="abash_2builtins_2common_8c_html_ac4e220c8b532367b34ea538eaaea2c24"><div class="ttname"><a href="../../de/da3/bash_2builtins_2common_8c.html#ac4e220c8b532367b34ea538eaaea2c24">the_current_working_directory</a></div><div class="ttdeci">char * the_current_working_directory</div><div class="ttdef"><b>Definition:</b> <a href="../../de/da3/bash_2builtins_2common_8c_source.html#l00621">common.c:621</a></div></div>
<div class="ttc" id="adcigettext_8c_html_ad4a56f6b40d7a5953d0fd8c9b192f5f2"><div class="ttname"><a href="../../d0/d32/dcigettext_8c.html#ad4a56f6b40d7a5953d0fd8c9b192f5f2">getcwd</a></div><div class="ttdeci">#define getcwd(buf, max)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d32/dcigettext_8c_source.html#l00155">dcigettext.c:155</a></div></div>
<div class="ttc" id="aflags_8c_html_a4e7fa520c5fac785fe4b5e9d9607d3d9"><div class="ttname"><a href="../../d8/d70/flags_8c.html#a4e7fa520c5fac785fe4b5e9d9607d3d9">no_symbolic_links</a></div><div class="ttdeci">int no_symbolic_links</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d70/flags_8c_source.html#l00102">flags.c:102</a></div></div>
<div class="ttc" id="amaxpath_8h_html_ae688d728e1acdfe5988c7db45d6f0166"><div class="ttname"><a href="../../d0/daa/maxpath_8h.html#ae688d728e1acdfe5988c7db45d6f0166">PATH_MAX</a></div><div class="ttdeci">#define PATH_MAX</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/daa/maxpath_8h_source.html#l00063">maxpath.h:63</a></div></div>
<div class="ttc" id="arunsv_8c_html_ad45ef284071e5bd5627127837e94bc27"><div class="ttname"><a href="../../df/dde/runsv_8c.html#ad45ef284071e5bd5627127837e94bc27">dir</a></div><div class="ttdeci">#define dir</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dde/runsv_8c_source.html#l00121">runsv.c:121</a></div></div>
<div class="ttc" id="avariables_8c_html_ad4773a87954c85e830411739af9bf4ff"><div class="ttname"><a href="../../d5/de8/variables_8c.html#ad4773a87954c85e830411739af9bf4ff">get_string_value</a></div><div class="ttdeci">char * get_string_value(char *var_name) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/de8/variables_8c_source.html#l02530">variables.c:2530</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/dde/runsv_8c_source.html#l00121">dir</a>, <a class="el" href="../../d5/de8/variables_8c_source.html#l02530">get_string_value()</a>, <a class="el" href="../../d0/d32/dcigettext_8c_source.html#l00155">getcwd</a>, <a class="el" href="../../d8/d70/flags_8c_source.html#l00102">no_symbolic_links</a>, <a class="el" href="../../d0/daa/maxpath_8h_source.html#l00063">PATH_MAX</a>, and <a class="el" href="../../de/da3/bash_2builtins_2common_8c_source.html#l00621">the_current_working_directory</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l04235">notify_of_job_status()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01933">print_pipeline()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l03541">start_job()</a>.</p>

</div>
</div>
<a id="aaf7e994e6b7a6080266c91a2f8c2b0c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf7e994e6b7a6080266c91a2f8c2b0c4">&#9670;&nbsp;</a></span>debug_print_pgrps()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void debug_print_pgrps </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a35131fce775aec129aca6c1ea1127f97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35131fce775aec129aca6c1ea1127f97">&#9670;&nbsp;</a></span>default_tty_job_signals()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void default_tty_job_signals </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l02370">2370</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;{</div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d5/da5/zread_8c.html#a40264baa053bf7ccf2ef5ca345d6c06d">signal_is_trapped</a> (<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#abe65c086e01f0d286b7a785a7e3cdd1a">SIGTSTP</a>) == 0 &amp;&amp; <a class="code" href="../../dc/d6f/trap_8c.html#a14e452268f832621370b10c5fd0685c8">signal_is_hard_ignored</a> (<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#abe65c086e01f0d286b7a785a7e3cdd1a">SIGTSTP</a>))</div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;    <a class="code" href="../../de/d62/sig_8h.html#aefdb4e4f01f2aa4133f26dbabcc8358b">set_signal_handler</a> (<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#abe65c086e01f0d286b7a785a7e3cdd1a">SIGTSTP</a>, <a class="code" href="../../de/d2b/musl_2include_2signal_8h.html#acf0e499b0ac946b366b4f47a3b3e8b9e">SIG_IGN</a>);</div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;    <a class="code" href="../../de/d62/sig_8h.html#aefdb4e4f01f2aa4133f26dbabcc8358b">set_signal_handler</a> (<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#abe65c086e01f0d286b7a785a7e3cdd1a">SIGTSTP</a>, <a class="code" href="../../de/d2b/musl_2include_2signal_8h.html#a27d5dc561093d6243542e6a2465bc0f8">SIG_DFL</a>);</div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160; </div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d5/da5/zread_8c.html#a40264baa053bf7ccf2ef5ca345d6c06d">signal_is_trapped</a> (<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a2c146e34a6b5a78dfba41cded3331181">SIGTTIN</a>) == 0 &amp;&amp; <a class="code" href="../../dc/d6f/trap_8c.html#a14e452268f832621370b10c5fd0685c8">signal_is_hard_ignored</a> (<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a2c146e34a6b5a78dfba41cded3331181">SIGTTIN</a>))</div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;    <a class="code" href="../../de/d62/sig_8h.html#aefdb4e4f01f2aa4133f26dbabcc8358b">set_signal_handler</a> (<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a2c146e34a6b5a78dfba41cded3331181">SIGTTIN</a>, <a class="code" href="../../de/d2b/musl_2include_2signal_8h.html#acf0e499b0ac946b366b4f47a3b3e8b9e">SIG_IGN</a>);</div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;    <a class="code" href="../../de/d62/sig_8h.html#aefdb4e4f01f2aa4133f26dbabcc8358b">set_signal_handler</a> (<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a2c146e34a6b5a78dfba41cded3331181">SIGTTIN</a>, <a class="code" href="../../de/d2b/musl_2include_2signal_8h.html#a27d5dc561093d6243542e6a2465bc0f8">SIG_DFL</a>);</div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160; </div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d5/da5/zread_8c.html#a40264baa053bf7ccf2ef5ca345d6c06d">signal_is_trapped</a> (<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a782864287613e2c5c030411fa9c5e9b1">SIGTTOU</a>) == 0 &amp;&amp; <a class="code" href="../../dc/d6f/trap_8c.html#a14e452268f832621370b10c5fd0685c8">signal_is_hard_ignored</a> (<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a782864287613e2c5c030411fa9c5e9b1">SIGTTOU</a>))</div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;    <a class="code" href="../../de/d62/sig_8h.html#aefdb4e4f01f2aa4133f26dbabcc8358b">set_signal_handler</a> (<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a782864287613e2c5c030411fa9c5e9b1">SIGTTOU</a>, <a class="code" href="../../de/d2b/musl_2include_2signal_8h.html#acf0e499b0ac946b366b4f47a3b3e8b9e">SIG_IGN</a>);</div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;    <a class="code" href="../../de/d62/sig_8h.html#aefdb4e4f01f2aa4133f26dbabcc8358b">set_signal_handler</a> (<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a782864287613e2c5c030411fa9c5e9b1">SIGTTOU</a>, <a class="code" href="../../de/d2b/musl_2include_2signal_8h.html#a27d5dc561093d6243542e6a2465bc0f8">SIG_DFL</a>);</div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;}</div>
<div class="ttc" id="alibc_2include_2signal_8h_html_a2c146e34a6b5a78dfba41cded3331181"><div class="ttname"><a href="../../df/dff/libc_2include_2signal_8h.html#a2c146e34a6b5a78dfba41cded3331181">SIGTTIN</a></div><div class="ttdeci">#define SIGTTIN</div><div class="ttdoc">Terminal input for background process.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dff/libc_2include_2signal_8h_source.html#l00070">signal.h:70</a></div></div>
<div class="ttc" id="alibc_2include_2signal_8h_html_a782864287613e2c5c030411fa9c5e9b1"><div class="ttname"><a href="../../df/dff/libc_2include_2signal_8h.html#a782864287613e2c5c030411fa9c5e9b1">SIGTTOU</a></div><div class="ttdeci">#define SIGTTOU</div><div class="ttdoc">Terminal output for background process.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dff/libc_2include_2signal_8h_source.html#l00073">signal.h:73</a></div></div>
<div class="ttc" id="alibc_2include_2signal_8h_html_abe65c086e01f0d286b7a785a7e3cdd1a"><div class="ttname"><a href="../../df/dff/libc_2include_2signal_8h.html#abe65c086e01f0d286b7a785a7e3cdd1a">SIGTSTP</a></div><div class="ttdeci">#define SIGTSTP</div><div class="ttdoc">Stop typed at terminal.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dff/libc_2include_2signal_8h_source.html#l00067">signal.h:67</a></div></div>
<div class="ttc" id="amusl_2include_2signal_8h_html_a27d5dc561093d6243542e6a2465bc0f8"><div class="ttname"><a href="../../de/d2b/musl_2include_2signal_8h.html#a27d5dc561093d6243542e6a2465bc0f8">SIG_DFL</a></div><div class="ttdeci">#define SIG_DFL</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/musl_2include_2signal_8h_source.html#l00284">signal.h:284</a></div></div>
<div class="ttc" id="amusl_2include_2signal_8h_html_acf0e499b0ac946b366b4f47a3b3e8b9e"><div class="ttname"><a href="../../de/d2b/musl_2include_2signal_8h.html#acf0e499b0ac946b366b4f47a3b3e8b9e">SIG_IGN</a></div><div class="ttdeci">#define SIG_IGN</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d2b/musl_2include_2signal_8h_source.html#l00285">signal.h:285</a></div></div>
<div class="ttc" id="asig_8h_html_aefdb4e4f01f2aa4133f26dbabcc8358b"><div class="ttname"><a href="../../de/d62/sig_8h.html#aefdb4e4f01f2aa4133f26dbabcc8358b">set_signal_handler</a></div><div class="ttdeci">#define set_signal_handler(sig, handler)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d62/sig_8h_source.html#l00043">sig.h:43</a></div></div>
<div class="ttc" id="atrap_8c_html_a14e452268f832621370b10c5fd0685c8"><div class="ttname"><a href="../../dc/d6f/trap_8c.html#a14e452268f832621370b10c5fd0685c8">signal_is_hard_ignored</a></div><div class="ttdeci">int signal_is_hard_ignored(int sig)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d6f/trap_8c_source.html#l01531">trap.c:1531</a></div></div>
<div class="ttc" id="azread_8c_html_a40264baa053bf7ccf2ef5ca345d6c06d"><div class="ttname"><a href="../../d5/da5/zread_8c.html#a40264baa053bf7ccf2ef5ca345d6c06d">signal_is_trapped</a></div><div class="ttdeci">int signal_is_trapped(int)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d6f/trap_8c_source.html#l01503">trap.c:1503</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../de/d62/sig_8h_source.html#l00043">set_signal_handler</a>, <a class="el" href="../../de/d2b/musl_2include_2signal_8h_source.html#l00284">SIG_DFL</a>, <a class="el" href="../../de/d2b/musl_2include_2signal_8h_source.html#l00285">SIG_IGN</a>, <a class="el" href="../../dc/d6f/trap_8c_source.html#l01531">signal_is_hard_ignored()</a>, <a class="el" href="../../dc/d6f/trap_8c_source.html#l01503">signal_is_trapped()</a>, <a class="el" href="../../df/dff/libc_2include_2signal_8h_source.html#l00067">SIGTSTP</a>, <a class="el" href="../../df/dff/libc_2include_2signal_8h_source.html#l00070">SIGTTIN</a>, and <a class="el" href="../../df/dff/libc_2include_2signal_8h_source.html#l00073">SIGTTOU</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l02121">make_child()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l04958">set_job_control()</a>.</p>

</div>
</div>
<a id="ab54a0986c5e457b5d7941b97a4bdce80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab54a0986c5e457b5d7941b97a4bdce80">&#9670;&nbsp;</a></span>delete_all_jobs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void delete_all_jobs </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>running_only</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l04712">4712</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l04714"></a><span class="lineno"> 4714</span>&#160;{</div>
<div class="line"><a name="l04715"></a><span class="lineno"> 4715</span>&#160;  <span class="keyword">register</span> <span class="keywordtype">int</span> <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>;</div>
<div class="line"><a name="l04716"></a><span class="lineno"> 4716</span>&#160;  <a class="code" href="../../d8/d90/sigset__t_8h.html#a9140a5882f847f67b8155c759ac6aa05">sigset_t</a> set, oset;</div>
<div class="line"><a name="l04717"></a><span class="lineno"> 4717</span>&#160; </div>
<div class="line"><a name="l04718"></a><span class="lineno"> 4718</span>&#160;  <a class="code" href="../../de/d62/sig_8h.html#a37d156f6ab7c2ade277f9a274314d258">BLOCK_CHILD</a> (set, oset);</div>
<div class="line"><a name="l04719"></a><span class="lineno"> 4719</span>&#160; </div>
<div class="line"><a name="l04720"></a><span class="lineno"> 4720</span>&#160;  <span class="comment">/* XXX - need to set j_lastj, j_firstj appropriately if running_only != 0. */</span></div>
<div class="line"><a name="l04721"></a><span class="lineno"> 4721</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ad107b5818741c0309ebdb7af7318309e">j_jobslots</a>)</div>
<div class="line"><a name="l04722"></a><span class="lineno"> 4722</span>&#160;    {</div>
<div class="line"><a name="l04723"></a><span class="lineno"> 4723</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ab72b09f6f206832a608cd245d513cca5">j_current</a> = <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a10c9a2fa68d7fed880e9f9c5f2b4d7f8">j_previous</a> = <a class="code" href="../../d3/d3a/jobs_8h.html#a6eba094b1ac1bc00e5883edd166bd944">NO_JOB</a>;</div>
<div class="line"><a name="l04724"></a><span class="lineno"> 4724</span>&#160; </div>
<div class="line"><a name="l04725"></a><span class="lineno"> 4725</span>&#160;      <span class="comment">/* XXX could use js.j_firstj here */</span></div>
<div class="line"><a name="l04726"></a><span class="lineno"> 4726</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> = 0; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> &lt; <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ad107b5818741c0309ebdb7af7318309e">j_jobslots</a>; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>++)</div>
<div class="line"><a name="l04727"></a><span class="lineno"> 4727</span>&#160;    {</div>
<div class="line"><a name="l04728"></a><span class="lineno"> 4728</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> &lt; <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a41979e2d342c40d347381152156fc26d">j_firstj</a> &amp;&amp; <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>])</div>
<div class="line"><a name="l04729"></a><span class="lineno"> 4729</span>&#160;        <a class="code" href="../../da/d41/error_8h.html#a1c7d66dc03b5cb6a3a6c2a79bcbf8e4d">INTERNAL_DEBUG</a> ((<span class="stringliteral">&quot;delete_all_jobs: job %d non-null before js.j_firstj (%d)&quot;</span>, <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>, <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a41979e2d342c40d347381152156fc26d">j_firstj</a>));</div>
<div class="line"><a name="l04730"></a><span class="lineno"> 4730</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> &gt; <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ac29ea4e478fa590943c6f7ae902f3a46">j_lastj</a> &amp;&amp; <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>])</div>
<div class="line"><a name="l04731"></a><span class="lineno"> 4731</span>&#160;        <a class="code" href="../../da/d41/error_8h.html#a1c7d66dc03b5cb6a3a6c2a79bcbf8e4d">INTERNAL_DEBUG</a> ((<span class="stringliteral">&quot;delete_all_jobs: job %d non-null after js.j_lastj (%d)&quot;</span>, <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>, <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ac29ea4e478fa590943c6f7ae902f3a46">j_lastj</a>));</div>
<div class="line"><a name="l04732"></a><span class="lineno"> 4732</span>&#160; </div>
<div class="line"><a name="l04733"></a><span class="lineno"> 4733</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>] &amp;&amp; (running_only == 0 || (running_only &amp;&amp; <a class="code" href="../../d3/d3a/jobs_8h.html#abb162c99100e0466ef43cf32884f29e8">RUNNING</a>(<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>))))</div>
<div class="line"><a name="l04734"></a><span class="lineno"> 4734</span>&#160;        <span class="comment">/* We don&#39;t want to add any of these pids to bgpids.  If running_only</span></div>
<div class="line"><a name="l04735"></a><span class="lineno"> 4735</span>&#160;<span class="comment">           is non-zero, we don&#39;t want to add running jobs to the list.</span></div>
<div class="line"><a name="l04736"></a><span class="lineno"> 4736</span>&#160;<span class="comment">           If we are interested in all jobs, not just running jobs, and</span></div>
<div class="line"><a name="l04737"></a><span class="lineno"> 4737</span>&#160;<span class="comment">           we are going to clear the bgpids list below (bgp_clear()), we</span></div>
<div class="line"><a name="l04738"></a><span class="lineno"> 4738</span>&#160;<span class="comment">           don&#39;t need to bother. */</span></div>
<div class="line"><a name="l04739"></a><span class="lineno"> 4739</span>&#160;        <a class="code" href="../../df/d8e/jobs_8c.html#ae6f3e928efd8e712697fe9c5903b7610">delete_job</a> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>, <a class="code" href="../../df/d8e/jobs_8c.html#a1782af65c1d301fe419504e0f00853b0">DEL_WARNSTOPPED</a>|<a class="code" href="../../df/d8e/jobs_8c.html#a7144363c25cc07fb8cd621d1db3f9584">DEL_NOBGPID</a>);</div>
<div class="line"><a name="l04740"></a><span class="lineno"> 4740</span>&#160;    }</div>
<div class="line"><a name="l04741"></a><span class="lineno"> 4741</span>&#160;      <span class="keywordflow">if</span> (running_only == 0)</div>
<div class="line"><a name="l04742"></a><span class="lineno"> 4742</span>&#160;    {</div>
<div class="line"><a name="l04743"></a><span class="lineno"> 4743</span>&#160;      <a class="code" href="../../d5/db0/dynlink_8c.html#a2c6efa7679f8cd9f61af96e105017560">free</a> ((<span class="keywordtype">char</span> *)<a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>);</div>
<div class="line"><a name="l04744"></a><span class="lineno"> 4744</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ad107b5818741c0309ebdb7af7318309e">j_jobslots</a> = 0;</div>
<div class="line"><a name="l04745"></a><span class="lineno"> 4745</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a41979e2d342c40d347381152156fc26d">j_firstj</a> = <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ac29ea4e478fa590943c6f7ae902f3a46">j_lastj</a> = <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a3cd30b59b6ea29dc4d58020e6004d718">j_njobs</a> = 0;</div>
<div class="line"><a name="l04746"></a><span class="lineno"> 4746</span>&#160;    }</div>
<div class="line"><a name="l04747"></a><span class="lineno"> 4747</span>&#160;    }</div>
<div class="line"><a name="l04748"></a><span class="lineno"> 4748</span>&#160; </div>
<div class="line"><a name="l04749"></a><span class="lineno"> 4749</span>&#160;  <span class="keywordflow">if</span> (running_only == 0)</div>
<div class="line"><a name="l04750"></a><span class="lineno"> 4750</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#ab2aa5e9feea832a14471ef39a355c91a">bgp_clear</a> ();</div>
<div class="line"><a name="l04751"></a><span class="lineno"> 4751</span>&#160; </div>
<div class="line"><a name="l04752"></a><span class="lineno"> 4752</span>&#160;  <a class="code" href="../../de/d62/sig_8h.html#aa9262558d91ca8060065606f36167783">UNBLOCK_CHILD</a> (oset);</div>
<div class="line"><a name="l04753"></a><span class="lineno"> 4753</span>&#160;}</div>
<div class="ttc" id="ajobs_8c_html_a1782af65c1d301fe419504e0f00853b0"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a1782af65c1d301fe419504e0f00853b0">DEL_WARNSTOPPED</a></div><div class="ttdeci">#define DEL_WARNSTOPPED</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l00112">jobs.c:112</a></div></div>
<div class="ttc" id="ajobs_8c_html_a7144363c25cc07fb8cd621d1db3f9584"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a7144363c25cc07fb8cd621d1db3f9584">DEL_NOBGPID</a></div><div class="ttdeci">#define DEL_NOBGPID</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l00113">jobs.c:113</a></div></div>
<div class="ttc" id="ajobs_8c_html_ab2aa5e9feea832a14471ef39a355c91a"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#ab2aa5e9feea832a14471ef39a355c91a">bgp_clear</a></div><div class="ttdeci">static void bgp_clear()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l00927">jobs.c:927</a></div></div>
<div class="ttc" id="ajobs_8h_html_a10c9a2fa68d7fed880e9f9c5f2b4d7f8"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#a10c9a2fa68d7fed880e9f9c5f2b4d7f8">jobstats::j_previous</a></div><div class="ttdeci">int j_previous</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00151">jobs.h:151</a></div></div>
<div class="ttc" id="ajobs_8h_html_a3cd30b59b6ea29dc4d58020e6004d718"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#a3cd30b59b6ea29dc4d58020e6004d718">jobstats::j_njobs</a></div><div class="ttdeci">int j_njobs</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00147">jobs.h:147</a></div></div>
<div class="ttc" id="ajobs_8h_html_ab72b09f6f206832a608cd245d513cca5"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#ab72b09f6f206832a608cd245d513cca5">jobstats::j_current</a></div><div class="ttdeci">int j_current</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00150">jobs.h:150</a></div></div>
<div class="ttc" id="ajobs_8h_html_abb162c99100e0466ef43cf32884f29e8"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#abb162c99100e0466ef43cf32884f29e8">RUNNING</a></div><div class="ttdeci">#define RUNNING(j)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00099">jobs.h:99</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d8e/jobs_8c_source.html#l00927">bgp_clear()</a>, <a class="el" href="../../de/d62/sig_8h_source.html#l00100">BLOCK_CHILD</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00113">DEL_NOBGPID</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00112">DEL_WARNSTOPPED</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01386">delete_job()</a>, <a class="el" href="../../d5/db0/dynlink_8c_source.html#l00036">free</a>, <a class="el" href="../../dd/d71/gettextP_8h_source.html#l00074">i</a>, <a class="el" href="../../da/d41/error_8h_source.html#l00079">INTERNAL_DEBUG</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00150">jobstats::j_current</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00146">jobstats::j_firstj</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00144">jobstats::j_jobslots</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00145">jobstats::j_lastj</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00147">jobstats::j_njobs</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00151">jobstats::j_previous</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00183">jobs</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00175">js</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00193">NO_JOB</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00099">RUNNING</a>, and <a class="el" href="../../de/d62/sig_8h_source.html#l00101">UNBLOCK_CHILD</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/ddd/push_8c_source.html#l00042">push_builtin()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l04997">without_job_control()</a>.</p>

</div>
</div>
<a id="ae6f3e928efd8e712697fe9c5903b7610"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6f3e928efd8e712697fe9c5903b7610">&#9670;&nbsp;</a></span>delete_job()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void delete_job </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>job_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dflags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l01386">1386</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;{</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;  <span class="keyword">register</span> <a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">JOB</a> *temp;</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;  <a class="code" href="../../d3/d3a/jobs_8h.html#d8/d20/structprocess">PROCESS</a> *<a class="code" href="../../d3/d16/pstree_8c.html#de/d48/structproc">proc</a>;</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;  <span class="keywordtype">int</span> ndel;</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160; </div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ad107b5818741c0309ebdb7af7318309e">j_jobslots</a> == 0 || <a class="code" href="../../df/d8e/jobs_8c.html#a57e47a8425e68a1907ac493cd673ca41">jobs_list_frozen</a>)</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160; </div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;  <span class="keywordflow">if</span> ((dflags &amp; <a class="code" href="../../df/d8e/jobs_8c.html#a1782af65c1d301fe419504e0f00853b0">DEL_WARNSTOPPED</a>) &amp;&amp; <a class="code" href="../../de/d3d/execute__cmd_8c.html#aacb323e3f246975470615959c2d8572e">subshell_environment</a> == 0 &amp;&amp; <a class="code" href="../../d3/d3a/jobs_8h.html#adc39613d1152c030190012a614856c69">STOPPED</a> (job_index))</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;    <a class="code" href="../../db/dcc/error_8c.html#a18ffbfac4ece05ba6cc56c02d783a9ee">internal_warning</a> (<a class="code" href="../../d7/dcd/bashintl_8h.html#a86a239addea586602343007a370bf8ad">_</a>(<span class="stringliteral">&quot;deleting stopped job %d with process group %ld&quot;</span>), job_index+1, (<span class="keywordtype">long</span>)<a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[job_index]-&gt;pgrp);</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;  temp = <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[job_index];</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;  <span class="keywordflow">if</span> (temp == 0)</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160; </div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;  <span class="keywordflow">if</span> ((dflags &amp; <a class="code" href="../../df/d8e/jobs_8c.html#a7144363c25cc07fb8cd621d1db3f9584">DEL_NOBGPID</a>) == 0 &amp;&amp; (temp-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#af96c169abb39b4b3f9ccce91cb4b17dc">flags</a> &amp; (<a class="code" href="../../d3/d3a/jobs_8h.html#a0a8c62c503b7b9ef17e86bf823588e38">J_ASYNC</a>|<a class="code" href="../../d3/d3a/jobs_8h.html#a76354a83b668afadd4704004a84925fc">J_FOREGROUND</a>)) == <a class="code" href="../../d3/d3a/jobs_8h.html#a0a8c62c503b7b9ef17e86bf823588e38">J_ASYNC</a>)</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;    {</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;      <a class="code" href="../../d3/d16/pstree_8c.html#de/d48/structproc">proc</a> = <a class="code" href="../../df/d8e/jobs_8c.html#a3a439aacb4e64d3b5ec52640311fbdcf">find_last_proc</a> (job_index, 0);</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d3/d16/pstree_8c.html#de/d48/structproc">proc</a>)</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#ac44d197b4771154fac5c0eefca1052f6">bgp_add</a> (<a class="code" href="../../d3/d16/pstree_8c.html#de/d48/structproc">proc</a>-&gt;<a class="code" href="../../d3/d16/pstree_8c.html#a14519275eea607bf3041cb8a36d152c1">pid</a>, <a class="code" href="../../df/d8e/jobs_8c.html#ab424b34a1f2efb697ac04e6ae1b67bd9">process_exit_status</a> (<a class="code" href="../../d3/d16/pstree_8c.html#de/d48/structproc">proc</a>-&gt;status));</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;    }</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160; </div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[job_index] = (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">JOB</a> *)<a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;  <span class="keywordflow">if</span> (temp == <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ae904f7592ededb2bf0effc72444aab81">j_lastmade</a>)</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ae904f7592ededb2bf0effc72444aab81">j_lastmade</a> = 0;</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (temp == <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#aa7884beee2ac8c9f5da5c93ed57988b5">j_lastasync</a>)</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#aa7884beee2ac8c9f5da5c93ed57988b5">j_lastasync</a> = 0;</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160; </div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;  <a class="code" href="../../d5/db0/dynlink_8c.html#a2c6efa7679f8cd9f61af96e105017560">free</a> (temp-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#ab27dfab9ba607cb3bbdd2b6f2b4e3efc">wd</a>);</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;  ndel = <a class="code" href="../../df/d8e/jobs_8c.html#aefd8badf09efc12aee9dfa1cfaaef024">discard_pipeline</a> (temp-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#a7e5648df5ec2f0d459900325c2cc5816">pipe</a>);</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160; </div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a99f41bab1480f94d10a98bddfe502948">c_injobs</a> -= ndel;</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;  <span class="keywordflow">if</span> (temp-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#a5bee3de4970de999192f8929f926a4fe">state</a> == <a class="code" href="../../d3/d3a/jobs_8h.html#a27f134c9d8392fc50ee339c518707f57acc7e60ddf9078b1521d1adb70bd16f8b">JDEAD</a>)</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;    {</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;      <span class="comment">/* XXX - save_pipeline and restore_pipeline (e.g., for DEBUG trap) can</span></div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;<span class="comment">     mess with this total. */</span></div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a9eba978ad89cdb8068837ea21189d4c9">c_reaped</a> -= ndel;  <span class="comment">/* assumes proc hadn&#39;t been reaped earlier */</span></div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a5c5a5b94e26c657b8caef74571c311ec">j_ndead</a>--;</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a9eba978ad89cdb8068837ea21189d4c9">c_reaped</a> &lt; 0)</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;    {</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;      <a class="code" href="../../da/d41/error_8h.html#a1c7d66dc03b5cb6a3a6c2a79bcbf8e4d">INTERNAL_DEBUG</a> ((<span class="stringliteral">&quot;delete_job (%d pgrp %d): js.c_reaped (%d) &lt; 0 ndel = %d js.j_ndead = %d&quot;</span>, job_index, temp-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#a36d8fbcede662cb503c447511b10dabc">pgrp</a>, <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a9eba978ad89cdb8068837ea21189d4c9">c_reaped</a>, ndel, <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a5c5a5b94e26c657b8caef74571c311ec">j_ndead</a>));</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a9eba978ad89cdb8068837ea21189d4c9">c_reaped</a> = 0;</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;    }</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;    }</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160; </div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;  <span class="keywordflow">if</span> (temp-&gt;deferred)</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;    <a class="code" href="../../da/d05/dispose__cmd_8c.html#a009e2d6264a3beacfbccca0830142d17">dispose_command</a> (temp-&gt;deferred);</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160; </div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;  <a class="code" href="../../d5/db0/dynlink_8c.html#a2c6efa7679f8cd9f61af96e105017560">free</a> (temp);</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160; </div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a3cd30b59b6ea29dc4d58020e6004d718">j_njobs</a>--;</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a3cd30b59b6ea29dc4d58020e6004d718">j_njobs</a> == 0)</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a41979e2d342c40d347381152156fc26d">j_firstj</a> = <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ac29ea4e478fa590943c6f7ae902f3a46">j_lastj</a> = 0;</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a41979e2d342c40d347381152156fc26d">j_firstj</a>] == 0 || <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ac29ea4e478fa590943c6f7ae902f3a46">j_lastj</a>] == 0)</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#a037783844d1b44bdec0f7eef30dd6ede">reset_job_indices</a> ();</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160; </div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;  <span class="keywordflow">if</span> (job_index == <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ab72b09f6f206832a608cd245d513cca5">j_current</a> || job_index == <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a10c9a2fa68d7fed880e9f9c5f2b4d7f8">j_previous</a>)</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#a8461670b988ab55fb068f3546e2dbceb">reset_current</a> ();</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;}</div>
<div class="ttc" id="aash_8c_html_a36d8fbcede662cb503c447511b10dabc"><div class="ttname"><a href="../../d1/dbe/ash_8c.html#a36d8fbcede662cb503c447511b10dabc">job::pgrp</a></div><div class="ttdeci">pid_t pgrp</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00123">jobs.h:123</a></div></div>
<div class="ttc" id="aash_8c_html_a5bee3de4970de999192f8929f926a4fe"><div class="ttname"><a href="../../d1/dbe/ash_8c.html#a5bee3de4970de999192f8929f926a4fe">job::state</a></div><div class="ttdeci">JOB_STATE state</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00124">jobs.h:124</a></div></div>
<div class="ttc" id="aash_8c_html_ab27dfab9ba607cb3bbdd2b6f2b4e3efc"><div class="ttname"><a href="../../d1/dbe/ash_8c.html#ab27dfab9ba607cb3bbdd2b6f2b4e3efc">job::wd</a></div><div class="ttdeci">char * wd</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00121">jobs.h:121</a></div></div>
<div class="ttc" id="aash_8c_html_af96c169abb39b4b3f9ccce91cb4b17dc"><div class="ttname"><a href="../../d1/dbe/ash_8c.html#af96c169abb39b4b3f9ccce91cb4b17dc">job::flags</a></div><div class="ttdeci">int flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00125">jobs.h:125</a></div></div>
<div class="ttc" id="aash_8c_html_d3/d8c/structjob"><div class="ttname"><a href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00120">jobs.h:120</a></div></div>
<div class="ttc" id="adispose__cmd_8c_html_a009e2d6264a3beacfbccca0830142d17"><div class="ttname"><a href="../../da/d05/dispose__cmd_8c.html#a009e2d6264a3beacfbccca0830142d17">dispose_command</a></div><div class="ttdeci">void dispose_command(COMMAND *command)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d05/dispose__cmd_8c_source.html#l00036">dispose_cmd.c:36</a></div></div>
<div class="ttc" id="aexecute__cmd_8c_html_aacb323e3f246975470615959c2d8572e"><div class="ttname"><a href="../../de/d3d/execute__cmd_8c.html#aacb323e3f246975470615959c2d8572e">subshell_environment</a></div><div class="ttdeci">int subshell_environment</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3d/execute__cmd_8c_source.html#l00250">execute_cmd.c:250</a></div></div>
<div class="ttc" id="ajobs_8c_html_a037783844d1b44bdec0f7eef30dd6ede"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a037783844d1b44bdec0f7eef30dd6ede">reset_job_indices</a></div><div class="ttdeci">static void reset_job_indices()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l01170">jobs.c:1170</a></div></div>
<div class="ttc" id="ajobs_8c_html_a3a439aacb4e64d3b5ec52640311fbdcf"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a3a439aacb4e64d3b5ec52640311fbdcf">find_last_proc</a></div><div class="ttdeci">static PROCESS * find_last_proc(int job, int block)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l02546">jobs.c:2546</a></div></div>
<div class="ttc" id="ajobs_8c_html_a8461670b988ab55fb068f3546e2dbceb"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a8461670b988ab55fb068f3546e2dbceb">reset_current</a></div><div class="ttdeci">static void reset_current()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l03482">jobs.c:3482</a></div></div>
<div class="ttc" id="ajobs_8c_html_ab424b34a1f2efb697ac04e6ae1b67bd9"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#ab424b34a1f2efb697ac04e6ae1b67bd9">process_exit_status</a></div><div class="ttdeci">static int process_exit_status(WAIT status)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l02801">jobs.c:2801</a></div></div>
<div class="ttc" id="ajobs_8c_html_ac44d197b4771154fac5c0eefca1052f6"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#ac44d197b4771154fac5c0eefca1052f6">bgp_add</a></div><div class="ttdeci">static struct pidstat * bgp_add(pid_t pid, int status)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l00822">jobs.c:822</a></div></div>
<div class="ttc" id="ajobs_8h_html_a0a8c62c503b7b9ef17e86bf823588e38"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#a0a8c62c503b7b9ef17e86bf823588e38">J_ASYNC</a></div><div class="ttdeci">#define J_ASYNC</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00110">jobs.h:110</a></div></div>
<div class="ttc" id="ajobs_8h_html_a27f134c9d8392fc50ee339c518707f57acc7e60ddf9078b1521d1adb70bd16f8b"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#a27f134c9d8392fc50ee339c518707f57acc7e60ddf9078b1521d1adb70bd16f8b">JDEAD</a></div><div class="ttdeci">@ JDEAD</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00094">jobs.h:94</a></div></div>
<div class="ttc" id="ajobs_8h_html_a5c5a5b94e26c657b8caef74571c311ec"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#a5c5a5b94e26c657b8caef74571c311ec">jobstats::j_ndead</a></div><div class="ttdeci">int j_ndead</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00148">jobs.h:148</a></div></div>
<div class="ttc" id="ajobs_8h_html_a76354a83b668afadd4704004a84925fc"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#a76354a83b668afadd4704004a84925fc">J_FOREGROUND</a></div><div class="ttdeci">#define J_FOREGROUND</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00105">jobs.h:105</a></div></div>
<div class="ttc" id="ajobs_8h_html_a99f41bab1480f94d10a98bddfe502948"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#a99f41bab1480f94d10a98bddfe502948">jobstats::c_injobs</a></div><div class="ttdeci">int c_injobs</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00139">jobs.h:139</a></div></div>
<div class="ttc" id="ajobs_8h_html_aa7884beee2ac8c9f5da5c93ed57988b5"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#aa7884beee2ac8c9f5da5c93ed57988b5">jobstats::j_lastasync</a></div><div class="ttdeci">JOB * j_lastasync</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00154">jobs.h:154</a></div></div>
<div class="ttc" id="ajobs_8h_html_adc39613d1152c030190012a614856c69"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#adc39613d1152c030190012a614856c69">STOPPED</a></div><div class="ttdeci">#define STOPPED(j)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00098">jobs.h:98</a></div></div>
<div class="ttc" id="ajobs_8h_html_ae904f7592ededb2bf0effc72444aab81"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#ae904f7592ededb2bf0effc72444aab81">jobstats::j_lastmade</a></div><div class="ttdeci">JOB * j_lastmade</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00153">jobs.h:153</a></div></div>
<div class="ttc" id="apstree_8c_html_a14519275eea607bf3041cb8a36d152c1"><div class="ttname"><a href="../../d3/d16/pstree_8c.html#a14519275eea607bf3041cb8a36d152c1">proc::pid</a></div><div class="ttdeci">pid_t pid</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d16/pstree_8c_source.html#l00046">pstree.c:46</a></div></div>
<div class="ttc" id="apstree_8c_html_de/d48/structproc"><div class="ttname"><a href="../../d3/d16/pstree_8c.html#de/d48/structproc">proc</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d16/pstree_8c_source.html#l00043">pstree.c:43</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/dcd/bashintl_8h_source.html#l00036">_</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00822">bgp_add()</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00139">jobstats::c_injobs</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00138">jobstats::c_reaped</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00113">DEL_NOBGPID</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00112">DEL_WARNSTOPPED</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01463">discard_pipeline()</a>, <a class="el" href="../../da/d05/dispose__cmd_8c_source.html#l00036">dispose_command()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02546">find_last_proc()</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00125">job::flags</a>, <a class="el" href="../../d5/db0/dynlink_8c_source.html#l00036">free</a>, <a class="el" href="../../da/d41/error_8h_source.html#l00079">INTERNAL_DEBUG</a>, <a class="el" href="../../db/dcc/error_8c_source.html#l00256">internal_warning()</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00110">J_ASYNC</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00150">jobstats::j_current</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00146">jobstats::j_firstj</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00105">J_FOREGROUND</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00144">jobstats::j_jobslots</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00154">jobstats::j_lastasync</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00145">jobstats::j_lastj</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00153">jobstats::j_lastmade</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00148">jobstats::j_ndead</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00147">jobstats::j_njobs</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00151">jobstats::j_previous</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00094">JDEAD</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00183">jobs</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00346">jobs_list_frozen</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00175">js</a>, <a class="el" href="../../d9/d14/general_8h_source.html#l00053">NULL</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00123">job::pgrp</a>, <a class="el" href="../../d3/d16/pstree_8c_source.html#l00046">proc::pid</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00122">job::pipe</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02801">process_exit_status()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l03482">reset_current()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01170">reset_job_indices()</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00124">job::state</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00098">STOPPED</a>, <a class="el" href="../../de/d3d/execute__cmd_8c_source.html#l00250">subshell_environment</a>, and <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00121">job::wd</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l01210">cleanup_dead_jobs()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04712">delete_all_jobs()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01265">delete_old_job()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l03269">wait_for_any_job()</a>.</p>

</div>
</div>
<a id="a5b6e7c7a458539929974e288a59a2f38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b6e7c7a458539929974e288a59a2f38">&#9670;&nbsp;</a></span>delete_old_job()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void delete_old_job </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a>&#160;</td>
          <td class="paramname"><em>pid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l01265">1265</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;{</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;  <a class="code" href="../../d3/d3a/jobs_8h.html#d8/d20/structprocess">PROCESS</a> *<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>;</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>;</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160; </div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;  <a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a> = <a class="code" href="../../df/d8e/jobs_8c.html#a99584c8b38b45a70629677a975056374">find_job</a> (<a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, 0, &amp;<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>);</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a> != <a class="code" href="../../d3/d3a/jobs_8h.html#a6eba094b1ac1bc00e5883edd166bd944">NO_JOB</a>)</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;    {</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;      <a class="code" href="../../da/d41/error_8h.html#a1c7d66dc03b5cb6a3a6c2a79bcbf8e4d">INTERNAL_DEBUG</a> ((<span class="stringliteral">&quot;delete_old_job: found pid %d in job %d with state %d&quot;</span>, <a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, <a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>, <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>]-&gt;<a class="code" href="../../d6/d23/wi__stuff_8c.html#a102a30241e29b7ae7a452418431f728d">state</a>));</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d3/d3a/jobs_8h.html#a466620bfa4ee2d285544d9a67a8a337e">JOBSTATE</a> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>) == <a class="code" href="../../d3/d3a/jobs_8h.html#a27f134c9d8392fc50ee339c518707f57acc7e60ddf9078b1521d1adb70bd16f8b">JDEAD</a>)</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#ae6f3e928efd8e712697fe9c5903b7610">delete_job</a> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>, <a class="code" href="../../df/d8e/jobs_8c.html#a7144363c25cc07fb8cd621d1db3f9584">DEL_NOBGPID</a>);</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;    {</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;      <a class="code" href="../../db/dcc/error_8c.html#a419859286a2b95b4a1c8133df4e65e75">internal_debug</a> (<a class="code" href="../../d7/dcd/bashintl_8h.html#a86a239addea586602343007a370bf8ad">_</a>(<span class="stringliteral">&quot;forked pid %d appears in running job %d&quot;</span>), <a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, <a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>+1);</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>)</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;        <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;pid = 0;</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;    }</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;    }</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;}</div>
<div class="ttc" id="ajobs_8c_html_a99584c8b38b45a70629677a975056374"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a99584c8b38b45a70629677a975056374">find_job</a></div><div class="ttdeci">static int find_job(pid_t pid, int alive_only, PROCESS **procp)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l01764">jobs.c:1764</a></div></div>
<div class="ttc" id="ajobs_8h_html_a466620bfa4ee2d285544d9a67a8a337e"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#a466620bfa4ee2d285544d9a67a8a337e">JOBSTATE</a></div><div class="ttdeci">#define JOBSTATE(job)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00095">jobs.h:95</a></div></div>
<div class="ttc" id="awi__stuff_8c_html_a102a30241e29b7ae7a452418431f728d"><div class="ttname"><a href="../../d6/d23/wi__stuff_8c.html#a102a30241e29b7ae7a452418431f728d">state</a></div><div class="ttdeci">static stateenum_t state</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d23/wi__stuff_8c_source.html#l00309">wi_stuff.c:309</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/dcd/bashintl_8h_source.html#l00036">_</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00113">DEL_NOBGPID</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01386">delete_job()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01764">find_job()</a>, <a class="el" href="../../db/dcc/error_8c_source.html#l00301">internal_debug()</a>, <a class="el" href="../../da/d41/error_8h_source.html#l00079">INTERNAL_DEBUG</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00094">JDEAD</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00183">jobs</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00095">JOBSTATE</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00193">NO_JOB</a>, <a class="el" href="../../d8/d64/glob__loop_8c_source.html#l00031">p</a>, <a class="el" href="../../d0/d43/mconf_8c_source.html#l00450">pid</a>, and <a class="el" href="../../d6/d23/wi__stuff_8c_source.html#l00309">state</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l02121">make_child()</a>.</p>

</div>
</div>
<a id="a6e05c5efdbabb700ce1f089aa2208017"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e05c5efdbabb700ce1f089aa2208017">&#9670;&nbsp;</a></span>describe_pid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void describe_pid </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a>&#160;</td>
          <td class="paramname"><em>pid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l01826">1826</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;{</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>;</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;  <a class="code" href="../../d8/d90/sigset__t_8h.html#a9140a5882f847f67b8155c759ac6aa05">sigset_t</a> set, oset;</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160; </div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;  <a class="code" href="../../de/d62/sig_8h.html#a37d156f6ab7c2ade277f9a274314d258">BLOCK_CHILD</a> (set, oset);</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160; </div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;  <a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a> = <a class="code" href="../../df/d8e/jobs_8c.html#a99584c8b38b45a70629677a975056374">find_job</a> (<a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, 0, <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160; </div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a> != <a class="code" href="../../d3/d3a/jobs_8h.html#a6eba094b1ac1bc00e5883edd166bd944">NO_JOB</a>)</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;    <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#ad9291335f34e874c8431285d705bc3aa">fprintf</a> (<a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#a5ce35bd5ba5021fd3b2e951e8f497656">stderr</a>, <span class="stringliteral">&quot;[%d] %ld\n&quot;</span>, <a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a> + 1, (<span class="keywordtype">long</span>)<a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>);</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;    <a class="code" href="../../df/d3a/errlist_8c.html#adca3144dcb7f3b1e4eab979d9d8113e6">programming_error</a> (<a class="code" href="../../d7/dcd/bashintl_8h.html#a86a239addea586602343007a370bf8ad">_</a>(<span class="stringliteral">&quot;describe_pid: %ld: no such pid&quot;</span>), (<span class="keywordtype">long</span>)<a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>);</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160; </div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;  <a class="code" href="../../de/d62/sig_8h.html#aa9262558d91ca8060065606f36167783">UNBLOCK_CHILD</a> (oset);</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;}</div>
<div class="ttc" id="aerrlist_8c_html_adca3144dcb7f3b1e4eab979d9d8113e6"><div class="ttname"><a href="../../df/d3a/errlist_8c.html#adca3144dcb7f3b1e4eab979d9d8113e6">programming_error</a></div><div class="ttdeci">programming_error(char *a, int b)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d3a/errlist_8c_source.html#l00049">errlist.c:49</a></div></div>
<div class="ttc" id="alibc_2include_2stdio_8h_html_a5ce35bd5ba5021fd3b2e951e8f497656"><div class="ttname"><a href="../../dc/d4d/libc_2include_2stdio_8h.html#a5ce35bd5ba5021fd3b2e951e8f497656">stderr</a></div><div class="ttdeci">#define stderr</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4d/libc_2include_2stdio_8h_source.html#l00058">stdio.h:58</a></div></div>
<div class="ttc" id="alibc_2include_2stdio_8h_html_ad9291335f34e874c8431285d705bc3aa"><div class="ttname"><a href="../../dc/d4d/libc_2include_2stdio_8h.html#ad9291335f34e874c8431285d705bc3aa">fprintf</a></div><div class="ttdeci">int fprintf(FILE *stream, const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00097">file.c:97</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/dcd/bashintl_8h_source.html#l00036">_</a>, <a class="el" href="../../de/d62/sig_8h_source.html#l00100">BLOCK_CHILD</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01764">find_job()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00097">fprintf()</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00193">NO_JOB</a>, <a class="el" href="../../d9/d14/general_8h_source.html#l00053">NULL</a>, <a class="el" href="../../d0/d43/mconf_8c_source.html#l00450">pid</a>, <a class="el" href="../../df/d3a/errlist_8c_source.html#l00049">programming_error()</a>, <a class="el" href="../../dc/d4d/libc_2include_2stdio_8h_source.html#l00058">stderr</a>, and <a class="el" href="../../de/d62/sig_8h_source.html#l00101">UNBLOCK_CHILD</a>.</p>

</div>
</div>
<a id="ae076d60db4f63dd44d8093842fd79a4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae076d60db4f63dd44d8093842fd79a4c">&#9670;&nbsp;</a></span>discard_last_procsub_child()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void discard_last_procsub_child </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00453">453</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;{</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;  <a class="code" href="../../d3/d3a/jobs_8h.html#d8/d20/structprocess">PROCESS</a> *disposer;</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;  <a class="code" href="../../d8/d90/sigset__t_8h.html#a9140a5882f847f67b8155c759ac6aa05">sigset_t</a> set, oset;</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160; </div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;  <a class="code" href="../../de/d62/sig_8h.html#a37d156f6ab7c2ade277f9a274314d258">BLOCK_CHILD</a> (set, oset);</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  disposer = <a class="code" href="../../df/d8e/jobs_8c.html#a00b3fcd8506b159c50c98186435d1f13">last_procsub_child</a>;</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#a00b3fcd8506b159c50c98186435d1f13">last_procsub_child</a> = (<a class="code" href="../../d3/d3a/jobs_8h.html#d8/d20/structprocess">PROCESS</a> *)<a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  <a class="code" href="../../de/d62/sig_8h.html#aa9262558d91ca8060065606f36167783">UNBLOCK_CHILD</a> (oset);</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160; </div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  <span class="keywordflow">if</span> (disposer)</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#aefd8badf09efc12aee9dfa1cfaaef024">discard_pipeline</a> (disposer);</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../de/d62/sig_8h_source.html#l00100">BLOCK_CHILD</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01463">discard_pipeline()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00234">last_procsub_child</a>, <a class="el" href="../../d9/d14/general_8h_source.html#l00053">NULL</a>, and <a class="el" href="../../de/d62/sig_8h_source.html#l00101">UNBLOCK_CHILD</a>.</p>

</div>
</div>
<a id="aefd8badf09efc12aee9dfa1cfaaef024"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aefd8badf09efc12aee9dfa1cfaaef024">&#9670;&nbsp;</a></span>discard_pipeline()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int discard_pipeline </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d3a/jobs_8h.html#aefa2ee881236dafa12ac2427bb9c5088">PROCESS</a> *&#160;</td>
          <td class="paramname"><em>chain</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l01463">1463</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;{</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;  <span class="keyword">register</span> <a class="code" href="../../d3/d3a/jobs_8h.html#d8/d20/structprocess">PROCESS</a> *<span class="keyword">this</span>, *<a class="code" href="../../da/d18/readprofile_8c.html#a2f905a9c4868f5f248b12d584a78dfbd">next</a>;</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../d0/d32/dcigettext_8c.html#a58257445f1a929304e537613b62ebb35">n</a>;</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160; </div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;  <span class="keyword">this</span> = <a class="code" href="../../de/dcc/awk_8c.html#a9ad4afc25cc6f9f5d90444710081b250">chain</a>;</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;  <a class="code" href="../../d0/d32/dcigettext_8c.html#a58257445f1a929304e537613b62ebb35">n</a> = 0;</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;  <span class="keywordflow">do</span></div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;    {</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;      <a class="code" href="../../da/d18/readprofile_8c.html#a2f905a9c4868f5f248b12d584a78dfbd">next</a> = this-&gt;<a class="code" href="../../da/d18/readprofile_8c.html#a2f905a9c4868f5f248b12d584a78dfbd">next</a>;</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;      <a class="code" href="../../d9/d14/general_8h.html#ad499b8464a487ec244cf7ac9f389c8e3">FREE</a> (this-&gt;<a class="code" href="../../d6/d90/hush_8c.html#dc/d76/structcommand">command</a>);</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;      <a class="code" href="../../d5/db0/dynlink_8c.html#a2c6efa7679f8cd9f61af96e105017560">free</a> (<span class="keyword">this</span>);</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;      <a class="code" href="../../d0/d32/dcigettext_8c.html#a58257445f1a929304e537613b62ebb35">n</a>++;</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;      <span class="keyword">this</span> = <a class="code" href="../../da/d18/readprofile_8c.html#a2f905a9c4868f5f248b12d584a78dfbd">next</a>;</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;    }</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;  <span class="keywordflow">while</span> (<span class="keyword">this</span> != <a class="code" href="../../de/dcc/awk_8c.html#db/d52/structchain__s">chain</a>);</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160; </div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d0/d32/dcigettext_8c.html#a58257445f1a929304e537613b62ebb35">n</a>;</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;}</div>
<div class="ttc" id="aawk_8c_html_a9ad4afc25cc6f9f5d90444710081b250"><div class="ttname"><a href="../../de/dcc/awk_8c.html#a9ad4afc25cc6f9f5d90444710081b250">chain</a></div><div class="ttdeci">struct chain_s chain</div></div>
<div class="ttc" id="aawk_8c_html_db/d52/structchain__s"><div class="ttname"><a href="../../de/dcc/awk_8c.html#db/d52/structchain__s">chain_s</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcc/awk_8c_source.html#l00133">awk.c:133</a></div></div>
<div class="ttc" id="ageneral_8h_html_ad499b8464a487ec244cf7ac9f389c8e3"><div class="ttname"><a href="../../d9/d14/general_8h.html#ad499b8464a487ec244cf7ac9f389c8e3">FREE</a></div><div class="ttdeci">#define FREE(s)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d14/general_8h_source.html#l00172">general.h:172</a></div></div>
<div class="ttc" id="ahush_8c_html_dc/d76/structcommand"><div class="ttname"><a href="../../d6/d90/hush_8c.html#dc/d76/structcommand">command</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d09/command_8h_source.html#l00197">command.h:197</a></div></div>
<div class="ttc" id="areadprofile_8c_html_a2f905a9c4868f5f248b12d584a78dfbd"><div class="ttname"><a href="../../da/d18/readprofile_8c.html#a2f905a9c4868f5f248b12d584a78dfbd">next</a></div><div class="ttdeci">#define next</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d9/d14/general_8h_source.html#l00172">FREE</a>, <a class="el" href="../../d5/db0/dynlink_8c_source.html#l00036">free</a>, <a class="el" href="../../d0/d32/dcigettext_8c_source.html#l00441">n</a>, and <a class="el" href="../../da/d18/readprofile_8c.html#a2f905a9c4868f5f248b12d584a78dfbd">next</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l00437">cleanup_the_pipeline()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01386">delete_job()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00453">discard_last_procsub_child()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l00497">restore_pipeline()</a>.</p>

</div>
</div>
<a id="a923886e6daaac9b0ff0e27b137e268cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a923886e6daaac9b0ff0e27b137e268cc">&#9670;&nbsp;</a></span>end_job_control()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void end_job_control </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l05012">5012</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l05013"></a><span class="lineno"> 5013</span>&#160;{</div>
<div class="line"><a name="l05014"></a><span class="lineno"> 5014</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a3002cbcd4a652dec2c5cef5ff3da446f">job_control</a>)</div>
<div class="line"><a name="l05015"></a><span class="lineno"> 5015</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#aac172ca161ecd7a5b6baf30e9c239c65">terminate_stopped_jobs</a> ();</div>
<div class="line"><a name="l05016"></a><span class="lineno"> 5016</span>&#160; </div>
<div class="line"><a name="l05017"></a><span class="lineno"> 5017</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a927de0d08067183bd327b538a1b77f73">original_pgrp</a> &gt;= 0 &amp;&amp; <a class="code" href="../../df/d8e/jobs_8c.html#aeb36f80c8f1667339f6f23318ff29b50">terminal_pgrp</a> != <a class="code" href="../../df/d8e/jobs_8c.html#a927de0d08067183bd327b538a1b77f73">original_pgrp</a>)</div>
<div class="line"><a name="l05018"></a><span class="lineno"> 5018</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#a8db3c891f1a77a1b3412544323ae6eb4">give_terminal_to</a> (<a class="code" href="../../df/d8e/jobs_8c.html#a927de0d08067183bd327b538a1b77f73">original_pgrp</a>, 1);</div>
<div class="line"><a name="l05019"></a><span class="lineno"> 5019</span>&#160; </div>
<div class="line"><a name="l05020"></a><span class="lineno"> 5020</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a927de0d08067183bd327b538a1b77f73">original_pgrp</a> &gt;= 0 &amp;&amp; <a class="code" href="../../df/d8e/jobs_8c.html#af35bd0de8c2181231698de03bbdd58ca">setpgid</a> (0, <a class="code" href="../../df/d8e/jobs_8c.html#a927de0d08067183bd327b538a1b77f73">original_pgrp</a>) == 0)</div>
<div class="line"><a name="l05021"></a><span class="lineno"> 5021</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#a12352dc576f1c23274468beca1ccf916">shell_pgrp</a> = <a class="code" href="../../df/d8e/jobs_8c.html#a927de0d08067183bd327b538a1b77f73">original_pgrp</a>;</div>
<div class="line"><a name="l05022"></a><span class="lineno"> 5022</span>&#160;}</div>
<div class="ttc" id="ajobs_8c_html_a3002cbcd4a652dec2c5cef5ff3da446f"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a3002cbcd4a652dec2c5cef5ff3da446f">job_control</a></div><div class="ttdeci">int job_control</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l00222">jobs.c:222</a></div></div>
<div class="ttc" id="ajobs_8c_html_a8db3c891f1a77a1b3412544323ae6eb4"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a8db3c891f1a77a1b3412544323ae6eb4">give_terminal_to</a></div><div class="ttdeci">int give_terminal_to(pid_t pgrp, int force)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l04641">jobs.c:4641</a></div></div>
<div class="ttc" id="ajobs_8c_html_a927de0d08067183bd327b538a1b77f73"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a927de0d08067183bd327b538a1b77f73">original_pgrp</a></div><div class="ttdeci">pid_t original_pgrp</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l00200">jobs.c:200</a></div></div>
<div class="ttc" id="ajobs_8c_html_aac172ca161ecd7a5b6baf30e9c239c65"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#aac172ca161ecd7a5b6baf30e9c239c65">terminate_stopped_jobs</a></div><div class="ttdeci">void terminate_stopped_jobs()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l01643">jobs.c:1643</a></div></div>
<div class="ttc" id="ajobs_8c_html_aeb36f80c8f1667339f6f23318ff29b50"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#aeb36f80c8f1667339f6f23318ff29b50">terminal_pgrp</a></div><div class="ttdeci">pid_t terminal_pgrp</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l00197">jobs.c:197</a></div></div>
<div class="ttc" id="ajobs_8c_html_af35bd0de8c2181231698de03bbdd58ca"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#af35bd0de8c2181231698de03bbdd58ca">setpgid</a></div><div class="ttdeci">#define setpgid(pid, pgrp)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l00354">jobs.c:354</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d8e/jobs_8c_source.html#l04641">give_terminal_to()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00222">job_control</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00200">original_pgrp</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00354">setpgid</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00194">shell_pgrp</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00197">terminal_pgrp</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l01643">terminate_stopped_jobs()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/d4f/shell_8c_source.html#l00988">exit_shell()</a>, <a class="el" href="../../d6/d4f/shell_8c_source.html#l01564">open_shell_script()</a>, and <a class="el" href="../../da/d12/sig_8c_source.html#l00575">termsig_handler()</a>.</p>

</div>
</div>
<a id="a99584c8b38b45a70629677a975056374"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99584c8b38b45a70629677a975056374">&#9670;&nbsp;</a></span>find_job()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int find_job </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a>&#160;</td>
          <td class="paramname"><em>pid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>alive_only</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d3a/jobs_8h.html#aefa2ee881236dafa12ac2427bb9c5088">PROCESS</a> **&#160;</td>
          <td class="paramname"><em>procp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l01764">1764</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;{</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;  <span class="keyword">register</span> <span class="keywordtype">int</span> <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>;</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;  <a class="code" href="../../d3/d3a/jobs_8h.html#d8/d20/structprocess">PROCESS</a> *<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>;</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160; </div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;  <span class="comment">/* XXX could use js.j_firstj here, and should check js.j_lastj */</span></div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> = 0; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> &lt; <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ad107b5818741c0309ebdb7af7318309e">j_jobslots</a>; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>++)</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;    {</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> &lt; <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a41979e2d342c40d347381152156fc26d">j_firstj</a> &amp;&amp; <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>])</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;    <a class="code" href="../../da/d41/error_8h.html#a1c7d66dc03b5cb6a3a6c2a79bcbf8e4d">INTERNAL_DEBUG</a> ((<span class="stringliteral">&quot;find_job: job %d non-null before js.j_firstj (%d)&quot;</span>, <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>, <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a41979e2d342c40d347381152156fc26d">j_firstj</a>));</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> &gt; <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ac29ea4e478fa590943c6f7ae902f3a46">j_lastj</a> &amp;&amp; <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>])</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;    <a class="code" href="../../da/d41/error_8h.html#a1c7d66dc03b5cb6a3a6c2a79bcbf8e4d">INTERNAL_DEBUG</a> ((<span class="stringliteral">&quot;find_job: job %d non-null after js.j_lastj (%d)&quot;</span>, <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>, <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ac29ea4e478fa590943c6f7ae902f3a46">j_lastj</a>));</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160; </div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>])</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;    {</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;      <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> = <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>]-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#a7e5648df5ec2f0d459900325c2cc5816">pipe</a>;</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160; </div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;      <span class="keywordflow">do</span></div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;        {</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;pid == <a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a> &amp;&amp; ((alive_only == 0 &amp;&amp; <a class="code" href="../../d3/d3a/jobs_8h.html#a1a848e9706bd998191db511e100e5ac5">PRECYCLED</a>(<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>) == 0) || <a class="code" href="../../d3/d3a/jobs_8h.html#a4f29476eb81762940d28edc76520c035">PALIVE</a>(<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>)))</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;        {</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;          <span class="keywordflow">if</span> (procp)</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;            *procp = <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>;</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;          <span class="keywordflow">return</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>);</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;        }</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160; </div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;          <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> = <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;next;</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;        }</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;      <span class="keywordflow">while</span> (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> != <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>]-&gt;<a class="code" href="../../d6/d90/hush_8c.html#d8/d53/structpipe">pipe</a>);</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;    }</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;    }</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160; </div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;  <span class="keywordflow">return</span> (<a class="code" href="../../d3/d3a/jobs_8h.html#a6eba094b1ac1bc00e5883edd166bd944">NO_JOB</a>);</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;}</div>
<div class="ttc" id="ajobs_8h_html_a1a848e9706bd998191db511e100e5ac5"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#a1a848e9706bd998191db511e100e5ac5">PRECYCLED</a></div><div class="ttdeci">#define PRECYCLED(p)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00087">jobs.h:87</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dd/d71/gettextP_8h_source.html#l00074">i</a>, <a class="el" href="../../da/d41/error_8h_source.html#l00079">INTERNAL_DEBUG</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00146">jobstats::j_firstj</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00144">jobstats::j_jobslots</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00145">jobstats::j_lastj</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00183">jobs</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00175">js</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00193">NO_JOB</a>, <a class="el" href="../../d8/d64/glob__loop_8c_source.html#l00031">p</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00081">PALIVE</a>, <a class="el" href="../../d0/d43/mconf_8c_source.html#l00450">pid</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00122">job::pipe</a>, and <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00087">PRECYCLED</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l01265">delete_old_job()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01826">describe_pid()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01711">find_pipeline()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01805">get_job_by_pid()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02899">wait_for()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l02586">wait_for_single_pid()</a>.</p>

</div>
</div>
<a id="a758086bb1f3a53e925371b718b1068ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a758086bb1f3a53e925371b718b1068ab">&#9670;&nbsp;</a></span>find_last_pid()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a> find_last_pid </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>job</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>block</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l02567">2567</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;{</div>
<div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;  <a class="code" href="../../d3/d3a/jobs_8h.html#d8/d20/structprocess">PROCESS</a> *<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>;</div>
<div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160; </div>
<div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;  <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> = <a class="code" href="../../df/d8e/jobs_8c.html#a3a439aacb4e64d3b5ec52640311fbdcf">find_last_proc</a> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>, block);</div>
<div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;  <span class="comment">/* Possible race condition here. */</span></div>
<div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;pid;</div>
<div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;}     </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d8e/jobs_8c_source.html#l02546">find_last_proc()</a>, and <a class="el" href="../../d8/d64/glob__loop_8c_source.html#l00031">p</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l04827">mark_dead_jobs_as_notified()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04235">notify_of_job_status()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l03541">start_job()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l03269">wait_for_any_job()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02648">wait_for_background_pids()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l03215">wait_for_job()</a>.</p>

</div>
</div>
<a id="a3a439aacb4e64d3b5ec52640311fbdcf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a439aacb4e64d3b5ec52640311fbdcf">&#9670;&nbsp;</a></span>find_last_proc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d3/d3a/jobs_8h.html#aefa2ee881236dafa12ac2427bb9c5088">PROCESS</a>* find_last_proc </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>job</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>block</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l02546">2546</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;{</div>
<div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;  <span class="keyword">register</span> <a class="code" href="../../d3/d3a/jobs_8h.html#d8/d20/structprocess">PROCESS</a> *<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>;</div>
<div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;  <a class="code" href="../../d8/d90/sigset__t_8h.html#a9140a5882f847f67b8155c759ac6aa05">sigset_t</a> set, oset;</div>
<div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160; </div>
<div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;  <span class="keywordflow">if</span> (block)</div>
<div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;    <a class="code" href="../../de/d62/sig_8h.html#a37d156f6ab7c2ade277f9a274314d258">BLOCK_CHILD</a> (set, oset);</div>
<div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160; </div>
<div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;  <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> = <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>]-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#a7e5648df5ec2f0d459900325c2cc5816">pipe</a>;</div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> &amp;&amp; <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;next != <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>]-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#a7e5648df5ec2f0d459900325c2cc5816">pipe</a>)</div>
<div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;    <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> = <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;next;</div>
<div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160; </div>
<div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;  <span class="keywordflow">if</span> (block)</div>
<div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;    <a class="code" href="../../de/d62/sig_8h.html#aa9262558d91ca8060065606f36167783">UNBLOCK_CHILD</a> (oset);</div>
<div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160; </div>
<div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;  <span class="keywordflow">return</span> (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>);</div>
<div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../de/d62/sig_8h_source.html#l00100">BLOCK_CHILD</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00183">jobs</a>, <a class="el" href="../../d8/d64/glob__loop_8c_source.html#l00031">p</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00122">job::pipe</a>, and <a class="el" href="../../de/d62/sig_8h_source.html#l00101">UNBLOCK_CHILD</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l01386">delete_job()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l02567">find_last_pid()</a>.</p>

</div>
</div>
<a id="a902def40ee6ba9df31a8c4d126229005"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a902def40ee6ba9df31a8c4d126229005">&#9670;&nbsp;</a></span>find_pid_in_pipeline()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d3/d3a/jobs_8h.html#aefa2ee881236dafa12ac2427bb9c5088">PROCESS</a>* find_pid_in_pipeline </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a>&#160;</td>
          <td class="paramname"><em>pid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d3a/jobs_8h.html#aefa2ee881236dafa12ac2427bb9c5088">PROCESS</a> *&#160;</td>
          <td class="paramname"><em>pipeline</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>alive_only</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l01687">1687</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;{</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;  <a class="code" href="../../d3/d3a/jobs_8h.html#d8/d20/structprocess">PROCESS</a> *<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>;</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160; </div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;  <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> = <a class="code" href="../../d1/dbe/ash_8c.html#aa4d0786b62ad8f3eb6b8196eb8aef78d">pipeline</a>;</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;  <span class="keywordflow">do</span></div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;    {</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;      <span class="comment">/* Return it if we found it.  Don&#39;t ever return a recycled pid. */</span></div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;pid == <a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a> &amp;&amp; ((alive_only == 0 &amp;&amp; <a class="code" href="../../d3/d3a/jobs_8h.html#a1a848e9706bd998191db511e100e5ac5">PRECYCLED</a>(<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>) == 0) || <a class="code" href="../../d3/d3a/jobs_8h.html#a4f29476eb81762940d28edc76520c035">PALIVE</a>(<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>)))</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>);</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160; </div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;      <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> = <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;next;</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;    }</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> != <a class="code" href="../../d1/dbe/ash_8c.html#aa4d0786b62ad8f3eb6b8196eb8aef78d">pipeline</a>);</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;  <span class="keywordflow">return</span> ((<a class="code" href="../../d3/d3a/jobs_8h.html#d8/d20/structprocess">PROCESS</a> *)<a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;}</div>
<div class="ttc" id="aash_8c_html_aa4d0786b62ad8f3eb6b8196eb8aef78d"><div class="ttname"><a href="../../d1/dbe/ash_8c.html#aa4d0786b62ad8f3eb6b8196eb8aef78d">pipeline</a></div><div class="ttdeci">static union node * pipeline(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dbe/ash_8c_source.html#l11914">ash.c:11914</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d9/d14/general_8h_source.html#l00053">NULL</a>, <a class="el" href="../../d8/d64/glob__loop_8c_source.html#l00031">p</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00081">PALIVE</a>, <a class="el" href="../../d0/d43/mconf_8c_source.html#l00450">pid</a>, <a class="el" href="../../d1/dbe/ash_8c_source.html#l11914">pipeline()</a>, and <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00087">PRECYCLED</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l01711">find_pipeline()</a>.</p>

</div>
</div>
<a id="a6581f40e1e7657048cbecabb416f13bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6581f40e1e7657048cbecabb416f13bb">&#9670;&nbsp;</a></span>find_pipeline()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d3/d3a/jobs_8h.html#aefa2ee881236dafa12ac2427bb9c5088">PROCESS</a>* find_pipeline </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a>&#160;</td>
          <td class="paramname"><em>pid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>alive_only</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>jobp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l01711">1711</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;{</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>;</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;  <a class="code" href="../../d3/d3a/jobs_8h.html#d8/d20/structprocess">PROCESS</a> *<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>;</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;  <span class="keyword">struct </span><a class="code" href="../../d3/d3a/jobs_8h.html#d8/df7/structpipeline__saver">pipeline_saver</a> *save;</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160; </div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;  <span class="comment">/* See if this process is in the pipeline that we are building. */</span></div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;  <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> = (<a class="code" href="../../d3/d3a/jobs_8h.html#d8/d20/structprocess">PROCESS</a> *)<a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;  <span class="keywordflow">if</span> (jobp)</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;    *jobp = <a class="code" href="../../d3/d3a/jobs_8h.html#a6eba094b1ac1bc00e5883edd166bd944">NO_JOB</a>;</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160; </div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a5efe88eb6aefb268d1259a51812164b2">the_pipeline</a> &amp;&amp; (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> = <a class="code" href="../../df/d8e/jobs_8c.html#a902def40ee6ba9df31a8c4d126229005">find_pid_in_pipeline</a> (<a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, <a class="code" href="../../df/d8e/jobs_8c.html#a5efe88eb6aefb268d1259a51812164b2">the_pipeline</a>, alive_only)))</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>);</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160; </div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;  <span class="comment">/* Is this process in a saved pipeline? */</span></div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;  <span class="keywordflow">for</span> (save = <a class="code" href="../../df/d8e/jobs_8c.html#a60e714219004a4142832cea6d34ebc97">saved_pipeline</a>; save; save = save-&gt;<a class="code" href="../../d3/d3a/jobs_8h.html#a736199ba9d005768c1a764a5da6a69e6">next</a>)</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;    <span class="keywordflow">if</span> (save-&gt;<a class="code" href="../../d3/d3a/jobs_8h.html#a150b4d503a5673894709f96b053de8b2">pipeline</a> &amp;&amp; (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> = <a class="code" href="../../df/d8e/jobs_8c.html#a902def40ee6ba9df31a8c4d126229005">find_pid_in_pipeline</a> (<a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, save-&gt;<a class="code" href="../../d3/d3a/jobs_8h.html#a150b4d503a5673894709f96b053de8b2">pipeline</a>, alive_only)))</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;      <span class="keywordflow">return</span> (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>);</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160; </div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;<span class="preprocessor">#if defined (PROCESS_SUBSTITUTION)</span></div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a5def2bc94cab4967a7897b4591b7a883">procsubs</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a7c6a108d7785bb289461cb156ce96b52">nproc</a> &gt; 0 &amp;&amp; (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> = procsub_search (<a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>)) &amp;&amp; ((alive_only == 0 &amp;&amp; <a class="code" href="../../d3/d3a/jobs_8h.html#a1a848e9706bd998191db511e100e5ac5">PRECYCLED</a>(<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>) == 0) || <a class="code" href="../../d3/d3a/jobs_8h.html#a4f29476eb81762940d28edc76520c035">PALIVE</a>(<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>)))</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>);</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160; </div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;  <a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a> = <a class="code" href="../../df/d8e/jobs_8c.html#a99584c8b38b45a70629677a975056374">find_job</a> (<a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, alive_only, &amp;<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>);</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;  <span class="keywordflow">if</span> (jobp)</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;    *jobp = <a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>;</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;  <span class="keywordflow">return</span> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a> == <a class="code" href="../../d3/d3a/jobs_8h.html#a6eba094b1ac1bc00e5883edd166bd944">NO_JOB</a>) ? (<a class="code" href="../../d3/d3a/jobs_8h.html#d8/d20/structprocess">PROCESS</a> *)<a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> : <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>]-&gt;<a class="code" href="../../d6/d90/hush_8c.html#d8/d53/structpipe">pipe</a>;</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;}</div>
<div class="ttc" id="ajobs_8c_html_a5def2bc94cab4967a7897b4591b7a883"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a5def2bc94cab4967a7897b4591b7a883">procsubs</a></div><div class="ttdeci">struct procchain procsubs</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l00177">jobs.c:180</a></div></div>
<div class="ttc" id="ajobs_8c_html_a60e714219004a4142832cea6d34ebc97"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a60e714219004a4142832cea6d34ebc97">saved_pipeline</a></div><div class="ttdeci">static struct pipeline_saver * saved_pipeline</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l00339">jobs.c:339</a></div></div>
<div class="ttc" id="ajobs_8c_html_a902def40ee6ba9df31a8c4d126229005"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a902def40ee6ba9df31a8c4d126229005">find_pid_in_pipeline</a></div><div class="ttdeci">static PROCESS * find_pid_in_pipeline(pid_t pid, PROCESS *pipeline, int alive_only)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l01687">jobs.c:1687</a></div></div>
<div class="ttc" id="ajobs_8h_html_a7c6a108d7785bb289461cb156ce96b52"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#a7c6a108d7785bb289461cb156ce96b52">procchain::nproc</a></div><div class="ttdeci">int nproc</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00190">jobs.h:190</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d8e/jobs_8c_source.html#l01764">find_job()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01687">find_pid_in_pipeline()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00183">jobs</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00075">pipeline_saver::next</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00193">NO_JOB</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00190">procchain::nproc</a>, <a class="el" href="../../d9/d14/general_8h_source.html#l00053">NULL</a>, <a class="el" href="../../d8/d64/glob__loop_8c_source.html#l00031">p</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00081">PALIVE</a>, <a class="el" href="../../d0/d43/mconf_8c_source.html#l00450">pid</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00074">pipeline_saver::pipeline</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00087">PRECYCLED</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00180">procsubs</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00339">saved_pipeline</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l00219">the_pipeline</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l01748">find_process()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l03665">kill_pid()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l02586">wait_for_single_pid()</a>.</p>

</div>
</div>
<a id="a16d3beacf583f9f0822f8b06b83695fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16d3beacf583f9f0822f8b06b83695fe">&#9670;&nbsp;</a></span>find_process()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d3/d3a/jobs_8h.html#aefa2ee881236dafa12ac2427bb9c5088">PROCESS</a>* find_process </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a>&#160;</td>
          <td class="paramname"><em>pid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>alive_only</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>jobp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l01748">1748</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;{</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;  <a class="code" href="../../d3/d3a/jobs_8h.html#d8/d20/structprocess">PROCESS</a> *<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>;</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160; </div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;  <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> = <a class="code" href="../../df/d8e/jobs_8c.html#a6581f40e1e7657048cbecabb416f13bb">find_pipeline</a> (<a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, alive_only, jobp);</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> &amp;&amp; <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;pid != <a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>)</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;    <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> = <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;next;</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>;</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d8e/jobs_8c_source.html#l01711">find_pipeline()</a>, <a class="el" href="../../d8/d64/glob__loop_8c_source.html#l00031">p</a>, and <a class="el" href="../../d0/d43/mconf_8c_source.html#l00450">pid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l01488">add_process()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l03764">waitchld()</a>.</p>

</div>
</div>
<a id="ac04bd8c6bbeec0e7e6f542d3a8a9f09f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac04bd8c6bbeec0e7e6f542d3a8a9f09f">&#9670;&nbsp;</a></span>freeze_jobs_list()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int freeze_jobs_list </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l04933">4933</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l04934"></a><span class="lineno"> 4934</span>&#160;{</div>
<div class="line"><a name="l04935"></a><span class="lineno"> 4935</span>&#160;  <span class="keywordtype">int</span> o;</div>
<div class="line"><a name="l04936"></a><span class="lineno"> 4936</span>&#160; </div>
<div class="line"><a name="l04937"></a><span class="lineno"> 4937</span>&#160;  o = <a class="code" href="../../df/d8e/jobs_8c.html#a57e47a8425e68a1907ac493cd673ca41">jobs_list_frozen</a>;</div>
<div class="line"><a name="l04938"></a><span class="lineno"> 4938</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#a57e47a8425e68a1907ac493cd673ca41">jobs_list_frozen</a> = 1;</div>
<div class="line"><a name="l04939"></a><span class="lineno"> 4939</span>&#160;  <span class="keywordflow">return</span> o;</div>
<div class="line"><a name="l04940"></a><span class="lineno"> 4940</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d8e/jobs_8c_source.html#l00346">jobs_list_frozen</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d3d/execute__cmd_8c_source.html#l02496">execute_pipeline()</a>.</p>

</div>
</div>
<a id="adfd27f1febc093990e9b072643ecdac7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adfd27f1febc093990e9b072643ecdac7">&#9670;&nbsp;</a></span>get_job_by_pid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int get_job_by_pid </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a>&#160;</td>
          <td class="paramname"><em>pid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>block</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d3a/jobs_8h.html#aefa2ee881236dafa12ac2427bb9c5088">PROCESS</a> **&#160;</td>
          <td class="paramname"><em>procp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l01805">1805</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;{</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>;</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;  <a class="code" href="../../d8/d90/sigset__t_8h.html#a9140a5882f847f67b8155c759ac6aa05">sigset_t</a> set, oset;</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160; </div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;  <span class="keywordflow">if</span> (block)</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;    <a class="code" href="../../de/d62/sig_8h.html#a37d156f6ab7c2ade277f9a274314d258">BLOCK_CHILD</a> (set, oset);</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160; </div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;  <a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a> = <a class="code" href="../../df/d8e/jobs_8c.html#a99584c8b38b45a70629677a975056374">find_job</a> (<a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, 0, procp);</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160; </div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;  <span class="keywordflow">if</span> (block)</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;    <a class="code" href="../../de/d62/sig_8h.html#aa9262558d91ca8060065606f36167783">UNBLOCK_CHILD</a> (oset);</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160; </div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>;</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../de/d62/sig_8h_source.html#l00100">BLOCK_CHILD</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01764">find_job()</a>, <a class="el" href="../../d0/d43/mconf_8c_source.html#l00450">pid</a>, and <a class="el" href="../../de/d62/sig_8h_source.html#l00101">UNBLOCK_CHILD</a>.</p>

</div>
</div>
<a id="a186a35817ae0f49ac740cbae8f598edb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a186a35817ae0f49ac740cbae8f598edb">&#9670;&nbsp;</a></span>get_original_tty_job_signals()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void get_original_tty_job_signals </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l02390">2390</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;{</div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">int</span> fetched = 0;</div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160; </div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;  <span class="keywordflow">if</span> (fetched == 0)</div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;    {</div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d4f/shell_8c.html#ae2c20c1668999fe88f089ad20436f425">interactive_shell</a>)</div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;    {</div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;      <a class="code" href="../../dc/d6f/trap_8c.html#a16eea6a0b6ebfc715568ee23e0ae83b9">set_original_signal</a> (<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#abe65c086e01f0d286b7a785a7e3cdd1a">SIGTSTP</a>, <a class="code" href="../../de/d2b/musl_2include_2signal_8h.html#a27d5dc561093d6243542e6a2465bc0f8">SIG_DFL</a>);</div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;      <a class="code" href="../../dc/d6f/trap_8c.html#a16eea6a0b6ebfc715568ee23e0ae83b9">set_original_signal</a> (<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a2c146e34a6b5a78dfba41cded3331181">SIGTTIN</a>, <a class="code" href="../../de/d2b/musl_2include_2signal_8h.html#a27d5dc561093d6243542e6a2465bc0f8">SIG_DFL</a>);</div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;      <a class="code" href="../../dc/d6f/trap_8c.html#a16eea6a0b6ebfc715568ee23e0ae83b9">set_original_signal</a> (<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a782864287613e2c5c030411fa9c5e9b1">SIGTTOU</a>, <a class="code" href="../../de/d2b/musl_2include_2signal_8h.html#a27d5dc561093d6243542e6a2465bc0f8">SIG_DFL</a>);</div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;    }</div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;    {</div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;      <a class="code" href="../../dc/d6f/trap_8c.html#a166504ddbc13624fc0c82ae1637e3356">get_original_signal</a> (<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#abe65c086e01f0d286b7a785a7e3cdd1a">SIGTSTP</a>);</div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;      <a class="code" href="../../dc/d6f/trap_8c.html#a166504ddbc13624fc0c82ae1637e3356">get_original_signal</a> (<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a2c146e34a6b5a78dfba41cded3331181">SIGTTIN</a>);</div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;      <a class="code" href="../../dc/d6f/trap_8c.html#a166504ddbc13624fc0c82ae1637e3356">get_original_signal</a> (<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a782864287613e2c5c030411fa9c5e9b1">SIGTTOU</a>);</div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;    }</div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;      fetched = 1;</div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;    }</div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;}</div>
<div class="ttc" id="ashell_8c_html_ae2c20c1668999fe88f089ad20436f425"><div class="ttname"><a href="../../d6/d4f/shell_8c.html#ae2c20c1668999fe88f089ad20436f425">interactive_shell</a></div><div class="ttdeci">int interactive_shell</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d4f/shell_8c_source.html#l00142">shell.c:142</a></div></div>
<div class="ttc" id="atrap_8c_html_a166504ddbc13624fc0c82ae1637e3356"><div class="ttname"><a href="../../dc/d6f/trap_8c.html#a166504ddbc13624fc0c82ae1637e3356">get_original_signal</a></div><div class="ttdeci">void get_original_signal(int sig)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d6f/trap_8c_source.html#l00868">trap.c:868</a></div></div>
<div class="ttc" id="atrap_8c_html_a16eea6a0b6ebfc715568ee23e0ae83b9"><div class="ttname"><a href="../../dc/d6f/trap_8c.html#a16eea6a0b6ebfc715568ee23e0ae83b9">set_original_signal</a></div><div class="ttdeci">void set_original_signal(int sig, SigHandler *handler)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d6f/trap_8c_source.html#l00886">trap.c:886</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dc/d6f/trap_8c_source.html#l00868">get_original_signal()</a>, <a class="el" href="../../d6/d4f/shell_8c_source.html#l00142">interactive_shell</a>, <a class="el" href="../../dc/d6f/trap_8c_source.html#l00886">set_original_signal()</a>, <a class="el" href="../../de/d2b/musl_2include_2signal_8h_source.html#l00284">SIG_DFL</a>, <a class="el" href="../../df/dff/libc_2include_2signal_8h_source.html#l00067">SIGTSTP</a>, <a class="el" href="../../df/dff/libc_2include_2signal_8h_source.html#l00070">SIGTTIN</a>, and <a class="el" href="../../df/dff/libc_2include_2signal_8h_source.html#l00073">SIGTTOU</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d6f/trap_8c_source.html#l00147">initialize_traps()</a>.</p>

</div>
</div>
<a id="a37d6118360319f23c01a9a326ad32906"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37d6118360319f23c01a9a326ad32906">&#9670;&nbsp;</a></span>get_tty_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int get_tty_state </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l02471">2471</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;{</div>
<div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;  <span class="keywordtype">int</span> tty;</div>
<div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160; </div>
<div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;  tty = <a class="code" href="../../df/d8e/jobs_8c.html#a23dc422a1eed633a3a9ce331720ca21c">input_tty</a> ();</div>
<div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;  <span class="keywordflow">if</span> (tty != -1)</div>
<div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;    {</div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;<span class="preprocessor">#if defined (NEW_TTY_DRIVER)</span></div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;      <a class="code" href="../../d3/de9/stropts_8h.html#ae3a230c65883ec8edc50e3a09ca80003">ioctl</a> (tty, <a class="code" href="../../d8/d18/arch_2mips_2bits_2ioctl_8h.html#a48cdfd4dc0eadfd6694466b21b232929">TIOCGETP</a>, &amp;<a class="code" href="../../df/d8e/jobs_8c.html#ad9fe5481268cb2aed5102ece6ef18bbb">shell_tty_info</a>);</div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;      <a class="code" href="../../d3/de9/stropts_8h.html#ae3a230c65883ec8edc50e3a09ca80003">ioctl</a> (tty, <a class="code" href="../../d2/da9/arch_2powerpc_2bits_2ioctl_8h.html#a3ff47c5ce57d6e2c4659c188a93d2958">TIOCGETC</a>, &amp;shell_tchars);</div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;      <a class="code" href="../../d3/de9/stropts_8h.html#ae3a230c65883ec8edc50e3a09ca80003">ioctl</a> (tty, <a class="code" href="../../d8/d18/arch_2mips_2bits_2ioctl_8h.html#a06757652ccf3efa59a51986e5b4d3303">TIOCGLTC</a>, &amp;shell_ltchars);</div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* NEW_TTY_DRIVER */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160; </div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;<span class="preprocessor">#if defined (TERMIO_TTY_DRIVER)</span></div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;      <a class="code" href="../../d3/de9/stropts_8h.html#ae3a230c65883ec8edc50e3a09ca80003">ioctl</a> (tty, <a class="code" href="../../d1/d11/arch_2generic_2bits_2ioctl_8h.html#a1616db893530ec44fc172d29cc33daa5">TCGETA</a>, &amp;<a class="code" href="../../df/d8e/jobs_8c.html#ad9fe5481268cb2aed5102ece6ef18bbb">shell_tty_info</a>);</div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* TERMIO_TTY_DRIVER */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160; </div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;<span class="preprocessor">#if defined (TERMIOS_TTY_DRIVER)</span></div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d2/d4e/include_2termios_8h.html#aa589fa770349629dbf3a029336dd85f5">tcgetattr</a> (tty, &amp;<a class="code" href="../../df/d8e/jobs_8c.html#ad9fe5481268cb2aed5102ece6ef18bbb">shell_tty_info</a>) &lt; 0)</div>
<div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;    {</div>
<div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;<span class="preprocessor">#if 0</span></div>
<div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;      <span class="comment">/* Only print an error message if we&#39;re really interactive at</span></div>
<div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;<span class="comment">         this time. */</span></div>
<div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d4f/shell_8c.html#aeb39d5d8ddd4957f1b01720fa0e37e36">interactive</a>)</div>
<div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;        <a class="code" href="../../db/dcc/error_8c.html#a3dc8bd9b2e1ecb245420a3dba9f5e8bd">sys_error</a> (<span class="stringliteral">&quot;[%ld: %d (%d)] tcgetattr&quot;</span>, (<span class="keywordtype">long</span>)<a class="code" href="../../d3/d3a/jobs_8h.html#add1dc6545057b7f1c7f91352536fb060">getpid</a> (), <a class="code" href="../../d5/de8/variables_8c.html#a644037bd2caea16e9fd85350bd488ecf">shell_level</a>, tty);</div>
<div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;      <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;    }</div>
<div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* TERMIOS_TTY_DRIVER */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a27ab938bc70e7696ed8fc9e10a4834c4">check_window_size</a>)</div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;    <a class="code" href="../../d1/d6e/winsize_8c.html#a5a1239248294d975c5ac1b32b8f2bae7">get_new_window_size</a> (0, (<span class="keywordtype">int</span> *)0, (<span class="keywordtype">int</span> *)0);</div>
<div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;    }</div>
<div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;}</div>
<div class="ttc" id="aarch_2generic_2bits_2ioctl_8h_html_a1616db893530ec44fc172d29cc33daa5"><div class="ttname"><a href="../../d1/d11/arch_2generic_2bits_2ioctl_8h.html#a1616db893530ec44fc172d29cc33daa5">TCGETA</a></div><div class="ttdeci">#define TCGETA</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d11/arch_2generic_2bits_2ioctl_8h_source.html#l00015">ioctl.h:15</a></div></div>
<div class="ttc" id="aarch_2mips_2bits_2ioctl_8h_html_a06757652ccf3efa59a51986e5b4d3303"><div class="ttname"><a href="../../d8/d18/arch_2mips_2bits_2ioctl_8h.html#a06757652ccf3efa59a51986e5b4d3303">TIOCGLTC</a></div><div class="ttdeci">#define TIOCGLTC</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d18/arch_2mips_2bits_2ioctl_8h_source.html#l00045">ioctl.h:45</a></div></div>
<div class="ttc" id="aarch_2mips_2bits_2ioctl_8h_html_a48cdfd4dc0eadfd6694466b21b232929"><div class="ttname"><a href="../../d8/d18/arch_2mips_2bits_2ioctl_8h.html#a48cdfd4dc0eadfd6694466b21b232929">TIOCGETP</a></div><div class="ttdeci">#define TIOCGETP</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d18/arch_2mips_2bits_2ioctl_8h_source.html#l00054">ioctl.h:54</a></div></div>
<div class="ttc" id="aarch_2powerpc_2bits_2ioctl_8h_html_a3ff47c5ce57d6e2c4659c188a93d2958"><div class="ttname"><a href="../../d2/da9/arch_2powerpc_2bits_2ioctl_8h.html#a3ff47c5ce57d6e2c4659c188a93d2958">TIOCGETC</a></div><div class="ttdeci">#define TIOCGETC</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da9/arch_2powerpc_2bits_2ioctl_8h_source.html#l00023">ioctl.h:23</a></div></div>
<div class="ttc" id="aerror_8c_html_a3dc8bd9b2e1ecb245420a3dba9f5e8bd"><div class="ttname"><a href="../../db/dcc/error_8c.html#a3dc8bd9b2e1ecb245420a3dba9f5e8bd">sys_error</a></div><div class="ttdeci">void sys_error(char *format, va_alist) const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dcc/error_8c_source.html#l00327">error.c:327</a></div></div>
<div class="ttc" id="ainclude_2termios_8h_html_aa589fa770349629dbf3a029336dd85f5"><div class="ttname"><a href="../../d2/d4e/include_2termios_8h.html#aa589fa770349629dbf3a029336dd85f5">tcgetattr</a></div><div class="ttdeci">int tcgetattr(int, struct termios *)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/df9/tcgetattr_8c_source.html#l00004">tcgetattr.c:4</a></div></div>
<div class="ttc" id="ajobs_8c_html_a23dc422a1eed633a3a9ce331720ca21c"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a23dc422a1eed633a3a9ce331720ca21c">input_tty</a></div><div class="ttdeci">#define input_tty()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l02467">jobs.c:2467</a></div></div>
<div class="ttc" id="ajobs_8c_html_a27ab938bc70e7696ed8fc9e10a4834c4"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a27ab938bc70e7696ed8fc9e10a4834c4">check_window_size</a></div><div class="ttdeci">int check_window_size</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l00232">jobs.c:232</a></div></div>
<div class="ttc" id="ajobs_8c_html_ad9fe5481268cb2aed5102ece6ef18bbb"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#ad9fe5481268cb2aed5102ece6ef18bbb">shell_tty_info</a></div><div class="ttdeci">static TTYSTRUCT shell_tty_info</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l02416">jobs.c:2416</a></div></div>
<div class="ttc" id="ajobs_8h_html_add1dc6545057b7f1c7f91352536fb060"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#add1dc6545057b7f1c7f91352536fb060">getpid</a></div><div class="ttdeci">pid_t getpid()</div></div>
<div class="ttc" id="ashell_8c_html_aeb39d5d8ddd4957f1b01720fa0e37e36"><div class="ttname"><a href="../../d6/d4f/shell_8c.html#aeb39d5d8ddd4957f1b01720fa0e37e36">interactive</a></div><div class="ttdeci">int interactive</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d4f/shell_8c_source.html#l00139">shell.c:139</a></div></div>
<div class="ttc" id="astropts_8h_html_ae3a230c65883ec8edc50e3a09ca80003"><div class="ttname"><a href="../../d3/de9/stropts_8h.html#ae3a230c65883ec8edc50e3a09ca80003">ioctl</a></div><div class="ttdeci">int ioctl(int, int,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d32/ioctl_8c_source.html#l00128">ioctl.c:128</a></div></div>
<div class="ttc" id="avariables_8c_html_a644037bd2caea16e9fd85350bd488ecf"><div class="ttname"><a href="../../d5/de8/variables_8c.html#a644037bd2caea16e9fd85350bd488ecf">shell_level</a></div><div class="ttdeci">int shell_level</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/de8/variables_8c_source.html#l00171">variables.c:171</a></div></div>
<div class="ttc" id="awinsize_8c_html_a5a1239248294d975c5ac1b32b8f2bae7"><div class="ttname"><a href="../../d1/d6e/winsize_8c.html#a5a1239248294d975c5ac1b32b8f2bae7">get_new_window_size</a></div><div class="ttdeci">void get_new_window_size(int from_sig, int *rp, int *cp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d6e/winsize_8c_source.html#l00081">winsize.c:81</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d8e/jobs_8c_source.html#l00232">check_window_size</a>, <a class="el" href="../../d1/d6e/winsize_8c_source.html#l00081">get_new_window_size()</a>, <a class="el" href="../../d3/d3a/jobs_8h.html#add1dc6545057b7f1c7f91352536fb060">getpid()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02467">input_tty</a>, <a class="el" href="../../d6/d4f/shell_8c_source.html#l00139">interactive</a>, <a class="el" href="../../dc/d32/ioctl_8c_source.html#l00128">ioctl()</a>, <a class="el" href="../../d5/de8/variables_8c_source.html#l00171">shell_level</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02416">shell_tty_info</a>, <a class="el" href="../../db/dcc/error_8c_source.html#l00327">sys_error()</a>, <a class="el" href="../../d1/d11/arch_2generic_2bits_2ioctl_8h_source.html#l00015">TCGETA</a>, <a class="el" href="../../dd/df9/tcgetattr_8c_source.html#l00004">tcgetattr()</a>, <a class="el" href="../../d2/da9/arch_2powerpc_2bits_2ioctl_8h_source.html#l00023">TIOCGETC</a>, <a class="el" href="../../d8/d18/arch_2mips_2bits_2ioctl_8h_source.html#l00054">TIOCGETP</a>, and <a class="el" href="../../d8/d18/arch_2mips_2bits_2ioctl_8h_source.html#l00045">TIOCGLTC</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l04370">initialize_job_control()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l03541">start_job()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l02899">wait_for()</a>.</p>

</div>
</div>
<a id="a8db3c891f1a77a1b3412544323ae6eb4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8db3c891f1a77a1b3412544323ae6eb4">&#9670;&nbsp;</a></span>give_terminal_to()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int give_terminal_to </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a>&#160;</td>
          <td class="paramname"><em>pgrp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>force</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l04641">4641</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l04644"></a><span class="lineno"> 4644</span>&#160;{</div>
<div class="line"><a name="l04645"></a><span class="lineno"> 4645</span>&#160;  <a class="code" href="../../d8/d90/sigset__t_8h.html#a9140a5882f847f67b8155c759ac6aa05">sigset_t</a> set, oset;</div>
<div class="line"><a name="l04646"></a><span class="lineno"> 4646</span>&#160;  <span class="keywordtype">int</span> r, e;</div>
<div class="line"><a name="l04647"></a><span class="lineno"> 4647</span>&#160; </div>
<div class="line"><a name="l04648"></a><span class="lineno"> 4648</span>&#160;  r = 0;</div>
<div class="line"><a name="l04649"></a><span class="lineno"> 4649</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a3002cbcd4a652dec2c5cef5ff3da446f">job_control</a> || <a class="code" href="../../dc/d4b/bash_2examples_2loadables_2rm_8c.html#a52de43b6faa0d9601f10db8b3826f11a">force</a>)</div>
<div class="line"><a name="l04650"></a><span class="lineno"> 4650</span>&#160;    {</div>
<div class="line"><a name="l04651"></a><span class="lineno"> 4651</span>&#160;      <a class="code" href="../../db/d82/sigemptyset_8c.html#a5925352f90eb589393274fa0376d7def">sigemptyset</a> (&amp;set);</div>
<div class="line"><a name="l04652"></a><span class="lineno"> 4652</span>&#160;      <a class="code" href="../../d1/d7b/sigaddset_8c.html#aba080a9ab72ac6d079ff0bf8ac9b23f4">sigaddset</a> (&amp;set, <a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a782864287613e2c5c030411fa9c5e9b1">SIGTTOU</a>);</div>
<div class="line"><a name="l04653"></a><span class="lineno"> 4653</span>&#160;      <a class="code" href="../../d1/d7b/sigaddset_8c.html#aba080a9ab72ac6d079ff0bf8ac9b23f4">sigaddset</a> (&amp;set, <a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a2c146e34a6b5a78dfba41cded3331181">SIGTTIN</a>);</div>
<div class="line"><a name="l04654"></a><span class="lineno"> 4654</span>&#160;      <a class="code" href="../../d1/d7b/sigaddset_8c.html#aba080a9ab72ac6d079ff0bf8ac9b23f4">sigaddset</a> (&amp;set, <a class="code" href="../../df/dff/libc_2include_2signal_8h.html#abe65c086e01f0d286b7a785a7e3cdd1a">SIGTSTP</a>);</div>
<div class="line"><a name="l04655"></a><span class="lineno"> 4655</span>&#160;      <a class="code" href="../../d1/d7b/sigaddset_8c.html#aba080a9ab72ac6d079ff0bf8ac9b23f4">sigaddset</a> (&amp;set, <a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a0e63521a64cc8bc2b91d36a87d32c9f8">SIGCHLD</a>);</div>
<div class="line"><a name="l04656"></a><span class="lineno"> 4656</span>&#160;      <a class="code" href="../../db/d82/sigemptyset_8c.html#a5925352f90eb589393274fa0376d7def">sigemptyset</a> (&amp;oset);</div>
<div class="line"><a name="l04657"></a><span class="lineno"> 4657</span>&#160;      <a class="code" href="../../da/d12/sig_8c.html#a011fc3b4395063b580099bf602135a22">sigprocmask</a> (<a class="code" href="../../de/d62/sig_8h.html#a927f6ae16379576d638006c7498ac5d7">SIG_BLOCK</a>, &amp;set, &amp;oset);</div>
<div class="line"><a name="l04658"></a><span class="lineno"> 4658</span>&#160; </div>
<div class="line"><a name="l04659"></a><span class="lineno"> 4659</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a701bcb628c909e9932c9f53c133be6bf">tcsetpgrp</a> (<a class="code" href="../../df/d8e/jobs_8c.html#ae43d281c5f91cb3d7ad00fc46971b4da">shell_tty</a>, pgrp) &lt; 0)</div>
<div class="line"><a name="l04660"></a><span class="lineno"> 4660</span>&#160;    {</div>
<div class="line"><a name="l04661"></a><span class="lineno"> 4661</span>&#160;      <span class="comment">/* Maybe we should print an error message? */</span></div>
<div class="line"><a name="l04662"></a><span class="lineno"> 4662</span>&#160;<span class="preprocessor">#if 0</span></div>
<div class="line"><a name="l04663"></a><span class="lineno"> 4663</span>&#160;      <a class="code" href="../../db/dcc/error_8c.html#a3dc8bd9b2e1ecb245420a3dba9f5e8bd">sys_error</a> (<span class="stringliteral">&quot;tcsetpgrp(%d) failed: pid %ld to pgrp %ld&quot;</span>,</div>
<div class="line"><a name="l04664"></a><span class="lineno"> 4664</span>&#160;        <a class="code" href="../../df/d8e/jobs_8c.html#ae43d281c5f91cb3d7ad00fc46971b4da">shell_tty</a>, (<span class="keywordtype">long</span>)<a class="code" href="../../d3/d3a/jobs_8h.html#add1dc6545057b7f1c7f91352536fb060">getpid</a>(), (<span class="keywordtype">long</span>)pgrp);</div>
<div class="line"><a name="l04665"></a><span class="lineno"> 4665</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l04666"></a><span class="lineno"> 4666</span>&#160;      r = -1;</div>
<div class="line"><a name="l04667"></a><span class="lineno"> 4667</span>&#160;      e = <a class="code" href="../../df/d8e/jobs_8c.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>;</div>
<div class="line"><a name="l04668"></a><span class="lineno"> 4668</span>&#160;    }</div>
<div class="line"><a name="l04669"></a><span class="lineno"> 4669</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l04670"></a><span class="lineno"> 4670</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#aeb36f80c8f1667339f6f23318ff29b50">terminal_pgrp</a> = pgrp;</div>
<div class="line"><a name="l04671"></a><span class="lineno"> 4671</span>&#160;      <a class="code" href="../../da/d12/sig_8c.html#a011fc3b4395063b580099bf602135a22">sigprocmask</a> (<a class="code" href="../../de/d62/sig_8h.html#a37750b78b7ae75fe02ad26e70f6cc845">SIG_SETMASK</a>, &amp;oset, (<a class="code" href="../../d8/d90/sigset__t_8h.html#a9140a5882f847f67b8155c759ac6aa05">sigset_t</a> *)<a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l04672"></a><span class="lineno"> 4672</span>&#160;    }</div>
<div class="line"><a name="l04673"></a><span class="lineno"> 4673</span>&#160; </div>
<div class="line"><a name="l04674"></a><span class="lineno"> 4674</span>&#160;  <span class="keywordflow">if</span> (r == -1)</div>
<div class="line"><a name="l04675"></a><span class="lineno"> 4675</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> = e;</div>
<div class="line"><a name="l04676"></a><span class="lineno"> 4676</span>&#160; </div>
<div class="line"><a name="l04677"></a><span class="lineno"> 4677</span>&#160;  <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l04678"></a><span class="lineno"> 4678</span>&#160;}</div>
<div class="ttc" id="abash_2examples_2loadables_2rm_8c_html_a52de43b6faa0d9601f10db8b3826f11a"><div class="ttname"><a href="../../dc/d4b/bash_2examples_2loadables_2rm_8c.html#a52de43b6faa0d9601f10db8b3826f11a">force</a></div><div class="ttdeci">static int force</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4b/bash_2examples_2loadables_2rm_8c_source.html#l00039">rm.c:39</a></div></div>
<div class="ttc" id="ajobs_8c_html_a701bcb628c909e9932c9f53c133be6bf"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a701bcb628c909e9932c9f53c133be6bf">tcsetpgrp</a></div><div class="ttdeci">#define tcsetpgrp(fd, pgrp)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l00355">jobs.c:355</a></div></div>
<div class="ttc" id="ajobs_8c_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="ajobs_8c_html_ae43d281c5f91cb3d7ad00fc46971b4da"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#ae43d281c5f91cb3d7ad00fc46971b4da">shell_tty</a></div><div class="ttdeci">int shell_tty</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l00191">jobs.c:191</a></div></div>
<div class="ttc" id="alibc_2include_2signal_8h_html_a0e63521a64cc8bc2b91d36a87d32c9f8"><div class="ttname"><a href="../../df/dff/libc_2include_2signal_8h.html#a0e63521a64cc8bc2b91d36a87d32c9f8">SIGCHLD</a></div><div class="ttdeci">#define SIGCHLD</div><div class="ttdoc">Child stopped or terminated.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dff/libc_2include_2signal_8h_source.html#l00058">signal.h:58</a></div></div>
<div class="ttc" id="asig_8c_html_a011fc3b4395063b580099bf602135a22"><div class="ttname"><a href="../../da/d12/sig_8c.html#a011fc3b4395063b580099bf602135a22">sigprocmask</a></div><div class="ttdeci">sigprocmask(int operation, int *newset, int *oldset)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d12/sig_8c_source.html#l00762">sig.c:762</a></div></div>
<div class="ttc" id="asig_8h_html_a37750b78b7ae75fe02ad26e70f6cc845"><div class="ttname"><a href="../../de/d62/sig_8h.html#a37750b78b7ae75fe02ad26e70f6cc845">SIG_SETMASK</a></div><div class="ttdeci">#define SIG_SETMASK</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d62/sig_8h_source.html#l00059">sig.h:59</a></div></div>
<div class="ttc" id="asig_8h_html_a927f6ae16379576d638006c7498ac5d7"><div class="ttname"><a href="../../de/d62/sig_8h.html#a927f6ae16379576d638006c7498ac5d7">SIG_BLOCK</a></div><div class="ttdeci">#define SIG_BLOCK</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d62/sig_8h_source.html#l00058">sig.h:58</a></div></div>
<div class="ttc" id="asigaddset_8c_html_aba080a9ab72ac6d079ff0bf8ac9b23f4"><div class="ttname"><a href="../../d1/d7b/sigaddset_8c.html#aba080a9ab72ac6d079ff0bf8ac9b23f4">sigaddset</a></div><div class="ttdeci">int sigaddset(sigset_t *set, int sig)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d7b/sigaddset_8c_source.html#l00004">sigaddset.c:4</a></div></div>
<div class="ttc" id="asigemptyset_8c_html_a5925352f90eb589393274fa0376d7def"><div class="ttname"><a href="../../db/d82/sigemptyset_8c.html#a5925352f90eb589393274fa0376d7def">sigemptyset</a></div><div class="ttdeci">int sigemptyset(sigset_t *set)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d82/sigemptyset_8c_source.html#l00004">sigemptyset.c:4</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d8e/jobs_8c.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../dc/d4b/bash_2examples_2loadables_2rm_8c_source.html#l00039">force</a>, <a class="el" href="../../d3/d3a/jobs_8h.html#add1dc6545057b7f1c7f91352536fb060">getpid()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00222">job_control</a>, <a class="el" href="../../d9/d14/general_8h_source.html#l00053">NULL</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00191">shell_tty</a>, <a class="el" href="../../de/d62/sig_8h_source.html#l00058">SIG_BLOCK</a>, <a class="el" href="../../de/d62/sig_8h_source.html#l00059">SIG_SETMASK</a>, <a class="el" href="../../d1/d7b/sigaddset_8c_source.html#l00004">sigaddset()</a>, <a class="el" href="../../df/dff/libc_2include_2signal_8h_source.html#l00058">SIGCHLD</a>, <a class="el" href="../../db/d82/sigemptyset_8c_source.html#l00004">sigemptyset()</a>, <a class="el" href="../../da/d12/sig_8c_source.html#l00762">sigprocmask()</a>, <a class="el" href="../../df/dff/libc_2include_2signal_8h_source.html#l00067">SIGTSTP</a>, <a class="el" href="../../df/dff/libc_2include_2signal_8h_source.html#l00070">SIGTTIN</a>, <a class="el" href="../../df/dff/libc_2include_2signal_8h_source.html#l00073">SIGTTOU</a>, <a class="el" href="../../db/dcc/error_8c_source.html#l00327">sys_error()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00355">tcsetpgrp</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l00197">terminal_pgrp</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l05012">end_job_control()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04370">initialize_job_control()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02121">make_child()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04683">maybe_give_terminal_to()</a>, <a class="el" href="../../db/dcc/error_8c_source.html#l00142">programming_error()</a>, <a class="el" href="../../dc/d6f/trap_8c_source.html#l01183">run_debug_trap()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04623">sigstop_sighandler()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l03541">start_job()</a>, <a class="el" href="../../da/d12/sig_8c_source.html#l00401">throw_to_top_level()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l02899">wait_for()</a>.</p>

</div>
</div>
<a id="ac9399fb7055be9b3b9aeb362c96a53f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9399fb7055be9b3b9aeb362c96a53f7">&#9670;&nbsp;</a></span>hangup_all_jobs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void hangup_all_jobs </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l01661">1661</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;{</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;  <span class="keyword">register</span> <span class="keywordtype">int</span> <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>;</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160; </div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;  <span class="comment">/* XXX could use js.j_firstj here */</span></div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> = 0; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> &lt; <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ad107b5818741c0309ebdb7af7318309e">j_jobslots</a>; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>++)</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;    {</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>])</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;    {</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;      <span class="keywordflow">if</span>  (<a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>]-&gt;<a class="code" href="../../db/d66/dumpkmap_8c.html#abb0829cce9dd20a40ae0d86890ae85c6">flags</a> &amp; <a class="code" href="../../d3/d3a/jobs_8h.html#aa4437cbff50585ca7c615cafd558cc8f">J_NOHUP</a>)</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;      <a class="code" href="../../d8/d8d/nojobs_8c.html#ac8c6f4edd72509256c94b90c17c95092">killpg</a> (<a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>]-&gt;pgrp, <a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a136c64ec2d1306de745e39d6aee362ca">SIGHUP</a>);</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d3/d3a/jobs_8h.html#adc39613d1152c030190012a614856c69">STOPPED</a> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>))</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;        <a class="code" href="../../d8/d8d/nojobs_8c.html#ac8c6f4edd72509256c94b90c17c95092">killpg</a> (<a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>]-&gt;pgrp, <a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a024f43063003e753afc6cca1acd6e104">SIGCONT</a>);</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;    }</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;    }</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;}</div>
<div class="ttc" id="adumpkmap_8c_html_abb0829cce9dd20a40ae0d86890ae85c6"><div class="ttname"><a href="../../db/d66/dumpkmap_8c.html#abb0829cce9dd20a40ae0d86890ae85c6">flags</a></div><div class="ttdeci">#define flags</div></div>
<div class="ttc" id="ajobs_8h_html_aa4437cbff50585ca7c615cafd558cc8f"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#aa4437cbff50585ca7c615cafd558cc8f">J_NOHUP</a></div><div class="ttdeci">#define J_NOHUP</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00108">jobs.h:108</a></div></div>
<div class="ttc" id="alibc_2include_2signal_8h_html_a024f43063003e753afc6cca1acd6e104"><div class="ttname"><a href="../../df/dff/libc_2include_2signal_8h.html#a024f43063003e753afc6cca1acd6e104">SIGCONT</a></div><div class="ttdeci">#define SIGCONT</div><div class="ttdoc">Continue if stopped.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dff/libc_2include_2signal_8h_source.html#l00061">signal.h:61</a></div></div>
<div class="ttc" id="alibc_2include_2signal_8h_html_a136c64ec2d1306de745e39d6aee362ca"><div class="ttname"><a href="../../df/dff/libc_2include_2signal_8h.html#a136c64ec2d1306de745e39d6aee362ca">SIGHUP</a></div><div class="ttdeci">#define SIGHUP</div><div class="ttdoc">Hangup detected on controlling or death of controlling process.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dff/libc_2include_2signal_8h_source.html#l00010">signal.h:10</a></div></div>
<div class="ttc" id="anojobs_8c_html_ac8c6f4edd72509256c94b90c17c95092"><div class="ttname"><a href="../../d8/d8d/nojobs_8c.html#ac8c6f4edd72509256c94b90c17c95092">killpg</a></div><div class="ttdeci">#define killpg(pg, sig)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8d/nojobs_8c_source.html#l00057">nojobs.c:57</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../db/d66/dumpkmap_8c.html#abb0829cce9dd20a40ae0d86890ae85c6">flags</a>, <a class="el" href="../../dd/d71/gettextP_8h_source.html#l00074">i</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00144">jobstats::j_jobslots</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00108">J_NOHUP</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00183">jobs</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00175">js</a>, <a class="el" href="../../d8/d8d/nojobs_8c_source.html#l00057">killpg</a>, <a class="el" href="../../df/dff/libc_2include_2signal_8h_source.html#l00061">SIGCONT</a>, <a class="el" href="../../df/dff/libc_2include_2signal_8h_source.html#l00010">SIGHUP</a>, and <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00098">STOPPED</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/d4f/shell_8c_source.html#l00988">exit_shell()</a>, and <a class="el" href="../../da/d12/sig_8c_source.html#l00575">termsig_handler()</a>.</p>

</div>
</div>
<a id="a0b224dea42fc99fc8f75137c74d10d8c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b224dea42fc99fc8f75137c74d10d8c">&#9670;&nbsp;</a></span>ignore_tty_job_signals()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ignore_tty_job_signals </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l02358">2358</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;{</div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;  <a class="code" href="../../de/d62/sig_8h.html#aefdb4e4f01f2aa4133f26dbabcc8358b">set_signal_handler</a> (<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#abe65c086e01f0d286b7a785a7e3cdd1a">SIGTSTP</a>, <a class="code" href="../../de/d2b/musl_2include_2signal_8h.html#acf0e499b0ac946b366b4f47a3b3e8b9e">SIG_IGN</a>);</div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;  <a class="code" href="../../de/d62/sig_8h.html#aefdb4e4f01f2aa4133f26dbabcc8358b">set_signal_handler</a> (<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a2c146e34a6b5a78dfba41cded3331181">SIGTTIN</a>, <a class="code" href="../../de/d2b/musl_2include_2signal_8h.html#acf0e499b0ac946b366b4f47a3b3e8b9e">SIG_IGN</a>);</div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;  <a class="code" href="../../de/d62/sig_8h.html#aefdb4e4f01f2aa4133f26dbabcc8358b">set_signal_handler</a> (<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a782864287613e2c5c030411fa9c5e9b1">SIGTTOU</a>, <a class="code" href="../../de/d2b/musl_2include_2signal_8h.html#acf0e499b0ac946b366b4f47a3b3e8b9e">SIG_IGN</a>);</div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../de/d62/sig_8h_source.html#l00043">set_signal_handler</a>, <a class="el" href="../../de/d2b/musl_2include_2signal_8h_source.html#l00285">SIG_IGN</a>, <a class="el" href="../../df/dff/libc_2include_2signal_8h_source.html#l00067">SIGTSTP</a>, <a class="el" href="../../df/dff/libc_2include_2signal_8h_source.html#l00070">SIGTTIN</a>, and <a class="el" href="../../df/dff/libc_2include_2signal_8h_source.html#l00073">SIGTTOU</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l02121">make_child()</a>.</p>

</div>
</div>
<a id="a1f9d98a5ac1e452fa40b1ca93285843a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f9d98a5ac1e452fa40b1ca93285843a">&#9670;&nbsp;</a></span>init_job_stats()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void init_job_stats </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00373">373</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;{</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a> = <a class="code" href="../../df/d8e/jobs_8c.html#a00a528c63ad265bc45f9dd8892147fd1">zerojs</a>;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;}</div>
<div class="ttc" id="ajobs_8c_html_a00a528c63ad265bc45f9dd8892147fd1"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a00a528c63ad265bc45f9dd8892147fd1">zerojs</a></div><div class="ttdeci">static struct jobstats zerojs</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l00172">jobs.c:174</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d8e/jobs_8c_source.html#l00175">js</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l00174">zerojs</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d3d/execute__cmd_8c_source.html#l05874">initialize_subshell()</a>.</p>

</div>
</div>
<a id="aa9447ba6eda1088457e76cc37da06b7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9447ba6eda1088457e76cc37da06b7b">&#9670;&nbsp;</a></span>initialize_job_control()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int initialize_job_control </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>force</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l04370">4370</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l04372"></a><span class="lineno"> 4372</span>&#160;{</div>
<div class="line"><a name="l04373"></a><span class="lineno"> 4373</span>&#160;  <a class="code" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a> <a class="code" href="../../d6/dec/gm__loop_8c.html#ac310d9181e916ba43604099aee272c71">t</a>;</div>
<div class="line"><a name="l04374"></a><span class="lineno"> 4374</span>&#160;  <span class="keywordtype">int</span> t_errno, tty_sigs;</div>
<div class="line"><a name="l04375"></a><span class="lineno"> 4375</span>&#160; </div>
<div class="line"><a name="l04376"></a><span class="lineno"> 4376</span>&#160;  t_errno = -1;</div>
<div class="line"><a name="l04377"></a><span class="lineno"> 4377</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#a12352dc576f1c23274468beca1ccf916">shell_pgrp</a> = <a class="code" href="../../df/d8e/jobs_8c.html#a0a891da39663805f56b077cf8aab2d68">getpgid</a> (0);</div>
<div class="line"><a name="l04378"></a><span class="lineno"> 4378</span>&#160; </div>
<div class="line"><a name="l04379"></a><span class="lineno"> 4379</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a12352dc576f1c23274468beca1ccf916">shell_pgrp</a> == -1)</div>
<div class="line"><a name="l04380"></a><span class="lineno"> 4380</span>&#160;    {</div>
<div class="line"><a name="l04381"></a><span class="lineno"> 4381</span>&#160;      <a class="code" href="../../db/dcc/error_8c.html#a3dc8bd9b2e1ecb245420a3dba9f5e8bd">sys_error</a> (<a class="code" href="../../d7/dcd/bashintl_8h.html#a86a239addea586602343007a370bf8ad">_</a>(<span class="stringliteral">&quot;initialize_job_control: getpgrp failed&quot;</span>));</div>
<div class="line"><a name="l04382"></a><span class="lineno"> 4382</span>&#160;      <a class="code" href="../../d9/df8/include_2ansi__stdlib_8h.html#a358d2e2397ca11ccd17553e3c40e7901">exit</a> (1);</div>
<div class="line"><a name="l04383"></a><span class="lineno"> 4383</span>&#160;    }</div>
<div class="line"><a name="l04384"></a><span class="lineno"> 4384</span>&#160; </div>
<div class="line"><a name="l04385"></a><span class="lineno"> 4385</span>&#160;  <span class="comment">/* We can only have job control if we are interactive unless we force it. */</span></div>
<div class="line"><a name="l04386"></a><span class="lineno"> 4386</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d6/d4f/shell_8c.html#aeb39d5d8ddd4957f1b01720fa0e37e36">interactive</a> == 0 &amp;&amp; <a class="code" href="../../dc/d4b/bash_2examples_2loadables_2rm_8c.html#a52de43b6faa0d9601f10db8b3826f11a">force</a> == 0)</div>
<div class="line"><a name="l04387"></a><span class="lineno"> 4387</span>&#160;    {</div>
<div class="line"><a name="l04388"></a><span class="lineno"> 4388</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#a3002cbcd4a652dec2c5cef5ff3da446f">job_control</a> = 0;</div>
<div class="line"><a name="l04389"></a><span class="lineno"> 4389</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#a927de0d08067183bd327b538a1b77f73">original_pgrp</a> = <a class="code" href="../../d3/d3a/jobs_8h.html#ad40327c746e8ef715109d9b9257eb991">NO_PID</a>;</div>
<div class="line"><a name="l04390"></a><span class="lineno"> 4390</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#ae43d281c5f91cb3d7ad00fc46971b4da">shell_tty</a> = <a class="code" href="../../d7/d6b/fileno_8c.html#a8262871768d894c0962fa898b9680ce4">fileno</a> (<a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#a5ce35bd5ba5021fd3b2e951e8f497656">stderr</a>);</div>
<div class="line"><a name="l04391"></a><span class="lineno"> 4391</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#aeb36f80c8f1667339f6f23318ff29b50">terminal_pgrp</a> = <a class="code" href="../../df/d8e/jobs_8c.html#a30c3edb2b02399d64b5e8eaaf7fe40e6">tcgetpgrp</a> (<a class="code" href="../../df/d8e/jobs_8c.html#ae43d281c5f91cb3d7ad00fc46971b4da">shell_tty</a>);    <span class="comment">/* for checking later */</span></div>
<div class="line"><a name="l04392"></a><span class="lineno"> 4392</span>&#160;    }</div>
<div class="line"><a name="l04393"></a><span class="lineno"> 4393</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l04394"></a><span class="lineno"> 4394</span>&#160;    {</div>
<div class="line"><a name="l04395"></a><span class="lineno"> 4395</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#ae43d281c5f91cb3d7ad00fc46971b4da">shell_tty</a> = -1;</div>
<div class="line"><a name="l04396"></a><span class="lineno"> 4396</span>&#160; </div>
<div class="line"><a name="l04397"></a><span class="lineno"> 4397</span>&#160;      <span class="comment">/* If forced_interactive is set, we skip the normal check that stderr</span></div>
<div class="line"><a name="l04398"></a><span class="lineno"> 4398</span>&#160;<span class="comment">     is attached to a tty, so we need to check here.  If it&#39;s not, we</span></div>
<div class="line"><a name="l04399"></a><span class="lineno"> 4399</span>&#160;<span class="comment">     need to see whether we have a controlling tty by opening /dev/tty,</span></div>
<div class="line"><a name="l04400"></a><span class="lineno"> 4400</span>&#160;<span class="comment">     since trying to use job control tty pgrp manipulations on a non-tty</span></div>
<div class="line"><a name="l04401"></a><span class="lineno"> 4401</span>&#160;<span class="comment">     is going to fail. */</span></div>
<div class="line"><a name="l04402"></a><span class="lineno"> 4402</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d8/d70/flags_8c.html#a907e4b967882504e07953bb5c8befc38">forced_interactive</a> &amp;&amp; <a class="code" href="../../de/d97/musl_2include_2unistd_8h.html#ab4155ffea05dab2dafae68fd88a0517f">isatty</a> (<a class="code" href="../../d7/d6b/fileno_8c.html#a8262871768d894c0962fa898b9680ce4">fileno</a> (<a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#a5ce35bd5ba5021fd3b2e951e8f497656">stderr</a>)) == 0)</div>
<div class="line"><a name="l04403"></a><span class="lineno"> 4403</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#ae43d281c5f91cb3d7ad00fc46971b4da">shell_tty</a> = <a class="code" href="../../d2/d44/musl_2include_2fcntl_8h.html#aa138ddaa9bbe8b8ccca32ed43e75b72c">open</a> (<span class="stringliteral">&quot;/dev/tty&quot;</span>, <a class="code" href="../../d2/d44/musl_2include_2fcntl_8h.html#abb0586253488ee61072b73557eeb873b">O_RDWR</a>|<a class="code" href="../../d2/d59/fdflags_8c.html#a39d33ce33804efd4d52606d59071c6d8">O_NONBLOCK</a>);</div>
<div class="line"><a name="l04404"></a><span class="lineno"> 4404</span>&#160; </div>
<div class="line"><a name="l04405"></a><span class="lineno"> 4405</span>&#160;      <span class="comment">/* Get our controlling terminal.  If job_control is set, or</span></div>
<div class="line"><a name="l04406"></a><span class="lineno"> 4406</span>&#160;<span class="comment">     interactive is set, then this is an interactive shell no</span></div>
<div class="line"><a name="l04407"></a><span class="lineno"> 4407</span>&#160;<span class="comment">     matter where fd 2 is directed. */</span></div>
<div class="line"><a name="l04408"></a><span class="lineno"> 4408</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#ae43d281c5f91cb3d7ad00fc46971b4da">shell_tty</a> == -1)</div>
<div class="line"><a name="l04409"></a><span class="lineno"> 4409</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#ae43d281c5f91cb3d7ad00fc46971b4da">shell_tty</a> = <a class="code" href="../../de/d97/musl_2include_2unistd_8h.html#a530ea95b243a1bf148adaf399e2a6292">dup</a> (<a class="code" href="../../d7/d6b/fileno_8c.html#a8262871768d894c0962fa898b9680ce4">fileno</a> (<a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#a5ce35bd5ba5021fd3b2e951e8f497656">stderr</a>));  <span class="comment">/* fd 2 */</span></div>
<div class="line"><a name="l04410"></a><span class="lineno"> 4410</span>&#160; </div>
<div class="line"><a name="l04411"></a><span class="lineno"> 4411</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#ae43d281c5f91cb3d7ad00fc46971b4da">shell_tty</a> != -1)</div>
<div class="line"><a name="l04412"></a><span class="lineno"> 4412</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#ae43d281c5f91cb3d7ad00fc46971b4da">shell_tty</a> = <a class="code" href="../../d1/dca/general_8c.html#a1b1369b8d59bb4f4cf2da4fedde105d2">move_to_high_fd</a> (<a class="code" href="../../df/d8e/jobs_8c.html#ae43d281c5f91cb3d7ad00fc46971b4da">shell_tty</a>, 1, -1);</div>
<div class="line"><a name="l04413"></a><span class="lineno"> 4413</span>&#160; </div>
<div class="line"><a name="l04414"></a><span class="lineno"> 4414</span>&#160;      <span class="comment">/* Compensate for a bug in systems that compiled the BSD</span></div>
<div class="line"><a name="l04415"></a><span class="lineno"> 4415</span>&#160;<span class="comment">     rlogind with DEBUG defined, like NeXT and Alliant. */</span></div>
<div class="line"><a name="l04416"></a><span class="lineno"> 4416</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a12352dc576f1c23274468beca1ccf916">shell_pgrp</a> == 0)</div>
<div class="line"><a name="l04417"></a><span class="lineno"> 4417</span>&#160;    {</div>
<div class="line"><a name="l04418"></a><span class="lineno"> 4418</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#a12352dc576f1c23274468beca1ccf916">shell_pgrp</a> = <a class="code" href="../../d3/d3a/jobs_8h.html#add1dc6545057b7f1c7f91352536fb060">getpid</a> ();</div>
<div class="line"><a name="l04419"></a><span class="lineno"> 4419</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#af35bd0de8c2181231698de03bbdd58ca">setpgid</a> (0, <a class="code" href="../../df/d8e/jobs_8c.html#a12352dc576f1c23274468beca1ccf916">shell_pgrp</a>);</div>
<div class="line"><a name="l04420"></a><span class="lineno"> 4420</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#ae43d281c5f91cb3d7ad00fc46971b4da">shell_tty</a> != -1)</div>
<div class="line"><a name="l04421"></a><span class="lineno"> 4421</span>&#160;        <a class="code" href="../../df/d8e/jobs_8c.html#a701bcb628c909e9932c9f53c133be6bf">tcsetpgrp</a> (<a class="code" href="../../df/d8e/jobs_8c.html#ae43d281c5f91cb3d7ad00fc46971b4da">shell_tty</a>, <a class="code" href="../../df/d8e/jobs_8c.html#a12352dc576f1c23274468beca1ccf916">shell_pgrp</a>);</div>
<div class="line"><a name="l04422"></a><span class="lineno"> 4422</span>&#160;    }</div>
<div class="line"><a name="l04423"></a><span class="lineno"> 4423</span>&#160; </div>
<div class="line"><a name="l04424"></a><span class="lineno"> 4424</span>&#160;      tty_sigs = 0;</div>
<div class="line"><a name="l04425"></a><span class="lineno"> 4425</span>&#160;      <span class="keywordflow">while</span> ((<a class="code" href="../../df/d8e/jobs_8c.html#aeb36f80c8f1667339f6f23318ff29b50">terminal_pgrp</a> = <a class="code" href="../../df/d8e/jobs_8c.html#a30c3edb2b02399d64b5e8eaaf7fe40e6">tcgetpgrp</a> (<a class="code" href="../../df/d8e/jobs_8c.html#ae43d281c5f91cb3d7ad00fc46971b4da">shell_tty</a>)) != -1)</div>
<div class="line"><a name="l04426"></a><span class="lineno"> 4426</span>&#160;    {</div>
<div class="line"><a name="l04427"></a><span class="lineno"> 4427</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a12352dc576f1c23274468beca1ccf916">shell_pgrp</a> != <a class="code" href="../../df/d8e/jobs_8c.html#aeb36f80c8f1667339f6f23318ff29b50">terminal_pgrp</a>)</div>
<div class="line"><a name="l04428"></a><span class="lineno"> 4428</span>&#160;        {</div>
<div class="line"><a name="l04429"></a><span class="lineno"> 4429</span>&#160;          <a class="code" href="../../dd/db7/bash_2lib_2readline_2signals_8c.html#a1f8d6bb6b9aaad1c21141fc327620e99">SigHandler</a> *ottin;</div>
<div class="line"><a name="l04430"></a><span class="lineno"> 4430</span>&#160; </div>
<div class="line"><a name="l04431"></a><span class="lineno"> 4431</span>&#160;          <a class="code" href="../../dd/d2b/quit_8h.html#a68c85871057165f09160a548f0e2246a">CHECK_TERMSIG</a>;</div>
<div class="line"><a name="l04432"></a><span class="lineno"> 4432</span>&#160;          ottin = <a class="code" href="../../de/d62/sig_8h.html#aefdb4e4f01f2aa4133f26dbabcc8358b">set_signal_handler</a> (<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a2c146e34a6b5a78dfba41cded3331181">SIGTTIN</a>, <a class="code" href="../../de/d2b/musl_2include_2signal_8h.html#a27d5dc561093d6243542e6a2465bc0f8">SIG_DFL</a>);</div>
<div class="line"><a name="l04433"></a><span class="lineno"> 4433</span>&#160;          <a class="code" href="../../d8/da5/musl_2src_2signal_2kill_8c.html#a4539db972bcf3dd8c8b429af0dc3789d">kill</a> (0, <a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a2c146e34a6b5a78dfba41cded3331181">SIGTTIN</a>);</div>
<div class="line"><a name="l04434"></a><span class="lineno"> 4434</span>&#160;          <a class="code" href="../../de/d62/sig_8h.html#aefdb4e4f01f2aa4133f26dbabcc8358b">set_signal_handler</a> (<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a2c146e34a6b5a78dfba41cded3331181">SIGTTIN</a>, ottin);</div>
<div class="line"><a name="l04435"></a><span class="lineno"> 4435</span>&#160;          <span class="keywordflow">if</span> (tty_sigs++ &gt; 16)</div>
<div class="line"><a name="l04436"></a><span class="lineno"> 4436</span>&#160;        {</div>
<div class="line"><a name="l04437"></a><span class="lineno"> 4437</span>&#160;          <a class="code" href="../../db/dcc/error_8c.html#a3dc8bd9b2e1ecb245420a3dba9f5e8bd">sys_error</a> (<a class="code" href="../../d7/dcd/bashintl_8h.html#a86a239addea586602343007a370bf8ad">_</a>(<span class="stringliteral">&quot;initialize_job_control: no job control in background&quot;</span>));</div>
<div class="line"><a name="l04438"></a><span class="lineno"> 4438</span>&#160;          <a class="code" href="../../df/d8e/jobs_8c.html#a3002cbcd4a652dec2c5cef5ff3da446f">job_control</a> = 0;</div>
<div class="line"><a name="l04439"></a><span class="lineno"> 4439</span>&#160;          <a class="code" href="../../df/d8e/jobs_8c.html#a927de0d08067183bd327b538a1b77f73">original_pgrp</a> = <a class="code" href="../../df/d8e/jobs_8c.html#aeb36f80c8f1667339f6f23318ff29b50">terminal_pgrp</a>;    <span class="comment">/* for eventual give_terminal_to */</span></div>
<div class="line"><a name="l04440"></a><span class="lineno"> 4440</span>&#160;          <span class="keywordflow">goto</span> just_bail;</div>
<div class="line"><a name="l04441"></a><span class="lineno"> 4441</span>&#160;        }</div>
<div class="line"><a name="l04442"></a><span class="lineno"> 4442</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04443"></a><span class="lineno"> 4443</span>&#160;        }</div>
<div class="line"><a name="l04444"></a><span class="lineno"> 4444</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04445"></a><span class="lineno"> 4445</span>&#160;    }</div>
<div class="line"><a name="l04446"></a><span class="lineno"> 4446</span>&#160; </div>
<div class="line"><a name="l04447"></a><span class="lineno"> 4447</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#aeb36f80c8f1667339f6f23318ff29b50">terminal_pgrp</a> == -1)</div>
<div class="line"><a name="l04448"></a><span class="lineno"> 4448</span>&#160;    t_errno = <a class="code" href="../../df/d8e/jobs_8c.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>;</div>
<div class="line"><a name="l04449"></a><span class="lineno"> 4449</span>&#160; </div>
<div class="line"><a name="l04450"></a><span class="lineno"> 4450</span>&#160;      <span class="comment">/* Make sure that we are using the new line discipline. */</span></div>
<div class="line"><a name="l04451"></a><span class="lineno"> 4451</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a498a633d49209b6c93d81baf6e7e1430">set_new_line_discipline</a> (<a class="code" href="../../df/d8e/jobs_8c.html#ae43d281c5f91cb3d7ad00fc46971b4da">shell_tty</a>) &lt; 0)</div>
<div class="line"><a name="l04452"></a><span class="lineno"> 4452</span>&#160;    {</div>
<div class="line"><a name="l04453"></a><span class="lineno"> 4453</span>&#160;      <a class="code" href="../../db/dcc/error_8c.html#a3dc8bd9b2e1ecb245420a3dba9f5e8bd">sys_error</a> (<a class="code" href="../../d7/dcd/bashintl_8h.html#a86a239addea586602343007a370bf8ad">_</a>(<span class="stringliteral">&quot;initialize_job_control: line discipline&quot;</span>));</div>
<div class="line"><a name="l04454"></a><span class="lineno"> 4454</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#a3002cbcd4a652dec2c5cef5ff3da446f">job_control</a> = 0;</div>
<div class="line"><a name="l04455"></a><span class="lineno"> 4455</span>&#160;    }</div>
<div class="line"><a name="l04456"></a><span class="lineno"> 4456</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l04457"></a><span class="lineno"> 4457</span>&#160;    {</div>
<div class="line"><a name="l04458"></a><span class="lineno"> 4458</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#a927de0d08067183bd327b538a1b77f73">original_pgrp</a> = <a class="code" href="../../df/d8e/jobs_8c.html#a12352dc576f1c23274468beca1ccf916">shell_pgrp</a>;</div>
<div class="line"><a name="l04459"></a><span class="lineno"> 4459</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#a12352dc576f1c23274468beca1ccf916">shell_pgrp</a> = <a class="code" href="../../d3/d3a/jobs_8h.html#add1dc6545057b7f1c7f91352536fb060">getpid</a> ();</div>
<div class="line"><a name="l04460"></a><span class="lineno"> 4460</span>&#160; </div>
<div class="line"><a name="l04461"></a><span class="lineno"> 4461</span>&#160;      <span class="keywordflow">if</span> ((<a class="code" href="../../df/d8e/jobs_8c.html#a927de0d08067183bd327b538a1b77f73">original_pgrp</a> != <a class="code" href="../../df/d8e/jobs_8c.html#a12352dc576f1c23274468beca1ccf916">shell_pgrp</a>) &amp;&amp; (<a class="code" href="../../df/d8e/jobs_8c.html#af35bd0de8c2181231698de03bbdd58ca">setpgid</a> (0, <a class="code" href="../../df/d8e/jobs_8c.html#a12352dc576f1c23274468beca1ccf916">shell_pgrp</a>) &lt; 0))</div>
<div class="line"><a name="l04462"></a><span class="lineno"> 4462</span>&#160;        {</div>
<div class="line"><a name="l04463"></a><span class="lineno"> 4463</span>&#160;          <a class="code" href="../../db/dcc/error_8c.html#a3dc8bd9b2e1ecb245420a3dba9f5e8bd">sys_error</a> (<a class="code" href="../../d7/dcd/bashintl_8h.html#a86a239addea586602343007a370bf8ad">_</a>(<span class="stringliteral">&quot;initialize_job_control: setpgid&quot;</span>));</div>
<div class="line"><a name="l04464"></a><span class="lineno"> 4464</span>&#160;          <a class="code" href="../../df/d8e/jobs_8c.html#a12352dc576f1c23274468beca1ccf916">shell_pgrp</a> = <a class="code" href="../../df/d8e/jobs_8c.html#a927de0d08067183bd327b538a1b77f73">original_pgrp</a>;</div>
<div class="line"><a name="l04465"></a><span class="lineno"> 4465</span>&#160;        }</div>
<div class="line"><a name="l04466"></a><span class="lineno"> 4466</span>&#160; </div>
<div class="line"><a name="l04467"></a><span class="lineno"> 4467</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#a3002cbcd4a652dec2c5cef5ff3da446f">job_control</a> = 1;</div>
<div class="line"><a name="l04468"></a><span class="lineno"> 4468</span>&#160; </div>
<div class="line"><a name="l04469"></a><span class="lineno"> 4469</span>&#160;      <span class="comment">/* If (and only if) we just set our process group to our pid,</span></div>
<div class="line"><a name="l04470"></a><span class="lineno"> 4470</span>&#160;<span class="comment">         thereby becoming a process group leader, and the terminal</span></div>
<div class="line"><a name="l04471"></a><span class="lineno"> 4471</span>&#160;<span class="comment">         is not in the same process group as our (new) process group,</span></div>
<div class="line"><a name="l04472"></a><span class="lineno"> 4472</span>&#160;<span class="comment">         then set the terminal&#39;s process group to our (new) process</span></div>
<div class="line"><a name="l04473"></a><span class="lineno"> 4473</span>&#160;<span class="comment">         group.  If that fails, set our process group back to what it</span></div>
<div class="line"><a name="l04474"></a><span class="lineno"> 4474</span>&#160;<span class="comment">         was originally (so we can still read from the terminal) and</span></div>
<div class="line"><a name="l04475"></a><span class="lineno"> 4475</span>&#160;<span class="comment">         turn off job control.  */</span></div>
<div class="line"><a name="l04476"></a><span class="lineno"> 4476</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a12352dc576f1c23274468beca1ccf916">shell_pgrp</a> != <a class="code" href="../../df/d8e/jobs_8c.html#a927de0d08067183bd327b538a1b77f73">original_pgrp</a> &amp;&amp; <a class="code" href="../../df/d8e/jobs_8c.html#a12352dc576f1c23274468beca1ccf916">shell_pgrp</a> != <a class="code" href="../../df/d8e/jobs_8c.html#aeb36f80c8f1667339f6f23318ff29b50">terminal_pgrp</a>)</div>
<div class="line"><a name="l04477"></a><span class="lineno"> 4477</span>&#160;        {</div>
<div class="line"><a name="l04478"></a><span class="lineno"> 4478</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a8db3c891f1a77a1b3412544323ae6eb4">give_terminal_to</a> (<a class="code" href="../../df/d8e/jobs_8c.html#a12352dc576f1c23274468beca1ccf916">shell_pgrp</a>, 0) &lt; 0)</div>
<div class="line"><a name="l04479"></a><span class="lineno"> 4479</span>&#160;        {</div>
<div class="line"><a name="l04480"></a><span class="lineno"> 4480</span>&#160;          t_errno = <a class="code" href="../../df/d8e/jobs_8c.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>;</div>
<div class="line"><a name="l04481"></a><span class="lineno"> 4481</span>&#160;          <a class="code" href="../../df/d8e/jobs_8c.html#af35bd0de8c2181231698de03bbdd58ca">setpgid</a> (0, <a class="code" href="../../df/d8e/jobs_8c.html#a927de0d08067183bd327b538a1b77f73">original_pgrp</a>);</div>
<div class="line"><a name="l04482"></a><span class="lineno"> 4482</span>&#160;          <a class="code" href="../../df/d8e/jobs_8c.html#a12352dc576f1c23274468beca1ccf916">shell_pgrp</a> = <a class="code" href="../../df/d8e/jobs_8c.html#a927de0d08067183bd327b538a1b77f73">original_pgrp</a>;</div>
<div class="line"><a name="l04483"></a><span class="lineno"> 4483</span>&#160;          <a class="code" href="../../df/d8e/jobs_8c.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> = t_errno;</div>
<div class="line"><a name="l04484"></a><span class="lineno"> 4484</span>&#160;          <a class="code" href="../../db/dcc/error_8c.html#a3dc8bd9b2e1ecb245420a3dba9f5e8bd">sys_error</a> (<a class="code" href="../../d7/dcd/bashintl_8h.html#a86a239addea586602343007a370bf8ad">_</a>(<span class="stringliteral">&quot;cannot set terminal process group (%d)&quot;</span>), <a class="code" href="../../df/d8e/jobs_8c.html#a12352dc576f1c23274468beca1ccf916">shell_pgrp</a>);</div>
<div class="line"><a name="l04485"></a><span class="lineno"> 4485</span>&#160;          <a class="code" href="../../df/d8e/jobs_8c.html#a3002cbcd4a652dec2c5cef5ff3da446f">job_control</a> = 0;</div>
<div class="line"><a name="l04486"></a><span class="lineno"> 4486</span>&#160;        }</div>
<div class="line"><a name="l04487"></a><span class="lineno"> 4487</span>&#160;        }</div>
<div class="line"><a name="l04488"></a><span class="lineno"> 4488</span>&#160; </div>
<div class="line"><a name="l04489"></a><span class="lineno"> 4489</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a3002cbcd4a652dec2c5cef5ff3da446f">job_control</a> &amp;&amp; ((<a class="code" href="../../d6/dec/gm__loop_8c.html#ac310d9181e916ba43604099aee272c71">t</a> = <a class="code" href="../../df/d8e/jobs_8c.html#a30c3edb2b02399d64b5e8eaaf7fe40e6">tcgetpgrp</a> (<a class="code" href="../../df/d8e/jobs_8c.html#ae43d281c5f91cb3d7ad00fc46971b4da">shell_tty</a>)) == -1 || <a class="code" href="../../d6/dec/gm__loop_8c.html#ac310d9181e916ba43604099aee272c71">t</a> != <a class="code" href="../../df/d8e/jobs_8c.html#a12352dc576f1c23274468beca1ccf916">shell_pgrp</a>))</div>
<div class="line"><a name="l04490"></a><span class="lineno"> 4490</span>&#160;        {</div>
<div class="line"><a name="l04491"></a><span class="lineno"> 4491</span>&#160;          <span class="keywordflow">if</span> (t_errno != -1)</div>
<div class="line"><a name="l04492"></a><span class="lineno"> 4492</span>&#160;        <a class="code" href="../../df/d8e/jobs_8c.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> = t_errno;</div>
<div class="line"><a name="l04493"></a><span class="lineno"> 4493</span>&#160;          <a class="code" href="../../db/dcc/error_8c.html#a3dc8bd9b2e1ecb245420a3dba9f5e8bd">sys_error</a> (<a class="code" href="../../d7/dcd/bashintl_8h.html#a86a239addea586602343007a370bf8ad">_</a>(<span class="stringliteral">&quot;cannot set terminal process group (%d)&quot;</span>), <a class="code" href="../../d6/dec/gm__loop_8c.html#ac310d9181e916ba43604099aee272c71">t</a>);</div>
<div class="line"><a name="l04494"></a><span class="lineno"> 4494</span>&#160;          <a class="code" href="../../df/d8e/jobs_8c.html#a3002cbcd4a652dec2c5cef5ff3da446f">job_control</a> = 0;</div>
<div class="line"><a name="l04495"></a><span class="lineno"> 4495</span>&#160;        }</div>
<div class="line"><a name="l04496"></a><span class="lineno"> 4496</span>&#160;    }</div>
<div class="line"><a name="l04497"></a><span class="lineno"> 4497</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a3002cbcd4a652dec2c5cef5ff3da446f">job_control</a> == 0)</div>
<div class="line"><a name="l04498"></a><span class="lineno"> 4498</span>&#160;    <a class="code" href="../../db/dcc/error_8c.html#a49989edc86219ccae074d1d713294c44">internal_error</a> (<a class="code" href="../../d7/dcd/bashintl_8h.html#a86a239addea586602343007a370bf8ad">_</a>(<span class="stringliteral">&quot;no job control in this shell&quot;</span>));</div>
<div class="line"><a name="l04499"></a><span class="lineno"> 4499</span>&#160;    }</div>
<div class="line"><a name="l04500"></a><span class="lineno"> 4500</span>&#160; </div>
<div class="line"><a name="l04501"></a><span class="lineno"> 4501</span>&#160;just_bail:</div>
<div class="line"><a name="l04502"></a><span class="lineno"> 4502</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#ad2b44c9005c5a931c29ae6588e237636">running_in_background</a> = <a class="code" href="../../df/d8e/jobs_8c.html#aeb36f80c8f1667339f6f23318ff29b50">terminal_pgrp</a> != <a class="code" href="../../df/d8e/jobs_8c.html#a12352dc576f1c23274468beca1ccf916">shell_pgrp</a>;</div>
<div class="line"><a name="l04503"></a><span class="lineno"> 4503</span>&#160; </div>
<div class="line"><a name="l04504"></a><span class="lineno"> 4504</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#ae43d281c5f91cb3d7ad00fc46971b4da">shell_tty</a> != <a class="code" href="../../d7/d6b/fileno_8c.html#a8262871768d894c0962fa898b9680ce4">fileno</a> (<a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#a5ce35bd5ba5021fd3b2e951e8f497656">stderr</a>))</div>
<div class="line"><a name="l04505"></a><span class="lineno"> 4505</span>&#160;    <a class="code" href="../../d4/d1c/filecntl_8h.html#aed5200a9d0687548035406c8a357d2d7">SET_CLOSE_ON_EXEC</a> (<a class="code" href="../../df/d8e/jobs_8c.html#ae43d281c5f91cb3d7ad00fc46971b4da">shell_tty</a>);</div>
<div class="line"><a name="l04506"></a><span class="lineno"> 4506</span>&#160; </div>
<div class="line"><a name="l04507"></a><span class="lineno"> 4507</span>&#160;  <a class="code" href="../../de/d62/sig_8h.html#aefdb4e4f01f2aa4133f26dbabcc8358b">set_signal_handler</a> (<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a0e63521a64cc8bc2b91d36a87d32c9f8">SIGCHLD</a>, <a class="code" href="../../df/d8e/jobs_8c.html#a2ff305f4a0cb3c0f7ccb33c71cc2d0d2">sigchld_handler</a>);</div>
<div class="line"><a name="l04508"></a><span class="lineno"> 4508</span>&#160; </div>
<div class="line"><a name="l04509"></a><span class="lineno"> 4509</span>&#160;  <a class="code" href="../../d8/d70/flags_8c.html#a8917b6aae06bda6070cad4f2680896b4">change_flag</a> (<span class="charliteral">&#39;m&#39;</span>, <a class="code" href="../../df/d8e/jobs_8c.html#a3002cbcd4a652dec2c5cef5ff3da446f">job_control</a> ? <span class="charliteral">&#39;-&#39;</span> : <span class="charliteral">&#39;+&#39;</span>);</div>
<div class="line"><a name="l04510"></a><span class="lineno"> 4510</span>&#160; </div>
<div class="line"><a name="l04511"></a><span class="lineno"> 4511</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d6/d4f/shell_8c.html#aeb39d5d8ddd4957f1b01720fa0e37e36">interactive</a>)</div>
<div class="line"><a name="l04512"></a><span class="lineno"> 4512</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#a37d6118360319f23c01a9a326ad32906">get_tty_state</a> ();</div>
<div class="line"><a name="l04513"></a><span class="lineno"> 4513</span>&#160; </div>
<div class="line"><a name="l04514"></a><span class="lineno"> 4514</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#a137086a1fb1016e07d53473ef106d1f0">set_maxchild</a> (0);</div>
<div class="line"><a name="l04515"></a><span class="lineno"> 4515</span>&#160; </div>
<div class="line"><a name="l04516"></a><span class="lineno"> 4516</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../df/d8e/jobs_8c.html#a3002cbcd4a652dec2c5cef5ff3da446f">job_control</a>;</div>
<div class="line"><a name="l04517"></a><span class="lineno"> 4517</span>&#160;}</div>
<div class="ttc" id="abash_2lib_2readline_2signals_8c_html_a1f8d6bb6b9aaad1c21141fc327620e99"><div class="ttname"><a href="../../dd/db7/bash_2lib_2readline_2signals_8c.html#a1f8d6bb6b9aaad1c21141fc327620e99">SigHandler</a></div><div class="ttdeci">void SigHandler(int)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/db7/bash_2lib_2readline_2signals_8c_source.html#l00055">signals.c:55</a></div></div>
<div class="ttc" id="aerror_8c_html_a49989edc86219ccae074d1d713294c44"><div class="ttname"><a href="../../db/dcc/error_8c.html#a49989edc86219ccae074d1d713294c44">internal_error</a></div><div class="ttdeci">void internal_error(char *format, va_alist) const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dcc/error_8c_source.html#l00235">error.c:235</a></div></div>
<div class="ttc" id="afdflags_8c_html_a39d33ce33804efd4d52606d59071c6d8"><div class="ttname"><a href="../../d2/d59/fdflags_8c.html#a39d33ce33804efd4d52606d59071c6d8">O_NONBLOCK</a></div><div class="ttdeci">#define O_NONBLOCK</div></div>
<div class="ttc" id="afilecntl_8h_html_aed5200a9d0687548035406c8a357d2d7"><div class="ttname"><a href="../../d4/d1c/filecntl_8h.html#aed5200a9d0687548035406c8a357d2d7">SET_CLOSE_ON_EXEC</a></div><div class="ttdeci">#define SET_CLOSE_ON_EXEC(fd)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d1c/filecntl_8h_source.html#l00033">filecntl.h:33</a></div></div>
<div class="ttc" id="afileno_8c_html_a8262871768d894c0962fa898b9680ce4"><div class="ttname"><a href="../../d7/d6b/fileno_8c.html#a8262871768d894c0962fa898b9680ce4">fileno</a></div><div class="ttdeci">int fileno(FILE *f)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6b/fileno_8c_source.html#l00004">fileno.c:4</a></div></div>
<div class="ttc" id="aflags_8c_html_a8917b6aae06bda6070cad4f2680896b4"><div class="ttname"><a href="../../d8/d70/flags_8c.html#a8917b6aae06bda6070cad4f2680896b4">change_flag</a></div><div class="ttdeci">int change_flag(int flag, int on_or_off)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d70/flags_8c_source.html#l00227">flags.c:227</a></div></div>
<div class="ttc" id="aflags_8c_html_a907e4b967882504e07953bb5c8befc38"><div class="ttname"><a href="../../d8/d70/flags_8c.html#a907e4b967882504e07953bb5c8befc38">forced_interactive</a></div><div class="ttdeci">int forced_interactive</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d70/flags_8c_source.html#l00095">flags.c:95</a></div></div>
<div class="ttc" id="ageneral_8c_html_a1b1369b8d59bb4f4cf2da4fedde105d2"><div class="ttname"><a href="../../d1/dca/general_8c.html#a1b1369b8d59bb4f4cf2da4fedde105d2">move_to_high_fd</a></div><div class="ttdeci">int move_to_high_fd(int fd, int check_new, int maxfd)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dca/general_8c_source.html#l00643">general.c:643</a></div></div>
<div class="ttc" id="ainclude_2ansi__stdlib_8h_html_a358d2e2397ca11ccd17553e3c40e7901"><div class="ttname"><a href="../../d9/df8/include_2ansi__stdlib_8h.html#a358d2e2397ca11ccd17553e3c40e7901">exit</a></div><div class="ttdeci">void exit()</div></div>
<div class="ttc" id="ajobs_8c_html_a0a891da39663805f56b077cf8aab2d68"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a0a891da39663805f56b077cf8aab2d68">getpgid</a></div><div class="ttdeci">#define getpgid(p)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l00142">jobs.c:142</a></div></div>
<div class="ttc" id="ajobs_8c_html_a137086a1fb1016e07d53473ef106d1f0"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a137086a1fb1016e07d53473ef106d1f0">set_maxchild</a></div><div class="ttdeci">void set_maxchild(int nchild)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l05038">jobs.c:5038</a></div></div>
<div class="ttc" id="ajobs_8c_html_a2ff305f4a0cb3c0f7ccb33c71cc2d0d2"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a2ff305f4a0cb3c0f7ccb33c71cc2d0d2">sigchld_handler</a></div><div class="ttdeci">static sighandler sigchld_handler(int sig)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l03741">jobs.c:3741</a></div></div>
<div class="ttc" id="ajobs_8c_html_a30c3edb2b02399d64b5e8eaaf7fe40e6"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a30c3edb2b02399d64b5e8eaaf7fe40e6">tcgetpgrp</a></div><div class="ttdeci">pid_t tcgetpgrp(int fd)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l00358">jobs.c:358</a></div></div>
<div class="ttc" id="ajobs_8c_html_a37d6118360319f23c01a9a326ad32906"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a37d6118360319f23c01a9a326ad32906">get_tty_state</a></div><div class="ttdeci">int get_tty_state()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l02471">jobs.c:2471</a></div></div>
<div class="ttc" id="ajobs_8c_html_a498a633d49209b6c93d81baf6e7e1430"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a498a633d49209b6c93d81baf6e7e1430">set_new_line_discipline</a></div><div class="ttdeci">static int set_new_line_discipline(int tty)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l04534">jobs.c:4534</a></div></div>
<div class="ttc" id="ajobs_8c_html_ad2b44c9005c5a931c29ae6588e237636"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#ad2b44c9005c5a931c29ae6588e237636">running_in_background</a></div><div class="ttdeci">int running_in_background</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l00225">jobs.c:225</a></div></div>
<div class="ttc" id="alibc_2include_2sys_2types_8h_html_a63bef27b1fbd4a91faa273a387a38dc2"><div class="ttname"><a href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a></div><div class="ttdeci">__pid_t pid_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d5b/libc_2include_2sys_2types_8h_source.html#l00018">types.h:18</a></div></div>
<div class="ttc" id="amusl_2include_2fcntl_8h_html_aa138ddaa9bbe8b8ccca32ed43e75b72c"><div class="ttname"><a href="../../d2/d44/musl_2include_2fcntl_8h.html#aa138ddaa9bbe8b8ccca32ed43e75b72c">open</a></div><div class="ttdeci">int open(const char *, int,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/deb/open_8c_source.html#l00005">open.c:5</a></div></div>
<div class="ttc" id="amusl_2include_2fcntl_8h_html_abb0586253488ee61072b73557eeb873b"><div class="ttname"><a href="../../d2/d44/musl_2include_2fcntl_8h.html#abb0586253488ee61072b73557eeb873b">O_RDWR</a></div><div class="ttdeci">#define O_RDWR</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d44/musl_2include_2fcntl_8h_source.html#l00046">fcntl.h:46</a></div></div>
<div class="ttc" id="amusl_2include_2unistd_8h_html_a530ea95b243a1bf148adaf399e2a6292"><div class="ttname"><a href="../../de/d97/musl_2include_2unistd_8h.html#a530ea95b243a1bf148adaf399e2a6292">dup</a></div><div class="ttdeci">int dup(int)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d0f/dup_8c_source.html#l00004">dup.c:4</a></div></div>
<div class="ttc" id="amusl_2include_2unistd_8h_html_ab4155ffea05dab2dafae68fd88a0517f"><div class="ttname"><a href="../../de/d97/musl_2include_2unistd_8h.html#ab4155ffea05dab2dafae68fd88a0517f">isatty</a></div><div class="ttdeci">int isatty(int)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d84/isatty_8c_source.html#l00006">isatty.c:6</a></div></div>
<div class="ttc" id="amusl_2src_2signal_2kill_8c_html_a4539db972bcf3dd8c8b429af0dc3789d"><div class="ttname"><a href="../../d8/da5/musl_2src_2signal_2kill_8c.html#a4539db972bcf3dd8c8b429af0dc3789d">kill</a></div><div class="ttdeci">int kill(pid_t pid, int sig)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/da5/musl_2src_2signal_2kill_8c_source.html#l00004">kill.c:4</a></div></div>
<div class="ttc" id="aquit_8h_html_a68c85871057165f09160a548f0e2246a"><div class="ttname"><a href="../../dd/d2b/quit_8h.html#a68c85871057165f09160a548f0e2246a">CHECK_TERMSIG</a></div><div class="ttdeci">#define CHECK_TERMSIG</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d2b/quit_8h_source.html#l00052">quit.h:52</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/dcd/bashintl_8h_source.html#l00036">_</a>, <a class="el" href="../../d8/d70/flags_8c_source.html#l00227">change_flag()</a>, <a class="el" href="../../dd/d2b/quit_8h_source.html#l00052">CHECK_TERMSIG</a>, <a class="el" href="../../df/d0f/dup_8c_source.html#l00004">dup()</a>, <a class="el" href="../../df/d8e/jobs_8c.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../d9/df8/include_2ansi__stdlib_8h.html#a358d2e2397ca11ccd17553e3c40e7901">exit()</a>, <a class="el" href="../../d7/d6b/fileno_8c_source.html#l00004">fileno()</a>, <a class="el" href="../../dc/d4b/bash_2examples_2loadables_2rm_8c_source.html#l00039">force</a>, <a class="el" href="../../d8/d70/flags_8c_source.html#l00095">forced_interactive</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02471">get_tty_state()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00142">getpgid</a>, <a class="el" href="../../d3/d3a/jobs_8h.html#add1dc6545057b7f1c7f91352536fb060">getpid()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04641">give_terminal_to()</a>, <a class="el" href="../../d6/d4f/shell_8c_source.html#l00139">interactive</a>, <a class="el" href="../../db/dcc/error_8c_source.html#l00235">internal_error()</a>, <a class="el" href="../../d8/d84/isatty_8c_source.html#l00006">isatty()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00222">job_control</a>, <a class="el" href="../../d8/da5/musl_2src_2signal_2kill_8c_source.html#l00004">kill()</a>, <a class="el" href="../../d1/dca/general_8c_source.html#l00643">move_to_high_fd()</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00198">NO_PID</a>, <a class="el" href="../../d2/d59/fdflags_8c.html#a39d33ce33804efd4d52606d59071c6d8">O_NONBLOCK</a>, <a class="el" href="../../d2/d44/musl_2include_2fcntl_8h_source.html#l00046">O_RDWR</a>, <a class="el" href="../../da/deb/open_8c_source.html#l00005">open()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00200">original_pgrp</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00225">running_in_background</a>, <a class="el" href="../../d4/d1c/filecntl_8h_source.html#l00033">SET_CLOSE_ON_EXEC</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l05038">set_maxchild()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04534">set_new_line_discipline()</a>, <a class="el" href="../../de/d62/sig_8h_source.html#l00043">set_signal_handler</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00354">setpgid</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00194">shell_pgrp</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00191">shell_tty</a>, <a class="el" href="../../de/d2b/musl_2include_2signal_8h_source.html#l00284">SIG_DFL</a>, <a class="el" href="../../df/dff/libc_2include_2signal_8h_source.html#l00058">SIGCHLD</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l03741">sigchld_handler()</a>, <a class="el" href="../../df/dff/libc_2include_2signal_8h_source.html#l00070">SIGTTIN</a>, <a class="el" href="../../dc/d4d/libc_2include_2stdio_8h_source.html#l00058">stderr</a>, <a class="el" href="../../db/dcc/error_8c_source.html#l00327">sys_error()</a>, <a class="el" href="../../d6/dec/gm__loop_8c_source.html#l00079">t</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00358">tcgetpgrp()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00355">tcsetpgrp</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l00197">terminal_pgrp</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/ddd/push_8c_source.html#l00042">push_builtin()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l05027">restart_job_control()</a>, and <a class="el" href="../../d6/d4f/shell_8c_source.html#l01928">shell_initialize()</a>.</p>

</div>
</div>
<a id="ab3bf0c468c5caa52e82aa6a68f6a3099"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3bf0c468c5caa52e82aa6a68f6a3099">&#9670;&nbsp;</a></span>initialize_job_signals()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void initialize_job_signals </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l04590">4590</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l04591"></a><span class="lineno"> 4591</span>&#160;{</div>
<div class="line"><a name="l04592"></a><span class="lineno"> 4592</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d6/d4f/shell_8c.html#aeb39d5d8ddd4957f1b01720fa0e37e36">interactive</a>)</div>
<div class="line"><a name="l04593"></a><span class="lineno"> 4593</span>&#160;    {</div>
<div class="line"><a name="l04594"></a><span class="lineno"> 4594</span>&#160;      <a class="code" href="../../de/d62/sig_8h.html#aefdb4e4f01f2aa4133f26dbabcc8358b">set_signal_handler</a> (<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a487309e3e9e0527535644115204a639a">SIGINT</a>, <a class="code" href="../../da/d12/sig_8c.html#a03b1d93044f72223debb80de9dcead89">sigint_sighandler</a>);</div>
<div class="line"><a name="l04595"></a><span class="lineno"> 4595</span>&#160;      <a class="code" href="../../de/d62/sig_8h.html#aefdb4e4f01f2aa4133f26dbabcc8358b">set_signal_handler</a> (<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#abe65c086e01f0d286b7a785a7e3cdd1a">SIGTSTP</a>, <a class="code" href="../../de/d2b/musl_2include_2signal_8h.html#acf0e499b0ac946b366b4f47a3b3e8b9e">SIG_IGN</a>);</div>
<div class="line"><a name="l04596"></a><span class="lineno"> 4596</span>&#160;      <a class="code" href="../../de/d62/sig_8h.html#aefdb4e4f01f2aa4133f26dbabcc8358b">set_signal_handler</a> (<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a782864287613e2c5c030411fa9c5e9b1">SIGTTOU</a>, <a class="code" href="../../de/d2b/musl_2include_2signal_8h.html#acf0e499b0ac946b366b4f47a3b3e8b9e">SIG_IGN</a>);</div>
<div class="line"><a name="l04597"></a><span class="lineno"> 4597</span>&#160;      <a class="code" href="../../de/d62/sig_8h.html#aefdb4e4f01f2aa4133f26dbabcc8358b">set_signal_handler</a> (<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a2c146e34a6b5a78dfba41cded3331181">SIGTTIN</a>, <a class="code" href="../../de/d2b/musl_2include_2signal_8h.html#acf0e499b0ac946b366b4f47a3b3e8b9e">SIG_IGN</a>);</div>
<div class="line"><a name="l04598"></a><span class="lineno"> 4598</span>&#160;    }</div>
<div class="line"><a name="l04599"></a><span class="lineno"> 4599</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a3002cbcd4a652dec2c5cef5ff3da446f">job_control</a>)</div>
<div class="line"><a name="l04600"></a><span class="lineno"> 4600</span>&#160;    {</div>
<div class="line"><a name="l04601"></a><span class="lineno"> 4601</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#a2117a3ea7b950d08a1de610d18291bf1">old_tstp</a> = <a class="code" href="../../de/d62/sig_8h.html#aefdb4e4f01f2aa4133f26dbabcc8358b">set_signal_handler</a> (<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#abe65c086e01f0d286b7a785a7e3cdd1a">SIGTSTP</a>, <a class="code" href="../../df/d8e/jobs_8c.html#aff70c2f626e4ae983bc38f0dc5a375e8">sigstop_sighandler</a>);</div>
<div class="line"><a name="l04602"></a><span class="lineno"> 4602</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#a0c33b0e2f430ff18bc36dd8fa19c14d1">old_ttin</a> = <a class="code" href="../../de/d62/sig_8h.html#aefdb4e4f01f2aa4133f26dbabcc8358b">set_signal_handler</a> (<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a2c146e34a6b5a78dfba41cded3331181">SIGTTIN</a>, <a class="code" href="../../df/d8e/jobs_8c.html#aff70c2f626e4ae983bc38f0dc5a375e8">sigstop_sighandler</a>);</div>
<div class="line"><a name="l04603"></a><span class="lineno"> 4603</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#a6c44b645419b61a2eeab9833fe2abc97">old_ttou</a> = <a class="code" href="../../de/d62/sig_8h.html#aefdb4e4f01f2aa4133f26dbabcc8358b">set_signal_handler</a> (<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a782864287613e2c5c030411fa9c5e9b1">SIGTTOU</a>, <a class="code" href="../../df/d8e/jobs_8c.html#aff70c2f626e4ae983bc38f0dc5a375e8">sigstop_sighandler</a>);</div>
<div class="line"><a name="l04604"></a><span class="lineno"> 4604</span>&#160;    }</div>
<div class="line"><a name="l04605"></a><span class="lineno"> 4605</span>&#160;  <span class="comment">/* Leave disposition unmodified for non-interactive shells without job</span></div>
<div class="line"><a name="l04606"></a><span class="lineno"> 4606</span>&#160;<span class="comment">     control. */</span></div>
<div class="line"><a name="l04607"></a><span class="lineno"> 4607</span>&#160;}</div>
<div class="ttc" id="ajobs_8c_html_a0c33b0e2f430ff18bc36dd8fa19c14d1"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a0c33b0e2f430ff18bc36dd8fa19c14d1">old_ttin</a></div><div class="ttdeci">static SigHandler * old_ttin</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l00335">jobs.c:335</a></div></div>
<div class="ttc" id="ajobs_8c_html_a2117a3ea7b950d08a1de610d18291bf1"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a2117a3ea7b950d08a1de610d18291bf1">old_tstp</a></div><div class="ttdeci">static SigHandler * old_tstp</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l00335">jobs.c:335</a></div></div>
<div class="ttc" id="ajobs_8c_html_a6c44b645419b61a2eeab9833fe2abc97"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a6c44b645419b61a2eeab9833fe2abc97">old_ttou</a></div><div class="ttdeci">static SigHandler * old_ttou</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l00335">jobs.c:335</a></div></div>
<div class="ttc" id="ajobs_8c_html_aff70c2f626e4ae983bc38f0dc5a375e8"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#aff70c2f626e4ae983bc38f0dc5a375e8">sigstop_sighandler</a></div><div class="ttdeci">static sighandler sigstop_sighandler(int sig)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l04623">jobs.c:4623</a></div></div>
<div class="ttc" id="alibc_2include_2signal_8h_html_a487309e3e9e0527535644115204a639a"><div class="ttname"><a href="../../df/dff/libc_2include_2signal_8h.html#a487309e3e9e0527535644115204a639a">SIGINT</a></div><div class="ttdeci">#define SIGINT</div><div class="ttdoc">Interrupt from keyboard.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dff/libc_2include_2signal_8h_source.html#l00013">signal.h:13</a></div></div>
<div class="ttc" id="asig_8c_html_a03b1d93044f72223debb80de9dcead89"><div class="ttname"><a href="../../da/d12/sig_8c.html#a03b1d93044f72223debb80de9dcead89">sigint_sighandler</a></div><div class="ttdeci">sighandler sigint_sighandler(int sig)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d12/sig_8c_source.html#l00675">sig.c:675</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d6/d4f/shell_8c_source.html#l00139">interactive</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00222">job_control</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00335">old_tstp</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00335">old_ttin</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00335">old_ttou</a>, <a class="el" href="../../de/d62/sig_8h_source.html#l00043">set_signal_handler</a>, <a class="el" href="../../de/d2b/musl_2include_2signal_8h_source.html#l00285">SIG_IGN</a>, <a class="el" href="../../df/dff/libc_2include_2signal_8h_source.html#l00013">SIGINT</a>, <a class="el" href="../../da/d12/sig_8c_source.html#l00675">sigint_sighandler()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04623">sigstop_sighandler()</a>, <a class="el" href="../../df/dff/libc_2include_2signal_8h_source.html#l00067">SIGTSTP</a>, <a class="el" href="../../df/dff/libc_2include_2signal_8h_source.html#l00070">SIGTTIN</a>, and <a class="el" href="../../df/dff/libc_2include_2signal_8h_source.html#l00073">SIGTTOU</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d12/sig_8c_source.html#l00100">initialize_signals()</a>, <a class="el" href="../../d6/ddd/push_8c_source.html#l00042">push_builtin()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04958">set_job_control()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l04611">sigcont_sighandler()</a>.</p>

</div>
</div>
<a id="a73562e7524f0f619567b2414e0a15309"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73562e7524f0f619567b2414e0a15309">&#9670;&nbsp;</a></span>j_strsignal()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* j_strsignal </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l01845">1845</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;{</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;  <span class="keywordtype">char</span> *<a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#aeb26462df30f47f6fd73ee802457812b">x</a>;</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160; </div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;  <a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#aeb26462df30f47f6fd73ee802457812b">x</a> = <a class="code" href="../../dc/d7a/strsignal_8c.html#ad647aebab60b282ad59755747a1a9d78">strsignal</a> (<a class="code" href="../../df/d19/arpping_8c.html#ac9562ee4ecb3b8aeebeb04656e7e57a9">s</a>);</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#aeb26462df30f47f6fd73ee802457812b">x</a> == 0)</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;    {</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;      <a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#aeb26462df30f47f6fd73ee802457812b">x</a> = <a class="code" href="../../df/d8e/jobs_8c.html#aac5dfe821e90fd3b3f3a0c4a0d1f09a1">retcode_name_buffer</a>;</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;      <a class="code" href="../../d4/db1/apps_2base_2bash_2lib_2sh_2snprintf_8c.html#a2f895806f62a5ee9e7ce6575b4963f6e">snprintf</a> (<a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#aeb26462df30f47f6fd73ee802457812b">x</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../df/d8e/jobs_8c.html#aac5dfe821e90fd3b3f3a0c4a0d1f09a1">retcode_name_buffer</a>), <a class="code" href="../../d7/dcd/bashintl_8h.html#a86a239addea586602343007a370bf8ad">_</a>(<span class="stringliteral">&quot;Signal %d&quot;</span>), <a class="code" href="../../df/d19/arpping_8c.html#ac9562ee4ecb3b8aeebeb04656e7e57a9">s</a>);</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;    }</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#aeb26462df30f47f6fd73ee802457812b">x</a>;</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;}</div>
<div class="ttc" id="aapps_2base_2bash_2lib_2sh_2snprintf_8c_html_a2f895806f62a5ee9e7ce6575b4963f6e"><div class="ttname"><a href="../../d4/db1/apps_2base_2bash_2lib_2sh_2snprintf_8c.html#a2f895806f62a5ee9e7ce6575b4963f6e">snprintf</a></div><div class="ttdeci">int snprintf(char *string, size_t length, const char *format, va_alist)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/db1/apps_2base_2bash_2lib_2sh_2snprintf_8c_source.html#l01727">snprintf.c:1727</a></div></div>
<div class="ttc" id="aarpping_8c_html_ac9562ee4ecb3b8aeebeb04656e7e57a9"><div class="ttname"><a href="../../df/d19/arpping_8c.html#ac9562ee4ecb3b8aeebeb04656e7e57a9">s</a></div><div class="ttdeci">#define s</div></div>
<div class="ttc" id="ajobs_8c_html_aac5dfe821e90fd3b3f3a0c4a0d1f09a1"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#aac5dfe821e90fd3b3f3a0c4a0d1f09a1">retcode_name_buffer</a></div><div class="ttdeci">static char retcode_name_buffer[64]</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l00348">jobs.c:348</a></div></div>
<div class="ttc" id="amusl_2src_2prng_2random_8c_html_aeb26462df30f47f6fd73ee802457812b"><div class="ttname"><a href="../../dc/da2/musl_2src_2prng_2random_8c.html#aeb26462df30f47f6fd73ee802457812b">x</a></div><div class="ttdeci">static uint32_t * x</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da2/musl_2src_2prng_2random_8c_source.html#l00025">random.c:25</a></div></div>
<div class="ttc" id="astrsignal_8c_html_ad647aebab60b282ad59755747a1a9d78"><div class="ttname"><a href="../../dc/d7a/strsignal_8c.html#ad647aebab60b282ad59755747a1a9d78">strsignal</a></div><div class="ttdeci">char * strsignal(int signum)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/strsignal_8c_source.html#l00116">strsignal.c:116</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/dcd/bashintl_8h_source.html#l00036">_</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00348">retcode_name_buffer</a>, <a class="el" href="../../df/d19/arpping_8c.html#ac9562ee4ecb3b8aeebeb04656e7e57a9">s</a>, <a class="el" href="../../d4/db1/apps_2base_2bash_2lib_2sh_2snprintf_8c_source.html#l01727">snprintf()</a>, <a class="el" href="../../dc/d7a/strsignal_8c_source.html#l00116">strsignal()</a>, and <a class="el" href="../../dc/da2/musl_2src_2prng_2random_8c_source.html#l00025">x</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l04235">notify_of_job_status()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l01860">printable_job_status()</a>.</p>

</div>
</div>
<a id="aa66bc71748a428c3e27ab8271a4459ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa66bc71748a428c3e27ab8271a4459ce">&#9670;&nbsp;</a></span>job_exit_signal()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int job_exit_signal </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>job</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l02873">2873</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;{</div>
<div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;  <span class="keywordflow">return</span> (<a class="code" href="../../df/d8e/jobs_8c.html#aa55261d2e8eb934ebde20d623e5e05d2">process_exit_signal</a> (<a class="code" href="../../df/d8e/jobs_8c.html#af88686bf38197f4c2a43031f5ddbbec8">raw_job_exit_status</a> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>)));</div>
<div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;}</div>
<div class="ttc" id="ajobs_8c_html_aa55261d2e8eb934ebde20d623e5e05d2"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#aa55261d2e8eb934ebde20d623e5e05d2">process_exit_signal</a></div><div class="ttdeci">static int process_exit_signal(WAIT status)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l02794">jobs.c:2794</a></div></div>
<div class="ttc" id="ajobs_8c_html_af88686bf38197f4c2a43031f5ddbbec8"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#af88686bf38197f4c2a43031f5ddbbec8">raw_job_exit_status</a></div><div class="ttdeci">static WAIT raw_job_exit_status(int job)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l02835">jobs.c:2835</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d8e/jobs_8c_source.html#l02794">process_exit_signal()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l02835">raw_job_exit_status()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l02899">wait_for()</a>.</p>

</div>
</div>
<a id="a997643f3b98ece63e0acd25b30a1b93e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a997643f3b98ece63e0acd25b30a1b93e">&#9670;&nbsp;</a></span>job_exit_status()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int job_exit_status </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>job</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l02866">2866</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;{</div>
<div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;  <span class="keywordflow">return</span> (<a class="code" href="../../df/d8e/jobs_8c.html#ab424b34a1f2efb697ac04e6ae1b67bd9">process_exit_status</a> (<a class="code" href="../../df/d8e/jobs_8c.html#af88686bf38197f4c2a43031f5ddbbec8">raw_job_exit_status</a> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>)));</div>
<div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d8e/jobs_8c_source.html#l02801">process_exit_status()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l02835">raw_job_exit_status()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d3d/execute__cmd_8c_source.html#l02496">execute_pipeline()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02899">wait_for()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l03269">wait_for_any_job()</a>.</p>

</div>
</div>
<a id="a16770b5754c59e8942a2a4e577d3489b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16770b5754c59e8942a2a4e577d3489b">&#9670;&nbsp;</a></span>job_last_running()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int job_last_running </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>job</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l03412">3412</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03414"></a><span class="lineno"> 3414</span>&#160;{</div>
<div class="line"><a name="l03415"></a><span class="lineno"> 3415</span>&#160;  <span class="keywordflow">return</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a63606668cb8599788b6876b0f8683418">most_recent_job_in_state</a> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>, <a class="code" href="../../d3/d3a/jobs_8h.html#a27f134c9d8392fc50ee339c518707f57a1bf5a4892e9bb413f0dc598c6764541b">JRUNNING</a>));</div>
<div class="line"><a name="l03416"></a><span class="lineno"> 3416</span>&#160;}</div>
<div class="ttc" id="ajobs_8c_html_a63606668cb8599788b6876b0f8683418"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a63606668cb8599788b6876b0f8683418">most_recent_job_in_state</a></div><div class="ttdeci">static int most_recent_job_in_state(int job, JOB_STATE state)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l03377">jobs.c:3377</a></div></div>
<div class="ttc" id="ajobs_8h_html_a27f134c9d8392fc50ee339c518707f57a1bf5a4892e9bb413f0dc598c6764541b"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#a27f134c9d8392fc50ee339c518707f57a1bf5a4892e9bb413f0dc598c6764541b">JRUNNING</a></div><div class="ttdeci">@ JRUNNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00094">jobs.h:94</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00094">JRUNNING</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l03377">most_recent_job_in_state()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l03482">reset_current()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l03421">set_current_job()</a>.</p>

</div>
</div>
<a id="a65da6d0fa85ebbb91282a70c186172ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65da6d0fa85ebbb91282a70c186172ee">&#9670;&nbsp;</a></span>job_last_stopped()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int job_last_stopped </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>job</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l03403">3403</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160;{</div>
<div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;  <span class="keywordflow">return</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a63606668cb8599788b6876b0f8683418">most_recent_job_in_state</a> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>, <a class="code" href="../../d3/d3a/jobs_8h.html#a27f134c9d8392fc50ee339c518707f57a55fea56f3156409573084fce0c920da7">JSTOPPED</a>));</div>
<div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;}</div>
<div class="ttc" id="ajobs_8h_html_a27f134c9d8392fc50ee339c518707f57a55fea56f3156409573084fce0c920da7"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#a27f134c9d8392fc50ee339c518707f57a55fea56f3156409573084fce0c920da7">JSTOPPED</a></div><div class="ttdeci">@ JSTOPPED</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00094">jobs.h:94</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00094">JSTOPPED</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l03377">most_recent_job_in_state()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l03482">reset_current()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l03421">set_current_job()</a>.</p>

</div>
</div>
<a id="a98276db28c5fb03624f84aabe134de90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98276db28c5fb03624f84aabe134de90">&#9670;&nbsp;</a></span>job_signal_status()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d9/dab/posixwait_8h.html#ad83fd8df8943a816e70cd8a3a31df5c3">WAIT</a> job_signal_status </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>job</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l02813">2813</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;{</div>
<div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;  <span class="keyword">register</span> <a class="code" href="../../d3/d3a/jobs_8h.html#d8/d20/structprocess">PROCESS</a> *<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>;</div>
<div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;  <a class="code" href="../../d7/d23/unionwait_8h.html#de/d61/unionwait">WAIT</a> <a class="code" href="../../df/d19/arpping_8c.html#ac9562ee4ecb3b8aeebeb04656e7e57a9">s</a>;</div>
<div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160; </div>
<div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;  <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> = <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>]-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#a7e5648df5ec2f0d459900325c2cc5816">pipe</a>;</div>
<div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;  <span class="keywordflow">do</span></div>
<div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;    {</div>
<div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;      <a class="code" href="../../df/d19/arpping_8c.html#ac9562ee4ecb3b8aeebeb04656e7e57a9">s</a> = <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;status;</div>
<div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d7/d23/unionwait_8h.html#a6953e62fd0dec274a397678d31c344b4">WIFSIGNALED</a>(<a class="code" href="../../df/d19/arpping_8c.html#ac9562ee4ecb3b8aeebeb04656e7e57a9">s</a>) || <a class="code" href="../../d7/d23/unionwait_8h.html#ae2b610235f988f4f3109f02a2f395727">WIFSTOPPED</a>(<a class="code" href="../../df/d19/arpping_8c.html#ac9562ee4ecb3b8aeebeb04656e7e57a9">s</a>))</div>
<div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;      <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> = <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;next;</div>
<div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;    }</div>
<div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> != <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>]-&gt;<a class="code" href="../../d6/d90/hush_8c.html#d8/d53/structpipe">pipe</a>);</div>
<div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160; </div>
<div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../df/d19/arpping_8c.html#ac9562ee4ecb3b8aeebeb04656e7e57a9">s</a>;</div>
<div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;}</div>
<div class="ttc" id="aunionwait_8h_html_a6953e62fd0dec274a397678d31c344b4"><div class="ttname"><a href="../../d7/d23/unionwait_8h.html#a6953e62fd0dec274a397678d31c344b4">WIFSIGNALED</a></div><div class="ttdeci">#define WIFSIGNALED(x)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d23/unionwait_8h_source.html#l00091">unionwait.h:91</a></div></div>
<div class="ttc" id="aunionwait_8h_html_ae2b610235f988f4f3109f02a2f395727"><div class="ttname"><a href="../../d7/d23/unionwait_8h.html#ae2b610235f988f4f3109f02a2f395727">WIFSTOPPED</a></div><div class="ttdeci">#define WIFSTOPPED(x)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d23/unionwait_8h_source.html#l00089">unionwait.h:89</a></div></div>
<div class="ttc" id="aunionwait_8h_html_de/d61/unionwait"><div class="ttname"><a href="../../d7/d23/unionwait_8h.html#de/d61/unionwait">wait</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d23/unionwait_8h_source.html#l00026">unionwait.h:27</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d8e/jobs_8c_source.html#l00183">jobs</a>, <a class="el" href="../../d8/d64/glob__loop_8c_source.html#l00031">p</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00122">job::pipe</a>, <a class="el" href="../../df/d19/arpping_8c.html#ac9562ee4ecb3b8aeebeb04656e7e57a9">s</a>, <a class="el" href="../../d7/d23/unionwait_8h_source.html#l00091">WIFSIGNALED</a>, and <a class="el" href="../../d7/d23/unionwait_8h_source.html#l00089">WIFSTOPPED</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l02899">wait_for()</a>.</p>

</div>
</div>
<a id="a504a46e0a88bc784f96093dc7506e6fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a504a46e0a88bc784f96093dc7506e6fa">&#9670;&nbsp;</a></span>job_working_directory()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* job_working_directory </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00405">405</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;{</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  <span class="keywordtype">char</span> *<a class="code" href="../../df/dde/runsv_8c.html#ad45ef284071e5bd5627127837e94bc27">dir</a>;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160; </div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  <a class="code" href="../../df/dde/runsv_8c.html#ad45ef284071e5bd5627127837e94bc27">dir</a> = <a class="code" href="../../d5/de8/variables_8c.html#ad4773a87954c85e830411739af9bf4ff">get_string_value</a> (<span class="stringliteral">&quot;PWD&quot;</span>);</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../df/dde/runsv_8c.html#ad45ef284071e5bd5627127837e94bc27">dir</a>)</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="../../dd/d76/savestring_8c.html#a7b14e5f700c119910f89f61c06f30b1a">savestring</a> (<a class="code" href="../../df/dde/runsv_8c.html#ad45ef284071e5bd5627127837e94bc27">dir</a>));</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160; </div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  <a class="code" href="../../df/dde/runsv_8c.html#ad45ef284071e5bd5627127837e94bc27">dir</a> = <a class="code" href="../../de/da3/bash_2builtins_2common_8c.html#a0469a9442e519bb3b194f2aa9367e2fa">get_working_directory</a> (<span class="stringliteral">&quot;job-working-directory&quot;</span>);</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../df/dde/runsv_8c.html#ad45ef284071e5bd5627127837e94bc27">dir</a>)</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="../../df/dde/runsv_8c.html#ad45ef284071e5bd5627127837e94bc27">dir</a>);</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160; </div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  <span class="keywordflow">return</span> (<a class="code" href="../../dd/d76/savestring_8c.html#a7b14e5f700c119910f89f61c06f30b1a">savestring</a> (<span class="stringliteral">&quot;&lt;unknown&gt;&quot;</span>));</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;}</div>
<div class="ttc" id="abash_2builtins_2common_8c_html_a0469a9442e519bb3b194f2aa9367e2fa"><div class="ttname"><a href="../../de/da3/bash_2builtins_2common_8c.html#a0469a9442e519bb3b194f2aa9367e2fa">get_working_directory</a></div><div class="ttdeci">char * get_working_directory(char *for_whom)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/da3/bash_2builtins_2common_8c_source.html#l00624">common.c:624</a></div></div>
<div class="ttc" id="asavestring_8c_html_a7b14e5f700c119910f89f61c06f30b1a"><div class="ttname"><a href="../../dd/d76/savestring_8c.html#a7b14e5f700c119910f89f61c06f30b1a">savestring</a></div><div class="ttdeci">char * savestring(const char *s)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d76/savestring_8c_source.html#l00033">savestring.c:33</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/dde/runsv_8c_source.html#l00121">dir</a>, <a class="el" href="../../d5/de8/variables_8c_source.html#l02530">get_string_value()</a>, <a class="el" href="../../de/da3/bash_2builtins_2common_8c_source.html#l00624">get_working_directory()</a>, and <a class="el" href="../../dd/d76/savestring_8c_source.html#l00033">savestring()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l00553">stop_pipeline()</a>.</p>

</div>
</div>
<a id="ac29c70bbf156a302776a486f60cb31e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac29c70bbf156a302776a486f60cb31e0">&#9670;&nbsp;</a></span>kill_current_pipeline()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void kill_current_pipeline </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l01680">1680</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;{</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#a5d4feeb769d599bb634672546e5a19ff">stop_making_children</a> ();</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#a718ce465ffb026f4a2b67b4a6eab4761">start_pipeline</a> ();</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;}</div>
<div class="ttc" id="ajobs_8c_html_a5d4feeb769d599bb634672546e5a19ff"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a5d4feeb769d599bb634672546e5a19ff">stop_making_children</a></div><div class="ttdeci">void stop_making_children()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l00431">jobs.c:431</a></div></div>
<div class="ttc" id="ajobs_8c_html_a718ce465ffb026f4a2b67b4a6eab4761"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a718ce465ffb026f4a2b67b4a6eab4761">start_pipeline</a></div><div class="ttdeci">void start_pipeline()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l00523">jobs.c:523</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d8e/jobs_8c_source.html#l00523">start_pipeline()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l00431">stop_making_children()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d3d/execute__cmd_8c_source.html#l02496">execute_pipeline()</a>, <a class="el" href="../../de/d3d/execute__cmd_8c_source.html#l05316">execute_subshell_builtin_or_function()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l02121">make_child()</a>.</p>

</div>
</div>
<a id="acf4ffb95309a2a66455507a242a6ff7e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf4ffb95309a2a66455507a242a6ff7e">&#9670;&nbsp;</a></span>kill_pid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kill_pid </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a>&#160;</td>
          <td class="paramname"><em>pid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sig</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>group</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l03665">3665</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03668"></a><span class="lineno"> 3668</span>&#160;{</div>
<div class="line"><a name="l03669"></a><span class="lineno"> 3669</span>&#160;  <span class="keyword">register</span> <a class="code" href="../../d3/d3a/jobs_8h.html#d8/d20/structprocess">PROCESS</a> *<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>;</div>
<div class="line"><a name="l03670"></a><span class="lineno"> 3670</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>, result, negative;</div>
<div class="line"><a name="l03671"></a><span class="lineno"> 3671</span>&#160;  <a class="code" href="../../d8/d90/sigset__t_8h.html#a9140a5882f847f67b8155c759ac6aa05">sigset_t</a> set, oset;</div>
<div class="line"><a name="l03672"></a><span class="lineno"> 3672</span>&#160; </div>
<div class="line"><a name="l03673"></a><span class="lineno"> 3673</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a> &lt; -1)</div>
<div class="line"><a name="l03674"></a><span class="lineno"> 3674</span>&#160;    {</div>
<div class="line"><a name="l03675"></a><span class="lineno"> 3675</span>&#160;      <a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a> = -<a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>;</div>
<div class="line"><a name="l03676"></a><span class="lineno"> 3676</span>&#160;      <a class="code" href="../../dd/dbc/meta_8h.html#d3/d08/structgroup">group</a> = negative = 1;</div>
<div class="line"><a name="l03677"></a><span class="lineno"> 3677</span>&#160;    }</div>
<div class="line"><a name="l03678"></a><span class="lineno"> 3678</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l03679"></a><span class="lineno"> 3679</span>&#160;    negative = 0;</div>
<div class="line"><a name="l03680"></a><span class="lineno"> 3680</span>&#160; </div>
<div class="line"><a name="l03681"></a><span class="lineno"> 3681</span>&#160;  result = <a class="code" href="../../df/d03/shell_8h.html#a24d155899d8cc037505383c1016dbd65">EXECUTION_SUCCESS</a>;</div>
<div class="line"><a name="l03682"></a><span class="lineno"> 3682</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dd/dbc/meta_8h.html#d3/d08/structgroup">group</a>)</div>
<div class="line"><a name="l03683"></a><span class="lineno"> 3683</span>&#160;    {</div>
<div class="line"><a name="l03684"></a><span class="lineno"> 3684</span>&#160;      <a class="code" href="../../de/d62/sig_8h.html#a37d156f6ab7c2ade277f9a274314d258">BLOCK_CHILD</a> (set, oset);</div>
<div class="line"><a name="l03685"></a><span class="lineno"> 3685</span>&#160;      <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> = <a class="code" href="../../df/d8e/jobs_8c.html#a6581f40e1e7657048cbecabb416f13bb">find_pipeline</a> (<a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, 0, &amp;<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>);</div>
<div class="line"><a name="l03686"></a><span class="lineno"> 3686</span>&#160; </div>
<div class="line"><a name="l03687"></a><span class="lineno"> 3687</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a> != <a class="code" href="../../d3/d3a/jobs_8h.html#a6eba094b1ac1bc00e5883edd166bd944">NO_JOB</a>)</div>
<div class="line"><a name="l03688"></a><span class="lineno"> 3688</span>&#160;    {</div>
<div class="line"><a name="l03689"></a><span class="lineno"> 3689</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>]-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#af96c169abb39b4b3f9ccce91cb4b17dc">flags</a> &amp;= ~<a class="code" href="../../d3/d3a/jobs_8h.html#ac67735d6cc995bbac83d5efe91a52125">J_NOTIFIED</a>;</div>
<div class="line"><a name="l03690"></a><span class="lineno"> 3690</span>&#160; </div>
<div class="line"><a name="l03691"></a><span class="lineno"> 3691</span>&#160;      <span class="comment">/* Kill process in backquotes or one started without job control? */</span></div>
<div class="line"><a name="l03692"></a><span class="lineno"> 3692</span>&#160; </div>
<div class="line"><a name="l03693"></a><span class="lineno"> 3693</span>&#160;      <span class="comment">/* If we&#39;re passed a pid &lt; -1, just call killpg and see what happens  */</span></div>
<div class="line"><a name="l03694"></a><span class="lineno"> 3694</span>&#160;      <span class="keywordflow">if</span> (negative &amp;&amp; <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>]-&gt;pgrp == <a class="code" href="../../df/d8e/jobs_8c.html#a12352dc576f1c23274468beca1ccf916">shell_pgrp</a>)</div>
<div class="line"><a name="l03695"></a><span class="lineno"> 3695</span>&#160;        result = <a class="code" href="../../d8/d8d/nojobs_8c.html#ac8c6f4edd72509256c94b90c17c95092">killpg</a> (<a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, sig);</div>
<div class="line"><a name="l03696"></a><span class="lineno"> 3696</span>&#160;      <span class="comment">/* If we&#39;re killing using job control notification, for example,</span></div>
<div class="line"><a name="l03697"></a><span class="lineno"> 3697</span>&#160;<span class="comment">         without job control active, we have to do things ourselves. */</span></div>
<div class="line"><a name="l03698"></a><span class="lineno"> 3698</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>]-&gt;pgrp == <a class="code" href="../../df/d8e/jobs_8c.html#a12352dc576f1c23274468beca1ccf916">shell_pgrp</a>)   <span class="comment">/* XXX - IS_JOBCONTROL(job) == 0? */</span></div>
<div class="line"><a name="l03699"></a><span class="lineno"> 3699</span>&#160;        {</div>
<div class="line"><a name="l03700"></a><span class="lineno"> 3700</span>&#160;          <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> = <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>]-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#a7e5648df5ec2f0d459900325c2cc5816">pipe</a>;</div>
<div class="line"><a name="l03701"></a><span class="lineno"> 3701</span>&#160;          <span class="keywordflow">do</span></div>
<div class="line"><a name="l03702"></a><span class="lineno"> 3702</span>&#160;        {</div>
<div class="line"><a name="l03703"></a><span class="lineno"> 3703</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="../../d3/d3a/jobs_8h.html#a4f29476eb81762940d28edc76520c035">PALIVE</a> (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>) == 0)</div>
<div class="line"><a name="l03704"></a><span class="lineno"> 3704</span>&#160;            <span class="keywordflow">continue</span>;       <span class="comment">/* avoid pid recycling problem */</span></div>
<div class="line"><a name="l03705"></a><span class="lineno"> 3705</span>&#160;          <a class="code" href="../../d8/da5/musl_2src_2signal_2kill_8c.html#a4539db972bcf3dd8c8b429af0dc3789d">kill</a> (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;pid, sig);</div>
<div class="line"><a name="l03706"></a><span class="lineno"> 3706</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="../../d3/d3a/jobs_8h.html#aa950db8c4a3fa33f105de7e9526696f6">PEXITED</a> (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>) &amp;&amp; (sig == <a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a682182a5e5f38fd61f4311501e9dac5d">SIGTERM</a> || sig == <a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a136c64ec2d1306de745e39d6aee362ca">SIGHUP</a>))</div>
<div class="line"><a name="l03707"></a><span class="lineno"> 3707</span>&#160;            <a class="code" href="../../d8/da5/musl_2src_2signal_2kill_8c.html#a4539db972bcf3dd8c8b429af0dc3789d">kill</a> (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;pid, <a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a024f43063003e753afc6cca1acd6e104">SIGCONT</a>);</div>
<div class="line"><a name="l03708"></a><span class="lineno"> 3708</span>&#160;          <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> = <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;next;</div>
<div class="line"><a name="l03709"></a><span class="lineno"> 3709</span>&#160;        }</div>
<div class="line"><a name="l03710"></a><span class="lineno"> 3710</span>&#160;          <span class="keywordflow">while</span>  (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> != <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>]-&gt;<a class="code" href="../../d6/d90/hush_8c.html#d8/d53/structpipe">pipe</a>);</div>
<div class="line"><a name="l03711"></a><span class="lineno"> 3711</span>&#160;        }</div>
<div class="line"><a name="l03712"></a><span class="lineno"> 3712</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l03713"></a><span class="lineno"> 3713</span>&#160;        {</div>
<div class="line"><a name="l03714"></a><span class="lineno"> 3714</span>&#160;          result = <a class="code" href="../../d8/d8d/nojobs_8c.html#ac8c6f4edd72509256c94b90c17c95092">killpg</a> (<a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>]-&gt;pgrp, sig);</div>
<div class="line"><a name="l03715"></a><span class="lineno"> 3715</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> &amp;&amp; <a class="code" href="../../d3/d3a/jobs_8h.html#adc39613d1152c030190012a614856c69">STOPPED</a> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>) &amp;&amp; (sig == <a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a682182a5e5f38fd61f4311501e9dac5d">SIGTERM</a> || sig == <a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a136c64ec2d1306de745e39d6aee362ca">SIGHUP</a>))</div>
<div class="line"><a name="l03716"></a><span class="lineno"> 3716</span>&#160;        <a class="code" href="../../d8/d8d/nojobs_8c.html#ac8c6f4edd72509256c94b90c17c95092">killpg</a> (<a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>]-&gt;pgrp, <a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a024f43063003e753afc6cca1acd6e104">SIGCONT</a>);</div>
<div class="line"><a name="l03717"></a><span class="lineno"> 3717</span>&#160;          <span class="comment">/* If we&#39;re continuing a stopped job via kill rather than bg or</span></div>
<div class="line"><a name="l03718"></a><span class="lineno"> 3718</span>&#160;<span class="comment">         fg, emulate the `bg&#39; behavior. */</span></div>
<div class="line"><a name="l03719"></a><span class="lineno"> 3719</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> &amp;&amp; <a class="code" href="../../d3/d3a/jobs_8h.html#adc39613d1152c030190012a614856c69">STOPPED</a> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>) &amp;&amp; (sig == <a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a024f43063003e753afc6cca1acd6e104">SIGCONT</a>))</div>
<div class="line"><a name="l03720"></a><span class="lineno"> 3720</span>&#160;        {</div>
<div class="line"><a name="l03721"></a><span class="lineno"> 3721</span>&#160;          <a class="code" href="../../df/d8e/jobs_8c.html#a61bf5bf35899dc2c1e91cd412de1876b">set_job_running</a> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>);</div>
<div class="line"><a name="l03722"></a><span class="lineno"> 3722</span>&#160;          <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>]-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#af96c169abb39b4b3f9ccce91cb4b17dc">flags</a> &amp;= ~<a class="code" href="../../d3/d3a/jobs_8h.html#a76354a83b668afadd4704004a84925fc">J_FOREGROUND</a>;</div>
<div class="line"><a name="l03723"></a><span class="lineno"> 3723</span>&#160;          <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>]-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#af96c169abb39b4b3f9ccce91cb4b17dc">flags</a> |= <a class="code" href="../../d3/d3a/jobs_8h.html#ac67735d6cc995bbac83d5efe91a52125">J_NOTIFIED</a>;</div>
<div class="line"><a name="l03724"></a><span class="lineno"> 3724</span>&#160;        }</div>
<div class="line"><a name="l03725"></a><span class="lineno"> 3725</span>&#160;        }</div>
<div class="line"><a name="l03726"></a><span class="lineno"> 3726</span>&#160;    }</div>
<div class="line"><a name="l03727"></a><span class="lineno"> 3727</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l03728"></a><span class="lineno"> 3728</span>&#160;    result = <a class="code" href="../../d8/d8d/nojobs_8c.html#ac8c6f4edd72509256c94b90c17c95092">killpg</a> (<a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, sig);</div>
<div class="line"><a name="l03729"></a><span class="lineno"> 3729</span>&#160; </div>
<div class="line"><a name="l03730"></a><span class="lineno"> 3730</span>&#160;      <a class="code" href="../../de/d62/sig_8h.html#aa9262558d91ca8060065606f36167783">UNBLOCK_CHILD</a> (oset);</div>
<div class="line"><a name="l03731"></a><span class="lineno"> 3731</span>&#160;    }</div>
<div class="line"><a name="l03732"></a><span class="lineno"> 3732</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l03733"></a><span class="lineno"> 3733</span>&#160;    result = <a class="code" href="../../d8/da5/musl_2src_2signal_2kill_8c.html#a4539db972bcf3dd8c8b429af0dc3789d">kill</a> (<a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, sig);</div>
<div class="line"><a name="l03734"></a><span class="lineno"> 3734</span>&#160; </div>
<div class="line"><a name="l03735"></a><span class="lineno"> 3735</span>&#160;  <span class="keywordflow">return</span> (result);</div>
<div class="line"><a name="l03736"></a><span class="lineno"> 3736</span>&#160;}</div>
<div class="ttc" id="ajobs_8c_html_a61bf5bf35899dc2c1e91cd412de1876b"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a61bf5bf35899dc2c1e91cd412de1876b">set_job_running</a></div><div class="ttdeci">static void set_job_running(int job)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l03516">jobs.c:3516</a></div></div>
<div class="ttc" id="ajobs_8h_html_aa950db8c4a3fa33f105de7e9526696f6"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#aa950db8c4a3fa33f105de7e9526696f6">PEXITED</a></div><div class="ttdeci">#define PEXITED(p)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00083">jobs.h:83</a></div></div>
<div class="ttc" id="ajobs_8h_html_ac67735d6cc995bbac83d5efe91a52125"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#ac67735d6cc995bbac83d5efe91a52125">J_NOTIFIED</a></div><div class="ttdeci">#define J_NOTIFIED</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00106">jobs.h:106</a></div></div>
<div class="ttc" id="alibc_2include_2signal_8h_html_a682182a5e5f38fd61f4311501e9dac5d"><div class="ttname"><a href="../../df/dff/libc_2include_2signal_8h.html#a682182a5e5f38fd61f4311501e9dac5d">SIGTERM</a></div><div class="ttdeci">#define SIGTERM</div><div class="ttdoc">Termination signal.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dff/libc_2include_2signal_8h_source.html#l00052">signal.h:52</a></div></div>
<div class="ttc" id="ameta_8h_html_d3/d08/structgroup"><div class="ttname"><a href="../../dd/dbc/meta_8h.html#d3/d08/structgroup">group</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d47/grp_8h_source.html#l00019">grp.h:19</a></div></div>
<div class="ttc" id="ashell_8h_html_a24d155899d8cc037505383c1016dbd65"><div class="ttname"><a href="../../df/d03/shell_8h.html#a24d155899d8cc037505383c1016dbd65">EXECUTION_SUCCESS</a></div><div class="ttdeci">#define EXECUTION_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d03/shell_8h_source.html#l00053">shell.h:53</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../de/d62/sig_8h_source.html#l00100">BLOCK_CHILD</a>, <a class="el" href="../../df/d03/shell_8h_source.html#l00053">EXECUTION_SUCCESS</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01711">find_pipeline()</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00125">job::flags</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00105">J_FOREGROUND</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00106">J_NOTIFIED</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00183">jobs</a>, <a class="el" href="../../d8/da5/musl_2src_2signal_2kill_8c_source.html#l00004">kill()</a>, <a class="el" href="../../d8/d8d/nojobs_8c_source.html#l00057">killpg</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00193">NO_JOB</a>, <a class="el" href="../../d8/d64/glob__loop_8c_source.html#l00031">p</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00081">PALIVE</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00083">PEXITED</a>, <a class="el" href="../../d0/d43/mconf_8c_source.html#l00450">pid</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00122">job::pipe</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l03516">set_job_running()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00194">shell_pgrp</a>, <a class="el" href="../../df/dff/libc_2include_2signal_8h_source.html#l00061">SIGCONT</a>, <a class="el" href="../../df/dff/libc_2include_2signal_8h_source.html#l00010">SIGHUP</a>, <a class="el" href="../../df/dff/libc_2include_2signal_8h_source.html#l00052">SIGTERM</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00098">STOPPED</a>, and <a class="el" href="../../de/d62/sig_8h_source.html#l00101">UNBLOCK_CHILD</a>.</p>

</div>
</div>
<a id="ac165de0465f02a6ff7a7b5c705837bcf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac165de0465f02a6ff7a7b5c705837bcf">&#9670;&nbsp;</a></span>list_all_jobs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void list_all_jobs </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>format</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l02109">2109</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;{</div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#a47c393729bc38de011d2422746de634c">cleanup_dead_jobs</a> ();</div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#aafea484f3bce52ca817d92f7c7b833ed">map_over_jobs</a> (<a class="code" href="../../df/d8e/jobs_8c.html#a86dc11f7ce9b7fa8cb388f1e9029ac46">print_job</a>, <a class="code" href="../../d7/dd7/libbb_8h.html#ad09bf069f1dc789b35e313c3e2748329">format</a>, -1);</div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;}</div>
<div class="ttc" id="ajobs_8c_html_a47c393729bc38de011d2422746de634c"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a47c393729bc38de011d2422746de634c">cleanup_dead_jobs</a></div><div class="ttdeci">static void cleanup_dead_jobs()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l01210">jobs.c:1210</a></div></div>
<div class="ttc" id="ajobs_8c_html_a86dc11f7ce9b7fa8cb388f1e9029ac46"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a86dc11f7ce9b7fa8cb388f1e9029ac46">print_job</a></div><div class="ttdeci">static int print_job(JOB *job, int format, int state, int job_index)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l02072">jobs.c:2072</a></div></div>
<div class="ttc" id="ajobs_8c_html_aafea484f3bce52ca817d92f7c7b833ed"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#aafea484f3bce52ca817d92f7c7b833ed">map_over_jobs</a></div><div class="ttdeci">static int map_over_jobs(sh_job_map_func_t *func, int arg1, int arg2)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l01596">jobs.c:1596</a></div></div>
<div class="ttc" id="alibbb_8h_html_ad09bf069f1dc789b35e313c3e2748329"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#ad09bf069f1dc789b35e313c3e2748329">format</a></div><div class="ttdeci">void format(printf, 1, 2))) FAST_FUNC</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d8e/jobs_8c_source.html#l01210">cleanup_dead_jobs()</a>, <a class="el" href="../../d7/dd7/libbb_8h.html#ad09bf069f1dc789b35e313c3e2748329">format()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01596">map_over_jobs()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l02072">print_job()</a>.</p>

</div>
</div>
<a id="ae858994fe6f851d06889c330f0372bfb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae858994fe6f851d06889c330f0372bfb">&#9670;&nbsp;</a></span>list_one_job()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void list_one_job </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d3a/jobs_8h.html#ad1f8bdd512539c00ae7093dfcbe0a473">JOB</a> *&#160;</td>
          <td class="paramname"><em>job</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ignore</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>job_index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l02082">2082</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;{</div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#af63ad360618b0a85b34755c7bc513b08">pretty_print_job</a> (job_index, <a class="code" href="../../d7/dd7/libbb_8h.html#ad09bf069f1dc789b35e313c3e2748329">format</a>, <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#a0c0ef221f95f64e8632451312fd18cc8">stdout</a>);</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#a47c393729bc38de011d2422746de634c">cleanup_dead_jobs</a> ();</div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;}</div>
<div class="ttc" id="ajobs_8c_html_af63ad360618b0a85b34755c7bc513b08"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#af63ad360618b0a85b34755c7bc513b08">pretty_print_job</a></div><div class="ttdeci">static void pretty_print_job(int job_index, int format, FILE *stream)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l02034">jobs.c:2034</a></div></div>
<div class="ttc" id="alibc_2include_2stdio_8h_html_a0c0ef221f95f64e8632451312fd18cc8"><div class="ttname"><a href="../../dc/d4d/libc_2include_2stdio_8h.html#a0c0ef221f95f64e8632451312fd18cc8">stdout</a></div><div class="ttdeci">#define stdout</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4d/libc_2include_2stdio_8h_source.html#l00057">stdio.h:57</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d8e/jobs_8c_source.html#l01210">cleanup_dead_jobs()</a>, <a class="el" href="../../d7/dd7/libbb_8h.html#ad09bf069f1dc789b35e313c3e2748329">format()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02034">pretty_print_job()</a>, and <a class="el" href="../../dc/d4d/libc_2include_2stdio_8h_source.html#l00057">stdout</a>.</p>

</div>
</div>
<a id="a85b9d5bdb58ebb4c7556f9f4350d557e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85b9d5bdb58ebb4c7556f9f4350d557e">&#9670;&nbsp;</a></span>list_running_jobs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void list_running_jobs </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>format</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l02099">2099</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;{</div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#a47c393729bc38de011d2422746de634c">cleanup_dead_jobs</a> ();</div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#aafea484f3bce52ca817d92f7c7b833ed">map_over_jobs</a> (<a class="code" href="../../df/d8e/jobs_8c.html#a86dc11f7ce9b7fa8cb388f1e9029ac46">print_job</a>, <a class="code" href="../../d7/dd7/libbb_8h.html#ad09bf069f1dc789b35e313c3e2748329">format</a>, (<span class="keywordtype">int</span>)<a class="code" href="../../d3/d3a/jobs_8h.html#a27f134c9d8392fc50ee339c518707f57a1bf5a4892e9bb413f0dc598c6764541b">JRUNNING</a>);</div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d8e/jobs_8c_source.html#l01210">cleanup_dead_jobs()</a>, <a class="el" href="../../d7/dd7/libbb_8h.html#ad09bf069f1dc789b35e313c3e2748329">format()</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00094">JRUNNING</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01596">map_over_jobs()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l02072">print_job()</a>.</p>

</div>
</div>
<a id="a445f3a091027fd8aed287e6463e92283"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a445f3a091027fd8aed287e6463e92283">&#9670;&nbsp;</a></span>list_stopped_jobs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void list_stopped_jobs </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>format</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l02091">2091</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;{</div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#a47c393729bc38de011d2422746de634c">cleanup_dead_jobs</a> ();</div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#aafea484f3bce52ca817d92f7c7b833ed">map_over_jobs</a> (<a class="code" href="../../df/d8e/jobs_8c.html#a86dc11f7ce9b7fa8cb388f1e9029ac46">print_job</a>, <a class="code" href="../../d7/dd7/libbb_8h.html#ad09bf069f1dc789b35e313c3e2748329">format</a>, (<span class="keywordtype">int</span>)<a class="code" href="../../d3/d3a/jobs_8h.html#a27f134c9d8392fc50ee339c518707f57a55fea56f3156409573084fce0c920da7">JSTOPPED</a>);</div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d8e/jobs_8c_source.html#l01210">cleanup_dead_jobs()</a>, <a class="el" href="../../d7/dd7/libbb_8h.html#ad09bf069f1dc789b35e313c3e2748329">format()</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00094">JSTOPPED</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01596">map_over_jobs()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l02072">print_job()</a>.</p>

</div>
</div>
<a id="ab6ee1058c7a454b7e482ce8fa34ddbb7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6ee1058c7a454b7e482ce8fa34ddbb7">&#9670;&nbsp;</a></span>make_child()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a> make_child </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>command</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l02121">2121</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;{</div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;  <span class="keywordtype">int</span> async_p, forksleep;</div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;  <a class="code" href="../../d8/d90/sigset__t_8h.html#a9140a5882f847f67b8155c759ac6aa05">sigset_t</a> set, oset, termset, chldset, oset_copy;</div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;  <a class="code" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a> <a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>;</div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;  <a class="code" href="../../dd/db7/bash_2lib_2readline_2signals_8c.html#a1f8d6bb6b9aaad1c21141fc327620e99">SigHandler</a> *oterm;</div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160; </div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;  <a class="code" href="../../db/d82/sigemptyset_8c.html#a5925352f90eb589393274fa0376d7def">sigemptyset</a> (&amp;oset_copy);</div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;  <a class="code" href="../../da/d12/sig_8c.html#a011fc3b4395063b580099bf602135a22">sigprocmask</a> (<a class="code" href="../../de/d62/sig_8h.html#a927f6ae16379576d638006c7498ac5d7">SIG_BLOCK</a>, (<a class="code" href="../../d8/d90/sigset__t_8h.html#a9140a5882f847f67b8155c759ac6aa05">sigset_t</a> *)<a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;oset_copy);</div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;  <a class="code" href="../../d1/d7b/sigaddset_8c.html#aba080a9ab72ac6d079ff0bf8ac9b23f4">sigaddset</a> (&amp;oset_copy, <a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a682182a5e5f38fd61f4311501e9dac5d">SIGTERM</a>);</div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160; </div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;  <span class="comment">/* Block SIGTERM here and unblock in child after fork resets the</span></div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;<span class="comment">     set of pending signals. */</span></div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;  <a class="code" href="../../db/d82/sigemptyset_8c.html#a5925352f90eb589393274fa0376d7def">sigemptyset</a> (&amp;set);</div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;  <a class="code" href="../../d1/d7b/sigaddset_8c.html#aba080a9ab72ac6d079ff0bf8ac9b23f4">sigaddset</a> (&amp;set, <a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a0e63521a64cc8bc2b91d36a87d32c9f8">SIGCHLD</a>);</div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;  <a class="code" href="../../d1/d7b/sigaddset_8c.html#aba080a9ab72ac6d079ff0bf8ac9b23f4">sigaddset</a> (&amp;set, <a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a487309e3e9e0527535644115204a639a">SIGINT</a>);</div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;  <a class="code" href="../../d1/d7b/sigaddset_8c.html#aba080a9ab72ac6d079ff0bf8ac9b23f4">sigaddset</a> (&amp;set, <a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a682182a5e5f38fd61f4311501e9dac5d">SIGTERM</a>);</div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160; </div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;  <a class="code" href="../../db/d82/sigemptyset_8c.html#a5925352f90eb589393274fa0376d7def">sigemptyset</a> (&amp;oset);</div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;  <a class="code" href="../../da/d12/sig_8c.html#a011fc3b4395063b580099bf602135a22">sigprocmask</a> (<a class="code" href="../../de/d62/sig_8h.html#a927f6ae16379576d638006c7498ac5d7">SIG_BLOCK</a>, &amp;set, &amp;oset);</div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160; </div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;  <span class="comment">/* Blocked in the parent, child will receive it after unblocking SIGTERM */</span></div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d6/d4f/shell_8c.html#ae2c20c1668999fe88f089ad20436f425">interactive_shell</a>)</div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;    oterm = <a class="code" href="../../de/d62/sig_8h.html#aefdb4e4f01f2aa4133f26dbabcc8358b">set_signal_handler</a> (<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a682182a5e5f38fd61f4311501e9dac5d">SIGTERM</a>, <a class="code" href="../../de/d2b/musl_2include_2signal_8h.html#a27d5dc561093d6243542e6a2465bc0f8">SIG_DFL</a>);</div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160; </div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#a52091bff84389f379c1dfae1369c019e">making_children</a> ();</div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160; </div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;  async_p = (<a class="code" href="../../db/d66/dumpkmap_8c.html#abb0829cce9dd20a40ae0d86890ae85c6">flags</a> &amp; <a class="code" href="../../d3/d3a/jobs_8h.html#a599efb6d8d8213160548a82f20c0a573">FORK_ASYNC</a>);</div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;  forksleep = 1;</div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160; </div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;<span class="preprocessor">#if defined (BUFFERED_INPUT)</span></div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;  <span class="comment">/* If default_buffered_input is active, we are reading a script.  If</span></div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;<span class="comment">     the command is asynchronous, we have already duplicated /dev/null</span></div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;<span class="comment">     as fd 0, but have not changed the buffered stream corresponding to</span></div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;<span class="comment">     the old fd 0.  We don&#39;t want to sync the stream in this case. */</span></div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;  <span class="keywordflow">if</span> (default_buffered_input != -1 &amp;&amp;</div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;      (!async_p || default_buffered_input &gt; 0))</div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;    sync_buffered_stream (default_buffered_input);</div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* BUFFERED_INPUT */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160; </div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;  <span class="comment">/* Create the child, handle severe errors.  Retry on EAGAIN. */</span></div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;  <span class="keywordflow">while</span> ((<a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a> = <a class="code" href="../../d3/d3a/jobs_8h.html#a04629be7bde8f11cbf56e09e66a62dcc">fork</a> ()) &lt; 0 &amp;&amp; <a class="code" href="../../df/d8e/jobs_8c.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> == <a class="code" href="../../d7/d8c/libc_2include_2errno_8h.html#af0fac1cea1165b4debec7f686edf3313">EAGAIN</a> &amp;&amp; forksleep &lt; <a class="code" href="../../d3/d3a/jobs_8h.html#a6f659f402b7f03b2fd393f9351e3625a">FORKSLEEP_MAX</a>)</div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;    {</div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;      <span class="comment">/* bash-4.2 */</span></div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;      <span class="comment">/* keep SIGTERM blocked until we reset the handler to SIG_IGN */</span></div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;      <a class="code" href="../../da/d12/sig_8c.html#a011fc3b4395063b580099bf602135a22">sigprocmask</a> (<a class="code" href="../../de/d62/sig_8h.html#a37750b78b7ae75fe02ad26e70f6cc845">SIG_SETMASK</a>, &amp;oset_copy, (<a class="code" href="../../d8/d90/sigset__t_8h.html#a9140a5882f847f67b8155c759ac6aa05">sigset_t</a> *)<a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;      <span class="comment">/* If we can&#39;t create any children, try to reap some dead ones. */</span></div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#a84e054741c4b7e3132b43efce8064090">waitchld</a> (-1, 0);</div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160; </div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> = <a class="code" href="../../d7/d8c/libc_2include_2errno_8h.html#af0fac1cea1165b4debec7f686edf3313">EAGAIN</a>;       <span class="comment">/* restore errno */</span></div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;      <a class="code" href="../../db/dcc/error_8c.html#a3dc8bd9b2e1ecb245420a3dba9f5e8bd">sys_error</a> (<span class="stringliteral">&quot;fork: retry&quot;</span>);</div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160; </div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dc/dec/libc_2include_2unistd_8h.html#a69c97039c9ec10a30e5edbdf365e3bbd">sleep</a> (forksleep) != 0)</div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;      forksleep &lt;&lt;= 1;</div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160; </div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../db/dd4/sm__loop_8c.html#ad8a8526379dd4de818d3996d94785046">interrupt_state</a>)</div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;      <a class="code" href="../../da/d12/sig_8c.html#a011fc3b4395063b580099bf602135a22">sigprocmask</a> (<a class="code" href="../../de/d62/sig_8h.html#a37750b78b7ae75fe02ad26e70f6cc845">SIG_SETMASK</a>, &amp;set, (<a class="code" href="../../d8/d90/sigset__t_8h.html#a9140a5882f847f67b8155c759ac6aa05">sigset_t</a> *)<a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;    }</div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160; </div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a> != 0)</div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d6/d4f/shell_8c.html#ae2c20c1668999fe88f089ad20436f425">interactive_shell</a>)</div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;      <a class="code" href="../../de/d62/sig_8h.html#aefdb4e4f01f2aa4133f26dbabcc8358b">set_signal_handler</a> (<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a682182a5e5f38fd61f4311501e9dac5d">SIGTERM</a>, oterm);</div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160; </div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a> &lt; 0)</div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;    {</div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;      <a class="code" href="../../db/dcc/error_8c.html#a3dc8bd9b2e1ecb245420a3dba9f5e8bd">sys_error</a> (<span class="stringliteral">&quot;fork&quot;</span>);</div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160; </div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;      <span class="comment">/* Kill all of the processes in the current pipeline. */</span></div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#a56a3393f655f01d7c763be6f034b57b7">terminate_current_pipeline</a> ();</div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160; </div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;      <span class="comment">/* Discard the current pipeline, if any. */</span></div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a5efe88eb6aefb268d1259a51812164b2">the_pipeline</a>)</div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#ac29c70bbf156a302776a486f60cb31e0">kill_current_pipeline</a> ();</div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160; </div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;      <a class="code" href="../../d6/d4f/shell_8c.html#a0e02595d7cb801168220c4df0b64b5ed">set_exit_status</a> (<a class="code" href="../../df/d03/shell_8h.html#a881b045fcd4a18664d761f33edbcb9c6">EX_NOEXEC</a>);</div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;      <a class="code" href="../../da/d12/sig_8c.html#a0c1a46c1b65caedaa01c2823433bd3a8">throw_to_top_level</a> ();    <span class="comment">/* Reset signals, etc. */</span></div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;    }</div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160; </div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a> == 0)</div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;    {</div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;      <span class="comment">/* In the child.  Give this child the right process group, set the</span></div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;<span class="comment">     signals to the default state for a new process. */</span></div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;      <a class="code" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a> mypid;</div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160; </div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;      <a class="code" href="../../de/d3d/execute__cmd_8c.html#aacb323e3f246975470615959c2d8572e">subshell_environment</a> |= <a class="code" href="../../d0/d09/command_8h.html#adfa45447c15cae4d950ac8bd196087ca">SUBSHELL_IGNTRAP</a>;</div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160; </div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;      <span class="comment">/* If this ends up being changed to modify or use `command&#39; in the</span></div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;<span class="comment">     child process, go back and change callers who free `command&#39; in</span></div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;<span class="comment">     the child process when this returns. */</span></div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;      mypid = <a class="code" href="../../d3/d3a/jobs_8h.html#add1dc6545057b7f1c7f91352536fb060">getpid</a> ();</div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;<span class="preprocessor">#if defined (BUFFERED_INPUT)</span></div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;      <span class="comment">/* Close default_buffered_input if it&#39;s &gt; 0.  We don&#39;t close it if it&#39;s</span></div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;<span class="comment">     0 because that&#39;s the file descriptor used when redirecting input,</span></div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;<span class="comment">     and it&#39;s wrong to close the file in that case. */</span></div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;      <a class="code" href="../../d6/d4f/shell_8c.html#a6d7b9e420f5c24c3ba32be77071ee46f">unset_bash_input</a> (0);</div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* BUFFERED_INPUT */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160; </div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;      <a class="code" href="../../dd/d2b/quit_8h.html#adac07077d8a24f070b7ede34297e4796">CLRINTERRUPT</a>; <span class="comment">/* XXX - children have their own interrupt state */</span></div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160; </div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;      <span class="comment">/* Restore top-level signal mask, including unblocking SIGTERM */</span></div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;      <a class="code" href="../../da/d12/sig_8c.html#ab4dc305bfa0f615efb1f21524fb684e4">restore_sigmask</a> ();</div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;  </div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a3002cbcd4a652dec2c5cef5ff3da446f">job_control</a>)</div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;    {</div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;      <span class="comment">/* All processes in this pipeline belong in the same</span></div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;<span class="comment">         process group. */</span></div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160; </div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a4cf043826d84509527bdbcfbd5f68b68">pipeline_pgrp</a> == 0)   <span class="comment">/* This is the first child. */</span></div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;        <a class="code" href="../../df/d8e/jobs_8c.html#a4cf043826d84509527bdbcfbd5f68b68">pipeline_pgrp</a> = mypid;</div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160; </div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;      <span class="comment">/* Check for running command in backquotes. */</span></div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a4cf043826d84509527bdbcfbd5f68b68">pipeline_pgrp</a> == <a class="code" href="../../df/d8e/jobs_8c.html#a12352dc576f1c23274468beca1ccf916">shell_pgrp</a>)</div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;        <a class="code" href="../../df/d8e/jobs_8c.html#a0b224dea42fc99fc8f75137c74d10d8c">ignore_tty_job_signals</a> ();</div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;        <a class="code" href="../../df/d8e/jobs_8c.html#a35131fce775aec129aca6c1ea1127f97">default_tty_job_signals</a> ();</div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160; </div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;      <span class="comment">/* Set the process group before trying to mess with the terminal&#39;s</span></div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;<span class="comment">         process group.  This is mandated by POSIX. */</span></div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;      <span class="comment">/* This is in accordance with the Posix 1003.1 standard,</span></div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;<span class="comment">         section B.7.2.4, which says that trying to set the terminal</span></div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;<span class="comment">         process group with tcsetpgrp() to an unused pgrp value (like</span></div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;<span class="comment">         this would have for the first child) is an error.  Section</span></div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;<span class="comment">         B.4.3.3, p. 237 also covers this, in the context of job control</span></div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;<span class="comment">         shells. */</span></div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#af35bd0de8c2181231698de03bbdd58ca">setpgid</a> (mypid, <a class="code" href="../../df/d8e/jobs_8c.html#a4cf043826d84509527bdbcfbd5f68b68">pipeline_pgrp</a>) &lt; 0)</div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;        <a class="code" href="../../db/dcc/error_8c.html#a3dc8bd9b2e1ecb245420a3dba9f5e8bd">sys_error</a> (<a class="code" href="../../d7/dcd/bashintl_8h.html#a86a239addea586602343007a370bf8ad">_</a>(<span class="stringliteral">&quot;child setpgid (%ld to %ld)&quot;</span>), (<span class="keywordtype">long</span>)mypid, (<span class="keywordtype">long</span>)<a class="code" href="../../df/d8e/jobs_8c.html#a4cf043826d84509527bdbcfbd5f68b68">pipeline_pgrp</a>);</div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160; </div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;      <span class="comment">/* By convention (and assumption above), if</span></div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;<span class="comment">         pipeline_pgrp == shell_pgrp, we are making a child for</span></div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;<span class="comment">         command substitution.</span></div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;<span class="comment">         In this case, we don&#39;t want to give the terminal to the</span></div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;<span class="comment">         shell&#39;s process group (we could be in the middle of a</span></div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;<span class="comment">         pipeline, for example). */</span></div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;      <span class="keywordflow">if</span> ((<a class="code" href="../../db/d66/dumpkmap_8c.html#abb0829cce9dd20a40ae0d86890ae85c6">flags</a> &amp; <a class="code" href="../../d3/d3a/jobs_8h.html#ab1b52d429cdf0e39072e723b5171c990">FORK_NOTERM</a>) == 0 &amp;&amp; async_p == 0 &amp;&amp; <a class="code" href="../../df/d8e/jobs_8c.html#a4cf043826d84509527bdbcfbd5f68b68">pipeline_pgrp</a> != <a class="code" href="../../df/d8e/jobs_8c.html#a12352dc576f1c23274468beca1ccf916">shell_pgrp</a> &amp;&amp; ((<a class="code" href="../../de/d3d/execute__cmd_8c.html#aacb323e3f246975470615959c2d8572e">subshell_environment</a>&amp;(<a class="code" href="../../d0/d09/command_8h.html#abd94aff81c34160c8185303ebe67c539">SUBSHELL_ASYNC</a>|<a class="code" href="../../d0/d09/command_8h.html#a1f4bab590838fd1ce5e0e8a4ba0c6f0b">SUBSHELL_PIPE</a>)) == 0) &amp;&amp; <a class="code" href="../../df/d8e/jobs_8c.html#ad2b44c9005c5a931c29ae6588e237636">running_in_background</a> == 0)</div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;        <a class="code" href="../../df/d8e/jobs_8c.html#a8db3c891f1a77a1b3412544323ae6eb4">give_terminal_to</a> (<a class="code" href="../../df/d8e/jobs_8c.html#a4cf043826d84509527bdbcfbd5f68b68">pipeline_pgrp</a>, 0);</div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160; </div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;<span class="preprocessor">#if defined (PGRP_PIPE)</span></div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a4cf043826d84509527bdbcfbd5f68b68">pipeline_pgrp</a> == mypid)</div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;        pipe_read (pgrp_pipe);</div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;    }</div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;      <span class="keywordflow">else</span>          <span class="comment">/* Without job control... */</span></div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;    {</div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a4cf043826d84509527bdbcfbd5f68b68">pipeline_pgrp</a> == 0)</div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;        <a class="code" href="../../df/d8e/jobs_8c.html#a4cf043826d84509527bdbcfbd5f68b68">pipeline_pgrp</a> = <a class="code" href="../../df/d8e/jobs_8c.html#a12352dc576f1c23274468beca1ccf916">shell_pgrp</a>;</div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160; </div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;      <span class="comment">/* If these signals are set to SIG_DFL, we encounter the curious</span></div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;<span class="comment">         situation of an interactive ^Z to a running process *working*</span></div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;<span class="comment">         and stopping the process, but being unable to do anything with</span></div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;<span class="comment">         that process to change its state.  On the other hand, if they</span></div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;<span class="comment">         are set to SIG_IGN, jobs started from scripts do not stop when</span></div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;<span class="comment">         the shell running the script gets a SIGTSTP and stops. */</span></div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160; </div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#a35131fce775aec129aca6c1ea1127f97">default_tty_job_signals</a> ();</div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;    }</div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160; </div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;<span class="preprocessor">#if defined (PGRP_PIPE)</span></div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;      <span class="comment">/* Release the process group pipe, since our call to setpgid ()</span></div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;<span class="comment">     is done.  The last call to sh_closepipe is done in stop_pipeline. */</span></div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;      <a class="code" href="../../d1/dca/general_8c.html#a15a0132090e9b69be30a74639f45503e">sh_closepipe</a> (pgrp_pipe);</div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* PGRP_PIPE */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160; </div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;      <span class="comment">/* Don&#39;t set last_asynchronous_pid in the child */</span></div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160; </div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;<span class="preprocessor">#if defined (RECYCLES_PIDS)</span></div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a2819d9527c8d26be39bb531290f4b597">last_asynchronous_pid</a> == mypid)</div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;    <span class="comment">/* Avoid pid aliasing.  1 seems like a safe, unusual pid value. */</span></div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#a2819d9527c8d26be39bb531290f4b597">last_asynchronous_pid</a> = 1;</div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;    }</div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;    {</div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;      <span class="comment">/* In the parent.  Remember the pid of the child just created</span></div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;<span class="comment">     as the proper pgrp if this is the first child. */</span></div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160; </div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a3002cbcd4a652dec2c5cef5ff3da446f">job_control</a>)</div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;    {</div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a4cf043826d84509527bdbcfbd5f68b68">pipeline_pgrp</a> == 0)</div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;        {</div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;          <a class="code" href="../../df/d8e/jobs_8c.html#a4cf043826d84509527bdbcfbd5f68b68">pipeline_pgrp</a> = <a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>;</div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;          <span class="comment">/* Don&#39;t twiddle terminal pgrps in the parent!  This is the bug,</span></div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;<span class="comment">         not the good thing of twiddling them in the child! */</span></div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;          <span class="comment">/* give_terminal_to (pipeline_pgrp, 0); */</span></div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;        }</div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;      <span class="comment">/* This is done on the recommendation of the Rationale section of</span></div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;<span class="comment">         the POSIX 1003.1 standard, where it discusses job control and</span></div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;<span class="comment">         shells.  It is done to avoid possible race conditions. (Ref.</span></div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;<span class="comment">         1003.1 Rationale, section B.4.3.3, page 236). */</span></div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#af35bd0de8c2181231698de03bbdd58ca">setpgid</a> (<a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, <a class="code" href="../../df/d8e/jobs_8c.html#a4cf043826d84509527bdbcfbd5f68b68">pipeline_pgrp</a>);</div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;    }</div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;    {</div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a4cf043826d84509527bdbcfbd5f68b68">pipeline_pgrp</a> == 0)</div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;        <a class="code" href="../../df/d8e/jobs_8c.html#a4cf043826d84509527bdbcfbd5f68b68">pipeline_pgrp</a> = <a class="code" href="../../df/d8e/jobs_8c.html#a12352dc576f1c23274468beca1ccf916">shell_pgrp</a>;</div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;    }</div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160; </div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;      <span class="comment">/* Place all processes into the jobs array regardless of the</span></div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;<span class="comment">     state of job_control. */</span></div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#ac5deaaec3f7af2c959d1508e9f5f8fce">add_process</a> (<a class="code" href="../../d6/d90/hush_8c.html#dc/d76/structcommand">command</a>, <a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>);</div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160; </div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;      <span class="keywordflow">if</span> (async_p)</div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#a2819d9527c8d26be39bb531290f4b597">last_asynchronous_pid</a> = <a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>;</div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;<span class="preprocessor">#if defined (RECYCLES_PIDS)</span></div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a2819d9527c8d26be39bb531290f4b597">last_asynchronous_pid</a> == <a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>)</div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;    <span class="comment">/* Avoid pid aliasing.  1 seems like a safe, unusual pid value. */</span></div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#a2819d9527c8d26be39bb531290f4b597">last_asynchronous_pid</a> = 1;</div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160; </div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;      <span class="comment">/* Delete the saved status for any job containing this PID in case it&#39;s</span></div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;<span class="comment">     been reused. */</span></div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#a5b6e7c7a458539929974e288a59a2f38">delete_old_job</a> (<a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>);</div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160; </div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;      <span class="comment">/* Perform the check for pid reuse unconditionally.  Some systems reuse</span></div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;<span class="comment">     PIDs before giving a process CHILD_MAX/_SC_CHILD_MAX unique ones. */</span></div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#a1944a12e8c62f7d7a9b419a9228a89a9">bgp_delete</a> (<a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>);     <span class="comment">/* new process, discard any saved status */</span></div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160; </div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#a6014bc30456423f628a211bf8007fbe0">last_made_pid</a> = <a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>;</div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160; </div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;      <span class="comment">/* keep stats */</span></div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#abecf408f2e3333f79205219911e32243">c_totforked</a>++;</div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a62da0e16fcd2ac8946942b8502ed3aef">c_living</a>++;</div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160; </div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;      <span class="comment">/* Unblock SIGTERM, SIGINT, and SIGCHLD unless creating a pipeline, in</span></div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;<span class="comment">     which case SIGCHLD remains blocked until all commands in the pipeline</span></div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;<span class="comment">     have been created (execute_cmd.c:execute_pipeline()). */</span></div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;      <a class="code" href="../../da/d12/sig_8c.html#a011fc3b4395063b580099bf602135a22">sigprocmask</a> (<a class="code" href="../../de/d62/sig_8h.html#a37750b78b7ae75fe02ad26e70f6cc845">SIG_SETMASK</a>, &amp;oset, (<a class="code" href="../../d8/d90/sigset__t_8h.html#a9140a5882f847f67b8155c759ac6aa05">sigset_t</a> *)<a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;    }</div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160; </div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;  <span class="keywordflow">return</span> (<a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>);</div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;}</div>
<div class="ttc" id="acommand_8h_html_a1f4bab590838fd1ce5e0e8a4ba0c6f0b"><div class="ttname"><a href="../../d0/d09/command_8h.html#a1f4bab590838fd1ce5e0e8a4ba0c6f0b">SUBSHELL_PIPE</a></div><div class="ttdeci">#define SUBSHELL_PIPE</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d09/command_8h_source.html#l00124">command.h:124</a></div></div>
<div class="ttc" id="acommand_8h_html_abd94aff81c34160c8185303ebe67c539"><div class="ttname"><a href="../../d0/d09/command_8h.html#abd94aff81c34160c8185303ebe67c539">SUBSHELL_ASYNC</a></div><div class="ttdeci">#define SUBSHELL_ASYNC</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d09/command_8h_source.html#l00120">command.h:120</a></div></div>
<div class="ttc" id="acommand_8h_html_adfa45447c15cae4d950ac8bd196087ca"><div class="ttname"><a href="../../d0/d09/command_8h.html#adfa45447c15cae4d950ac8bd196087ca">SUBSHELL_IGNTRAP</a></div><div class="ttdeci">#define SUBSHELL_IGNTRAP</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d09/command_8h_source.html#l00128">command.h:128</a></div></div>
<div class="ttc" id="ageneral_8c_html_a15a0132090e9b69be30a74639f45503e"><div class="ttname"><a href="../../d1/dca/general_8c.html#a15a0132090e9b69be30a74639f45503e">sh_closepipe</a></div><div class="ttdeci">int sh_closepipe(int *pv)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dca/general_8c_source.html#l00730">general.c:730</a></div></div>
<div class="ttc" id="ajobs_8c_html_a0b224dea42fc99fc8f75137c74d10d8c"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a0b224dea42fc99fc8f75137c74d10d8c">ignore_tty_job_signals</a></div><div class="ttdeci">void ignore_tty_job_signals()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l02358">jobs.c:2358</a></div></div>
<div class="ttc" id="ajobs_8c_html_a1944a12e8c62f7d7a9b419a9228a89a9"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a1944a12e8c62f7d7a9b419a9228a89a9">bgp_delete</a></div><div class="ttdeci">static int bgp_delete(pid_t pid)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l00892">jobs.c:892</a></div></div>
<div class="ttc" id="ajobs_8c_html_a2819d9527c8d26be39bb531290f4b597"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a2819d9527c8d26be39bb531290f4b597">last_asynchronous_pid</a></div><div class="ttdeci">volatile pid_t last_asynchronous_pid</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l00216">jobs.c:216</a></div></div>
<div class="ttc" id="ajobs_8c_html_a35131fce775aec129aca6c1ea1127f97"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a35131fce775aec129aca6c1ea1127f97">default_tty_job_signals</a></div><div class="ttdeci">void default_tty_job_signals()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l02370">jobs.c:2370</a></div></div>
<div class="ttc" id="ajobs_8c_html_a4cf043826d84509527bdbcfbd5f68b68"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a4cf043826d84509527bdbcfbd5f68b68">pipeline_pgrp</a></div><div class="ttdeci">pid_t pipeline_pgrp</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l00203">jobs.c:203</a></div></div>
<div class="ttc" id="ajobs_8c_html_a52091bff84389f379c1dfae1369c019e"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a52091bff84389f379c1dfae1369c019e">making_children</a></div><div class="ttdeci">void making_children()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l00421">jobs.c:421</a></div></div>
<div class="ttc" id="ajobs_8c_html_a56a3393f655f01d7c763be6f034b57b7"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a56a3393f655f01d7c763be6f034b57b7">terminate_current_pipeline</a></div><div class="ttdeci">void terminate_current_pipeline()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l01632">jobs.c:1632</a></div></div>
<div class="ttc" id="ajobs_8c_html_a5b6e7c7a458539929974e288a59a2f38"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a5b6e7c7a458539929974e288a59a2f38">delete_old_job</a></div><div class="ttdeci">static void delete_old_job(pid_t pid)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l01265">jobs.c:1265</a></div></div>
<div class="ttc" id="ajobs_8c_html_a6014bc30456423f628a211bf8007fbe0"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a6014bc30456423f628a211bf8007fbe0">last_made_pid</a></div><div class="ttdeci">volatile pid_t last_made_pid</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l00213">jobs.c:213</a></div></div>
<div class="ttc" id="ajobs_8c_html_a84e054741c4b7e3132b43efce8064090"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a84e054741c4b7e3132b43efce8064090">waitchld</a></div><div class="ttdeci">static int waitchld(pid_t wpid, int block)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l03764">jobs.c:3764</a></div></div>
<div class="ttc" id="ajobs_8c_html_ac29c70bbf156a302776a486f60cb31e0"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#ac29c70bbf156a302776a486f60cb31e0">kill_current_pipeline</a></div><div class="ttdeci">void kill_current_pipeline()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l01680">jobs.c:1680</a></div></div>
<div class="ttc" id="ajobs_8c_html_ac5deaaec3f7af2c959d1508e9f5f8fce"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#ac5deaaec3f7af2c959d1508e9f5f8fce">add_process</a></div><div class="ttdeci">static void add_process(char *name, pid_t pid)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l01488">jobs.c:1488</a></div></div>
<div class="ttc" id="ajobs_8h_html_a04629be7bde8f11cbf56e09e66a62dcc"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#a04629be7bde8f11cbf56e09e66a62dcc">fork</a></div><div class="ttdeci">pid_t fork()</div></div>
<div class="ttc" id="ajobs_8h_html_a599efb6d8d8213160548a82f20c0a573"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#a599efb6d8d8213160548a82f20c0a573">FORK_ASYNC</a></div><div class="ttdeci">#define FORK_ASYNC</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00204">jobs.h:204</a></div></div>
<div class="ttc" id="ajobs_8h_html_a62da0e16fcd2ac8946942b8502ed3aef"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#a62da0e16fcd2ac8946942b8502ed3aef">jobstats::c_living</a></div><div class="ttdeci">int c_living</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00137">jobs.h:137</a></div></div>
<div class="ttc" id="ajobs_8h_html_a6f659f402b7f03b2fd393f9351e3625a"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#a6f659f402b7f03b2fd393f9351e3625a">FORKSLEEP_MAX</a></div><div class="ttdeci">#define FORKSLEEP_MAX</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00051">jobs.h:51</a></div></div>
<div class="ttc" id="ajobs_8h_html_ab1b52d429cdf0e39072e723b5171c990"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#ab1b52d429cdf0e39072e723b5171c990">FORK_NOTERM</a></div><div class="ttdeci">#define FORK_NOTERM</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00206">jobs.h:206</a></div></div>
<div class="ttc" id="ajobs_8h_html_abecf408f2e3333f79205219911e32243"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#abecf408f2e3333f79205219911e32243">jobstats::c_totforked</a></div><div class="ttdeci">int c_totforked</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00141">jobs.h:141</a></div></div>
<div class="ttc" id="alibc_2include_2errno_8h_html_af0fac1cea1165b4debec7f686edf3313"><div class="ttname"><a href="../../d7/d8c/libc_2include_2errno_8h.html#af0fac1cea1165b4debec7f686edf3313">EAGAIN</a></div><div class="ttdeci">#define EAGAIN</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d8c/libc_2include_2errno_8h_source.html#l00014">errno.h:14</a></div></div>
<div class="ttc" id="alibc_2include_2unistd_8h_html_a69c97039c9ec10a30e5edbdf365e3bbd"><div class="ttname"><a href="../../dc/dec/libc_2include_2unistd_8h.html#a69c97039c9ec10a30e5edbdf365e3bbd">sleep</a></div><div class="ttdeci">unsigned int sleep(unsigned int seconds)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dfe/libc_2src_2std_2uni_2sleep_8c_source.html#l00006">sleep.c:6</a></div></div>
<div class="ttc" id="aquit_8h_html_adac07077d8a24f070b7ede34297e4796"><div class="ttname"><a href="../../dd/d2b/quit_8h.html#adac07077d8a24f070b7ede34297e4796">CLRINTERRUPT</a></div><div class="ttdeci">#define CLRINTERRUPT</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d2b/quit_8h_source.html#l00042">quit.h:42</a></div></div>
<div class="ttc" id="ashell_8c_html_a0e02595d7cb801168220c4df0b64b5ed"><div class="ttname"><a href="../../d6/d4f/shell_8c.html#a0e02595d7cb801168220c4df0b64b5ed">set_exit_status</a></div><div class="ttdeci">void set_exit_status(int s)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d4f/shell_8c_source.html#l01075">shell.c:1075</a></div></div>
<div class="ttc" id="ashell_8c_html_a6d7b9e420f5c24c3ba32be77071ee46f"><div class="ttname"><a href="../../d6/d4f/shell_8c.html#a6d7b9e420f5c24c3ba32be77071ee46f">unset_bash_input</a></div><div class="ttdeci">void unset_bash_input(int check_zero)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d4f/shell_8c_source.html#l01767">shell.c:1767</a></div></div>
<div class="ttc" id="ashell_8h_html_a881b045fcd4a18664d761f33edbcb9c6"><div class="ttname"><a href="../../df/d03/shell_8h.html#a881b045fcd4a18664d761f33edbcb9c6">EX_NOEXEC</a></div><div class="ttdeci">#define EX_NOEXEC</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d03/shell_8h_source.html#l00064">shell.h:64</a></div></div>
<div class="ttc" id="asig_8c_html_a0c1a46c1b65caedaa01c2823433bd3a8"><div class="ttname"><a href="../../da/d12/sig_8c.html#a0c1a46c1b65caedaa01c2823433bd3a8">throw_to_top_level</a></div><div class="ttdeci">void throw_to_top_level()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d12/sig_8c_source.html#l00401">sig.c:401</a></div></div>
<div class="ttc" id="asig_8c_html_ab4dc305bfa0f615efb1f21524fb684e4"><div class="ttname"><a href="../../da/d12/sig_8c.html#ab4dc305bfa0f615efb1f21524fb684e4">restore_sigmask</a></div><div class="ttdeci">void restore_sigmask()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d12/sig_8c_source.html#l00483">sig.c:483</a></div></div>
<div class="ttc" id="asm__loop_8c_html_ad8a8526379dd4de818d3996d94785046"><div class="ttname"><a href="../../db/dd4/sm__loop_8c.html#ad8a8526379dd4de818d3996d94785046">interrupt_state</a></div><div class="ttdeci">int interrupt_state</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d12/sig_8c_source.html#l00066">sig.c:66</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/dcd/bashintl_8h_source.html#l00036">_</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01488">add_process()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00892">bgp_delete()</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00137">jobstats::c_living</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00141">jobstats::c_totforked</a>, <a class="el" href="../../dd/d2b/quit_8h_source.html#l00042">CLRINTERRUPT</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02370">default_tty_job_signals()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01265">delete_old_job()</a>, <a class="el" href="../../d7/d8c/libc_2include_2errno_8h_source.html#l00014">EAGAIN</a>, <a class="el" href="../../df/d8e/jobs_8c.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../df/d03/shell_8h_source.html#l00064">EX_NOEXEC</a>, <a class="el" href="../../db/d66/dumpkmap_8c.html#abb0829cce9dd20a40ae0d86890ae85c6">flags</a>, <a class="el" href="../../d3/d3a/jobs_8h.html#a04629be7bde8f11cbf56e09e66a62dcc">fork()</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00204">FORK_ASYNC</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00206">FORK_NOTERM</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00051">FORKSLEEP_MAX</a>, <a class="el" href="../../d3/d3a/jobs_8h.html#add1dc6545057b7f1c7f91352536fb060">getpid()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04641">give_terminal_to()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02358">ignore_tty_job_signals()</a>, <a class="el" href="../../d6/d4f/shell_8c_source.html#l00142">interactive_shell</a>, <a class="el" href="../../da/d12/sig_8c_source.html#l00066">interrupt_state</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00222">job_control</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00175">js</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01680">kill_current_pipeline()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00216">last_asynchronous_pid</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00213">last_made_pid</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00421">making_children()</a>, <a class="el" href="../../d9/d14/general_8h_source.html#l00053">NULL</a>, <a class="el" href="../../d0/d43/mconf_8c_source.html#l00450">pid</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00203">pipeline_pgrp</a>, <a class="el" href="../../da/d12/sig_8c_source.html#l00483">restore_sigmask()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00225">running_in_background</a>, <a class="el" href="../../d6/d4f/shell_8c_source.html#l01075">set_exit_status()</a>, <a class="el" href="../../de/d62/sig_8h_source.html#l00043">set_signal_handler</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00354">setpgid</a>, <a class="el" href="../../d1/dca/general_8c_source.html#l00730">sh_closepipe()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00194">shell_pgrp</a>, <a class="el" href="../../de/d62/sig_8h_source.html#l00058">SIG_BLOCK</a>, <a class="el" href="../../de/d2b/musl_2include_2signal_8h_source.html#l00284">SIG_DFL</a>, <a class="el" href="../../de/d62/sig_8h_source.html#l00059">SIG_SETMASK</a>, <a class="el" href="../../d1/d7b/sigaddset_8c_source.html#l00004">sigaddset()</a>, <a class="el" href="../../df/dff/libc_2include_2signal_8h_source.html#l00058">SIGCHLD</a>, <a class="el" href="../../db/d82/sigemptyset_8c_source.html#l00004">sigemptyset()</a>, <a class="el" href="../../df/dff/libc_2include_2signal_8h_source.html#l00013">SIGINT</a>, <a class="el" href="../../da/d12/sig_8c_source.html#l00762">sigprocmask()</a>, <a class="el" href="../../df/dff/libc_2include_2signal_8h_source.html#l00052">SIGTERM</a>, <a class="el" href="../../dc/dfe/libc_2src_2std_2uni_2sleep_8c_source.html#l00006">sleep()</a>, <a class="el" href="../../d0/d09/command_8h_source.html#l00120">SUBSHELL_ASYNC</a>, <a class="el" href="../../de/d3d/execute__cmd_8c_source.html#l00250">subshell_environment</a>, <a class="el" href="../../d0/d09/command_8h_source.html#l00128">SUBSHELL_IGNTRAP</a>, <a class="el" href="../../d0/d09/command_8h_source.html#l00124">SUBSHELL_PIPE</a>, <a class="el" href="../../db/dcc/error_8c_source.html#l00327">sys_error()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01632">terminate_current_pipeline()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00219">the_pipeline</a>, <a class="el" href="../../da/d12/sig_8c_source.html#l00401">throw_to_top_level()</a>, <a class="el" href="../../d6/d4f/shell_8c_source.html#l01767">unset_bash_input()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l03764">waitchld()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/d93/subst_8c_source.html#l06919">command_substitute()</a>, <a class="el" href="../../de/d3d/execute__cmd_8c_source.html#l00573">execute_command_internal()</a>, <a class="el" href="../../de/d3d/execute__cmd_8c_source.html#l05586">execute_disk_command()</a>, <a class="el" href="../../de/d3d/execute__cmd_8c_source.html#l04087">execute_null_command()</a>, <a class="el" href="../../de/d3d/execute__cmd_8c_source.html#l04355">execute_simple_command()</a>, and <a class="el" href="../../d6/ddd/push_8c_source.html#l00042">push_builtin()</a>.</p>

</div>
</div>
<a id="a52091bff84389f379c1dfae1369c019e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52091bff84389f379c1dfae1369c019e">&#9670;&nbsp;</a></span>making_children()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void making_children </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00421">421</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;{</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#ab73b81916e1b9c693ec186cb41e9f4e5">already_making_children</a>)</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160; </div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#ab73b81916e1b9c693ec186cb41e9f4e5">already_making_children</a> = 1;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#a718ce465ffb026f4a2b67b4a6eab4761">start_pipeline</a> ();</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;}</div>
<div class="ttc" id="ajobs_8c_html_ab73b81916e1b9c693ec186cb41e9f4e5"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#ab73b81916e1b9c693ec186cb41e9f4e5">already_making_children</a></div><div class="ttdeci">int already_making_children</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l00228">jobs.c:228</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d8e/jobs_8c_source.html#l00228">already_making_children</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l00523">start_pipeline()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l02121">make_child()</a>.</p>

</div>
</div>
<a id="aafea484f3bce52ca817d92f7c7b833ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aafea484f3bce52ca817d92f7c7b833ed">&#9670;&nbsp;</a></span>map_over_jobs()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int map_over_jobs </td>
          <td>(</td>
          <td class="paramtype">sh_job_map_func_t *&#160;</td>
          <td class="paramname"><em>func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>arg1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>arg2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l01596">1596</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;{</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;  <span class="keyword">register</span> <span class="keywordtype">int</span> <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>;</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;  <span class="keywordtype">int</span> result;</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;  <a class="code" href="../../d8/d90/sigset__t_8h.html#a9140a5882f847f67b8155c759ac6aa05">sigset_t</a> set, oset;</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160; </div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ad107b5818741c0309ebdb7af7318309e">j_jobslots</a> == 0)</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160; </div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;  <a class="code" href="../../de/d62/sig_8h.html#a37d156f6ab7c2ade277f9a274314d258">BLOCK_CHILD</a> (set, oset);</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160; </div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;  <span class="comment">/* XXX could use js.j_firstj here */</span></div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> = result = 0; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> &lt; <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ad107b5818741c0309ebdb7af7318309e">j_jobslots</a>; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>++)</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;    {</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> &lt; <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a41979e2d342c40d347381152156fc26d">j_firstj</a> &amp;&amp; <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>])</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;    <a class="code" href="../../da/d41/error_8h.html#a1c7d66dc03b5cb6a3a6c2a79bcbf8e4d">INTERNAL_DEBUG</a> ((<span class="stringliteral">&quot;map_over_jobs: job %d non-null before js.j_firstj (%d)&quot;</span>, <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>, <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a41979e2d342c40d347381152156fc26d">j_firstj</a>));</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> &gt; <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ac29ea4e478fa590943c6f7ae902f3a46">j_lastj</a> &amp;&amp; <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>])</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;    <a class="code" href="../../da/d41/error_8h.html#a1c7d66dc03b5cb6a3a6c2a79bcbf8e4d">INTERNAL_DEBUG</a> ((<span class="stringliteral">&quot;map_over_jobs: job %d non-null after js.j_lastj (%d)&quot;</span>, <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>, <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ac29ea4e478fa590943c6f7ae902f3a46">j_lastj</a>));</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160; </div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>])</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;    {</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;      result = (*func)(<a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>], arg1, arg2, <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>);</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;      <span class="keywordflow">if</span> (result)</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;    }</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;    }</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160; </div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;  <a class="code" href="../../de/d62/sig_8h.html#aa9262558d91ca8060065606f36167783">UNBLOCK_CHILD</a> (oset);</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160; </div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;  <span class="keywordflow">return</span> (result);</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../de/d62/sig_8h_source.html#l00100">BLOCK_CHILD</a>, <a class="el" href="../../dd/d71/gettextP_8h_source.html#l00074">i</a>, <a class="el" href="../../da/d41/error_8h_source.html#l00079">INTERNAL_DEBUG</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00146">jobstats::j_firstj</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00144">jobstats::j_jobslots</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00145">jobstats::j_lastj</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00183">jobs</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00175">js</a>, and <a class="el" href="../../de/d62/sig_8h_source.html#l00101">UNBLOCK_CHILD</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l02109">list_all_jobs()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02099">list_running_jobs()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l02091">list_stopped_jobs()</a>.</p>

</div>
</div>
<a id="af8ab905a192c6341c12fd82f166374a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8ab905a192c6341c12fd82f166374a2">&#9670;&nbsp;</a></span>mark_all_jobs_as_dead()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void mark_all_jobs_as_dead </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l04801">4801</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l04802"></a><span class="lineno"> 4802</span>&#160;{</div>
<div class="line"><a name="l04803"></a><span class="lineno"> 4803</span>&#160;  <span class="keyword">register</span> <span class="keywordtype">int</span> <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>;</div>
<div class="line"><a name="l04804"></a><span class="lineno"> 4804</span>&#160;  <a class="code" href="../../d8/d90/sigset__t_8h.html#a9140a5882f847f67b8155c759ac6aa05">sigset_t</a> set, oset;</div>
<div class="line"><a name="l04805"></a><span class="lineno"> 4805</span>&#160; </div>
<div class="line"><a name="l04806"></a><span class="lineno"> 4806</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ad107b5818741c0309ebdb7af7318309e">j_jobslots</a> == 0)</div>
<div class="line"><a name="l04807"></a><span class="lineno"> 4807</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04808"></a><span class="lineno"> 4808</span>&#160; </div>
<div class="line"><a name="l04809"></a><span class="lineno"> 4809</span>&#160;  <a class="code" href="../../de/d62/sig_8h.html#a37d156f6ab7c2ade277f9a274314d258">BLOCK_CHILD</a> (set, oset);</div>
<div class="line"><a name="l04810"></a><span class="lineno"> 4810</span>&#160; </div>
<div class="line"><a name="l04811"></a><span class="lineno"> 4811</span>&#160;  <span class="comment">/* XXX could use js.j_firstj here */</span></div>
<div class="line"><a name="l04812"></a><span class="lineno"> 4812</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> = 0; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> &lt; <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ad107b5818741c0309ebdb7af7318309e">j_jobslots</a>; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>++)</div>
<div class="line"><a name="l04813"></a><span class="lineno"> 4813</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>])</div>
<div class="line"><a name="l04814"></a><span class="lineno"> 4814</span>&#160;      {</div>
<div class="line"><a name="l04815"></a><span class="lineno"> 4815</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>]-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#a5bee3de4970de999192f8929f926a4fe">state</a> = <a class="code" href="../../d3/d3a/jobs_8h.html#a27f134c9d8392fc50ee339c518707f57acc7e60ddf9078b1521d1adb70bd16f8b">JDEAD</a>;</div>
<div class="line"><a name="l04816"></a><span class="lineno"> 4816</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a5c5a5b94e26c657b8caef74571c311ec">j_ndead</a>++;</div>
<div class="line"><a name="l04817"></a><span class="lineno"> 4817</span>&#160;      }</div>
<div class="line"><a name="l04818"></a><span class="lineno"> 4818</span>&#160; </div>
<div class="line"><a name="l04819"></a><span class="lineno"> 4819</span>&#160;  <a class="code" href="../../de/d62/sig_8h.html#aa9262558d91ca8060065606f36167783">UNBLOCK_CHILD</a> (oset);</div>
<div class="line"><a name="l04820"></a><span class="lineno"> 4820</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../de/d62/sig_8h_source.html#l00100">BLOCK_CHILD</a>, <a class="el" href="../../dd/d71/gettextP_8h_source.html#l00074">i</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00144">jobstats::j_jobslots</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00148">jobstats::j_ndead</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00094">JDEAD</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00183">jobs</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00175">js</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00124">job::state</a>, and <a class="el" href="../../de/d62/sig_8h_source.html#l00101">UNBLOCK_CHILD</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l03269">wait_for_any_job()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02648">wait_for_background_pids()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l03215">wait_for_job()</a>.</p>

</div>
</div>
<a id="a17ec09b97c22e3e745e6fe463418e203"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17ec09b97c22e3e745e6fe463418e203">&#9670;&nbsp;</a></span>mark_dead_jobs_as_notified()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void mark_dead_jobs_as_notified </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>force</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l04827">4827</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l04829"></a><span class="lineno"> 4829</span>&#160;{</div>
<div class="line"><a name="l04830"></a><span class="lineno"> 4830</span>&#160;  <span class="keyword">register</span> <span class="keywordtype">int</span> <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>, ndead, ndeadproc;</div>
<div class="line"><a name="l04831"></a><span class="lineno"> 4831</span>&#160;  <a class="code" href="../../d8/d90/sigset__t_8h.html#a9140a5882f847f67b8155c759ac6aa05">sigset_t</a> set, oset;</div>
<div class="line"><a name="l04832"></a><span class="lineno"> 4832</span>&#160; </div>
<div class="line"><a name="l04833"></a><span class="lineno"> 4833</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ad107b5818741c0309ebdb7af7318309e">j_jobslots</a> == 0)</div>
<div class="line"><a name="l04834"></a><span class="lineno"> 4834</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04835"></a><span class="lineno"> 4835</span>&#160; </div>
<div class="line"><a name="l04836"></a><span class="lineno"> 4836</span>&#160;  <a class="code" href="../../de/d62/sig_8h.html#a37d156f6ab7c2ade277f9a274314d258">BLOCK_CHILD</a> (set, oset);</div>
<div class="line"><a name="l04837"></a><span class="lineno"> 4837</span>&#160; </div>
<div class="line"><a name="l04838"></a><span class="lineno"> 4838</span>&#160;  <span class="comment">/* If FORCE is non-zero, we don&#39;t have to keep CHILD_MAX statuses</span></div>
<div class="line"><a name="l04839"></a><span class="lineno"> 4839</span>&#160;<span class="comment">     around; just run through the array. */</span></div>
<div class="line"><a name="l04840"></a><span class="lineno"> 4840</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dc/d4b/bash_2examples_2loadables_2rm_8c.html#a52de43b6faa0d9601f10db8b3826f11a">force</a>)</div>
<div class="line"><a name="l04841"></a><span class="lineno"> 4841</span>&#160;    {</div>
<div class="line"><a name="l04842"></a><span class="lineno"> 4842</span>&#160;    <span class="comment">/* XXX could use js.j_firstj here */</span></div>
<div class="line"><a name="l04843"></a><span class="lineno"> 4843</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> = 0; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> &lt; <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ad107b5818741c0309ebdb7af7318309e">j_jobslots</a>; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>++)</div>
<div class="line"><a name="l04844"></a><span class="lineno"> 4844</span>&#160;    {</div>
<div class="line"><a name="l04845"></a><span class="lineno"> 4845</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>] &amp;&amp; <a class="code" href="../../d3/d3a/jobs_8h.html#a15d782ba433bae3ec145926e26c9ea37">DEADJOB</a> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>) &amp;&amp; (<a class="code" href="../../d6/d4f/shell_8c.html#ae2c20c1668999fe88f089ad20436f425">interactive_shell</a> || (<a class="code" href="../../df/d8e/jobs_8c.html#a758086bb1f3a53e925371b718b1068ab">find_last_pid</a> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>, 0) != <a class="code" href="../../df/d8e/jobs_8c.html#a2819d9527c8d26be39bb531290f4b597">last_asynchronous_pid</a>)))</div>
<div class="line"><a name="l04846"></a><span class="lineno"> 4846</span>&#160;        <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>]-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#af96c169abb39b4b3f9ccce91cb4b17dc">flags</a> |= <a class="code" href="../../d3/d3a/jobs_8h.html#ac67735d6cc995bbac83d5efe91a52125">J_NOTIFIED</a>;</div>
<div class="line"><a name="l04847"></a><span class="lineno"> 4847</span>&#160;    }</div>
<div class="line"><a name="l04848"></a><span class="lineno"> 4848</span>&#160;      <a class="code" href="../../de/d62/sig_8h.html#aa9262558d91ca8060065606f36167783">UNBLOCK_CHILD</a> (oset);</div>
<div class="line"><a name="l04849"></a><span class="lineno"> 4849</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04850"></a><span class="lineno"> 4850</span>&#160;    }</div>
<div class="line"><a name="l04851"></a><span class="lineno"> 4851</span>&#160; </div>
<div class="line"><a name="l04852"></a><span class="lineno"> 4852</span>&#160;  <span class="comment">/* Mark enough dead jobs as notified to keep CHILD_MAX processes left in the</span></div>
<div class="line"><a name="l04853"></a><span class="lineno"> 4853</span>&#160;<span class="comment">     array with the corresponding not marked as notified.  This is a better</span></div>
<div class="line"><a name="l04854"></a><span class="lineno"> 4854</span>&#160;<span class="comment">     way to avoid pid aliasing and reuse problems than keeping the POSIX-</span></div>
<div class="line"><a name="l04855"></a><span class="lineno"> 4855</span>&#160;<span class="comment">     mandated CHILD_MAX jobs around.  delete_job() takes care of keeping the</span></div>
<div class="line"><a name="l04856"></a><span class="lineno"> 4856</span>&#160;<span class="comment">     bgpids list regulated. */</span></div>
<div class="line"><a name="l04857"></a><span class="lineno"> 4857</span>&#160; </div>
<div class="line"><a name="l04858"></a><span class="lineno"> 4858</span>&#160;  <span class="comment">/* Count the number of dead jobs */</span></div>
<div class="line"><a name="l04859"></a><span class="lineno"> 4859</span>&#160;  <span class="comment">/* XXX could use js.j_firstj here */</span></div>
<div class="line"><a name="l04860"></a><span class="lineno"> 4860</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> = ndead = ndeadproc = 0; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> &lt; <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ad107b5818741c0309ebdb7af7318309e">j_jobslots</a>; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>++)</div>
<div class="line"><a name="l04861"></a><span class="lineno"> 4861</span>&#160;    {</div>
<div class="line"><a name="l04862"></a><span class="lineno"> 4862</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> &lt; <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a41979e2d342c40d347381152156fc26d">j_firstj</a> &amp;&amp; <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>])</div>
<div class="line"><a name="l04863"></a><span class="lineno"> 4863</span>&#160;    <a class="code" href="../../da/d41/error_8h.html#a1c7d66dc03b5cb6a3a6c2a79bcbf8e4d">INTERNAL_DEBUG</a> ((<span class="stringliteral">&quot;mark_dead_jobs_as_notified: job %d non-null before js.j_firstj (%d)&quot;</span>, <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>, <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a41979e2d342c40d347381152156fc26d">j_firstj</a>));</div>
<div class="line"><a name="l04864"></a><span class="lineno"> 4864</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> &gt; <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ac29ea4e478fa590943c6f7ae902f3a46">j_lastj</a> &amp;&amp; <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>])</div>
<div class="line"><a name="l04865"></a><span class="lineno"> 4865</span>&#160;    <a class="code" href="../../da/d41/error_8h.html#a1c7d66dc03b5cb6a3a6c2a79bcbf8e4d">INTERNAL_DEBUG</a> ((<span class="stringliteral">&quot;mark_dead_jobs_as_notified: job %d non-null after js.j_lastj (%d)&quot;</span>, <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>, <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ac29ea4e478fa590943c6f7ae902f3a46">j_lastj</a>));</div>
<div class="line"><a name="l04866"></a><span class="lineno"> 4866</span>&#160; </div>
<div class="line"><a name="l04867"></a><span class="lineno"> 4867</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>] &amp;&amp; <a class="code" href="../../d3/d3a/jobs_8h.html#a15d782ba433bae3ec145926e26c9ea37">DEADJOB</a> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>))</div>
<div class="line"><a name="l04868"></a><span class="lineno"> 4868</span>&#160;    {</div>
<div class="line"><a name="l04869"></a><span class="lineno"> 4869</span>&#160;      ndead++;</div>
<div class="line"><a name="l04870"></a><span class="lineno"> 4870</span>&#160;      ndeadproc += <a class="code" href="../../df/d8e/jobs_8c.html#ac3e9a0b379bd8615de3876b2e6b6754d">processes_in_job</a> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>);</div>
<div class="line"><a name="l04871"></a><span class="lineno"> 4871</span>&#160;    }</div>
<div class="line"><a name="l04872"></a><span class="lineno"> 4872</span>&#160;    }</div>
<div class="line"><a name="l04873"></a><span class="lineno"> 4873</span>&#160; </div>
<div class="line"><a name="l04874"></a><span class="lineno"> 4874</span>&#160;<span class="preprocessor"># if 0</span></div>
<div class="line"><a name="l04875"></a><span class="lineno"> 4875</span>&#160;  <span class="keywordflow">if</span> (ndeadproc != <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a9eba978ad89cdb8068837ea21189d4c9">c_reaped</a>)</div>
<div class="line"><a name="l04876"></a><span class="lineno"> 4876</span>&#160;    itrace(<span class="stringliteral">&quot;mark_dead_jobs_as_notified: ndeadproc (%d) != js.c_reaped (%d)&quot;</span>, ndeadproc, <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a9eba978ad89cdb8068837ea21189d4c9">c_reaped</a>);</div>
<div class="line"><a name="l04877"></a><span class="lineno"> 4877</span>&#160;<span class="preprocessor"># endif</span></div>
<div class="line"><a name="l04878"></a><span class="lineno"> 4878</span>&#160;  <span class="keywordflow">if</span> (ndead != <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a5c5a5b94e26c657b8caef74571c311ec">j_ndead</a>)</div>
<div class="line"><a name="l04879"></a><span class="lineno"> 4879</span>&#160;    <a class="code" href="../../da/d41/error_8h.html#a1c7d66dc03b5cb6a3a6c2a79bcbf8e4d">INTERNAL_DEBUG</a> ((<span class="stringliteral">&quot;mark_dead_jobs_as_notified: ndead (%d) != js.j_ndead (%d)&quot;</span>, ndead, <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a5c5a5b94e26c657b8caef74571c311ec">j_ndead</a>));</div>
<div class="line"><a name="l04880"></a><span class="lineno"> 4880</span>&#160; </div>
<div class="line"><a name="l04881"></a><span class="lineno"> 4881</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a3c74d4692759e4d8ec8089acefa23583">c_childmax</a> &lt; 0)</div>
<div class="line"><a name="l04882"></a><span class="lineno"> 4882</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#a137086a1fb1016e07d53473ef106d1f0">set_maxchild</a> (0);</div>
<div class="line"><a name="l04883"></a><span class="lineno"> 4883</span>&#160; </div>
<div class="line"><a name="l04884"></a><span class="lineno"> 4884</span>&#160;  <span class="comment">/* Don&#39;t do anything if the number of dead processes is less than CHILD_MAX</span></div>
<div class="line"><a name="l04885"></a><span class="lineno"> 4885</span>&#160;<span class="comment">     and we&#39;re not forcing a cleanup. */</span></div>
<div class="line"><a name="l04886"></a><span class="lineno"> 4886</span>&#160;  <span class="keywordflow">if</span> (ndeadproc &lt;= <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a3c74d4692759e4d8ec8089acefa23583">c_childmax</a>)</div>
<div class="line"><a name="l04887"></a><span class="lineno"> 4887</span>&#160;    {</div>
<div class="line"><a name="l04888"></a><span class="lineno"> 4888</span>&#160;      <a class="code" href="../../de/d62/sig_8h.html#aa9262558d91ca8060065606f36167783">UNBLOCK_CHILD</a> (oset);</div>
<div class="line"><a name="l04889"></a><span class="lineno"> 4889</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04890"></a><span class="lineno"> 4890</span>&#160;    }</div>
<div class="line"><a name="l04891"></a><span class="lineno"> 4891</span>&#160; </div>
<div class="line"><a name="l04892"></a><span class="lineno"> 4892</span>&#160;<span class="preprocessor">#if 0</span></div>
<div class="line"><a name="l04893"></a><span class="lineno"> 4893</span>&#160;itrace(<span class="stringliteral">&quot;mark_dead_jobs_as_notified: child_max = %d ndead = %d ndeadproc = %d&quot;</span>, <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a3c74d4692759e4d8ec8089acefa23583">c_childmax</a>, ndead, ndeadproc);</div>
<div class="line"><a name="l04894"></a><span class="lineno"> 4894</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l04895"></a><span class="lineno"> 4895</span>&#160; </div>
<div class="line"><a name="l04896"></a><span class="lineno"> 4896</span>&#160;  <span class="comment">/* Mark enough dead jobs as notified that we keep CHILD_MAX jobs in</span></div>
<div class="line"><a name="l04897"></a><span class="lineno"> 4897</span>&#160;<span class="comment">     the list.  This isn&#39;t exactly right yet; changes need to be made</span></div>
<div class="line"><a name="l04898"></a><span class="lineno"> 4898</span>&#160;<span class="comment">     to stop_pipeline so we don&#39;t mark the newer jobs after we&#39;ve</span></div>
<div class="line"><a name="l04899"></a><span class="lineno"> 4899</span>&#160;<span class="comment">     created CHILD_MAX slots in the jobs array.  This needs to be</span></div>
<div class="line"><a name="l04900"></a><span class="lineno"> 4900</span>&#160;<span class="comment">     integrated with a way to keep the jobs array from growing without</span></div>
<div class="line"><a name="l04901"></a><span class="lineno"> 4901</span>&#160;<span class="comment">     bound.  Maybe we wrap back around to 0 after we reach some max</span></div>
<div class="line"><a name="l04902"></a><span class="lineno"> 4902</span>&#160;<span class="comment">     limit, and there are sufficient job slots free (keep track of total</span></div>
<div class="line"><a name="l04903"></a><span class="lineno"> 4903</span>&#160;<span class="comment">     size of jobs array (js.j_jobslots) and running count of number of jobs</span></div>
<div class="line"><a name="l04904"></a><span class="lineno"> 4904</span>&#160;<span class="comment">     in jobs array.  Then keep a job index corresponding to the `oldest job&#39;</span></div>
<div class="line"><a name="l04905"></a><span class="lineno"> 4905</span>&#160;<span class="comment">     and start this loop there, wrapping around as necessary.  In effect,</span></div>
<div class="line"><a name="l04906"></a><span class="lineno"> 4906</span>&#160;<span class="comment">     we turn the list into a circular buffer. */</span></div>
<div class="line"><a name="l04907"></a><span class="lineno"> 4907</span>&#160;  <span class="comment">/* XXX could use js.j_firstj here */</span></div>
<div class="line"><a name="l04908"></a><span class="lineno"> 4908</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> = 0; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> &lt; <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ad107b5818741c0309ebdb7af7318309e">j_jobslots</a>; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>++)</div>
<div class="line"><a name="l04909"></a><span class="lineno"> 4909</span>&#160;    {</div>
<div class="line"><a name="l04910"></a><span class="lineno"> 4910</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>] &amp;&amp; <a class="code" href="../../d3/d3a/jobs_8h.html#a15d782ba433bae3ec145926e26c9ea37">DEADJOB</a> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>) &amp;&amp; (<a class="code" href="../../d6/d4f/shell_8c.html#ae2c20c1668999fe88f089ad20436f425">interactive_shell</a> || (<a class="code" href="../../df/d8e/jobs_8c.html#a758086bb1f3a53e925371b718b1068ab">find_last_pid</a> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>, 0) != <a class="code" href="../../df/d8e/jobs_8c.html#a2819d9527c8d26be39bb531290f4b597">last_asynchronous_pid</a>)))</div>
<div class="line"><a name="l04911"></a><span class="lineno"> 4911</span>&#160;    {</div>
<div class="line"><a name="l04912"></a><span class="lineno"> 4912</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> &lt; <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a41979e2d342c40d347381152156fc26d">j_firstj</a> &amp;&amp; <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>])</div>
<div class="line"><a name="l04913"></a><span class="lineno"> 4913</span>&#160;        <a class="code" href="../../da/d41/error_8h.html#a1c7d66dc03b5cb6a3a6c2a79bcbf8e4d">INTERNAL_DEBUG</a> ((<span class="stringliteral">&quot;mark_dead_jobs_as_notified: job %d non-null before js.j_firstj (%d)&quot;</span>, <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>, <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a41979e2d342c40d347381152156fc26d">j_firstj</a>));</div>
<div class="line"><a name="l04914"></a><span class="lineno"> 4914</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> &gt; <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ac29ea4e478fa590943c6f7ae902f3a46">j_lastj</a> &amp;&amp; <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>])</div>
<div class="line"><a name="l04915"></a><span class="lineno"> 4915</span>&#160;        <a class="code" href="../../da/d41/error_8h.html#a1c7d66dc03b5cb6a3a6c2a79bcbf8e4d">INTERNAL_DEBUG</a> ((<span class="stringliteral">&quot;mark_dead_jobs_as_notified: job %d non-null after js.j_lastj (%d)&quot;</span>, <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>, <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ac29ea4e478fa590943c6f7ae902f3a46">j_lastj</a>));</div>
<div class="line"><a name="l04916"></a><span class="lineno"> 4916</span>&#160; </div>
<div class="line"><a name="l04917"></a><span class="lineno"> 4917</span>&#160;      <span class="comment">/* If marking this job as notified would drop us down below</span></div>
<div class="line"><a name="l04918"></a><span class="lineno"> 4918</span>&#160;<span class="comment">         child_max, don&#39;t mark it so we can keep at least child_max</span></div>
<div class="line"><a name="l04919"></a><span class="lineno"> 4919</span>&#160;<span class="comment">         statuses.  XXX -- need to check what Posix actually says</span></div>
<div class="line"><a name="l04920"></a><span class="lineno"> 4920</span>&#160;<span class="comment">         about keeping statuses. */</span></div>
<div class="line"><a name="l04921"></a><span class="lineno"> 4921</span>&#160;      <span class="keywordflow">if</span> ((ndeadproc -= <a class="code" href="../../df/d8e/jobs_8c.html#ac3e9a0b379bd8615de3876b2e6b6754d">processes_in_job</a> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>)) &lt;= <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a3c74d4692759e4d8ec8089acefa23583">c_childmax</a>)</div>
<div class="line"><a name="l04922"></a><span class="lineno"> 4922</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04923"></a><span class="lineno"> 4923</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>]-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#af96c169abb39b4b3f9ccce91cb4b17dc">flags</a> |= <a class="code" href="../../d3/d3a/jobs_8h.html#ac67735d6cc995bbac83d5efe91a52125">J_NOTIFIED</a>;</div>
<div class="line"><a name="l04924"></a><span class="lineno"> 4924</span>&#160;    }</div>
<div class="line"><a name="l04925"></a><span class="lineno"> 4925</span>&#160;    }</div>
<div class="line"><a name="l04926"></a><span class="lineno"> 4926</span>&#160; </div>
<div class="line"><a name="l04927"></a><span class="lineno"> 4927</span>&#160;  <a class="code" href="../../de/d62/sig_8h.html#aa9262558d91ca8060065606f36167783">UNBLOCK_CHILD</a> (oset);</div>
<div class="line"><a name="l04928"></a><span class="lineno"> 4928</span>&#160;}</div>
<div class="ttc" id="ajobs_8c_html_a758086bb1f3a53e925371b718b1068ab"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a758086bb1f3a53e925371b718b1068ab">find_last_pid</a></div><div class="ttdeci">static pid_t find_last_pid(int job, int block)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l02567">jobs.c:2567</a></div></div>
<div class="ttc" id="ajobs_8c_html_ac3e9a0b379bd8615de3876b2e6b6754d"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#ac3e9a0b379bd8615de3876b2e6b6754d">processes_in_job</a></div><div class="ttdeci">static int processes_in_job(int job)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l01246">jobs.c:1246</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../de/d62/sig_8h_source.html#l00100">BLOCK_CHILD</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00135">jobstats::c_childmax</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00138">jobstats::c_reaped</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00100">DEADJOB</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02567">find_last_pid()</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00125">job::flags</a>, <a class="el" href="../../dc/d4b/bash_2examples_2loadables_2rm_8c_source.html#l00039">force</a>, <a class="el" href="../../dd/d71/gettextP_8h_source.html#l00074">i</a>, <a class="el" href="../../d6/d4f/shell_8c_source.html#l00142">interactive_shell</a>, <a class="el" href="../../da/d41/error_8h_source.html#l00079">INTERNAL_DEBUG</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00146">jobstats::j_firstj</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00144">jobstats::j_jobslots</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00145">jobstats::j_lastj</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00148">jobstats::j_ndead</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00106">J_NOTIFIED</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00183">jobs</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00175">js</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00216">last_asynchronous_pid</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01246">processes_in_job()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l05038">set_maxchild()</a>, and <a class="el" href="../../de/d62/sig_8h_source.html#l00101">UNBLOCK_CHILD</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l03367">reap_dead_jobs()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l02648">wait_for_background_pids()</a>.</p>

</div>
</div>
<a id="ade652681afa73d6b7c0b50697d071f83"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade652681afa73d6b7c0b50697d071f83">&#9670;&nbsp;</a></span>maybe_give_terminal_to()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int maybe_give_terminal_to </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a>&#160;</td>
          <td class="paramname"><em>opgrp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a>&#160;</td>
          <td class="paramname"><em>npgrp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l04683">4683</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l04686"></a><span class="lineno"> 4686</span>&#160;{</div>
<div class="line"><a name="l04687"></a><span class="lineno"> 4687</span>&#160;  <span class="keywordtype">int</span> tpgrp;</div>
<div class="line"><a name="l04688"></a><span class="lineno"> 4688</span>&#160; </div>
<div class="line"><a name="l04689"></a><span class="lineno"> 4689</span>&#160;  tpgrp = <a class="code" href="../../df/d8e/jobs_8c.html#a30c3edb2b02399d64b5e8eaaf7fe40e6">tcgetpgrp</a> (<a class="code" href="../../df/d8e/jobs_8c.html#ae43d281c5f91cb3d7ad00fc46971b4da">shell_tty</a>);</div>
<div class="line"><a name="l04690"></a><span class="lineno"> 4690</span>&#160;  <span class="keywordflow">if</span> (tpgrp &lt; 0 &amp;&amp; <a class="code" href="../../df/d8e/jobs_8c.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> == <a class="code" href="../../d7/d8c/libc_2include_2errno_8h.html#ac3daf409082bb528032f4452a81e1034">ENOTTY</a>)</div>
<div class="line"><a name="l04691"></a><span class="lineno"> 4691</span>&#160;    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l04692"></a><span class="lineno"> 4692</span>&#160;  <span class="keywordflow">if</span> (tpgrp == npgrp)</div>
<div class="line"><a name="l04693"></a><span class="lineno"> 4693</span>&#160;    {</div>
<div class="line"><a name="l04694"></a><span class="lineno"> 4694</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#aeb36f80c8f1667339f6f23318ff29b50">terminal_pgrp</a> = npgrp;</div>
<div class="line"><a name="l04695"></a><span class="lineno"> 4695</span>&#160;      <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l04696"></a><span class="lineno"> 4696</span>&#160;    }</div>
<div class="line"><a name="l04697"></a><span class="lineno"> 4697</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tpgrp != opgrp)</div>
<div class="line"><a name="l04698"></a><span class="lineno"> 4698</span>&#160;    {</div>
<div class="line"><a name="l04699"></a><span class="lineno"> 4699</span>&#160;      <a class="code" href="../../db/dcc/error_8c.html#a419859286a2b95b4a1c8133df4e65e75">internal_debug</a> (<span class="stringliteral">&quot;%d: maybe_give_terminal_to: terminal pgrp == %d shell pgrp = %d new pgrp = %d in_background = %d&quot;</span>, (<span class="keywordtype">int</span>)<a class="code" href="../../d3/d3a/jobs_8h.html#add1dc6545057b7f1c7f91352536fb060">getpid</a>(), tpgrp, opgrp, npgrp, <a class="code" href="../../df/d8e/jobs_8c.html#ad2b44c9005c5a931c29ae6588e237636">running_in_background</a>);</div>
<div class="line"><a name="l04700"></a><span class="lineno"> 4700</span>&#160;      <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l04701"></a><span class="lineno"> 4701</span>&#160;    }</div>
<div class="line"><a name="l04702"></a><span class="lineno"> 4702</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l04703"></a><span class="lineno"> 4703</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a8db3c891f1a77a1b3412544323ae6eb4">give_terminal_to</a> (npgrp, <a class="code" href="../../db/d66/dumpkmap_8c.html#abb0829cce9dd20a40ae0d86890ae85c6">flags</a>));     </div>
<div class="line"><a name="l04704"></a><span class="lineno"> 4704</span>&#160;}</div>
<div class="ttc" id="alibc_2include_2errno_8h_html_ac3daf409082bb528032f4452a81e1034"><div class="ttname"><a href="../../d7/d8c/libc_2include_2errno_8h.html#ac3daf409082bb528032f4452a81e1034">ENOTTY</a></div><div class="ttdeci">#define ENOTTY</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d8c/libc_2include_2errno_8h_source.html#l00028">errno.h:28</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/d8c/libc_2include_2errno_8h_source.html#l00028">ENOTTY</a>, <a class="el" href="../../df/d8e/jobs_8c.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../db/d66/dumpkmap_8c.html#abb0829cce9dd20a40ae0d86890ae85c6">flags</a>, <a class="el" href="../../d3/d3a/jobs_8h.html#add1dc6545057b7f1c7f91352536fb060">getpid()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04641">give_terminal_to()</a>, <a class="el" href="../../db/dcc/error_8c_source.html#l00301">internal_debug()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00225">running_in_background</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00191">shell_tty</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00358">tcgetpgrp()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l00197">terminal_pgrp</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l00553">stop_pipeline()</a>.</p>

</div>
</div>
<a id="a63606668cb8599788b6876b0f8683418"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63606668cb8599788b6876b0f8683418">&#9670;&nbsp;</a></span>most_recent_job_in_state()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int most_recent_job_in_state </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>job</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d3a/jobs_8h.html#a27f134c9d8392fc50ee339c518707f57">JOB_STATE</a>&#160;</td>
          <td class="paramname"><em>state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l03377">3377</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160;{</div>
<div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160;  <span class="keyword">register</span> <span class="keywordtype">int</span> <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>, result;</div>
<div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160;  <a class="code" href="../../d8/d90/sigset__t_8h.html#a9140a5882f847f67b8155c759ac6aa05">sigset_t</a> set, oset;</div>
<div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160; </div>
<div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;  <a class="code" href="../../de/d62/sig_8h.html#a37d156f6ab7c2ade277f9a274314d258">BLOCK_CHILD</a> (set, oset);</div>
<div class="line"><a name="l03385"></a><span class="lineno"> 3385</span>&#160; </div>
<div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160;  <span class="keywordflow">for</span> (result = <a class="code" href="../../d3/d3a/jobs_8h.html#a6eba094b1ac1bc00e5883edd166bd944">NO_JOB</a>, <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> = <a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a> - 1; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> &gt;= 0; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>--)</div>
<div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160;    {</div>
<div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>] &amp;&amp; (<a class="code" href="../../d3/d3a/jobs_8h.html#a466620bfa4ee2d285544d9a67a8a337e">JOBSTATE</a> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>) == <a class="code" href="../../d6/d23/wi__stuff_8c.html#a102a30241e29b7ae7a452418431f728d">state</a>))</div>
<div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160;    {</div>
<div class="line"><a name="l03390"></a><span class="lineno"> 3390</span>&#160;      result = <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>;</div>
<div class="line"><a name="l03391"></a><span class="lineno"> 3391</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160;    }</div>
<div class="line"><a name="l03393"></a><span class="lineno"> 3393</span>&#160;    }</div>
<div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160; </div>
<div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160;  <a class="code" href="../../de/d62/sig_8h.html#aa9262558d91ca8060065606f36167783">UNBLOCK_CHILD</a> (oset);</div>
<div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160; </div>
<div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160;  <span class="keywordflow">return</span> (result);</div>
<div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../de/d62/sig_8h_source.html#l00100">BLOCK_CHILD</a>, <a class="el" href="../../dd/d71/gettextP_8h_source.html#l00074">i</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00183">jobs</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00095">JOBSTATE</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00193">NO_JOB</a>, <a class="el" href="../../d6/d23/wi__stuff_8c_source.html#l00309">state</a>, and <a class="el" href="../../de/d62/sig_8h_source.html#l00101">UNBLOCK_CHILD</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l03412">job_last_running()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l03403">job_last_stopped()</a>.</p>

</div>
</div>
<a id="a2b7eaf2f1db72714e7e3faf6991471a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b7eaf2f1db72714e7e3faf6991471a2">&#9670;&nbsp;</a></span>nohup_all_jobs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nohup_all_jobs </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>running_only</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l04758">4758</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l04760"></a><span class="lineno"> 4760</span>&#160;{</div>
<div class="line"><a name="l04761"></a><span class="lineno"> 4761</span>&#160;  <span class="keyword">register</span> <span class="keywordtype">int</span> <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>;</div>
<div class="line"><a name="l04762"></a><span class="lineno"> 4762</span>&#160;  <a class="code" href="../../d8/d90/sigset__t_8h.html#a9140a5882f847f67b8155c759ac6aa05">sigset_t</a> set, oset;</div>
<div class="line"><a name="l04763"></a><span class="lineno"> 4763</span>&#160; </div>
<div class="line"><a name="l04764"></a><span class="lineno"> 4764</span>&#160;  <a class="code" href="../../de/d62/sig_8h.html#a37d156f6ab7c2ade277f9a274314d258">BLOCK_CHILD</a> (set, oset);</div>
<div class="line"><a name="l04765"></a><span class="lineno"> 4765</span>&#160; </div>
<div class="line"><a name="l04766"></a><span class="lineno"> 4766</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ad107b5818741c0309ebdb7af7318309e">j_jobslots</a>)</div>
<div class="line"><a name="l04767"></a><span class="lineno"> 4767</span>&#160;    {</div>
<div class="line"><a name="l04768"></a><span class="lineno"> 4768</span>&#160;      <span class="comment">/* XXX could use js.j_firstj here */</span></div>
<div class="line"><a name="l04769"></a><span class="lineno"> 4769</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> = 0; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> &lt; <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ad107b5818741c0309ebdb7af7318309e">j_jobslots</a>; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>++)</div>
<div class="line"><a name="l04770"></a><span class="lineno"> 4770</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>] &amp;&amp; (running_only == 0 || (running_only &amp;&amp; <a class="code" href="../../d3/d3a/jobs_8h.html#abb162c99100e0466ef43cf32884f29e8">RUNNING</a>(<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>))))</div>
<div class="line"><a name="l04771"></a><span class="lineno"> 4771</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#a9711d4d0e7ed711f9160dbfcf22aa75c">nohup_job</a> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>);</div>
<div class="line"><a name="l04772"></a><span class="lineno"> 4772</span>&#160;    }</div>
<div class="line"><a name="l04773"></a><span class="lineno"> 4773</span>&#160; </div>
<div class="line"><a name="l04774"></a><span class="lineno"> 4774</span>&#160;  <a class="code" href="../../de/d62/sig_8h.html#aa9262558d91ca8060065606f36167783">UNBLOCK_CHILD</a> (oset);</div>
<div class="line"><a name="l04775"></a><span class="lineno"> 4775</span>&#160;}</div>
<div class="ttc" id="ajobs_8c_html_a9711d4d0e7ed711f9160dbfcf22aa75c"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a9711d4d0e7ed711f9160dbfcf22aa75c">nohup_job</a></div><div class="ttdeci">void nohup_job(int job_index)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l01449">jobs.c:1449</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../de/d62/sig_8h_source.html#l00100">BLOCK_CHILD</a>, <a class="el" href="../../dd/d71/gettextP_8h_source.html#l00074">i</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00144">jobstats::j_jobslots</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00183">jobs</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00175">js</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01449">nohup_job()</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00099">RUNNING</a>, and <a class="el" href="../../de/d62/sig_8h_source.html#l00101">UNBLOCK_CHILD</a>.</p>

</div>
</div>
<a id="a9711d4d0e7ed711f9160dbfcf22aa75c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9711d4d0e7ed711f9160dbfcf22aa75c">&#9670;&nbsp;</a></span>nohup_job()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nohup_job </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>job_index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l01449">1449</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;{</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;  <span class="keyword">register</span> <a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">JOB</a> *temp;</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160; </div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ad107b5818741c0309ebdb7af7318309e">j_jobslots</a> == 0)</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160; </div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;  <span class="keywordflow">if</span> (temp = <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[job_index])</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;    temp-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#af96c169abb39b4b3f9ccce91cb4b17dc">flags</a> |= <a class="code" href="../../d3/d3a/jobs_8h.html#aa4437cbff50585ca7c615cafd558cc8f">J_NOHUP</a>;</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00125">job::flags</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00144">jobstats::j_jobslots</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00108">J_NOHUP</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00183">jobs</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l00175">js</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l04758">nohup_all_jobs()</a>.</p>

</div>
</div>
<a id="adf243013e184887caa6995be05126873"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf243013e184887caa6995be05126873">&#9670;&nbsp;</a></span>notify_and_cleanup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void notify_and_cleanup </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l03353">3353</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160;{</div>
<div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a57e47a8425e68a1907ac493cd673ca41">jobs_list_frozen</a>)</div>
<div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160; </div>
<div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d6/d4f/shell_8c.html#aeb39d5d8ddd4957f1b01720fa0e37e36">interactive</a> || <a class="code" href="../../d6/d4f/shell_8c.html#ae2c20c1668999fe88f089ad20436f425">interactive_shell</a> == 0 || <a class="code" href="../../df/d28/bash_2builtins_2common_8h.html#a1abc92fadae94b5897f4f0144da01eb9">sourcelevel</a>)</div>
<div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#a4d9c4222b40edc2f52cb70d3df978b22">notify_of_job_status</a> ();</div>
<div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160; </div>
<div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#a47c393729bc38de011d2422746de634c">cleanup_dead_jobs</a> ();</div>
<div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;}</div>
<div class="ttc" id="abash_2builtins_2common_8h_html_a1abc92fadae94b5897f4f0144da01eb9"><div class="ttname"><a href="../../df/d28/bash_2builtins_2common_8h.html#a1abc92fadae94b5897f4f0144da01eb9">sourcelevel</a></div><div class="ttdeci">int sourcelevel</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d85/evalfile_8c_source.html#l00073">evalfile.c:73</a></div></div>
<div class="ttc" id="ajobs_8c_html_a4d9c4222b40edc2f52cb70d3df978b22"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a4d9c4222b40edc2f52cb70d3df978b22">notify_of_job_status</a></div><div class="ttdeci">static void notify_of_job_status()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l04235">jobs.c:4235</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d8e/jobs_8c_source.html#l01210">cleanup_dead_jobs()</a>, <a class="el" href="../../d6/d4f/shell_8c_source.html#l00139">interactive</a>, <a class="el" href="../../d6/d4f/shell_8c_source.html#l00142">interactive_shell</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00346">jobs_list_frozen</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04235">notify_of_job_status()</a>, and <a class="el" href="../../d3/d85/evalfile_8c_source.html#l00073">sourcelevel</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d6f/trap_8c_source.html#l01183">run_debug_trap()</a>, <a class="el" href="../../d5/def/y_8tab_8c_source.html#l04623">shell_getc()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l02899">wait_for()</a>.</p>

</div>
</div>
<a id="a4d9c4222b40edc2f52cb70d3df978b22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d9c4222b40edc2f52cb70d3df978b22">&#9670;&nbsp;</a></span>notify_of_job_status()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void notify_of_job_status </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l04235">4235</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l04236"></a><span class="lineno"> 4236</span>&#160;{</div>
<div class="line"><a name="l04237"></a><span class="lineno"> 4237</span>&#160;  <span class="keyword">register</span> <span class="keywordtype">int</span> <a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>, <a class="code" href="../../da/d12/sig_8c.html#df/de3/structtermsig">termsig</a>;</div>
<div class="line"><a name="l04238"></a><span class="lineno"> 4238</span>&#160;  <span class="keywordtype">char</span> *<a class="code" href="../../df/dde/runsv_8c.html#ad45ef284071e5bd5627127837e94bc27">dir</a>;</div>
<div class="line"><a name="l04239"></a><span class="lineno"> 4239</span>&#160;  <a class="code" href="../../d8/d90/sigset__t_8h.html#a9140a5882f847f67b8155c759ac6aa05">sigset_t</a> set, oset;</div>
<div class="line"><a name="l04240"></a><span class="lineno"> 4240</span>&#160;  <a class="code" href="../../d7/d23/unionwait_8h.html#de/d61/unionwait">WAIT</a> <a class="code" href="../../df/d19/arpping_8c.html#ac9562ee4ecb3b8aeebeb04656e7e57a9">s</a>;</div>
<div class="line"><a name="l04241"></a><span class="lineno"> 4241</span>&#160; </div>
<div class="line"><a name="l04242"></a><span class="lineno"> 4242</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a> == 0 || <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ad107b5818741c0309ebdb7af7318309e">j_jobslots</a> == 0)</div>
<div class="line"><a name="l04243"></a><span class="lineno"> 4243</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04244"></a><span class="lineno"> 4244</span>&#160; </div>
<div class="line"><a name="l04245"></a><span class="lineno"> 4245</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a6c44b645419b61a2eeab9833fe2abc97">old_ttou</a> != 0)</div>
<div class="line"><a name="l04246"></a><span class="lineno"> 4246</span>&#160;    {</div>
<div class="line"><a name="l04247"></a><span class="lineno"> 4247</span>&#160;      <a class="code" href="../../db/d82/sigemptyset_8c.html#a5925352f90eb589393274fa0376d7def">sigemptyset</a> (&amp;set);</div>
<div class="line"><a name="l04248"></a><span class="lineno"> 4248</span>&#160;      <a class="code" href="../../d1/d7b/sigaddset_8c.html#aba080a9ab72ac6d079ff0bf8ac9b23f4">sigaddset</a> (&amp;set, <a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a0e63521a64cc8bc2b91d36a87d32c9f8">SIGCHLD</a>);</div>
<div class="line"><a name="l04249"></a><span class="lineno"> 4249</span>&#160;      <a class="code" href="../../d1/d7b/sigaddset_8c.html#aba080a9ab72ac6d079ff0bf8ac9b23f4">sigaddset</a> (&amp;set, <a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a782864287613e2c5c030411fa9c5e9b1">SIGTTOU</a>);</div>
<div class="line"><a name="l04250"></a><span class="lineno"> 4250</span>&#160;      <a class="code" href="../../db/d82/sigemptyset_8c.html#a5925352f90eb589393274fa0376d7def">sigemptyset</a> (&amp;oset);</div>
<div class="line"><a name="l04251"></a><span class="lineno"> 4251</span>&#160;      <a class="code" href="../../da/d12/sig_8c.html#a011fc3b4395063b580099bf602135a22">sigprocmask</a> (<a class="code" href="../../de/d62/sig_8h.html#a927f6ae16379576d638006c7498ac5d7">SIG_BLOCK</a>, &amp;set, &amp;oset);</div>
<div class="line"><a name="l04252"></a><span class="lineno"> 4252</span>&#160;    }</div>
<div class="line"><a name="l04253"></a><span class="lineno"> 4253</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l04254"></a><span class="lineno"> 4254</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#af553b22eef984c5245e4eae3e4a36cd5">queue_sigchld</a>++;</div>
<div class="line"><a name="l04255"></a><span class="lineno"> 4255</span>&#160; </div>
<div class="line"><a name="l04256"></a><span class="lineno"> 4256</span>&#160;  <span class="comment">/* XXX could use js.j_firstj here */</span></div>
<div class="line"><a name="l04257"></a><span class="lineno"> 4257</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a> = 0, <a class="code" href="../../df/dde/runsv_8c.html#ad45ef284071e5bd5627127837e94bc27">dir</a> = (<span class="keywordtype">char</span> *)<a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>; <a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a> &lt; <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ad107b5818741c0309ebdb7af7318309e">j_jobslots</a>; <a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>++)</div>
<div class="line"><a name="l04258"></a><span class="lineno"> 4258</span>&#160;    {</div>
<div class="line"><a name="l04259"></a><span class="lineno"> 4259</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>] &amp;&amp; <a class="code" href="../../d3/d3a/jobs_8h.html#a264330cfc7dfcc3a68791098619b1b10">IS_NOTIFIED</a> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>) == 0)</div>
<div class="line"><a name="l04260"></a><span class="lineno"> 4260</span>&#160;    {</div>
<div class="line"><a name="l04261"></a><span class="lineno"> 4261</span>&#160;      <a class="code" href="../../df/d19/arpping_8c.html#ac9562ee4ecb3b8aeebeb04656e7e57a9">s</a> = <a class="code" href="../../df/d8e/jobs_8c.html#af88686bf38197f4c2a43031f5ddbbec8">raw_job_exit_status</a> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>);</div>
<div class="line"><a name="l04262"></a><span class="lineno"> 4262</span>&#160;      <a class="code" href="../../da/d12/sig_8c.html#df/de3/structtermsig">termsig</a> = <a class="code" href="../../d7/d23/unionwait_8h.html#aeba4d421572a9d681c73c347f24ad348">WTERMSIG</a> (<a class="code" href="../../df/d19/arpping_8c.html#ac9562ee4ecb3b8aeebeb04656e7e57a9">s</a>);</div>
<div class="line"><a name="l04263"></a><span class="lineno"> 4263</span>&#160; </div>
<div class="line"><a name="l04264"></a><span class="lineno"> 4264</span>&#160;      <span class="comment">/* POSIX.2 says we have to hang onto the statuses of at most the</span></div>
<div class="line"><a name="l04265"></a><span class="lineno"> 4265</span>&#160;<span class="comment">         last CHILD_MAX background processes if the shell is running a</span></div>
<div class="line"><a name="l04266"></a><span class="lineno"> 4266</span>&#160;<span class="comment">         script.  If the shell is running a script, either from a file</span></div>
<div class="line"><a name="l04267"></a><span class="lineno"> 4267</span>&#160;<span class="comment">         or standard input, don&#39;t print anything unless the job was</span></div>
<div class="line"><a name="l04268"></a><span class="lineno"> 4268</span>&#160;<span class="comment">         killed by a signal. */</span></div>
<div class="line"><a name="l04269"></a><span class="lineno"> 4269</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d4f/shell_8c.html#ae19f469a3f9d2c434e787c8d13abf576">startup_state</a> == 0 &amp;&amp; <a class="code" href="../../d7/d23/unionwait_8h.html#a6953e62fd0dec274a397678d31c344b4">WIFSIGNALED</a> (<a class="code" href="../../df/d19/arpping_8c.html#ac9562ee4ecb3b8aeebeb04656e7e57a9">s</a>) == 0 &amp;&amp;</div>
<div class="line"><a name="l04270"></a><span class="lineno"> 4270</span>&#160;        ((<a class="code" href="../../d3/d3a/jobs_8h.html#a15d782ba433bae3ec145926e26c9ea37">DEADJOB</a> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>) &amp;&amp; <a class="code" href="../../d3/d3a/jobs_8h.html#ae19ce7e46f6caa8b6726dfb0d40e0a1f">IS_FOREGROUND</a> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>) == 0) || <a class="code" href="../../d3/d3a/jobs_8h.html#adc39613d1152c030190012a614856c69">STOPPED</a> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>)))</div>
<div class="line"><a name="l04271"></a><span class="lineno"> 4271</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04272"></a><span class="lineno"> 4272</span>&#160;      </div>
<div class="line"><a name="l04273"></a><span class="lineno"> 4273</span>&#160;      <span class="comment">/* If job control is disabled, don&#39;t print the status messages.</span></div>
<div class="line"><a name="l04274"></a><span class="lineno"> 4274</span>&#160;<span class="comment">         Mark dead jobs as notified so that they get cleaned up.  If</span></div>
<div class="line"><a name="l04275"></a><span class="lineno"> 4275</span>&#160;<span class="comment">         startup_state == 2 and subshell_environment has the</span></div>
<div class="line"><a name="l04276"></a><span class="lineno"> 4276</span>&#160;<span class="comment">         SUBSHELL_COMSUB bit turned on, we were started to run a command</span></div>
<div class="line"><a name="l04277"></a><span class="lineno"> 4277</span>&#160;<span class="comment">         substitution, so don&#39;t print anything.</span></div>
<div class="line"><a name="l04278"></a><span class="lineno"> 4278</span>&#160;<span class="comment">         Otherwise, if the shell is not interactive, POSIX says that `jobs&#39;</span></div>
<div class="line"><a name="l04279"></a><span class="lineno"> 4279</span>&#160;<span class="comment">         is the only way to notify of job status. */</span></div>
<div class="line"><a name="l04280"></a><span class="lineno"> 4280</span>&#160;      <span class="keywordflow">if</span> ((<a class="code" href="../../df/d8e/jobs_8c.html#a3002cbcd4a652dec2c5cef5ff3da446f">job_control</a> == 0 &amp;&amp; <a class="code" href="../../d6/d4f/shell_8c.html#ae2c20c1668999fe88f089ad20436f425">interactive_shell</a>) ||</div>
<div class="line"><a name="l04281"></a><span class="lineno"> 4281</span>&#160;          (<a class="code" href="../../d6/d4f/shell_8c.html#ae19f469a3f9d2c434e787c8d13abf576">startup_state</a> == 2 &amp;&amp; (<a class="code" href="../../de/d3d/execute__cmd_8c.html#aacb323e3f246975470615959c2d8572e">subshell_environment</a> &amp; <a class="code" href="../../d0/d09/command_8h.html#acaecc6b5540a23a9d1d411add740147a">SUBSHELL_COMSUB</a>)) ||</div>
<div class="line"><a name="l04282"></a><span class="lineno"> 4282</span>&#160;          (<a class="code" href="../../d6/d4f/shell_8c.html#ae19f469a3f9d2c434e787c8d13abf576">startup_state</a> == 2 &amp;&amp; <a class="code" href="../../d6/d4f/shell_8c.html#a15b0e48465dfc17e94173c63e10b57cc">posixly_correct</a> &amp;&amp; (<a class="code" href="../../de/d3d/execute__cmd_8c.html#aacb323e3f246975470615959c2d8572e">subshell_environment</a> &amp; <a class="code" href="../../d0/d09/command_8h.html#acaecc6b5540a23a9d1d411add740147a">SUBSHELL_COMSUB</a>) == 0))</div>
<div class="line"><a name="l04283"></a><span class="lineno"> 4283</span>&#160;        {</div>
<div class="line"><a name="l04284"></a><span class="lineno"> 4284</span>&#160;          <span class="comment">/* POSIX.2 compatibility:  if the shell is not interactive,</span></div>
<div class="line"><a name="l04285"></a><span class="lineno"> 4285</span>&#160;<span class="comment">         hang onto the job corresponding to the last asynchronous</span></div>
<div class="line"><a name="l04286"></a><span class="lineno"> 4286</span>&#160;<span class="comment">         pid until the user has been notified of its status or does</span></div>
<div class="line"><a name="l04287"></a><span class="lineno"> 4287</span>&#160;<span class="comment">         a `wait&#39;. */</span></div>
<div class="line"><a name="l04288"></a><span class="lineno"> 4288</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="../../d3/d3a/jobs_8h.html#a15d782ba433bae3ec145926e26c9ea37">DEADJOB</a> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>) &amp;&amp; (<a class="code" href="../../d6/d4f/shell_8c.html#ae2c20c1668999fe88f089ad20436f425">interactive_shell</a> || (<a class="code" href="../../df/d8e/jobs_8c.html#a758086bb1f3a53e925371b718b1068ab">find_last_pid</a> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>, 0) != <a class="code" href="../../df/d8e/jobs_8c.html#a2819d9527c8d26be39bb531290f4b597">last_asynchronous_pid</a>)))</div>
<div class="line"><a name="l04289"></a><span class="lineno"> 4289</span>&#160;        <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>]-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#af96c169abb39b4b3f9ccce91cb4b17dc">flags</a> |= <a class="code" href="../../d3/d3a/jobs_8h.html#ac67735d6cc995bbac83d5efe91a52125">J_NOTIFIED</a>;</div>
<div class="line"><a name="l04290"></a><span class="lineno"> 4290</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04291"></a><span class="lineno"> 4291</span>&#160;        }</div>
<div class="line"><a name="l04292"></a><span class="lineno"> 4292</span>&#160; </div>
<div class="line"><a name="l04293"></a><span class="lineno"> 4293</span>&#160;      <span class="comment">/* Print info on jobs that are running in the background,</span></div>
<div class="line"><a name="l04294"></a><span class="lineno"> 4294</span>&#160;<span class="comment">         and on foreground jobs that were killed by anything</span></div>
<div class="line"><a name="l04295"></a><span class="lineno"> 4295</span>&#160;<span class="comment">         except SIGINT (and possibly SIGPIPE). */</span></div>
<div class="line"><a name="l04296"></a><span class="lineno"> 4296</span>&#160;      <span class="keywordflow">switch</span> (<a class="code" href="../../d3/d3a/jobs_8h.html#a466620bfa4ee2d285544d9a67a8a337e">JOBSTATE</a> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>))</div>
<div class="line"><a name="l04297"></a><span class="lineno"> 4297</span>&#160;        {</div>
<div class="line"><a name="l04298"></a><span class="lineno"> 4298</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d3/d3a/jobs_8h.html#a27f134c9d8392fc50ee339c518707f57acc7e60ddf9078b1521d1adb70bd16f8b">JDEAD</a>:</div>
<div class="line"><a name="l04299"></a><span class="lineno"> 4299</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="../../d6/d4f/shell_8c.html#ae2c20c1668999fe88f089ad20436f425">interactive_shell</a> == 0 &amp;&amp; <a class="code" href="../../da/d12/sig_8c.html#df/de3/structtermsig">termsig</a> &amp;&amp; <a class="code" href="../../d7/d23/unionwait_8h.html#a6953e62fd0dec274a397678d31c344b4">WIFSIGNALED</a> (<a class="code" href="../../df/d19/arpping_8c.html#ac9562ee4ecb3b8aeebeb04656e7e57a9">s</a>) &amp;&amp;</div>
<div class="line"><a name="l04300"></a><span class="lineno"> 4300</span>&#160;          <a class="code" href="../../da/d12/sig_8c.html#df/de3/structtermsig">termsig</a> != <a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a487309e3e9e0527535644115204a639a">SIGINT</a> &amp;&amp;</div>
<div class="line"><a name="l04301"></a><span class="lineno"> 4301</span>&#160;#<span class="keywordflow">if</span> defined (<a class="code" href="../../d8/d20/config-top_8h.html#a0884281f613019ce59b393945db49ac2">DONT_REPORT_SIGTERM</a>)</div>
<div class="line"><a name="l04302"></a><span class="lineno"> 4302</span>&#160;          <a class="code" href="../../da/d12/sig_8c.html#df/de3/structtermsig">termsig</a> != <a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a682182a5e5f38fd61f4311501e9dac5d">SIGTERM</a> &amp;&amp;</div>
<div class="line"><a name="l04303"></a><span class="lineno"> 4303</span>&#160;#endif</div>
<div class="line"><a name="l04304"></a><span class="lineno"> 4304</span>&#160;#<span class="keywordflow">if</span> defined (<a class="code" href="../../d8/d20/config-top_8h.html#ae3449100160af1ce5f722b64493ffaf1">DONT_REPORT_SIGPIPE</a>)</div>
<div class="line"><a name="l04305"></a><span class="lineno"> 4305</span>&#160;          <a class="code" href="../../da/d12/sig_8c.html#df/de3/structtermsig">termsig</a> != <a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a57e9c8c5fa13bf86bc779a9f6f408b7c">SIGPIPE</a> &amp;&amp;</div>
<div class="line"><a name="l04306"></a><span class="lineno"> 4306</span>&#160;#endif</div>
<div class="line"><a name="l04307"></a><span class="lineno"> 4307</span>&#160;          <a class="code" href="../../d5/da5/zread_8c.html#a40264baa053bf7ccf2ef5ca345d6c06d">signal_is_trapped</a> (<a class="code" href="../../da/d12/sig_8c.html#df/de3/structtermsig">termsig</a>) == 0)</div>
<div class="line"><a name="l04308"></a><span class="lineno"> 4308</span>&#160;        {</div>
<div class="line"><a name="l04309"></a><span class="lineno"> 4309</span>&#160;          <span class="comment">/* Don&#39;t print `0&#39; for a line number. */</span></div>
<div class="line"><a name="l04310"></a><span class="lineno"> 4310</span>&#160;          <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#ad9291335f34e874c8431285d705bc3aa">fprintf</a> (<a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#a5ce35bd5ba5021fd3b2e951e8f497656">stderr</a>, <a class="code" href="../../d7/dcd/bashintl_8h.html#a86a239addea586602343007a370bf8ad">_</a>(<span class="stringliteral">&quot;%s: line %d: &quot;</span>), <a class="code" href="../../db/dcc/error_8c.html#a1944bd401c24a434a321990f648b8b3c">get_name_for_error</a> (), (<a class="code" href="../../d5/d36/parser_8h.html#ada7b81cc6d5bbe25b92c0162697e0f58">line_number</a> == 0) ? 1 : <a class="code" href="../../d5/d36/parser_8h.html#ada7b81cc6d5bbe25b92c0162697e0f58">line_number</a>);</div>
<div class="line"><a name="l04311"></a><span class="lineno"> 4311</span>&#160;          <a class="code" href="../../df/d8e/jobs_8c.html#af63ad360618b0a85b34755c7bc513b08">pretty_print_job</a> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>, <a class="code" href="../../d3/d3a/jobs_8h.html#a3e32ddd300903bbc3e8a401532ff6eef">JLIST_NONINTERACTIVE</a>, <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#a5ce35bd5ba5021fd3b2e951e8f497656">stderr</a>);</div>
<div class="line"><a name="l04312"></a><span class="lineno"> 4312</span>&#160;        }</div>
<div class="line"><a name="l04313"></a><span class="lineno"> 4313</span>&#160;          <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d3/d3a/jobs_8h.html#ae19ce7e46f6caa8b6726dfb0d40e0a1f">IS_FOREGROUND</a> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>))</div>
<div class="line"><a name="l04314"></a><span class="lineno"> 4314</span>&#160;        {</div>
<div class="line"><a name="l04315"></a><span class="lineno"> 4315</span>&#160;<span class="preprocessor">#if !defined (DONT_REPORT_SIGPIPE)</span></div>
<div class="line"><a name="l04316"></a><span class="lineno"> 4316</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="../../da/d12/sig_8c.html#df/de3/structtermsig">termsig</a> &amp;&amp; <a class="code" href="../../d7/d23/unionwait_8h.html#a6953e62fd0dec274a397678d31c344b4">WIFSIGNALED</a> (<a class="code" href="../../df/d19/arpping_8c.html#ac9562ee4ecb3b8aeebeb04656e7e57a9">s</a>) &amp;&amp; <a class="code" href="../../da/d12/sig_8c.html#df/de3/structtermsig">termsig</a> != <a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a487309e3e9e0527535644115204a639a">SIGINT</a>)</div>
<div class="line"><a name="l04317"></a><span class="lineno"> 4317</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l04318"></a><span class="lineno"> 4318</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="../../da/d12/sig_8c.html#df/de3/structtermsig">termsig</a> &amp;&amp; <a class="code" href="../../d7/d23/unionwait_8h.html#a6953e62fd0dec274a397678d31c344b4">WIFSIGNALED</a> (<a class="code" href="../../df/d19/arpping_8c.html#ac9562ee4ecb3b8aeebeb04656e7e57a9">s</a>) &amp;&amp; <a class="code" href="../../da/d12/sig_8c.html#df/de3/structtermsig">termsig</a> != <a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a487309e3e9e0527535644115204a639a">SIGINT</a> &amp;&amp; <a class="code" href="../../da/d12/sig_8c.html#df/de3/structtermsig">termsig</a> != <a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a57e9c8c5fa13bf86bc779a9f6f408b7c">SIGPIPE</a>)</div>
<div class="line"><a name="l04319"></a><span class="lineno"> 4319</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l04320"></a><span class="lineno"> 4320</span>&#160;            {</div>
<div class="line"><a name="l04321"></a><span class="lineno"> 4321</span>&#160;              <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#ad9291335f34e874c8431285d705bc3aa">fprintf</a> (<a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#a5ce35bd5ba5021fd3b2e951e8f497656">stderr</a>, <span class="stringliteral">&quot;%s&quot;</span>, <a class="code" href="../../df/d8e/jobs_8c.html#a73562e7524f0f619567b2414e0a15309">j_strsignal</a> (<a class="code" href="../../da/d12/sig_8c.html#df/de3/structtermsig">termsig</a>));</div>
<div class="line"><a name="l04322"></a><span class="lineno"> 4322</span>&#160; </div>
<div class="line"><a name="l04323"></a><span class="lineno"> 4323</span>&#160;              <span class="keywordflow">if</span> (<a class="code" href="../../d7/d23/unionwait_8h.html#a3256a8ffff11bf6a48dfbc94d1688ced">WIFCORED</a> (<a class="code" href="../../df/d19/arpping_8c.html#ac9562ee4ecb3b8aeebeb04656e7e57a9">s</a>))</div>
<div class="line"><a name="l04324"></a><span class="lineno"> 4324</span>&#160;            <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#ad9291335f34e874c8431285d705bc3aa">fprintf</a> (<a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#a5ce35bd5ba5021fd3b2e951e8f497656">stderr</a>, <a class="code" href="../../d7/dcd/bashintl_8h.html#a86a239addea586602343007a370bf8ad">_</a>(<span class="stringliteral">&quot; (core dumped)&quot;</span>));</div>
<div class="line"><a name="l04325"></a><span class="lineno"> 4325</span>&#160; </div>
<div class="line"><a name="l04326"></a><span class="lineno"> 4326</span>&#160;              <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#ad9291335f34e874c8431285d705bc3aa">fprintf</a> (<a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#a5ce35bd5ba5021fd3b2e951e8f497656">stderr</a>, <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l04327"></a><span class="lineno"> 4327</span>&#160;            }</div>
<div class="line"><a name="l04328"></a><span class="lineno"> 4328</span>&#160;        }</div>
<div class="line"><a name="l04329"></a><span class="lineno"> 4329</span>&#160;          <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a3002cbcd4a652dec2c5cef5ff3da446f">job_control</a>) <span class="comment">/* XXX job control test added */</span></div>
<div class="line"><a name="l04330"></a><span class="lineno"> 4330</span>&#160;        {</div>
<div class="line"><a name="l04331"></a><span class="lineno"> 4331</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="../../df/dde/runsv_8c.html#ad45ef284071e5bd5627127837e94bc27">dir</a> == 0)</div>
<div class="line"><a name="l04332"></a><span class="lineno"> 4332</span>&#160;            <a class="code" href="../../df/dde/runsv_8c.html#ad45ef284071e5bd5627127837e94bc27">dir</a> = <a class="code" href="../../df/d8e/jobs_8c.html#aa00dc6ac57f419e8d59ff822cc7b51ab">current_working_directory</a> ();</div>
<div class="line"><a name="l04333"></a><span class="lineno"> 4333</span>&#160;          <a class="code" href="../../df/d8e/jobs_8c.html#af63ad360618b0a85b34755c7bc513b08">pretty_print_job</a> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>, <a class="code" href="../../d3/d3a/jobs_8h.html#ad9054abf38050f25ca5110797469a799">JLIST_STANDARD</a>, <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#a5ce35bd5ba5021fd3b2e951e8f497656">stderr</a>);</div>
<div class="line"><a name="l04334"></a><span class="lineno"> 4334</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="../../df/dde/runsv_8c.html#ad45ef284071e5bd5627127837e94bc27">dir</a> &amp;&amp; <a class="code" href="../../d5/db0/dynlink_8c.html#af3054366f27929432795c5ae420a5294">strcmp</a> (<a class="code" href="../../df/dde/runsv_8c.html#ad45ef284071e5bd5627127837e94bc27">dir</a>, <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>]-&gt;wd) != 0)</div>
<div class="line"><a name="l04335"></a><span class="lineno"> 4335</span>&#160;            <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#ad9291335f34e874c8431285d705bc3aa">fprintf</a> (<a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#a5ce35bd5ba5021fd3b2e951e8f497656">stderr</a>,</div>
<div class="line"><a name="l04336"></a><span class="lineno"> 4336</span>&#160;                 <a class="code" href="../../d7/dcd/bashintl_8h.html#a86a239addea586602343007a370bf8ad">_</a>(<span class="stringliteral">&quot;(wd now: %s)\n&quot;</span>), <a class="code" href="../../d1/dca/general_8c.html#a43b9da0ddb47cad720f96dd583609735">polite_directory_format</a> (<a class="code" href="../../df/dde/runsv_8c.html#ad45ef284071e5bd5627127837e94bc27">dir</a>));</div>
<div class="line"><a name="l04337"></a><span class="lineno"> 4337</span>&#160;        }</div>
<div class="line"><a name="l04338"></a><span class="lineno"> 4338</span>&#160; </div>
<div class="line"><a name="l04339"></a><span class="lineno"> 4339</span>&#160;          <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>]-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#af96c169abb39b4b3f9ccce91cb4b17dc">flags</a> |= <a class="code" href="../../d3/d3a/jobs_8h.html#ac67735d6cc995bbac83d5efe91a52125">J_NOTIFIED</a>;</div>
<div class="line"><a name="l04340"></a><span class="lineno"> 4340</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04341"></a><span class="lineno"> 4341</span>&#160; </div>
<div class="line"><a name="l04342"></a><span class="lineno"> 4342</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d3/d3a/jobs_8h.html#a27f134c9d8392fc50ee339c518707f57a55fea56f3156409573084fce0c920da7">JSTOPPED</a>:</div>
<div class="line"><a name="l04343"></a><span class="lineno"> 4343</span>&#160;          <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#ad9291335f34e874c8431285d705bc3aa">fprintf</a> (<a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#a5ce35bd5ba5021fd3b2e951e8f497656">stderr</a>, <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l04344"></a><span class="lineno"> 4344</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="../../df/dde/runsv_8c.html#ad45ef284071e5bd5627127837e94bc27">dir</a> == 0)</div>
<div class="line"><a name="l04345"></a><span class="lineno"> 4345</span>&#160;        <a class="code" href="../../df/dde/runsv_8c.html#ad45ef284071e5bd5627127837e94bc27">dir</a> = <a class="code" href="../../df/d8e/jobs_8c.html#aa00dc6ac57f419e8d59ff822cc7b51ab">current_working_directory</a> ();</div>
<div class="line"><a name="l04346"></a><span class="lineno"> 4346</span>&#160;          <a class="code" href="../../df/d8e/jobs_8c.html#af63ad360618b0a85b34755c7bc513b08">pretty_print_job</a> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>, <a class="code" href="../../d3/d3a/jobs_8h.html#ad9054abf38050f25ca5110797469a799">JLIST_STANDARD</a>, <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#a5ce35bd5ba5021fd3b2e951e8f497656">stderr</a>);</div>
<div class="line"><a name="l04347"></a><span class="lineno"> 4347</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="../../df/dde/runsv_8c.html#ad45ef284071e5bd5627127837e94bc27">dir</a> &amp;&amp; (<a class="code" href="../../d5/db0/dynlink_8c.html#af3054366f27929432795c5ae420a5294">strcmp</a> (<a class="code" href="../../df/dde/runsv_8c.html#ad45ef284071e5bd5627127837e94bc27">dir</a>, <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>]-&gt;wd) != 0))</div>
<div class="line"><a name="l04348"></a><span class="lineno"> 4348</span>&#160;        <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#ad9291335f34e874c8431285d705bc3aa">fprintf</a> (<a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#a5ce35bd5ba5021fd3b2e951e8f497656">stderr</a>,</div>
<div class="line"><a name="l04349"></a><span class="lineno"> 4349</span>&#160;             <a class="code" href="../../d7/dcd/bashintl_8h.html#a86a239addea586602343007a370bf8ad">_</a>(<span class="stringliteral">&quot;(wd now: %s)\n&quot;</span>), <a class="code" href="../../d1/dca/general_8c.html#a43b9da0ddb47cad720f96dd583609735">polite_directory_format</a> (<a class="code" href="../../df/dde/runsv_8c.html#ad45ef284071e5bd5627127837e94bc27">dir</a>));</div>
<div class="line"><a name="l04350"></a><span class="lineno"> 4350</span>&#160;          <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>]-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#af96c169abb39b4b3f9ccce91cb4b17dc">flags</a> |= <a class="code" href="../../d3/d3a/jobs_8h.html#ac67735d6cc995bbac83d5efe91a52125">J_NOTIFIED</a>;</div>
<div class="line"><a name="l04351"></a><span class="lineno"> 4351</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04352"></a><span class="lineno"> 4352</span>&#160; </div>
<div class="line"><a name="l04353"></a><span class="lineno"> 4353</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d3/d3a/jobs_8h.html#a27f134c9d8392fc50ee339c518707f57a1bf5a4892e9bb413f0dc598c6764541b">JRUNNING</a>:</div>
<div class="line"><a name="l04354"></a><span class="lineno"> 4354</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d3/d3a/jobs_8h.html#a27f134c9d8392fc50ee339c518707f57a77b803b70a59a6ebd6fc89e6b2ec30bb">JMIXED</a>:</div>
<div class="line"><a name="l04355"></a><span class="lineno"> 4355</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04356"></a><span class="lineno"> 4356</span>&#160; </div>
<div class="line"><a name="l04357"></a><span class="lineno"> 4357</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l04358"></a><span class="lineno"> 4358</span>&#160;          <a class="code" href="../../df/d3a/errlist_8c.html#adca3144dcb7f3b1e4eab979d9d8113e6">programming_error</a> (<span class="stringliteral">&quot;notify_of_job_status&quot;</span>);</div>
<div class="line"><a name="l04359"></a><span class="lineno"> 4359</span>&#160;        }</div>
<div class="line"><a name="l04360"></a><span class="lineno"> 4360</span>&#160;    }</div>
<div class="line"><a name="l04361"></a><span class="lineno"> 4361</span>&#160;    }</div>
<div class="line"><a name="l04362"></a><span class="lineno"> 4362</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a6c44b645419b61a2eeab9833fe2abc97">old_ttou</a> != 0)</div>
<div class="line"><a name="l04363"></a><span class="lineno"> 4363</span>&#160;    <a class="code" href="../../da/d12/sig_8c.html#a011fc3b4395063b580099bf602135a22">sigprocmask</a> (<a class="code" href="../../de/d62/sig_8h.html#a37750b78b7ae75fe02ad26e70f6cc845">SIG_SETMASK</a>, &amp;oset, (<a class="code" href="../../d8/d90/sigset__t_8h.html#a9140a5882f847f67b8155c759ac6aa05">sigset_t</a> *)<a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l04364"></a><span class="lineno"> 4364</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l04365"></a><span class="lineno"> 4365</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#af553b22eef984c5245e4eae3e4a36cd5">queue_sigchld</a>--;</div>
<div class="line"><a name="l04366"></a><span class="lineno"> 4366</span>&#160;}</div>
<div class="ttc" id="acommand_8h_html_acaecc6b5540a23a9d1d411add740147a"><div class="ttname"><a href="../../d0/d09/command_8h.html#acaecc6b5540a23a9d1d411add740147a">SUBSHELL_COMSUB</a></div><div class="ttdeci">#define SUBSHELL_COMSUB</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d09/command_8h_source.html#l00122">command.h:122</a></div></div>
<div class="ttc" id="aconfig-top_8h_html_a0884281f613019ce59b393945db49ac2"><div class="ttname"><a href="../../d8/d20/config-top_8h.html#a0884281f613019ce59b393945db49ac2">DONT_REPORT_SIGTERM</a></div><div class="ttdeci">#define DONT_REPORT_SIGTERM</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d20/config-top_8h_source.html#l00056">config-top.h:56</a></div></div>
<div class="ttc" id="aconfig-top_8h_html_ae3449100160af1ce5f722b64493ffaf1"><div class="ttname"><a href="../../d8/d20/config-top_8h.html#ae3449100160af1ce5f722b64493ffaf1">DONT_REPORT_SIGPIPE</a></div><div class="ttdeci">#define DONT_REPORT_SIGPIPE</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d20/config-top_8h_source.html#l00051">config-top.h:51</a></div></div>
<div class="ttc" id="adynlink_8c_html_af3054366f27929432795c5ae420a5294"><div class="ttname"><a href="../../d5/db0/dynlink_8c.html#af3054366f27929432795c5ae420a5294">strcmp</a></div><div class="ttdeci">#define strcmp(l, r)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/db0/dynlink_8c_source.html#l00174">dynlink.c:174</a></div></div>
<div class="ttc" id="aerror_8c_html_a1944bd401c24a434a321990f648b8b3c"><div class="ttname"><a href="../../db/dcc/error_8c.html#a1944bd401c24a434a321990f648b8b3c">get_name_for_error</a></div><div class="ttdeci">char * get_name_for_error()</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dcc/error_8c_source.html#l00096">error.c:96</a></div></div>
<div class="ttc" id="ageneral_8c_html_a43b9da0ddb47cad720f96dd583609735"><div class="ttname"><a href="../../d1/dca/general_8c.html#a43b9da0ddb47cad720f96dd583609735">polite_directory_format</a></div><div class="ttdeci">char * polite_directory_format(char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dca/general_8c_source.html#l00903">general.c:903</a></div></div>
<div class="ttc" id="ajobs_8c_html_a73562e7524f0f619567b2414e0a15309"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a73562e7524f0f619567b2414e0a15309">j_strsignal</a></div><div class="ttdeci">static char * j_strsignal(int s)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l01845">jobs.c:1845</a></div></div>
<div class="ttc" id="ajobs_8c_html_aa00dc6ac57f419e8d59ff822cc7b51ab"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#aa00dc6ac57f419e8d59ff822cc7b51ab">current_working_directory</a></div><div class="ttdeci">static char * current_working_directory()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l00383">jobs.c:383</a></div></div>
<div class="ttc" id="ajobs_8h_html_a27f134c9d8392fc50ee339c518707f57a77b803b70a59a6ebd6fc89e6b2ec30bb"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#a27f134c9d8392fc50ee339c518707f57a77b803b70a59a6ebd6fc89e6b2ec30bb">JMIXED</a></div><div class="ttdeci">@ JMIXED</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00094">jobs.h:94</a></div></div>
<div class="ttc" id="ajobs_8h_html_a3e32ddd300903bbc3e8a401532ff6eef"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#a3e32ddd300903bbc3e8a401532ff6eef">JLIST_NONINTERACTIVE</a></div><div class="ttdeci">#define JLIST_NONINTERACTIVE</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00036">jobs.h:36</a></div></div>
<div class="ttc" id="ajobs_8h_html_ad9054abf38050f25ca5110797469a799"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#ad9054abf38050f25ca5110797469a799">JLIST_STANDARD</a></div><div class="ttdeci">#define JLIST_STANDARD</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00032">jobs.h:32</a></div></div>
<div class="ttc" id="ajobs_8h_html_ae19ce7e46f6caa8b6726dfb0d40e0a1f"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#ae19ce7e46f6caa8b6726dfb0d40e0a1f">IS_FOREGROUND</a></div><div class="ttdeci">#define IS_FOREGROUND(j)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00114">jobs.h:114</a></div></div>
<div class="ttc" id="alibc_2include_2signal_8h_html_a57e9c8c5fa13bf86bc779a9f6f408b7c"><div class="ttname"><a href="../../df/dff/libc_2include_2signal_8h.html#a57e9c8c5fa13bf86bc779a9f6f408b7c">SIGPIPE</a></div><div class="ttdeci">#define SIGPIPE</div><div class="ttdoc">Broken pipe: write to pipe with no readers.</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dff/libc_2include_2signal_8h_source.html#l00046">signal.h:46</a></div></div>
<div class="ttc" id="aparser_8h_html_ada7b81cc6d5bbe25b92c0162697e0f58"><div class="ttname"><a href="../../d5/d36/parser_8h.html#ada7b81cc6d5bbe25b92c0162697e0f58">line_number</a></div><div class="ttdeci">int line_number</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/def/y_8tab_8c_source.html#l04045">y.tab.c:4045</a></div></div>
<div class="ttc" id="ashell_8c_html_a15b0e48465dfc17e94173c63e10b57cc"><div class="ttname"><a href="../../d6/d4f/shell_8c.html#a15b0e48465dfc17e94173c63e10b57cc">posixly_correct</a></div><div class="ttdeci">int posixly_correct</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d4f/shell_8c_source.html#l00237">shell.c:237</a></div></div>
<div class="ttc" id="ashell_8c_html_ae19f469a3f9d2c434e787c8d13abf576"><div class="ttname"><a href="../../d6/d4f/shell_8c.html#ae19f469a3f9d2c434e787c8d13abf576">startup_state</a></div><div class="ttdeci">int startup_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d4f/shell_8c_source.html#l00161">shell.c:161</a></div></div>
<div class="ttc" id="asig_8c_html_df/de3/structtermsig"><div class="ttname"><a href="../../da/d12/sig_8c.html#df/de3/structtermsig">termsig</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d12/sig_8c_source.html#l00114">sig.c:114</a></div></div>
<div class="ttc" id="aunionwait_8h_html_a3256a8ffff11bf6a48dfbc94d1688ced"><div class="ttname"><a href="../../d7/d23/unionwait_8h.html#a3256a8ffff11bf6a48dfbc94d1688ced">WIFCORED</a></div><div class="ttdeci">#define WIFCORED(x)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d23/unionwait_8h_source.html#l00096">unionwait.h:96</a></div></div>
<div class="ttc" id="aunionwait_8h_html_aeba4d421572a9d681c73c347f24ad348"><div class="ttname"><a href="../../d7/d23/unionwait_8h.html#aeba4d421572a9d681c73c347f24ad348">WTERMSIG</a></div><div class="ttdeci">#define WTERMSIG(x)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d23/unionwait_8h_source.html#l00093">unionwait.h:93</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/dcd/bashintl_8h_source.html#l00036">_</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00383">current_working_directory()</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00100">DEADJOB</a>, <a class="el" href="../../df/dde/runsv_8c_source.html#l00121">dir</a>, <a class="el" href="../../d8/d20/config-top_8h_source.html#l00051">DONT_REPORT_SIGPIPE</a>, <a class="el" href="../../d8/d20/config-top_8h_source.html#l00056">DONT_REPORT_SIGTERM</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02567">find_last_pid()</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00125">job::flags</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00097">fprintf()</a>, <a class="el" href="../../db/dcc/error_8c_source.html#l00096">get_name_for_error()</a>, <a class="el" href="../../d6/d4f/shell_8c_source.html#l00142">interactive_shell</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00114">IS_FOREGROUND</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00115">IS_NOTIFIED</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00144">jobstats::j_jobslots</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00106">J_NOTIFIED</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01845">j_strsignal()</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00094">JDEAD</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00036">JLIST_NONINTERACTIVE</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00032">JLIST_STANDARD</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00094">JMIXED</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00222">job_control</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00183">jobs</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00095">JOBSTATE</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00094">JRUNNING</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00175">js</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00094">JSTOPPED</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00216">last_asynchronous_pid</a>, <a class="el" href="../../d5/def/y_8tab_8c_source.html#l04045">line_number</a>, <a class="el" href="../../d9/d14/general_8h_source.html#l00053">NULL</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00335">old_ttou</a>, <a class="el" href="../../d1/dca/general_8c_source.html#l00903">polite_directory_format()</a>, <a class="el" href="../../d6/d4f/shell_8c_source.html#l00237">posixly_correct</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02034">pretty_print_job()</a>, <a class="el" href="../../df/d3a/errlist_8c_source.html#l00049">programming_error()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00318">queue_sigchld</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02835">raw_job_exit_status()</a>, <a class="el" href="../../df/d19/arpping_8c.html#ac9562ee4ecb3b8aeebeb04656e7e57a9">s</a>, <a class="el" href="../../de/d62/sig_8h_source.html#l00058">SIG_BLOCK</a>, <a class="el" href="../../de/d62/sig_8h_source.html#l00059">SIG_SETMASK</a>, <a class="el" href="../../d1/d7b/sigaddset_8c_source.html#l00004">sigaddset()</a>, <a class="el" href="../../df/dff/libc_2include_2signal_8h_source.html#l00058">SIGCHLD</a>, <a class="el" href="../../db/d82/sigemptyset_8c_source.html#l00004">sigemptyset()</a>, <a class="el" href="../../df/dff/libc_2include_2signal_8h_source.html#l00013">SIGINT</a>, <a class="el" href="../../dc/d6f/trap_8c_source.html#l01503">signal_is_trapped()</a>, <a class="el" href="../../df/dff/libc_2include_2signal_8h_source.html#l00046">SIGPIPE</a>, <a class="el" href="../../da/d12/sig_8c_source.html#l00762">sigprocmask()</a>, <a class="el" href="../../df/dff/libc_2include_2signal_8h_source.html#l00052">SIGTERM</a>, <a class="el" href="../../df/dff/libc_2include_2signal_8h_source.html#l00073">SIGTTOU</a>, <a class="el" href="../../d6/d4f/shell_8c_source.html#l00161">startup_state</a>, <a class="el" href="../../dc/d4d/libc_2include_2stdio_8h_source.html#l00058">stderr</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00098">STOPPED</a>, <a class="el" href="../../d5/db0/dynlink_8c_source.html#l00174">strcmp</a>, <a class="el" href="../../d0/d09/command_8h_source.html#l00122">SUBSHELL_COMSUB</a>, <a class="el" href="../../de/d3d/execute__cmd_8c_source.html#l00250">subshell_environment</a>, <a class="el" href="../../d7/d23/unionwait_8h_source.html#l00096">WIFCORED</a>, <a class="el" href="../../d7/d23/unionwait_8h_source.html#l00091">WIFSIGNALED</a>, and <a class="el" href="../../d7/d23/unionwait_8h_source.html#l00093">WTERMSIG</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l03353">notify_and_cleanup()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l03269">wait_for_any_job()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l03764">waitchld()</a>.</p>

</div>
</div>
<a id="aa1f71fae63033e9e3a59fd90213da5c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1f71fae63033e9e3a59fd90213da5c9">&#9670;&nbsp;</a></span>PARAMS() <span class="overload">[1/14]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void <a class="el" href="../../df/d8e/jobs_8c.html#ac5deaaec3f7af2c959d1508e9f5f8fce">add_process</a> PARAMS </td>
          <td>(</td>
          <td class="paramtype">(char *, <a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a>)&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aa79e921627e6969eedc9af7b3d968651"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa79e921627e6969eedc9af7b3d968651">&#9670;&nbsp;</a></span>PARAMS() <span class="overload">[2/14]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d0/dde/rl-callbacktest_8c.html#a2be1284fe65357755b6161a039fb59e4">sighandler</a> <a class="el" href="../../d8/d8d/nojobs_8c.html#a89ced87614d7f6c88e27c96091684467">wait_sigint_handler</a> PARAMS </td>
          <td>(</td>
          <td class="paramtype">(int)&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aa6a3b163e38cb8ca9249e7bf16ff4e16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6a3b163e38cb8ca9249e7bf16ff4e16">&#9670;&nbsp;</a></span>PARAMS() <span class="overload">[3/14]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void <a class="el" href="../../df/d8e/jobs_8c.html#af63ad360618b0a85b34755c7bc513b08">pretty_print_job</a> PARAMS </td>
          <td>(</td>
          <td class="paramtype">(int, int, <a class="el" href="../../dc/d4d/libc_2include_2stdio_8h.html#a912af5ab9f8a52ddd387b7defc0b49f1">FILE</a> *)&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aab0f1a0def64862cc5bd9bd0f0c9759c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab0f1a0def64862cc5bd9bd0f0c9759c">&#9670;&nbsp;</a></span>PARAMS() <span class="overload">[4/14]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int <a class="el" href="../../df/d8e/jobs_8c.html#a63606668cb8599788b6876b0f8683418">most_recent_job_in_state</a> PARAMS </td>
          <td>(</td>
          <td class="paramtype">(int, <a class="el" href="../../d3/d3a/jobs_8h.html#a27f134c9d8392fc50ee339c518707f57">JOB_STATE</a>)&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ab1cfef33b620cf092bcf422924864647"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1cfef33b620cf092bcf422924864647">&#9670;&nbsp;</a></span>PARAMS() <span class="overload">[5/14]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="../../dc/d6f/trap_8c.html#a16eea6a0b6ebfc715568ee23e0ae83b9">set_original_signal</a> PARAMS </td>
          <td>(</td>
          <td class="paramtype">(int, <a class="el" href="../../dd/db7/bash_2lib_2readline_2signals_8c.html#a1f8d6bb6b9aaad1c21141fc327620e99">SigHandler</a> *)&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a8120557116c791c66f695dd5956c03e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8120557116c791c66f695dd5956c03e4">&#9670;&nbsp;</a></span>PARAMS() <span class="overload">[6/14]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../d8/d73/killpg_8c.html#a7ffdc3cae8a7a29a324c1a86410597e1">killpg</a> PARAMS </td>
          <td>(</td>
          <td class="paramtype">(<a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a>, int)&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a685152789c57d78d917ddba8873dac81"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a685152789c57d78d917ddba8873dac81">&#9670;&nbsp;</a></span>PARAMS() <span class="overload">[7/14]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d3/d3a/jobs_8h.html#aefa2ee881236dafa12ac2427bb9c5088">PROCESS</a>* <a class="el" href="../../df/d8e/jobs_8c.html#a6581f40e1e7657048cbecabb416f13bb">find_pipeline</a> PARAMS </td>
          <td>(</td>
          <td class="paramtype">(<a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a>, int, int *)&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a3bc653575844f2f849fd226b4de7ba33"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3bc653575844f2f849fd226b4de7ba33">&#9670;&nbsp;</a></span>PARAMS() <span class="overload">[8/14]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int <a class="el" href="../../df/d8e/jobs_8c.html#a99584c8b38b45a70629677a975056374">find_job</a> PARAMS </td>
          <td>(</td>
          <td class="paramtype">(<a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a>, int, <a class="el" href="../../d3/d3a/jobs_8h.html#aefa2ee881236dafa12ac2427bb9c5088">PROCESS</a> **)&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a5489327bf55be2da2ed8a48e9e027549"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5489327bf55be2da2ed8a48e9e027549">&#9670;&nbsp;</a></span>PARAMS() <span class="overload">[9/14]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int <a class="el" href="../../df/d8e/jobs_8c.html#ade652681afa73d6b7c0b50697d071f83">maybe_give_terminal_to</a> PARAMS </td>
          <td>(</td>
          <td class="paramtype">(<a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a>, <a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a>, int)&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="adc79923b100861c2751458ba6b55a49e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc79923b100861c2751458ba6b55a49e">&#9670;&nbsp;</a></span>PARAMS() <span class="overload">[10/14]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d3/d3a/jobs_8h.html#aefa2ee881236dafa12ac2427bb9c5088">PROCESS</a>* <a class="el" href="../../df/d8e/jobs_8c.html#a902def40ee6ba9df31a8c4d126229005">find_pid_in_pipeline</a> PARAMS </td>
          <td>(</td>
          <td class="paramtype">(<a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a>, <a class="el" href="../../d3/d3a/jobs_8h.html#aefa2ee881236dafa12ac2427bb9c5088">PROCESS</a> *, int)&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a42bfae6b35b9cab06c3f312ecf9cb735"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42bfae6b35b9cab06c3f312ecf9cb735">&#9670;&nbsp;</a></span>PARAMS() <span class="overload">[11/14]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void <a class="el" href="../../df/d8e/jobs_8c.html#acc4f7a8abd55aaf9f35c58fe4afc0989">print_pipeline</a> PARAMS </td>
          <td>(</td>
          <td class="paramtype">(<a class="el" href="../../d3/d3a/jobs_8h.html#aefa2ee881236dafa12ac2427bb9c5088">PROCESS</a> *, int, int, <a class="el" href="../../dc/d4d/libc_2include_2stdio_8h.html#a912af5ab9f8a52ddd387b7defc0b49f1">FILE</a> *)&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="abeff4d37d45dd1f1617eaf93c87e306d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abeff4d37d45dd1f1617eaf93c87e306d">&#9670;&nbsp;</a></span>PARAMS() <span class="overload">[12/14]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int <a class="el" href="../../df/d8e/jobs_8c.html#aafea484f3bce52ca817d92f7c7b833ed">map_over_jobs</a> PARAMS </td>
          <td>(</td>
          <td class="paramtype">(sh_job_map_func_t *, int, int)&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ac1dd8860d8ef9359620953562aa272ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac1dd8860d8ef9359620953562aa272ff">&#9670;&nbsp;</a></span>PARAMS() <span class="overload">[13/14]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* <a class="el" href="../../df/d8e/jobs_8c.html#aa00dc6ac57f419e8d59ff822cc7b51ab">current_working_directory</a> PARAMS </td>
          <td>(</td>
          <td class="paramtype">(void)&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aaded572b92c8194bd4267cf902737fdf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaded572b92c8194bd4267cf902737fdf">&#9670;&nbsp;</a></span>PARAMS() <span class="overload">[14/14]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int <a class="el" href="../../d8/d8d/nojobs_8c.html#ab424b34a1f2efb697ac04e6ae1b67bd9">process_exit_status</a> PARAMS </td>
          <td>(</td>
          <td class="paramtype">(<a class="el" href="../../d9/dab/posixwait_8h.html#ad83fd8df8943a816e70cd8a3a31df5c3">WAIT</a>)&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="af63ad360618b0a85b34755c7bc513b08"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af63ad360618b0a85b34755c7bc513b08">&#9670;&nbsp;</a></span>pretty_print_job()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void pretty_print_job </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>job_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d4d/libc_2include_2stdio_8h.html#a912af5ab9f8a52ddd387b7defc0b49f1">FILE</a> *&#160;</td>
          <td class="paramname"><em>stream</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l02034">2034</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;{</div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;  <span class="keyword">register</span> <a class="code" href="../../d3/d3a/jobs_8h.html#d8/d20/structprocess">PROCESS</a> *<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>;</div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160; </div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;  <span class="comment">/* Format only pid information about the process group leader? */</span></div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d7/dd7/libbb_8h.html#ad09bf069f1dc789b35e313c3e2748329">format</a> == <a class="code" href="../../d3/d3a/jobs_8h.html#ae56b0ceb1d7156755f08a42b776afcb0">JLIST_PID_ONLY</a>)</div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;    {</div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;      <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#ad9291335f34e874c8431285d705bc3aa">fprintf</a> (stream, <span class="stringliteral">&quot;%ld\n&quot;</span>, (<span class="keywordtype">long</span>)<a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[job_index]-&gt;<a class="code" href="../../d6/d90/hush_8c.html#d8/d53/structpipe">pipe</a>-&gt;pid);</div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;    }</div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160; </div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d7/dd7/libbb_8h.html#ad09bf069f1dc789b35e313c3e2748329">format</a> == <a class="code" href="../../d3/d3a/jobs_8h.html#a454150edd28e70e10e8357b1e71e7384">JLIST_CHANGED_ONLY</a>)</div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;    {</div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d3/d3a/jobs_8h.html#a264330cfc7dfcc3a68791098619b1b10">IS_NOTIFIED</a> (job_index))</div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;      <a class="code" href="../../d7/dd7/libbb_8h.html#ad09bf069f1dc789b35e313c3e2748329">format</a> = <a class="code" href="../../d3/d3a/jobs_8h.html#ad9054abf38050f25ca5110797469a799">JLIST_STANDARD</a>;</div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;    }</div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160; </div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d7/dd7/libbb_8h.html#ad09bf069f1dc789b35e313c3e2748329">format</a> != <a class="code" href="../../d3/d3a/jobs_8h.html#a3e32ddd300903bbc3e8a401532ff6eef">JLIST_NONINTERACTIVE</a>)</div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;    <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#ad9291335f34e874c8431285d705bc3aa">fprintf</a> (stream, <span class="stringliteral">&quot;[%d]%c &quot;</span>, job_index + 1,</div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;          (job_index == <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ab72b09f6f206832a608cd245d513cca5">j_current</a>) ? <span class="charliteral">&#39;+&#39;</span>:</div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;        (job_index == <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a10c9a2fa68d7fed880e9f9c5f2b4d7f8">j_previous</a>) ? <span class="charliteral">&#39;-&#39;</span> : <span class="charliteral">&#39; &#39;</span>);</div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160; </div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d7/dd7/libbb_8h.html#ad09bf069f1dc789b35e313c3e2748329">format</a> == <a class="code" href="../../d3/d3a/jobs_8h.html#a3e32ddd300903bbc3e8a401532ff6eef">JLIST_NONINTERACTIVE</a>)</div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;    <a class="code" href="../../d7/dd7/libbb_8h.html#ad09bf069f1dc789b35e313c3e2748329">format</a> = <a class="code" href="../../d3/d3a/jobs_8h.html#a4ab9e8bb54284bd20a2e11476e845092">JLIST_LONG</a>;</div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160; </div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;  <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> = <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[job_index]-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#a7e5648df5ec2f0d459900325c2cc5816">pipe</a>;</div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160; </div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#acc4f7a8abd55aaf9f35c58fe4afc0989">print_pipeline</a> (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>, job_index, <a class="code" href="../../d7/dd7/libbb_8h.html#ad09bf069f1dc789b35e313c3e2748329">format</a>, stream);</div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160; </div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;  <span class="comment">/* We have printed information about this job.  When the job&#39;s</span></div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;<span class="comment">     status changes, waitchld () sets the notification flag to 0. */</span></div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[job_index]-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#af96c169abb39b4b3f9ccce91cb4b17dc">flags</a> |= <a class="code" href="../../d3/d3a/jobs_8h.html#ac67735d6cc995bbac83d5efe91a52125">J_NOTIFIED</a>;</div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;}</div>
<div class="ttc" id="ajobs_8c_html_acc4f7a8abd55aaf9f35c58fe4afc0989"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#acc4f7a8abd55aaf9f35c58fe4afc0989">print_pipeline</a></div><div class="ttdeci">static void print_pipeline(PROCESS *p, int job_index, int format, FILE *stream)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l01933">jobs.c:1933</a></div></div>
<div class="ttc" id="ajobs_8h_html_a454150edd28e70e10e8357b1e71e7384"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#a454150edd28e70e10e8357b1e71e7384">JLIST_CHANGED_ONLY</a></div><div class="ttdeci">#define JLIST_CHANGED_ONLY</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00035">jobs.h:35</a></div></div>
<div class="ttc" id="ajobs_8h_html_a4ab9e8bb54284bd20a2e11476e845092"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#a4ab9e8bb54284bd20a2e11476e845092">JLIST_LONG</a></div><div class="ttdeci">#define JLIST_LONG</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00033">jobs.h:33</a></div></div>
<div class="ttc" id="ajobs_8h_html_ae56b0ceb1d7156755f08a42b776afcb0"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#ae56b0ceb1d7156755f08a42b776afcb0">JLIST_PID_ONLY</a></div><div class="ttdeci">#define JLIST_PID_ONLY</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00034">jobs.h:34</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00125">job::flags</a>, <a class="el" href="../../d7/dd7/libbb_8h.html#ad09bf069f1dc789b35e313c3e2748329">format()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00097">fprintf()</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00115">IS_NOTIFIED</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00150">jobstats::j_current</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00106">J_NOTIFIED</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00151">jobstats::j_previous</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00035">JLIST_CHANGED_ONLY</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00033">JLIST_LONG</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00036">JLIST_NONINTERACTIVE</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00034">JLIST_PID_ONLY</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00032">JLIST_STANDARD</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00183">jobs</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00175">js</a>, <a class="el" href="../../d8/d64/glob__loop_8c_source.html#l00031">p</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00122">job::pipe</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l01933">print_pipeline()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l02082">list_one_job()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04235">notify_of_job_status()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l02072">print_job()</a>.</p>

</div>
</div>
<a id="a86dc11f7ce9b7fa8cb388f1e9029ac46"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86dc11f7ce9b7fa8cb388f1e9029ac46">&#9670;&nbsp;</a></span>print_job()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int print_job </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d3a/jobs_8h.html#ad1f8bdd512539c00ae7093dfcbe0a473">JOB</a> *&#160;</td>
          <td class="paramname"><em>job</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>job_index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l02072">2072</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;{</div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d6/d23/wi__stuff_8c.html#a102a30241e29b7ae7a452418431f728d">state</a> == -1 || (<a class="code" href="../../d3/d3a/jobs_8h.html#a27f134c9d8392fc50ee339c518707f57">JOB_STATE</a>)<a class="code" href="../../d6/d23/wi__stuff_8c.html#a102a30241e29b7ae7a452418431f728d">state</a> == <a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#a5bee3de4970de999192f8929f926a4fe">state</a>)</div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#af63ad360618b0a85b34755c7bc513b08">pretty_print_job</a> (job_index, <a class="code" href="../../d7/dd7/libbb_8h.html#ad09bf069f1dc789b35e313c3e2748329">format</a>, <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#a0c0ef221f95f64e8632451312fd18cc8">stdout</a>);</div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;  <span class="keywordflow">return</span> (0);</div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;}</div>
<div class="ttc" id="ajobs_8h_html_a27f134c9d8392fc50ee339c518707f57"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#a27f134c9d8392fc50ee339c518707f57">JOB_STATE</a></div><div class="ttdeci">JOB_STATE</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00094">jobs.h:94</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/dd7/libbb_8h.html#ad09bf069f1dc789b35e313c3e2748329">format()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02034">pretty_print_job()</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00124">job::state</a>, <a class="el" href="../../d6/d23/wi__stuff_8c_source.html#l00309">state</a>, and <a class="el" href="../../dc/d4d/libc_2include_2stdio_8h_source.html#l00057">stdout</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l02109">list_all_jobs()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02099">list_running_jobs()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l02091">list_stopped_jobs()</a>.</p>

</div>
</div>
<a id="acc4f7a8abd55aaf9f35c58fe4afc0989"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc4f7a8abd55aaf9f35c58fe4afc0989">&#9670;&nbsp;</a></span>print_pipeline()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void print_pipeline </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d3a/jobs_8h.html#aefa2ee881236dafa12ac2427bb9c5088">PROCESS</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>job_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d4d/libc_2include_2stdio_8h.html#a912af5ab9f8a52ddd387b7defc0b49f1">FILE</a> *&#160;</td>
          <td class="paramname"><em>stream</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l01933">1933</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;{</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;  <a class="code" href="../../d3/d3a/jobs_8h.html#d8/d20/structprocess">PROCESS</a> *<a class="code" href="../../d1/d00/iperl_8c.html#a6c8ec3c3e77241328358d43697f6f840">first</a>, *<a class="code" href="../../df/d84/arping_8c.html#a66d3fd8f1383b174b0226daecfb6c487">last</a>, *show;</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;  <span class="keywordtype">int</span> es, name_padding;</div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;  <span class="keywordtype">char</span> *temp;</div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160; </div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> == 0)</div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160; </div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;  <a class="code" href="../../d1/d00/iperl_8c.html#a6c8ec3c3e77241328358d43697f6f840">first</a> = <a class="code" href="../../df/d84/arping_8c.html#a66d3fd8f1383b174b0226daecfb6c487">last</a> = <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>;</div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="../../df/d84/arping_8c.html#a66d3fd8f1383b174b0226daecfb6c487">last</a>-&gt;next != <a class="code" href="../../d1/d00/iperl_8c.html#a6c8ec3c3e77241328358d43697f6f840">first</a>)</div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;    <a class="code" href="../../df/d84/arping_8c.html#a66d3fd8f1383b174b0226daecfb6c487">last</a> = <a class="code" href="../../df/d84/arping_8c.html#a66d3fd8f1383b174b0226daecfb6c487">last</a>-&gt;next;</div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160; </div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;  <span class="keywordflow">for</span> (;;)</div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;    {</div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> != <a class="code" href="../../d1/d00/iperl_8c.html#a6c8ec3c3e77241328358d43697f6f840">first</a>)</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;    <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#ad9291335f34e874c8431285d705bc3aa">fprintf</a> (stream, <a class="code" href="../../d7/dd7/libbb_8h.html#ad09bf069f1dc789b35e313c3e2748329">format</a> ? <span class="stringliteral">&quot;     &quot;</span> : <span class="stringliteral">&quot; |&quot;</span>);</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160; </div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d7/dd7/libbb_8h.html#ad09bf069f1dc789b35e313c3e2748329">format</a> != <a class="code" href="../../d3/d3a/jobs_8h.html#ad9054abf38050f25ca5110797469a799">JLIST_STANDARD</a>)</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;    <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#ad9291335f34e874c8431285d705bc3aa">fprintf</a> (stream, <span class="stringliteral">&quot;%5ld&quot;</span>, (<span class="keywordtype">long</span>)<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;pid);</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160; </div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;      <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#ad9291335f34e874c8431285d705bc3aa">fprintf</a> (stream, <span class="stringliteral">&quot; &quot;</span>);</div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160; </div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d7/dd7/libbb_8h.html#ad09bf069f1dc789b35e313c3e2748329">format</a> &gt; -1 &amp;&amp; job_index &gt;= 0)</div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;    {</div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;      show = <a class="code" href="../../d7/dd7/libbb_8h.html#ad09bf069f1dc789b35e313c3e2748329">format</a> ? <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> : <a class="code" href="../../df/d84/arping_8c.html#a66d3fd8f1383b174b0226daecfb6c487">last</a>;</div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;      temp = <a class="code" href="../../df/d8e/jobs_8c.html#aa39fb0570606ccbbce86ce48dfb52a9e">printable_job_status</a> (job_index, show, <a class="code" href="../../d7/dd7/libbb_8h.html#ad09bf069f1dc789b35e313c3e2748329">format</a>);</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160; </div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> != <a class="code" href="../../d1/d00/iperl_8c.html#a6c8ec3c3e77241328358d43697f6f840">first</a>)</div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;        {</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="../../d7/dd7/libbb_8h.html#ad09bf069f1dc789b35e313c3e2748329">format</a>)</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;        {</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;          <span class="keywordflow">if</span> (show-&gt;<a class="code" href="../../d3/d3a/jobs_8h.html#ada5ec5eaed30b9d88d1cf6f2b27c3470">running</a> == <a class="code" href="../../d1/d00/iperl_8c.html#a6c8ec3c3e77241328358d43697f6f840">first</a>-&gt;running &amp;&amp;</div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;              <a class="code" href="../../d9/dab/posixwait_8h.html#a369bfd939bb8dd38f7f8813cc7aa3fdb">WSTATUS</a> (show-&gt;<a class="code" href="../../d3/d3a/jobs_8h.html#ab1cc113f2cf7e94945d01e4366ac1d0c">status</a>) == <a class="code" href="../../d9/dab/posixwait_8h.html#a369bfd939bb8dd38f7f8813cc7aa3fdb">WSTATUS</a> (<a class="code" href="../../d1/d00/iperl_8c.html#a6c8ec3c3e77241328358d43697f6f840">first</a>-&gt;status))</div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;            temp = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;        }</div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;        temp = (<span class="keywordtype">char</span> *)<a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;        }</div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160; </div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;      <span class="keywordflow">if</span> (temp)</div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;        {</div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;          <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#ad9291335f34e874c8431285d705bc3aa">fprintf</a> (stream, <span class="stringliteral">&quot;%s&quot;</span>, temp);</div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160; </div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;          es = <a class="code" href="../../d9/d14/general_8h.html#a916ffefe1fc74532d08102cca55d8e34">STRLEN</a> (temp);</div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;          <span class="keywordflow">if</span> (es == 0)</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;        es = 2; <span class="comment">/* strlen (&quot;| &quot;) */</span></div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;          name_padding = <a class="code" href="../../d3/d3a/jobs_8h.html#ad71765c2220f5220fd8874558a5eddea">LONGEST_SIGNAL_DESC</a> - es;</div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160; </div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;          <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#ad9291335f34e874c8431285d705bc3aa">fprintf</a> (stream, <span class="stringliteral">&quot;%*s&quot;</span>, name_padding, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160; </div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;          <span class="keywordflow">if</span> ((<a class="code" href="../../d7/d23/unionwait_8h.html#ae2b610235f988f4f3109f02a2f395727">WIFSTOPPED</a> (show-&gt;<a class="code" href="../../d3/d3a/jobs_8h.html#ab1cc113f2cf7e94945d01e4366ac1d0c">status</a>) == 0) &amp;&amp;</div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;          (<a class="code" href="../../df/d8e/jobs_8c.html#ae5533b3213b8e81491aa4212ac8fc602">WIFCONTINUED</a> (show-&gt;<a class="code" href="../../d3/d3a/jobs_8h.html#ab1cc113f2cf7e94945d01e4366ac1d0c">status</a>) == 0) &amp;&amp;</div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;          <a class="code" href="../../d7/d23/unionwait_8h.html#a3256a8ffff11bf6a48dfbc94d1688ced">WIFCORED</a> (show-&gt;<a class="code" href="../../d3/d3a/jobs_8h.html#ab1cc113f2cf7e94945d01e4366ac1d0c">status</a>))</div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;        <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#ad9291335f34e874c8431285d705bc3aa">fprintf</a> (stream, <a class="code" href="../../d7/dcd/bashintl_8h.html#a86a239addea586602343007a370bf8ad">_</a>(<span class="stringliteral">&quot;(core dumped) &quot;</span>));</div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;        }</div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;    }</div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160; </div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> != <a class="code" href="../../d1/d00/iperl_8c.html#a6c8ec3c3e77241328358d43697f6f840">first</a> &amp;&amp; <a class="code" href="../../d7/dd7/libbb_8h.html#ad09bf069f1dc789b35e313c3e2748329">format</a>)</div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;    <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#ad9291335f34e874c8431285d705bc3aa">fprintf</a> (stream, <span class="stringliteral">&quot;| &quot;</span>);</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160; </div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;command)</div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;    <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#ad9291335f34e874c8431285d705bc3aa">fprintf</a> (stream, <span class="stringliteral">&quot;%s&quot;</span>, <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;command);</div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160; </div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> == <a class="code" href="../../df/d84/arping_8c.html#a66d3fd8f1383b174b0226daecfb6c487">last</a> &amp;&amp; job_index &gt;= 0)</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;    {</div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;      temp = <a class="code" href="../../df/d8e/jobs_8c.html#aa00dc6ac57f419e8d59ff822cc7b51ab">current_working_directory</a> ();</div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160; </div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d3/d3a/jobs_8h.html#abb162c99100e0466ef43cf32884f29e8">RUNNING</a> (job_index) &amp;&amp; (<a class="code" href="../../d3/d3a/jobs_8h.html#ae19ce7e46f6caa8b6726dfb0d40e0a1f">IS_FOREGROUND</a> (job_index) == 0))</div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;        <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#ad9291335f34e874c8431285d705bc3aa">fprintf</a> (stream, <span class="stringliteral">&quot; &amp;&quot;</span>);</div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160; </div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/db0/dynlink_8c.html#af3054366f27929432795c5ae420a5294">strcmp</a> (temp, <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[job_index]-&gt;wd) != 0)</div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;        <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#ad9291335f34e874c8431285d705bc3aa">fprintf</a> (stream,</div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;          <a class="code" href="../../d7/dcd/bashintl_8h.html#a86a239addea586602343007a370bf8ad">_</a>(<span class="stringliteral">&quot;  (wd: %s)&quot;</span>), <a class="code" href="../../d1/dca/general_8c.html#a43b9da0ddb47cad720f96dd583609735">polite_directory_format</a> (<a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[job_index]-&gt;wd));</div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;    }</div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160; </div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d7/dd7/libbb_8h.html#ad09bf069f1dc789b35e313c3e2748329">format</a> || (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> == <a class="code" href="../../df/d84/arping_8c.html#a66d3fd8f1383b174b0226daecfb6c487">last</a>))</div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;    {</div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;      <span class="comment">/* We need to add a CR only if this is an interactive shell, and</span></div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;<span class="comment">         we&#39;re reporting the status of a completed job asynchronously.</span></div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;<span class="comment">         We can&#39;t really check whether this particular job is being</span></div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;<span class="comment">         reported asynchronously, so just add the CR if the shell is</span></div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;<span class="comment">         currently interactive and asynchronous notification is enabled. */</span></div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d8/d70/flags_8c.html#a3887d369fc9987f2ba0c9f5b8bd6dfbc">asynchronous_notification</a> &amp;&amp; <a class="code" href="../../d6/d4f/shell_8c.html#aeb39d5d8ddd4957f1b01720fa0e37e36">interactive</a>)</div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;        <a class="code" href="../../d7/dd7/libbb_8h.html#a0b8e699e4dfd158acee3d6526fe671c2">putc</a> (<span class="charliteral">&#39;\r&#39;</span>, stream);</div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;      <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#ad9291335f34e874c8431285d705bc3aa">fprintf</a> (stream, <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;    }</div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160; </div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> == <a class="code" href="../../df/d84/arping_8c.html#a66d3fd8f1383b174b0226daecfb6c487">last</a>)</div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;      <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> = <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;next;</div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;    }</div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;  <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#adb974f28765a31026ee6bf71d5175951">fflush</a> (stream);</div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;}</div>
<div class="ttc" id="aarping_8c_html_a66d3fd8f1383b174b0226daecfb6c487"><div class="ttname"><a href="../../df/d84/arping_8c.html#a66d3fd8f1383b174b0226daecfb6c487">last</a></div><div class="ttdeci">#define last</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d84/arping_8c_source.html#l00093">arping.c:93</a></div></div>
<div class="ttc" id="aflags_8c_html_a3887d369fc9987f2ba0c9f5b8bd6dfbc"><div class="ttname"><a href="../../d8/d70/flags_8c.html#a3887d369fc9987f2ba0c9f5b8bd6dfbc">asynchronous_notification</a></div><div class="ttdeci">int asynchronous_notification</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d70/flags_8c_source.html#l00051">flags.c:51</a></div></div>
<div class="ttc" id="ageneral_8h_html_a916ffefe1fc74532d08102cca55d8e34"><div class="ttname"><a href="../../d9/d14/general_8h.html#a916ffefe1fc74532d08102cca55d8e34">STRLEN</a></div><div class="ttdeci">#define STRLEN(s)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d14/general_8h_source.html#l00171">general.h:171</a></div></div>
<div class="ttc" id="aiperl_8c_html_a6c8ec3c3e77241328358d43697f6f840"><div class="ttname"><a href="../../d1/d00/iperl_8c.html#a6c8ec3c3e77241328358d43697f6f840">first</a></div><div class="ttdeci">static int first</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d00/iperl_8c_source.html#l00010">iperl.c:10</a></div></div>
<div class="ttc" id="ajobs_8c_html_aa39fb0570606ccbbce86ce48dfb52a9e"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#aa39fb0570606ccbbce86ce48dfb52a9e">printable_job_status</a></div><div class="ttdeci">static char * printable_job_status(int j, PROCESS *p, int format)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l01860">jobs.c:1860</a></div></div>
<div class="ttc" id="ajobs_8c_html_ae5533b3213b8e81491aa4212ac8fc602"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#ae5533b3213b8e81491aa4212ac8fc602">WIFCONTINUED</a></div><div class="ttdeci">#define WIFCONTINUED(s)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l00159">jobs.c:159</a></div></div>
<div class="ttc" id="ajobs_8h_html_ab1cc113f2cf7e94945d01e4366ac1d0c"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#ab1cc113f2cf7e94945d01e4366ac1d0c">process::status</a></div><div class="ttdeci">WAIT status</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00068">jobs.h:68</a></div></div>
<div class="ttc" id="ajobs_8h_html_ad71765c2220f5220fd8874558a5eddea"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#ad71765c2220f5220fd8874558a5eddea">LONGEST_SIGNAL_DESC</a></div><div class="ttdeci">#define LONGEST_SIGNAL_DESC</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00039">jobs.h:39</a></div></div>
<div class="ttc" id="ajobs_8h_html_ada5ec5eaed30b9d88d1cf6f2b27c3470"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#ada5ec5eaed30b9d88d1cf6f2b27c3470">process::running</a></div><div class="ttdeci">int running</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00069">jobs.h:69</a></div></div>
<div class="ttc" id="alibbb_8h_html_a0b8e699e4dfd158acee3d6526fe671c2"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#a0b8e699e4dfd158acee3d6526fe671c2">putc</a></div><div class="ttdeci">#define putc(c, stream)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dd7/libbb_8h_source.html#l00225">libbb.h:225</a></div></div>
<div class="ttc" id="alibc_2include_2stdio_8h_html_adb974f28765a31026ee6bf71d5175951"><div class="ttname"><a href="../../dc/d4d/libc_2include_2stdio_8h.html#adb974f28765a31026ee6bf71d5175951">fflush</a></div><div class="ttdeci">int fflush(FILE *stream)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00085">file.c:85</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/dcd/bashintl_8h_source.html#l00036">_</a>, <a class="el" href="../../d8/d70/flags_8c_source.html#l00051">asynchronous_notification</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00383">current_working_directory()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00085">fflush()</a>, <a class="el" href="../../d1/d00/iperl_8c_source.html#l00010">first</a>, <a class="el" href="../../d7/dd7/libbb_8h.html#ad09bf069f1dc789b35e313c3e2748329">format()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00097">fprintf()</a>, <a class="el" href="../../d6/d4f/shell_8c_source.html#l00139">interactive</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00114">IS_FOREGROUND</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00032">JLIST_STANDARD</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00183">jobs</a>, <a class="el" href="../../df/d84/arping_8c_source.html#l00093">last</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00039">LONGEST_SIGNAL_DESC</a>, <a class="el" href="../../d9/d14/general_8h_source.html#l00053">NULL</a>, <a class="el" href="../../d8/d64/glob__loop_8c_source.html#l00031">p</a>, <a class="el" href="../../d1/dca/general_8c_source.html#l00903">polite_directory_format()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01860">printable_job_status()</a>, <a class="el" href="../../d7/dd7/libbb_8h_source.html#l00225">putc</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00069">process::running</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00099">RUNNING</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00068">process::status</a>, <a class="el" href="../../d5/db0/dynlink_8c_source.html#l00174">strcmp</a>, <a class="el" href="../../d9/d14/general_8h_source.html#l00171">STRLEN</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00159">WIFCONTINUED</a>, <a class="el" href="../../d7/d23/unionwait_8h_source.html#l00096">WIFCORED</a>, <a class="el" href="../../d7/d23/unionwait_8h_source.html#l00089">WIFSTOPPED</a>, and <a class="el" href="../../d9/dab/posixwait_8h_source.html#l00039">WSTATUS</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l02034">pretty_print_job()</a>.</p>

</div>
</div>
<a id="aa39fb0570606ccbbce86ce48dfb52a9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa39fb0570606ccbbce86ce48dfb52a9e">&#9670;&nbsp;</a></span>printable_job_status()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* printable_job_status </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>j</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d3a/jobs_8h.html#aefa2ee881236dafa12ac2427bb9c5088">PROCESS</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>format</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l01860">1860</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;{</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">char</span> *temp;</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;  <span class="keywordtype">int</span> es;</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160; </div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;  temp = <a class="code" href="../../d7/dcd/bashintl_8h.html#a86a239addea586602343007a370bf8ad">_</a>(<span class="stringliteral">&quot;Done&quot;</span>);</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160; </div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d3/d3a/jobs_8h.html#adc39613d1152c030190012a614856c69">STOPPED</a> (<a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a>) &amp;&amp; <a class="code" href="../../d7/dd7/libbb_8h.html#ad09bf069f1dc789b35e313c3e2748329">format</a> == 0)</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;    {</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d4f/shell_8c.html#a15b0e48465dfc17e94173c63e10b57cc">posixly_correct</a> == 0 || <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> == 0 || (<a class="code" href="../../d7/d23/unionwait_8h.html#ae2b610235f988f4f3109f02a2f395727">WIFSTOPPED</a> (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;status) == 0))</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;    temp = <a class="code" href="../../d7/dcd/bashintl_8h.html#a86a239addea586602343007a370bf8ad">_</a>(<span class="stringliteral">&quot;Stopped&quot;</span>);</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;    {</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;      temp = <a class="code" href="../../df/d8e/jobs_8c.html#aac5dfe821e90fd3b3f3a0c4a0d1f09a1">retcode_name_buffer</a>;</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;      <a class="code" href="../../d4/db1/apps_2base_2bash_2lib_2sh_2snprintf_8c.html#a2f895806f62a5ee9e7ce6575b4963f6e">snprintf</a> (temp, <span class="keyword">sizeof</span>(<a class="code" href="../../df/d8e/jobs_8c.html#aac5dfe821e90fd3b3f3a0c4a0d1f09a1">retcode_name_buffer</a>), <a class="code" href="../../d7/dcd/bashintl_8h.html#a86a239addea586602343007a370bf8ad">_</a>(<span class="stringliteral">&quot;Stopped(%s)&quot;</span>), <a class="code" href="../../dc/d6f/trap_8c.html#a4fb32f69a3182e0be05e2142ca17ee54">signal_name</a> (<a class="code" href="../../d7/d23/unionwait_8h.html#a2c6d84ce222454bb6387fc20d930f5b7">WSTOPSIG</a> (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;status)));</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;    }</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;    }</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d3/d3a/jobs_8h.html#abb162c99100e0466ef43cf32884f29e8">RUNNING</a> (<a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a>))</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;    temp = <a class="code" href="../../d7/dcd/bashintl_8h.html#a86a239addea586602343007a370bf8ad">_</a>(<span class="stringliteral">&quot;Running&quot;</span>);</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;    {</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d7/d23/unionwait_8h.html#ae2b610235f988f4f3109f02a2f395727">WIFSTOPPED</a> (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;status))</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;    temp = <a class="code" href="../../df/d8e/jobs_8c.html#a73562e7524f0f619567b2414e0a15309">j_strsignal</a> (<a class="code" href="../../d7/d23/unionwait_8h.html#a2c6d84ce222454bb6387fc20d930f5b7">WSTOPSIG</a> (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;status));</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d7/d23/unionwait_8h.html#a6953e62fd0dec274a397678d31c344b4">WIFSIGNALED</a> (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;status))</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;    temp = <a class="code" href="../../df/d8e/jobs_8c.html#a73562e7524f0f619567b2414e0a15309">j_strsignal</a> (<a class="code" href="../../d7/d23/unionwait_8h.html#aeba4d421572a9d681c73c347f24ad348">WTERMSIG</a> (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;status));</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d7/d23/unionwait_8h.html#af9a4ddf9eee6c4a3bc9be070d59b7ccf">WIFEXITED</a> (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;status))</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;    {</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;      temp = <a class="code" href="../../df/d8e/jobs_8c.html#aac5dfe821e90fd3b3f3a0c4a0d1f09a1">retcode_name_buffer</a>;</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;      es = <a class="code" href="../../d7/d23/unionwait_8h.html#ae0c8840076dd63d5e2367fff4f7f46f3">WEXITSTATUS</a> (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;status);</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;      <span class="keywordflow">if</span> (es == 0)</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;        {</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;          <a class="code" href="../../dc/da4/libc_2include_2string_8h.html#a12f4a7953a24e197c8d26bf0493f8225">strncpy</a> (temp, <a class="code" href="../../d7/dcd/bashintl_8h.html#a86a239addea586602343007a370bf8ad">_</a>(<span class="stringliteral">&quot;Done&quot;</span>), <span class="keyword">sizeof</span> (<a class="code" href="../../df/d8e/jobs_8c.html#aac5dfe821e90fd3b3f3a0c4a0d1f09a1">retcode_name_buffer</a>) - 1);</div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;          temp[<span class="keyword">sizeof</span> (<a class="code" href="../../df/d8e/jobs_8c.html#aac5dfe821e90fd3b3f3a0c4a0d1f09a1">retcode_name_buffer</a>) - 1] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;        }</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d6/d4f/shell_8c.html#a15b0e48465dfc17e94173c63e10b57cc">posixly_correct</a>)</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;        <a class="code" href="../../d4/db1/apps_2base_2bash_2lib_2sh_2snprintf_8c.html#a2f895806f62a5ee9e7ce6575b4963f6e">snprintf</a> (temp, <span class="keyword">sizeof</span>(<a class="code" href="../../df/d8e/jobs_8c.html#aac5dfe821e90fd3b3f3a0c4a0d1f09a1">retcode_name_buffer</a>), <a class="code" href="../../d7/dcd/bashintl_8h.html#a86a239addea586602343007a370bf8ad">_</a>(<span class="stringliteral">&quot;Done(%d)&quot;</span>), es);</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;        <a class="code" href="../../d4/db1/apps_2base_2bash_2lib_2sh_2snprintf_8c.html#a2f895806f62a5ee9e7ce6575b4963f6e">snprintf</a> (temp, <span class="keyword">sizeof</span>(<a class="code" href="../../df/d8e/jobs_8c.html#aac5dfe821e90fd3b3f3a0c4a0d1f09a1">retcode_name_buffer</a>), <a class="code" href="../../d7/dcd/bashintl_8h.html#a86a239addea586602343007a370bf8ad">_</a>(<span class="stringliteral">&quot;Exit %d&quot;</span>), es);</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;    }</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;    temp = <a class="code" href="../../d7/dcd/bashintl_8h.html#a86a239addea586602343007a370bf8ad">_</a>(<span class="stringliteral">&quot;Unknown status&quot;</span>);</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;    }</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160; </div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;  <span class="keywordflow">return</span> temp;</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;}</div>
<div class="ttc" id="alibc_2include_2string_8h_html_a12f4a7953a24e197c8d26bf0493f8225"><div class="ttname"><a href="../../dc/da4/libc_2include_2string_8h.html#a12f4a7953a24e197c8d26bf0493f8225">strncpy</a></div><div class="ttdeci">char * strncpy(char *destination, const char *source, unsigned long num)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/db0/string_8c_source.html#l00081">string.c:81</a></div></div>
<div class="ttc" id="atrap_8c_html_a4fb32f69a3182e0be05e2142ca17ee54"><div class="ttname"><a href="../../dc/d6f/trap_8c.html#a4fb32f69a3182e0be05e2142ca17ee54">signal_name</a></div><div class="ttdeci">char * signal_name(int sig)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d6f/trap_8c_source.html#l00213">trap.c:213</a></div></div>
<div class="ttc" id="aunionwait_8h_html_a2c6d84ce222454bb6387fc20d930f5b7"><div class="ttname"><a href="../../d7/d23/unionwait_8h.html#a2c6d84ce222454bb6387fc20d930f5b7">WSTOPSIG</a></div><div class="ttdeci">#define WSTOPSIG(x)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d23/unionwait_8h_source.html#l00094">unionwait.h:94</a></div></div>
<div class="ttc" id="aunionwait_8h_html_ae0c8840076dd63d5e2367fff4f7f46f3"><div class="ttname"><a href="../../d7/d23/unionwait_8h.html#ae0c8840076dd63d5e2367fff4f7f46f3">WEXITSTATUS</a></div><div class="ttdeci">#define WEXITSTATUS(x)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d23/unionwait_8h_source.html#l00095">unionwait.h:95</a></div></div>
<div class="ttc" id="aunionwait_8h_html_af9a4ddf9eee6c4a3bc9be070d59b7ccf"><div class="ttname"><a href="../../d7/d23/unionwait_8h.html#af9a4ddf9eee6c4a3bc9be070d59b7ccf">WIFEXITED</a></div><div class="ttdeci">#define WIFEXITED(x)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d23/unionwait_8h_source.html#l00090">unionwait.h:90</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/dcd/bashintl_8h_source.html#l00036">_</a>, <a class="el" href="../../d7/dd7/libbb_8h.html#ad09bf069f1dc789b35e313c3e2748329">format()</a>, <a class="el" href="../../dc/da2/musl_2src_2prng_2random_8c_source.html#l00024">j</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01845">j_strsignal()</a>, <a class="el" href="../../d8/d64/glob__loop_8c_source.html#l00031">p</a>, <a class="el" href="../../d6/d4f/shell_8c_source.html#l00237">posixly_correct</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00348">retcode_name_buffer</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00099">RUNNING</a>, <a class="el" href="../../dc/d6f/trap_8c_source.html#l00213">signal_name()</a>, <a class="el" href="../../d4/db1/apps_2base_2bash_2lib_2sh_2snprintf_8c_source.html#l01727">snprintf()</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00098">STOPPED</a>, <a class="el" href="../../d1/db0/string_8c_source.html#l00081">strncpy()</a>, <a class="el" href="../../d7/d23/unionwait_8h_source.html#l00095">WEXITSTATUS</a>, <a class="el" href="../../d7/d23/unionwait_8h_source.html#l00090">WIFEXITED</a>, <a class="el" href="../../d7/d23/unionwait_8h_source.html#l00091">WIFSIGNALED</a>, <a class="el" href="../../d7/d23/unionwait_8h_source.html#l00089">WIFSTOPPED</a>, <a class="el" href="../../d7/d23/unionwait_8h_source.html#l00094">WSTOPSIG</a>, and <a class="el" href="../../d7/d23/unionwait_8h_source.html#l00093">WTERMSIG</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l01933">print_pipeline()</a>.</p>

</div>
</div>
<a id="aa55261d2e8eb934ebde20d623e5e05d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa55261d2e8eb934ebde20d623e5e05d2">&#9670;&nbsp;</a></span>process_exit_signal()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int process_exit_signal </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/dab/posixwait_8h.html#ad83fd8df8943a816e70cd8a3a31df5c3">WAIT</a>&#160;</td>
          <td class="paramname"><em>status</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l02794">2794</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;{</div>
<div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;  <span class="keywordflow">return</span> (<a class="code" href="../../d7/d23/unionwait_8h.html#a6953e62fd0dec274a397678d31c344b4">WIFSIGNALED</a> (<a class="code" href="../../d7/d5b/mail_8c.html#a6943d6e2e83995c648644bc0a4d36f53">status</a>) ? <a class="code" href="../../d7/d23/unionwait_8h.html#aeba4d421572a9d681c73c347f24ad348">WTERMSIG</a> (<a class="code" href="../../d7/d5b/mail_8c.html#a6943d6e2e83995c648644bc0a4d36f53">status</a>) : 0);</div>
<div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/d5b/mail_8c.html#a6943d6e2e83995c648644bc0a4d36f53">status</a>, <a class="el" href="../../d7/d23/unionwait_8h_source.html#l00091">WIFSIGNALED</a>, and <a class="el" href="../../d7/d23/unionwait_8h_source.html#l00093">WTERMSIG</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l02873">job_exit_signal()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l02899">wait_for()</a>.</p>

</div>
</div>
<a id="ab424b34a1f2efb697ac04e6ae1b67bd9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab424b34a1f2efb697ac04e6ae1b67bd9">&#9670;&nbsp;</a></span>process_exit_status()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int process_exit_status </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/dab/posixwait_8h.html#ad83fd8df8943a816e70cd8a3a31df5c3">WAIT</a>&#160;</td>
          <td class="paramname"><em>status</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l02801">2801</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;{</div>
<div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d7/d23/unionwait_8h.html#a6953e62fd0dec274a397678d31c344b4">WIFSIGNALED</a> (<a class="code" href="../../d7/d5b/mail_8c.html#a6943d6e2e83995c648644bc0a4d36f53">status</a>))</div>
<div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;    <span class="keywordflow">return</span> (128 + <a class="code" href="../../d7/d23/unionwait_8h.html#aeba4d421572a9d681c73c347f24ad348">WTERMSIG</a> (<a class="code" href="../../d7/d5b/mail_8c.html#a6943d6e2e83995c648644bc0a4d36f53">status</a>));</div>
<div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d7/d23/unionwait_8h.html#ae2b610235f988f4f3109f02a2f395727">WIFSTOPPED</a> (<a class="code" href="../../d7/d5b/mail_8c.html#a6943d6e2e83995c648644bc0a4d36f53">status</a>) == 0)</div>
<div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="../../d7/d23/unionwait_8h.html#ae0c8840076dd63d5e2367fff4f7f46f3">WEXITSTATUS</a> (<a class="code" href="../../d7/d5b/mail_8c.html#a6943d6e2e83995c648644bc0a4d36f53">status</a>));</div>
<div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="../../df/d03/shell_8h.html#a24d155899d8cc037505383c1016dbd65">EXECUTION_SUCCESS</a>);</div>
<div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d03/shell_8h_source.html#l00053">EXECUTION_SUCCESS</a>, <a class="el" href="../../d7/d5b/mail_8c.html#a6943d6e2e83995c648644bc0a4d36f53">status</a>, <a class="el" href="../../d7/d23/unionwait_8h_source.html#l00095">WEXITSTATUS</a>, <a class="el" href="../../d7/d23/unionwait_8h_source.html#l00091">WIFSIGNALED</a>, <a class="el" href="../../d7/d23/unionwait_8h_source.html#l00089">WIFSTOPPED</a>, and <a class="el" href="../../d7/d23/unionwait_8h_source.html#l00093">WTERMSIG</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l01386">delete_job()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02866">job_exit_status()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l03980">set_job_status_and_cleanup()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04155">setjstatus()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l02899">wait_for()</a>.</p>

</div>
</div>
<a id="ac3e9a0b379bd8615de3876b2e6b6754d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3e9a0b379bd8615de3876b2e6b6754d">&#9670;&nbsp;</a></span>processes_in_job()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int processes_in_job </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>job</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l01246">1246</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;{</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;  <span class="keywordtype">int</span> nproc;</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;  <span class="keyword">register</span> <a class="code" href="../../d3/d3a/jobs_8h.html#d8/d20/structprocess">PROCESS</a> *<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>;</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160; </div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;  nproc = 0;</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;  <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> = <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>]-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#a7e5648df5ec2f0d459900325c2cc5816">pipe</a>;</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;  <span class="keywordflow">do</span></div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;    {</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;      <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> = <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;next;</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;      nproc++;</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;    }</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> != <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>]-&gt;<a class="code" href="../../d6/d90/hush_8c.html#d8/d53/structpipe">pipe</a>);</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160; </div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;  <span class="keywordflow">return</span> nproc;</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d8e/jobs_8c_source.html#l00183">jobs</a>, <a class="el" href="../../d8/d64/glob__loop_8c_source.html#l00031">p</a>, and <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00122">job::pipe</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l04827">mark_dead_jobs_as_notified()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l01290">realloc_jobs_list()</a>.</p>

</div>
</div>
<a id="afe405cc65c61bf8889e6147876a49c75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe405cc65c61bf8889e6147876a49c75">&#9670;&nbsp;</a></span>pshash_delindex()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void pshash_delindex </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d3a/jobs_8h.html#a677d6488545fa3193e7cb54647b4ae5c">ps_index_t</a>&#160;</td>
          <td class="paramname"><em>psi</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00866">866</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;{</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;  <span class="keyword">struct </span><a class="code" href="../../d3/d3a/jobs_8h.html#d5/d37/structpidstat">pidstat</a> *ps;</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;  <a class="code" href="../../d3/d3a/jobs_8h.html#a677d6488545fa3193e7cb54647b4ae5c">ps_index_t</a> *bucket;</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160; </div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;  ps = &amp;<a class="code" href="../../d3/d3a/jobs_8h.html#d9/deb/structbgpids">bgpids</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a9e1b9f32d9f6e5db5387b07d9e5440ff">storage</a>[psi];</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;  <span class="keywordflow">if</span> (ps-&gt;<a class="code" href="../../d3/d3a/jobs_8h.html#a9720eaa7788ca953a6130f2b8d1d1a23">pid</a> == <a class="code" href="../../d3/d3a/jobs_8h.html#ad40327c746e8ef715109d9b9257eb991">NO_PID</a>)</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160; </div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;  <span class="keywordflow">if</span> (ps-&gt;<a class="code" href="../../d3/d3a/jobs_8h.html#a6848a528a59f93911847b61d0b329ee5">bucket_next</a> != <a class="code" href="../../d3/d3a/jobs_8h.html#aa0ca45454a6e8f383c4d1e490dcb6bb3">NO_PIDSTAT</a>)</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;    <a class="code" href="../../d3/d3a/jobs_8h.html#d9/deb/structbgpids">bgpids</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a9e1b9f32d9f6e5db5387b07d9e5440ff">storage</a>[ps-&gt;<a class="code" href="../../d3/d3a/jobs_8h.html#a6848a528a59f93911847b61d0b329ee5">bucket_next</a>].<a class="code" href="../../d3/d3a/jobs_8h.html#a5b7cfb7d4d5f30b11eaa92db21ec71a0">bucket_prev</a> = ps-&gt;<a class="code" href="../../d3/d3a/jobs_8h.html#a5b7cfb7d4d5f30b11eaa92db21ec71a0">bucket_prev</a>;</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;  <span class="keywordflow">if</span> (ps-&gt;<a class="code" href="../../d3/d3a/jobs_8h.html#a5b7cfb7d4d5f30b11eaa92db21ec71a0">bucket_prev</a> != <a class="code" href="../../d3/d3a/jobs_8h.html#aa0ca45454a6e8f383c4d1e490dcb6bb3">NO_PIDSTAT</a>)</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;    <a class="code" href="../../d3/d3a/jobs_8h.html#d9/deb/structbgpids">bgpids</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a9e1b9f32d9f6e5db5387b07d9e5440ff">storage</a>[ps-&gt;<a class="code" href="../../d3/d3a/jobs_8h.html#a5b7cfb7d4d5f30b11eaa92db21ec71a0">bucket_prev</a>].<a class="code" href="../../d3/d3a/jobs_8h.html#a6848a528a59f93911847b61d0b329ee5">bucket_next</a> = ps-&gt;<a class="code" href="../../d3/d3a/jobs_8h.html#a6848a528a59f93911847b61d0b329ee5">bucket_next</a>;</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    {</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;      bucket = <a class="code" href="../../df/d8e/jobs_8c.html#a7e0bb0533cedbd5496331c5aae1e1d60">pshash_getbucket</a> (ps-&gt;<a class="code" href="../../d3/d3a/jobs_8h.html#a9720eaa7788ca953a6130f2b8d1d1a23">pid</a>);</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;      *bucket = ps-&gt;<a class="code" href="../../d3/d3a/jobs_8h.html#a6848a528a59f93911847b61d0b329ee5">bucket_next</a>;    <span class="comment">/* deleting chain head in hash table */</span></div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    }</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160; </div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;  <span class="comment">/* clear out this cell, in case it gets reused. */</span></div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;  ps-&gt;<a class="code" href="../../d3/d3a/jobs_8h.html#a9720eaa7788ca953a6130f2b8d1d1a23">pid</a> = <a class="code" href="../../d3/d3a/jobs_8h.html#ad40327c746e8ef715109d9b9257eb991">NO_PID</a>;</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;  ps-&gt;<a class="code" href="../../d3/d3a/jobs_8h.html#a6848a528a59f93911847b61d0b329ee5">bucket_next</a> = ps-&gt;<a class="code" href="../../d3/d3a/jobs_8h.html#a5b7cfb7d4d5f30b11eaa92db21ec71a0">bucket_prev</a> = <a class="code" href="../../d3/d3a/jobs_8h.html#aa0ca45454a6e8f383c4d1e490dcb6bb3">NO_PIDSTAT</a>;</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00161">pidstat::bucket_next</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00162">pidstat::bucket_prev</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00198">NO_PID</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00177">NO_PIDSTAT</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00164">pidstat::pid</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00812">pshash_getbucket()</a>, and <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00169">bgpids::storage</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l00892">bgp_delete()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l00802">bgp_getindex()</a>.</p>

</div>
</div>
<a id="a7e0bb0533cedbd5496331c5aae1e1d60"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e0bb0533cedbd5496331c5aae1e1d60">&#9670;&nbsp;</a></span>pshash_getbucket()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d3/d3a/jobs_8h.html#a677d6488545fa3193e7cb54647b4ae5c">ps_index_t</a>* pshash_getbucket </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a>&#160;</td>
          <td class="paramname"><em>pid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00812">812</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;{</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> hash;       <span class="comment">/* XXX - u_bits32_t */</span></div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160; </div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;  hash = <a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a> * 0x9e370001UL;</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;  <span class="keywordflow">return</span> (&amp;<a class="code" href="../../df/d8e/jobs_8c.html#ad64c488ea31ee4a9aba985c9336bb0fa">pidstat_table</a>[hash % <a class="code" href="../../df/d8e/jobs_8c.html#aa52b3fc7fe43cf6aba78123f474f050a">PIDSTAT_TABLE_SZ</a>]);</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d0/d43/mconf_8c_source.html#l00450">pid</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00177">pidstat_table</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l00108">PIDSTAT_TABLE_SZ</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l00822">bgp_add()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00892">bgp_delete()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00945">bgp_search()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l00866">pshash_delindex()</a>.</p>

</div>
</div>
<a id="af88686bf38197f4c2a43031f5ddbbec8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af88686bf38197f4c2a43031f5ddbbec8">&#9670;&nbsp;</a></span>raw_job_exit_status()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d9/dab/posixwait_8h.html#ad83fd8df8943a816e70cd8a3a31df5c3">WAIT</a> raw_job_exit_status </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>job</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l02835">2835</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;{</div>
<div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;  <span class="keyword">register</span> <a class="code" href="../../d3/d3a/jobs_8h.html#d8/d20/structprocess">PROCESS</a> *<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>;</div>
<div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;  <span class="keywordtype">int</span> fail;</div>
<div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;  <a class="code" href="../../d7/d23/unionwait_8h.html#de/d61/unionwait">WAIT</a> ret;</div>
<div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160; </div>
<div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>]-&gt;<a class="code" href="../../db/d66/dumpkmap_8c.html#abb0829cce9dd20a40ae0d86890ae85c6">flags</a> &amp; <a class="code" href="../../d3/d3a/jobs_8h.html#ae4b20447946321b09a36e22e696ba9dd">J_PIPEFAIL</a>)</div>
<div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;    {</div>
<div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;      fail = 0;</div>
<div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;      <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> = <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>]-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#a7e5648df5ec2f0d459900325c2cc5816">pipe</a>;</div>
<div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;      <span class="keywordflow">do</span></div>
<div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;    {</div>
<div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d9/dab/posixwait_8h.html#a369bfd939bb8dd38f7f8813cc7aa3fdb">WSTATUS</a> (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;status) != <a class="code" href="../../df/d03/shell_8h.html#a24d155899d8cc037505383c1016dbd65">EXECUTION_SUCCESS</a>)</div>
<div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;        fail = <a class="code" href="../../d9/dab/posixwait_8h.html#a369bfd939bb8dd38f7f8813cc7aa3fdb">WSTATUS</a>(<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;status);</div>
<div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;      <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> = <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;next;</div>
<div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;    }</div>
<div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;      <span class="keywordflow">while</span> (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> != <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>]-&gt;<a class="code" href="../../d6/d90/hush_8c.html#d8/d53/structpipe">pipe</a>);</div>
<div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;      <a class="code" href="../../d9/dab/posixwait_8h.html#a369bfd939bb8dd38f7f8813cc7aa3fdb">WSTATUS</a> (ret) = fail;</div>
<div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;      <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;    }</div>
<div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160; </div>
<div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> = <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>]-&gt;<a class="code" href="../../d6/d90/hush_8c.html#d8/d53/structpipe">pipe</a>; <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;next != <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>]-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#a7e5648df5ec2f0d459900325c2cc5816">pipe</a>; <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> = <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;next)</div>
<div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;    ;</div>
<div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;  <span class="keywordflow">return</span> (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;status);</div>
<div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;}</div>
<div class="ttc" id="ajobs_8h_html_ae4b20447946321b09a36e22e696ba9dd"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#ae4b20447946321b09a36e22e696ba9dd">J_PIPEFAIL</a></div><div class="ttdeci">#define J_PIPEFAIL</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00111">jobs.h:111</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d03/shell_8h_source.html#l00053">EXECUTION_SUCCESS</a>, <a class="el" href="../../db/d66/dumpkmap_8c.html#abb0829cce9dd20a40ae0d86890ae85c6">flags</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00111">J_PIPEFAIL</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00183">jobs</a>, <a class="el" href="../../d8/d64/glob__loop_8c_source.html#l00031">p</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00122">job::pipe</a>, and <a class="el" href="../../d9/dab/posixwait_8h_source.html#l00039">WSTATUS</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l02873">job_exit_signal()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02866">job_exit_status()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l04235">notify_of_job_status()</a>.</p>

</div>
</div>
<a id="a062169660044519b9a33a27f35cf6a85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a062169660044519b9a33a27f35cf6a85">&#9670;&nbsp;</a></span>realloc_jobs_list()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void realloc_jobs_list </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l01290">1290</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;{</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;  <a class="code" href="../../d8/d90/sigset__t_8h.html#a9140a5882f847f67b8155c759ac6aa05">sigset_t</a> set, oset;</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;  <span class="keywordtype">int</span> nsize, <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>, <a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a>, ncur, nprev;</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;  <a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">JOB</a> **nlist;</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160; </div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;  ncur = nprev = <a class="code" href="../../d3/d3a/jobs_8h.html#a6eba094b1ac1bc00e5883edd166bd944">NO_JOB</a>;</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;  nsize = ((<a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a3cd30b59b6ea29dc4d58020e6004d718">j_njobs</a> + <a class="code" href="../../df/d8e/jobs_8c.html#a47e7841cbc97ed0297e01ff639346405">JOB_SLOTS</a> - 1) / <a class="code" href="../../df/d8e/jobs_8c.html#a47e7841cbc97ed0297e01ff639346405">JOB_SLOTS</a>);</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;  nsize *= <a class="code" href="../../df/d8e/jobs_8c.html#a47e7841cbc97ed0297e01ff639346405">JOB_SLOTS</a>;</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;  <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> = <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a3cd30b59b6ea29dc4d58020e6004d718">j_njobs</a> % <a class="code" href="../../df/d8e/jobs_8c.html#a47e7841cbc97ed0297e01ff639346405">JOB_SLOTS</a>;</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> == 0 || <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> &gt; (<a class="code" href="../../df/d8e/jobs_8c.html#a47e7841cbc97ed0297e01ff639346405">JOB_SLOTS</a> &gt;&gt; 1))</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;    nsize += <a class="code" href="../../df/d8e/jobs_8c.html#a47e7841cbc97ed0297e01ff639346405">JOB_SLOTS</a>;</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160; </div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;  <a class="code" href="../../de/d62/sig_8h.html#a37d156f6ab7c2ade277f9a274314d258">BLOCK_CHILD</a> (set, oset);</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;  nlist = (<a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ad107b5818741c0309ebdb7af7318309e">j_jobslots</a> == nsize) ? <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a> : (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">JOB</a> **) <a class="code" href="../../db/d0a/tre_8h.html#a6af5faec3f9662b20ffc9903f923dec0">xmalloc</a> (nsize * <span class="keyword">sizeof</span> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">JOB</a> *));</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160; </div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a9eba978ad89cdb8068837ea21189d4c9">c_reaped</a> = <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a5c5a5b94e26c657b8caef74571c311ec">j_ndead</a> = 0;</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> = <a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a> = 0; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> &lt; <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ad107b5818741c0309ebdb7af7318309e">j_jobslots</a>; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>++)</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>])</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;      {</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> == <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ab72b09f6f206832a608cd245d513cca5">j_current</a>)</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;      ncur = <a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a>;</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> == <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a10c9a2fa68d7fed880e9f9c5f2b4d7f8">j_previous</a>)</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;      nprev = <a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a>;</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;    nlist[<a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a>++] = <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>];</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>]-&gt;<a class="code" href="../../d6/d23/wi__stuff_8c.html#a102a30241e29b7ae7a452418431f728d">state</a> == <a class="code" href="../../d3/d3a/jobs_8h.html#a27f134c9d8392fc50ee339c518707f57acc7e60ddf9078b1521d1adb70bd16f8b">JDEAD</a>)</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;      {</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;        <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a5c5a5b94e26c657b8caef74571c311ec">j_ndead</a>++;</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;        <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a9eba978ad89cdb8068837ea21189d4c9">c_reaped</a> += <a class="code" href="../../df/d8e/jobs_8c.html#ac3e9a0b379bd8615de3876b2e6b6754d">processes_in_job</a> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>);</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;      }</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;      }</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160; </div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;<span class="preprocessor">#if 0</span></div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;  itrace (<span class="stringliteral">&quot;realloc_jobs_list: resize jobs list from %d to %d&quot;</span>, <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ad107b5818741c0309ebdb7af7318309e">j_jobslots</a>, nsize);</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;  itrace (<span class="stringliteral">&quot;realloc_jobs_list: j_lastj changed from %d to %d&quot;</span>, <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ac29ea4e478fa590943c6f7ae902f3a46">j_lastj</a>, (<a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a> &gt; 0) ? <a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a> - 1 : 0);</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;  itrace (<span class="stringliteral">&quot;realloc_jobs_list: j_njobs changed from %d to %d&quot;</span>, <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a3cd30b59b6ea29dc4d58020e6004d718">j_njobs</a>, <a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a>);</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;  itrace (<span class="stringliteral">&quot;realloc_jobs_list: js.j_ndead %d js.c_reaped %d&quot;</span>, <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a5c5a5b94e26c657b8caef74571c311ec">j_ndead</a>, <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a9eba978ad89cdb8068837ea21189d4c9">c_reaped</a>);</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160; </div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a41979e2d342c40d347381152156fc26d">j_firstj</a> = 0;</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ac29ea4e478fa590943c6f7ae902f3a46">j_lastj</a> = (<a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a> &gt; 0) ? <a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a> - 1 : 0;</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a3cd30b59b6ea29dc4d58020e6004d718">j_njobs</a> = <a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a>;</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ad107b5818741c0309ebdb7af7318309e">j_jobslots</a> = nsize;</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160; </div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;  <span class="comment">/* Zero out remaining slots in new jobs list */</span></div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;  <span class="keywordflow">for</span> ( ; <a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a> &lt; nsize; <a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a>++)</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;    nlist[<a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a>] = (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">JOB</a> *)<a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160; </div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a> != nlist)</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;    {</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;      <a class="code" href="../../d5/db0/dynlink_8c.html#a2c6efa7679f8cd9f61af96e105017560">free</a> (<a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>);</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a> = nlist;</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;    }</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160; </div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;  <span class="keywordflow">if</span> (ncur != <a class="code" href="../../d3/d3a/jobs_8h.html#a6eba094b1ac1bc00e5883edd166bd944">NO_JOB</a>)</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ab72b09f6f206832a608cd245d513cca5">j_current</a> = ncur;</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;  <span class="keywordflow">if</span> (nprev != <a class="code" href="../../d3/d3a/jobs_8h.html#a6eba094b1ac1bc00e5883edd166bd944">NO_JOB</a>)</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a10c9a2fa68d7fed880e9f9c5f2b4d7f8">j_previous</a> = nprev;</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160; </div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;  <span class="comment">/* Need to reset these */</span></div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ab72b09f6f206832a608cd245d513cca5">j_current</a> == <a class="code" href="../../d3/d3a/jobs_8h.html#a6eba094b1ac1bc00e5883edd166bd944">NO_JOB</a> || <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a10c9a2fa68d7fed880e9f9c5f2b4d7f8">j_previous</a> == <a class="code" href="../../d3/d3a/jobs_8h.html#a6eba094b1ac1bc00e5883edd166bd944">NO_JOB</a> || <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ab72b09f6f206832a608cd245d513cca5">j_current</a> &gt; <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ac29ea4e478fa590943c6f7ae902f3a46">j_lastj</a> || <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a10c9a2fa68d7fed880e9f9c5f2b4d7f8">j_previous</a> &gt; <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ac29ea4e478fa590943c6f7ae902f3a46">j_lastj</a>)</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#a8461670b988ab55fb068f3546e2dbceb">reset_current</a> ();</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160; </div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;<span class="preprocessor">#if 0</span></div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;  itrace (<span class="stringliteral">&quot;realloc_jobs_list: reset js.j_current (%d) and js.j_previous (%d)&quot;</span>, <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ab72b09f6f206832a608cd245d513cca5">j_current</a>, <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a10c9a2fa68d7fed880e9f9c5f2b4d7f8">j_previous</a>);</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160; </div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;  <a class="code" href="../../de/d62/sig_8h.html#aa9262558d91ca8060065606f36167783">UNBLOCK_CHILD</a> (oset);</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;}</div>
<div class="ttc" id="ajobs_8c_html_a47e7841cbc97ed0297e01ff639346405"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a47e7841cbc97ed0297e01ff639346405">JOB_SLOTS</a></div><div class="ttdeci">#define JOB_SLOTS</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l00163">jobs.c:163</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../de/d62/sig_8h_source.html#l00100">BLOCK_CHILD</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00138">jobstats::c_reaped</a>, <a class="el" href="../../d5/db0/dynlink_8c_source.html#l00036">free</a>, <a class="el" href="../../dd/d71/gettextP_8h_source.html#l00074">i</a>, <a class="el" href="../../dc/da2/musl_2src_2prng_2random_8c_source.html#l00024">j</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00150">jobstats::j_current</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00146">jobstats::j_firstj</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00144">jobstats::j_jobslots</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00145">jobstats::j_lastj</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00148">jobstats::j_ndead</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00147">jobstats::j_njobs</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00151">jobstats::j_previous</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00094">JDEAD</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00163">JOB_SLOTS</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00183">jobs</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00175">js</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00193">NO_JOB</a>, <a class="el" href="../../d9/d14/general_8h_source.html#l00053">NULL</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01246">processes_in_job()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l03482">reset_current()</a>, <a class="el" href="../../d6/d23/wi__stuff_8c_source.html#l00309">state</a>, <a class="el" href="../../de/d62/sig_8h_source.html#l00101">UNBLOCK_CHILD</a>, and <a class="el" href="../../db/d0a/tre_8h_source.html#l00227">xmalloc</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l01367">compact_jobs_list()</a>.</p>

</div>
</div>
<a id="a8113aecd5926c83f5bec94aaded2476a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8113aecd5926c83f5bec94aaded2476a">&#9670;&nbsp;</a></span>reap_dead_jobs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void reap_dead_jobs </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l03367">3367</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;{</div>
<div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#a17ec09b97c22e3e745e6fe463418e203">mark_dead_jobs_as_notified</a> (0);</div>
<div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#a47c393729bc38de011d2422746de634c">cleanup_dead_jobs</a> ();</div>
<div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;}</div>
<div class="ttc" id="ajobs_8c_html_a17ec09b97c22e3e745e6fe463418e203"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a17ec09b97c22e3e745e6fe463418e203">mark_dead_jobs_as_notified</a></div><div class="ttdeci">static void mark_dead_jobs_as_notified(int force)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l04827">jobs.c:4827</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d8e/jobs_8c_source.html#l01210">cleanup_dead_jobs()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l04827">mark_dead_jobs_as_notified()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l01367">compact_jobs_list()</a>.</p>

</div>
</div>
<a id="a8461670b988ab55fb068f3546e2dbceb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8461670b988ab55fb068f3546e2dbceb">&#9670;&nbsp;</a></span>reset_current()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void reset_current </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l03482">3482</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03483"></a><span class="lineno"> 3483</span>&#160;{</div>
<div class="line"><a name="l03484"></a><span class="lineno"> 3484</span>&#160;  <span class="keywordtype">int</span> candidate;</div>
<div class="line"><a name="l03485"></a><span class="lineno"> 3485</span>&#160; </div>
<div class="line"><a name="l03486"></a><span class="lineno"> 3486</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ad107b5818741c0309ebdb7af7318309e">j_jobslots</a> &amp;&amp; <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ab72b09f6f206832a608cd245d513cca5">j_current</a> != <a class="code" href="../../d3/d3a/jobs_8h.html#a6eba094b1ac1bc00e5883edd166bd944">NO_JOB</a> &amp;&amp; <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ab72b09f6f206832a608cd245d513cca5">j_current</a>] &amp;&amp; <a class="code" href="../../d3/d3a/jobs_8h.html#adc39613d1152c030190012a614856c69">STOPPED</a> (<a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ab72b09f6f206832a608cd245d513cca5">j_current</a>))</div>
<div class="line"><a name="l03487"></a><span class="lineno"> 3487</span>&#160;    candidate = <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ab72b09f6f206832a608cd245d513cca5">j_current</a>;</div>
<div class="line"><a name="l03488"></a><span class="lineno"> 3488</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l03489"></a><span class="lineno"> 3489</span>&#160;    {</div>
<div class="line"><a name="l03490"></a><span class="lineno"> 3490</span>&#160;      candidate = <a class="code" href="../../d3/d3a/jobs_8h.html#a6eba094b1ac1bc00e5883edd166bd944">NO_JOB</a>;</div>
<div class="line"><a name="l03491"></a><span class="lineno"> 3491</span>&#160; </div>
<div class="line"><a name="l03492"></a><span class="lineno"> 3492</span>&#160;      <span class="comment">/* First choice: the previous job. */</span></div>
<div class="line"><a name="l03493"></a><span class="lineno"> 3493</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a10c9a2fa68d7fed880e9f9c5f2b4d7f8">j_previous</a> != <a class="code" href="../../d3/d3a/jobs_8h.html#a6eba094b1ac1bc00e5883edd166bd944">NO_JOB</a> &amp;&amp; <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a10c9a2fa68d7fed880e9f9c5f2b4d7f8">j_previous</a>] &amp;&amp; <a class="code" href="../../d3/d3a/jobs_8h.html#adc39613d1152c030190012a614856c69">STOPPED</a> (<a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a10c9a2fa68d7fed880e9f9c5f2b4d7f8">j_previous</a>))</div>
<div class="line"><a name="l03494"></a><span class="lineno"> 3494</span>&#160;    candidate = <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a10c9a2fa68d7fed880e9f9c5f2b4d7f8">j_previous</a>;</div>
<div class="line"><a name="l03495"></a><span class="lineno"> 3495</span>&#160; </div>
<div class="line"><a name="l03496"></a><span class="lineno"> 3496</span>&#160;      <span class="comment">/* Second choice: the most recently stopped job. */</span></div>
<div class="line"><a name="l03497"></a><span class="lineno"> 3497</span>&#160;      <span class="keywordflow">if</span> (candidate == <a class="code" href="../../d3/d3a/jobs_8h.html#a6eba094b1ac1bc00e5883edd166bd944">NO_JOB</a>)</div>
<div class="line"><a name="l03498"></a><span class="lineno"> 3498</span>&#160;    candidate = <a class="code" href="../../df/d8e/jobs_8c.html#a65da6d0fa85ebbb91282a70c186172ee">job_last_stopped</a> (<a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ad107b5818741c0309ebdb7af7318309e">j_jobslots</a>);</div>
<div class="line"><a name="l03499"></a><span class="lineno"> 3499</span>&#160; </div>
<div class="line"><a name="l03500"></a><span class="lineno"> 3500</span>&#160;      <span class="comment">/* Third choice: the newest running job. */</span></div>
<div class="line"><a name="l03501"></a><span class="lineno"> 3501</span>&#160;      <span class="keywordflow">if</span> (candidate == <a class="code" href="../../d3/d3a/jobs_8h.html#a6eba094b1ac1bc00e5883edd166bd944">NO_JOB</a>)</div>
<div class="line"><a name="l03502"></a><span class="lineno"> 3502</span>&#160;    candidate = <a class="code" href="../../df/d8e/jobs_8c.html#a16770b5754c59e8942a2a4e577d3489b">job_last_running</a> (<a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ad107b5818741c0309ebdb7af7318309e">j_jobslots</a>);</div>
<div class="line"><a name="l03503"></a><span class="lineno"> 3503</span>&#160;    }</div>
<div class="line"><a name="l03504"></a><span class="lineno"> 3504</span>&#160; </div>
<div class="line"><a name="l03505"></a><span class="lineno"> 3505</span>&#160;  <span class="comment">/* If we found a job to use, then use it.  Otherwise, there</span></div>
<div class="line"><a name="l03506"></a><span class="lineno"> 3506</span>&#160;<span class="comment">     are no jobs period. */</span></div>
<div class="line"><a name="l03507"></a><span class="lineno"> 3507</span>&#160;  <span class="keywordflow">if</span> (candidate != <a class="code" href="../../d3/d3a/jobs_8h.html#a6eba094b1ac1bc00e5883edd166bd944">NO_JOB</a>)</div>
<div class="line"><a name="l03508"></a><span class="lineno"> 3508</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#a418c0d4ef10f2149706710f16d250882">set_current_job</a> (candidate);</div>
<div class="line"><a name="l03509"></a><span class="lineno"> 3509</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l03510"></a><span class="lineno"> 3510</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ab72b09f6f206832a608cd245d513cca5">j_current</a> = <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a10c9a2fa68d7fed880e9f9c5f2b4d7f8">j_previous</a> = <a class="code" href="../../d3/d3a/jobs_8h.html#a6eba094b1ac1bc00e5883edd166bd944">NO_JOB</a>;</div>
<div class="line"><a name="l03511"></a><span class="lineno"> 3511</span>&#160;}</div>
<div class="ttc" id="ajobs_8c_html_a16770b5754c59e8942a2a4e577d3489b"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a16770b5754c59e8942a2a4e577d3489b">job_last_running</a></div><div class="ttdeci">static int job_last_running(int job)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l03412">jobs.c:3412</a></div></div>
<div class="ttc" id="ajobs_8c_html_a418c0d4ef10f2149706710f16d250882"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a418c0d4ef10f2149706710f16d250882">set_current_job</a></div><div class="ttdeci">static void set_current_job(int job)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l03421">jobs.c:3421</a></div></div>
<div class="ttc" id="ajobs_8c_html_a65da6d0fa85ebbb91282a70c186172ee"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a65da6d0fa85ebbb91282a70c186172ee">job_last_stopped</a></div><div class="ttdeci">static int job_last_stopped(int job)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l03403">jobs.c:3403</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00150">jobstats::j_current</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00144">jobstats::j_jobslots</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00151">jobstats::j_previous</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l03412">job_last_running()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l03403">job_last_stopped()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00183">jobs</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00175">js</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00193">NO_JOB</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l03421">set_current_job()</a>, and <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00098">STOPPED</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l01386">delete_job()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01290">realloc_jobs_list()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l03541">start_job()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00553">stop_pipeline()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l03764">waitchld()</a>.</p>

</div>
</div>
<a id="a037783844d1b44bdec0f7eef30dd6ede"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a037783844d1b44bdec0f7eef30dd6ede">&#9670;&nbsp;</a></span>reset_job_indices()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void reset_job_indices </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l01170">1170</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;{</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../d4/dcd/nmeter_8c.html#a3a539e6d7382aa2150a8ce8f33b91deb">old</a>;</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160; </div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a41979e2d342c40d347381152156fc26d">j_firstj</a>] == 0)</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;    {</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;      <a class="code" href="../../d4/dcd/nmeter_8c.html#a3a539e6d7382aa2150a8ce8f33b91deb">old</a> = <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a41979e2d342c40d347381152156fc26d">j_firstj</a>++;</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d4/dcd/nmeter_8c.html#a3a539e6d7382aa2150a8ce8f33b91deb">old</a> &gt;= <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ad107b5818741c0309ebdb7af7318309e">j_jobslots</a>)</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;    <a class="code" href="../../d4/dcd/nmeter_8c.html#a3a539e6d7382aa2150a8ce8f33b91deb">old</a> = <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ad107b5818741c0309ebdb7af7318309e">j_jobslots</a> - 1;</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;      <span class="keywordflow">while</span> (<a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a41979e2d342c40d347381152156fc26d">j_firstj</a> != <a class="code" href="../../d4/dcd/nmeter_8c.html#a3a539e6d7382aa2150a8ce8f33b91deb">old</a>)</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;    {</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a41979e2d342c40d347381152156fc26d">j_firstj</a> &gt;= <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ad107b5818741c0309ebdb7af7318309e">j_jobslots</a>)</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;        <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a41979e2d342c40d347381152156fc26d">j_firstj</a> = 0;</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a41979e2d342c40d347381152156fc26d">j_firstj</a>] || <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a41979e2d342c40d347381152156fc26d">j_firstj</a> == <a class="code" href="../../d4/dcd/nmeter_8c.html#a3a539e6d7382aa2150a8ce8f33b91deb">old</a>)  <span class="comment">/* needed if old == 0 */</span></div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a41979e2d342c40d347381152156fc26d">j_firstj</a>++;</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;    }</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a41979e2d342c40d347381152156fc26d">j_firstj</a> == <a class="code" href="../../d4/dcd/nmeter_8c.html#a3a539e6d7382aa2150a8ce8f33b91deb">old</a>)</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a41979e2d342c40d347381152156fc26d">j_firstj</a> = <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ac29ea4e478fa590943c6f7ae902f3a46">j_lastj</a> = <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a3cd30b59b6ea29dc4d58020e6004d718">j_njobs</a> = 0;</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;    }</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ac29ea4e478fa590943c6f7ae902f3a46">j_lastj</a>] == 0)</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;    {</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;      <a class="code" href="../../d4/dcd/nmeter_8c.html#a3a539e6d7382aa2150a8ce8f33b91deb">old</a> = <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ac29ea4e478fa590943c6f7ae902f3a46">j_lastj</a>--;</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d4/dcd/nmeter_8c.html#a3a539e6d7382aa2150a8ce8f33b91deb">old</a> &lt; 0)</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;    <a class="code" href="../../d4/dcd/nmeter_8c.html#a3a539e6d7382aa2150a8ce8f33b91deb">old</a> = 0;</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;      <span class="keywordflow">while</span> (<a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ac29ea4e478fa590943c6f7ae902f3a46">j_lastj</a> != <a class="code" href="../../d4/dcd/nmeter_8c.html#a3a539e6d7382aa2150a8ce8f33b91deb">old</a>)</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;    {</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ac29ea4e478fa590943c6f7ae902f3a46">j_lastj</a> &lt; 0)</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;        <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ac29ea4e478fa590943c6f7ae902f3a46">j_lastj</a> = <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ad107b5818741c0309ebdb7af7318309e">j_jobslots</a> - 1;</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ac29ea4e478fa590943c6f7ae902f3a46">j_lastj</a>] || <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ac29ea4e478fa590943c6f7ae902f3a46">j_lastj</a> == <a class="code" href="../../d4/dcd/nmeter_8c.html#a3a539e6d7382aa2150a8ce8f33b91deb">old</a>)    <span class="comment">/* needed if old == js.j_jobslots */</span></div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ac29ea4e478fa590943c6f7ae902f3a46">j_lastj</a>--;</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;    }</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ac29ea4e478fa590943c6f7ae902f3a46">j_lastj</a> == <a class="code" href="../../d4/dcd/nmeter_8c.html#a3a539e6d7382aa2150a8ce8f33b91deb">old</a>)</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a41979e2d342c40d347381152156fc26d">j_firstj</a> = <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ac29ea4e478fa590943c6f7ae902f3a46">j_lastj</a> = <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a3cd30b59b6ea29dc4d58020e6004d718">j_njobs</a> = 0;</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;    }</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;}</div>
<div class="ttc" id="anmeter_8c_html_a3a539e6d7382aa2150a8ce8f33b91deb"><div class="ttname"><a href="../../d4/dcd/nmeter_8c.html#a3a539e6d7382aa2150a8ce8f33b91deb">old</a></div><div class="ttdeci">ullong old[CPU_FIELDCNT]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dcd/nmeter_8c_source.html#l00351">nmeter.c:351</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00146">jobstats::j_firstj</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00144">jobstats::j_jobslots</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00145">jobstats::j_lastj</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00147">jobstats::j_njobs</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00183">jobs</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00175">js</a>, and <a class="el" href="../../d4/dcd/nmeter_8c_source.html#l00351">old</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l01386">delete_job()</a>.</p>

</div>
</div>
<a id="a2d4f082d7fb9a88caf928c7ee833156a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d4f082d7fb9a88caf928c7ee833156a">&#9670;&nbsp;</a></span>restart_job_control()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void restart_job_control </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l05027">5027</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l05028"></a><span class="lineno"> 5028</span>&#160;{</div>
<div class="line"><a name="l05029"></a><span class="lineno"> 5029</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#ae43d281c5f91cb3d7ad00fc46971b4da">shell_tty</a> != -1)</div>
<div class="line"><a name="l05030"></a><span class="lineno"> 5030</span>&#160;    <a class="code" href="../../de/d97/musl_2include_2unistd_8h.html#ae152484c890a24e4d9b4980e7b965be0">close</a> (<a class="code" href="../../df/d8e/jobs_8c.html#ae43d281c5f91cb3d7ad00fc46971b4da">shell_tty</a>);</div>
<div class="line"><a name="l05031"></a><span class="lineno"> 5031</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#aa9447ba6eda1088457e76cc37da06b7b">initialize_job_control</a> (0);</div>
<div class="line"><a name="l05032"></a><span class="lineno"> 5032</span>&#160;}</div>
<div class="ttc" id="ajobs_8c_html_aa9447ba6eda1088457e76cc37da06b7b"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#aa9447ba6eda1088457e76cc37da06b7b">initialize_job_control</a></div><div class="ttdeci">int initialize_job_control(int force)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l04370">jobs.c:4370</a></div></div>
<div class="ttc" id="amusl_2include_2unistd_8h_html_ae152484c890a24e4d9b4980e7b965be0"><div class="ttname"><a href="../../de/d97/musl_2include_2unistd_8h.html#ae152484c890a24e4d9b4980e7b965be0">close</a></div><div class="ttdeci">int close(int)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d22/close_8c_source.html#l00013">close.c:13</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d9/d22/close_8c_source.html#l00013">close()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04370">initialize_job_control()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l00191">shell_tty</a>.</p>

</div>
</div>
<a id="a19307882067f71f056dc87339565cce1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19307882067f71f056dc87339565cce1">&#9670;&nbsp;</a></span>restore_pipeline()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d3a/jobs_8h.html#aefa2ee881236dafa12ac2427bb9c5088">PROCESS</a>* restore_pipeline </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>discard</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00497">497</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;{</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  <a class="code" href="../../d3/d3a/jobs_8h.html#d8/d20/structprocess">PROCESS</a> *old_pipeline;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  <a class="code" href="../../d8/d90/sigset__t_8h.html#a9140a5882f847f67b8155c759ac6aa05">sigset_t</a> set, oset;</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;  <span class="keyword">struct </span><a class="code" href="../../d3/d3a/jobs_8h.html#d8/df7/structpipeline__saver">pipeline_saver</a> *saver;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160; </div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;  <a class="code" href="../../de/d62/sig_8h.html#a37d156f6ab7c2ade277f9a274314d258">BLOCK_CHILD</a> (set, oset);</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;  old_pipeline = <a class="code" href="../../df/d8e/jobs_8c.html#a5efe88eb6aefb268d1259a51812164b2">the_pipeline</a>;</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#a5efe88eb6aefb268d1259a51812164b2">the_pipeline</a> = <a class="code" href="../../df/d8e/jobs_8c.html#a60e714219004a4142832cea6d34ebc97">saved_pipeline</a>-&gt;<a class="code" href="../../d3/d3a/jobs_8h.html#a150b4d503a5673894709f96b053de8b2">pipeline</a>;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;  saver = <a class="code" href="../../df/d8e/jobs_8c.html#a60e714219004a4142832cea6d34ebc97">saved_pipeline</a>;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#a60e714219004a4142832cea6d34ebc97">saved_pipeline</a> = <a class="code" href="../../df/d8e/jobs_8c.html#a60e714219004a4142832cea6d34ebc97">saved_pipeline</a>-&gt;<a class="code" href="../../d3/d3a/jobs_8h.html#a736199ba9d005768c1a764a5da6a69e6">next</a>;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;  <a class="code" href="../../d5/db0/dynlink_8c.html#a2c6efa7679f8cd9f61af96e105017560">free</a> (saver);</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#ab73b81916e1b9c693ec186cb41e9f4e5">already_making_children</a> = <a class="code" href="../../df/d8e/jobs_8c.html#a788ff02a9abd424b3160a4315e6cdbac">saved_already_making_children</a>;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;  <a class="code" href="../../de/d62/sig_8h.html#aa9262558d91ca8060065606f36167783">UNBLOCK_CHILD</a> (oset);</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160; </div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;  <span class="keywordflow">if</span> (discard &amp;&amp; old_pipeline)</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    {</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#aefd8badf09efc12aee9dfa1cfaaef024">discard_pipeline</a> (old_pipeline);</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;      <span class="keywordflow">return</span> ((<a class="code" href="../../d3/d3a/jobs_8h.html#d8/d20/structprocess">PROCESS</a> *)<a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    }</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;  <span class="keywordflow">return</span> old_pipeline;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;}</div>
<div class="ttc" id="ajobs_8c_html_a788ff02a9abd424b3160a4315e6cdbac"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a788ff02a9abd424b3160a4315e6cdbac">saved_already_making_children</a></div><div class="ttdeci">static int saved_already_making_children</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l00340">jobs.c:340</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d8e/jobs_8c_source.html#l00228">already_making_children</a>, <a class="el" href="../../de/d62/sig_8h_source.html#l00100">BLOCK_CHILD</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01463">discard_pipeline()</a>, <a class="el" href="../../d5/db0/dynlink_8c_source.html#l00036">free</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00075">pipeline_saver::next</a>, <a class="el" href="../../d9/d14/general_8h_source.html#l00053">NULL</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00074">pipeline_saver::pipeline</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00340">saved_already_making_children</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00339">saved_pipeline</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00219">the_pipeline</a>, and <a class="el" href="../../de/d62/sig_8h_source.html#l00101">UNBLOCK_CHILD</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d6f/trap_8c_source.html#l01048">_run_trap_internal()</a>, <a class="el" href="../../dc/d6f/trap_8c_source.html#l01183">run_debug_trap()</a>, and <a class="el" href="../../dc/d6f/trap_8c_source.html#l00297">run_pending_traps()</a>.</p>

</div>
</div>
<a id="abaf052f06c9c04a236219814419b7e83"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abaf052f06c9c04a236219814419b7e83">&#9670;&nbsp;</a></span>restore_sigint_handler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void restore_sigint_handler </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l02736">2736</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;{</div>
<div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#ae15b67160f6705f527ba4c23e11e64d3">old_sigint_handler</a> != <a class="code" href="../../df/d8e/jobs_8c.html#a4236e83af520841a9f9b18cab6952df1">INVALID_SIGNAL_HANDLER</a>)</div>
<div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;    {</div>
<div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;      <a class="code" href="../../de/d62/sig_8h.html#aefdb4e4f01f2aa4133f26dbabcc8358b">set_signal_handler</a> (<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a487309e3e9e0527535644115204a639a">SIGINT</a>, <a class="code" href="../../df/d8e/jobs_8c.html#ae15b67160f6705f527ba4c23e11e64d3">old_sigint_handler</a>);</div>
<div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#ae15b67160f6705f527ba4c23e11e64d3">old_sigint_handler</a> = <a class="code" href="../../df/d8e/jobs_8c.html#a4236e83af520841a9f9b18cab6952df1">INVALID_SIGNAL_HANDLER</a>;</div>
<div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#af3275b044b48a9ba5da272b925ba6d9e">waiting_for_child</a> = 0;</div>
<div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;    }</div>
<div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;}</div>
<div class="ttc" id="ajobs_8c_html_a4236e83af520841a9f9b18cab6952df1"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a4236e83af520841a9f9b18cab6952df1">INVALID_SIGNAL_HANDLER</a></div><div class="ttdeci">#define INVALID_SIGNAL_HANDLER</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l02718">jobs.c:2718</a></div></div>
<div class="ttc" id="ajobs_8c_html_ae15b67160f6705f527ba4c23e11e64d3"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#ae15b67160f6705f527ba4c23e11e64d3">old_sigint_handler</a></div><div class="ttdeci">static SigHandler * old_sigint_handler</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l02719">jobs.c:2719</a></div></div>
<div class="ttc" id="ajobs_8c_html_af3275b044b48a9ba5da272b925ba6d9e"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#af3275b044b48a9ba5da272b925ba6d9e">waiting_for_child</a></div><div class="ttdeci">int waiting_for_child</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l02724">jobs.c:2724</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d8e/jobs_8c_source.html#l02718">INVALID_SIGNAL_HANDLER</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02719">old_sigint_handler</a>, <a class="el" href="../../de/d62/sig_8h_source.html#l00043">set_signal_handler</a>, <a class="el" href="../../df/dff/libc_2include_2signal_8h_source.html#l00013">SIGINT</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l02724">waiting_for_child</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l03980">set_job_status_and_cleanup()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02899">wait_for()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02728">wait_sigint_cleanup()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l02750">wait_sigint_handler()</a>.</p>

</div>
</div>
<a id="abdbc0219d409378ba6c6732891257457"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abdbc0219d409378ba6c6732891257457">&#9670;&nbsp;</a></span>run_sigchld_trap()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void run_sigchld_trap </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nchild</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l04185">4185</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l04187"></a><span class="lineno"> 4187</span>&#160;{</div>
<div class="line"><a name="l04188"></a><span class="lineno"> 4188</span>&#160;  <span class="keywordtype">char</span> *trap_command;</div>
<div class="line"><a name="l04189"></a><span class="lineno"> 4189</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>;</div>
<div class="line"><a name="l04190"></a><span class="lineno"> 4190</span>&#160; </div>
<div class="line"><a name="l04191"></a><span class="lineno"> 4191</span>&#160;  <span class="comment">/* Turn off the trap list during the call to parse_and_execute ()</span></div>
<div class="line"><a name="l04192"></a><span class="lineno"> 4192</span>&#160;<span class="comment">     to avoid potentially infinite recursive calls.  Preserve the</span></div>
<div class="line"><a name="l04193"></a><span class="lineno"> 4193</span>&#160;<span class="comment">     values of last_command_exit_value, last_made_pid, and the_pipeline</span></div>
<div class="line"><a name="l04194"></a><span class="lineno"> 4194</span>&#160;<span class="comment">     around the execution of the trap commands. */</span></div>
<div class="line"><a name="l04195"></a><span class="lineno"> 4195</span>&#160;  trap_command = <a class="code" href="../../dd/d76/savestring_8c.html#a7b14e5f700c119910f89f61c06f30b1a">savestring</a> (<a class="code" href="../../dc/d6f/trap_8c.html#a7cf60d977315aec850dad2b180456c68">trap_list</a>[<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a0e63521a64cc8bc2b91d36a87d32c9f8">SIGCHLD</a>]);</div>
<div class="line"><a name="l04196"></a><span class="lineno"> 4196</span>&#160; </div>
<div class="line"><a name="l04197"></a><span class="lineno"> 4197</span>&#160;  <a class="code" href="../../d7/d7d/unwind__prot_8c.html#a0634c88afd6862533b1a4ea67dc6d0d8">begin_unwind_frame</a> (<span class="stringliteral">&quot;SIGCHLD trap&quot;</span>);</div>
<div class="line"><a name="l04198"></a><span class="lineno"> 4198</span>&#160;  <a class="code" href="../../d1/dca/unwind__prot_8h.html#ae70d75ddd15368bde55398b7897111c4">unwind_protect_int</a> (<a class="code" href="../../d6/ddd/push_8c.html#a6525695256aeef8ca4dfea2a19319c00">last_command_exit_value</a>);</div>
<div class="line"><a name="l04199"></a><span class="lineno"> 4199</span>&#160;  <a class="code" href="../../d1/dca/unwind__prot_8h.html#ae70d75ddd15368bde55398b7897111c4">unwind_protect_int</a> (<a class="code" href="../../de/d3d/execute__cmd_8c.html#a5719fe068e6db753bf1dbb3832cbac22">last_command_exit_signal</a>);</div>
<div class="line"><a name="l04200"></a><span class="lineno"> 4200</span>&#160;  <a class="code" href="../../d1/dca/unwind__prot_8h.html#a6e9a6757a3b50b57eb794efa368e176e">unwind_protect_var</a> (<a class="code" href="../../df/d8e/jobs_8c.html#a6014bc30456423f628a211bf8007fbe0">last_made_pid</a>);</div>
<div class="line"><a name="l04201"></a><span class="lineno"> 4201</span>&#160;  <a class="code" href="../../d1/dca/unwind__prot_8h.html#ae70d75ddd15368bde55398b7897111c4">unwind_protect_int</a> (<a class="code" href="../../df/d8e/jobs_8c.html#a57e47a8425e68a1907ac493cd673ca41">jobs_list_frozen</a>);</div>
<div class="line"><a name="l04202"></a><span class="lineno"> 4202</span>&#160;  <a class="code" href="../../d1/dca/unwind__prot_8h.html#a327f2034e54d38bf7e62a7ac9cad6c9c">unwind_protect_pointer</a> (<a class="code" href="../../df/d8e/jobs_8c.html#a5efe88eb6aefb268d1259a51812164b2">the_pipeline</a>);</div>
<div class="line"><a name="l04203"></a><span class="lineno"> 4203</span>&#160;  <a class="code" href="../../d1/dca/unwind__prot_8h.html#a327f2034e54d38bf7e62a7ac9cad6c9c">unwind_protect_pointer</a> (<a class="code" href="../../df/d8e/jobs_8c.html#a8635881c32ee192e781422e8234f603f">subst_assign_varlist</a>);</div>
<div class="line"><a name="l04204"></a><span class="lineno"> 4204</span>&#160;  <a class="code" href="../../d1/dca/unwind__prot_8h.html#a327f2034e54d38bf7e62a7ac9cad6c9c">unwind_protect_pointer</a> (<a class="code" href="../../de/da3/bash_2builtins_2common_8c.html#a90f34313402c8392a46af2a5d3147d89">this_shell_builtin</a>);</div>
<div class="line"><a name="l04205"></a><span class="lineno"> 4205</span>&#160;  <a class="code" href="../../d1/dca/unwind__prot_8h.html#a327f2034e54d38bf7e62a7ac9cad6c9c">unwind_protect_pointer</a> (<a class="code" href="../../d5/de8/variables_8c.html#a55b4378b40fe00a9a40c01ec2ead1e50">temporary_env</a>);</div>
<div class="line"><a name="l04206"></a><span class="lineno"> 4206</span>&#160; </div>
<div class="line"><a name="l04207"></a><span class="lineno"> 4207</span>&#160;  <span class="comment">/* We have to add the commands this way because they will be run</span></div>
<div class="line"><a name="l04208"></a><span class="lineno"> 4208</span>&#160;<span class="comment">     in reverse order of adding.  We don&#39;t want maybe_set_sigchld_trap ()</span></div>
<div class="line"><a name="l04209"></a><span class="lineno"> 4209</span>&#160;<span class="comment">     to reference freed memory. */</span></div>
<div class="line"><a name="l04210"></a><span class="lineno"> 4210</span>&#160;  <a class="code" href="../../d7/d7d/unwind__prot_8c.html#a4d4c2515b10c89841ca0ad9fb9577694">add_unwind_protect</a> (<a class="code" href="../../db/d0a/tre_8h.html#a2c3897f7c46ca54a2e0dd7b24a40c7cb">xfree</a>, trap_command);</div>
<div class="line"><a name="l04211"></a><span class="lineno"> 4211</span>&#160;  <a class="code" href="../../d7/d7d/unwind__prot_8c.html#a4d4c2515b10c89841ca0ad9fb9577694">add_unwind_protect</a> (maybe_set_sigchld_trap, trap_command);</div>
<div class="line"><a name="l04212"></a><span class="lineno"> 4212</span>&#160; </div>
<div class="line"><a name="l04213"></a><span class="lineno"> 4213</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#a8635881c32ee192e781422e8234f603f">subst_assign_varlist</a> = (<a class="code" href="../../d0/d09/command_8h.html#df/d75/structword__list">WORD_LIST</a> *)<a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l04214"></a><span class="lineno"> 4214</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#a5efe88eb6aefb268d1259a51812164b2">the_pipeline</a> = (<a class="code" href="../../d3/d3a/jobs_8h.html#d8/d20/structprocess">PROCESS</a> *)<a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l04215"></a><span class="lineno"> 4215</span>&#160;  <a class="code" href="../../d5/de8/variables_8c.html#a55b4378b40fe00a9a40c01ec2ead1e50">temporary_env</a> = 0;    <span class="comment">/* traps should not run with temporary env */</span></div>
<div class="line"><a name="l04216"></a><span class="lineno"> 4216</span>&#160; </div>
<div class="line"><a name="l04217"></a><span class="lineno"> 4217</span>&#160;  <a class="code" href="../../dc/d6f/trap_8c.html#a9b6de60b5394cd9997c12ffa402bdb76">running_trap</a> = <a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a0e63521a64cc8bc2b91d36a87d32c9f8">SIGCHLD</a> + 1;</div>
<div class="line"><a name="l04218"></a><span class="lineno"> 4218</span>&#160; </div>
<div class="line"><a name="l04219"></a><span class="lineno"> 4219</span>&#160;  set_impossible_sigchld_trap ();</div>
<div class="line"><a name="l04220"></a><span class="lineno"> 4220</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#a57e47a8425e68a1907ac493cd673ca41">jobs_list_frozen</a> = 1;</div>
<div class="line"><a name="l04221"></a><span class="lineno"> 4221</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> = 0; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> &lt; nchild; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>++)</div>
<div class="line"><a name="l04222"></a><span class="lineno"> 4222</span>&#160;    {</div>
<div class="line"><a name="l04223"></a><span class="lineno"> 4223</span>&#160;      <a class="code" href="../../df/da3/evalstring_8c.html#a5b555eb11971d91328f9708796b72677">parse_and_execute</a> (<a class="code" href="../../dd/d76/savestring_8c.html#a7b14e5f700c119910f89f61c06f30b1a">savestring</a> (trap_command), <span class="stringliteral">&quot;trap&quot;</span>, <a class="code" href="../../df/d28/bash_2builtins_2common_8h.html#acdbf6655b5294eb1c78093a21f99826f">SEVAL_NOHIST</a>|<a class="code" href="../../df/d28/bash_2builtins_2common_8h.html#a567cff7522f56bf38b55e24b687015c8">SEVAL_RESETLINE</a>|<a class="code" href="../../df/d28/bash_2builtins_2common_8h.html#afb5ce82c4c3fe636e92105d6f58f9298">SEVAL_NOOPTIMIZE</a>);</div>
<div class="line"><a name="l04224"></a><span class="lineno"> 4224</span>&#160;    }</div>
<div class="line"><a name="l04225"></a><span class="lineno"> 4225</span>&#160; </div>
<div class="line"><a name="l04226"></a><span class="lineno"> 4226</span>&#160;  <a class="code" href="../../d7/d7d/unwind__prot_8c.html#a951deebec0eab9fc9b0252296b96084a">run_unwind_frame</a> (<span class="stringliteral">&quot;SIGCHLD trap&quot;</span>);</div>
<div class="line"><a name="l04227"></a><span class="lineno"> 4227</span>&#160;  <a class="code" href="../../dc/d6f/trap_8c.html#a9b6de60b5394cd9997c12ffa402bdb76">running_trap</a> = 0;</div>
<div class="line"><a name="l04228"></a><span class="lineno"> 4228</span>&#160;}</div>
<div class="ttc" id="abash_2builtins_2common_8c_html_a90f34313402c8392a46af2a5d3147d89"><div class="ttname"><a href="../../de/da3/bash_2builtins_2common_8c.html#a90f34313402c8392a46af2a5d3147d89">this_shell_builtin</a></div><div class="ttdeci">sh_builtin_func_t * this_shell_builtin</div><div class="ttdef"><b>Definition:</b> <a href="../../de/da3/bash_2builtins_2common_8c_source.html#l00075">common.c:75</a></div></div>
<div class="ttc" id="abash_2builtins_2common_8h_html_a567cff7522f56bf38b55e24b687015c8"><div class="ttname"><a href="../../df/d28/bash_2builtins_2common_8h.html#a567cff7522f56bf38b55e24b687015c8">SEVAL_RESETLINE</a></div><div class="ttdeci">#define SEVAL_RESETLINE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d28/bash_2builtins_2common_8h_source.html#l00048">common.h:48</a></div></div>
<div class="ttc" id="abash_2builtins_2common_8h_html_acdbf6655b5294eb1c78093a21f99826f"><div class="ttname"><a href="../../df/d28/bash_2builtins_2common_8h.html#acdbf6655b5294eb1c78093a21f99826f">SEVAL_NOHIST</a></div><div class="ttdeci">#define SEVAL_NOHIST</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d28/bash_2builtins_2common_8h_source.html#l00046">common.h:46</a></div></div>
<div class="ttc" id="abash_2builtins_2common_8h_html_afb5ce82c4c3fe636e92105d6f58f9298"><div class="ttname"><a href="../../df/d28/bash_2builtins_2common_8h.html#afb5ce82c4c3fe636e92105d6f58f9298">SEVAL_NOOPTIMIZE</a></div><div class="ttdeci">#define SEVAL_NOOPTIMIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d28/bash_2builtins_2common_8h_source.html#l00054">common.h:54</a></div></div>
<div class="ttc" id="acommand_8h_html_df/d75/structword__list"><div class="ttname"><a href="../../d0/d09/command_8h.html#df/d75/structword__list">word_list</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d09/command_8h_source.html#l00137">command.h:137</a></div></div>
<div class="ttc" id="aevalstring_8c_html_a5b555eb11971d91328f9708796b72677"><div class="ttname"><a href="../../df/da3/evalstring_8c.html#a5b555eb11971d91328f9708796b72677">parse_and_execute</a></div><div class="ttdeci">int parse_and_execute(char *string, const char *from_file, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/da3/evalstring_8c_source.html#l00297">evalstring.c:297</a></div></div>
<div class="ttc" id="aexecute__cmd_8c_html_a5719fe068e6db753bf1dbb3832cbac22"><div class="ttname"><a href="../../de/d3d/execute__cmd_8c.html#a5719fe068e6db753bf1dbb3832cbac22">last_command_exit_signal</a></div><div class="ttdeci">int last_command_exit_signal</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3d/execute__cmd_8c_source.html#l00221">execute_cmd.c:221</a></div></div>
<div class="ttc" id="ajobs_8c_html_a8635881c32ee192e781422e8234f603f"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a8635881c32ee192e781422e8234f603f">subst_assign_varlist</a></div><div class="ttdeci">WORD_LIST * subst_assign_varlist</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d93/subst_8c_source.html#l00177">subst.c:177</a></div></div>
<div class="ttc" id="apush_8c_html_a6525695256aeef8ca4dfea2a19319c00"><div class="ttname"><a href="../../d6/ddd/push_8c.html#a6525695256aeef8ca4dfea2a19319c00">last_command_exit_value</a></div><div class="ttdeci">int last_command_exit_value</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3d/execute__cmd_8c_source.html#l00217">execute_cmd.c:217</a></div></div>
<div class="ttc" id="atrap_8c_html_a7cf60d977315aec850dad2b180456c68"><div class="ttname"><a href="../../dc/d6f/trap_8c.html#a7cf60d977315aec850dad2b180456c68">trap_list</a></div><div class="ttdeci">char * trap_list[BASH_NSIG]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d6f/trap_8c_source.html#l00105">trap.c:105</a></div></div>
<div class="ttc" id="atrap_8c_html_a9b6de60b5394cd9997c12ffa402bdb76"><div class="ttname"><a href="../../dc/d6f/trap_8c.html#a9b6de60b5394cd9997c12ffa402bdb76">running_trap</a></div><div class="ttdeci">int running_trap</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d6f/trap_8c_source.html#l00114">trap.c:114</a></div></div>
<div class="ttc" id="atre_8h_html_a2c3897f7c46ca54a2e0dd7b24a40c7cb"><div class="ttname"><a href="../../db/d0a/tre_8h.html#a2c3897f7c46ca54a2e0dd7b24a40c7cb">xfree</a></div><div class="ttdeci">#define xfree</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0a/tre_8h_source.html#l00229">tre.h:229</a></div></div>
<div class="ttc" id="aunwind__prot_8c_html_a0634c88afd6862533b1a4ea67dc6d0d8"><div class="ttname"><a href="../../d7/d7d/unwind__prot_8c.html#a0634c88afd6862533b1a4ea67dc6d0d8">begin_unwind_frame</a></div><div class="ttdeci">void begin_unwind_frame(char *tag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d7d/unwind__prot_8c_source.html#l00123">unwind_prot.c:123</a></div></div>
<div class="ttc" id="aunwind__prot_8c_html_a4d4c2515b10c89841ca0ad9fb9577694"><div class="ttname"><a href="../../d7/d7d/unwind__prot_8c.html#a4d4c2515b10c89841ca0ad9fb9577694">add_unwind_protect</a></div><div class="ttdeci">void add_unwind_protect(Function *cleanup, char *arg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d7d/unwind__prot_8c_source.html#l00149">unwind_prot.c:149</a></div></div>
<div class="ttc" id="aunwind__prot_8c_html_a951deebec0eab9fc9b0252296b96084a"><div class="ttname"><a href="../../d7/d7d/unwind__prot_8c.html#a951deebec0eab9fc9b0252296b96084a">run_unwind_frame</a></div><div class="ttdeci">void run_unwind_frame(char *tag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d7d/unwind__prot_8c_source.html#l00140">unwind_prot.c:140</a></div></div>
<div class="ttc" id="aunwind__prot_8h_html_a327f2034e54d38bf7e62a7ac9cad6c9c"><div class="ttname"><a href="../../d1/dca/unwind__prot_8h.html#a327f2034e54d38bf7e62a7ac9cad6c9c">unwind_protect_pointer</a></div><div class="ttdeci">#define unwind_protect_pointer</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dca/unwind__prot_8h_source.html#l00049">unwind_prot.h:49</a></div></div>
<div class="ttc" id="aunwind__prot_8h_html_a6e9a6757a3b50b57eb794efa368e176e"><div class="ttname"><a href="../../d1/dca/unwind__prot_8h.html#a6e9a6757a3b50b57eb794efa368e176e">unwind_protect_var</a></div><div class="ttdeci">#define unwind_protect_var(X)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dca/unwind__prot_8h_source.html#l00042">unwind_prot.h:42</a></div></div>
<div class="ttc" id="aunwind__prot_8h_html_ae70d75ddd15368bde55398b7897111c4"><div class="ttname"><a href="../../d1/dca/unwind__prot_8h.html#ae70d75ddd15368bde55398b7897111c4">unwind_protect_int</a></div><div class="ttdeci">#define unwind_protect_int</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dca/unwind__prot_8h_source.html#l00046">unwind_prot.h:46</a></div></div>
<div class="ttc" id="avariables_8c_html_a55b4378b40fe00a9a40c01ec2ead1e50"><div class="ttname"><a href="../../d5/de8/variables_8c.html#a55b4378b40fe00a9a40c01ec2ead1e50">temporary_env</a></div><div class="ttdeci">HASH_TABLE * temporary_env</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/de8/variables_8c_source.html#l00151">variables.c:151</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/d7d/unwind__prot_8c_source.html#l00149">add_unwind_protect()</a>, <a class="el" href="../../d7/d7d/unwind__prot_8c_source.html#l00123">begin_unwind_frame()</a>, <a class="el" href="../../dd/d71/gettextP_8h_source.html#l00074">i</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00346">jobs_list_frozen</a>, <a class="el" href="../../de/d3d/execute__cmd_8c_source.html#l00221">last_command_exit_signal</a>, <a class="el" href="../../de/d3d/execute__cmd_8c_source.html#l00217">last_command_exit_value</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00213">last_made_pid</a>, <a class="el" href="../../d9/d14/general_8h_source.html#l00053">NULL</a>, <a class="el" href="../../df/da3/evalstring_8c_source.html#l00297">parse_and_execute()</a>, <a class="el" href="../../d7/d7d/unwind__prot_8c_source.html#l00140">run_unwind_frame()</a>, <a class="el" href="../../dc/d6f/trap_8c_source.html#l00114">running_trap</a>, <a class="el" href="../../dd/d76/savestring_8c_source.html#l00033">savestring()</a>, <a class="el" href="../../df/d28/bash_2builtins_2common_8h_source.html#l00046">SEVAL_NOHIST</a>, <a class="el" href="../../df/d28/bash_2builtins_2common_8h_source.html#l00054">SEVAL_NOOPTIMIZE</a>, <a class="el" href="../../df/d28/bash_2builtins_2common_8h_source.html#l00048">SEVAL_RESETLINE</a>, <a class="el" href="../../df/dff/libc_2include_2signal_8h_source.html#l00058">SIGCHLD</a>, <a class="el" href="../../d1/d93/subst_8c_source.html#l00177">subst_assign_varlist</a>, <a class="el" href="../../d5/de8/variables_8c_source.html#l00151">temporary_env</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00219">the_pipeline</a>, <a class="el" href="../../de/da3/bash_2builtins_2common_8c_source.html#l00075">this_shell_builtin</a>, <a class="el" href="../../dc/d6f/trap_8c_source.html#l00105">trap_list</a>, <a class="el" href="../../d1/dca/unwind__prot_8h_source.html#l00046">unwind_protect_int</a>, <a class="el" href="../../d1/dca/unwind__prot_8h_source.html#l00049">unwind_protect_pointer</a>, <a class="el" href="../../d1/dca/unwind__prot_8h_source.html#l00042">unwind_protect_var</a>, and <a class="el" href="../../db/d0a/tre_8h_source.html#l00229">xfree</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d6f/trap_8c_source.html#l00297">run_pending_traps()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l03764">waitchld()</a>.</p>

</div>
</div>
<a id="a1181af998ba25683752c7cd4bdf91091"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1181af998ba25683752c7cd4bdf91091">&#9670;&nbsp;</a></span>save_pipeline()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void save_pipeline </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>clear</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00479">479</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;{</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;  <a class="code" href="../../d8/d90/sigset__t_8h.html#a9140a5882f847f67b8155c759ac6aa05">sigset_t</a> set, oset;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;  <span class="keyword">struct </span><a class="code" href="../../d3/d3a/jobs_8h.html#d8/df7/structpipeline__saver">pipeline_saver</a> *saver;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160; </div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;  <a class="code" href="../../de/d62/sig_8h.html#a37d156f6ab7c2ade277f9a274314d258">BLOCK_CHILD</a> (set, oset);</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;  saver = <a class="code" href="../../df/d8e/jobs_8c.html#ae8fe3d7879405c3910a34e0b8dda55bb">alloc_pipeline_saver</a> ();</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;  saver-&gt;<a class="code" href="../../d3/d3a/jobs_8h.html#a150b4d503a5673894709f96b053de8b2">pipeline</a> = <a class="code" href="../../df/d8e/jobs_8c.html#a5efe88eb6aefb268d1259a51812164b2">the_pipeline</a>;</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;  saver-&gt;<a class="code" href="../../d3/d3a/jobs_8h.html#a736199ba9d005768c1a764a5da6a69e6">next</a> = <a class="code" href="../../df/d8e/jobs_8c.html#a60e714219004a4142832cea6d34ebc97">saved_pipeline</a>;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#a60e714219004a4142832cea6d34ebc97">saved_pipeline</a> = saver;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;  <span class="keywordflow">if</span> (clear)</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#a5efe88eb6aefb268d1259a51812164b2">the_pipeline</a> = (<a class="code" href="../../d3/d3a/jobs_8h.html#d8/d20/structprocess">PROCESS</a> *)<a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#a788ff02a9abd424b3160a4315e6cdbac">saved_already_making_children</a> = <a class="code" href="../../df/d8e/jobs_8c.html#ab73b81916e1b9c693ec186cb41e9f4e5">already_making_children</a>;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;  <a class="code" href="../../de/d62/sig_8h.html#aa9262558d91ca8060065606f36167783">UNBLOCK_CHILD</a> (oset);</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;}</div>
<div class="ttc" id="ajobs_8c_html_ae8fe3d7879405c3910a34e0b8dda55bb"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#ae8fe3d7879405c3910a34e0b8dda55bb">alloc_pipeline_saver</a></div><div class="ttdeci">static struct pipeline_saver * alloc_pipeline_saver()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l00468">jobs.c:468</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d8e/jobs_8c_source.html#l00468">alloc_pipeline_saver()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00228">already_making_children</a>, <a class="el" href="../../de/d62/sig_8h_source.html#l00100">BLOCK_CHILD</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00075">pipeline_saver::next</a>, <a class="el" href="../../d9/d14/general_8h_source.html#l00053">NULL</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00074">pipeline_saver::pipeline</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00340">saved_already_making_children</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00339">saved_pipeline</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00219">the_pipeline</a>, and <a class="el" href="../../de/d62/sig_8h_source.html#l00101">UNBLOCK_CHILD</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d6f/trap_8c_source.html#l01048">_run_trap_internal()</a>, <a class="el" href="../../dc/d6f/trap_8c_source.html#l01183">run_debug_trap()</a>, and <a class="el" href="../../dc/d6f/trap_8c_source.html#l00297">run_pending_traps()</a>.</p>

</div>
</div>
<a id="a0f7487af98f3470c275daee9e343d1e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f7487af98f3470c275daee9e343d1e8">&#9670;&nbsp;</a></span>save_proc_status()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void save_proc_status </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a>&#160;</td>
          <td class="paramname"><em>pid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00979">979</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;{</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;  <a class="code" href="../../d8/d90/sigset__t_8h.html#a9140a5882f847f67b8155c759ac6aa05">sigset_t</a> set, oset;</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160; </div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;  <a class="code" href="../../de/d62/sig_8h.html#a37d156f6ab7c2ade277f9a274314d258">BLOCK_CHILD</a> (set, oset);</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#ac44d197b4771154fac5c0eefca1052f6">bgp_add</a> (<a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, <a class="code" href="../../d7/d5b/mail_8c.html#a6943d6e2e83995c648644bc0a4d36f53">status</a>);</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;  <a class="code" href="../../de/d62/sig_8h.html#aa9262558d91ca8060065606f36167783">UNBLOCK_CHILD</a> (oset);  </div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d8e/jobs_8c_source.html#l00822">bgp_add()</a>, <a class="el" href="../../de/d62/sig_8h_source.html#l00100">BLOCK_CHILD</a>, <a class="el" href="../../d0/d43/mconf_8c_source.html#l00450">pid</a>, <a class="el" href="../../d7/d5b/mail_8c.html#a6943d6e2e83995c648644bc0a4d36f53">status</a>, and <a class="el" href="../../de/d62/sig_8h_source.html#l00101">UNBLOCK_CHILD</a>.</p>

</div>
</div>
<a id="a418c0d4ef10f2149706710f16d250882"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a418c0d4ef10f2149706710f16d250882">&#9670;&nbsp;</a></span>set_current_job()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void set_current_job </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>job</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l03421">3421</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03423"></a><span class="lineno"> 3423</span>&#160;{</div>
<div class="line"><a name="l03424"></a><span class="lineno"> 3424</span>&#160;  <span class="keywordtype">int</span> candidate;</div>
<div class="line"><a name="l03425"></a><span class="lineno"> 3425</span>&#160; </div>
<div class="line"><a name="l03426"></a><span class="lineno"> 3426</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ab72b09f6f206832a608cd245d513cca5">j_current</a> != <a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>)</div>
<div class="line"><a name="l03427"></a><span class="lineno"> 3427</span>&#160;    {</div>
<div class="line"><a name="l03428"></a><span class="lineno"> 3428</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a10c9a2fa68d7fed880e9f9c5f2b4d7f8">j_previous</a> = <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ab72b09f6f206832a608cd245d513cca5">j_current</a>;</div>
<div class="line"><a name="l03429"></a><span class="lineno"> 3429</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ab72b09f6f206832a608cd245d513cca5">j_current</a> = <a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>;</div>
<div class="line"><a name="l03430"></a><span class="lineno"> 3430</span>&#160;    }</div>
<div class="line"><a name="l03431"></a><span class="lineno"> 3431</span>&#160; </div>
<div class="line"><a name="l03432"></a><span class="lineno"> 3432</span>&#160;  <span class="comment">/* First choice for previous job is the old current job. */</span></div>
<div class="line"><a name="l03433"></a><span class="lineno"> 3433</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a10c9a2fa68d7fed880e9f9c5f2b4d7f8">j_previous</a> != <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ab72b09f6f206832a608cd245d513cca5">j_current</a> &amp;&amp;</div>
<div class="line"><a name="l03434"></a><span class="lineno"> 3434</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a10c9a2fa68d7fed880e9f9c5f2b4d7f8">j_previous</a> != <a class="code" href="../../d3/d3a/jobs_8h.html#a6eba094b1ac1bc00e5883edd166bd944">NO_JOB</a> &amp;&amp;</div>
<div class="line"><a name="l03435"></a><span class="lineno"> 3435</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a10c9a2fa68d7fed880e9f9c5f2b4d7f8">j_previous</a>] &amp;&amp;</div>
<div class="line"><a name="l03436"></a><span class="lineno"> 3436</span>&#160;      <a class="code" href="../../d3/d3a/jobs_8h.html#adc39613d1152c030190012a614856c69">STOPPED</a> (<a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a10c9a2fa68d7fed880e9f9c5f2b4d7f8">j_previous</a>))</div>
<div class="line"><a name="l03437"></a><span class="lineno"> 3437</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03438"></a><span class="lineno"> 3438</span>&#160; </div>
<div class="line"><a name="l03439"></a><span class="lineno"> 3439</span>&#160;  <span class="comment">/* Second choice:  Newest stopped job that is older than</span></div>
<div class="line"><a name="l03440"></a><span class="lineno"> 3440</span>&#160;<span class="comment">     the current job. */</span></div>
<div class="line"><a name="l03441"></a><span class="lineno"> 3441</span>&#160;  candidate = <a class="code" href="../../d3/d3a/jobs_8h.html#a6eba094b1ac1bc00e5883edd166bd944">NO_JOB</a>;</div>
<div class="line"><a name="l03442"></a><span class="lineno"> 3442</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d3/d3a/jobs_8h.html#adc39613d1152c030190012a614856c69">STOPPED</a> (<a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ab72b09f6f206832a608cd245d513cca5">j_current</a>))</div>
<div class="line"><a name="l03443"></a><span class="lineno"> 3443</span>&#160;    {</div>
<div class="line"><a name="l03444"></a><span class="lineno"> 3444</span>&#160;      candidate = <a class="code" href="../../df/d8e/jobs_8c.html#a65da6d0fa85ebbb91282a70c186172ee">job_last_stopped</a> (<a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ab72b09f6f206832a608cd245d513cca5">j_current</a>);</div>
<div class="line"><a name="l03445"></a><span class="lineno"> 3445</span>&#160; </div>
<div class="line"><a name="l03446"></a><span class="lineno"> 3446</span>&#160;      <span class="keywordflow">if</span> (candidate != <a class="code" href="../../d3/d3a/jobs_8h.html#a6eba094b1ac1bc00e5883edd166bd944">NO_JOB</a>)</div>
<div class="line"><a name="l03447"></a><span class="lineno"> 3447</span>&#160;    {</div>
<div class="line"><a name="l03448"></a><span class="lineno"> 3448</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a10c9a2fa68d7fed880e9f9c5f2b4d7f8">j_previous</a> = candidate;</div>
<div class="line"><a name="l03449"></a><span class="lineno"> 3449</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03450"></a><span class="lineno"> 3450</span>&#160;    }</div>
<div class="line"><a name="l03451"></a><span class="lineno"> 3451</span>&#160;    }</div>
<div class="line"><a name="l03452"></a><span class="lineno"> 3452</span>&#160; </div>
<div class="line"><a name="l03453"></a><span class="lineno"> 3453</span>&#160;  <span class="comment">/* If we get here, there is either only one stopped job, in which case it is</span></div>
<div class="line"><a name="l03454"></a><span class="lineno"> 3454</span>&#160;<span class="comment">     the current job and the previous job should be set to the newest running</span></div>
<div class="line"><a name="l03455"></a><span class="lineno"> 3455</span>&#160;<span class="comment">     job, or there are only running jobs and the previous job should be set to</span></div>
<div class="line"><a name="l03456"></a><span class="lineno"> 3456</span>&#160;<span class="comment">     the newest running job older than the current job.  We decide on which</span></div>
<div class="line"><a name="l03457"></a><span class="lineno"> 3457</span>&#160;<span class="comment">     alternative to use based on whether or not JOBSTATE(js.j_current) is</span></div>
<div class="line"><a name="l03458"></a><span class="lineno"> 3458</span>&#160;<span class="comment">     JSTOPPED. */</span></div>
<div class="line"><a name="l03459"></a><span class="lineno"> 3459</span>&#160; </div>
<div class="line"><a name="l03460"></a><span class="lineno"> 3460</span>&#160;  candidate = <a class="code" href="../../d3/d3a/jobs_8h.html#abb162c99100e0466ef43cf32884f29e8">RUNNING</a> (<a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ab72b09f6f206832a608cd245d513cca5">j_current</a>) ? <a class="code" href="../../df/d8e/jobs_8c.html#a16770b5754c59e8942a2a4e577d3489b">job_last_running</a> (<a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ab72b09f6f206832a608cd245d513cca5">j_current</a>)</div>
<div class="line"><a name="l03461"></a><span class="lineno"> 3461</span>&#160;                    : <a class="code" href="../../df/d8e/jobs_8c.html#a16770b5754c59e8942a2a4e577d3489b">job_last_running</a> (<a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.j_jobslots);</div>
<div class="line"><a name="l03462"></a><span class="lineno"> 3462</span>&#160; </div>
<div class="line"><a name="l03463"></a><span class="lineno"> 3463</span>&#160;  <span class="keywordflow">if</span> (candidate != <a class="code" href="../../d3/d3a/jobs_8h.html#a6eba094b1ac1bc00e5883edd166bd944">NO_JOB</a>)</div>
<div class="line"><a name="l03464"></a><span class="lineno"> 3464</span>&#160;    {</div>
<div class="line"><a name="l03465"></a><span class="lineno"> 3465</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a10c9a2fa68d7fed880e9f9c5f2b4d7f8">j_previous</a> = candidate;</div>
<div class="line"><a name="l03466"></a><span class="lineno"> 3466</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03467"></a><span class="lineno"> 3467</span>&#160;    }</div>
<div class="line"><a name="l03468"></a><span class="lineno"> 3468</span>&#160; </div>
<div class="line"><a name="l03469"></a><span class="lineno"> 3469</span>&#160;  <span class="comment">/* There is only a single job, and it is both `+&#39; and `-&#39;. */</span></div>
<div class="line"><a name="l03470"></a><span class="lineno"> 3470</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a10c9a2fa68d7fed880e9f9c5f2b4d7f8">j_previous</a> = <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ab72b09f6f206832a608cd245d513cca5">j_current</a>;</div>
<div class="line"><a name="l03471"></a><span class="lineno"> 3471</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00150">jobstats::j_current</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00144">jobstats::j_jobslots</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00151">jobstats::j_previous</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l03412">job_last_running()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l03403">job_last_stopped()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00183">jobs</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00175">js</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00193">NO_JOB</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00099">RUNNING</a>, and <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00098">STOPPED</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l03482">reset_current()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l03541">start_job()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l03764">waitchld()</a>.</p>

</div>
</div>
<a id="a95d21d57cdf01784017ec41245a7ccf2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95d21d57cdf01784017ec41245a7ccf2">&#9670;&nbsp;</a></span>set_job_control()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int set_job_control </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>arg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l04958">4958</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l04960"></a><span class="lineno"> 4960</span>&#160;{</div>
<div class="line"><a name="l04961"></a><span class="lineno"> 4961</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../d4/dcd/nmeter_8c.html#a3a539e6d7382aa2150a8ce8f33b91deb">old</a>;</div>
<div class="line"><a name="l04962"></a><span class="lineno"> 4962</span>&#160; </div>
<div class="line"><a name="l04963"></a><span class="lineno"> 4963</span>&#160;  <a class="code" href="../../d4/dcd/nmeter_8c.html#a3a539e6d7382aa2150a8ce8f33b91deb">old</a> = <a class="code" href="../../df/d8e/jobs_8c.html#a3002cbcd4a652dec2c5cef5ff3da446f">job_control</a>;</div>
<div class="line"><a name="l04964"></a><span class="lineno"> 4964</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#a3002cbcd4a652dec2c5cef5ff3da446f">job_control</a> = <a class="code" href="../../d1/d40/vfwprintf_8c.html#d9/ddc/unionarg">arg</a>;</div>
<div class="line"><a name="l04965"></a><span class="lineno"> 4965</span>&#160; </div>
<div class="line"><a name="l04966"></a><span class="lineno"> 4966</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#aeb36f80c8f1667339f6f23318ff29b50">terminal_pgrp</a> == <a class="code" href="../../d3/d3a/jobs_8h.html#ad40327c746e8ef715109d9b9257eb991">NO_PID</a> &amp;&amp; <a class="code" href="../../df/d8e/jobs_8c.html#ae43d281c5f91cb3d7ad00fc46971b4da">shell_tty</a> &gt;= 0)</div>
<div class="line"><a name="l04967"></a><span class="lineno"> 4967</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#aeb36f80c8f1667339f6f23318ff29b50">terminal_pgrp</a> = <a class="code" href="../../df/d8e/jobs_8c.html#a30c3edb2b02399d64b5e8eaaf7fe40e6">tcgetpgrp</a> (<a class="code" href="../../df/d8e/jobs_8c.html#ae43d281c5f91cb3d7ad00fc46971b4da">shell_tty</a>);</div>
<div class="line"><a name="l04968"></a><span class="lineno"> 4968</span>&#160; </div>
<div class="line"><a name="l04969"></a><span class="lineno"> 4969</span>&#160;  <span class="comment">/* If we&#39;re turning on job control we&#39;re going to want to know the shell&#39;s</span></div>
<div class="line"><a name="l04970"></a><span class="lineno"> 4970</span>&#160;<span class="comment">     process group. */</span></div>
<div class="line"><a name="l04971"></a><span class="lineno"> 4971</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a3002cbcd4a652dec2c5cef5ff3da446f">job_control</a> != <a class="code" href="../../d4/dcd/nmeter_8c.html#a3a539e6d7382aa2150a8ce8f33b91deb">old</a> &amp;&amp; <a class="code" href="../../df/d8e/jobs_8c.html#a3002cbcd4a652dec2c5cef5ff3da446f">job_control</a>)</div>
<div class="line"><a name="l04972"></a><span class="lineno"> 4972</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#a12352dc576f1c23274468beca1ccf916">shell_pgrp</a> = <a class="code" href="../../df/d8e/jobs_8c.html#a0a891da39663805f56b077cf8aab2d68">getpgid</a> (0);  </div>
<div class="line"><a name="l04973"></a><span class="lineno"> 4973</span>&#160; </div>
<div class="line"><a name="l04974"></a><span class="lineno"> 4974</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#ad2b44c9005c5a931c29ae6588e237636">running_in_background</a> = (<a class="code" href="../../df/d8e/jobs_8c.html#aeb36f80c8f1667339f6f23318ff29b50">terminal_pgrp</a> != <a class="code" href="../../df/d8e/jobs_8c.html#a12352dc576f1c23274468beca1ccf916">shell_pgrp</a>);</div>
<div class="line"><a name="l04975"></a><span class="lineno"> 4975</span>&#160; </div>
<div class="line"><a name="l04976"></a><span class="lineno"> 4976</span>&#160;<span class="preprocessor">#if 0</span></div>
<div class="line"><a name="l04977"></a><span class="lineno"> 4977</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d6/d4f/shell_8c.html#ae2c20c1668999fe88f089ad20436f425">interactive_shell</a> == 0 &amp;&amp; <a class="code" href="../../df/d8e/jobs_8c.html#ad2b44c9005c5a931c29ae6588e237636">running_in_background</a> == 0 &amp;&amp; <a class="code" href="../../df/d8e/jobs_8c.html#a3002cbcd4a652dec2c5cef5ff3da446f">job_control</a> != <a class="code" href="../../d4/dcd/nmeter_8c.html#a3a539e6d7382aa2150a8ce8f33b91deb">old</a>)</div>
<div class="line"><a name="l04978"></a><span class="lineno"> 4978</span>&#160;    {</div>
<div class="line"><a name="l04979"></a><span class="lineno"> 4979</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a3002cbcd4a652dec2c5cef5ff3da446f">job_control</a>)</div>
<div class="line"><a name="l04980"></a><span class="lineno"> 4980</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#ab3bf0c468c5caa52e82aa6a68f6a3099">initialize_job_signals</a> ();</div>
<div class="line"><a name="l04981"></a><span class="lineno"> 4981</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l04982"></a><span class="lineno"> 4982</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#a35131fce775aec129aca6c1ea1127f97">default_tty_job_signals</a> ();</div>
<div class="line"><a name="l04983"></a><span class="lineno"> 4983</span>&#160;    }</div>
<div class="line"><a name="l04984"></a><span class="lineno"> 4984</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l04985"></a><span class="lineno"> 4985</span>&#160; </div>
<div class="line"><a name="l04986"></a><span class="lineno"> 4986</span>&#160;  <span class="comment">/* If we&#39;re turning on job control, reset pipeline_pgrp so make_child will</span></div>
<div class="line"><a name="l04987"></a><span class="lineno"> 4987</span>&#160;<span class="comment">     put new child processes into the right pgrp */</span></div>
<div class="line"><a name="l04988"></a><span class="lineno"> 4988</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a3002cbcd4a652dec2c5cef5ff3da446f">job_control</a> != <a class="code" href="../../d4/dcd/nmeter_8c.html#a3a539e6d7382aa2150a8ce8f33b91deb">old</a> &amp;&amp; <a class="code" href="../../df/d8e/jobs_8c.html#a3002cbcd4a652dec2c5cef5ff3da446f">job_control</a>)</div>
<div class="line"><a name="l04989"></a><span class="lineno"> 4989</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#a4cf043826d84509527bdbcfbd5f68b68">pipeline_pgrp</a> = 0;</div>
<div class="line"><a name="l04990"></a><span class="lineno"> 4990</span>&#160; </div>
<div class="line"><a name="l04991"></a><span class="lineno"> 4991</span>&#160;  <span class="keywordflow">return</span> (<a class="code" href="../../d4/dcd/nmeter_8c.html#a3a539e6d7382aa2150a8ce8f33b91deb">old</a>);</div>
<div class="line"><a name="l04992"></a><span class="lineno"> 4992</span>&#160;}</div>
<div class="ttc" id="ajobs_8c_html_ab3bf0c468c5caa52e82aa6a68f6a3099"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#ab3bf0c468c5caa52e82aa6a68f6a3099">initialize_job_signals</a></div><div class="ttdeci">void initialize_job_signals()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l04590">jobs.c:4590</a></div></div>
<div class="ttc" id="avfwprintf_8c_html_d9/ddc/unionarg"><div class="ttname"><a href="../../d1/d40/vfwprintf_8c.html#d9/ddc/unionarg">arg</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d61/vfprintf_8c_source.html#l00102">vfprintf.c:103</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d8e/jobs_8c_source.html#l02370">default_tty_job_signals()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00142">getpgid</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04590">initialize_job_signals()</a>, <a class="el" href="../../d6/d4f/shell_8c_source.html#l00142">interactive_shell</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00222">job_control</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00198">NO_PID</a>, <a class="el" href="../../d4/dcd/nmeter_8c_source.html#l00351">old</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00203">pipeline_pgrp</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00225">running_in_background</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00194">shell_pgrp</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00191">shell_tty</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00358">tcgetpgrp()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l00197">terminal_pgrp</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d70/flags_8c_source.html#l00227">change_flag()</a>, <a class="el" href="../../d6/d4f/shell_8c_source.html#l01860">init_noninteractive()</a>, <a class="el" href="../../d6/d4f/shell_8c_source.html#l00370">main()</a>, <a class="el" href="../../d6/d4f/shell_8c_source.html#l01124">run_startup_files()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l04997">without_job_control()</a>.</p>

</div>
</div>
<a id="a61bf5bf35899dc2c1e91cd412de1876b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61bf5bf35899dc2c1e91cd412de1876b">&#9670;&nbsp;</a></span>set_job_running()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void set_job_running </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>job</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l03516">3516</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03518"></a><span class="lineno"> 3518</span>&#160;{</div>
<div class="line"><a name="l03519"></a><span class="lineno"> 3519</span>&#160;  <span class="keyword">register</span> <a class="code" href="../../d3/d3a/jobs_8h.html#d8/d20/structprocess">PROCESS</a> *<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>;</div>
<div class="line"><a name="l03520"></a><span class="lineno"> 3520</span>&#160; </div>
<div class="line"><a name="l03521"></a><span class="lineno"> 3521</span>&#160;  <span class="comment">/* Each member of the pipeline is now running. */</span></div>
<div class="line"><a name="l03522"></a><span class="lineno"> 3522</span>&#160;  <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> = <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>]-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#a7e5648df5ec2f0d459900325c2cc5816">pipe</a>;</div>
<div class="line"><a name="l03523"></a><span class="lineno"> 3523</span>&#160; </div>
<div class="line"><a name="l03524"></a><span class="lineno"> 3524</span>&#160;  <span class="keywordflow">do</span></div>
<div class="line"><a name="l03525"></a><span class="lineno"> 3525</span>&#160;    {</div>
<div class="line"><a name="l03526"></a><span class="lineno"> 3526</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d7/d23/unionwait_8h.html#ae2b610235f988f4f3109f02a2f395727">WIFSTOPPED</a> (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;status))</div>
<div class="line"><a name="l03527"></a><span class="lineno"> 3527</span>&#160;    <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;running = <a class="code" href="../../d3/d3a/jobs_8h.html#a228659160deea0a4abee765afda81df3">PS_RUNNING</a>;    <span class="comment">/* XXX - could be PS_STOPPED */</span></div>
<div class="line"><a name="l03528"></a><span class="lineno"> 3528</span>&#160;      <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> = <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;next;</div>
<div class="line"><a name="l03529"></a><span class="lineno"> 3529</span>&#160;    }</div>
<div class="line"><a name="l03530"></a><span class="lineno"> 3530</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> != <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>]-&gt;<a class="code" href="../../d6/d90/hush_8c.html#d8/d53/structpipe">pipe</a>);</div>
<div class="line"><a name="l03531"></a><span class="lineno"> 3531</span>&#160; </div>
<div class="line"><a name="l03532"></a><span class="lineno"> 3532</span>&#160;  <span class="comment">/* This means that the job is running. */</span></div>
<div class="line"><a name="l03533"></a><span class="lineno"> 3533</span>&#160;  <a class="code" href="../../d3/d3a/jobs_8h.html#a466620bfa4ee2d285544d9a67a8a337e">JOBSTATE</a> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>) = <a class="code" href="../../d3/d3a/jobs_8h.html#a27f134c9d8392fc50ee339c518707f57a1bf5a4892e9bb413f0dc598c6764541b">JRUNNING</a>;</div>
<div class="line"><a name="l03534"></a><span class="lineno"> 3534</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d8e/jobs_8c_source.html#l00183">jobs</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00095">JOBSTATE</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00094">JRUNNING</a>, <a class="el" href="../../d8/d64/glob__loop_8c_source.html#l00031">p</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00122">job::pipe</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00059">PS_RUNNING</a>, and <a class="el" href="../../d7/d23/unionwait_8h_source.html#l00089">WIFSTOPPED</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l03665">kill_pid()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l03541">start_job()</a>.</p>

</div>
</div>
<a id="a5b699391d568903c90bbce6a46a744fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b699391d568903c90bbce6a46a744fb">&#9670;&nbsp;</a></span>set_job_status_and_cleanup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int set_job_status_and_cleanup </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>job</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l03980">3980</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03982"></a><span class="lineno"> 3982</span>&#160;{</div>
<div class="line"><a name="l03983"></a><span class="lineno"> 3983</span>&#160;  <a class="code" href="../../d3/d3a/jobs_8h.html#d8/d20/structprocess">PROCESS</a> *<a class="code" href="../../d1/d0c/posix__spawn_8c.html#a90a7b20363e18ef6ec5f22741c81e375">child</a>;</div>
<div class="line"><a name="l03984"></a><span class="lineno"> 3984</span>&#160;  <span class="keywordtype">int</span> tstatus, job_state, any_stopped, any_tstped, call_set_current;</div>
<div class="line"><a name="l03985"></a><span class="lineno"> 3985</span>&#160;  <a class="code" href="../../dd/db7/bash_2lib_2readline_2signals_8c.html#a1f8d6bb6b9aaad1c21141fc327620e99">SigHandler</a> *temp_handler;</div>
<div class="line"><a name="l03986"></a><span class="lineno"> 3986</span>&#160; </div>
<div class="line"><a name="l03987"></a><span class="lineno"> 3987</span>&#160;  <a class="code" href="../../d3/d16/pstree_8c.html#d6/d07/structchild">child</a> = <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>]-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#a7e5648df5ec2f0d459900325c2cc5816">pipe</a>;</div>
<div class="line"><a name="l03988"></a><span class="lineno"> 3988</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>]-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#af96c169abb39b4b3f9ccce91cb4b17dc">flags</a> &amp;= ~<a class="code" href="../../d3/d3a/jobs_8h.html#ac67735d6cc995bbac83d5efe91a52125">J_NOTIFIED</a>;</div>
<div class="line"><a name="l03989"></a><span class="lineno"> 3989</span>&#160; </div>
<div class="line"><a name="l03990"></a><span class="lineno"> 3990</span>&#160;  call_set_current = 0;</div>
<div class="line"><a name="l03991"></a><span class="lineno"> 3991</span>&#160; </div>
<div class="line"><a name="l03992"></a><span class="lineno"> 3992</span>&#160;  <span class="comment">/*</span></div>
<div class="line"><a name="l03993"></a><span class="lineno"> 3993</span>&#160;<span class="comment">   * COMPUTE JOB STATUS</span></div>
<div class="line"><a name="l03994"></a><span class="lineno"> 3994</span>&#160;<span class="comment">   */</span></div>
<div class="line"><a name="l03995"></a><span class="lineno"> 3995</span>&#160; </div>
<div class="line"><a name="l03996"></a><span class="lineno"> 3996</span>&#160;  <span class="comment">/* If all children are not running, but any of them is  stopped, then</span></div>
<div class="line"><a name="l03997"></a><span class="lineno"> 3997</span>&#160;<span class="comment">     the job is stopped, not dead. */</span></div>
<div class="line"><a name="l03998"></a><span class="lineno"> 3998</span>&#160;  job_state = any_stopped = any_tstped = 0;</div>
<div class="line"><a name="l03999"></a><span class="lineno"> 3999</span>&#160;  <span class="keywordflow">do</span></div>
<div class="line"><a name="l04000"></a><span class="lineno"> 4000</span>&#160;    {</div>
<div class="line"><a name="l04001"></a><span class="lineno"> 4001</span>&#160;      job_state |= <a class="code" href="../../d3/d3a/jobs_8h.html#adcdd2eca21a30b7f30b69d21a592a657">PRUNNING</a> (<a class="code" href="../../d3/d16/pstree_8c.html#d6/d07/structchild">child</a>);</div>
<div class="line"><a name="l04002"></a><span class="lineno"> 4002</span>&#160;<span class="preprocessor">#if 0</span></div>
<div class="line"><a name="l04003"></a><span class="lineno"> 4003</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d3/d3a/jobs_8h.html#aa950db8c4a3fa33f105de7e9526696f6">PEXITED</a> (<a class="code" href="../../d3/d16/pstree_8c.html#d6/d07/structchild">child</a>) &amp;&amp; (<a class="code" href="../../d7/d23/unionwait_8h.html#ae2b610235f988f4f3109f02a2f395727">WIFSTOPPED</a> (<a class="code" href="../../d3/d16/pstree_8c.html#d6/d07/structchild">child</a>-&gt;status)))</div>
<div class="line"><a name="l04004"></a><span class="lineno"> 4004</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l04005"></a><span class="lineno"> 4005</span>&#160;      <span class="comment">/* Only checking for WIFSTOPPED now, not for PS_DONE */</span></div>
<div class="line"><a name="l04006"></a><span class="lineno"> 4006</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d3/d3a/jobs_8h.html#aa5b9f7ecd789405fb1d6c079865df027">PSTOPPED</a> (<a class="code" href="../../d3/d16/pstree_8c.html#d6/d07/structchild">child</a>))</div>
<div class="line"><a name="l04007"></a><span class="lineno"> 4007</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l04008"></a><span class="lineno"> 4008</span>&#160;    {</div>
<div class="line"><a name="l04009"></a><span class="lineno"> 4009</span>&#160;      any_stopped = 1;</div>
<div class="line"><a name="l04010"></a><span class="lineno"> 4010</span>&#160;      any_tstped |= <a class="code" href="../../df/d8e/jobs_8c.html#a3002cbcd4a652dec2c5cef5ff3da446f">job_control</a> &amp;&amp; (<a class="code" href="../../d7/d23/unionwait_8h.html#a2c6d84ce222454bb6387fc20d930f5b7">WSTOPSIG</a> (<a class="code" href="../../d3/d16/pstree_8c.html#d6/d07/structchild">child</a>-&gt;status) == <a class="code" href="../../df/dff/libc_2include_2signal_8h.html#abe65c086e01f0d286b7a785a7e3cdd1a">SIGTSTP</a>);</div>
<div class="line"><a name="l04011"></a><span class="lineno"> 4011</span>&#160;    }</div>
<div class="line"><a name="l04012"></a><span class="lineno"> 4012</span>&#160;      <a class="code" href="../../d3/d16/pstree_8c.html#d6/d07/structchild">child</a> = <a class="code" href="../../d3/d16/pstree_8c.html#d6/d07/structchild">child</a>-&gt;<a class="code" href="../../d3/d16/pstree_8c.html#a2dc4620614134bf34ea9447e5bc5cf0a">next</a>;</div>
<div class="line"><a name="l04013"></a><span class="lineno"> 4013</span>&#160;    }</div>
<div class="line"><a name="l04014"></a><span class="lineno"> 4014</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="../../d3/d16/pstree_8c.html#d6/d07/structchild">child</a> != <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>]-&gt;<a class="code" href="../../d6/d90/hush_8c.html#d8/d53/structpipe">pipe</a>);</div>
<div class="line"><a name="l04015"></a><span class="lineno"> 4015</span>&#160; </div>
<div class="line"><a name="l04016"></a><span class="lineno"> 4016</span>&#160;  <span class="comment">/* If job_state != 0, the job is still running, so don&#39;t bother with</span></div>
<div class="line"><a name="l04017"></a><span class="lineno"> 4017</span>&#160;<span class="comment">     setting the process exit status and job state unless we&#39;re</span></div>
<div class="line"><a name="l04018"></a><span class="lineno"> 4018</span>&#160;<span class="comment">     transitioning from stopped to running. */</span></div>
<div class="line"><a name="l04019"></a><span class="lineno"> 4019</span>&#160;  <span class="keywordflow">if</span> (job_state != 0 &amp;&amp; <a class="code" href="../../d3/d3a/jobs_8h.html#a466620bfa4ee2d285544d9a67a8a337e">JOBSTATE</a>(<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>) != <a class="code" href="../../d3/d3a/jobs_8h.html#a27f134c9d8392fc50ee339c518707f57a55fea56f3156409573084fce0c920da7">JSTOPPED</a>)</div>
<div class="line"><a name="l04020"></a><span class="lineno"> 4020</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l04021"></a><span class="lineno"> 4021</span>&#160; </div>
<div class="line"><a name="l04022"></a><span class="lineno"> 4022</span>&#160;  <span class="comment">/*</span></div>
<div class="line"><a name="l04023"></a><span class="lineno"> 4023</span>&#160;<span class="comment">   * SET JOB STATUS</span></div>
<div class="line"><a name="l04024"></a><span class="lineno"> 4024</span>&#160;<span class="comment">   */</span></div>
<div class="line"><a name="l04025"></a><span class="lineno"> 4025</span>&#160; </div>
<div class="line"><a name="l04026"></a><span class="lineno"> 4026</span>&#160;  <span class="comment">/* The job is either stopped or dead.  Set the state of the job accordingly. */</span></div>
<div class="line"><a name="l04027"></a><span class="lineno"> 4027</span>&#160;  <span class="keywordflow">if</span> (any_stopped)</div>
<div class="line"><a name="l04028"></a><span class="lineno"> 4028</span>&#160;    {</div>
<div class="line"><a name="l04029"></a><span class="lineno"> 4029</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>]-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#a5bee3de4970de999192f8929f926a4fe">state</a> = <a class="code" href="../../d3/d3a/jobs_8h.html#a27f134c9d8392fc50ee339c518707f57a55fea56f3156409573084fce0c920da7">JSTOPPED</a>;</div>
<div class="line"><a name="l04030"></a><span class="lineno"> 4030</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>]-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#af96c169abb39b4b3f9ccce91cb4b17dc">flags</a> &amp;= ~<a class="code" href="../../d3/d3a/jobs_8h.html#a76354a83b668afadd4704004a84925fc">J_FOREGROUND</a>;</div>
<div class="line"><a name="l04031"></a><span class="lineno"> 4031</span>&#160;      call_set_current++;</div>
<div class="line"><a name="l04032"></a><span class="lineno"> 4032</span>&#160;      <span class="comment">/* Suspending a job with SIGTSTP breaks all active loops. */</span></div>
<div class="line"><a name="l04033"></a><span class="lineno"> 4033</span>&#160;      <span class="keywordflow">if</span> (any_tstped &amp;&amp; <a class="code" href="../../df/d28/bash_2builtins_2common_8h.html#ada8a1eb347c01352f22deb4668f24bb6">loop_level</a>)</div>
<div class="line"><a name="l04034"></a><span class="lineno"> 4034</span>&#160;    <a class="code" href="../../df/d28/bash_2builtins_2common_8h.html#aed0a1963a144f67c6c0dfcce7a2ac77d">breaking</a> = <a class="code" href="../../df/d28/bash_2builtins_2common_8h.html#ada8a1eb347c01352f22deb4668f24bb6">loop_level</a>;</div>
<div class="line"><a name="l04035"></a><span class="lineno"> 4035</span>&#160;    }</div>
<div class="line"><a name="l04036"></a><span class="lineno"> 4036</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (job_state != 0)  <span class="comment">/* was stopped, now running */</span></div>
<div class="line"><a name="l04037"></a><span class="lineno"> 4037</span>&#160;    {</div>
<div class="line"><a name="l04038"></a><span class="lineno"> 4038</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>]-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#a5bee3de4970de999192f8929f926a4fe">state</a> = <a class="code" href="../../d3/d3a/jobs_8h.html#a27f134c9d8392fc50ee339c518707f57a1bf5a4892e9bb413f0dc598c6764541b">JRUNNING</a>;</div>
<div class="line"><a name="l04039"></a><span class="lineno"> 4039</span>&#160;      call_set_current++;</div>
<div class="line"><a name="l04040"></a><span class="lineno"> 4040</span>&#160;    }</div>
<div class="line"><a name="l04041"></a><span class="lineno"> 4041</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l04042"></a><span class="lineno"> 4042</span>&#160;    {</div>
<div class="line"><a name="l04043"></a><span class="lineno"> 4043</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>]-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#a5bee3de4970de999192f8929f926a4fe">state</a> = <a class="code" href="../../d3/d3a/jobs_8h.html#a27f134c9d8392fc50ee339c518707f57acc7e60ddf9078b1521d1adb70bd16f8b">JDEAD</a>;</div>
<div class="line"><a name="l04044"></a><span class="lineno"> 4044</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a5c5a5b94e26c657b8caef74571c311ec">j_ndead</a>++;</div>
<div class="line"><a name="l04045"></a><span class="lineno"> 4045</span>&#160; </div>
<div class="line"><a name="l04046"></a><span class="lineno"> 4046</span>&#160;<span class="preprocessor">#if 0</span></div>
<div class="line"><a name="l04047"></a><span class="lineno"> 4047</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d3/d3a/jobs_8h.html#ae19ce7e46f6caa8b6726dfb0d40e0a1f">IS_FOREGROUND</a> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>))</div>
<div class="line"><a name="l04048"></a><span class="lineno"> 4048</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#a28bc0018a01c0f1991274a6a2e6d79f4">setjstatus</a> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>);</div>
<div class="line"><a name="l04049"></a><span class="lineno"> 4049</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l04050"></a><span class="lineno"> 4050</span>&#160; </div>
<div class="line"><a name="l04051"></a><span class="lineno"> 4051</span>&#160;      <span class="comment">/* If this job has a cleanup function associated with it, call it</span></div>
<div class="line"><a name="l04052"></a><span class="lineno"> 4052</span>&#160;<span class="comment">     with `cleanarg&#39; as the single argument, then set the function</span></div>
<div class="line"><a name="l04053"></a><span class="lineno"> 4053</span>&#160;<span class="comment">     pointer to NULL so it is not inadvertently called twice.  The</span></div>
<div class="line"><a name="l04054"></a><span class="lineno"> 4054</span>&#160;<span class="comment">     cleanup function is responsible for deallocating cleanarg. */</span></div>
<div class="line"><a name="l04055"></a><span class="lineno"> 4055</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>]-&gt;j_cleanup)</div>
<div class="line"><a name="l04056"></a><span class="lineno"> 4056</span>&#160;    {</div>
<div class="line"><a name="l04057"></a><span class="lineno"> 4057</span>&#160;      (*<a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>]-&gt;j_cleanup) (<a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>]-&gt;cleanarg);</div>
<div class="line"><a name="l04058"></a><span class="lineno"> 4058</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>]-&gt;j_cleanup = (sh_vptrfunc_t *)<a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l04059"></a><span class="lineno"> 4059</span>&#160;    }</div>
<div class="line"><a name="l04060"></a><span class="lineno"> 4060</span>&#160;    }</div>
<div class="line"><a name="l04061"></a><span class="lineno"> 4061</span>&#160; </div>
<div class="line"><a name="l04062"></a><span class="lineno"> 4062</span>&#160;  <span class="comment">/*</span></div>
<div class="line"><a name="l04063"></a><span class="lineno"> 4063</span>&#160;<span class="comment">   * CLEANUP</span></div>
<div class="line"><a name="l04064"></a><span class="lineno"> 4064</span>&#160;<span class="comment">   *</span></div>
<div class="line"><a name="l04065"></a><span class="lineno"> 4065</span>&#160;<span class="comment">   * Currently, we just do special things if we got a SIGINT while waiting</span></div>
<div class="line"><a name="l04066"></a><span class="lineno"> 4066</span>&#160;<span class="comment">   * for a foreground job to complete</span></div>
<div class="line"><a name="l04067"></a><span class="lineno"> 4067</span>&#160;<span class="comment">   */</span></div>
<div class="line"><a name="l04068"></a><span class="lineno"> 4068</span>&#160; </div>
<div class="line"><a name="l04069"></a><span class="lineno"> 4069</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d3/d3a/jobs_8h.html#a466620bfa4ee2d285544d9a67a8a337e">JOBSTATE</a> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>) == <a class="code" href="../../d3/d3a/jobs_8h.html#a27f134c9d8392fc50ee339c518707f57acc7e60ddf9078b1521d1adb70bd16f8b">JDEAD</a>)</div>
<div class="line"><a name="l04070"></a><span class="lineno"> 4070</span>&#160;    {</div>
<div class="line"><a name="l04071"></a><span class="lineno"> 4071</span>&#160;      <span class="comment">/* If we&#39;re running a shell script and we get a SIGINT with a</span></div>
<div class="line"><a name="l04072"></a><span class="lineno"> 4072</span>&#160;<span class="comment">     SIGINT trap handler, but the foreground job handles it and</span></div>
<div class="line"><a name="l04073"></a><span class="lineno"> 4073</span>&#160;<span class="comment">     does not exit due to SIGINT, run the trap handler but do not</span></div>
<div class="line"><a name="l04074"></a><span class="lineno"> 4074</span>&#160;<span class="comment">     otherwise act as if we got the interrupt. */</span></div>
<div class="line"><a name="l04075"></a><span class="lineno"> 4075</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#acc216a9180c7ff0368811af940fe3c4f">wait_sigint_received</a> &amp;&amp; <a class="code" href="../../d6/d4f/shell_8c.html#ae2c20c1668999fe88f089ad20436f425">interactive_shell</a> == 0 &amp;&amp;</div>
<div class="line"><a name="l04076"></a><span class="lineno"> 4076</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#ad3281e6cc7874bc09819bc9f5afad595">child_caught_sigint</a> &amp;&amp; <a class="code" href="../../d3/d3a/jobs_8h.html#ae19ce7e46f6caa8b6726dfb0d40e0a1f">IS_FOREGROUND</a> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>) &amp;&amp;</div>
<div class="line"><a name="l04077"></a><span class="lineno"> 4077</span>&#160;      <a class="code" href="../../d5/da5/zread_8c.html#a40264baa053bf7ccf2ef5ca345d6c06d">signal_is_trapped</a> (<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a487309e3e9e0527535644115204a639a">SIGINT</a>))</div>
<div class="line"><a name="l04078"></a><span class="lineno"> 4078</span>&#160;    {</div>
<div class="line"><a name="l04079"></a><span class="lineno"> 4079</span>&#160;      <span class="keywordtype">int</span> old_frozen;</div>
<div class="line"><a name="l04080"></a><span class="lineno"> 4080</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#acc216a9180c7ff0368811af940fe3c4f">wait_sigint_received</a> = 0;</div>
<div class="line"><a name="l04081"></a><span class="lineno"> 4081</span>&#160;      <a class="code" href="../../d6/ddd/push_8c.html#a6525695256aeef8ca4dfea2a19319c00">last_command_exit_value</a> = <a class="code" href="../../df/d8e/jobs_8c.html#ab424b34a1f2efb697ac04e6ae1b67bd9">process_exit_status</a> (<a class="code" href="../../d3/d16/pstree_8c.html#d6/d07/structchild">child</a>-&gt;status);</div>
<div class="line"><a name="l04082"></a><span class="lineno"> 4082</span>&#160; </div>
<div class="line"><a name="l04083"></a><span class="lineno"> 4083</span>&#160;      old_frozen = <a class="code" href="../../df/d8e/jobs_8c.html#a57e47a8425e68a1907ac493cd673ca41">jobs_list_frozen</a>;</div>
<div class="line"><a name="l04084"></a><span class="lineno"> 4084</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#a57e47a8425e68a1907ac493cd673ca41">jobs_list_frozen</a> = 1;</div>
<div class="line"><a name="l04085"></a><span class="lineno"> 4085</span>&#160;      tstatus = <a class="code" href="../../dc/d6f/trap_8c.html#af8883d25f540c4e4cd6698d06211dcd9">maybe_call_trap_handler</a> (<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a487309e3e9e0527535644115204a639a">SIGINT</a>);</div>
<div class="line"><a name="l04086"></a><span class="lineno"> 4086</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#a57e47a8425e68a1907ac493cd673ca41">jobs_list_frozen</a> = old_frozen;</div>
<div class="line"><a name="l04087"></a><span class="lineno"> 4087</span>&#160;    }</div>
<div class="line"><a name="l04088"></a><span class="lineno"> 4088</span>&#160; </div>
<div class="line"><a name="l04089"></a><span class="lineno"> 4089</span>&#160;      <span class="comment">/* If the foreground job is killed by SIGINT when job control is not</span></div>
<div class="line"><a name="l04090"></a><span class="lineno"> 4090</span>&#160;<span class="comment">     active, we need to perform some special handling.</span></div>
<div class="line"><a name="l04091"></a><span class="lineno"> 4091</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l04092"></a><span class="lineno"> 4092</span>&#160;<span class="comment">     The check of wait_sigint_received is a way to determine if the</span></div>
<div class="line"><a name="l04093"></a><span class="lineno"> 4093</span>&#160;<span class="comment">     SIGINT came from the keyboard (in which case the shell has already</span></div>
<div class="line"><a name="l04094"></a><span class="lineno"> 4094</span>&#160;<span class="comment">     seen it, and wait_sigint_received is non-zero, because keyboard</span></div>
<div class="line"><a name="l04095"></a><span class="lineno"> 4095</span>&#160;<span class="comment">     signals are sent to process groups) or via kill(2) to the foreground</span></div>
<div class="line"><a name="l04096"></a><span class="lineno"> 4096</span>&#160;<span class="comment">     process by another process (or itself).  If the shell did receive the</span></div>
<div class="line"><a name="l04097"></a><span class="lineno"> 4097</span>&#160;<span class="comment">     SIGINT, it needs to perform normal SIGINT processing.  XXX - should</span></div>
<div class="line"><a name="l04098"></a><span class="lineno"> 4098</span>&#160;<span class="comment">     this change its behavior depending on whether the last command in an</span></div>
<div class="line"><a name="l04099"></a><span class="lineno"> 4099</span>&#160;<span class="comment">     pipeline exited due to SIGINT, or any process in the pipeline?  Right</span></div>
<div class="line"><a name="l04100"></a><span class="lineno"> 4100</span>&#160;<span class="comment">     now it does this if any process in the pipeline exits due to SIGINT. */</span></div>
<div class="line"><a name="l04101"></a><span class="lineno"> 4101</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#acc216a9180c7ff0368811af940fe3c4f">wait_sigint_received</a> &amp;&amp;</div>
<div class="line"><a name="l04102"></a><span class="lineno"> 4102</span>&#160;          <a class="code" href="../../df/d8e/jobs_8c.html#ad3281e6cc7874bc09819bc9f5afad595">child_caught_sigint</a> == 0 &amp;&amp;</div>
<div class="line"><a name="l04103"></a><span class="lineno"> 4103</span>&#160;          <a class="code" href="../../d3/d3a/jobs_8h.html#ae19ce7e46f6caa8b6726dfb0d40e0a1f">IS_FOREGROUND</a> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>) &amp;&amp; <a class="code" href="../../d3/d3a/jobs_8h.html#a5cf9a3ee434f914f66cdf9949084d427">IS_JOBCONTROL</a> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>) == 0)</div>
<div class="line"><a name="l04104"></a><span class="lineno"> 4104</span>&#160;    {</div>
<div class="line"><a name="l04105"></a><span class="lineno"> 4105</span>&#160;      <span class="keywordtype">int</span> old_frozen;</div>
<div class="line"><a name="l04106"></a><span class="lineno"> 4106</span>&#160; </div>
<div class="line"><a name="l04107"></a><span class="lineno"> 4107</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#acc216a9180c7ff0368811af940fe3c4f">wait_sigint_received</a> = 0;</div>
<div class="line"><a name="l04108"></a><span class="lineno"> 4108</span>&#160; </div>
<div class="line"><a name="l04109"></a><span class="lineno"> 4109</span>&#160;      <span class="comment">/* If SIGINT is trapped, set the exit status so that the trap</span></div>
<div class="line"><a name="l04110"></a><span class="lineno"> 4110</span>&#160;<span class="comment">         handler can see it. */</span></div>
<div class="line"><a name="l04111"></a><span class="lineno"> 4111</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/da5/zread_8c.html#a40264baa053bf7ccf2ef5ca345d6c06d">signal_is_trapped</a> (<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a487309e3e9e0527535644115204a639a">SIGINT</a>))</div>
<div class="line"><a name="l04112"></a><span class="lineno"> 4112</span>&#160;        <a class="code" href="../../d6/ddd/push_8c.html#a6525695256aeef8ca4dfea2a19319c00">last_command_exit_value</a> = <a class="code" href="../../df/d8e/jobs_8c.html#ab424b34a1f2efb697ac04e6ae1b67bd9">process_exit_status</a> (<a class="code" href="../../d3/d16/pstree_8c.html#d6/d07/structchild">child</a>-&gt;status);</div>
<div class="line"><a name="l04113"></a><span class="lineno"> 4113</span>&#160; </div>
<div class="line"><a name="l04114"></a><span class="lineno"> 4114</span>&#160;      <span class="comment">/* If the signal is trapped, let the trap handler get it no matter</span></div>
<div class="line"><a name="l04115"></a><span class="lineno"> 4115</span>&#160;<span class="comment">         what and simply return if the trap handler returns.</span></div>
<div class="line"><a name="l04116"></a><span class="lineno"> 4116</span>&#160;<span class="comment">         maybe_call_trap_handler() may cause dead jobs to be removed from</span></div>
<div class="line"><a name="l04117"></a><span class="lineno"> 4117</span>&#160;<span class="comment">         the job table because of a call to execute_command.  We work</span></div>
<div class="line"><a name="l04118"></a><span class="lineno"> 4118</span>&#160;<span class="comment">         around this by setting JOBS_LIST_FROZEN. */</span></div>
<div class="line"><a name="l04119"></a><span class="lineno"> 4119</span>&#160;      old_frozen = <a class="code" href="../../df/d8e/jobs_8c.html#a57e47a8425e68a1907ac493cd673ca41">jobs_list_frozen</a>;</div>
<div class="line"><a name="l04120"></a><span class="lineno"> 4120</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#a57e47a8425e68a1907ac493cd673ca41">jobs_list_frozen</a> = 1;</div>
<div class="line"><a name="l04121"></a><span class="lineno"> 4121</span>&#160;      tstatus = <a class="code" href="../../dc/d6f/trap_8c.html#af8883d25f540c4e4cd6698d06211dcd9">maybe_call_trap_handler</a> (<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a487309e3e9e0527535644115204a639a">SIGINT</a>);</div>
<div class="line"><a name="l04122"></a><span class="lineno"> 4122</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#a57e47a8425e68a1907ac493cd673ca41">jobs_list_frozen</a> = old_frozen;</div>
<div class="line"><a name="l04123"></a><span class="lineno"> 4123</span>&#160;      <span class="keywordflow">if</span> (tstatus == 0 &amp;&amp; <a class="code" href="../../df/d8e/jobs_8c.html#ae15b67160f6705f527ba4c23e11e64d3">old_sigint_handler</a> != <a class="code" href="../../df/d8e/jobs_8c.html#a4236e83af520841a9f9b18cab6952df1">INVALID_SIGNAL_HANDLER</a>)</div>
<div class="line"><a name="l04124"></a><span class="lineno"> 4124</span>&#160;        {</div>
<div class="line"><a name="l04125"></a><span class="lineno"> 4125</span>&#160;          <span class="comment">/* wait_sigint_handler () has already seen SIGINT and</span></div>
<div class="line"><a name="l04126"></a><span class="lineno"> 4126</span>&#160;<span class="comment">         allowed the wait builtin to jump out.  We need to</span></div>
<div class="line"><a name="l04127"></a><span class="lineno"> 4127</span>&#160;<span class="comment">         call the original SIGINT handler, if necessary.  If</span></div>
<div class="line"><a name="l04128"></a><span class="lineno"> 4128</span>&#160;<span class="comment">         the original handler is SIG_DFL, we need to resend</span></div>
<div class="line"><a name="l04129"></a><span class="lineno"> 4129</span>&#160;<span class="comment">         the signal to ourselves. */</span></div>
<div class="line"><a name="l04130"></a><span class="lineno"> 4130</span>&#160; </div>
<div class="line"><a name="l04131"></a><span class="lineno"> 4131</span>&#160;          temp_handler = <a class="code" href="../../df/d8e/jobs_8c.html#ae15b67160f6705f527ba4c23e11e64d3">old_sigint_handler</a>;</div>
<div class="line"><a name="l04132"></a><span class="lineno"> 4132</span>&#160; </div>
<div class="line"><a name="l04133"></a><span class="lineno"> 4133</span>&#160;          <span class="comment">/* Bogus.  If we&#39;ve reset the signal handler as the result</span></div>
<div class="line"><a name="l04134"></a><span class="lineno"> 4134</span>&#160;<span class="comment">         of a trap caught on SIGINT, then old_sigint_handler</span></div>
<div class="line"><a name="l04135"></a><span class="lineno"> 4135</span>&#160;<span class="comment">         will point to trap_handler, which now knows nothing about</span></div>
<div class="line"><a name="l04136"></a><span class="lineno"> 4136</span>&#160;<span class="comment">         SIGINT (if we reset the sighandler to the default).</span></div>
<div class="line"><a name="l04137"></a><span class="lineno"> 4137</span>&#160;<span class="comment">         In this case, we have to fix things up.  What a crock. */</span></div>
<div class="line"><a name="l04138"></a><span class="lineno"> 4138</span>&#160;          <span class="keywordflow">if</span> (temp_handler == <a class="code" href="../../dc/d6f/trap_8c.html#a8ae925fadd52847ae3fbf87db9f92a43">trap_handler</a> &amp;&amp; <a class="code" href="../../d5/da5/zread_8c.html#a40264baa053bf7ccf2ef5ca345d6c06d">signal_is_trapped</a> (<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a487309e3e9e0527535644115204a639a">SIGINT</a>) == 0)</div>
<div class="line"><a name="l04139"></a><span class="lineno"> 4139</span>&#160;          temp_handler = <a class="code" href="../../dc/d6f/trap_8c.html#af12cb5667a0cc8db128009b4249e1925">trap_to_sighandler</a> (<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a487309e3e9e0527535644115204a639a">SIGINT</a>);</div>
<div class="line"><a name="l04140"></a><span class="lineno"> 4140</span>&#160;          <a class="code" href="../../df/d8e/jobs_8c.html#abaf052f06c9c04a236219814419b7e83">restore_sigint_handler</a> ();</div>
<div class="line"><a name="l04141"></a><span class="lineno"> 4141</span>&#160;          <span class="keywordflow">if</span> (temp_handler == <a class="code" href="../../de/d2b/musl_2include_2signal_8h.html#a27d5dc561093d6243542e6a2465bc0f8">SIG_DFL</a>)</div>
<div class="line"><a name="l04142"></a><span class="lineno"> 4142</span>&#160;        <a class="code" href="../../da/d12/sig_8c.html#ac41101d32e279afcdc02c1317d298b9f">termsig_handler</a> (<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a487309e3e9e0527535644115204a639a">SIGINT</a>);   <span class="comment">/* XXX */</span></div>
<div class="line"><a name="l04143"></a><span class="lineno"> 4143</span>&#160;          <span class="keywordflow">else</span> <span class="keywordflow">if</span> (temp_handler != <a class="code" href="../../de/d2b/musl_2include_2signal_8h.html#acf0e499b0ac946b366b4f47a3b3e8b9e">SIG_IGN</a>)</div>
<div class="line"><a name="l04144"></a><span class="lineno"> 4144</span>&#160;        (*temp_handler) (<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a487309e3e9e0527535644115204a639a">SIGINT</a>);</div>
<div class="line"><a name="l04145"></a><span class="lineno"> 4145</span>&#160;        }</div>
<div class="line"><a name="l04146"></a><span class="lineno"> 4146</span>&#160;    }</div>
<div class="line"><a name="l04147"></a><span class="lineno"> 4147</span>&#160;    }</div>
<div class="line"><a name="l04148"></a><span class="lineno"> 4148</span>&#160; </div>
<div class="line"><a name="l04149"></a><span class="lineno"> 4149</span>&#160;  <span class="keywordflow">return</span> call_set_current;</div>
<div class="line"><a name="l04150"></a><span class="lineno"> 4150</span>&#160;}</div>
<div class="ttc" id="abash_2builtins_2common_8h_html_ada8a1eb347c01352f22deb4668f24bb6"><div class="ttname"><a href="../../df/d28/bash_2builtins_2common_8h.html#ada8a1eb347c01352f22deb4668f24bb6">loop_level</a></div><div class="ttdeci">int loop_level</div></div>
<div class="ttc" id="abash_2builtins_2common_8h_html_aed0a1963a144f67c6c0dfcce7a2ac77d"><div class="ttname"><a href="../../df/d28/bash_2builtins_2common_8h.html#aed0a1963a144f67c6c0dfcce7a2ac77d">breaking</a></div><div class="ttdeci">int breaking</div></div>
<div class="ttc" id="ajobs_8c_html_a28bc0018a01c0f1991274a6a2e6d79f4"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a28bc0018a01c0f1991274a6a2e6d79f4">setjstatus</a></div><div class="ttdeci">static void setjstatus(int j)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l04155">jobs.c:4155</a></div></div>
<div class="ttc" id="ajobs_8c_html_abaf052f06c9c04a236219814419b7e83"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#abaf052f06c9c04a236219814419b7e83">restore_sigint_handler</a></div><div class="ttdeci">static void restore_sigint_handler()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l02736">jobs.c:2736</a></div></div>
<div class="ttc" id="ajobs_8c_html_acc216a9180c7ff0368811af940fe3c4f"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#acc216a9180c7ff0368811af940fe3c4f">wait_sigint_received</a></div><div class="ttdeci">static int wait_sigint_received</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l02721">jobs.c:2721</a></div></div>
<div class="ttc" id="ajobs_8c_html_ad3281e6cc7874bc09819bc9f5afad595"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#ad3281e6cc7874bc09819bc9f5afad595">child_caught_sigint</a></div><div class="ttdeci">static int child_caught_sigint</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l02722">jobs.c:2722</a></div></div>
<div class="ttc" id="ajobs_8h_html_a5cf9a3ee434f914f66cdf9949084d427"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#a5cf9a3ee434f914f66cdf9949084d427">IS_JOBCONTROL</a></div><div class="ttdeci">#define IS_JOBCONTROL(j)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00116">jobs.h:116</a></div></div>
<div class="ttc" id="ajobs_8h_html_aa5b9f7ecd789405fb1d6c079865df027"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#aa5b9f7ecd789405fb1d6c079865df027">PSTOPPED</a></div><div class="ttdeci">#define PSTOPPED(p)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00079">jobs.h:79</a></div></div>
<div class="ttc" id="ajobs_8h_html_adcdd2eca21a30b7f30b69d21a592a657"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#adcdd2eca21a30b7f30b69d21a592a657">PRUNNING</a></div><div class="ttdeci">#define PRUNNING(p)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00080">jobs.h:80</a></div></div>
<div class="ttc" id="aposix__spawn_8c_html_a90a7b20363e18ef6ec5f22741c81e375"><div class="ttname"><a href="../../d1/d0c/posix__spawn_8c.html#a90a7b20363e18ef6ec5f22741c81e375">child</a></div><div class="ttdeci">static int child(void *args_vp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0c/posix__spawn_8c_source.html#l00031">posix_spawn.c:31</a></div></div>
<div class="ttc" id="apstree_8c_html_a2dc4620614134bf34ea9447e5bc5cf0a"><div class="ttname"><a href="../../d3/d16/pstree_8c.html#a2dc4620614134bf34ea9447e5bc5cf0a">child::next</a></div><div class="ttdeci">struct child * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d16/pstree_8c_source.html#l00058">pstree.c:58</a></div></div>
<div class="ttc" id="asig_8c_html_ac41101d32e279afcdc02c1317d298b9f"><div class="ttname"><a href="../../da/d12/sig_8c.html#ac41101d32e279afcdc02c1317d298b9f">termsig_handler</a></div><div class="ttdeci">void termsig_handler(int sig)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d12/sig_8c_source.html#l00575">sig.c:575</a></div></div>
<div class="ttc" id="atrap_8c_html_a8ae925fadd52847ae3fbf87db9f92a43"><div class="ttname"><a href="../../dc/d6f/trap_8c.html#a8ae925fadd52847ae3fbf87db9f92a43">trap_handler</a></div><div class="ttdeci">sighandler trap_handler(int sig)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d6f/trap_8c_source.html#l00502">trap.c:502</a></div></div>
<div class="ttc" id="atrap_8c_html_af12cb5667a0cc8db128009b4249e1925"><div class="ttname"><a href="../../dc/d6f/trap_8c.html#af12cb5667a0cc8db128009b4249e1925">trap_to_sighandler</a></div><div class="ttdeci">SigHandler * trap_to_sighandler(int sig)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d6f/trap_8c_source.html#l00778">trap.c:778</a></div></div>
<div class="ttc" id="atrap_8c_html_af8883d25f540c4e4cd6698d06211dcd9"><div class="ttname"><a href="../../dc/d6f/trap_8c.html#af8883d25f540c4e4cd6698d06211dcd9">maybe_call_trap_handler</a></div><div class="ttdeci">int maybe_call_trap_handler(int sig)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d6f/trap_8c_source.html#l01472">trap.c:1472</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d28/bash_2builtins_2common_8h.html#aed0a1963a144f67c6c0dfcce7a2ac77d">breaking</a>, <a class="el" href="../../d1/d0c/posix__spawn_8c_source.html#l00031">child()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02722">child_caught_sigint</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00125">job::flags</a>, <a class="el" href="../../d6/d4f/shell_8c_source.html#l00142">interactive_shell</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02718">INVALID_SIGNAL_HANDLER</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00114">IS_FOREGROUND</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00116">IS_JOBCONTROL</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00105">J_FOREGROUND</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00148">jobstats::j_ndead</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00106">J_NOTIFIED</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00094">JDEAD</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00222">job_control</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00183">jobs</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00346">jobs_list_frozen</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00095">JOBSTATE</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00094">JRUNNING</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00175">js</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00094">JSTOPPED</a>, <a class="el" href="../../de/d3d/execute__cmd_8c_source.html#l00217">last_command_exit_value</a>, <a class="el" href="../../df/d28/bash_2builtins_2common_8h.html#ada8a1eb347c01352f22deb4668f24bb6">loop_level</a>, <a class="el" href="../../dc/d6f/trap_8c_source.html#l01472">maybe_call_trap_handler()</a>, <a class="el" href="../../d3/d16/pstree_8c_source.html#l00058">child::next</a>, <a class="el" href="../../d9/d14/general_8h_source.html#l00053">NULL</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02719">old_sigint_handler</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00083">PEXITED</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00122">job::pipe</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02801">process_exit_status()</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00080">PRUNNING</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00079">PSTOPPED</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02736">restore_sigint_handler()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04155">setjstatus()</a>, <a class="el" href="../../de/d2b/musl_2include_2signal_8h_source.html#l00284">SIG_DFL</a>, <a class="el" href="../../de/d2b/musl_2include_2signal_8h_source.html#l00285">SIG_IGN</a>, <a class="el" href="../../df/dff/libc_2include_2signal_8h_source.html#l00013">SIGINT</a>, <a class="el" href="../../dc/d6f/trap_8c_source.html#l01503">signal_is_trapped()</a>, <a class="el" href="../../df/dff/libc_2include_2signal_8h_source.html#l00067">SIGTSTP</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00124">job::state</a>, <a class="el" href="../../da/d12/sig_8c_source.html#l00575">termsig_handler()</a>, <a class="el" href="../../dc/d6f/trap_8c_source.html#l00502">trap_handler()</a>, <a class="el" href="../../dc/d6f/trap_8c_source.html#l00778">trap_to_sighandler()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02721">wait_sigint_received</a>, <a class="el" href="../../d7/d23/unionwait_8h_source.html#l00089">WIFSTOPPED</a>, and <a class="el" href="../../d7/d23/unionwait_8h_source.html#l00094">WSTOPSIG</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l03764">waitchld()</a>.</p>

</div>
</div>
<a id="a9c5a796b3c5e2ddcc0ea88c494e324ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c5a796b3c5e2ddcc0ea88c494e324ea">&#9670;&nbsp;</a></span>set_jobs_list_frozen()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void set_jobs_list_frozen </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l04949">4949</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l04951"></a><span class="lineno"> 4951</span>&#160;{</div>
<div class="line"><a name="l04952"></a><span class="lineno"> 4952</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#a57e47a8425e68a1907ac493cd673ca41">jobs_list_frozen</a> = <a class="code" href="../../df/d19/arpping_8c.html#ac9562ee4ecb3b8aeebeb04656e7e57a9">s</a>;</div>
<div class="line"><a name="l04953"></a><span class="lineno"> 4953</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d8e/jobs_8c_source.html#l00346">jobs_list_frozen</a>, and <a class="el" href="../../df/d19/arpping_8c.html#ac9562ee4ecb3b8aeebeb04656e7e57a9">s</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d3d/execute__cmd_8c_source.html#l02496">execute_pipeline()</a>, and <a class="el" href="../../de/d3d/execute__cmd_8c_source.html#l02489">lastpipe_cleanup()</a>.</p>

</div>
</div>
<a id="a137086a1fb1016e07d53473ef106d1f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a137086a1fb1016e07d53473ef106d1f0">&#9670;&nbsp;</a></span>set_maxchild()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void set_maxchild </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nchild</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l05038">5038</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l05040"></a><span class="lineno"> 5040</span>&#160;{</div>
<div class="line"><a name="l05041"></a><span class="lineno"> 5041</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">int</span> lmaxchild = -1;</div>
<div class="line"><a name="l05042"></a><span class="lineno"> 5042</span>&#160; </div>
<div class="line"><a name="l05043"></a><span class="lineno"> 5043</span>&#160;  <span class="comment">/* Initialize once. */</span></div>
<div class="line"><a name="l05044"></a><span class="lineno"> 5044</span>&#160;  <span class="keywordflow">if</span> (lmaxchild &lt; 0)</div>
<div class="line"><a name="l05045"></a><span class="lineno"> 5045</span>&#160;    {</div>
<div class="line"><a name="l05046"></a><span class="lineno"> 5046</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> = 0;</div>
<div class="line"><a name="l05047"></a><span class="lineno"> 5047</span>&#160;      lmaxchild = <a class="code" href="../../d9/d9c/oslib_8c.html#a04a4f0e2d32b8f2a99fafab3cdea0e43">getmaxchild</a> ();</div>
<div class="line"><a name="l05048"></a><span class="lineno"> 5048</span>&#160;      <span class="keywordflow">if</span> (lmaxchild &lt; 0 &amp;&amp; <a class="code" href="../../df/d8e/jobs_8c.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> == 0)</div>
<div class="line"><a name="l05049"></a><span class="lineno"> 5049</span>&#160;        lmaxchild = <a class="code" href="../../df/d8e/jobs_8c.html#a93df246677de7b76e2b8e743da164ba1">MAX_CHILD_MAX</a>;      <span class="comment">/* assume unlimited */</span></div>
<div class="line"><a name="l05050"></a><span class="lineno"> 5050</span>&#160;    }</div>
<div class="line"><a name="l05051"></a><span class="lineno"> 5051</span>&#160;  <span class="keywordflow">if</span> (lmaxchild &lt; 0)</div>
<div class="line"><a name="l05052"></a><span class="lineno"> 5052</span>&#160;    lmaxchild = <a class="code" href="../../df/d8e/jobs_8c.html#a626cd506cc8c8753532f784d12b382e2">DEFAULT_CHILD_MAX</a>;</div>
<div class="line"><a name="l05053"></a><span class="lineno"> 5053</span>&#160; </div>
<div class="line"><a name="l05054"></a><span class="lineno"> 5054</span>&#160;  <span class="comment">/* Clamp value we set.  Minimum is what Posix requires, maximum is defined</span></div>
<div class="line"><a name="l05055"></a><span class="lineno"> 5055</span>&#160;<span class="comment">     above as MAX_CHILD_MAX. */</span></div>
<div class="line"><a name="l05056"></a><span class="lineno"> 5056</span>&#160;  <span class="keywordflow">if</span> (nchild &lt; lmaxchild)</div>
<div class="line"><a name="l05057"></a><span class="lineno"> 5057</span>&#160;    nchild = lmaxchild;</div>
<div class="line"><a name="l05058"></a><span class="lineno"> 5058</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (nchild &gt; <a class="code" href="../../df/d8e/jobs_8c.html#a93df246677de7b76e2b8e743da164ba1">MAX_CHILD_MAX</a>)</div>
<div class="line"><a name="l05059"></a><span class="lineno"> 5059</span>&#160;    nchild = <a class="code" href="../../df/d8e/jobs_8c.html#a93df246677de7b76e2b8e743da164ba1">MAX_CHILD_MAX</a>;</div>
<div class="line"><a name="l05060"></a><span class="lineno"> 5060</span>&#160; </div>
<div class="line"><a name="l05061"></a><span class="lineno"> 5061</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a3c74d4692759e4d8ec8089acefa23583">c_childmax</a> = nchild;</div>
<div class="line"><a name="l05062"></a><span class="lineno"> 5062</span>&#160;}</div>
<div class="ttc" id="ajobs_8c_html_a626cd506cc8c8753532f784d12b382e2"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a626cd506cc8c8753532f784d12b382e2">DEFAULT_CHILD_MAX</a></div><div class="ttdeci">#define DEFAULT_CHILD_MAX</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l00094">jobs.c:94</a></div></div>
<div class="ttc" id="aoslib_8c_html_a04a4f0e2d32b8f2a99fafab3cdea0e43"><div class="ttname"><a href="../../d9/d9c/oslib_8c.html#a04a4f0e2d32b8f2a99fafab3cdea0e43">getmaxchild</a></div><div class="ttdeci">long getmaxchild()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d9c/oslib_8c_source.html#l00281">oslib.c:281</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00135">jobstats::c_childmax</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00094">DEFAULT_CHILD_MAX</a>, <a class="el" href="../../df/d8e/jobs_8c.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../d9/d9c/oslib_8c_source.html#l00281">getmaxchild()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00175">js</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l00098">MAX_CHILD_MAX</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l04370">initialize_job_control()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l04827">mark_dead_jobs_as_notified()</a>.</p>

</div>
</div>
<a id="a498a633d49209b6c93d81baf6e7e1430"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a498a633d49209b6c93d81baf6e7e1430">&#9670;&nbsp;</a></span>set_new_line_discipline()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int set_new_line_discipline </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>tty</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l04534">4534</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l04536"></a><span class="lineno"> 4536</span>&#160;{</div>
<div class="line"><a name="l04537"></a><span class="lineno"> 4537</span>&#160;<span class="preprocessor">#if defined (NEW_TTY_DRIVER)</span></div>
<div class="line"><a name="l04538"></a><span class="lineno"> 4538</span>&#160;  <span class="keywordtype">int</span> ldisc;</div>
<div class="line"><a name="l04539"></a><span class="lineno"> 4539</span>&#160; </div>
<div class="line"><a name="l04540"></a><span class="lineno"> 4540</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d3/de9/stropts_8h.html#ae3a230c65883ec8edc50e3a09ca80003">ioctl</a> (tty, <a class="code" href="../../d1/d11/arch_2generic_2bits_2ioctl_8h.html#aababf46dab657cd824edc08af0cf9b2b">TIOCGETD</a>, &amp;ldisc) &lt; 0)</div>
<div class="line"><a name="l04541"></a><span class="lineno"> 4541</span>&#160;    <span class="keywordflow">return</span> (-1);</div>
<div class="line"><a name="l04542"></a><span class="lineno"> 4542</span>&#160; </div>
<div class="line"><a name="l04543"></a><span class="lineno"> 4543</span>&#160;  <span class="keywordflow">if</span> (ldisc != NTTYDISC)</div>
<div class="line"><a name="l04544"></a><span class="lineno"> 4544</span>&#160;    {</div>
<div class="line"><a name="l04545"></a><span class="lineno"> 4545</span>&#160;      ldisc = NTTYDISC;</div>
<div class="line"><a name="l04546"></a><span class="lineno"> 4546</span>&#160; </div>
<div class="line"><a name="l04547"></a><span class="lineno"> 4547</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d3/de9/stropts_8h.html#ae3a230c65883ec8edc50e3a09ca80003">ioctl</a> (tty, <a class="code" href="../../d1/d11/arch_2generic_2bits_2ioctl_8h.html#ae97b6509eb54f75814bcbc521c76c342">TIOCSETD</a>, &amp;ldisc) &lt; 0)</div>
<div class="line"><a name="l04548"></a><span class="lineno"> 4548</span>&#160;    <span class="keywordflow">return</span> (-1);</div>
<div class="line"><a name="l04549"></a><span class="lineno"> 4549</span>&#160;    }</div>
<div class="line"><a name="l04550"></a><span class="lineno"> 4550</span>&#160;  <span class="keywordflow">return</span> (0);</div>
<div class="line"><a name="l04551"></a><span class="lineno"> 4551</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* NEW_TTY_DRIVER */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l04552"></a><span class="lineno"> 4552</span>&#160; </div>
<div class="line"><a name="l04553"></a><span class="lineno"> 4553</span>&#160;<span class="preprocessor">#if defined (TERMIO_TTY_DRIVER)</span></div>
<div class="line"><a name="l04554"></a><span class="lineno"> 4554</span>&#160;<span class="preprocessor">#  if defined (TERMIO_LDISC) &amp;&amp; (NTTYDISC)</span></div>
<div class="line"><a name="l04555"></a><span class="lineno"> 4555</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d3/de9/stropts_8h.html#ae3a230c65883ec8edc50e3a09ca80003">ioctl</a> (tty, <a class="code" href="../../d1/d11/arch_2generic_2bits_2ioctl_8h.html#a1616db893530ec44fc172d29cc33daa5">TCGETA</a>, &amp;<a class="code" href="../../df/d8e/jobs_8c.html#ad9fe5481268cb2aed5102ece6ef18bbb">shell_tty_info</a>) &lt; 0)</div>
<div class="line"><a name="l04556"></a><span class="lineno"> 4556</span>&#160;    <span class="keywordflow">return</span> (-1);</div>
<div class="line"><a name="l04557"></a><span class="lineno"> 4557</span>&#160; </div>
<div class="line"><a name="l04558"></a><span class="lineno"> 4558</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#ad9fe5481268cb2aed5102ece6ef18bbb">shell_tty_info</a>.c_line != NTTYDISC)</div>
<div class="line"><a name="l04559"></a><span class="lineno"> 4559</span>&#160;    {</div>
<div class="line"><a name="l04560"></a><span class="lineno"> 4560</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#ad9fe5481268cb2aed5102ece6ef18bbb">shell_tty_info</a>.c_line = NTTYDISC;</div>
<div class="line"><a name="l04561"></a><span class="lineno"> 4561</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d3/de9/stropts_8h.html#ae3a230c65883ec8edc50e3a09ca80003">ioctl</a> (tty, <a class="code" href="../../d1/d11/arch_2generic_2bits_2ioctl_8h.html#aead7b848642d946a0efa1048021b11c3">TCSETAW</a>, &amp;<a class="code" href="../../df/d8e/jobs_8c.html#ad9fe5481268cb2aed5102ece6ef18bbb">shell_tty_info</a>) &lt; 0)</div>
<div class="line"><a name="l04562"></a><span class="lineno"> 4562</span>&#160;    <span class="keywordflow">return</span> (-1);</div>
<div class="line"><a name="l04563"></a><span class="lineno"> 4563</span>&#160;    }</div>
<div class="line"><a name="l04564"></a><span class="lineno"> 4564</span>&#160;<span class="preprocessor">#  endif </span><span class="comment">/* TERMIO_LDISC &amp;&amp; NTTYDISC */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l04565"></a><span class="lineno"> 4565</span>&#160;  <span class="keywordflow">return</span> (0);</div>
<div class="line"><a name="l04566"></a><span class="lineno"> 4566</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* TERMIO_TTY_DRIVER */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l04567"></a><span class="lineno"> 4567</span>&#160; </div>
<div class="line"><a name="l04568"></a><span class="lineno"> 4568</span>&#160;<span class="preprocessor">#if defined (TERMIOS_TTY_DRIVER)</span></div>
<div class="line"><a name="l04569"></a><span class="lineno"> 4569</span>&#160;<span class="preprocessor">#  if defined (TERMIOS_LDISC) &amp;&amp; defined (NTTYDISC)</span></div>
<div class="line"><a name="l04570"></a><span class="lineno"> 4570</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d2/d4e/include_2termios_8h.html#aa589fa770349629dbf3a029336dd85f5">tcgetattr</a> (tty, &amp;<a class="code" href="../../df/d8e/jobs_8c.html#ad9fe5481268cb2aed5102ece6ef18bbb">shell_tty_info</a>) &lt; 0)</div>
<div class="line"><a name="l04571"></a><span class="lineno"> 4571</span>&#160;    <span class="keywordflow">return</span> (-1);</div>
<div class="line"><a name="l04572"></a><span class="lineno"> 4572</span>&#160; </div>
<div class="line"><a name="l04573"></a><span class="lineno"> 4573</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#ad9fe5481268cb2aed5102ece6ef18bbb">shell_tty_info</a>.c_line != NTTYDISC)</div>
<div class="line"><a name="l04574"></a><span class="lineno"> 4574</span>&#160;    {</div>
<div class="line"><a name="l04575"></a><span class="lineno"> 4575</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#ad9fe5481268cb2aed5102ece6ef18bbb">shell_tty_info</a>.c_line = NTTYDISC;</div>
<div class="line"><a name="l04576"></a><span class="lineno"> 4576</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d2/d4e/include_2termios_8h.html#aaa46283af4d7f1b245c66d27c49faf44">tcsetattr</a> (tty, <a class="code" href="../../d3/de9/arch_2generic_2bits_2termios_8h.html#ad147943bddb5fe0a4b5e8cebcdba1596">TCSADRAIN</a>, &amp;<a class="code" href="../../df/d8e/jobs_8c.html#ad9fe5481268cb2aed5102ece6ef18bbb">shell_tty_info</a>) &lt; 0)</div>
<div class="line"><a name="l04577"></a><span class="lineno"> 4577</span>&#160;    <span class="keywordflow">return</span> (-1);</div>
<div class="line"><a name="l04578"></a><span class="lineno"> 4578</span>&#160;    }</div>
<div class="line"><a name="l04579"></a><span class="lineno"> 4579</span>&#160;<span class="preprocessor">#  endif </span><span class="comment">/* TERMIOS_LDISC &amp;&amp; NTTYDISC */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l04580"></a><span class="lineno"> 4580</span>&#160;  <span class="keywordflow">return</span> (0);</div>
<div class="line"><a name="l04581"></a><span class="lineno"> 4581</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* TERMIOS_TTY_DRIVER */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l04582"></a><span class="lineno"> 4582</span>&#160; </div>
<div class="line"><a name="l04583"></a><span class="lineno"> 4583</span>&#160;<span class="preprocessor">#if !defined (NEW_TTY_DRIVER) &amp;&amp; !defined (TERMIO_TTY_DRIVER) &amp;&amp; !defined (TERMIOS_TTY_DRIVER)</span></div>
<div class="line"><a name="l04584"></a><span class="lineno"> 4584</span>&#160;  <span class="keywordflow">return</span> (-1);</div>
<div class="line"><a name="l04585"></a><span class="lineno"> 4585</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l04586"></a><span class="lineno"> 4586</span>&#160;}</div>
<div class="ttc" id="aarch_2generic_2bits_2ioctl_8h_html_aababf46dab657cd824edc08af0cf9b2b"><div class="ttname"><a href="../../d1/d11/arch_2generic_2bits_2ioctl_8h.html#aababf46dab657cd824edc08af0cf9b2b">TIOCGETD</a></div><div class="ttdeci">#define TIOCGETD</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d11/arch_2generic_2bits_2ioctl_8h_source.html#l00047">ioctl.h:47</a></div></div>
<div class="ttc" id="aarch_2generic_2bits_2ioctl_8h_html_ae97b6509eb54f75814bcbc521c76c342"><div class="ttname"><a href="../../d1/d11/arch_2generic_2bits_2ioctl_8h.html#ae97b6509eb54f75814bcbc521c76c342">TIOCSETD</a></div><div class="ttdeci">#define TIOCSETD</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d11/arch_2generic_2bits_2ioctl_8h_source.html#l00046">ioctl.h:46</a></div></div>
<div class="ttc" id="aarch_2generic_2bits_2ioctl_8h_html_aead7b848642d946a0efa1048021b11c3"><div class="ttname"><a href="../../d1/d11/arch_2generic_2bits_2ioctl_8h.html#aead7b848642d946a0efa1048021b11c3">TCSETAW</a></div><div class="ttdeci">#define TCSETAW</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d11/arch_2generic_2bits_2ioctl_8h_source.html#l00017">ioctl.h:17</a></div></div>
<div class="ttc" id="aarch_2generic_2bits_2termios_8h_html_ad147943bddb5fe0a4b5e8cebcdba1596"><div class="ttname"><a href="../../d3/de9/arch_2generic_2bits_2termios_8h.html#ad147943bddb5fe0a4b5e8cebcdba1596">TCSADRAIN</a></div><div class="ttdeci">#define TCSADRAIN</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de9/arch_2generic_2bits_2termios_8h_source.html#l00145">termios.h:145</a></div></div>
<div class="ttc" id="ainclude_2termios_8h_html_aaa46283af4d7f1b245c66d27c49faf44"><div class="ttname"><a href="../../d2/d4e/include_2termios_8h.html#aaa46283af4d7f1b245c66d27c49faf44">tcsetattr</a></div><div class="ttdeci">int tcsetattr(int, int, const struct termios *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/de8/tcsetattr_8c_source.html#l00005">tcsetattr.c:5</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dc/d32/ioctl_8c_source.html#l00128">ioctl()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02416">shell_tty_info</a>, <a class="el" href="../../d1/d11/arch_2generic_2bits_2ioctl_8h_source.html#l00015">TCGETA</a>, <a class="el" href="../../dd/df9/tcgetattr_8c_source.html#l00004">tcgetattr()</a>, <a class="el" href="../../d3/de9/arch_2generic_2bits_2termios_8h_source.html#l00145">TCSADRAIN</a>, <a class="el" href="../../d5/de8/tcsetattr_8c_source.html#l00005">tcsetattr()</a>, <a class="el" href="../../d1/d11/arch_2generic_2bits_2ioctl_8h_source.html#l00017">TCSETAW</a>, <a class="el" href="../../d1/d11/arch_2generic_2bits_2ioctl_8h_source.html#l00047">TIOCGETD</a>, and <a class="el" href="../../d1/d11/arch_2generic_2bits_2ioctl_8h_source.html#l00046">TIOCSETD</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l04370">initialize_job_control()</a>.</p>

</div>
</div>
<a id="a9c3599dc5b071245445a30237eefbe9c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c3599dc5b071245445a30237eefbe9c">&#9670;&nbsp;</a></span>set_sigchld_handler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void set_sigchld_handler </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l05066">5066</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l05067"></a><span class="lineno"> 5067</span>&#160;{</div>
<div class="line"><a name="l05068"></a><span class="lineno"> 5068</span>&#160;  <a class="code" href="../../de/d62/sig_8h.html#aefdb4e4f01f2aa4133f26dbabcc8358b">set_signal_handler</a> (<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a0e63521a64cc8bc2b91d36a87d32c9f8">SIGCHLD</a>, <a class="code" href="../../df/d8e/jobs_8c.html#a2ff305f4a0cb3c0f7ccb33c71cc2d0d2">sigchld_handler</a>);</div>
<div class="line"><a name="l05069"></a><span class="lineno"> 5069</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../de/d62/sig_8h_source.html#l00043">set_signal_handler</a>, <a class="el" href="../../df/dff/libc_2include_2signal_8h_source.html#l00058">SIGCHLD</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l03741">sigchld_handler()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/d93/subst_8c_source.html#l06919">command_substitute()</a>, <a class="el" href="../../de/d3d/execute__cmd_8c_source.html#l05586">execute_disk_command()</a>, <a class="el" href="../../de/d3d/execute__cmd_8c_source.html#l01477">execute_in_subshell()</a>, <a class="el" href="../../de/d3d/execute__cmd_8c_source.html#l05316">execute_subshell_builtin_or_function()</a>, and <a class="el" href="../../de/d3d/execute__cmd_8c_source.html#l05874">initialize_subshell()</a>.</p>

</div>
</div>
<a id="ab9dc901cdc105f8060eafdc6301fe2de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9dc901cdc105f8060eafdc6301fe2de">&#9670;&nbsp;</a></span>set_tty_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int set_tty_state </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l02508">2508</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;{</div>
<div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;  <span class="keywordtype">int</span> tty;</div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160; </div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;  tty = <a class="code" href="../../df/d8e/jobs_8c.html#a23dc422a1eed633a3a9ce331720ca21c">input_tty</a> ();</div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;  <span class="keywordflow">if</span> (tty != -1)</div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;    {</div>
<div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;<span class="preprocessor">#if defined (NEW_TTY_DRIVER)</span></div>
<div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;<span class="preprocessor">#  if defined (DRAIN_OUTPUT)</span></div>
<div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;      draino (tty, <a class="code" href="../../df/d8e/jobs_8c.html#ad9fe5481268cb2aed5102ece6ef18bbb">shell_tty_info</a>.sg_ospeed);</div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;<span class="preprocessor">#  endif </span><span class="comment">/* DRAIN_OUTPUT */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;      <a class="code" href="../../d3/de9/stropts_8h.html#ae3a230c65883ec8edc50e3a09ca80003">ioctl</a> (tty, <a class="code" href="../../d8/d18/arch_2mips_2bits_2ioctl_8h.html#aa74822fb88335610fc250bbc18c13744">TIOCSETN</a>, &amp;<a class="code" href="../../df/d8e/jobs_8c.html#ad9fe5481268cb2aed5102ece6ef18bbb">shell_tty_info</a>);</div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;      <a class="code" href="../../d3/de9/stropts_8h.html#ae3a230c65883ec8edc50e3a09ca80003">ioctl</a> (tty, <a class="code" href="../../d2/da9/arch_2powerpc_2bits_2ioctl_8h.html#ab40636fd44f921d0230d0082f43b5201">TIOCSETC</a>, &amp;shell_tchars);</div>
<div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;      <a class="code" href="../../d3/de9/stropts_8h.html#ae3a230c65883ec8edc50e3a09ca80003">ioctl</a> (tty, <a class="code" href="../../d8/d18/arch_2mips_2bits_2ioctl_8h.html#a8676e42954a7ecca79952d3976356b5d">TIOCSLTC</a>, &amp;shell_ltchars);</div>
<div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* NEW_TTY_DRIVER */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160; </div>
<div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;<span class="preprocessor">#if defined (TERMIO_TTY_DRIVER)</span></div>
<div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;      <a class="code" href="../../d3/de9/stropts_8h.html#ae3a230c65883ec8edc50e3a09ca80003">ioctl</a> (tty, <a class="code" href="../../d1/d11/arch_2generic_2bits_2ioctl_8h.html#aead7b848642d946a0efa1048021b11c3">TCSETAW</a>, &amp;<a class="code" href="../../df/d8e/jobs_8c.html#ad9fe5481268cb2aed5102ece6ef18bbb">shell_tty_info</a>);</div>
<div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* TERMIO_TTY_DRIVER */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160; </div>
<div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;<span class="preprocessor">#if defined (TERMIOS_TTY_DRIVER)</span></div>
<div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d2/d4e/include_2termios_8h.html#aaa46283af4d7f1b245c66d27c49faf44">tcsetattr</a> (tty, <a class="code" href="../../d3/de9/arch_2generic_2bits_2termios_8h.html#ad147943bddb5fe0a4b5e8cebcdba1596">TCSADRAIN</a>, &amp;<a class="code" href="../../df/d8e/jobs_8c.html#ad9fe5481268cb2aed5102ece6ef18bbb">shell_tty_info</a>) &lt; 0)</div>
<div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;    {</div>
<div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;      <span class="comment">/* Only print an error message if we&#39;re really interactive at</span></div>
<div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;<span class="comment">         this time. */</span></div>
<div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d4f/shell_8c.html#aeb39d5d8ddd4957f1b01720fa0e37e36">interactive</a>)</div>
<div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;        <a class="code" href="../../db/dcc/error_8c.html#a3dc8bd9b2e1ecb245420a3dba9f5e8bd">sys_error</a> (<span class="stringliteral">&quot;[%ld: %d (%d)] tcsetattr&quot;</span>, (<span class="keywordtype">long</span>)<a class="code" href="../../d3/d3a/jobs_8h.html#add1dc6545057b7f1c7f91352536fb060">getpid</a> (), <a class="code" href="../../d5/de8/variables_8c.html#a644037bd2caea16e9fd85350bd488ecf">shell_level</a>, tty);</div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;      <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;    }</div>
<div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* TERMIOS_TTY_DRIVER */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;    }</div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;}</div>
<div class="ttc" id="aarch_2mips_2bits_2ioctl_8h_html_a8676e42954a7ecca79952d3976356b5d"><div class="ttname"><a href="../../d8/d18/arch_2mips_2bits_2ioctl_8h.html#a8676e42954a7ecca79952d3976356b5d">TIOCSLTC</a></div><div class="ttdeci">#define TIOCSLTC</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d18/arch_2mips_2bits_2ioctl_8h_source.html#l00046">ioctl.h:46</a></div></div>
<div class="ttc" id="aarch_2mips_2bits_2ioctl_8h_html_aa74822fb88335610fc250bbc18c13744"><div class="ttname"><a href="../../d8/d18/arch_2mips_2bits_2ioctl_8h.html#aa74822fb88335610fc250bbc18c13744">TIOCSETN</a></div><div class="ttdeci">#define TIOCSETN</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d18/arch_2mips_2bits_2ioctl_8h_source.html#l00056">ioctl.h:56</a></div></div>
<div class="ttc" id="aarch_2powerpc_2bits_2ioctl_8h_html_ab40636fd44f921d0230d0082f43b5201"><div class="ttname"><a href="../../d2/da9/arch_2powerpc_2bits_2ioctl_8h.html#ab40636fd44f921d0230d0082f43b5201">TIOCSETC</a></div><div class="ttdeci">#define TIOCSETC</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/da9/arch_2powerpc_2bits_2ioctl_8h_source.html#l00022">ioctl.h:22</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d3/d3a/jobs_8h.html#add1dc6545057b7f1c7f91352536fb060">getpid()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02467">input_tty</a>, <a class="el" href="../../d6/d4f/shell_8c_source.html#l00139">interactive</a>, <a class="el" href="../../dc/d32/ioctl_8c_source.html#l00128">ioctl()</a>, <a class="el" href="../../d5/de8/variables_8c_source.html#l00171">shell_level</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02416">shell_tty_info</a>, <a class="el" href="../../db/dcc/error_8c_source.html#l00327">sys_error()</a>, <a class="el" href="../../d3/de9/arch_2generic_2bits_2termios_8h_source.html#l00145">TCSADRAIN</a>, <a class="el" href="../../d5/de8/tcsetattr_8c_source.html#l00005">tcsetattr()</a>, <a class="el" href="../../d1/d11/arch_2generic_2bits_2ioctl_8h_source.html#l00017">TCSETAW</a>, <a class="el" href="../../d2/da9/arch_2powerpc_2bits_2ioctl_8h_source.html#l00022">TIOCSETC</a>, <a class="el" href="../../d8/d18/arch_2mips_2bits_2ioctl_8h_source.html#l00056">TIOCSETN</a>, and <a class="el" href="../../d8/d18/arch_2mips_2bits_2ioctl_8h_source.html#l00046">TIOCSLTC</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l03541">start_job()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l02899">wait_for()</a>.</p>

</div>
</div>
<a id="a28bc0018a01c0f1991274a6a2e6d79f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28bc0018a01c0f1991274a6a2e6d79f4">&#9670;&nbsp;</a></span>setjstatus()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void setjstatus </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>j</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l04155">4155</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l04157"></a><span class="lineno"> 4157</span>&#160;{</div>
<div class="line"><a name="l04158"></a><span class="lineno"> 4158</span>&#160;<span class="preprocessor">#if defined (ARRAY_VARS)</span></div>
<div class="line"><a name="l04159"></a><span class="lineno"> 4159</span>&#160;  <span class="keyword">register</span> <span class="keywordtype">int</span> <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>;</div>
<div class="line"><a name="l04160"></a><span class="lineno"> 4160</span>&#160;  <span class="keyword">register</span> <a class="code" href="../../d3/d3a/jobs_8h.html#d8/d20/structprocess">PROCESS</a> *<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>;</div>
<div class="line"><a name="l04161"></a><span class="lineno"> 4161</span>&#160; </div>
<div class="line"><a name="l04162"></a><span class="lineno"> 4162</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> = 1, <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> = <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a>]-&gt;<a class="code" href="../../d6/d90/hush_8c.html#d8/d53/structpipe">pipe</a>; <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;next != <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a>]-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#a7e5648df5ec2f0d459900325c2cc5816">pipe</a>; <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> = <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;next, <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>++)</div>
<div class="line"><a name="l04163"></a><span class="lineno"> 4163</span>&#160;    ;</div>
<div class="line"><a name="l04164"></a><span class="lineno"> 4164</span>&#160;  <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>++;</div>
<div class="line"><a name="l04165"></a><span class="lineno"> 4165</span>&#160;  <span class="keywordflow">if</span> (statsize &lt; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>)</div>
<div class="line"><a name="l04166"></a><span class="lineno"> 4166</span>&#160;    {</div>
<div class="line"><a name="l04167"></a><span class="lineno"> 4167</span>&#160;      pstatuses = (<span class="keywordtype">int</span> *)<a class="code" href="../../db/d0a/tre_8h.html#a40740062faf2d95d4935112447c464ef">xrealloc</a> (pstatuses, <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> * <span class="keyword">sizeof</span> (<span class="keywordtype">int</span>));</div>
<div class="line"><a name="l04168"></a><span class="lineno"> 4168</span>&#160;      statsize = <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>;</div>
<div class="line"><a name="l04169"></a><span class="lineno"> 4169</span>&#160;    }</div>
<div class="line"><a name="l04170"></a><span class="lineno"> 4170</span>&#160;  <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> = 0;</div>
<div class="line"><a name="l04171"></a><span class="lineno"> 4171</span>&#160;  <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> = <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a>]-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#a7e5648df5ec2f0d459900325c2cc5816">pipe</a>;</div>
<div class="line"><a name="l04172"></a><span class="lineno"> 4172</span>&#160;  <span class="keywordflow">do</span></div>
<div class="line"><a name="l04173"></a><span class="lineno"> 4173</span>&#160;    {</div>
<div class="line"><a name="l04174"></a><span class="lineno"> 4174</span>&#160;      pstatuses[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>++] = <a class="code" href="../../df/d8e/jobs_8c.html#ab424b34a1f2efb697ac04e6ae1b67bd9">process_exit_status</a> (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;status);</div>
<div class="line"><a name="l04175"></a><span class="lineno"> 4175</span>&#160;      <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> = <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;next;</div>
<div class="line"><a name="l04176"></a><span class="lineno"> 4176</span>&#160;    }</div>
<div class="line"><a name="l04177"></a><span class="lineno"> 4177</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> != <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a>]-&gt;<a class="code" href="../../d6/d90/hush_8c.html#d8/d53/structpipe">pipe</a>);</div>
<div class="line"><a name="l04178"></a><span class="lineno"> 4178</span>&#160; </div>
<div class="line"><a name="l04179"></a><span class="lineno"> 4179</span>&#160;  pstatuses[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>] = -1;    <span class="comment">/* sentinel */</span></div>
<div class="line"><a name="l04180"></a><span class="lineno"> 4180</span>&#160;  set_pipestatus_array (pstatuses, <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>);</div>
<div class="line"><a name="l04181"></a><span class="lineno"> 4181</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l04182"></a><span class="lineno"> 4182</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dd/d71/gettextP_8h_source.html#l00074">i</a>, <a class="el" href="../../dc/da2/musl_2src_2prng_2random_8c_source.html#l00024">j</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00183">jobs</a>, <a class="el" href="../../d8/d64/glob__loop_8c_source.html#l00031">p</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00122">job::pipe</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02801">process_exit_status()</a>, and <a class="el" href="../../db/d0a/tre_8h_source.html#l00230">xrealloc</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l03980">set_job_status_and_cleanup()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00553">stop_pipeline()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l02899">wait_for()</a>.</p>

</div>
</div>
<a id="a2ff305f4a0cb3c0f7ccb33c71cc2d0d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ff305f4a0cb3c0f7ccb33c71cc2d0d2">&#9670;&nbsp;</a></span>sigchld_handler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d0/dde/rl-callbacktest_8c.html#a2be1284fe65357755b6161a039fb59e4">sighandler</a> sigchld_handler </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sig</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l03741">3741</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03743"></a><span class="lineno"> 3743</span>&#160;{</div>
<div class="line"><a name="l03744"></a><span class="lineno"> 3744</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../d0/d32/dcigettext_8c.html#a58257445f1a929304e537613b62ebb35">n</a>, oerrno;</div>
<div class="line"><a name="l03745"></a><span class="lineno"> 3745</span>&#160; </div>
<div class="line"><a name="l03746"></a><span class="lineno"> 3746</span>&#160;  oerrno = <a class="code" href="../../df/d8e/jobs_8c.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>;</div>
<div class="line"><a name="l03747"></a><span class="lineno"> 3747</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#af213fd428488fc5ae5bbda14bcea275e">REINSTALL_SIGCHLD_HANDLER</a>;</div>
<div class="line"><a name="l03748"></a><span class="lineno"> 3748</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#aa332884f0c3ecd93a329263848b7fa04">sigchld</a>++;</div>
<div class="line"><a name="l03749"></a><span class="lineno"> 3749</span>&#160;  <a class="code" href="../../d0/d32/dcigettext_8c.html#a58257445f1a929304e537613b62ebb35">n</a> = 0;</div>
<div class="line"><a name="l03750"></a><span class="lineno"> 3750</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#af553b22eef984c5245e4eae3e4a36cd5">queue_sigchld</a> == 0)</div>
<div class="line"><a name="l03751"></a><span class="lineno"> 3751</span>&#160;    <a class="code" href="../../d0/d32/dcigettext_8c.html#a58257445f1a929304e537613b62ebb35">n</a> = <a class="code" href="../../df/d8e/jobs_8c.html#a84e054741c4b7e3132b43efce8064090">waitchld</a> (-1, 0);</div>
<div class="line"><a name="l03752"></a><span class="lineno"> 3752</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> = oerrno;</div>
<div class="line"><a name="l03753"></a><span class="lineno"> 3753</span>&#160;  <a class="code" href="../../de/d62/sig_8h.html#afa974fd0e2001758911195599747a2b2">SIGRETURN</a> (<a class="code" href="../../d0/d32/dcigettext_8c.html#a58257445f1a929304e537613b62ebb35">n</a>);</div>
<div class="line"><a name="l03754"></a><span class="lineno"> 3754</span>&#160;}</div>
<div class="ttc" id="ajobs_8c_html_af213fd428488fc5ae5bbda14bcea275e"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#af213fd428488fc5ae5bbda14bcea275e">REINSTALL_SIGCHLD_HANDLER</a></div><div class="ttdeci">#define REINSTALL_SIGCHLD_HANDLER</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l00150">jobs.c:150</a></div></div>
<div class="ttc" id="asig_8h_html_afa974fd0e2001758911195599747a2b2"><div class="ttname"><a href="../../de/d62/sig_8h.html#afa974fd0e2001758911195599747a2b2">SIGRETURN</a></div><div class="ttdeci">#define SIGRETURN(n)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d62/sig_8h_source.html#l00037">sig.h:37</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d8e/jobs_8c.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../d0/d32/dcigettext_8c_source.html#l00441">n</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00318">queue_sigchld</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00150">REINSTALL_SIGCHLD_HANDLER</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00317">sigchld</a>, <a class="el" href="../../de/d62/sig_8h_source.html#l00037">SIGRETURN</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l03764">waitchld()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l04370">initialize_job_control()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l05066">set_sigchld_handler()</a>.</p>

</div>
</div>
<a id="a9da7fe878f86821d72ebb991092f2a13"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9da7fe878f86821d72ebb991092f2a13">&#9670;&nbsp;</a></span>sigcont_sighandler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d0/dde/rl-callbacktest_8c.html#a2be1284fe65357755b6161a039fb59e4">sighandler</a> sigcont_sighandler </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sig</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l04611">4611</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l04613"></a><span class="lineno"> 4613</span>&#160;{</div>
<div class="line"><a name="l04614"></a><span class="lineno"> 4614</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#ab3bf0c468c5caa52e82aa6a68f6a3099">initialize_job_signals</a> ();</div>
<div class="line"><a name="l04615"></a><span class="lineno"> 4615</span>&#160;  <a class="code" href="../../de/d62/sig_8h.html#aefdb4e4f01f2aa4133f26dbabcc8358b">set_signal_handler</a> (<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a024f43063003e753afc6cca1acd6e104">SIGCONT</a>, <a class="code" href="../../df/d8e/jobs_8c.html#a2b18b8d320ae7eae035b6fdc7cf3111a">old_cont</a>);</div>
<div class="line"><a name="l04616"></a><span class="lineno"> 4616</span>&#160;  <a class="code" href="../../d8/da5/musl_2src_2signal_2kill_8c.html#a4539db972bcf3dd8c8b429af0dc3789d">kill</a> (<a class="code" href="../../d3/d3a/jobs_8h.html#add1dc6545057b7f1c7f91352536fb060">getpid</a> (), <a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a024f43063003e753afc6cca1acd6e104">SIGCONT</a>);</div>
<div class="line"><a name="l04617"></a><span class="lineno"> 4617</span>&#160; </div>
<div class="line"><a name="l04618"></a><span class="lineno"> 4618</span>&#160;  <a class="code" href="../../de/d62/sig_8h.html#afa974fd0e2001758911195599747a2b2">SIGRETURN</a> (0);</div>
<div class="line"><a name="l04619"></a><span class="lineno"> 4619</span>&#160;}</div>
<div class="ttc" id="ajobs_8c_html_a2b18b8d320ae7eae035b6fdc7cf3111a"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a2b18b8d320ae7eae035b6fdc7cf3111a">old_cont</a></div><div class="ttdeci">static SigHandler * old_cont</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l00336">jobs.c:336</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d3/d3a/jobs_8h.html#add1dc6545057b7f1c7f91352536fb060">getpid()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04590">initialize_job_signals()</a>, <a class="el" href="../../d8/da5/musl_2src_2signal_2kill_8c_source.html#l00004">kill()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00336">old_cont</a>, <a class="el" href="../../de/d62/sig_8h_source.html#l00043">set_signal_handler</a>, <a class="el" href="../../df/dff/libc_2include_2signal_8h_source.html#l00061">SIGCONT</a>, and <a class="el" href="../../de/d62/sig_8h_source.html#l00037">SIGRETURN</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l04623">sigstop_sighandler()</a>.</p>

</div>
</div>
<a id="aff70c2f626e4ae983bc38f0dc5a375e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff70c2f626e4ae983bc38f0dc5a375e8">&#9670;&nbsp;</a></span>sigstop_sighandler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d0/dde/rl-callbacktest_8c.html#a2be1284fe65357755b6161a039fb59e4">sighandler</a> sigstop_sighandler </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sig</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l04623">4623</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l04625"></a><span class="lineno"> 4625</span>&#160;{</div>
<div class="line"><a name="l04626"></a><span class="lineno"> 4626</span>&#160;  <a class="code" href="../../de/d62/sig_8h.html#aefdb4e4f01f2aa4133f26dbabcc8358b">set_signal_handler</a> (<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#abe65c086e01f0d286b7a785a7e3cdd1a">SIGTSTP</a>, <a class="code" href="../../df/d8e/jobs_8c.html#a2117a3ea7b950d08a1de610d18291bf1">old_tstp</a>);</div>
<div class="line"><a name="l04627"></a><span class="lineno"> 4627</span>&#160;  <a class="code" href="../../de/d62/sig_8h.html#aefdb4e4f01f2aa4133f26dbabcc8358b">set_signal_handler</a> (<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a782864287613e2c5c030411fa9c5e9b1">SIGTTOU</a>, <a class="code" href="../../df/d8e/jobs_8c.html#a6c44b645419b61a2eeab9833fe2abc97">old_ttou</a>);</div>
<div class="line"><a name="l04628"></a><span class="lineno"> 4628</span>&#160;  <a class="code" href="../../de/d62/sig_8h.html#aefdb4e4f01f2aa4133f26dbabcc8358b">set_signal_handler</a> (<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a2c146e34a6b5a78dfba41cded3331181">SIGTTIN</a>, <a class="code" href="../../df/d8e/jobs_8c.html#a0c33b0e2f430ff18bc36dd8fa19c14d1">old_ttin</a>);</div>
<div class="line"><a name="l04629"></a><span class="lineno"> 4629</span>&#160; </div>
<div class="line"><a name="l04630"></a><span class="lineno"> 4630</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#a2b18b8d320ae7eae035b6fdc7cf3111a">old_cont</a> = <a class="code" href="../../de/d62/sig_8h.html#aefdb4e4f01f2aa4133f26dbabcc8358b">set_signal_handler</a> (<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a024f43063003e753afc6cca1acd6e104">SIGCONT</a>, <a class="code" href="../../df/d8e/jobs_8c.html#a9da7fe878f86821d72ebb991092f2a13">sigcont_sighandler</a>);</div>
<div class="line"><a name="l04631"></a><span class="lineno"> 4631</span>&#160; </div>
<div class="line"><a name="l04632"></a><span class="lineno"> 4632</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#a8db3c891f1a77a1b3412544323ae6eb4">give_terminal_to</a> (<a class="code" href="../../df/d8e/jobs_8c.html#a12352dc576f1c23274468beca1ccf916">shell_pgrp</a>, 0);</div>
<div class="line"><a name="l04633"></a><span class="lineno"> 4633</span>&#160; </div>
<div class="line"><a name="l04634"></a><span class="lineno"> 4634</span>&#160;  <a class="code" href="../../d8/da5/musl_2src_2signal_2kill_8c.html#a4539db972bcf3dd8c8b429af0dc3789d">kill</a> (<a class="code" href="../../d3/d3a/jobs_8h.html#add1dc6545057b7f1c7f91352536fb060">getpid</a> (), sig);</div>
<div class="line"><a name="l04635"></a><span class="lineno"> 4635</span>&#160; </div>
<div class="line"><a name="l04636"></a><span class="lineno"> 4636</span>&#160;  <a class="code" href="../../de/d62/sig_8h.html#afa974fd0e2001758911195599747a2b2">SIGRETURN</a> (0);</div>
<div class="line"><a name="l04637"></a><span class="lineno"> 4637</span>&#160;}</div>
<div class="ttc" id="ajobs_8c_html_a9da7fe878f86821d72ebb991092f2a13"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a9da7fe878f86821d72ebb991092f2a13">sigcont_sighandler</a></div><div class="ttdeci">static sighandler sigcont_sighandler(int sig)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l04611">jobs.c:4611</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d3/d3a/jobs_8h.html#add1dc6545057b7f1c7f91352536fb060">getpid()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04641">give_terminal_to()</a>, <a class="el" href="../../d8/da5/musl_2src_2signal_2kill_8c_source.html#l00004">kill()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00336">old_cont</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00335">old_tstp</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00335">old_ttin</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00335">old_ttou</a>, <a class="el" href="../../de/d62/sig_8h_source.html#l00043">set_signal_handler</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00194">shell_pgrp</a>, <a class="el" href="../../df/dff/libc_2include_2signal_8h_source.html#l00061">SIGCONT</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04611">sigcont_sighandler()</a>, <a class="el" href="../../de/d62/sig_8h_source.html#l00037">SIGRETURN</a>, <a class="el" href="../../df/dff/libc_2include_2signal_8h_source.html#l00067">SIGTSTP</a>, <a class="el" href="../../df/dff/libc_2include_2signal_8h_source.html#l00070">SIGTTIN</a>, and <a class="el" href="../../df/dff/libc_2include_2signal_8h_source.html#l00073">SIGTTOU</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l04590">initialize_job_signals()</a>.</p>

</div>
</div>
<a id="abf725a8b0ca073cc1140e9f1d88b0c26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf725a8b0ca073cc1140e9f1d88b0c26">&#9670;&nbsp;</a></span>start_job()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int start_job </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>job</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>foreground</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l03541">3541</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03543"></a><span class="lineno"> 3543</span>&#160;{</div>
<div class="line"><a name="l03544"></a><span class="lineno"> 3544</span>&#160;  <span class="keyword">register</span> <a class="code" href="../../d3/d3a/jobs_8h.html#d8/d20/structprocess">PROCESS</a> *<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>;</div>
<div class="line"><a name="l03545"></a><span class="lineno"> 3545</span>&#160;  <span class="keywordtype">int</span> already_running;</div>
<div class="line"><a name="l03546"></a><span class="lineno"> 3546</span>&#160;  <a class="code" href="../../d8/d90/sigset__t_8h.html#a9140a5882f847f67b8155c759ac6aa05">sigset_t</a> set, oset;</div>
<div class="line"><a name="l03547"></a><span class="lineno"> 3547</span>&#160;  <span class="keywordtype">char</span> *wd, *<a class="code" href="../../df/d19/arpping_8c.html#ac9562ee4ecb3b8aeebeb04656e7e57a9">s</a>;</div>
<div class="line"><a name="l03548"></a><span class="lineno"> 3548</span>&#160;  <span class="keyword">static</span> <a class="code" href="../../d0/d9e/shtty_8h.html#ae9c880f6a41e70ef8258f18fd3345067">TTYSTRUCT</a> save_stty;</div>
<div class="line"><a name="l03549"></a><span class="lineno"> 3549</span>&#160; </div>
<div class="line"><a name="l03550"></a><span class="lineno"> 3550</span>&#160;  <a class="code" href="../../de/d62/sig_8h.html#a37d156f6ab7c2ade277f9a274314d258">BLOCK_CHILD</a> (set, oset);</div>
<div class="line"><a name="l03551"></a><span class="lineno"> 3551</span>&#160; </div>
<div class="line"><a name="l03552"></a><span class="lineno"> 3552</span>&#160;  <span class="keywordflow">if</span> ((<a class="code" href="../../de/d3d/execute__cmd_8c.html#aacb323e3f246975470615959c2d8572e">subshell_environment</a> &amp; <a class="code" href="../../d0/d09/command_8h.html#acaecc6b5540a23a9d1d411add740147a">SUBSHELL_COMSUB</a>) &amp;&amp; (<a class="code" href="../../df/d8e/jobs_8c.html#a4cf043826d84509527bdbcfbd5f68b68">pipeline_pgrp</a> == <a class="code" href="../../df/d8e/jobs_8c.html#a12352dc576f1c23274468beca1ccf916">shell_pgrp</a>))</div>
<div class="line"><a name="l03553"></a><span class="lineno"> 3553</span>&#160;    {</div>
<div class="line"><a name="l03554"></a><span class="lineno"> 3554</span>&#160;      <a class="code" href="../../db/dcc/error_8c.html#a49989edc86219ccae074d1d713294c44">internal_error</a> (<a class="code" href="../../d7/dcd/bashintl_8h.html#a86a239addea586602343007a370bf8ad">_</a>(<span class="stringliteral">&quot;%s: no current jobs&quot;</span>), <a class="code" href="../../d2/d2a/finfo_8c.html#a39f95ee9cfa8c6c082c06fddb31e4461">this_command_name</a>);</div>
<div class="line"><a name="l03555"></a><span class="lineno"> 3555</span>&#160;      <a class="code" href="../../de/d62/sig_8h.html#aa9262558d91ca8060065606f36167783">UNBLOCK_CHILD</a> (oset);</div>
<div class="line"><a name="l03556"></a><span class="lineno"> 3556</span>&#160;      <span class="keywordflow">return</span> (-1);</div>
<div class="line"><a name="l03557"></a><span class="lineno"> 3557</span>&#160;    }</div>
<div class="line"><a name="l03558"></a><span class="lineno"> 3558</span>&#160; </div>
<div class="line"><a name="l03559"></a><span class="lineno"> 3559</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d3/d3a/jobs_8h.html#a15d782ba433bae3ec145926e26c9ea37">DEADJOB</a> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>))</div>
<div class="line"><a name="l03560"></a><span class="lineno"> 3560</span>&#160;    {</div>
<div class="line"><a name="l03561"></a><span class="lineno"> 3561</span>&#160;      <a class="code" href="../../db/dcc/error_8c.html#a49989edc86219ccae074d1d713294c44">internal_error</a> (<a class="code" href="../../d7/dcd/bashintl_8h.html#a86a239addea586602343007a370bf8ad">_</a>(<span class="stringliteral">&quot;%s: job has terminated&quot;</span>), <a class="code" href="../../d2/d2a/finfo_8c.html#a39f95ee9cfa8c6c082c06fddb31e4461">this_command_name</a>);</div>
<div class="line"><a name="l03562"></a><span class="lineno"> 3562</span>&#160;      <a class="code" href="../../de/d62/sig_8h.html#aa9262558d91ca8060065606f36167783">UNBLOCK_CHILD</a> (oset);</div>
<div class="line"><a name="l03563"></a><span class="lineno"> 3563</span>&#160;      <span class="keywordflow">return</span> (-1);</div>
<div class="line"><a name="l03564"></a><span class="lineno"> 3564</span>&#160;    }</div>
<div class="line"><a name="l03565"></a><span class="lineno"> 3565</span>&#160; </div>
<div class="line"><a name="l03566"></a><span class="lineno"> 3566</span>&#160;  already_running = <a class="code" href="../../d3/d3a/jobs_8h.html#abb162c99100e0466ef43cf32884f29e8">RUNNING</a> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>);</div>
<div class="line"><a name="l03567"></a><span class="lineno"> 3567</span>&#160; </div>
<div class="line"><a name="l03568"></a><span class="lineno"> 3568</span>&#160;  <span class="keywordflow">if</span> (foreground == 0 &amp;&amp; already_running)</div>
<div class="line"><a name="l03569"></a><span class="lineno"> 3569</span>&#160;    {</div>
<div class="line"><a name="l03570"></a><span class="lineno"> 3570</span>&#160;      <a class="code" href="../../db/dcc/error_8c.html#a49989edc86219ccae074d1d713294c44">internal_error</a> (<a class="code" href="../../d7/dcd/bashintl_8h.html#a86a239addea586602343007a370bf8ad">_</a>(<span class="stringliteral">&quot;%s: job %d already in background&quot;</span>), <a class="code" href="../../d2/d2a/finfo_8c.html#a39f95ee9cfa8c6c082c06fddb31e4461">this_command_name</a>, <a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a> + 1);</div>
<div class="line"><a name="l03571"></a><span class="lineno"> 3571</span>&#160;      <a class="code" href="../../de/d62/sig_8h.html#aa9262558d91ca8060065606f36167783">UNBLOCK_CHILD</a> (oset);</div>
<div class="line"><a name="l03572"></a><span class="lineno"> 3572</span>&#160;      <span class="keywordflow">return</span> (0);       <span class="comment">/* XPG6/SUSv3 says this is not an error */</span></div>
<div class="line"><a name="l03573"></a><span class="lineno"> 3573</span>&#160;    }</div>
<div class="line"><a name="l03574"></a><span class="lineno"> 3574</span>&#160; </div>
<div class="line"><a name="l03575"></a><span class="lineno"> 3575</span>&#160;  wd = <a class="code" href="../../df/d8e/jobs_8c.html#aa00dc6ac57f419e8d59ff822cc7b51ab">current_working_directory</a> ();</div>
<div class="line"><a name="l03576"></a><span class="lineno"> 3576</span>&#160; </div>
<div class="line"><a name="l03577"></a><span class="lineno"> 3577</span>&#160;  <span class="comment">/* You don&#39;t know about the state of this job.  Do you? */</span></div>
<div class="line"><a name="l03578"></a><span class="lineno"> 3578</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>]-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#af96c169abb39b4b3f9ccce91cb4b17dc">flags</a> &amp;= ~<a class="code" href="../../d3/d3a/jobs_8h.html#ac67735d6cc995bbac83d5efe91a52125">J_NOTIFIED</a>;</div>
<div class="line"><a name="l03579"></a><span class="lineno"> 3579</span>&#160; </div>
<div class="line"><a name="l03580"></a><span class="lineno"> 3580</span>&#160;  <span class="keywordflow">if</span> (foreground)</div>
<div class="line"><a name="l03581"></a><span class="lineno"> 3581</span>&#160;    {</div>
<div class="line"><a name="l03582"></a><span class="lineno"> 3582</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#a418c0d4ef10f2149706710f16d250882">set_current_job</a> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>);</div>
<div class="line"><a name="l03583"></a><span class="lineno"> 3583</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>]-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#af96c169abb39b4b3f9ccce91cb4b17dc">flags</a> |= <a class="code" href="../../d3/d3a/jobs_8h.html#a76354a83b668afadd4704004a84925fc">J_FOREGROUND</a>;</div>
<div class="line"><a name="l03584"></a><span class="lineno"> 3584</span>&#160;    }</div>
<div class="line"><a name="l03585"></a><span class="lineno"> 3585</span>&#160; </div>
<div class="line"><a name="l03586"></a><span class="lineno"> 3586</span>&#160;  <span class="comment">/* Tell the outside world what we&#39;re doing. */</span></div>
<div class="line"><a name="l03587"></a><span class="lineno"> 3587</span>&#160;  <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> = <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>]-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#a7e5648df5ec2f0d459900325c2cc5816">pipe</a>;</div>
<div class="line"><a name="l03588"></a><span class="lineno"> 3588</span>&#160; </div>
<div class="line"><a name="l03589"></a><span class="lineno"> 3589</span>&#160;  <span class="keywordflow">if</span> (foreground == 0)</div>
<div class="line"><a name="l03590"></a><span class="lineno"> 3590</span>&#160;    {</div>
<div class="line"><a name="l03591"></a><span class="lineno"> 3591</span>&#160;      <span class="comment">/* POSIX.2 says `bg&#39; doesn&#39;t give any indication about current or</span></div>
<div class="line"><a name="l03592"></a><span class="lineno"> 3592</span>&#160;<span class="comment">     previous job. */</span></div>
<div class="line"><a name="l03593"></a><span class="lineno"> 3593</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d4f/shell_8c.html#a15b0e48465dfc17e94173c63e10b57cc">posixly_correct</a> == 0)</div>
<div class="line"><a name="l03594"></a><span class="lineno"> 3594</span>&#160;    <a class="code" href="../../df/d19/arpping_8c.html#ac9562ee4ecb3b8aeebeb04656e7e57a9">s</a> = (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a> == <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ab72b09f6f206832a608cd245d513cca5">j_current</a>) ? <span class="stringliteral">&quot;+ &quot;</span>: ((<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a> == <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a10c9a2fa68d7fed880e9f9c5f2b4d7f8">j_previous</a>) ? <span class="stringliteral">&quot;- &quot;</span> : <span class="stringliteral">&quot; &quot;</span>);       </div>
<div class="line"><a name="l03595"></a><span class="lineno"> 3595</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l03596"></a><span class="lineno"> 3596</span>&#160;    <a class="code" href="../../df/d19/arpping_8c.html#ac9562ee4ecb3b8aeebeb04656e7e57a9">s</a> = <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line"><a name="l03597"></a><span class="lineno"> 3597</span>&#160;      <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a> (<span class="stringliteral">&quot;[%d]%s&quot;</span>, <a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a> + 1, <a class="code" href="../../df/d19/arpping_8c.html#ac9562ee4ecb3b8aeebeb04656e7e57a9">s</a>);</div>
<div class="line"><a name="l03598"></a><span class="lineno"> 3598</span>&#160;    }</div>
<div class="line"><a name="l03599"></a><span class="lineno"> 3599</span>&#160; </div>
<div class="line"><a name="l03600"></a><span class="lineno"> 3600</span>&#160;  <span class="keywordflow">do</span></div>
<div class="line"><a name="l03601"></a><span class="lineno"> 3601</span>&#160;    {</div>
<div class="line"><a name="l03602"></a><span class="lineno"> 3602</span>&#160;      <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a> (<span class="stringliteral">&quot;%s%s&quot;</span>,</div>
<div class="line"><a name="l03603"></a><span class="lineno"> 3603</span>&#160;           <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;command ? <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;command : <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l03604"></a><span class="lineno"> 3604</span>&#160;           <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;next != <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>]-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#a7e5648df5ec2f0d459900325c2cc5816">pipe</a>? <span class="stringliteral">&quot; | &quot;</span> : <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l03605"></a><span class="lineno"> 3605</span>&#160;      <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> = <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;next;</div>
<div class="line"><a name="l03606"></a><span class="lineno"> 3606</span>&#160;    }</div>
<div class="line"><a name="l03607"></a><span class="lineno"> 3607</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> != <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>]-&gt;<a class="code" href="../../d6/d90/hush_8c.html#d8/d53/structpipe">pipe</a>);</div>
<div class="line"><a name="l03608"></a><span class="lineno"> 3608</span>&#160; </div>
<div class="line"><a name="l03609"></a><span class="lineno"> 3609</span>&#160;  <span class="keywordflow">if</span> (foreground == 0)</div>
<div class="line"><a name="l03610"></a><span class="lineno"> 3610</span>&#160;    <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a> (<span class="stringliteral">&quot; &amp;&quot;</span>);</div>
<div class="line"><a name="l03611"></a><span class="lineno"> 3611</span>&#160; </div>
<div class="line"><a name="l03612"></a><span class="lineno"> 3612</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d5/db0/dynlink_8c.html#af3054366f27929432795c5ae420a5294">strcmp</a> (wd, <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>]-&gt;wd) != 0)</div>
<div class="line"><a name="l03613"></a><span class="lineno"> 3613</span>&#160;    <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a> (<span class="stringliteral">&quot;   (wd: %s)&quot;</span>, <a class="code" href="../../d1/dca/general_8c.html#a43b9da0ddb47cad720f96dd583609735">polite_directory_format</a> (<a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>]-&gt;wd));</div>
<div class="line"><a name="l03614"></a><span class="lineno"> 3614</span>&#160; </div>
<div class="line"><a name="l03615"></a><span class="lineno"> 3615</span>&#160;  <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a> (<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l03616"></a><span class="lineno"> 3616</span>&#160; </div>
<div class="line"><a name="l03617"></a><span class="lineno"> 3617</span>&#160;  <span class="comment">/* Run the job. */</span></div>
<div class="line"><a name="l03618"></a><span class="lineno"> 3618</span>&#160;  <span class="keywordflow">if</span> (already_running == 0)</div>
<div class="line"><a name="l03619"></a><span class="lineno"> 3619</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#a61bf5bf35899dc2c1e91cd412de1876b">set_job_running</a> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>);</div>
<div class="line"><a name="l03620"></a><span class="lineno"> 3620</span>&#160; </div>
<div class="line"><a name="l03621"></a><span class="lineno"> 3621</span>&#160;  <span class="comment">/* Save the tty settings before we start the job in the foreground. */</span></div>
<div class="line"><a name="l03622"></a><span class="lineno"> 3622</span>&#160;  <span class="keywordflow">if</span> (foreground)</div>
<div class="line"><a name="l03623"></a><span class="lineno"> 3623</span>&#160;    {</div>
<div class="line"><a name="l03624"></a><span class="lineno"> 3624</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#a37d6118360319f23c01a9a326ad32906">get_tty_state</a> ();</div>
<div class="line"><a name="l03625"></a><span class="lineno"> 3625</span>&#160;      save_stty = <a class="code" href="../../df/d8e/jobs_8c.html#ad9fe5481268cb2aed5102ece6ef18bbb">shell_tty_info</a>;</div>
<div class="line"><a name="l03626"></a><span class="lineno"> 3626</span>&#160;      <span class="comment">/* Give the terminal to this job. */</span></div>
<div class="line"><a name="l03627"></a><span class="lineno"> 3627</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d3/d3a/jobs_8h.html#a5cf9a3ee434f914f66cdf9949084d427">IS_JOBCONTROL</a> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>))</div>
<div class="line"><a name="l03628"></a><span class="lineno"> 3628</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#a8db3c891f1a77a1b3412544323ae6eb4">give_terminal_to</a> (<a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>]-&gt;pgrp, 0);</div>
<div class="line"><a name="l03629"></a><span class="lineno"> 3629</span>&#160;    }</div>
<div class="line"><a name="l03630"></a><span class="lineno"> 3630</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l03631"></a><span class="lineno"> 3631</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>]-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#af96c169abb39b4b3f9ccce91cb4b17dc">flags</a> &amp;= ~<a class="code" href="../../d3/d3a/jobs_8h.html#a76354a83b668afadd4704004a84925fc">J_FOREGROUND</a>;</div>
<div class="line"><a name="l03632"></a><span class="lineno"> 3632</span>&#160; </div>
<div class="line"><a name="l03633"></a><span class="lineno"> 3633</span>&#160;  <span class="comment">/* If the job is already running, then don&#39;t bother jump-starting it. */</span></div>
<div class="line"><a name="l03634"></a><span class="lineno"> 3634</span>&#160;  <span class="keywordflow">if</span> (already_running == 0)</div>
<div class="line"><a name="l03635"></a><span class="lineno"> 3635</span>&#160;    {</div>
<div class="line"><a name="l03636"></a><span class="lineno"> 3636</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>]-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#af96c169abb39b4b3f9ccce91cb4b17dc">flags</a> |= <a class="code" href="../../d3/d3a/jobs_8h.html#ac67735d6cc995bbac83d5efe91a52125">J_NOTIFIED</a>;</div>
<div class="line"><a name="l03637"></a><span class="lineno"> 3637</span>&#160;      <a class="code" href="../../d8/d8d/nojobs_8c.html#ac8c6f4edd72509256c94b90c17c95092">killpg</a> (<a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>]-&gt;pgrp, <a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a024f43063003e753afc6cca1acd6e104">SIGCONT</a>);</div>
<div class="line"><a name="l03638"></a><span class="lineno"> 3638</span>&#160;    }</div>
<div class="line"><a name="l03639"></a><span class="lineno"> 3639</span>&#160; </div>
<div class="line"><a name="l03640"></a><span class="lineno"> 3640</span>&#160;  <span class="keywordflow">if</span> (foreground)</div>
<div class="line"><a name="l03641"></a><span class="lineno"> 3641</span>&#160;    {</div>
<div class="line"><a name="l03642"></a><span class="lineno"> 3642</span>&#160;      <a class="code" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a> <a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>;</div>
<div class="line"><a name="l03643"></a><span class="lineno"> 3643</span>&#160;      <span class="keywordtype">int</span> <a class="code" href="../../d7/d63/pleval_8c.html#d7/deb/structst">st</a>;</div>
<div class="line"><a name="l03644"></a><span class="lineno"> 3644</span>&#160; </div>
<div class="line"><a name="l03645"></a><span class="lineno"> 3645</span>&#160;      <a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a> = <a class="code" href="../../df/d8e/jobs_8c.html#a758086bb1f3a53e925371b718b1068ab">find_last_pid</a> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>, 0);</div>
<div class="line"><a name="l03646"></a><span class="lineno"> 3646</span>&#160;      <a class="code" href="../../de/d62/sig_8h.html#aa9262558d91ca8060065606f36167783">UNBLOCK_CHILD</a> (oset);</div>
<div class="line"><a name="l03647"></a><span class="lineno"> 3647</span>&#160;      <a class="code" href="../../d7/d63/pleval_8c.html#d7/deb/structst">st</a> = <a class="code" href="../../df/d8e/jobs_8c.html#aa16d61880057512c4b0d5e127d4cd6bb">wait_for</a> (<a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, 0);</div>
<div class="line"><a name="l03648"></a><span class="lineno"> 3648</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#ad9fe5481268cb2aed5102ece6ef18bbb">shell_tty_info</a> = save_stty;</div>
<div class="line"><a name="l03649"></a><span class="lineno"> 3649</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#ab9dc901cdc105f8060eafdc6301fe2de">set_tty_state</a> ();</div>
<div class="line"><a name="l03650"></a><span class="lineno"> 3650</span>&#160;      <span class="keywordflow">return</span> (<a class="code" href="../../d7/d63/pleval_8c.html#d7/deb/structst">st</a>);</div>
<div class="line"><a name="l03651"></a><span class="lineno"> 3651</span>&#160;    }</div>
<div class="line"><a name="l03652"></a><span class="lineno"> 3652</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l03653"></a><span class="lineno"> 3653</span>&#160;    {</div>
<div class="line"><a name="l03654"></a><span class="lineno"> 3654</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#a8461670b988ab55fb068f3546e2dbceb">reset_current</a> ();</div>
<div class="line"><a name="l03655"></a><span class="lineno"> 3655</span>&#160;      <a class="code" href="../../de/d62/sig_8h.html#aa9262558d91ca8060065606f36167783">UNBLOCK_CHILD</a> (oset);</div>
<div class="line"><a name="l03656"></a><span class="lineno"> 3656</span>&#160;      <span class="keywordflow">return</span> (0);</div>
<div class="line"><a name="l03657"></a><span class="lineno"> 3657</span>&#160;    }</div>
<div class="line"><a name="l03658"></a><span class="lineno"> 3658</span>&#160;}</div>
<div class="ttc" id="afinfo_8c_html_a39f95ee9cfa8c6c082c06fddb31e4461"><div class="ttname"><a href="../../d2/d2a/finfo_8c.html#a39f95ee9cfa8c6c082c06fddb31e4461">this_command_name</a></div><div class="ttdeci">char * this_command_name</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3d/execute__cmd_8c_source.html#l00204">execute_cmd.c:204</a></div></div>
<div class="ttc" id="ajobs_8c_html_aa16d61880057512c4b0d5e127d4cd6bb"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#aa16d61880057512c4b0d5e127d4cd6bb">wait_for</a></div><div class="ttdeci">int wait_for(pid_t pid, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l02899">jobs.c:2899</a></div></div>
<div class="ttc" id="ajobs_8c_html_ab9dc901cdc105f8060eafdc6301fe2de"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#ab9dc901cdc105f8060eafdc6301fe2de">set_tty_state</a></div><div class="ttdeci">int set_tty_state()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l02508">jobs.c:2508</a></div></div>
<div class="ttc" id="alibc_2include_2stdio_8h_html_a98631211a4a8aee62f572375d5b637be"><div class="ttname"><a href="../../dc/d4d/libc_2include_2stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a></div><div class="ttdeci">int printf(const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dae/libc_2src_2print_2printf_8c_source.html#l01554">printf.c:1554</a></div></div>
<div class="ttc" id="apleval_8c_html_d7/deb/structst"><div class="ttname"><a href="../../d7/d63/pleval_8c.html#d7/deb/structst">st</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d63/pleval_8c_source.html#l00026">pleval.c:26</a></div></div>
<div class="ttc" id="ashtty_8h_html_ae9c880f6a41e70ef8258f18fd3345067"><div class="ttname"><a href="../../d0/d9e/shtty_8h.html#ae9c880f6a41e70ef8258f18fd3345067">TTYSTRUCT</a></div><div class="ttdeci">#define TTYSTRUCT</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d9e/shtty_8h_source.html#l00062">shtty.h:62</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/dcd/bashintl_8h_source.html#l00036">_</a>, <a class="el" href="../../de/d62/sig_8h_source.html#l00100">BLOCK_CHILD</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00383">current_working_directory()</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00100">DEADJOB</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02567">find_last_pid()</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00125">job::flags</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02471">get_tty_state()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04641">give_terminal_to()</a>, <a class="el" href="../../db/dcc/error_8c_source.html#l00235">internal_error()</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00116">IS_JOBCONTROL</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00150">jobstats::j_current</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00105">J_FOREGROUND</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00106">J_NOTIFIED</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00151">jobstats::j_previous</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00183">jobs</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00175">js</a>, <a class="el" href="../../d8/d8d/nojobs_8c_source.html#l00057">killpg</a>, <a class="el" href="../../d8/d64/glob__loop_8c_source.html#l00031">p</a>, <a class="el" href="../../d0/d43/mconf_8c_source.html#l00450">pid</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00122">job::pipe</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00203">pipeline_pgrp</a>, <a class="el" href="../../d1/dca/general_8c_source.html#l00903">polite_directory_format()</a>, <a class="el" href="../../d6/d4f/shell_8c_source.html#l00237">posixly_correct</a>, <a class="el" href="../../d1/dae/libc_2src_2print_2printf_8c_source.html#l01554">printf()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l03482">reset_current()</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00099">RUNNING</a>, <a class="el" href="../../df/d19/arpping_8c.html#ac9562ee4ecb3b8aeebeb04656e7e57a9">s</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l03421">set_current_job()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l03516">set_job_running()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02508">set_tty_state()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00194">shell_pgrp</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02416">shell_tty_info</a>, <a class="el" href="../../df/dff/libc_2include_2signal_8h_source.html#l00061">SIGCONT</a>, <a class="el" href="../../d5/db0/dynlink_8c_source.html#l00174">strcmp</a>, <a class="el" href="../../d0/d09/command_8h_source.html#l00122">SUBSHELL_COMSUB</a>, <a class="el" href="../../de/d3d/execute__cmd_8c_source.html#l00250">subshell_environment</a>, <a class="el" href="../../de/d3d/execute__cmd_8c_source.html#l00204">this_command_name</a>, <a class="el" href="../../d0/d9e/shtty_8h_source.html#l00062">TTYSTRUCT</a>, <a class="el" href="../../de/d62/sig_8h_source.html#l00101">UNBLOCK_CHILD</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l02899">wait_for()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d3d/execute__cmd_8c_source.html#l04355">execute_simple_command()</a>.</p>

</div>
</div>
<a id="a718ce465ffb026f4a2b67b4a6eab4761"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a718ce465ffb026f4a2b67b4a6eab4761">&#9670;&nbsp;</a></span>start_pipeline()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void start_pipeline </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00523">523</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;{</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a5efe88eb6aefb268d1259a51812164b2">the_pipeline</a>)</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    {</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#aad2d2f6a2251b71cf26012d046f93d89">cleanup_the_pipeline</a> ();</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;      <span class="comment">/* If job_control == 0, pipeline_pgrp will always be equal to shell_pgrp;</span></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="comment">     if job_control != 0, pipeline_pgrp == shell_pgrp for command and</span></div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<span class="comment">     process substitution, in which case we want it to be the same as</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="comment">     shell_pgrp for the lifetime of this shell instance. */</span></div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a4cf043826d84509527bdbcfbd5f68b68">pipeline_pgrp</a> != <a class="code" href="../../df/d8e/jobs_8c.html#a12352dc576f1c23274468beca1ccf916">shell_pgrp</a>)</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#a4cf043826d84509527bdbcfbd5f68b68">pipeline_pgrp</a> = 0;</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<span class="preprocessor">#if defined (PGRP_PIPE)</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;      <a class="code" href="../../d1/dca/general_8c.html#a15a0132090e9b69be30a74639f45503e">sh_closepipe</a> (pgrp_pipe);</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    }</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160; </div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="preprocessor">#if defined (PGRP_PIPE)</span></div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a3002cbcd4a652dec2c5cef5ff3da446f">job_control</a>)</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    {</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/hush_8c.html#d8/d53/structpipe">pipe</a> (pgrp_pipe) == -1)</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <a class="code" href="../../db/dcc/error_8c.html#a3dc8bd9b2e1ecb245420a3dba9f5e8bd">sys_error</a> (<a class="code" href="../../d7/dcd/bashintl_8h.html#a86a239addea586602343007a370bf8ad">_</a>(<span class="stringliteral">&quot;start_pipeline: pgrp pipe&quot;</span>));</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    }</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;}</div>
<div class="ttc" id="ajobs_8c_html_aad2d2f6a2251b71cf26012d046f93d89"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#aad2d2f6a2251b71cf26012d046f93d89">cleanup_the_pipeline</a></div><div class="ttdeci">void cleanup_the_pipeline()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l00437">jobs.c:437</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/dcd/bashintl_8h_source.html#l00036">_</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00437">cleanup_the_pipeline()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00222">job_control</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00203">pipeline_pgrp</a>, <a class="el" href="../../d1/dca/general_8c_source.html#l00730">sh_closepipe()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00194">shell_pgrp</a>, <a class="el" href="../../db/dcc/error_8c_source.html#l00327">sys_error()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l00219">the_pipeline</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l01680">kill_current_pipeline()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00421">making_children()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l04997">without_job_control()</a>.</p>

</div>
</div>
<a id="a5d4feeb769d599bb634672546e5a19ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d4feeb769d599bb634672546e5a19ff">&#9670;&nbsp;</a></span>stop_making_children()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void stop_making_children </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00431">431</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;{</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#ab73b81916e1b9c693ec186cb41e9f4e5">already_making_children</a> = 0;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d8e/jobs_8c_source.html#l00228">already_making_children</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/d93/subst_8c_source.html#l06919">command_substitute()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01680">kill_current_pipeline()</a>, <a class="el" href="../../d6/ddd/push_8c_source.html#l00042">push_builtin()</a>, <a class="el" href="../../dc/d6f/trap_8c_source.html#l01183">run_debug_trap()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00553">stop_pipeline()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l04997">without_job_control()</a>.</p>

</div>
</div>
<a id="ad569e95d0123bab22a08e7d38a3a06e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad569e95d0123bab22a08e7d38a3a06e1">&#9670;&nbsp;</a></span>stop_pipeline()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int stop_pipeline </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>async</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/d47/fileman_8c.html#dc/d56/structCOMMAND">COMMAND</a> *&#160;</td>
          <td class="paramname"><em>deferred</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00553">553</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;{</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;  <span class="keyword">register</span> <span class="keywordtype">int</span> <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>, <a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a>;</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;  <a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">JOB</a> *newjob;</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;  <a class="code" href="../../d8/d90/sigset__t_8h.html#a9140a5882f847f67b8155c759ac6aa05">sigset_t</a> set, oset;</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160; </div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;  <a class="code" href="../../de/d62/sig_8h.html#a37d156f6ab7c2ade277f9a274314d258">BLOCK_CHILD</a> (set, oset);</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160; </div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;<span class="preprocessor">#if defined (PGRP_PIPE)</span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;  <span class="comment">/* The parent closes the process group synchronization pipe. */</span></div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;  <a class="code" href="../../d1/dca/general_8c.html#a15a0132090e9b69be30a74639f45503e">sh_closepipe</a> (pgrp_pipe);</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160; </div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#a47c393729bc38de011d2422746de634c">cleanup_dead_jobs</a> ();</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160; </div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ad107b5818741c0309ebdb7af7318309e">j_jobslots</a> == 0)</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    {</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ad107b5818741c0309ebdb7af7318309e">j_jobslots</a> = <a class="code" href="../../df/d8e/jobs_8c.html#a47e7841cbc97ed0297e01ff639346405">JOB_SLOTS</a>;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a> = (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">JOB</a> **)<a class="code" href="../../db/d0a/tre_8h.html#a6af5faec3f9662b20ffc9903f923dec0">xmalloc</a> (<a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ad107b5818741c0309ebdb7af7318309e">j_jobslots</a> * sizeof (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">JOB</a> *));</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160; </div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;      <span class="comment">/* Now blank out these new entries. */</span></div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> = 0; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> &lt; <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ad107b5818741c0309ebdb7af7318309e">j_jobslots</a>; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>++)</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>] = (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">JOB</a> *)<a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160; </div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a41979e2d342c40d347381152156fc26d">j_firstj</a> = <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ac29ea4e478fa590943c6f7ae902f3a46">j_lastj</a> = <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a3cd30b59b6ea29dc4d58020e6004d718">j_njobs</a> = 0;</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    }</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160; </div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;  <span class="comment">/* Scan from the last slot backward, looking for the next free one. */</span></div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;  <span class="comment">/* XXX - revisit this interactive assumption */</span></div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;  <span class="comment">/* XXX - this way for now */</span></div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d6/d4f/shell_8c.html#aeb39d5d8ddd4957f1b01720fa0e37e36">interactive</a>)</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    {</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> = <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ad107b5818741c0309ebdb7af7318309e">j_jobslots</a>; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>--)</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> - 1])</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    }</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    {</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;<span class="preprocessor">#if 0</span></div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;      <span class="comment">/* This wraps around, but makes it inconvenient to extend the array */</span></div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> = <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ac29ea4e478fa590943c6f7ae902f3a46">j_lastj</a>+1; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> != <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ac29ea4e478fa590943c6f7ae902f3a46">j_lastj</a>; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>++)</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    {</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> &gt;= <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ad107b5818741c0309ebdb7af7318309e">j_jobslots</a>)</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;        <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> = 0;</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>] == 0)</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    }   </div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> == <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ac29ea4e478fa590943c6f7ae902f3a46">j_lastj</a>)</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;        <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> = <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ad107b5818741c0309ebdb7af7318309e">j_jobslots</a>;</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;      <span class="comment">/* This doesn&#39;t wrap around yet. */</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> = <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ac29ea4e478fa590943c6f7ae902f3a46">j_lastj</a> ? <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ac29ea4e478fa590943c6f7ae902f3a46">j_lastj</a> + 1 : <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ac29ea4e478fa590943c6f7ae902f3a46">j_lastj</a>; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> &lt; <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ad107b5818741c0309ebdb7af7318309e">j_jobslots</a>; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>++)</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>] == 0)</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    }</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160; </div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;  <span class="comment">/* Do we need more room? */</span></div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160; </div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;  <span class="comment">/* First try compaction */</span></div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;  <span class="keywordflow">if</span> ((<a class="code" href="../../d6/d4f/shell_8c.html#ae2c20c1668999fe88f089ad20436f425">interactive_shell</a> == 0 || <a class="code" href="../../de/d3d/execute__cmd_8c.html#aacb323e3f246975470615959c2d8572e">subshell_environment</a>) &amp;&amp; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> == <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ad107b5818741c0309ebdb7af7318309e">j_jobslots</a> &amp;&amp; <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ad107b5818741c0309ebdb7af7318309e">j_jobslots</a> &gt;= <a class="code" href="../../df/d8e/jobs_8c.html#ae73608c2e00c712414d7a3262dbe2a20">MAX_JOBS_IN_ARRAY</a>)</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> = <a class="code" href="../../df/d8e/jobs_8c.html#a9d9dd03ba5aadbebe470c27eae2209da">compact_jobs_list</a> (0);</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160; </div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;  <span class="comment">/* If we can&#39;t compact, reallocate */</span></div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> == <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ad107b5818741c0309ebdb7af7318309e">j_jobslots</a>)</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    {</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ad107b5818741c0309ebdb7af7318309e">j_jobslots</a> += <a class="code" href="../../df/d8e/jobs_8c.html#a47e7841cbc97ed0297e01ff639346405">JOB_SLOTS</a>;</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a> = (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">JOB</a> **)<a class="code" href="../../db/d0a/tre_8h.html#a40740062faf2d95d4935112447c464ef">xrealloc</a> (<a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>, (<a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ad107b5818741c0309ebdb7af7318309e">j_jobslots</a> * sizeof (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">JOB</a> *)));</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160; </div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a> = <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>; <a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a> &lt; <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ad107b5818741c0309ebdb7af7318309e">j_jobslots</a>; <a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a>++)</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a>] = (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">JOB</a> *)<a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    }</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160; </div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;  <span class="comment">/* Add the current pipeline to the job list. */</span></div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a5efe88eb6aefb268d1259a51812164b2">the_pipeline</a>)</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    {</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;      <span class="keyword">register</span> <a class="code" href="../../d3/d3a/jobs_8h.html#d8/d20/structprocess">PROCESS</a> *<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>;</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;      <span class="keywordtype">int</span> any_running, any_stopped, <a class="code" href="../../d0/d32/dcigettext_8c.html#a58257445f1a929304e537613b62ebb35">n</a>;</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160; </div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;      newjob = (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">JOB</a> *)<a class="code" href="../../db/d0a/tre_8h.html#a6af5faec3f9662b20ffc9903f923dec0">xmalloc</a> (<span class="keyword">sizeof</span> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">JOB</a>));</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160; </div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="../../d0/d32/dcigettext_8c.html#a58257445f1a929304e537613b62ebb35">n</a> = 1, <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> = <a class="code" href="../../df/d8e/jobs_8c.html#a5efe88eb6aefb268d1259a51812164b2">the_pipeline</a>; <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;next != <a class="code" href="../../df/d8e/jobs_8c.html#a5efe88eb6aefb268d1259a51812164b2">the_pipeline</a>; <a class="code" href="../../d0/d32/dcigettext_8c.html#a58257445f1a929304e537613b62ebb35">n</a>++, <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> = <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;next)</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    ;</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;      <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;next = (<a class="code" href="../../d3/d3a/jobs_8h.html#d8/d20/structprocess">PROCESS</a> *)<a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;      newjob-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#a7e5648df5ec2f0d459900325c2cc5816">pipe</a> = <a class="code" href="../../d9/d14/general_8h.html#ac95d59c8f9962d7f391cde63f49a17d5">REVERSE_LIST</a> (<a class="code" href="../../df/d8e/jobs_8c.html#a5efe88eb6aefb268d1259a51812164b2">the_pipeline</a>, <a class="code" href="../../d3/d3a/jobs_8h.html#d8/d20/structprocess">PROCESS</a> *);</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> = newjob-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#a7e5648df5ec2f0d459900325c2cc5816">pipe</a>; <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;next; <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> = <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;next)</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    ;</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;      <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;next = newjob-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#a7e5648df5ec2f0d459900325c2cc5816">pipe</a>;</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160; </div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#a5efe88eb6aefb268d1259a51812164b2">the_pipeline</a> = (<a class="code" href="../../d3/d3a/jobs_8h.html#d8/d20/structprocess">PROCESS</a> *)<a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;      newjob-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#a36d8fbcede662cb503c447511b10dabc">pgrp</a> = <a class="code" href="../../df/d8e/jobs_8c.html#a4cf043826d84509527bdbcfbd5f68b68">pipeline_pgrp</a>;</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160; </div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;      <span class="comment">/* Invariant: if the shell is executing a command substitution,</span></div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;<span class="comment">     pipeline_pgrp == shell_pgrp. Other parts of the shell assume this. */</span></div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a4cf043826d84509527bdbcfbd5f68b68">pipeline_pgrp</a> != <a class="code" href="../../df/d8e/jobs_8c.html#a12352dc576f1c23274468beca1ccf916">shell_pgrp</a>)</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#a4cf043826d84509527bdbcfbd5f68b68">pipeline_pgrp</a> = 0;</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160; </div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;      newjob-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#af96c169abb39b4b3f9ccce91cb4b17dc">flags</a> = 0;</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d8/d70/flags_8c.html#a804cc7b0a138e884ca1ff6e8b13ac8e1">pipefail_opt</a>)</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    newjob-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#af96c169abb39b4b3f9ccce91cb4b17dc">flags</a> |= <a class="code" href="../../d3/d3a/jobs_8h.html#ae4b20447946321b09a36e22e696ba9dd">J_PIPEFAIL</a>;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160; </div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;      <span class="comment">/* Flag to see if in another pgrp. */</span></div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a3002cbcd4a652dec2c5cef5ff3da446f">job_control</a>)</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    newjob-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#af96c169abb39b4b3f9ccce91cb4b17dc">flags</a> |= <a class="code" href="../../d3/d3a/jobs_8h.html#a025dcbff75dc6c4c7831b23de0b6fc6e">J_JOBCONTROL</a>;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160; </div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;      <span class="comment">/* Set the state of this pipeline. */</span></div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;      <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> = newjob-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#a7e5648df5ec2f0d459900325c2cc5816">pipe</a>;</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;      any_running = any_stopped = 0;</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;      <span class="keywordflow">do</span></div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    {</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;      any_running |= <a class="code" href="../../d3/d3a/jobs_8h.html#adcdd2eca21a30b7f30b69d21a592a657">PRUNNING</a> (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>);</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;      any_stopped |= <a class="code" href="../../d3/d3a/jobs_8h.html#aa5b9f7ecd789405fb1d6c079865df027">PSTOPPED</a> (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>);</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;      <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> = <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;next;</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    }</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;      <span class="keywordflow">while</span> (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> != newjob-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#a7e5648df5ec2f0d459900325c2cc5816">pipe</a>);</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160; </div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;      newjob-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#a5bee3de4970de999192f8929f926a4fe">state</a> = any_running ? <a class="code" href="../../d3/d3a/jobs_8h.html#a27f134c9d8392fc50ee339c518707f57a1bf5a4892e9bb413f0dc598c6764541b">JRUNNING</a> : (any_stopped ? <a class="code" href="../../d3/d3a/jobs_8h.html#a27f134c9d8392fc50ee339c518707f57a55fea56f3156409573084fce0c920da7">JSTOPPED</a> : <a class="code" href="../../d3/d3a/jobs_8h.html#a27f134c9d8392fc50ee339c518707f57acc7e60ddf9078b1521d1adb70bd16f8b">JDEAD</a>);</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;      newjob-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#ab27dfab9ba607cb3bbdd2b6f2b4e3efc">wd</a> = <a class="code" href="../../df/d8e/jobs_8c.html#a504a46e0a88bc784f96093dc7506e6fa">job_working_directory</a> ();</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;      newjob-&gt;deferred = deferred;</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160; </div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;      newjob-&gt;j_cleanup = (sh_vptrfunc_t *)<a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;      newjob-&gt;cleanarg = (<a class="code" href="../../d4/d0d/hashlib_8h.html#abbf31fec203727613ea15ba47bb8f344">PTR_T</a>) <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160; </div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>] = newjob;</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;      <span class="keywordflow">if</span> (newjob-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#a5bee3de4970de999192f8929f926a4fe">state</a> == <a class="code" href="../../d3/d3a/jobs_8h.html#a27f134c9d8392fc50ee339c518707f57acc7e60ddf9078b1521d1adb70bd16f8b">JDEAD</a> &amp;&amp; (newjob-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#af96c169abb39b4b3f9ccce91cb4b17dc">flags</a> &amp; <a class="code" href="../../d3/d3a/jobs_8h.html#a76354a83b668afadd4704004a84925fc">J_FOREGROUND</a>))</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#a28bc0018a01c0f1991274a6a2e6d79f4">setjstatus</a> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>);</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;      <span class="keywordflow">if</span> (newjob-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#a5bee3de4970de999192f8929f926a4fe">state</a> == <a class="code" href="../../d3/d3a/jobs_8h.html#a27f134c9d8392fc50ee339c518707f57acc7e60ddf9078b1521d1adb70bd16f8b">JDEAD</a>)</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    {</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a9eba978ad89cdb8068837ea21189d4c9">c_reaped</a> += <a class="code" href="../../d0/d32/dcigettext_8c.html#a58257445f1a929304e537613b62ebb35">n</a>; <span class="comment">/* wouldn&#39;t have been done since this was not part of a job */</span></div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a5c5a5b94e26c657b8caef74571c311ec">j_ndead</a>++;</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    }</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a99f41bab1480f94d10a98bddfe502948">c_injobs</a> += <a class="code" href="../../d0/d32/dcigettext_8c.html#a58257445f1a929304e537613b62ebb35">n</a>;</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160; </div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ac29ea4e478fa590943c6f7ae902f3a46">j_lastj</a> = <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>;</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a3cd30b59b6ea29dc4d58020e6004d718">j_njobs</a>++;</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    }</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    newjob = (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">JOB</a> *)<a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160; </div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;  <span class="keywordflow">if</span> (newjob)</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ae904f7592ededb2bf0effc72444aab81">j_lastmade</a> = newjob;</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160; </div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;  <span class="keywordflow">if</span> (async)</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    {</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;      <span class="keywordflow">if</span> (newjob)</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    {</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;      newjob-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#af96c169abb39b4b3f9ccce91cb4b17dc">flags</a> &amp;= ~<a class="code" href="../../d3/d3a/jobs_8h.html#a76354a83b668afadd4704004a84925fc">J_FOREGROUND</a>;</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;      newjob-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#af96c169abb39b4b3f9ccce91cb4b17dc">flags</a> |= <a class="code" href="../../d3/d3a/jobs_8h.html#a0a8c62c503b7b9ef17e86bf823588e38">J_ASYNC</a>;</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#aa7884beee2ac8c9f5da5c93ed57988b5">j_lastasync</a> = newjob;</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    }</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#a8461670b988ab55fb068f3546e2dbceb">reset_current</a> ();</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    }</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    {</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;      <span class="keywordflow">if</span> (newjob)</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    {</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;      newjob-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#af96c169abb39b4b3f9ccce91cb4b17dc">flags</a> |= <a class="code" href="../../d3/d3a/jobs_8h.html#a76354a83b668afadd4704004a84925fc">J_FOREGROUND</a>;</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;      <span class="comment">/*</span></div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;<span class="comment">       *        !!!!! NOTE !!!!!  (chet@po.cwru.edu)</span></div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;<span class="comment">       *</span></div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;<span class="comment">       * The currently-accepted job control wisdom says to set the</span></div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;<span class="comment">       * terminal&#39;s process group n+1 times in an n-step pipeline:</span></div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;<span class="comment">       * once in the parent and once in each child.  This is where</span></div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;<span class="comment">       * the parent gives it away.</span></div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;<span class="comment">       *</span></div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;<span class="comment">       * Don&#39;t give the terminal away if this shell is an asynchronous</span></div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;<span class="comment">       * subshell or if we&#39;re a (presumably non-interactive) shell running</span></div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;<span class="comment">       * in the background.</span></div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;<span class="comment">       *</span></div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;<span class="comment">       */</span></div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a3002cbcd4a652dec2c5cef5ff3da446f">job_control</a> &amp;&amp; newjob-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#a36d8fbcede662cb503c447511b10dabc">pgrp</a> &amp;&amp; (<a class="code" href="../../de/d3d/execute__cmd_8c.html#aacb323e3f246975470615959c2d8572e">subshell_environment</a>&amp;<a class="code" href="../../d0/d09/command_8h.html#abd94aff81c34160c8185303ebe67c539">SUBSHELL_ASYNC</a>) == 0 &amp;&amp; <a class="code" href="../../df/d8e/jobs_8c.html#ad2b44c9005c5a931c29ae6588e237636">running_in_background</a> == 0)</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;        <a class="code" href="../../df/d8e/jobs_8c.html#ade652681afa73d6b7c0b50697d071f83">maybe_give_terminal_to</a> (<a class="code" href="../../df/d8e/jobs_8c.html#a12352dc576f1c23274468beca1ccf916">shell_pgrp</a>, newjob-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#a36d8fbcede662cb503c447511b10dabc">pgrp</a>, 0);</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    }</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    }</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160; </div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#a5d4feeb769d599bb634672546e5a19ff">stop_making_children</a> ();</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;  <a class="code" href="../../de/d62/sig_8h.html#aa9262558d91ca8060065606f36167783">UNBLOCK_CHILD</a> (oset);</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;  <span class="keywordflow">return</span> (newjob ? <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> : <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ab72b09f6f206832a608cd245d513cca5">j_current</a>);</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;}</div>
<div class="ttc" id="aflags_8c_html_a804cc7b0a138e884ca1ff6e8b13ac8e1"><div class="ttname"><a href="../../d8/d70/flags_8c.html#a804cc7b0a138e884ca1ff6e8b13ac8e1">pipefail_opt</a></div><div class="ttdeci">int pipefail_opt</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d70/flags_8c_source.html#l00157">flags.c:157</a></div></div>
<div class="ttc" id="ageneral_8h_html_ac95d59c8f9962d7f391cde63f49a17d5"><div class="ttname"><a href="../../d9/d14/general_8h.html#ac95d59c8f9962d7f391cde63f49a17d5">REVERSE_LIST</a></div><div class="ttdeci">#define REVERSE_LIST(list, type)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d14/general_8h_source.html#l00147">general.h:147</a></div></div>
<div class="ttc" id="ahashlib_8h_html_abbf31fec203727613ea15ba47bb8f344"><div class="ttname"><a href="../../d4/d0d/hashlib_8h.html#abbf31fec203727613ea15ba47bb8f344">PTR_T</a></div><div class="ttdeci">#define PTR_T</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d0d/hashlib_8h_source.html#l00030">hashlib.h:30</a></div></div>
<div class="ttc" id="ajobs_8c_html_a504a46e0a88bc784f96093dc7506e6fa"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a504a46e0a88bc784f96093dc7506e6fa">job_working_directory</a></div><div class="ttdeci">static char * job_working_directory()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l00405">jobs.c:405</a></div></div>
<div class="ttc" id="ajobs_8c_html_a9d9dd03ba5aadbebe470c27eae2209da"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a9d9dd03ba5aadbebe470c27eae2209da">compact_jobs_list</a></div><div class="ttdeci">static int compact_jobs_list(int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l01367">jobs.c:1367</a></div></div>
<div class="ttc" id="ajobs_8c_html_ade652681afa73d6b7c0b50697d071f83"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#ade652681afa73d6b7c0b50697d071f83">maybe_give_terminal_to</a></div><div class="ttdeci">static int maybe_give_terminal_to(pid_t opgrp, pid_t npgrp, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l04683">jobs.c:4683</a></div></div>
<div class="ttc" id="ajobs_8c_html_ae73608c2e00c712414d7a3262dbe2a20"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#ae73608c2e00c712414d7a3262dbe2a20">MAX_JOBS_IN_ARRAY</a></div><div class="ttdeci">#define MAX_JOBS_IN_ARRAY</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l00102">jobs.c:102</a></div></div>
<div class="ttc" id="ajobs_8h_html_a025dcbff75dc6c4c7831b23de0b6fc6e"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#a025dcbff75dc6c4c7831b23de0b6fc6e">J_JOBCONTROL</a></div><div class="ttdeci">#define J_JOBCONTROL</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00107">jobs.h:107</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../de/d62/sig_8h_source.html#l00100">BLOCK_CHILD</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00139">jobstats::c_injobs</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00138">jobstats::c_reaped</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01210">cleanup_dead_jobs()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01367">compact_jobs_list()</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00125">job::flags</a>, <a class="el" href="../../dd/d71/gettextP_8h_source.html#l00074">i</a>, <a class="el" href="../../d6/d4f/shell_8c_source.html#l00139">interactive</a>, <a class="el" href="../../d6/d4f/shell_8c_source.html#l00142">interactive_shell</a>, <a class="el" href="../../dc/da2/musl_2src_2prng_2random_8c_source.html#l00024">j</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00110">J_ASYNC</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00150">jobstats::j_current</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00146">jobstats::j_firstj</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00105">J_FOREGROUND</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00107">J_JOBCONTROL</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00144">jobstats::j_jobslots</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00154">jobstats::j_lastasync</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00145">jobstats::j_lastj</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00153">jobstats::j_lastmade</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00148">jobstats::j_ndead</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00147">jobstats::j_njobs</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00111">J_PIPEFAIL</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00094">JDEAD</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00222">job_control</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00163">JOB_SLOTS</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00405">job_working_directory()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00183">jobs</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00094">JRUNNING</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00175">js</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00094">JSTOPPED</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00102">MAX_JOBS_IN_ARRAY</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04683">maybe_give_terminal_to()</a>, <a class="el" href="../../d0/d32/dcigettext_8c_source.html#l00441">n</a>, <a class="el" href="../../d9/d14/general_8h_source.html#l00053">NULL</a>, <a class="el" href="../../d8/d64/glob__loop_8c_source.html#l00031">p</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00123">job::pgrp</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00122">job::pipe</a>, <a class="el" href="../../d8/d70/flags_8c_source.html#l00157">pipefail_opt</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00203">pipeline_pgrp</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00080">PRUNNING</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00079">PSTOPPED</a>, <a class="el" href="../../d4/d0d/hashlib_8h_source.html#l00030">PTR_T</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l03482">reset_current()</a>, <a class="el" href="../../d9/d14/general_8h_source.html#l00147">REVERSE_LIST</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00225">running_in_background</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04155">setjstatus()</a>, <a class="el" href="../../d1/dca/general_8c_source.html#l00730">sh_closepipe()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00194">shell_pgrp</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00124">job::state</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00431">stop_making_children()</a>, <a class="el" href="../../d0/d09/command_8h_source.html#l00120">SUBSHELL_ASYNC</a>, <a class="el" href="../../de/d3d/execute__cmd_8c_source.html#l00250">subshell_environment</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00219">the_pipeline</a>, <a class="el" href="../../de/d62/sig_8h_source.html#l00101">UNBLOCK_CHILD</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00121">job::wd</a>, <a class="el" href="../../db/d0a/tre_8h_source.html#l00227">xmalloc</a>, and <a class="el" href="../../db/d0a/tre_8h_source.html#l00230">xrealloc</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d3d/execute__cmd_8c_source.html#l00573">execute_command_internal()</a>, <a class="el" href="../../de/d3d/execute__cmd_8c_source.html#l05030">execute_function()</a>, <a class="el" href="../../de/d3d/execute__cmd_8c_source.html#l02496">execute_pipeline()</a>, and <a class="el" href="../../d6/ddd/push_8c_source.html#l00042">push_builtin()</a>.</p>

</div>
</div>
<a id="a30c3edb2b02399d64b5e8eaaf7fe40e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a30c3edb2b02399d64b5e8eaaf7fe40e6">&#9670;&nbsp;</a></span>tcgetpgrp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a> tcgetpgrp </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00358">358</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;{</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  <a class="code" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a> pgrp;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160; </div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  <span class="comment">/* ioctl will handle setting errno correctly. */</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d3/de9/stropts_8h.html#ae3a230c65883ec8edc50e3a09ca80003">ioctl</a> (<a class="code" href="../../d2/db3/hdparm_8c.html#abe821d0fac05333be298917dcb50ee1da1e4d60e5b05464d07a30096747025a42">fd</a>, <a class="code" href="../../d1/d11/arch_2generic_2bits_2ioctl_8h.html#a6f51a92d18937be41ace117366b5fc1e">TIOCGPGRP</a>, &amp;pgrp) &lt; 0)</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <span class="keywordflow">return</span> (-1);</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  <span class="keywordflow">return</span> (pgrp);</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;}</div>
<div class="ttc" id="aarch_2generic_2bits_2ioctl_8h_html_a6f51a92d18937be41ace117366b5fc1e"><div class="ttname"><a href="../../d1/d11/arch_2generic_2bits_2ioctl_8h.html#a6f51a92d18937be41ace117366b5fc1e">TIOCGPGRP</a></div><div class="ttdeci">#define TIOCGPGRP</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d11/arch_2generic_2bits_2ioctl_8h_source.html#l00025">ioctl.h:25</a></div></div>
<div class="ttc" id="ahdparm_8c_html_abe821d0fac05333be298917dcb50ee1da1e4d60e5b05464d07a30096747025a42"><div class="ttname"><a href="../../d2/db3/hdparm_8c.html#abe821d0fac05333be298917dcb50ee1da1e4d60e5b05464d07a30096747025a42">fd</a></div><div class="ttdeci">@ fd</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/hdparm_8c_source.html#l00352">hdparm.c:352</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d2/db3/hdparm_8c_source.html#l00352">fd</a>, <a class="el" href="../../dc/d32/ioctl_8c_source.html#l00128">ioctl()</a>, and <a class="el" href="../../d1/d11/arch_2generic_2bits_2ioctl_8h_source.html#l00025">TIOCGPGRP</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/d90/hush_8c_source.html#l10227">hush_main()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04370">initialize_job_control()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04683">maybe_give_terminal_to()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l04958">set_job_control()</a>.</p>

</div>
</div>
<a id="a56a3393f655f01d7c763be6f034b57b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56a3393f655f01d7c763be6f034b57b7">&#9670;&nbsp;</a></span>terminate_current_pipeline()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void terminate_current_pipeline </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l01632">1632</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;{</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a4cf043826d84509527bdbcfbd5f68b68">pipeline_pgrp</a> &amp;&amp; <a class="code" href="../../df/d8e/jobs_8c.html#a4cf043826d84509527bdbcfbd5f68b68">pipeline_pgrp</a> != <a class="code" href="../../df/d8e/jobs_8c.html#a12352dc576f1c23274468beca1ccf916">shell_pgrp</a>)</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;    {</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;      <a class="code" href="../../d8/d8d/nojobs_8c.html#ac8c6f4edd72509256c94b90c17c95092">killpg</a> (<a class="code" href="../../df/d8e/jobs_8c.html#a4cf043826d84509527bdbcfbd5f68b68">pipeline_pgrp</a>, <a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a682182a5e5f38fd61f4311501e9dac5d">SIGTERM</a>);</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;      <a class="code" href="../../d8/d8d/nojobs_8c.html#ac8c6f4edd72509256c94b90c17c95092">killpg</a> (<a class="code" href="../../df/d8e/jobs_8c.html#a4cf043826d84509527bdbcfbd5f68b68">pipeline_pgrp</a>, <a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a024f43063003e753afc6cca1acd6e104">SIGCONT</a>);</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;    }</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/d8d/nojobs_8c_source.html#l00057">killpg</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00203">pipeline_pgrp</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00194">shell_pgrp</a>, <a class="el" href="../../df/dff/libc_2include_2signal_8h_source.html#l00061">SIGCONT</a>, and <a class="el" href="../../df/dff/libc_2include_2signal_8h_source.html#l00052">SIGTERM</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d3d/execute__cmd_8c_source.html#l02496">execute_pipeline()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l02121">make_child()</a>.</p>

</div>
</div>
<a id="aac172ca161ecd7a5b6baf30e9c239c65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac172ca161ecd7a5b6baf30e9c239c65">&#9670;&nbsp;</a></span>terminate_stopped_jobs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void terminate_stopped_jobs </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l01643">1643</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;{</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;  <span class="keyword">register</span> <span class="keywordtype">int</span> <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>;</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160; </div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;  <span class="comment">/* XXX could use js.j_firstj here */</span></div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> = 0; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> &lt; <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ad107b5818741c0309ebdb7af7318309e">j_jobslots</a>; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>++)</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;    {</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>] &amp;&amp; <a class="code" href="../../d3/d3a/jobs_8h.html#adc39613d1152c030190012a614856c69">STOPPED</a> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>))</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;    {</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;      <a class="code" href="../../d8/d8d/nojobs_8c.html#ac8c6f4edd72509256c94b90c17c95092">killpg</a> (<a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>]-&gt;pgrp, <a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a682182a5e5f38fd61f4311501e9dac5d">SIGTERM</a>);</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;      <a class="code" href="../../d8/d8d/nojobs_8c.html#ac8c6f4edd72509256c94b90c17c95092">killpg</a> (<a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>]-&gt;pgrp, <a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a024f43063003e753afc6cca1acd6e104">SIGCONT</a>);</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;    }</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;    }</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dd/d71/gettextP_8h_source.html#l00074">i</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00144">jobstats::j_jobslots</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00183">jobs</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00175">js</a>, <a class="el" href="../../d8/d8d/nojobs_8c_source.html#l00057">killpg</a>, <a class="el" href="../../df/dff/libc_2include_2signal_8h_source.html#l00061">SIGCONT</a>, <a class="el" href="../../df/dff/libc_2include_2signal_8h_source.html#l00052">SIGTERM</a>, and <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00098">STOPPED</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l05012">end_job_control()</a>.</p>

</div>
</div>
<a id="acc347c3553987b2835c81ebaffd378d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc347c3553987b2835c81ebaffd378d6">&#9670;&nbsp;</a></span>unfreeze_jobs_list()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void unfreeze_jobs_list </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l04943">4943</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l04944"></a><span class="lineno"> 4944</span>&#160;{</div>
<div class="line"><a name="l04945"></a><span class="lineno"> 4945</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#a57e47a8425e68a1907ac493cd673ca41">jobs_list_frozen</a> = 0;</div>
<div class="line"><a name="l04946"></a><span class="lineno"> 4946</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d8e/jobs_8c_source.html#l00346">jobs_list_frozen</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/da3/evalstring_8c_source.html#l00197">parse_and_execute_cleanup()</a>.</p>

</div>
</div>
<a id="aa16d61880057512c4b0d5e127d4cd6bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa16d61880057512c4b0d5e127d4cd6bb">&#9670;&nbsp;</a></span>wait_for()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int wait_for </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a>&#160;</td>
          <td class="paramname"><em>pid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l02899">2899</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;{</div>
<div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>, termination_state, r;</div>
<div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;  <a class="code" href="../../d7/d23/unionwait_8h.html#de/d61/unionwait">WAIT</a> <a class="code" href="../../df/d19/arpping_8c.html#ac9562ee4ecb3b8aeebeb04656e7e57a9">s</a>;</div>
<div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;  <span class="keyword">register</span> <a class="code" href="../../d3/d3a/jobs_8h.html#d8/d20/structprocess">PROCESS</a> *<a class="code" href="../../d1/d0c/posix__spawn_8c.html#a90a7b20363e18ef6ec5f22741c81e375">child</a>;</div>
<div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;  <a class="code" href="../../d8/d90/sigset__t_8h.html#a9140a5882f847f67b8155c759ac6aa05">sigset_t</a> set, oset;</div>
<div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160; </div>
<div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;  <span class="comment">/* In the case that this code is interrupted, and we longjmp () out of it,</span></div>
<div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;<span class="comment">     we are relying on the code in throw_to_top_level () to restore the</span></div>
<div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;<span class="comment">     top-level signal mask. */</span></div>
<div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;  <a class="code" href="../../d3/d16/pstree_8c.html#d6/d07/structchild">child</a> = 0;</div>
<div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;  <a class="code" href="../../de/d62/sig_8h.html#a37d156f6ab7c2ade277f9a274314d258">BLOCK_CHILD</a> (set, oset);</div>
<div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160; </div>
<div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;  <span class="comment">/* Ignore interrupts while waiting for a job run without job control</span></div>
<div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;<span class="comment">     to finish.  We don&#39;t want the shell to exit if an interrupt is</span></div>
<div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;<span class="comment">     received, only if one of the jobs run is killed via SIGINT.  If</span></div>
<div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;<span class="comment">     job control is not set, the job will be run in the same pgrp as</span></div>
<div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;<span class="comment">     the shell, and the shell will see any signals the job gets.  In</span></div>
<div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;<span class="comment">     fact, we want this set every time the waiting shell and the waited-</span></div>
<div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;<span class="comment">     for process are in the same process group, including command</span></div>
<div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;<span class="comment">     substitution. */</span></div>
<div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160; </div>
<div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;  <span class="comment">/* This is possibly a race condition -- should it go in stop_pipeline? */</span></div>
<div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#acc216a9180c7ff0368811af940fe3c4f">wait_sigint_received</a> = <a class="code" href="../../df/d8e/jobs_8c.html#ad3281e6cc7874bc09819bc9f5afad595">child_caught_sigint</a> = 0;</div>
<div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a3002cbcd4a652dec2c5cef5ff3da446f">job_control</a> == 0 || (<a class="code" href="../../de/d3d/execute__cmd_8c.html#aacb323e3f246975470615959c2d8572e">subshell_environment</a>&amp;<a class="code" href="../../d0/d09/command_8h.html#acaecc6b5540a23a9d1d411add740147a">SUBSHELL_COMSUB</a>))</div>
<div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;    {</div>
<div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;      <a class="code" href="../../dd/db7/bash_2lib_2readline_2signals_8c.html#a1f8d6bb6b9aaad1c21141fc327620e99">SigHandler</a> *temp_sigint_handler;</div>
<div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160; </div>
<div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;      temp_sigint_handler = <a class="code" href="../../de/d62/sig_8h.html#aefdb4e4f01f2aa4133f26dbabcc8358b">set_signal_handler</a> (<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a487309e3e9e0527535644115204a639a">SIGINT</a>, <a class="code" href="../../df/d8e/jobs_8c.html#a89ced87614d7f6c88e27c96091684467">wait_sigint_handler</a>);</div>
<div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;      <span class="keywordflow">if</span> (temp_sigint_handler == <a class="code" href="../../df/d8e/jobs_8c.html#a89ced87614d7f6c88e27c96091684467">wait_sigint_handler</a>)</div>
<div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;    <a class="code" href="../../db/dcc/error_8c.html#a419859286a2b95b4a1c8133df4e65e75">internal_debug</a> (<span class="stringliteral">&quot;wait_for: recursively setting old_sigint_handler to wait_sigint_handler: running_trap = %d&quot;</span>, <a class="code" href="../../dc/d6f/trap_8c.html#a9b6de60b5394cd9997c12ffa402bdb76">running_trap</a>);</div>
<div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#ae15b67160f6705f527ba4c23e11e64d3">old_sigint_handler</a> = temp_sigint_handler;</div>
<div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#af3275b044b48a9ba5da272b925ba6d9e">waiting_for_child</a> = 0;</div>
<div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#ae15b67160f6705f527ba4c23e11e64d3">old_sigint_handler</a> == <a class="code" href="../../de/d2b/musl_2include_2signal_8h.html#acf0e499b0ac946b366b4f47a3b3e8b9e">SIG_IGN</a>)</div>
<div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;    <a class="code" href="../../de/d62/sig_8h.html#aefdb4e4f01f2aa4133f26dbabcc8358b">set_signal_handler</a> (<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a487309e3e9e0527535644115204a639a">SIGINT</a>, <a class="code" href="../../df/d8e/jobs_8c.html#ae15b67160f6705f527ba4c23e11e64d3">old_sigint_handler</a>);</div>
<div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;    }</div>
<div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160; </div>
<div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;  termination_state = <a class="code" href="../../d6/ddd/push_8c.html#a6525695256aeef8ca4dfea2a19319c00">last_command_exit_value</a>;</div>
<div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160; </div>
<div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d6/d4f/shell_8c.html#aeb39d5d8ddd4957f1b01720fa0e37e36">interactive</a> &amp;&amp; <a class="code" href="../../df/d8e/jobs_8c.html#a3002cbcd4a652dec2c5cef5ff3da446f">job_control</a> == 0)</div>
<div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;    <a class="code" href="../../dd/d2b/quit_8h.html#ad24e2b54375e12474e65ebf7175988fb">QUIT</a>;</div>
<div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;  <span class="comment">/* Check for terminating signals and exit the shell if we receive one */</span></div>
<div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;  <a class="code" href="../../dd/d2b/quit_8h.html#a68c85871057165f09160a548f0e2246a">CHECK_TERMSIG</a>;</div>
<div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160; </div>
<div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;  <span class="comment">/* Check for a trapped signal interrupting the wait builtin and jump out */</span></div>
<div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;  <a class="code" href="../../dd/d2b/quit_8h.html#a18ba52f9ecddf2113babe44fac797709">CHECK_WAIT_INTR</a>;</div>
<div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160; </div>
<div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;  <span class="comment">/* If we say wait_for (), then we have a record of this child somewhere.</span></div>
<div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;<span class="comment">     If it and none of its peers are running, don&#39;t call waitchld(). */</span></div>
<div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160; </div>
<div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;  <a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a> = <a class="code" href="../../d3/d3a/jobs_8h.html#a6eba094b1ac1bc00e5883edd166bd944">NO_JOB</a>;</div>
<div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;  <span class="keywordflow">do</span></div>
<div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;    {</div>
<div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a> != <a class="code" href="../../d3/d3a/jobs_8h.html#ab583c287aa3595ca5d35ffb3214de135">ANY_PID</a>)</div>
<div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#a6b48ad51922d930d3b692dc8517627d4">FIND_CHILD</a> (<a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, <a class="code" href="../../d3/d16/pstree_8c.html#d6/d07/structchild">child</a>);</div>
<div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160; </div>
<div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;      <span class="comment">/* If this child is part of a job, then we are really waiting for the</span></div>
<div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;<span class="comment">     job to finish.  Otherwise, we are waiting for the child to finish.</span></div>
<div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;<span class="comment">     We check for JDEAD in case the job state has been set by waitchld</span></div>
<div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;<span class="comment">     after receipt of a SIGCHLD. */</span></div>
<div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a> == <a class="code" href="../../d3/d3a/jobs_8h.html#a6eba094b1ac1bc00e5883edd166bd944">NO_JOB</a> &amp;&amp; <a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a> != <a class="code" href="../../d3/d3a/jobs_8h.html#ab583c287aa3595ca5d35ffb3214de135">ANY_PID</a>)  <span class="comment">/* XXX -- &amp;&amp; pid != ANY_PID ? */</span></div>
<div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;    <a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a> = <a class="code" href="../../df/d8e/jobs_8c.html#a99584c8b38b45a70629677a975056374">find_job</a> (<a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, 0, <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160; </div>
<div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;      <span class="comment">/* waitchld() takes care of setting the state of the job.  If the job</span></div>
<div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;<span class="comment">     has already exited before this is called, sigchld_handler will have</span></div>
<div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;<span class="comment">     called waitchld and the state will be set to JDEAD. */</span></div>
<div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160; </div>
<div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a> == <a class="code" href="../../d3/d3a/jobs_8h.html#ab583c287aa3595ca5d35ffb3214de135">ANY_PID</a> || <a class="code" href="../../d3/d3a/jobs_8h.html#adcdd2eca21a30b7f30b69d21a592a657">PRUNNING</a>(<a class="code" href="../../d3/d16/pstree_8c.html#d6/d07/structchild">child</a>) || (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a> != <a class="code" href="../../d3/d3a/jobs_8h.html#a6eba094b1ac1bc00e5883edd166bd944">NO_JOB</a> &amp;&amp; <a class="code" href="../../d3/d3a/jobs_8h.html#abb162c99100e0466ef43cf32884f29e8">RUNNING</a> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>)))</div>
<div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;    {</div>
<div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;      <span class="keywordtype">int</span> old_waiting;</div>
<div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160; </div>
<div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#af553b22eef984c5245e4eae3e4a36cd5">queue_sigchld</a> = 1;</div>
<div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;      old_waiting = <a class="code" href="../../df/d8e/jobs_8c.html#af3275b044b48a9ba5da272b925ba6d9e">waiting_for_child</a>;</div>
<div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#af3275b044b48a9ba5da272b925ba6d9e">waiting_for_child</a> = 1;</div>
<div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;      <span class="comment">/* XXX - probably not strictly necessary but we want to catch</span></div>
<div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;<span class="comment">         everything that happened before we switch the behavior of</span></div>
<div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;<span class="comment">         trap_handler to longjmp on a trapped signal (waiting_for_child) */</span></div>
<div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;      <a class="code" href="../../dd/d2b/quit_8h.html#a18ba52f9ecddf2113babe44fac797709">CHECK_WAIT_INTR</a>;</div>
<div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;      r = <a class="code" href="../../df/d8e/jobs_8c.html#a84e054741c4b7e3132b43efce8064090">waitchld</a> (<a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, 1);    <span class="comment">/* XXX */</span></div>
<div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#af3275b044b48a9ba5da272b925ba6d9e">waiting_for_child</a> = old_waiting;</div>
<div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;<span class="preprocessor">#if 0</span></div>
<div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;itrace(<span class="stringliteral">&quot;wait_for: blocking wait for %d returns %d child = %p&quot;</span>, (<span class="keywordtype">int</span>)<a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, r, <a class="code" href="../../d3/d16/pstree_8c.html#d6/d07/structchild">child</a>);</div>
<div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#af553b22eef984c5245e4eae3e4a36cd5">queue_sigchld</a> = 0;</div>
<div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;      <span class="keywordflow">if</span> (r == -1 &amp;&amp; <a class="code" href="../../df/d8e/jobs_8c.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> == <a class="code" href="../../d7/d8c/libc_2include_2errno_8h.html#a47b42c351e0e011a048058d224205c0f">ECHILD</a> &amp;&amp; <a class="code" href="../../de/da3/bash_2builtins_2common_8c.html#a90f34313402c8392a46af2a5d3147d89">this_shell_builtin</a> == wait_builtin)</div>
<div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;        {</div>
<div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;          termination_state = -1;</div>
<div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;          <span class="comment">/* XXX - restore sigint handler here */</span></div>
<div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;          <a class="code" href="../../df/d8e/jobs_8c.html#abaf052f06c9c04a236219814419b7e83">restore_sigint_handler</a> ();</div>
<div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;          <span class="keywordflow">goto</span> wait_for_return;</div>
<div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;        }</div>
<div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160; </div>
<div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;      <span class="comment">/* If child is marked as running, but waitpid() returns -1/ECHILD,</span></div>
<div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;<span class="comment">         there is something wrong.  Somewhere, wait should have returned</span></div>
<div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;<span class="comment">         that child&#39;s pid.  Mark the child as not running and the job,</span></div>
<div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;<span class="comment">         if it exists, as JDEAD. */</span></div>
<div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;      <span class="keywordflow">if</span> (r == -1 &amp;&amp; <a class="code" href="../../df/d8e/jobs_8c.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> == <a class="code" href="../../d7/d8c/libc_2include_2errno_8h.html#a47b42c351e0e011a048058d224205c0f">ECHILD</a>)</div>
<div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;        {</div>
<div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="../../d3/d16/pstree_8c.html#d6/d07/structchild">child</a>)</div>
<div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;        {</div>
<div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;          <a class="code" href="../../d3/d16/pstree_8c.html#d6/d07/structchild">child</a>-&gt;running = <a class="code" href="../../d3/d3a/jobs_8h.html#ab3f16fed1877b48f617e7b3e8485723d">PS_DONE</a>;</div>
<div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;          <a class="code" href="../../d9/dab/posixwait_8h.html#a369bfd939bb8dd38f7f8813cc7aa3fdb">WSTATUS</a> (<a class="code" href="../../d3/d16/pstree_8c.html#d6/d07/structchild">child</a>-&gt;status) = 0;  <span class="comment">/* XXX -- can&#39;t find true status */</span></div>
<div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;        }</div>
<div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;          <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a62da0e16fcd2ac8946942b8502ed3aef">c_living</a> = 0;      <span class="comment">/* no living child processes */</span></div>
<div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a> != <a class="code" href="../../d3/d3a/jobs_8h.html#a6eba094b1ac1bc00e5883edd166bd944">NO_JOB</a>)</div>
<div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;        {</div>
<div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;          <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>]-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#a5bee3de4970de999192f8929f926a4fe">state</a> = <a class="code" href="../../d3/d3a/jobs_8h.html#a27f134c9d8392fc50ee339c518707f57acc7e60ddf9078b1521d1adb70bd16f8b">JDEAD</a>;</div>
<div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;          <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a9eba978ad89cdb8068837ea21189d4c9">c_reaped</a>++;</div>
<div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;          <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a5c5a5b94e26c657b8caef74571c311ec">j_ndead</a>++;</div>
<div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;        }</div>
<div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a> == <a class="code" href="../../d3/d3a/jobs_8h.html#ab583c287aa3595ca5d35ffb3214de135">ANY_PID</a>)</div>
<div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;        {</div>
<div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;          termination_state = -1;</div>
<div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;        }</div>
<div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;        }</div>
<div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;    }</div>
<div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160; </div>
<div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;      <span class="comment">/* If the shell is interactive, and job control is disabled, see</span></div>
<div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;<span class="comment">     if the foreground process has died due to SIGINT and jump out</span></div>
<div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;<span class="comment">     of the wait loop if it has.  waitchld has already restored the</span></div>
<div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;<span class="comment">     old SIGINT signal handler. */</span></div>
<div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d4f/shell_8c.html#aeb39d5d8ddd4957f1b01720fa0e37e36">interactive</a> &amp;&amp; <a class="code" href="../../df/d8e/jobs_8c.html#a3002cbcd4a652dec2c5cef5ff3da446f">job_control</a> == 0)</div>
<div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;    <a class="code" href="../../dd/d2b/quit_8h.html#ad24e2b54375e12474e65ebf7175988fb">QUIT</a>;</div>
<div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;      <span class="comment">/* Check for terminating signals and exit the shell if we receive one */</span></div>
<div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;      <a class="code" href="../../dd/d2b/quit_8h.html#a68c85871057165f09160a548f0e2246a">CHECK_TERMSIG</a>;</div>
<div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160; </div>
<div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;      <span class="comment">/* Check for a trapped signal interrupting the wait builtin and jump out */</span></div>
<div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;      <a class="code" href="../../dd/d2b/quit_8h.html#a18ba52f9ecddf2113babe44fac797709">CHECK_WAIT_INTR</a>;</div>
<div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160; </div>
<div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a> == <a class="code" href="../../d3/d3a/jobs_8h.html#ab583c287aa3595ca5d35ffb3214de135">ANY_PID</a>)</div>
<div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;    {</div>
<div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;      <span class="comment">/* XXX - could set child but we don&#39;t have a handle on what waitchld</span></div>
<div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;<span class="comment">        reaps.  Leave termination_state alone. */</span></div>
<div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#abaf052f06c9c04a236219814419b7e83">restore_sigint_handler</a> ();</div>
<div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;      <span class="keywordflow">goto</span> wait_for_return;</div>
<div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;    }</div>
<div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;    }</div>
<div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="../../d3/d3a/jobs_8h.html#adcdd2eca21a30b7f30b69d21a592a657">PRUNNING</a> (<a class="code" href="../../d3/d16/pstree_8c.html#d6/d07/structchild">child</a>) || (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a> != <a class="code" href="../../d3/d3a/jobs_8h.html#a6eba094b1ac1bc00e5883edd166bd944">NO_JOB</a> &amp;&amp; <a class="code" href="../../d3/d3a/jobs_8h.html#abb162c99100e0466ef43cf32884f29e8">RUNNING</a> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>)));</div>
<div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160; </div>
<div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;  <span class="comment">/* Restore the original SIGINT signal handler before we return. */</span></div>
<div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#abaf052f06c9c04a236219814419b7e83">restore_sigint_handler</a> ();</div>
<div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160; </div>
<div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;  <span class="comment">/* The exit state of the command is either the termination state of the</span></div>
<div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;<span class="comment">     child, or the termination state of the job.  If a job, the status</span></div>
<div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;<span class="comment">     of the last child in the pipeline is the significant one.  If the command</span></div>
<div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;<span class="comment">     or job was terminated by a signal, note that value also. */</span></div>
<div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;  termination_state = (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a> != <a class="code" href="../../d3/d3a/jobs_8h.html#a6eba094b1ac1bc00e5883edd166bd944">NO_JOB</a>) ? <a class="code" href="../../df/d8e/jobs_8c.html#a997643f3b98ece63e0acd25b30a1b93e">job_exit_status</a> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>)</div>
<div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;                      : (<a class="code" href="../../d3/d16/pstree_8c.html#d6/d07/structchild">child</a> ? <a class="code" href="../../df/d8e/jobs_8c.html#ab424b34a1f2efb697ac04e6ae1b67bd9">process_exit_status</a> (<a class="code" href="../../d3/d16/pstree_8c.html#d6/d07/structchild">child</a>-&gt;status) : <a class="code" href="../../df/d03/shell_8h.html#a24d155899d8cc037505383c1016dbd65">EXECUTION_SUCCESS</a>);</div>
<div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;  <a class="code" href="../../de/d3d/execute__cmd_8c.html#a5719fe068e6db753bf1dbb3832cbac22">last_command_exit_signal</a> = (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a> != <a class="code" href="../../d3/d3a/jobs_8h.html#a6eba094b1ac1bc00e5883edd166bd944">NO_JOB</a>) ? <a class="code" href="../../df/d8e/jobs_8c.html#aa66bc71748a428c3e27ab8271a4459ce">job_exit_signal</a> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>)</div>
<div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;                         : (<a class="code" href="../../d3/d16/pstree_8c.html#d6/d07/structchild">child</a> ? <a class="code" href="../../df/d8e/jobs_8c.html#aa55261d2e8eb934ebde20d623e5e05d2">process_exit_signal</a> (<a class="code" href="../../d3/d16/pstree_8c.html#d6/d07/structchild">child</a>-&gt;status) : 0);</div>
<div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160; </div>
<div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;  <span class="comment">/* XXX */</span></div>
<div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;  <span class="keywordflow">if</span> ((<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a> != <a class="code" href="../../d3/d3a/jobs_8h.html#a6eba094b1ac1bc00e5883edd166bd944">NO_JOB</a> &amp;&amp; <a class="code" href="../../d3/d3a/jobs_8h.html#a466620bfa4ee2d285544d9a67a8a337e">JOBSTATE</a> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>) == <a class="code" href="../../d3/d3a/jobs_8h.html#a27f134c9d8392fc50ee339c518707f57a55fea56f3156409573084fce0c920da7">JSTOPPED</a>) || (<a class="code" href="../../d3/d16/pstree_8c.html#d6/d07/structchild">child</a> &amp;&amp; <a class="code" href="../../d7/d23/unionwait_8h.html#ae2b610235f988f4f3109f02a2f395727">WIFSTOPPED</a> (<a class="code" href="../../d3/d16/pstree_8c.html#d6/d07/structchild">child</a>-&gt;status)))</div>
<div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;    termination_state = 128 + <a class="code" href="../../d7/d23/unionwait_8h.html#a2c6d84ce222454bb6387fc20d930f5b7">WSTOPSIG</a> (<a class="code" href="../../d3/d16/pstree_8c.html#d6/d07/structchild">child</a>-&gt;status);</div>
<div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160; </div>
<div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a> == <a class="code" href="../../d3/d3a/jobs_8h.html#a6eba094b1ac1bc00e5883edd166bd944">NO_JOB</a> || <a class="code" href="../../d3/d3a/jobs_8h.html#a5cf9a3ee434f914f66cdf9949084d427">IS_JOBCONTROL</a> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>))</div>
<div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;    {</div>
<div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;      <span class="comment">/* XXX - under what circumstances is a job not present in the jobs</span></div>
<div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;<span class="comment">     table (job == NO_JOB)?</span></div>
<div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;<span class="comment">        1.  command substitution</span></div>
<div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;<span class="comment">     In the case of command substitution, at least, it&#39;s probably not</span></div>
<div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;<span class="comment">     the right thing to give the terminal to the shell&#39;s process group,</span></div>
<div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;<span class="comment">     even though there is code in subst.c:command_substitute to work</span></div>
<div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;<span class="comment">     around it.</span></div>
<div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;<span class="comment">     Things that don&#39;t:</span></div>
<div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;<span class="comment">        $PROMPT_COMMAND execution</span></div>
<div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;<span class="comment">        process substitution</span></div>
<div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;<span class="comment">       */</span></div>
<div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;<span class="preprocessor">#if 0</span></div>
<div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;<span class="keywordflow">if</span> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a> == <a class="code" href="../../d3/d3a/jobs_8h.html#a6eba094b1ac1bc00e5883edd166bd944">NO_JOB</a>)</div>
<div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;  itrace(<span class="stringliteral">&quot;wait_for: job == NO_JOB, giving the terminal to shell_pgrp (%ld)&quot;</span>, (<span class="keywordtype">long</span>)<a class="code" href="../../df/d8e/jobs_8c.html#a12352dc576f1c23274468beca1ccf916">shell_pgrp</a>);</div>
<div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;      <span class="comment">/* Don&#39;t modify terminal pgrp if we are running in background or a</span></div>
<div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;<span class="comment">     subshell.  Make sure subst.c:command_substitute uses the same</span></div>
<div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;<span class="comment">     conditions to determine whether or not it should undo this and</span></div>
<div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;<span class="comment">     give the terminal to pipeline_pgrp. */</span></div>
<div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;      </div>
<div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;      <span class="keywordflow">if</span> ((<a class="code" href="../../db/d66/dumpkmap_8c.html#abb0829cce9dd20a40ae0d86890ae85c6">flags</a> &amp; <a class="code" href="../../d3/d3a/jobs_8h.html#a452d2e32f1844a8833e04d1177771727">JWAIT_NOTERM</a>) == 0 &amp;&amp; <a class="code" href="../../df/d8e/jobs_8c.html#ad2b44c9005c5a931c29ae6588e237636">running_in_background</a> == 0 &amp;&amp;</div>
<div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;      (<a class="code" href="../../de/d3d/execute__cmd_8c.html#aacb323e3f246975470615959c2d8572e">subshell_environment</a> &amp; (<a class="code" href="../../d0/d09/command_8h.html#abd94aff81c34160c8185303ebe67c539">SUBSHELL_ASYNC</a>|<a class="code" href="../../d0/d09/command_8h.html#a1f4bab590838fd1ce5e0e8a4ba0c6f0b">SUBSHELL_PIPE</a>)) == 0)</div>
<div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#a8db3c891f1a77a1b3412544323ae6eb4">give_terminal_to</a> (<a class="code" href="../../df/d8e/jobs_8c.html#a12352dc576f1c23274468beca1ccf916">shell_pgrp</a>, 0);</div>
<div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;    }</div>
<div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160; </div>
<div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;  <span class="comment">/* If the command did not exit cleanly, or the job is just</span></div>
<div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;<span class="comment">     being stopped, then reset the tty state back to what it</span></div>
<div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;<span class="comment">     was before this command.  Reset the tty state and notify</span></div>
<div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;<span class="comment">     the user of the job termination only if the shell is</span></div>
<div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;<span class="comment">     interactive.  Clean up any dead jobs in either case. */</span></div>
<div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a> != <a class="code" href="../../d3/d3a/jobs_8h.html#a6eba094b1ac1bc00e5883edd166bd944">NO_JOB</a>)</div>
<div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;    {</div>
<div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d4f/shell_8c.html#ae2c20c1668999fe88f089ad20436f425">interactive_shell</a> &amp;&amp; <a class="code" href="../../de/d3d/execute__cmd_8c.html#aacb323e3f246975470615959c2d8572e">subshell_environment</a> == 0)</div>
<div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;    {</div>
<div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;      <span class="comment">/* This used to use `child-&gt;status&#39;.  That&#39;s wrong, however, for</span></div>
<div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;<span class="comment">         pipelines.  `child&#39; is the first process in the pipeline.  It&#39;s</span></div>
<div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;<span class="comment">         likely that the process we want to check for abnormal termination</span></div>
<div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;<span class="comment">         or stopping is the last process in the pipeline, especially if</span></div>
<div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;<span class="comment">         it&#39;s long-lived and the first process is short-lived.  Since we</span></div>
<div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;<span class="comment">         know we have a job here, we can check all the processes in this</span></div>
<div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;<span class="comment">         job&#39;s pipeline and see if one of them stopped or terminated due</span></div>
<div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;<span class="comment">         to a signal.  We might want to change this later to just check</span></div>
<div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;<span class="comment">         the last process in the pipeline.  If no process exits due to a</span></div>
<div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;<span class="comment">         signal, S is left as the status of the last job in the pipeline. */</span></div>
<div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;      <a class="code" href="../../df/d19/arpping_8c.html#ac9562ee4ecb3b8aeebeb04656e7e57a9">s</a> = <a class="code" href="../../df/d8e/jobs_8c.html#a98276db28c5fb03624f84aabe134de90">job_signal_status</a> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>);</div>
<div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160; </div>
<div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d7/d23/unionwait_8h.html#a6953e62fd0dec274a397678d31c344b4">WIFSIGNALED</a> (<a class="code" href="../../df/d19/arpping_8c.html#ac9562ee4ecb3b8aeebeb04656e7e57a9">s</a>) || <a class="code" href="../../d7/d23/unionwait_8h.html#ae2b610235f988f4f3109f02a2f395727">WIFSTOPPED</a> (<a class="code" href="../../df/d19/arpping_8c.html#ac9562ee4ecb3b8aeebeb04656e7e57a9">s</a>))</div>
<div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;        {</div>
<div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;          <a class="code" href="../../df/d8e/jobs_8c.html#ab9dc901cdc105f8060eafdc6301fe2de">set_tty_state</a> ();</div>
<div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160; </div>
<div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;          <span class="comment">/* If the current job was stopped or killed by a signal, and</span></div>
<div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;<span class="comment">         the user has requested it, get a possibly new window size */</span></div>
<div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a27ab938bc70e7696ed8fc9e10a4834c4">check_window_size</a> &amp;&amp; (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a> == <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ab72b09f6f206832a608cd245d513cca5">j_current</a> || <a class="code" href="../../d3/d3a/jobs_8h.html#ae19ce7e46f6caa8b6726dfb0d40e0a1f">IS_FOREGROUND</a> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>)))</div>
<div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;        <a class="code" href="../../d1/d6e/winsize_8c.html#a5a1239248294d975c5ac1b32b8f2bae7">get_new_window_size</a> (0, (<span class="keywordtype">int</span> *)0, (<span class="keywordtype">int</span> *)0);</div>
<div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;        }</div>
<div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;<span class="preprocessor">#if defined (READLINE)</span></div>
<div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;        <span class="comment">/* We don&#39;t want to do this if we are running a process during</span></div>
<div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;<span class="comment">           programmable completion or a command bound to `bind -x&#39;. */</span></div>
<div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d3/d63/readline_8h.html#a325dcb89a1a277576325320d96ded156">RL_ISSTATE</a> (<a class="code" href="../../d3/d63/readline_8h.html#a597032affc174897388bccae2af9d2f1">RL_STATE_COMPLETING</a>|<a class="code" href="../../d3/d63/readline_8h.html#a74c24c362f5a6fd7fc9c1d08291a2842">RL_STATE_DISPATCHING</a>|<a class="code" href="../../d3/d63/readline_8h.html#aacd8928243bcf61bf9ff92716c84f972">RL_STATE_TERMPREPPED</a>) == 0)</div>
<div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;        <a class="code" href="../../df/d8e/jobs_8c.html#a37d6118360319f23c01a9a326ad32906">get_tty_state</a> ();</div>
<div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160; </div>
<div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;      <span class="comment">/* If job control is enabled, the job was started with job</span></div>
<div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;<span class="comment">         control, the job was the foreground job, and it was killed</span></div>
<div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;<span class="comment">         by SIGINT, then print a newline to compensate for the kernel</span></div>
<div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;<span class="comment">         printing the ^C without a trailing newline. */</span></div>
<div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a3002cbcd4a652dec2c5cef5ff3da446f">job_control</a> &amp;&amp; <a class="code" href="../../d3/d3a/jobs_8h.html#a5cf9a3ee434f914f66cdf9949084d427">IS_JOBCONTROL</a> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>) &amp;&amp; <a class="code" href="../../d3/d3a/jobs_8h.html#ae19ce7e46f6caa8b6726dfb0d40e0a1f">IS_FOREGROUND</a> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>) &amp;&amp;</div>
<div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;        <a class="code" href="../../d7/d23/unionwait_8h.html#a6953e62fd0dec274a397678d31c344b4">WIFSIGNALED</a> (<a class="code" href="../../df/d19/arpping_8c.html#ac9562ee4ecb3b8aeebeb04656e7e57a9">s</a>) &amp;&amp; <a class="code" href="../../d7/d23/unionwait_8h.html#aeba4d421572a9d681c73c347f24ad348">WTERMSIG</a> (<a class="code" href="../../df/d19/arpping_8c.html#ac9562ee4ecb3b8aeebeb04656e7e57a9">s</a>) == <a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a487309e3e9e0527535644115204a639a">SIGINT</a>)</div>
<div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;        {</div>
<div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;          <span class="comment">/* If SIGINT is not trapped and the shell is in a for, while,</span></div>
<div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;<span class="comment">         or until loop, act as if the shell received SIGINT as</span></div>
<div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;<span class="comment">         well, so the loop can be broken.  This doesn&#39;t call the</span></div>
<div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;<span class="comment">         SIGINT signal handler; maybe it should. */</span></div>
<div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="../../d5/da5/zread_8c.html#a40264baa053bf7ccf2ef5ca345d6c06d">signal_is_trapped</a> (<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a487309e3e9e0527535644115204a639a">SIGINT</a>) == 0 &amp;&amp; (<a class="code" href="../../df/d28/bash_2builtins_2common_8h.html#ada8a1eb347c01352f22deb4668f24bb6">loop_level</a> || (<a class="code" href="../../df/d03/shell_8h.html#a5474d60edee7e82e47b35345fa4e8ca2">shell_compatibility_level</a> &gt; 32 &amp;&amp; <a class="code" href="../../de/d3d/execute__cmd_8c.html#a2cb744acc87fb33a861757a23f06535f">executing_list</a>)))</div>
<div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;        <a class="code" href="../../dd/d2b/quit_8h.html#abec13a42e3ef174728e46b6dbc4b570f">ADDINTERRUPT</a>;</div>
<div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;          <span class="comment">/* Call any SIGINT trap handler if the shell is running a loop, so</span></div>
<div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;<span class="comment">         the loop can be broken.  This seems more useful and matches the</span></div>
<div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;<span class="comment">         behavior when the shell is running a builtin command in a loop</span></div>
<div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;<span class="comment">         when it is interrupted.  Change ADDINTERRUPT to</span></div>
<div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;<span class="comment">         trap_handler (SIGINT) to run the trap without interrupting the</span></div>
<div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;<span class="comment">         loop. */</span></div>
<div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;          <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/da5/zread_8c.html#a40264baa053bf7ccf2ef5ca345d6c06d">signal_is_trapped</a> (<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a487309e3e9e0527535644115204a639a">SIGINT</a>) &amp;&amp; <a class="code" href="../../df/d28/bash_2builtins_2common_8h.html#ada8a1eb347c01352f22deb4668f24bb6">loop_level</a>)</div>
<div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;        <a class="code" href="../../dd/d2b/quit_8h.html#abec13a42e3ef174728e46b6dbc4b570f">ADDINTERRUPT</a>;</div>
<div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;          <span class="comment">/* If an interactive shell with job control enabled is sourcing</span></div>
<div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;<span class="comment">         a file, allow the interrupt to terminate the file sourcing. */</span></div>
<div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;          <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d6/d4f/shell_8c.html#ae2c20c1668999fe88f089ad20436f425">interactive_shell</a> &amp;&amp; <a class="code" href="../../d5/da5/zread_8c.html#a40264baa053bf7ccf2ef5ca345d6c06d">signal_is_trapped</a> (<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a487309e3e9e0527535644115204a639a">SIGINT</a>) == 0 &amp;&amp; <a class="code" href="../../df/d28/bash_2builtins_2common_8h.html#a1abc92fadae94b5897f4f0144da01eb9">sourcelevel</a>)</div>
<div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;        <a class="code" href="../../dd/d2b/quit_8h.html#abec13a42e3ef174728e46b6dbc4b570f">ADDINTERRUPT</a>;</div>
<div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;        {</div>
<div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;          <a class="code" href="../../d7/dd7/libbb_8h.html#a568f021a83b2c22e1e700d12559d660a">putchar</a> (<span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;          <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#adb974f28765a31026ee6bf71d5175951">fflush</a> (<a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#a0c0ef221f95f64e8632451312fd18cc8">stdout</a>);</div>
<div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;        }</div>
<div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;        }</div>
<div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;    }</div>
<div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code" href="../../de/d3d/execute__cmd_8c.html#aacb323e3f246975470615959c2d8572e">subshell_environment</a> &amp; (<a class="code" href="../../d0/d09/command_8h.html#acaecc6b5540a23a9d1d411add740147a">SUBSHELL_COMSUB</a>|<a class="code" href="../../d0/d09/command_8h.html#a1f4bab590838fd1ce5e0e8a4ba0c6f0b">SUBSHELL_PIPE</a>)) &amp;&amp; <a class="code" href="../../df/d8e/jobs_8c.html#acc216a9180c7ff0368811af940fe3c4f">wait_sigint_received</a>)</div>
<div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;    {</div>
<div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;      <span class="comment">/* If waiting for a job in a subshell started to do command</span></div>
<div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;<span class="comment">         substitution or to run a pipeline element that consists of</span></div>
<div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;<span class="comment">         something like a while loop or a for loop, simulate getting</span></div>
<div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;<span class="comment">         and being killed by the SIGINT to pass the status back to our</span></div>
<div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;<span class="comment">         parent. */</span></div>
<div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#ad3281e6cc7874bc09819bc9f5afad595">child_caught_sigint</a> == 0 &amp;&amp; <a class="code" href="../../d5/da5/zread_8c.html#a40264baa053bf7ccf2ef5ca345d6c06d">signal_is_trapped</a> (<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a487309e3e9e0527535644115204a639a">SIGINT</a>) == 0)</div>
<div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;        {</div>
<div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;          <a class="code" href="../../de/d62/sig_8h.html#aa9262558d91ca8060065606f36167783">UNBLOCK_CHILD</a> (oset);</div>
<div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;          <a class="code" href="../../df/d8e/jobs_8c.html#ae15b67160f6705f527ba4c23e11e64d3">old_sigint_handler</a> = <a class="code" href="../../de/d62/sig_8h.html#aefdb4e4f01f2aa4133f26dbabcc8358b">set_signal_handler</a> (<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a487309e3e9e0527535644115204a639a">SIGINT</a>, <a class="code" href="../../de/d2b/musl_2include_2signal_8h.html#a27d5dc561093d6243542e6a2465bc0f8">SIG_DFL</a>);</div>
<div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#ae15b67160f6705f527ba4c23e11e64d3">old_sigint_handler</a> == <a class="code" href="../../de/d2b/musl_2include_2signal_8h.html#acf0e499b0ac946b366b4f47a3b3e8b9e">SIG_IGN</a>)</div>
<div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;        <a class="code" href="../../df/d8e/jobs_8c.html#abaf052f06c9c04a236219814419b7e83">restore_sigint_handler</a> ();</div>
<div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;        <a class="code" href="../../d8/da5/musl_2src_2signal_2kill_8c.html#a4539db972bcf3dd8c8b429af0dc3789d">kill</a> (<a class="code" href="../../d3/d3a/jobs_8h.html#add1dc6545057b7f1c7f91352536fb060">getpid</a> (), <a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a487309e3e9e0527535644115204a639a">SIGINT</a>);</div>
<div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;        }</div>
<div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;    }</div>
<div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d6/d4f/shell_8c.html#ae2c20c1668999fe88f089ad20436f425">interactive_shell</a> == 0 &amp;&amp; <a class="code" href="../../de/d3d/execute__cmd_8c.html#aacb323e3f246975470615959c2d8572e">subshell_environment</a> == 0 &amp;&amp; <a class="code" href="../../d3/d3a/jobs_8h.html#ae19ce7e46f6caa8b6726dfb0d40e0a1f">IS_FOREGROUND</a> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>))</div>
<div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;    {</div>
<div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;      <a class="code" href="../../df/d19/arpping_8c.html#ac9562ee4ecb3b8aeebeb04656e7e57a9">s</a> = <a class="code" href="../../df/d8e/jobs_8c.html#a98276db28c5fb03624f84aabe134de90">job_signal_status</a> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>);</div>
<div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160; </div>
<div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;      <span class="comment">/* If we are non-interactive, but job control is enabled, and the job</span></div>
<div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;<span class="comment">         died due to SIGINT, pretend we got the SIGINT */</span></div>
<div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a3002cbcd4a652dec2c5cef5ff3da446f">job_control</a> &amp;&amp; <a class="code" href="../../d3/d3a/jobs_8h.html#a5cf9a3ee434f914f66cdf9949084d427">IS_JOBCONTROL</a> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>) &amp;&amp; <a class="code" href="../../d7/d23/unionwait_8h.html#a6953e62fd0dec274a397678d31c344b4">WIFSIGNALED</a> (<a class="code" href="../../df/d19/arpping_8c.html#ac9562ee4ecb3b8aeebeb04656e7e57a9">s</a>) &amp;&amp; <a class="code" href="../../d7/d23/unionwait_8h.html#aeba4d421572a9d681c73c347f24ad348">WTERMSIG</a> (<a class="code" href="../../df/d19/arpping_8c.html#ac9562ee4ecb3b8aeebeb04656e7e57a9">s</a>) == <a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a487309e3e9e0527535644115204a639a">SIGINT</a>)</div>
<div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;        {</div>
<div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;          <a class="code" href="../../dd/d2b/quit_8h.html#abec13a42e3ef174728e46b6dbc4b570f">ADDINTERRUPT</a>; <span class="comment">/* For now */</span></div>
<div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;        }</div>
<div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160; </div>
<div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a27ab938bc70e7696ed8fc9e10a4834c4">check_window_size</a>)</div>
<div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;        <a class="code" href="../../d1/d6e/winsize_8c.html#a5a1239248294d975c5ac1b32b8f2bae7">get_new_window_size</a> (0, (<span class="keywordtype">int</span> *)0, (<span class="keywordtype">int</span> *)0);</div>
<div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;    }</div>
<div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160; </div>
<div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;      <span class="comment">/* Moved here from set_job_status_and_cleanup, which is in the SIGCHLD</span></div>
<div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;<span class="comment">     signal handler path */</span></div>
<div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d3/d3a/jobs_8h.html#a15d782ba433bae3ec145926e26c9ea37">DEADJOB</a> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>) &amp;&amp; <a class="code" href="../../d3/d3a/jobs_8h.html#ae19ce7e46f6caa8b6726dfb0d40e0a1f">IS_FOREGROUND</a> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>) <span class="comment">/*&amp;&amp; subshell_environment == 0*/</span>)</div>
<div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#a28bc0018a01c0f1991274a6a2e6d79f4">setjstatus</a> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>);</div>
<div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160; </div>
<div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;      <span class="comment">/* If this job is dead, notify the user of the status.  If the shell</span></div>
<div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;<span class="comment">     is interactive, this will display a message on the terminal.  If</span></div>
<div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;<span class="comment">     the shell is not interactive, make sure we turn on the notify bit</span></div>
<div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;<span class="comment">     so we don&#39;t get an unwanted message about the job&#39;s termination,</span></div>
<div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;<span class="comment">     and so delete_job really clears the slot in the jobs table. */</span></div>
<div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#adf243013e184887caa6995be05126873">notify_and_cleanup</a> ();</div>
<div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;    }</div>
<div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160; </div>
<div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;wait_for_return:</div>
<div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160; </div>
<div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;  <a class="code" href="../../de/d62/sig_8h.html#aa9262558d91ca8060065606f36167783">UNBLOCK_CHILD</a> (oset);</div>
<div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160; </div>
<div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;  <span class="keywordflow">return</span> (termination_state);</div>
<div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;}</div>
<div class="ttc" id="aexecute__cmd_8c_html_a2cb744acc87fb33a861757a23f06535f"><div class="ttname"><a href="../../de/d3d/execute__cmd_8c.html#a2cb744acc87fb33a861757a23f06535f">executing_list</a></div><div class="ttdeci">int executing_list</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3d/execute__cmd_8c_source.html#l00241">execute_cmd.c:241</a></div></div>
<div class="ttc" id="ajobs_8c_html_a6b48ad51922d930d3b692dc8517627d4"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a6b48ad51922d930d3b692dc8517627d4">FIND_CHILD</a></div><div class="ttdeci">#define FIND_CHILD(pid, child)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l02879">jobs.c:2879</a></div></div>
<div class="ttc" id="ajobs_8c_html_a89ced87614d7f6c88e27c96091684467"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a89ced87614d7f6c88e27c96091684467">wait_sigint_handler</a></div><div class="ttdeci">static sighandler wait_sigint_handler(int sig)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l02750">jobs.c:2750</a></div></div>
<div class="ttc" id="ajobs_8c_html_a98276db28c5fb03624f84aabe134de90"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a98276db28c5fb03624f84aabe134de90">job_signal_status</a></div><div class="ttdeci">static WAIT job_signal_status(int job)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l02813">jobs.c:2813</a></div></div>
<div class="ttc" id="ajobs_8c_html_a997643f3b98ece63e0acd25b30a1b93e"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a997643f3b98ece63e0acd25b30a1b93e">job_exit_status</a></div><div class="ttdeci">int job_exit_status(int job)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l02866">jobs.c:2866</a></div></div>
<div class="ttc" id="ajobs_8c_html_aa66bc71748a428c3e27ab8271a4459ce"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#aa66bc71748a428c3e27ab8271a4459ce">job_exit_signal</a></div><div class="ttdeci">int job_exit_signal(int job)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l02873">jobs.c:2873</a></div></div>
<div class="ttc" id="ajobs_8c_html_adf243013e184887caa6995be05126873"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#adf243013e184887caa6995be05126873">notify_and_cleanup</a></div><div class="ttdeci">void notify_and_cleanup()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l03353">jobs.c:3353</a></div></div>
<div class="ttc" id="ajobs_8h_html_a452d2e32f1844a8833e04d1177771727"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#a452d2e32f1844a8833e04d1177771727">JWAIT_NOTERM</a></div><div class="ttdeci">#define JWAIT_NOTERM</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00048">jobs.h:48</a></div></div>
<div class="ttc" id="ajobs_8h_html_ab583c287aa3595ca5d35ffb3214de135"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#ab583c287aa3595ca5d35ffb3214de135">ANY_PID</a></div><div class="ttdeci">#define ANY_PID</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00200">jobs.h:200</a></div></div>
<div class="ttc" id="alibbb_8h_html_a568f021a83b2c22e1e700d12559d660a"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#a568f021a83b2c22e1e700d12559d660a">putchar</a></div><div class="ttdeci">#define putchar(c)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dd7/libbb_8h_source.html#l00227">libbb.h:227</a></div></div>
<div class="ttc" id="alibc_2include_2errno_8h_html_a47b42c351e0e011a048058d224205c0f"><div class="ttname"><a href="../../d7/d8c/libc_2include_2errno_8h.html#a47b42c351e0e011a048058d224205c0f">ECHILD</a></div><div class="ttdeci">#define ECHILD</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d8c/libc_2include_2errno_8h_source.html#l00013">errno.h:13</a></div></div>
<div class="ttc" id="aquit_8h_html_a18ba52f9ecddf2113babe44fac797709"><div class="ttname"><a href="../../dd/d2b/quit_8h.html#a18ba52f9ecddf2113babe44fac797709">CHECK_WAIT_INTR</a></div><div class="ttdeci">#define CHECK_WAIT_INTR</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d2b/quit_8h_source.html#l00060">quit.h:60</a></div></div>
<div class="ttc" id="aquit_8h_html_abec13a42e3ef174728e46b6dbc4b570f"><div class="ttname"><a href="../../dd/d2b/quit_8h.html#abec13a42e3ef174728e46b6dbc4b570f">ADDINTERRUPT</a></div><div class="ttdeci">#define ADDINTERRUPT</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d2b/quit_8h_source.html#l00044">quit.h:44</a></div></div>
<div class="ttc" id="aquit_8h_html_ad24e2b54375e12474e65ebf7175988fb"><div class="ttname"><a href="../../dd/d2b/quit_8h.html#ad24e2b54375e12474e65ebf7175988fb">QUIT</a></div><div class="ttdeci">#define QUIT</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d2b/quit_8h_source.html#l00035">quit.h:35</a></div></div>
<div class="ttc" id="areadline_8h_html_a325dcb89a1a277576325320d96ded156"><div class="ttname"><a href="../../d3/d63/readline_8h.html#a325dcb89a1a277576325320d96ded156">RL_ISSTATE</a></div><div class="ttdeci">#define RL_ISSTATE(x)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d63/readline_8h_source.html#l00929">readline.h:929</a></div></div>
<div class="ttc" id="areadline_8h_html_a597032affc174897388bccae2af9d2f1"><div class="ttname"><a href="../../d3/d63/readline_8h.html#a597032affc174897388bccae2af9d2f1">RL_STATE_COMPLETING</a></div><div class="ttdeci">#define RL_STATE_COMPLETING</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d63/readline_8h_source.html#l00911">readline.h:911</a></div></div>
<div class="ttc" id="areadline_8h_html_a74c24c362f5a6fd7fc9c1d08291a2842"><div class="ttname"><a href="../../d3/d63/readline_8h.html#a74c24c362f5a6fd7fc9c1d08291a2842">RL_STATE_DISPATCHING</a></div><div class="ttdeci">#define RL_STATE_DISPATCHING</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d63/readline_8h_source.html#l00902">readline.h:902</a></div></div>
<div class="ttc" id="areadline_8h_html_aacd8928243bcf61bf9ff92716c84f972"><div class="ttname"><a href="../../d3/d63/readline_8h.html#aacd8928243bcf61bf9ff92716c84f972">RL_STATE_TERMPREPPED</a></div><div class="ttdeci">#define RL_STATE_TERMPREPPED</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d63/readline_8h_source.html#l00899">readline.h:899</a></div></div>
<div class="ttc" id="ashell_8h_html_a5474d60edee7e82e47b35345fa4e8ca2"><div class="ttname"><a href="../../df/d03/shell_8h.html#a5474d60edee7e82e47b35345fa4e8ca2">shell_compatibility_level</a></div><div class="ttdeci">int shell_compatibility_level</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d15/apps_2base_2bash_2version_8c_source.html#l00050">version.c:50</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dd/d2b/quit_8h_source.html#l00044">ADDINTERRUPT</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00200">ANY_PID</a>, <a class="el" href="../../de/d62/sig_8h_source.html#l00100">BLOCK_CHILD</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00137">jobstats::c_living</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00138">jobstats::c_reaped</a>, <a class="el" href="../../dd/d2b/quit_8h_source.html#l00052">CHECK_TERMSIG</a>, <a class="el" href="../../dd/d2b/quit_8h_source.html#l00060">CHECK_WAIT_INTR</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00232">check_window_size</a>, <a class="el" href="../../d1/d0c/posix__spawn_8c_source.html#l00031">child()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02722">child_caught_sigint</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00100">DEADJOB</a>, <a class="el" href="../../d7/d8c/libc_2include_2errno_8h_source.html#l00013">ECHILD</a>, <a class="el" href="../../df/d8e/jobs_8c.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../de/d3d/execute__cmd_8c_source.html#l00241">executing_list</a>, <a class="el" href="../../df/d03/shell_8h_source.html#l00053">EXECUTION_SUCCESS</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00085">fflush()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02879">FIND_CHILD</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01764">find_job()</a>, <a class="el" href="../../db/d66/dumpkmap_8c.html#abb0829cce9dd20a40ae0d86890ae85c6">flags</a>, <a class="el" href="../../d1/d6e/winsize_8c_source.html#l00081">get_new_window_size()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02471">get_tty_state()</a>, <a class="el" href="../../d3/d3a/jobs_8h.html#add1dc6545057b7f1c7f91352536fb060">getpid()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04641">give_terminal_to()</a>, <a class="el" href="../../d6/d4f/shell_8c_source.html#l00139">interactive</a>, <a class="el" href="../../d6/d4f/shell_8c_source.html#l00142">interactive_shell</a>, <a class="el" href="../../db/dcc/error_8c_source.html#l00301">internal_debug()</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00114">IS_FOREGROUND</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00116">IS_JOBCONTROL</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00150">jobstats::j_current</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00148">jobstats::j_ndead</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00094">JDEAD</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00222">job_control</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02873">job_exit_signal()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02866">job_exit_status()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02813">job_signal_status()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00183">jobs</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00095">JOBSTATE</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00175">js</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00094">JSTOPPED</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00048">JWAIT_NOTERM</a>, <a class="el" href="../../d8/da5/musl_2src_2signal_2kill_8c_source.html#l00004">kill()</a>, <a class="el" href="../../de/d3d/execute__cmd_8c_source.html#l00221">last_command_exit_signal</a>, <a class="el" href="../../de/d3d/execute__cmd_8c_source.html#l00217">last_command_exit_value</a>, <a class="el" href="../../df/d28/bash_2builtins_2common_8h.html#ada8a1eb347c01352f22deb4668f24bb6">loop_level</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00193">NO_JOB</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l03353">notify_and_cleanup()</a>, <a class="el" href="../../d9/d14/general_8h_source.html#l00053">NULL</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02719">old_sigint_handler</a>, <a class="el" href="../../d0/d43/mconf_8c_source.html#l00450">pid</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02794">process_exit_signal()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02801">process_exit_status()</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00080">PRUNNING</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00058">PS_DONE</a>, <a class="el" href="../../d7/dd7/libbb_8h_source.html#l00227">putchar</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00318">queue_sigchld</a>, <a class="el" href="../../dd/d2b/quit_8h_source.html#l00035">QUIT</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02736">restore_sigint_handler()</a>, <a class="el" href="../../d3/d63/readline_8h_source.html#l00929">RL_ISSTATE</a>, <a class="el" href="../../d3/d63/readline_8h_source.html#l00911">RL_STATE_COMPLETING</a>, <a class="el" href="../../d3/d63/readline_8h_source.html#l00902">RL_STATE_DISPATCHING</a>, <a class="el" href="../../d3/d63/readline_8h_source.html#l00899">RL_STATE_TERMPREPPED</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00099">RUNNING</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00225">running_in_background</a>, <a class="el" href="../../dc/d6f/trap_8c_source.html#l00114">running_trap</a>, <a class="el" href="../../df/d19/arpping_8c.html#ac9562ee4ecb3b8aeebeb04656e7e57a9">s</a>, <a class="el" href="../../de/d62/sig_8h_source.html#l00043">set_signal_handler</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02508">set_tty_state()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04155">setjstatus()</a>, <a class="el" href="../../da/d15/apps_2base_2bash_2version_8c_source.html#l00050">shell_compatibility_level</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00194">shell_pgrp</a>, <a class="el" href="../../de/d2b/musl_2include_2signal_8h_source.html#l00284">SIG_DFL</a>, <a class="el" href="../../de/d2b/musl_2include_2signal_8h_source.html#l00285">SIG_IGN</a>, <a class="el" href="../../df/dff/libc_2include_2signal_8h_source.html#l00013">SIGINT</a>, <a class="el" href="../../dc/d6f/trap_8c_source.html#l01503">signal_is_trapped()</a>, <a class="el" href="../../d3/d85/evalfile_8c_source.html#l00073">sourcelevel</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00124">job::state</a>, <a class="el" href="../../dc/d4d/libc_2include_2stdio_8h_source.html#l00057">stdout</a>, <a class="el" href="../../d0/d09/command_8h_source.html#l00120">SUBSHELL_ASYNC</a>, <a class="el" href="../../d0/d09/command_8h_source.html#l00122">SUBSHELL_COMSUB</a>, <a class="el" href="../../de/d3d/execute__cmd_8c_source.html#l00250">subshell_environment</a>, <a class="el" href="../../d0/d09/command_8h_source.html#l00124">SUBSHELL_PIPE</a>, <a class="el" href="../../de/da3/bash_2builtins_2common_8c_source.html#l00075">this_shell_builtin</a>, <a class="el" href="../../de/d62/sig_8h_source.html#l00101">UNBLOCK_CHILD</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02750">wait_sigint_handler()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02721">wait_sigint_received</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l03764">waitchld()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02724">waiting_for_child</a>, <a class="el" href="../../d7/d23/unionwait_8h_source.html#l00091">WIFSIGNALED</a>, <a class="el" href="../../d7/d23/unionwait_8h_source.html#l00089">WIFSTOPPED</a>, <a class="el" href="../../d9/dab/posixwait_8h_source.html#l00039">WSTATUS</a>, <a class="el" href="../../d7/d23/unionwait_8h_source.html#l00094">WSTOPSIG</a>, and <a class="el" href="../../d7/d23/unionwait_8h_source.html#l00093">WTERMSIG</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/d93/subst_8c_source.html#l06919">command_substitute()</a>, <a class="el" href="../../de/d3d/execute__cmd_8c_source.html#l00573">execute_command_internal()</a>, <a class="el" href="../../de/d3d/execute__cmd_8c_source.html#l02496">execute_pipeline()</a>, <a class="el" href="../../d6/ddd/push_8c_source.html#l00042">push_builtin()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l03541">start_job()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l03269">wait_for_any_job()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l03215">wait_for_job()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l02586">wait_for_single_pid()</a>.</p>

</div>
</div>
<a id="acefcaa25eb74ccbb6df628c760cde11a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acefcaa25eb74ccbb6df628c760cde11a">&#9670;&nbsp;</a></span>wait_for_any_job()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int wait_for_any_job </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d1/dbe/ash_8c.html#d3/d9e/structprocstat">procstat</a> *&#160;</td>
          <td class="paramname"><em>ps</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l03269">3269</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160;{</div>
<div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;  <a class="code" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a> <a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>;</div>
<div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>, r;</div>
<div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;  <a class="code" href="../../d8/d90/sigset__t_8h.html#a9140a5882f847f67b8155c759ac6aa05">sigset_t</a> set, oset;</div>
<div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160; </div>
<div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a57e47a8425e68a1907ac493cd673ca41">jobs_list_frozen</a>)</div>
<div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160;    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160; </div>
<div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;  <span class="comment">/* First see if there are any unnotified dead jobs that we can report on */</span></div>
<div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160;  <a class="code" href="../../de/d62/sig_8h.html#a37d156f6ab7c2ade277f9a274314d258">BLOCK_CHILD</a> (set, oset);</div>
<div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> = 0; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> &lt; <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ad107b5818741c0309ebdb7af7318309e">j_jobslots</a>; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>++)</div>
<div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160;    {</div>
<div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;      <span class="keywordflow">if</span> ((<a class="code" href="../../db/d66/dumpkmap_8c.html#abb0829cce9dd20a40ae0d86890ae85c6">flags</a> &amp; <a class="code" href="../../d3/d3a/jobs_8h.html#a0373a58aeb632b2a7aede6d031dd21a1">JWAIT_WAITING</a>) &amp;&amp; <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>] &amp;&amp; <a class="code" href="../../d3/d3a/jobs_8h.html#af107a2868a0f25dc73a04592e7480196">IS_WAITING</a> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>) == 0)</div>
<div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160;    <span class="keywordflow">continue</span>;       <span class="comment">/* if we don&#39;t want it, skip it */</span></div>
<div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>] &amp;&amp; <a class="code" href="../../d3/d3a/jobs_8h.html#a15d782ba433bae3ec145926e26c9ea37">DEADJOB</a> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>) &amp;&amp; <a class="code" href="../../d3/d3a/jobs_8h.html#a264330cfc7dfcc3a68791098619b1b10">IS_NOTIFIED</a> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>) == 0)</div>
<div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160;    {</div>
<div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;return_job:</div>
<div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;      r = <a class="code" href="../../df/d8e/jobs_8c.html#a997643f3b98ece63e0acd25b30a1b93e">job_exit_status</a> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>);</div>
<div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160;      <a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a> = <a class="code" href="../../df/d8e/jobs_8c.html#a758086bb1f3a53e925371b718b1068ab">find_last_pid</a> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>, 0);</div>
<div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;      <span class="keywordflow">if</span> (ps)</div>
<div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;        {</div>
<div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160;          ps-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#af09e6fefb632493d1b89497880b49425">pid</a> = <a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>;</div>
<div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;          ps-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#af5b6f282bc378b9165ce3ebb958784af">status</a> = r;</div>
<div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;        }</div>
<div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#a4d9c4222b40edc2f52cb70d3df978b22">notify_of_job_status</a> ();      <span class="comment">/* XXX */</span></div>
<div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#ae6f3e928efd8e712697fe9c5903b7610">delete_job</a> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>, 0);</div>
<div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;<span class="preprocessor">#if defined (COPROCESS_SUPPORT)</span></div>
<div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160;      coproc_reap ();</div>
<div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160;      <a class="code" href="../../de/d62/sig_8h.html#aa9262558d91ca8060065606f36167783">UNBLOCK_CHILD</a> (oset);</div>
<div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160;      <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160;    }</div>
<div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160;    }</div>
<div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;  <a class="code" href="../../de/d62/sig_8h.html#aa9262558d91ca8060065606f36167783">UNBLOCK_CHILD</a> (oset);</div>
<div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160; </div>
<div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160;  <span class="comment">/* At this point, we have no dead jobs in the jobs table.  Wait until we</span></div>
<div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;<span class="comment">     get one, even if it takes multiple pids exiting. */</span></div>
<div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;  <span class="keywordflow">for</span> (;;)</div>
<div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160;    {</div>
<div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160;      <span class="comment">/* Make sure there is a background job to wait for */</span></div>
<div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160;      <a class="code" href="../../de/d62/sig_8h.html#a37d156f6ab7c2ade277f9a274314d258">BLOCK_CHILD</a> (set, oset);</div>
<div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> = 0; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> &lt; <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ad107b5818741c0309ebdb7af7318309e">j_jobslots</a>; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>++)</div>
<div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>] &amp;&amp; <a class="code" href="../../d3/d3a/jobs_8h.html#abb162c99100e0466ef43cf32884f29e8">RUNNING</a> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>) &amp;&amp; <a class="code" href="../../d3/d3a/jobs_8h.html#ae19ce7e46f6caa8b6726dfb0d40e0a1f">IS_FOREGROUND</a> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>) == 0)</div>
<div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> == <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ad107b5818741c0309ebdb7af7318309e">j_jobslots</a>)</div>
<div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;    {</div>
<div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;      <a class="code" href="../../de/d62/sig_8h.html#aa9262558d91ca8060065606f36167783">UNBLOCK_CHILD</a> (oset);</div>
<div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160;      <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;    }</div>
<div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160; </div>
<div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160;      <a class="code" href="../../de/d62/sig_8h.html#aa9262558d91ca8060065606f36167783">UNBLOCK_CHILD</a> (oset);</div>
<div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160; </div>
<div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160;      <a class="code" href="../../dd/d2b/quit_8h.html#ad24e2b54375e12474e65ebf7175988fb">QUIT</a>;</div>
<div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160;      <a class="code" href="../../dd/d2b/quit_8h.html#a68c85871057165f09160a548f0e2246a">CHECK_TERMSIG</a>;</div>
<div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;      <a class="code" href="../../dd/d2b/quit_8h.html#a18ba52f9ecddf2113babe44fac797709">CHECK_WAIT_INTR</a>;</div>
<div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160; </div>
<div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> = 0;</div>
<div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;      r = <a class="code" href="../../df/d8e/jobs_8c.html#aa16d61880057512c4b0d5e127d4cd6bb">wait_for</a> (<a class="code" href="../../d3/d3a/jobs_8h.html#ab583c287aa3595ca5d35ffb3214de135">ANY_PID</a>, 0);    <span class="comment">/* special sentinel value for wait_for */</span></div>
<div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;      <span class="keywordflow">if</span> (r == -1 &amp;&amp; <a class="code" href="../../df/d8e/jobs_8c.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> == <a class="code" href="../../d7/d8c/libc_2include_2errno_8h.html#a47b42c351e0e011a048058d224205c0f">ECHILD</a>)</div>
<div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#af8ab905a192c6341c12fd82f166374a2">mark_all_jobs_as_dead</a> ();</div>
<div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;    </div>
<div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160;      <span class="comment">/* Now we see if we have any dead jobs and return the first one */</span></div>
<div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160;      <a class="code" href="../../de/d62/sig_8h.html#a37d156f6ab7c2ade277f9a274314d258">BLOCK_CHILD</a> (set, oset);</div>
<div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> = 0; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> &lt; <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ad107b5818741c0309ebdb7af7318309e">j_jobslots</a>; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>++)</div>
<div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160;    {</div>
<div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;      <span class="keywordflow">if</span> ((<a class="code" href="../../db/d66/dumpkmap_8c.html#abb0829cce9dd20a40ae0d86890ae85c6">flags</a> &amp; <a class="code" href="../../d3/d3a/jobs_8h.html#a0373a58aeb632b2a7aede6d031dd21a1">JWAIT_WAITING</a>) &amp;&amp; <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>] &amp;&amp; <a class="code" href="../../d3/d3a/jobs_8h.html#af107a2868a0f25dc73a04592e7480196">IS_WAITING</a> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>) == 0)</div>
<div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;        <span class="keywordflow">continue</span>;       <span class="comment">/* if we don&#39;t want it, skip it */</span></div>
<div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>] &amp;&amp; <a class="code" href="../../d3/d3a/jobs_8h.html#a15d782ba433bae3ec145926e26c9ea37">DEADJOB</a> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>))</div>
<div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;        <span class="keywordflow">goto</span> return_job;</div>
<div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160;    }</div>
<div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160;      <a class="code" href="../../de/d62/sig_8h.html#aa9262558d91ca8060065606f36167783">UNBLOCK_CHILD</a> (oset);</div>
<div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;    }</div>
<div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160; </div>
<div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;  <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160;}</div>
<div class="ttc" id="aash_8c_html_af09e6fefb632493d1b89497880b49425"><div class="ttname"><a href="../../d1/dbe/ash_8c.html#af09e6fefb632493d1b89497880b49425">procstat::pid</a></div><div class="ttdeci">pid_t pid</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00181">jobs.h:181</a></div></div>
<div class="ttc" id="aash_8c_html_af5b6f282bc378b9165ce3ebb958784af"><div class="ttname"><a href="../../d1/dbe/ash_8c.html#af5b6f282bc378b9165ce3ebb958784af">procstat::status</a></div><div class="ttdeci">bits16_t status</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00182">jobs.h:182</a></div></div>
<div class="ttc" id="ajobs_8c_html_af8ab905a192c6341c12fd82f166374a2"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#af8ab905a192c6341c12fd82f166374a2">mark_all_jobs_as_dead</a></div><div class="ttdeci">static void mark_all_jobs_as_dead()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l04801">jobs.c:4801</a></div></div>
<div class="ttc" id="ajobs_8h_html_a0373a58aeb632b2a7aede6d031dd21a1"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#a0373a58aeb632b2a7aede6d031dd21a1">JWAIT_WAITING</a></div><div class="ttdeci">#define JWAIT_WAITING</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00045">jobs.h:45</a></div></div>
<div class="ttc" id="ajobs_8h_html_af107a2868a0f25dc73a04592e7480196"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#af107a2868a0f25dc73a04592e7480196">IS_WAITING</a></div><div class="ttdeci">#define IS_WAITING(j)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00118">jobs.h:118</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00200">ANY_PID</a>, <a class="el" href="../../de/d62/sig_8h_source.html#l00100">BLOCK_CHILD</a>, <a class="el" href="../../dd/d2b/quit_8h_source.html#l00052">CHECK_TERMSIG</a>, <a class="el" href="../../dd/d2b/quit_8h_source.html#l00060">CHECK_WAIT_INTR</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00100">DEADJOB</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01386">delete_job()</a>, <a class="el" href="../../d7/d8c/libc_2include_2errno_8h_source.html#l00013">ECHILD</a>, <a class="el" href="../../df/d8e/jobs_8c.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02567">find_last_pid()</a>, <a class="el" href="../../db/d66/dumpkmap_8c.html#abb0829cce9dd20a40ae0d86890ae85c6">flags</a>, <a class="el" href="../../dd/d71/gettextP_8h_source.html#l00074">i</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00114">IS_FOREGROUND</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00115">IS_NOTIFIED</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00118">IS_WAITING</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00144">jobstats::j_jobslots</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02866">job_exit_status()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00183">jobs</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00346">jobs_list_frozen</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00175">js</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00045">JWAIT_WAITING</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04801">mark_all_jobs_as_dead()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04235">notify_of_job_status()</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00181">procstat::pid</a>, <a class="el" href="../../d0/d43/mconf_8c_source.html#l00450">pid</a>, <a class="el" href="../../dd/d2b/quit_8h_source.html#l00035">QUIT</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00099">RUNNING</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00182">procstat::status</a>, <a class="el" href="../../de/d62/sig_8h_source.html#l00101">UNBLOCK_CHILD</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l02899">wait_for()</a>.</p>

</div>
</div>
<a id="a78ed3b2eb7b5f681be73c08ed2f15946"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78ed3b2eb7b5f681be73c08ed2f15946">&#9670;&nbsp;</a></span>wait_for_background_pids()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int wait_for_background_pids </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d1/dbe/ash_8c.html#d3/d9e/structprocstat">procstat</a> *&#160;</td>
          <td class="paramname"><em>ps</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l02648">2648</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;{</div>
<div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;  <span class="keyword">register</span> <span class="keywordtype">int</span> <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>, r;</div>
<div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;  <span class="keywordtype">int</span> any_stopped, check_async, <a class="code" href="../../d1/dbe/ash_8c.html#ab1a5da6dbea94b0e209581eb17846595">njobs</a>;</div>
<div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;  <a class="code" href="../../d8/d90/sigset__t_8h.html#a9140a5882f847f67b8155c759ac6aa05">sigset_t</a> set, oset;</div>
<div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;  <a class="code" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a> <a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>;</div>
<div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160; </div>
<div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d1/dbe/ash_8c.html#ab1a5da6dbea94b0e209581eb17846595">njobs</a> = any_stopped = 0, check_async = 1;;)</div>
<div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;    {</div>
<div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;      <a class="code" href="../../de/d62/sig_8h.html#a37d156f6ab7c2ade277f9a274314d258">BLOCK_CHILD</a> (set, oset);</div>
<div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160; </div>
<div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;      <span class="comment">/* find first running job; if none running in foreground, break */</span></div>
<div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;      <span class="comment">/* XXX could use js.j_firstj and js.j_lastj here */</span></div>
<div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> = 0; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> &lt; <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ad107b5818741c0309ebdb7af7318309e">j_jobslots</a>; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>++)</div>
<div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;    {</div>
<div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> &lt; <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a41979e2d342c40d347381152156fc26d">j_firstj</a> &amp;&amp; <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>])</div>
<div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;        <a class="code" href="../../da/d41/error_8h.html#a1c7d66dc03b5cb6a3a6c2a79bcbf8e4d">INTERNAL_DEBUG</a> ((<span class="stringliteral">&quot;wait_for_background_pids: job %d non-null before js.j_firstj (%d)&quot;</span>, <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>, <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a41979e2d342c40d347381152156fc26d">j_firstj</a>));</div>
<div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> &gt; <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ac29ea4e478fa590943c6f7ae902f3a46">j_lastj</a> &amp;&amp; <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>])</div>
<div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;        <a class="code" href="../../da/d41/error_8h.html#a1c7d66dc03b5cb6a3a6c2a79bcbf8e4d">INTERNAL_DEBUG</a> ((<span class="stringliteral">&quot;wait_for_background_pids: job %d non-null after js.j_lastj (%d)&quot;</span>, <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>, <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ac29ea4e478fa590943c6f7ae902f3a46">j_lastj</a>));</div>
<div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160; </div>
<div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>] &amp;&amp; <a class="code" href="../../d3/d3a/jobs_8h.html#adc39613d1152c030190012a614856c69">STOPPED</a> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>))</div>
<div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;        {</div>
<div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;          <a class="code" href="../../de/da3/bash_2builtins_2common_8c.html#a546062b170733dad1847d53c2cbc4be8">builtin_warning</a> (<span class="stringliteral">&quot;job %d[%d] stopped&quot;</span>, <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>+1, <a class="code" href="../../df/d8e/jobs_8c.html#a758086bb1f3a53e925371b718b1068ab">find_last_pid</a> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>, 0));</div>
<div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;          any_stopped = 1;</div>
<div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;        }</div>
<div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160; </div>
<div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>] &amp;&amp; <a class="code" href="../../d3/d3a/jobs_8h.html#abb162c99100e0466ef43cf32884f29e8">RUNNING</a> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>) &amp;&amp; <a class="code" href="../../d3/d3a/jobs_8h.html#ae19ce7e46f6caa8b6726dfb0d40e0a1f">IS_FOREGROUND</a> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>) == 0)</div>
<div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;    }</div>
<div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> == <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#ad107b5818741c0309ebdb7af7318309e">j_jobslots</a>)</div>
<div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;    {</div>
<div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;      <a class="code" href="../../de/d62/sig_8h.html#aa9262558d91ca8060065606f36167783">UNBLOCK_CHILD</a> (oset);</div>
<div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;    }</div>
<div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160; </div>
<div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;      <span class="comment">/* now wait for the last pid in that job. */</span></div>
<div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;      <a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a> = <a class="code" href="../../df/d8e/jobs_8c.html#a758086bb1f3a53e925371b718b1068ab">find_last_pid</a> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>, 0);</div>
<div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;      <a class="code" href="../../de/d62/sig_8h.html#aa9262558d91ca8060065606f36167783">UNBLOCK_CHILD</a> (oset);</div>
<div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;      <a class="code" href="../../dd/d2b/quit_8h.html#ad24e2b54375e12474e65ebf7175988fb">QUIT</a>;</div>
<div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> = 0;        <span class="comment">/* XXX */</span></div>
<div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;      r = <a class="code" href="../../df/d8e/jobs_8c.html#a637f8e438a0ea8c409d891cb8ccb523e">wait_for_single_pid</a> (<a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, <a class="code" href="../../d3/d3a/jobs_8h.html#aa236a5ea43c9e46224f27d12350def6b">JWAIT_PERROR</a>);</div>
<div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;      <span class="keywordflow">if</span> (ps)</div>
<div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;    {</div>
<div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;      ps-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#af09e6fefb632493d1b89497880b49425">pid</a> = <a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>;</div>
<div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;      ps-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#af5b6f282bc378b9165ce3ebb958784af">status</a> = (r &lt; 0 || r &gt; 256) ? 127 : r;</div>
<div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;    }</div>
<div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;      <span class="keywordflow">if</span> (r == -1 &amp;&amp; <a class="code" href="../../df/d8e/jobs_8c.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> == <a class="code" href="../../d7/d8c/libc_2include_2errno_8h.html#a47b42c351e0e011a048058d224205c0f">ECHILD</a>)</div>
<div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;    {</div>
<div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;      <span class="comment">/* If we&#39;re mistaken about job state, compensate. */</span></div>
<div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;      check_async = 0;</div>
<div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#af8ab905a192c6341c12fd82f166374a2">mark_all_jobs_as_dead</a> ();</div>
<div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;    }</div>
<div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;      <a class="code" href="../../d1/dbe/ash_8c.html#ab1a5da6dbea94b0e209581eb17846595">njobs</a>++;</div>
<div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;    }</div>
<div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160; </div>
<div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;<span class="preprocessor">#if defined (PROCESS_SUBSTITUTION)</span></div>
<div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;  procsub_waitall ();</div>
<div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;      </div>
<div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;  <span class="comment">/* POSIX.2 says the shell can discard the statuses of all completed jobs if</span></div>
<div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;<span class="comment">     `wait&#39; is called with no arguments. */</span></div>
<div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#a17ec09b97c22e3e745e6fe463418e203">mark_dead_jobs_as_notified</a> (1);</div>
<div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#a47c393729bc38de011d2422746de634c">cleanup_dead_jobs</a> ();</div>
<div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#ab2aa5e9feea832a14471ef39a355c91a">bgp_clear</a> ();</div>
<div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160; </div>
<div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d1/dbe/ash_8c.html#ab1a5da6dbea94b0e209581eb17846595">njobs</a>;</div>
<div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;}</div>
<div class="ttc" id="aash_8c_html_ab1a5da6dbea94b0e209581eb17846595"><div class="ttname"><a href="../../d1/dbe/ash_8c.html#ab1a5da6dbea94b0e209581eb17846595">njobs</a></div><div class="ttdeci">static unsigned njobs</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dbe/ash_8c_source.html#l03824">ash.c:3824</a></div></div>
<div class="ttc" id="abash_2builtins_2common_8c_html_a546062b170733dad1847d53c2cbc4be8"><div class="ttname"><a href="../../de/da3/bash_2builtins_2common_8c.html#a546062b170733dad1847d53c2cbc4be8">builtin_warning</a></div><div class="ttdeci">void builtin_warning(char *format, va_alist) const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/da3/bash_2builtins_2common_8c_source.html#l00126">common.c:126</a></div></div>
<div class="ttc" id="ajobs_8c_html_a637f8e438a0ea8c409d891cb8ccb523e"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a637f8e438a0ea8c409d891cb8ccb523e">wait_for_single_pid</a></div><div class="ttdeci">int wait_for_single_pid(pid_t pid, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l02586">jobs.c:2586</a></div></div>
<div class="ttc" id="ajobs_8h_html_aa236a5ea43c9e46224f27d12350def6b"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#aa236a5ea43c9e46224f27d12350def6b">JWAIT_PERROR</a></div><div class="ttdeci">#define JWAIT_PERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00042">jobs.h:42</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d8e/jobs_8c_source.html#l00927">bgp_clear()</a>, <a class="el" href="../../de/d62/sig_8h_source.html#l00100">BLOCK_CHILD</a>, <a class="el" href="../../de/da3/bash_2builtins_2common_8c_source.html#l00126">builtin_warning()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01210">cleanup_dead_jobs()</a>, <a class="el" href="../../d7/d8c/libc_2include_2errno_8h_source.html#l00013">ECHILD</a>, <a class="el" href="../../df/d8e/jobs_8c.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02567">find_last_pid()</a>, <a class="el" href="../../dd/d71/gettextP_8h_source.html#l00074">i</a>, <a class="el" href="../../da/d41/error_8h_source.html#l00079">INTERNAL_DEBUG</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00114">IS_FOREGROUND</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00146">jobstats::j_firstj</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00144">jobstats::j_jobslots</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00145">jobstats::j_lastj</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00183">jobs</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00175">js</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00042">JWAIT_PERROR</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04801">mark_all_jobs_as_dead()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04827">mark_dead_jobs_as_notified()</a>, <a class="el" href="../../d1/dbe/ash_8c_source.html#l03824">njobs</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00181">procstat::pid</a>, <a class="el" href="../../d0/d43/mconf_8c_source.html#l00450">pid</a>, <a class="el" href="../../dd/d2b/quit_8h_source.html#l00035">QUIT</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00099">RUNNING</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00182">procstat::status</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00098">STOPPED</a>, <a class="el" href="../../de/d62/sig_8h_source.html#l00101">UNBLOCK_CHILD</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l02586">wait_for_single_pid()</a>.</p>

</div>
</div>
<a id="a0503fdca670f3197749736949ba2d49d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0503fdca670f3197749736949ba2d49d">&#9670;&nbsp;</a></span>wait_for_job()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int wait_for_job </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>job</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d1/dbe/ash_8c.html#d3/d9e/structprocstat">procstat</a> *&#160;</td>
          <td class="paramname"><em>ps</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l03215">3215</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;{</div>
<div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;  <a class="code" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a> <a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>;</div>
<div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;  <span class="keywordtype">int</span> r, <a class="code" href="../../d6/d23/wi__stuff_8c.html#a102a30241e29b7ae7a452418431f728d">state</a>;</div>
<div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;  <a class="code" href="../../d8/d90/sigset__t_8h.html#a9140a5882f847f67b8155c759ac6aa05">sigset_t</a> set, oset;</div>
<div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160; </div>
<div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;  <a class="code" href="../../de/d62/sig_8h.html#a37d156f6ab7c2ade277f9a274314d258">BLOCK_CHILD</a>(set, oset);</div>
<div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;  <a class="code" href="../../d6/d23/wi__stuff_8c.html#a102a30241e29b7ae7a452418431f728d">state</a> = <a class="code" href="../../d3/d3a/jobs_8h.html#a466620bfa4ee2d285544d9a67a8a337e">JOBSTATE</a> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>);</div>
<div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d6/d23/wi__stuff_8c.html#a102a30241e29b7ae7a452418431f728d">state</a> == <a class="code" href="../../d3/d3a/jobs_8h.html#a27f134c9d8392fc50ee339c518707f57a55fea56f3156409573084fce0c920da7">JSTOPPED</a>)</div>
<div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;    <a class="code" href="../../db/dcc/error_8c.html#a18ffbfac4ece05ba6cc56c02d783a9ee">internal_warning</a> (<a class="code" href="../../d7/dcd/bashintl_8h.html#a86a239addea586602343007a370bf8ad">_</a>(<span class="stringliteral">&quot;wait_for_job: job %d is stopped&quot;</span>), <a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>+1);</div>
<div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160; </div>
<div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;  <a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a> = <a class="code" href="../../df/d8e/jobs_8c.html#a758086bb1f3a53e925371b718b1068ab">find_last_pid</a> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>, 0);</div>
<div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160;  <a class="code" href="../../de/d62/sig_8h.html#aa9262558d91ca8060065606f36167783">UNBLOCK_CHILD</a>(oset);</div>
<div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160; </div>
<div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;  <span class="keywordflow">do</span></div>
<div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;    {</div>
<div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;      r = <a class="code" href="../../df/d8e/jobs_8c.html#aa16d61880057512c4b0d5e127d4cd6bb">wait_for</a> (<a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, 0);</div>
<div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;      <span class="keywordflow">if</span> (r == -1 &amp;&amp; <a class="code" href="../../df/d8e/jobs_8c.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> == <a class="code" href="../../d7/d8c/libc_2include_2errno_8h.html#a47b42c351e0e011a048058d224205c0f">ECHILD</a>)</div>
<div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#af8ab905a192c6341c12fd82f166374a2">mark_all_jobs_as_dead</a> ();</div>
<div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160; </div>
<div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;      <a class="code" href="../../dd/d2b/quit_8h.html#a18ba52f9ecddf2113babe44fac797709">CHECK_WAIT_INTR</a>;</div>
<div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160; </div>
<div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160;      <span class="keywordflow">if</span> ((<a class="code" href="../../db/d66/dumpkmap_8c.html#abb0829cce9dd20a40ae0d86890ae85c6">flags</a> &amp; <a class="code" href="../../d3/d3a/jobs_8h.html#a9f8ff74629b8584c7710213ea30318e9">JWAIT_FORCE</a>) == 0)</div>
<div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160; </div>
<div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;      <a class="code" href="../../de/d62/sig_8h.html#a37d156f6ab7c2ade277f9a274314d258">BLOCK_CHILD</a> (set, oset);</div>
<div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;      <a class="code" href="../../d6/d23/wi__stuff_8c.html#a102a30241e29b7ae7a452418431f728d">state</a> = (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a> != <a class="code" href="../../d3/d3a/jobs_8h.html#a6eba094b1ac1bc00e5883edd166bd944">NO_JOB</a> &amp;&amp; <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>]) ? <a class="code" href="../../d3/d3a/jobs_8h.html#a466620bfa4ee2d285544d9a67a8a337e">JOBSTATE</a> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>) : <a class="code" href="../../d3/d3a/jobs_8h.html#a27f134c9d8392fc50ee339c518707f57acc7e60ddf9078b1521d1adb70bd16f8b">JDEAD</a>;</div>
<div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;      <a class="code" href="../../de/d62/sig_8h.html#aa9262558d91ca8060065606f36167783">UNBLOCK_CHILD</a> (oset);</div>
<div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;    }</div>
<div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="../../d6/d23/wi__stuff_8c.html#a102a30241e29b7ae7a452418431f728d">state</a> != <a class="code" href="../../d3/d3a/jobs_8h.html#a27f134c9d8392fc50ee339c518707f57acc7e60ddf9078b1521d1adb70bd16f8b">JDEAD</a>);</div>
<div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160; </div>
<div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160;  <span class="comment">/* POSIX.2: we can remove the job from the jobs table if we just waited</span></div>
<div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;<span class="comment">     for it. */</span></div>
<div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;  <a class="code" href="../../de/d62/sig_8h.html#a37d156f6ab7c2ade277f9a274314d258">BLOCK_CHILD</a> (set, oset);</div>
<div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a> != <a class="code" href="../../d3/d3a/jobs_8h.html#a6eba094b1ac1bc00e5883edd166bd944">NO_JOB</a> &amp;&amp; <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>] &amp;&amp; <a class="code" href="../../d3/d3a/jobs_8h.html#a15d782ba433bae3ec145926e26c9ea37">DEADJOB</a> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>))</div>
<div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>]-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#af96c169abb39b4b3f9ccce91cb4b17dc">flags</a> |= <a class="code" href="../../d3/d3a/jobs_8h.html#ac67735d6cc995bbac83d5efe91a52125">J_NOTIFIED</a>;</div>
<div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;  <a class="code" href="../../de/d62/sig_8h.html#aa9262558d91ca8060065606f36167783">UNBLOCK_CHILD</a> (oset);</div>
<div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160; </div>
<div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;  <span class="keywordflow">if</span> (ps)</div>
<div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;    {</div>
<div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160;      ps-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#af09e6fefb632493d1b89497880b49425">pid</a> = <a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>;</div>
<div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;      ps-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#af5b6f282bc378b9165ce3ebb958784af">status</a> = (r &lt; 0) ? 127 : r;</div>
<div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160;    }</div>
<div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;  <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160;}</div>
<div class="ttc" id="ajobs_8h_html_a9f8ff74629b8584c7710213ea30318e9"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#a9f8ff74629b8584c7710213ea30318e9">JWAIT_FORCE</a></div><div class="ttdeci">#define JWAIT_FORCE</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00043">jobs.h:43</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/dcd/bashintl_8h_source.html#l00036">_</a>, <a class="el" href="../../de/d62/sig_8h_source.html#l00100">BLOCK_CHILD</a>, <a class="el" href="../../dd/d2b/quit_8h_source.html#l00060">CHECK_WAIT_INTR</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00100">DEADJOB</a>, <a class="el" href="../../d7/d8c/libc_2include_2errno_8h_source.html#l00013">ECHILD</a>, <a class="el" href="../../df/d8e/jobs_8c.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02567">find_last_pid()</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00125">job::flags</a>, <a class="el" href="../../db/d66/dumpkmap_8c.html#abb0829cce9dd20a40ae0d86890ae85c6">flags</a>, <a class="el" href="../../db/dcc/error_8c_source.html#l00256">internal_warning()</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00106">J_NOTIFIED</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00094">JDEAD</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00183">jobs</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00095">JOBSTATE</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00094">JSTOPPED</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00043">JWAIT_FORCE</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04801">mark_all_jobs_as_dead()</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00193">NO_JOB</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00181">procstat::pid</a>, <a class="el" href="../../d0/d43/mconf_8c_source.html#l00450">pid</a>, <a class="el" href="../../d6/d23/wi__stuff_8c_source.html#l00309">state</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00182">procstat::status</a>, <a class="el" href="../../de/d62/sig_8h_source.html#l00101">UNBLOCK_CHILD</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l02899">wait_for()</a>.</p>

</div>
</div>
<a id="a637f8e438a0ea8c409d891cb8ccb523e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a637f8e438a0ea8c409d891cb8ccb523e">&#9670;&nbsp;</a></span>wait_for_single_pid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int wait_for_single_pid </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a>&#160;</td>
          <td class="paramname"><em>pid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l02586">2586</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;{</div>
<div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;  <span class="keyword">register</span> <a class="code" href="../../d3/d3a/jobs_8h.html#d8/d20/structprocess">PROCESS</a> *<a class="code" href="../../d1/d0c/posix__spawn_8c.html#a90a7b20363e18ef6ec5f22741c81e375">child</a>;</div>
<div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;  <a class="code" href="../../d8/d90/sigset__t_8h.html#a9140a5882f847f67b8155c759ac6aa05">sigset_t</a> set, oset;</div>
<div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;  <span class="keywordtype">int</span> r, <a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>, alive;</div>
<div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160; </div>
<div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;  <a class="code" href="../../de/d62/sig_8h.html#a37d156f6ab7c2ade277f9a274314d258">BLOCK_CHILD</a> (set, oset);</div>
<div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;  <a class="code" href="../../d3/d16/pstree_8c.html#d6/d07/structchild">child</a> = <a class="code" href="../../df/d8e/jobs_8c.html#a6581f40e1e7657048cbecabb416f13bb">find_pipeline</a> (<a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, 0, (<span class="keywordtype">int</span> *)<a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;  <a class="code" href="../../de/d62/sig_8h.html#aa9262558d91ca8060065606f36167783">UNBLOCK_CHILD</a> (oset);</div>
<div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160; </div>
<div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d3/d16/pstree_8c.html#d6/d07/structchild">child</a> == 0)</div>
<div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;    {</div>
<div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;      r = <a class="code" href="../../df/d8e/jobs_8c.html#ad9ed29155697136943ee817c237314e1">bgp_search</a> (<a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>);</div>
<div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;      <span class="keywordflow">if</span> (r &gt;= 0)</div>
<div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;    <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;    }</div>
<div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160; </div>
<div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d3/d16/pstree_8c.html#d6/d07/structchild">child</a> == 0)</div>
<div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;    {</div>
<div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../db/d66/dumpkmap_8c.html#abb0829cce9dd20a40ae0d86890ae85c6">flags</a> &amp; <a class="code" href="../../d3/d3a/jobs_8h.html#aa236a5ea43c9e46224f27d12350def6b">JWAIT_PERROR</a>)</div>
<div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;    <a class="code" href="../../db/dcc/error_8c.html#a49989edc86219ccae074d1d713294c44">internal_error</a> (<a class="code" href="../../d7/dcd/bashintl_8h.html#a86a239addea586602343007a370bf8ad">_</a>(<span class="stringliteral">&quot;wait: pid %ld is not a child of this shell&quot;</span>), (<span class="keywordtype">long</span>)<a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>);</div>
<div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;      <span class="keywordflow">return</span> (257);</div>
<div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;    }</div>
<div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160; </div>
<div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;  alive = 0;</div>
<div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;  <span class="keywordflow">do</span></div>
<div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;    {</div>
<div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;      r = <a class="code" href="../../df/d8e/jobs_8c.html#aa16d61880057512c4b0d5e127d4cd6bb">wait_for</a> (<a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, 0);</div>
<div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;      <span class="keywordflow">if</span> ((<a class="code" href="../../db/d66/dumpkmap_8c.html#abb0829cce9dd20a40ae0d86890ae85c6">flags</a> &amp; <a class="code" href="../../d3/d3a/jobs_8h.html#a9f8ff74629b8584c7710213ea30318e9">JWAIT_FORCE</a>) == 0)</div>
<div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160; </div>
<div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;      <a class="code" href="../../de/d62/sig_8h.html#a37d156f6ab7c2ade277f9a274314d258">BLOCK_CHILD</a> (set, oset);</div>
<div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;      alive = <a class="code" href="../../d3/d3a/jobs_8h.html#a4f29476eb81762940d28edc76520c035">PALIVE</a> (<a class="code" href="../../d3/d16/pstree_8c.html#d6/d07/structchild">child</a>);</div>
<div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;      <a class="code" href="../../de/d62/sig_8h.html#aa9262558d91ca8060065606f36167783">UNBLOCK_CHILD</a> (oset);</div>
<div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;    }</div>
<div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;  <span class="keywordflow">while</span> (alive);</div>
<div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160; </div>
<div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;  <span class="comment">/* POSIX.2: if we just waited for a job, we can remove it from the jobs</span></div>
<div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;<span class="comment">     table. */</span></div>
<div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;  <a class="code" href="../../de/d62/sig_8h.html#a37d156f6ab7c2ade277f9a274314d258">BLOCK_CHILD</a> (set, oset);</div>
<div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;  <a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a> = <a class="code" href="../../df/d8e/jobs_8c.html#a99584c8b38b45a70629677a975056374">find_job</a> (<a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, 0, <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a> != <a class="code" href="../../d3/d3a/jobs_8h.html#a6eba094b1ac1bc00e5883edd166bd944">NO_JOB</a> &amp;&amp; <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>] &amp;&amp; <a class="code" href="../../d3/d3a/jobs_8h.html#a15d782ba433bae3ec145926e26c9ea37">DEADJOB</a> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>))</div>
<div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#a6cce913474372029492267b46b745d88">jobs</a>[<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>]-&gt;<a class="code" href="../../d1/dbe/ash_8c.html#af96c169abb39b4b3f9ccce91cb4b17dc">flags</a> |= <a class="code" href="../../d3/d3a/jobs_8h.html#ac67735d6cc995bbac83d5efe91a52125">J_NOTIFIED</a>;</div>
<div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;  <a class="code" href="../../de/d62/sig_8h.html#aa9262558d91ca8060065606f36167783">UNBLOCK_CHILD</a> (oset);</div>
<div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160; </div>
<div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;  <span class="comment">/* If running in posix mode, remove the job from the jobs table immediately */</span></div>
<div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d6/d4f/shell_8c.html#a15b0e48465dfc17e94173c63e10b57cc">posixly_correct</a>)</div>
<div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;    {</div>
<div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#a47c393729bc38de011d2422746de634c">cleanup_dead_jobs</a> ();</div>
<div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#a1944a12e8c62f7d7a9b419a9228a89a9">bgp_delete</a> (<a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>);</div>
<div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;    }</div>
<div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160; </div>
<div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;  <span class="comment">/* Check for a trapped signal interrupting the wait builtin and jump out */</span></div>
<div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;  <a class="code" href="../../dd/d2b/quit_8h.html#a18ba52f9ecddf2113babe44fac797709">CHECK_WAIT_INTR</a>;</div>
<div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160; </div>
<div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;  <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;}</div>
<div class="ttc" id="ajobs_8c_html_ad9ed29155697136943ee817c237314e1"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#ad9ed29155697136943ee817c237314e1">bgp_search</a></div><div class="ttdeci">static int bgp_search(pid_t pid)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l00945">jobs.c:945</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/dcd/bashintl_8h_source.html#l00036">_</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00892">bgp_delete()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00945">bgp_search()</a>, <a class="el" href="../../de/d62/sig_8h_source.html#l00100">BLOCK_CHILD</a>, <a class="el" href="../../dd/d2b/quit_8h_source.html#l00060">CHECK_WAIT_INTR</a>, <a class="el" href="../../d1/d0c/posix__spawn_8c_source.html#l00031">child()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01210">cleanup_dead_jobs()</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00100">DEADJOB</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01764">find_job()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01711">find_pipeline()</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00125">job::flags</a>, <a class="el" href="../../db/d66/dumpkmap_8c.html#abb0829cce9dd20a40ae0d86890ae85c6">flags</a>, <a class="el" href="../../db/dcc/error_8c_source.html#l00235">internal_error()</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00106">J_NOTIFIED</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00183">jobs</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00043">JWAIT_FORCE</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00042">JWAIT_PERROR</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00193">NO_JOB</a>, <a class="el" href="../../d9/d14/general_8h_source.html#l00053">NULL</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00081">PALIVE</a>, <a class="el" href="../../d0/d43/mconf_8c_source.html#l00450">pid</a>, <a class="el" href="../../d6/d4f/shell_8c_source.html#l00237">posixly_correct</a>, <a class="el" href="../../de/d62/sig_8h_source.html#l00101">UNBLOCK_CHILD</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l02899">wait_for()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d3d/execute__cmd_8c_source.html#l02496">execute_pipeline()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l02648">wait_for_background_pids()</a>.</p>

</div>
</div>
<a id="a1ced6c7ceaf0cf2f9983aa5262dfe392"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ced6c7ceaf0cf2f9983aa5262dfe392">&#9670;&nbsp;</a></span>wait_sigint_cleanup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void wait_sigint_cleanup </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l02728">2728</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;{</div>
<div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#af553b22eef984c5245e4eae3e4a36cd5">queue_sigchld</a> = 0;</div>
<div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#af3275b044b48a9ba5da272b925ba6d9e">waiting_for_child</a> = 0;</div>
<div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#abaf052f06c9c04a236219814419b7e83">restore_sigint_handler</a> ();</div>
<div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d8e/jobs_8c_source.html#l00318">queue_sigchld</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02736">restore_sigint_handler()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l02724">waiting_for_child</a>.</p>

</div>
</div>
<a id="a89ced87614d7f6c88e27c96091684467"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89ced87614d7f6c88e27c96091684467">&#9670;&nbsp;</a></span>wait_sigint_handler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d0/dde/rl-callbacktest_8c.html#a2be1284fe65357755b6161a039fb59e4">sighandler</a> wait_sigint_handler </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sig</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l02750">2750</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;{</div>
<div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;  <a class="code" href="../../dd/db7/bash_2lib_2readline_2signals_8c.html#a1f8d6bb6b9aaad1c21141fc327620e99">SigHandler</a> *sigint_handler;</div>
<div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160; </div>
<div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../de/da3/bash_2builtins_2common_8c.html#a90f34313402c8392a46af2a5d3147d89">this_shell_builtin</a> &amp;&amp; <a class="code" href="../../de/da3/bash_2builtins_2common_8c.html#a90f34313402c8392a46af2a5d3147d89">this_shell_builtin</a> == wait_builtin)</div>
<div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;    {</div>
<div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;      <a class="code" href="../../d6/d4f/shell_8c.html#a0e02595d7cb801168220c4df0b64b5ed">set_exit_status</a> (128+<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a487309e3e9e0527535644115204a639a">SIGINT</a>);</div>
<div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#abaf052f06c9c04a236219814419b7e83">restore_sigint_handler</a> ();</div>
<div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;      <span class="comment">/* If we got a SIGINT while in `wait&#39;, and SIGINT is trapped, do</span></div>
<div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;<span class="comment">     what POSIX.2 says (see builtins/wait.def for more info). */</span></div>
<div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../de/da3/bash_2builtins_2common_8c.html#a90f34313402c8392a46af2a5d3147d89">this_shell_builtin</a> &amp;&amp; <a class="code" href="../../de/da3/bash_2builtins_2common_8c.html#a90f34313402c8392a46af2a5d3147d89">this_shell_builtin</a> == wait_builtin &amp;&amp;</div>
<div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;      <a class="code" href="../../d5/da5/zread_8c.html#a40264baa053bf7ccf2ef5ca345d6c06d">signal_is_trapped</a> (<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a487309e3e9e0527535644115204a639a">SIGINT</a>) &amp;&amp;</div>
<div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;      ((sigint_handler = <a class="code" href="../../dc/d6f/trap_8c.html#af12cb5667a0cc8db128009b4249e1925">trap_to_sighandler</a> (<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a487309e3e9e0527535644115204a639a">SIGINT</a>)) == <a class="code" href="../../dc/d6f/trap_8c.html#a8ae925fadd52847ae3fbf87db9f92a43">trap_handler</a>))</div>
<div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;    {</div>
<div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;      <a class="code" href="../../dc/d6f/trap_8c.html#a8ae925fadd52847ae3fbf87db9f92a43">trap_handler</a> (<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a487309e3e9e0527535644115204a639a">SIGINT</a>);    <span class="comment">/* set pending_traps[SIGINT] */</span></div>
<div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;      <a class="code" href="../../dc/d6f/trap_8c.html#a935bd11f5afa23a8520efd4b6e10614d">wait_signal_received</a> = <a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a487309e3e9e0527535644115204a639a">SIGINT</a>;</div>
<div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d28/bash_2builtins_2common_8h.html#ad2accf6d6351e826ee6cbdc06f946f11">wait_intr_flag</a>)</div>
<div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;        <a class="code" href="../../d5/de0/include_2posixjmp_8h.html#abb496f9af211ed8477d4b5fda7d7364b">sh_longjmp</a> (<a class="code" href="../../da/d23/bashjmp_8h.html#a89d0152483195257de262e224716fcc1">wait_intr_buf</a>, 1);</div>
<div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;        <span class="comment">/* Let CHECK_WAIT_INTR handle it in wait_for/waitchld */</span></div>
<div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;        <a class="code" href="../../de/d62/sig_8h.html#afa974fd0e2001758911195599747a2b2">SIGRETURN</a> (0);</div>
<div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;    }</div>
<div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;      <span class="keywordflow">else</span> <span class="comment">/* wait_builtin but signal not trapped, treat as interrupt */</span></div>
<div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;    <a class="code" href="../../d8/da5/musl_2src_2signal_2kill_8c.html#a4539db972bcf3dd8c8b429af0dc3789d">kill</a> (<a class="code" href="../../d3/d3a/jobs_8h.html#add1dc6545057b7f1c7f91352536fb060">getpid</a> (), <a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a487309e3e9e0527535644115204a639a">SIGINT</a>);</div>
<div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;    }</div>
<div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160; </div>
<div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;  <span class="comment">/* XXX - should this be interrupt_state?  If it is, the shell will act</span></div>
<div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;<span class="comment">     as if it got the SIGINT interrupt. */</span></div>
<div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#af3275b044b48a9ba5da272b925ba6d9e">waiting_for_child</a>)</div>
<div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#acc216a9180c7ff0368811af940fe3c4f">wait_sigint_received</a> = 1;</div>
<div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;    {</div>
<div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;      <a class="code" href="../../d6/d4f/shell_8c.html#a0e02595d7cb801168220c4df0b64b5ed">set_exit_status</a> (128+<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a487309e3e9e0527535644115204a639a">SIGINT</a>);</div>
<div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#abaf052f06c9c04a236219814419b7e83">restore_sigint_handler</a> ();</div>
<div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;      <a class="code" href="../../d8/da5/musl_2src_2signal_2kill_8c.html#a4539db972bcf3dd8c8b429af0dc3789d">kill</a> (<a class="code" href="../../d3/d3a/jobs_8h.html#add1dc6545057b7f1c7f91352536fb060">getpid</a> (), <a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a487309e3e9e0527535644115204a639a">SIGINT</a>);</div>
<div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;    }</div>
<div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160; </div>
<div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;  <span class="comment">/* Otherwise effectively ignore the SIGINT and allow the running job to</span></div>
<div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;<span class="comment">     be killed. */</span></div>
<div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;  <a class="code" href="../../de/d62/sig_8h.html#afa974fd0e2001758911195599747a2b2">SIGRETURN</a> (0);</div>
<div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;}</div>
<div class="ttc" id="abash_2builtins_2common_8h_html_ad2accf6d6351e826ee6cbdc06f946f11"><div class="ttname"><a href="../../df/d28/bash_2builtins_2common_8h.html#ad2accf6d6351e826ee6cbdc06f946f11">wait_intr_flag</a></div><div class="ttdeci">int wait_intr_flag</div></div>
<div class="ttc" id="abashjmp_8h_html_a89d0152483195257de262e224716fcc1"><div class="ttname"><a href="../../da/d23/bashjmp_8h.html#a89d0152483195257de262e224716fcc1">wait_intr_buf</a></div><div class="ttdeci">procenv_t wait_intr_buf</div></div>
<div class="ttc" id="ainclude_2posixjmp_8h_html_abb496f9af211ed8477d4b5fda7d7364b"><div class="ttname"><a href="../../d5/de0/include_2posixjmp_8h.html#abb496f9af211ed8477d4b5fda7d7364b">sh_longjmp</a></div><div class="ttdeci">#define sh_longjmp(x, n)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/de0/include_2posixjmp_8h_source.html#l00043">posixjmp.h:43</a></div></div>
<div class="ttc" id="atrap_8c_html_a935bd11f5afa23a8520efd4b6e10614d"><div class="ttname"><a href="../../dc/d6f/trap_8c.html#a935bd11f5afa23a8520efd4b6e10614d">wait_signal_received</a></div><div class="ttdeci">int wait_signal_received</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d6f/trap_8c_source.html#l00120">trap.c:120</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d3/d3a/jobs_8h.html#add1dc6545057b7f1c7f91352536fb060">getpid()</a>, <a class="el" href="../../d8/da5/musl_2src_2signal_2kill_8c_source.html#l00004">kill()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02736">restore_sigint_handler()</a>, <a class="el" href="../../d6/d4f/shell_8c_source.html#l01075">set_exit_status()</a>, <a class="el" href="../../d5/de0/include_2posixjmp_8h_source.html#l00043">sh_longjmp</a>, <a class="el" href="../../df/dff/libc_2include_2signal_8h_source.html#l00013">SIGINT</a>, <a class="el" href="../../dc/d6f/trap_8c_source.html#l01503">signal_is_trapped()</a>, <a class="el" href="../../de/d62/sig_8h_source.html#l00037">SIGRETURN</a>, <a class="el" href="../../de/da3/bash_2builtins_2common_8c_source.html#l00075">this_shell_builtin</a>, <a class="el" href="../../dc/d6f/trap_8c_source.html#l00502">trap_handler()</a>, <a class="el" href="../../dc/d6f/trap_8c_source.html#l00778">trap_to_sighandler()</a>, <a class="el" href="../../da/d23/bashjmp_8h.html#a89d0152483195257de262e224716fcc1">wait_intr_buf</a>, <a class="el" href="../../df/d28/bash_2builtins_2common_8h.html#ad2accf6d6351e826ee6cbdc06f946f11">wait_intr_flag</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02721">wait_sigint_received</a>, <a class="el" href="../../dc/d6f/trap_8c_source.html#l00120">wait_signal_received</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l02724">waiting_for_child</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l02899">wait_for()</a>.</p>

</div>
</div>
<a id="a84e054741c4b7e3132b43efce8064090"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84e054741c4b7e3132b43efce8064090">&#9670;&nbsp;</a></span>waitchld()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int waitchld </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a>&#160;</td>
          <td class="paramname"><em>wpid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>block</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l03764">3764</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03767"></a><span class="lineno"> 3767</span>&#160;{</div>
<div class="line"><a name="l03768"></a><span class="lineno"> 3768</span>&#160;  <a class="code" href="../../d7/d23/unionwait_8h.html#de/d61/unionwait">WAIT</a> <a class="code" href="../../d7/d5b/mail_8c.html#a6943d6e2e83995c648644bc0a4d36f53">status</a>;</div>
<div class="line"><a name="l03769"></a><span class="lineno"> 3769</span>&#160;  <a class="code" href="../../d3/d3a/jobs_8h.html#d8/d20/structprocess">PROCESS</a> *<a class="code" href="../../d1/d0c/posix__spawn_8c.html#a90a7b20363e18ef6ec5f22741c81e375">child</a>;</div>
<div class="line"><a name="l03770"></a><span class="lineno"> 3770</span>&#160;  <a class="code" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a> <a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>;</div>
<div class="line"><a name="l03771"></a><span class="lineno"> 3771</span>&#160;  <span class="keywordtype">int</span> ind;</div>
<div class="line"><a name="l03772"></a><span class="lineno"> 3772</span>&#160; </div>
<div class="line"><a name="l03773"></a><span class="lineno"> 3773</span>&#160;  <span class="keywordtype">int</span> call_set_current, last_stopped_job, <a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>, children_exited, waitpid_flags;</div>
<div class="line"><a name="l03774"></a><span class="lineno"> 3774</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">int</span> wcontinued = <a class="code" href="../../df/d8e/jobs_8c.html#afcc090a70f53d677b748f4b1a4b896e6">WCONTINUED</a>;   <span class="comment">/* run-time fix for glibc problem */</span></div>
<div class="line"><a name="l03775"></a><span class="lineno"> 3775</span>&#160; </div>
<div class="line"><a name="l03776"></a><span class="lineno"> 3776</span>&#160;  call_set_current = children_exited = 0;</div>
<div class="line"><a name="l03777"></a><span class="lineno"> 3777</span>&#160;  last_stopped_job = <a class="code" href="../../d3/d3a/jobs_8h.html#a6eba094b1ac1bc00e5883edd166bd944">NO_JOB</a>;</div>
<div class="line"><a name="l03778"></a><span class="lineno"> 3778</span>&#160; </div>
<div class="line"><a name="l03779"></a><span class="lineno"> 3779</span>&#160;  <span class="keywordflow">do</span></div>
<div class="line"><a name="l03780"></a><span class="lineno"> 3780</span>&#160;    {</div>
<div class="line"><a name="l03781"></a><span class="lineno"> 3781</span>&#160;      <span class="comment">/* We don&#39;t want to be notified about jobs stopping if job control</span></div>
<div class="line"><a name="l03782"></a><span class="lineno"> 3782</span>&#160;<span class="comment">     is not active.  XXX - was interactive_shell instead of job_control */</span></div>
<div class="line"><a name="l03783"></a><span class="lineno"> 3783</span>&#160;      waitpid_flags = (<a class="code" href="../../df/d8e/jobs_8c.html#a3002cbcd4a652dec2c5cef5ff3da446f">job_control</a> &amp;&amp; <a class="code" href="../../de/d3d/execute__cmd_8c.html#aacb323e3f246975470615959c2d8572e">subshell_environment</a> == 0)</div>
<div class="line"><a name="l03784"></a><span class="lineno"> 3784</span>&#160;            ? (<a class="code" href="../../d9/dab/posixwait_8h.html#aecac6945e3b08baa2602557c684d6bfe">WUNTRACED</a>|wcontinued)</div>
<div class="line"><a name="l03785"></a><span class="lineno"> 3785</span>&#160;            : 0;</div>
<div class="line"><a name="l03786"></a><span class="lineno"> 3786</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#aa332884f0c3ecd93a329263848b7fa04">sigchld</a> || block == 0)</div>
<div class="line"><a name="l03787"></a><span class="lineno"> 3787</span>&#160;    waitpid_flags |= <a class="code" href="../../d9/dab/posixwait_8h.html#afa288d86b242c3005425a9c0f1682544">WNOHANG</a>;</div>
<div class="line"><a name="l03788"></a><span class="lineno"> 3788</span>&#160; </div>
<div class="line"><a name="l03789"></a><span class="lineno"> 3789</span>&#160;      <span class="comment">/* Check for terminating signals and exit the shell if we receive one */</span></div>
<div class="line"><a name="l03790"></a><span class="lineno"> 3790</span>&#160;      <a class="code" href="../../dd/d2b/quit_8h.html#a68c85871057165f09160a548f0e2246a">CHECK_TERMSIG</a>;</div>
<div class="line"><a name="l03791"></a><span class="lineno"> 3791</span>&#160;      <span class="comment">/* Check for a trapped signal interrupting the wait builtin and jump out */</span></div>
<div class="line"><a name="l03792"></a><span class="lineno"> 3792</span>&#160;      <a class="code" href="../../dd/d2b/quit_8h.html#a18ba52f9ecddf2113babe44fac797709">CHECK_WAIT_INTR</a>;</div>
<div class="line"><a name="l03793"></a><span class="lineno"> 3793</span>&#160; </div>
<div class="line"><a name="l03794"></a><span class="lineno"> 3794</span>&#160;      <span class="keywordflow">if</span> (block == 1 &amp;&amp; <a class="code" href="../../df/d8e/jobs_8c.html#af553b22eef984c5245e4eae3e4a36cd5">queue_sigchld</a> == 0 &amp;&amp; (waitpid_flags &amp; <a class="code" href="../../d9/dab/posixwait_8h.html#afa288d86b242c3005425a9c0f1682544">WNOHANG</a>) == 0)</div>
<div class="line"><a name="l03795"></a><span class="lineno"> 3795</span>&#160;    {</div>
<div class="line"><a name="l03796"></a><span class="lineno"> 3796</span>&#160;      <a class="code" href="../../db/dcc/error_8c.html#a18ffbfac4ece05ba6cc56c02d783a9ee">internal_warning</a> (<a class="code" href="../../d7/dcd/bashintl_8h.html#a86a239addea586602343007a370bf8ad">_</a>(<span class="stringliteral">&quot;waitchld: turning on WNOHANG to avoid indefinite block&quot;</span>));</div>
<div class="line"><a name="l03797"></a><span class="lineno"> 3797</span>&#160;      waitpid_flags |= <a class="code" href="../../d9/dab/posixwait_8h.html#afa288d86b242c3005425a9c0f1682544">WNOHANG</a>;</div>
<div class="line"><a name="l03798"></a><span class="lineno"> 3798</span>&#160;    }</div>
<div class="line"><a name="l03799"></a><span class="lineno"> 3799</span>&#160; </div>
<div class="line"><a name="l03800"></a><span class="lineno"> 3800</span>&#160;      <a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a> = <a class="code" href="../../df/d8e/jobs_8c.html#a3aa5418612f55083950f87b97f60ce33">WAITPID</a> (-1, &amp;<a class="code" href="../../d7/d5b/mail_8c.html#a6943d6e2e83995c648644bc0a4d36f53">status</a>, waitpid_flags);</div>
<div class="line"><a name="l03801"></a><span class="lineno"> 3801</span>&#160; </div>
<div class="line"><a name="l03802"></a><span class="lineno"> 3802</span>&#160;<span class="preprocessor">#if 0</span></div>
<div class="line"><a name="l03803"></a><span class="lineno"> 3803</span>&#160;<span class="keywordflow">if</span> (wpid != -1 &amp;&amp; block)</div>
<div class="line"><a name="l03804"></a><span class="lineno"> 3804</span>&#160;  itrace(<span class="stringliteral">&quot;waitchld: blocking waitpid returns %d&quot;</span>, <a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>);</div>
<div class="line"><a name="l03805"></a><span class="lineno"> 3805</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03806"></a><span class="lineno"> 3806</span>&#160;<span class="preprocessor">#if 0</span></div>
<div class="line"><a name="l03807"></a><span class="lineno"> 3807</span>&#160;<span class="keywordflow">if</span> (wpid != -1)</div>
<div class="line"><a name="l03808"></a><span class="lineno"> 3808</span>&#160;  itrace(<span class="stringliteral">&quot;waitchld: %s waitpid returns %d&quot;</span>, block?<span class="stringliteral">&quot;blocking&quot;</span>:<span class="stringliteral">&quot;non-blocking&quot;</span>, <a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>);</div>
<div class="line"><a name="l03809"></a><span class="lineno"> 3809</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03810"></a><span class="lineno"> 3810</span>&#160;      <span class="comment">/* WCONTINUED may be rejected by waitpid as invalid even when defined */</span></div>
<div class="line"><a name="l03811"></a><span class="lineno"> 3811</span>&#160;      <span class="keywordflow">if</span> (wcontinued &amp;&amp; <a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a> &lt; 0 &amp;&amp; <a class="code" href="../../df/d8e/jobs_8c.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> == <a class="code" href="../../d7/d8c/libc_2include_2errno_8h.html#a2d1678d5a7cc8ce499643f3b8957def4">EINVAL</a>)</div>
<div class="line"><a name="l03812"></a><span class="lineno"> 3812</span>&#160;    {</div>
<div class="line"><a name="l03813"></a><span class="lineno"> 3813</span>&#160;      wcontinued = 0;</div>
<div class="line"><a name="l03814"></a><span class="lineno"> 3814</span>&#160;      <span class="keywordflow">continue</span>; <span class="comment">/* jump back to the test and retry without WCONTINUED */</span></div>
<div class="line"><a name="l03815"></a><span class="lineno"> 3815</span>&#160;    }</div>
<div class="line"><a name="l03816"></a><span class="lineno"> 3816</span>&#160; </div>
<div class="line"><a name="l03817"></a><span class="lineno"> 3817</span>&#160;      <span class="comment">/* The check for WNOHANG is to make sure we decrement sigchld only</span></div>
<div class="line"><a name="l03818"></a><span class="lineno"> 3818</span>&#160;<span class="comment">     if it was non-zero before we called waitpid. */</span></div>
<div class="line"><a name="l03819"></a><span class="lineno"> 3819</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#aa332884f0c3ecd93a329263848b7fa04">sigchld</a> &gt; 0 &amp;&amp; (waitpid_flags &amp; <a class="code" href="../../d9/dab/posixwait_8h.html#afa288d86b242c3005425a9c0f1682544">WNOHANG</a>))</div>
<div class="line"><a name="l03820"></a><span class="lineno"> 3820</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#aa332884f0c3ecd93a329263848b7fa04">sigchld</a>--;</div>
<div class="line"><a name="l03821"></a><span class="lineno"> 3821</span>&#160; </div>
<div class="line"><a name="l03822"></a><span class="lineno"> 3822</span>&#160;      <span class="comment">/* If waitpid returns -1 with errno == ECHILD, there are no more</span></div>
<div class="line"><a name="l03823"></a><span class="lineno"> 3823</span>&#160;<span class="comment">     unwaited-for child processes of this shell. */</span></div>
<div class="line"><a name="l03824"></a><span class="lineno"> 3824</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a> &lt; 0 &amp;&amp; <a class="code" href="../../df/d8e/jobs_8c.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> == <a class="code" href="../../d7/d8c/libc_2include_2errno_8h.html#a47b42c351e0e011a048058d224205c0f">ECHILD</a>)</div>
<div class="line"><a name="l03825"></a><span class="lineno"> 3825</span>&#160;    {</div>
<div class="line"><a name="l03826"></a><span class="lineno"> 3826</span>&#160;      <span class="keywordflow">if</span> (children_exited == 0)</div>
<div class="line"><a name="l03827"></a><span class="lineno"> 3827</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l03828"></a><span class="lineno"> 3828</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l03829"></a><span class="lineno"> 3829</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03830"></a><span class="lineno"> 3830</span>&#160;    }</div>
<div class="line"><a name="l03831"></a><span class="lineno"> 3831</span>&#160; </div>
<div class="line"><a name="l03832"></a><span class="lineno"> 3832</span>&#160;<span class="preprocessor">#if 0</span></div>
<div class="line"><a name="l03833"></a><span class="lineno"> 3833</span>&#160;itrace(<span class="stringliteral">&quot;waitchld: waitpid returns %d block = %d children_exited = %d&quot;</span>, <a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, block, children_exited);</div>
<div class="line"><a name="l03834"></a><span class="lineno"> 3834</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03835"></a><span class="lineno"> 3835</span>&#160;      <span class="comment">/* If waitpid returns 0, there are running children.  If it returns -1,</span></div>
<div class="line"><a name="l03836"></a><span class="lineno"> 3836</span>&#160;<span class="comment">     the only other error POSIX says it can return is EINTR. */</span></div>
<div class="line"><a name="l03837"></a><span class="lineno"> 3837</span>&#160;      <a class="code" href="../../dd/d2b/quit_8h.html#a68c85871057165f09160a548f0e2246a">CHECK_TERMSIG</a>;</div>
<div class="line"><a name="l03838"></a><span class="lineno"> 3838</span>&#160;      <a class="code" href="../../dd/d2b/quit_8h.html#a18ba52f9ecddf2113babe44fac797709">CHECK_WAIT_INTR</a>;</div>
<div class="line"><a name="l03839"></a><span class="lineno"> 3839</span>&#160; </div>
<div class="line"><a name="l03840"></a><span class="lineno"> 3840</span>&#160;      <span class="comment">/* If waitpid returns -1/EINTR and the shell saw a SIGINT, then we</span></div>
<div class="line"><a name="l03841"></a><span class="lineno"> 3841</span>&#160;<span class="comment">     assume the child has blocked or handled SIGINT.  In that case, we</span></div>
<div class="line"><a name="l03842"></a><span class="lineno"> 3842</span>&#160;<span class="comment">     require the child to actually die due to SIGINT to act on the</span></div>
<div class="line"><a name="l03843"></a><span class="lineno"> 3843</span>&#160;<span class="comment">     SIGINT we received; otherwise we assume the child handled it and</span></div>
<div class="line"><a name="l03844"></a><span class="lineno"> 3844</span>&#160;<span class="comment">     let it go. */</span></div>
<div class="line"><a name="l03845"></a><span class="lineno"> 3845</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a> &lt; 0 &amp;&amp; <a class="code" href="../../df/d8e/jobs_8c.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> == <a class="code" href="../../d7/d8c/libc_2include_2errno_8h.html#a46b83d9f6c23b1b65a8cecfd775ddaed">EINTR</a> &amp;&amp; <a class="code" href="../../df/d8e/jobs_8c.html#acc216a9180c7ff0368811af940fe3c4f">wait_sigint_received</a>)</div>
<div class="line"><a name="l03846"></a><span class="lineno"> 3846</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#ad3281e6cc7874bc09819bc9f5afad595">child_caught_sigint</a> = 1;</div>
<div class="line"><a name="l03847"></a><span class="lineno"> 3847</span>&#160; </div>
<div class="line"><a name="l03848"></a><span class="lineno"> 3848</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a> &lt;= 0)</div>
<div class="line"><a name="l03849"></a><span class="lineno"> 3849</span>&#160;    <span class="keywordflow">continue</span>;   <span class="comment">/* jumps right to the test */</span></div>
<div class="line"><a name="l03850"></a><span class="lineno"> 3850</span>&#160; </div>
<div class="line"><a name="l03851"></a><span class="lineno"> 3851</span>&#160;      <span class="comment">/* Linux kernels appear to signal the parent but not interrupt the</span></div>
<div class="line"><a name="l03852"></a><span class="lineno"> 3852</span>&#160;<span class="comment">     waitpid() (or restart it even without SA_RESTART) on SIGINT, so if</span></div>
<div class="line"><a name="l03853"></a><span class="lineno"> 3853</span>&#160;<span class="comment">     we saw a SIGINT and the process exited or died due to some other</span></div>
<div class="line"><a name="l03854"></a><span class="lineno"> 3854</span>&#160;<span class="comment">     signal, assume the child caught the SIGINT. */</span></div>
<div class="line"><a name="l03855"></a><span class="lineno"> 3855</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#acc216a9180c7ff0368811af940fe3c4f">wait_sigint_received</a> &amp;&amp; (<a class="code" href="../../d7/d23/unionwait_8h.html#a6953e62fd0dec274a397678d31c344b4">WIFSIGNALED</a> (<a class="code" href="../../d7/d5b/mail_8c.html#a6943d6e2e83995c648644bc0a4d36f53">status</a>) == 0 || <a class="code" href="../../d7/d23/unionwait_8h.html#aeba4d421572a9d681c73c347f24ad348">WTERMSIG</a> (<a class="code" href="../../d7/d5b/mail_8c.html#a6943d6e2e83995c648644bc0a4d36f53">status</a>) != <a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a487309e3e9e0527535644115204a639a">SIGINT</a>))</div>
<div class="line"><a name="l03856"></a><span class="lineno"> 3856</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#ad3281e6cc7874bc09819bc9f5afad595">child_caught_sigint</a> = 1;</div>
<div class="line"><a name="l03857"></a><span class="lineno"> 3857</span>&#160; </div>
<div class="line"><a name="l03858"></a><span class="lineno"> 3858</span>&#160;      <span class="comment">/* If the child process did die due to SIGINT, forget our assumption</span></div>
<div class="line"><a name="l03859"></a><span class="lineno"> 3859</span>&#160;<span class="comment">     that it caught or otherwise handled it. */</span></div>
<div class="line"><a name="l03860"></a><span class="lineno"> 3860</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d7/d23/unionwait_8h.html#a6953e62fd0dec274a397678d31c344b4">WIFSIGNALED</a> (<a class="code" href="../../d7/d5b/mail_8c.html#a6943d6e2e83995c648644bc0a4d36f53">status</a>) &amp;&amp; <a class="code" href="../../d7/d23/unionwait_8h.html#aeba4d421572a9d681c73c347f24ad348">WTERMSIG</a> (<a class="code" href="../../d7/d5b/mail_8c.html#a6943d6e2e83995c648644bc0a4d36f53">status</a>) == <a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a487309e3e9e0527535644115204a639a">SIGINT</a>)</div>
<div class="line"><a name="l03861"></a><span class="lineno"> 3861</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#ad3281e6cc7874bc09819bc9f5afad595">child_caught_sigint</a> = 0;</div>
<div class="line"><a name="l03862"></a><span class="lineno"> 3862</span>&#160; </div>
<div class="line"><a name="l03863"></a><span class="lineno"> 3863</span>&#160;      <span class="comment">/* children_exited is used to run traps on SIGCHLD.  We don&#39;t want to</span></div>
<div class="line"><a name="l03864"></a><span class="lineno"> 3864</span>&#160;<span class="comment">     run the trap if a process is just being continued. */</span></div>
<div class="line"><a name="l03865"></a><span class="lineno"> 3865</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#ae5533b3213b8e81491aa4212ac8fc602">WIFCONTINUED</a>(<a class="code" href="../../d7/d5b/mail_8c.html#a6943d6e2e83995c648644bc0a4d36f53">status</a>) == 0)</div>
<div class="line"><a name="l03866"></a><span class="lineno"> 3866</span>&#160;    {</div>
<div class="line"><a name="l03867"></a><span class="lineno"> 3867</span>&#160;      children_exited++;</div>
<div class="line"><a name="l03868"></a><span class="lineno"> 3868</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a62da0e16fcd2ac8946942b8502ed3aef">c_living</a>--;</div>
<div class="line"><a name="l03869"></a><span class="lineno"> 3869</span>&#160;    }</div>
<div class="line"><a name="l03870"></a><span class="lineno"> 3870</span>&#160; </div>
<div class="line"><a name="l03871"></a><span class="lineno"> 3871</span>&#160;      <span class="comment">/* Locate our PROCESS for this pid. */</span></div>
<div class="line"><a name="l03872"></a><span class="lineno"> 3872</span>&#160;      <a class="code" href="../../d3/d16/pstree_8c.html#d6/d07/structchild">child</a> = <a class="code" href="../../df/d8e/jobs_8c.html#a16d3beacf583f9f0822f8b06b83695fe">find_process</a> (<a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, 1, &amp;<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>);  <span class="comment">/* want living procs only */</span></div>
<div class="line"><a name="l03873"></a><span class="lineno"> 3873</span>&#160; </div>
<div class="line"><a name="l03874"></a><span class="lineno"> 3874</span>&#160;<span class="preprocessor">#if defined (COPROCESS_SUPPORT)</span></div>
<div class="line"><a name="l03875"></a><span class="lineno"> 3875</span>&#160;      coproc_pidchk (<a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, <a class="code" href="../../d9/dab/posixwait_8h.html#a369bfd939bb8dd38f7f8813cc7aa3fdb">WSTATUS</a>(<a class="code" href="../../d7/d5b/mail_8c.html#a6943d6e2e83995c648644bc0a4d36f53">status</a>));</div>
<div class="line"><a name="l03876"></a><span class="lineno"> 3876</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03877"></a><span class="lineno"> 3877</span>&#160; </div>
<div class="line"><a name="l03878"></a><span class="lineno"> 3878</span>&#160;<span class="preprocessor">#if defined (PROCESS_SUBSTITUTION)</span></div>
<div class="line"><a name="l03879"></a><span class="lineno"> 3879</span>&#160;      <span class="comment">/* Only manipulate the list of process substitutions while SIGCHLD</span></div>
<div class="line"><a name="l03880"></a><span class="lineno"> 3880</span>&#160;<span class="comment">     is blocked. We only use this as a hint that we can remove FIFOs</span></div>
<div class="line"><a name="l03881"></a><span class="lineno"> 3881</span>&#160;<span class="comment">     or close file descriptors corresponding to terminated process</span></div>
<div class="line"><a name="l03882"></a><span class="lineno"> 3882</span>&#160;<span class="comment">     substitutions. */</span></div>
<div class="line"><a name="l03883"></a><span class="lineno"> 3883</span>&#160;      <span class="keywordflow">if</span> ((ind = find_procsub_child (<a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>)) &gt;= 0)</div>
<div class="line"><a name="l03884"></a><span class="lineno"> 3884</span>&#160;    set_procsub_status (ind, <a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, <a class="code" href="../../d9/dab/posixwait_8h.html#a369bfd939bb8dd38f7f8813cc7aa3fdb">WSTATUS</a> (<a class="code" href="../../d7/d5b/mail_8c.html#a6943d6e2e83995c648644bc0a4d36f53">status</a>));</div>
<div class="line"><a name="l03885"></a><span class="lineno"> 3885</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03886"></a><span class="lineno"> 3886</span>&#160; </div>
<div class="line"><a name="l03887"></a><span class="lineno"> 3887</span>&#160;      <span class="comment">/* It is not an error to have a child terminate that we did</span></div>
<div class="line"><a name="l03888"></a><span class="lineno"> 3888</span>&#160;<span class="comment">     not have a record of.  This child could have been part of</span></div>
<div class="line"><a name="l03889"></a><span class="lineno"> 3889</span>&#160;<span class="comment">     a pipeline in backquote substitution.  Even so, I&#39;m not</span></div>
<div class="line"><a name="l03890"></a><span class="lineno"> 3890</span>&#160;<span class="comment">     sure child is ever non-zero. */</span></div>
<div class="line"><a name="l03891"></a><span class="lineno"> 3891</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d3/d16/pstree_8c.html#d6/d07/structchild">child</a> == 0)</div>
<div class="line"><a name="l03892"></a><span class="lineno"> 3892</span>&#160;    {</div>
<div class="line"><a name="l03893"></a><span class="lineno"> 3893</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d7/d23/unionwait_8h.html#af9a4ddf9eee6c4a3bc9be070d59b7ccf">WIFEXITED</a> (<a class="code" href="../../d7/d5b/mail_8c.html#a6943d6e2e83995c648644bc0a4d36f53">status</a>) || <a class="code" href="../../d7/d23/unionwait_8h.html#a6953e62fd0dec274a397678d31c344b4">WIFSIGNALED</a> (<a class="code" href="../../d7/d5b/mail_8c.html#a6943d6e2e83995c648644bc0a4d36f53">status</a>))</div>
<div class="line"><a name="l03894"></a><span class="lineno"> 3894</span>&#160;        <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a9eba978ad89cdb8068837ea21189d4c9">c_reaped</a>++;</div>
<div class="line"><a name="l03895"></a><span class="lineno"> 3895</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03896"></a><span class="lineno"> 3896</span>&#160;    }</div>
<div class="line"><a name="l03897"></a><span class="lineno"> 3897</span>&#160; </div>
<div class="line"><a name="l03898"></a><span class="lineno"> 3898</span>&#160;      <span class="comment">/* Remember status, and whether or not the process is running. */</span></div>
<div class="line"><a name="l03899"></a><span class="lineno"> 3899</span>&#160;      <a class="code" href="../../d3/d16/pstree_8c.html#d6/d07/structchild">child</a>-&gt;status = <a class="code" href="../../d7/d5b/mail_8c.html#a6943d6e2e83995c648644bc0a4d36f53">status</a>;</div>
<div class="line"><a name="l03900"></a><span class="lineno"> 3900</span>&#160;      <a class="code" href="../../d3/d16/pstree_8c.html#d6/d07/structchild">child</a>-&gt;running = <a class="code" href="../../df/d8e/jobs_8c.html#ae5533b3213b8e81491aa4212ac8fc602">WIFCONTINUED</a>(<a class="code" href="../../d7/d5b/mail_8c.html#a6943d6e2e83995c648644bc0a4d36f53">status</a>) ? <a class="code" href="../../d3/d3a/jobs_8h.html#a228659160deea0a4abee765afda81df3">PS_RUNNING</a> : <a class="code" href="../../d3/d3a/jobs_8h.html#ab3f16fed1877b48f617e7b3e8485723d">PS_DONE</a>;</div>
<div class="line"><a name="l03901"></a><span class="lineno"> 3901</span>&#160; </div>
<div class="line"><a name="l03902"></a><span class="lineno"> 3902</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d3/d3a/jobs_8h.html#aa950db8c4a3fa33f105de7e9526696f6">PEXITED</a> (<a class="code" href="../../d3/d16/pstree_8c.html#d6/d07/structchild">child</a>))</div>
<div class="line"><a name="l03903"></a><span class="lineno"> 3903</span>&#160;    {</div>
<div class="line"><a name="l03904"></a><span class="lineno"> 3904</span>&#160;      <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a7004d60376bd1c7c3885598bc1038603">c_totreaped</a>++;</div>
<div class="line"><a name="l03905"></a><span class="lineno"> 3905</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a> != <a class="code" href="../../d3/d3a/jobs_8h.html#a6eba094b1ac1bc00e5883edd166bd944">NO_JOB</a>)</div>
<div class="line"><a name="l03906"></a><span class="lineno"> 3906</span>&#160;        <a class="code" href="../../df/d8e/jobs_8c.html#afed1e71c6cd6951355514e19454fd26a">js</a>.<a class="code" href="../../d3/d3a/jobs_8h.html#a9eba978ad89cdb8068837ea21189d4c9">c_reaped</a>++;</div>
<div class="line"><a name="l03907"></a><span class="lineno"> 3907</span>&#160;    }</div>
<div class="line"><a name="l03908"></a><span class="lineno"> 3908</span>&#160; </div>
<div class="line"><a name="l03909"></a><span class="lineno"> 3909</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a> == <a class="code" href="../../d3/d3a/jobs_8h.html#a6eba094b1ac1bc00e5883edd166bd944">NO_JOB</a>)</div>
<div class="line"><a name="l03910"></a><span class="lineno"> 3910</span>&#160;    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03911"></a><span class="lineno"> 3911</span>&#160; </div>
<div class="line"><a name="l03912"></a><span class="lineno"> 3912</span>&#160;      call_set_current += <a class="code" href="../../df/d8e/jobs_8c.html#a5b699391d568903c90bbce6a46a744fb">set_job_status_and_cleanup</a> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>);</div>
<div class="line"><a name="l03913"></a><span class="lineno"> 3913</span>&#160; </div>
<div class="line"><a name="l03914"></a><span class="lineno"> 3914</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d3/d3a/jobs_8h.html#adc39613d1152c030190012a614856c69">STOPPED</a> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>))</div>
<div class="line"><a name="l03915"></a><span class="lineno"> 3915</span>&#160;    last_stopped_job = <a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>;</div>
<div class="line"><a name="l03916"></a><span class="lineno"> 3916</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d3/d3a/jobs_8h.html#a15d782ba433bae3ec145926e26c9ea37">DEADJOB</a> (<a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>) &amp;&amp; last_stopped_job == <a class="code" href="../../d1/dbe/ash_8c.html#d3/d8c/structjob">job</a>)</div>
<div class="line"><a name="l03917"></a><span class="lineno"> 3917</span>&#160;    last_stopped_job = <a class="code" href="../../d3/d3a/jobs_8h.html#a6eba094b1ac1bc00e5883edd166bd944">NO_JOB</a>;</div>
<div class="line"><a name="l03918"></a><span class="lineno"> 3918</span>&#160;    }</div>
<div class="line"><a name="l03919"></a><span class="lineno"> 3919</span>&#160;  <span class="keywordflow">while</span> ((<a class="code" href="../../df/d8e/jobs_8c.html#aa332884f0c3ecd93a329263848b7fa04">sigchld</a> || block == 0) &amp;&amp; <a class="code" href="../../d0/d43/mconf_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a> &gt; (<a class="code" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a>)0);</div>
<div class="line"><a name="l03920"></a><span class="lineno"> 3920</span>&#160; </div>
<div class="line"><a name="l03921"></a><span class="lineno"> 3921</span>&#160;  <span class="comment">/* If a job was running and became stopped, then set the current</span></div>
<div class="line"><a name="l03922"></a><span class="lineno"> 3922</span>&#160;<span class="comment">     job.  Otherwise, don&#39;t change a thing. */</span></div>
<div class="line"><a name="l03923"></a><span class="lineno"> 3923</span>&#160;  <span class="keywordflow">if</span> (call_set_current)</div>
<div class="line"><a name="l03924"></a><span class="lineno"> 3924</span>&#160;    {</div>
<div class="line"><a name="l03925"></a><span class="lineno"> 3925</span>&#160;      <span class="keywordflow">if</span> (last_stopped_job != <a class="code" href="../../d3/d3a/jobs_8h.html#a6eba094b1ac1bc00e5883edd166bd944">NO_JOB</a>)</div>
<div class="line"><a name="l03926"></a><span class="lineno"> 3926</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#a418c0d4ef10f2149706710f16d250882">set_current_job</a> (last_stopped_job);</div>
<div class="line"><a name="l03927"></a><span class="lineno"> 3927</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l03928"></a><span class="lineno"> 3928</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#a8461670b988ab55fb068f3546e2dbceb">reset_current</a> ();</div>
<div class="line"><a name="l03929"></a><span class="lineno"> 3929</span>&#160;    }</div>
<div class="line"><a name="l03930"></a><span class="lineno"> 3930</span>&#160; </div>
<div class="line"><a name="l03931"></a><span class="lineno"> 3931</span>&#160;  <span class="comment">/* Call a SIGCHLD trap handler for each child that exits, if one is set. */</span></div>
<div class="line"><a name="l03932"></a><span class="lineno"> 3932</span>&#160;  <span class="keywordflow">if</span> (children_exited &amp;&amp;</div>
<div class="line"><a name="l03933"></a><span class="lineno"> 3933</span>&#160;      (<a class="code" href="../../d5/da5/zread_8c.html#a40264baa053bf7ccf2ef5ca345d6c06d">signal_is_trapped</a> (<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a0e63521a64cc8bc2b91d36a87d32c9f8">SIGCHLD</a>) || <a class="code" href="../../dc/d6f/trap_8c.html#a7cf60d977315aec850dad2b180456c68">trap_list</a>[<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a0e63521a64cc8bc2b91d36a87d32c9f8">SIGCHLD</a>] == (<span class="keywordtype">char</span> *)<a class="code" href="../../d7/d0b/trap_8h.html#ad6d715345cca14e7a5249379c7d5b311">IMPOSSIBLE_TRAP_HANDLER</a>) &amp;&amp;</div>
<div class="line"><a name="l03934"></a><span class="lineno"> 3934</span>&#160;      <a class="code" href="../../dc/d6f/trap_8c.html#a7cf60d977315aec850dad2b180456c68">trap_list</a>[<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a0e63521a64cc8bc2b91d36a87d32c9f8">SIGCHLD</a>] != (<span class="keywordtype">char</span> *)<a class="code" href="../../d7/d0b/trap_8h.html#add9a45bdcd18ad881beba6d46b6ebf3f">IGNORE_SIG</a>)</div>
<div class="line"><a name="l03935"></a><span class="lineno"> 3935</span>&#160;    {</div>
<div class="line"><a name="l03936"></a><span class="lineno"> 3936</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d4f/shell_8c.html#a15b0e48465dfc17e94173c63e10b57cc">posixly_correct</a> &amp;&amp; <a class="code" href="../../de/da3/bash_2builtins_2common_8c.html#a90f34313402c8392a46af2a5d3147d89">this_shell_builtin</a> &amp;&amp; <a class="code" href="../../de/da3/bash_2builtins_2common_8c.html#a90f34313402c8392a46af2a5d3147d89">this_shell_builtin</a> == wait_builtin)</div>
<div class="line"><a name="l03937"></a><span class="lineno"> 3937</span>&#160;    {</div>
<div class="line"><a name="l03938"></a><span class="lineno"> 3938</span>&#160;      <span class="comment">/* This was trap_handler (SIGCHLD) but that can lose traps if</span></div>
<div class="line"><a name="l03939"></a><span class="lineno"> 3939</span>&#160;<span class="comment">         children_exited &gt; 1 */</span></div>
<div class="line"><a name="l03940"></a><span class="lineno"> 3940</span>&#160;      queue_sigchld_trap (children_exited);</div>
<div class="line"><a name="l03941"></a><span class="lineno"> 3941</span>&#160;      <a class="code" href="../../dc/d6f/trap_8c.html#a935bd11f5afa23a8520efd4b6e10614d">wait_signal_received</a> = <a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a0e63521a64cc8bc2b91d36a87d32c9f8">SIGCHLD</a>;</div>
<div class="line"><a name="l03942"></a><span class="lineno"> 3942</span>&#160;      <span class="comment">/* If we&#39;re in a signal handler, let CHECK_WAIT_INTR pick it up;</span></div>
<div class="line"><a name="l03943"></a><span class="lineno"> 3943</span>&#160;<span class="comment">         run_pending_traps will call run_sigchld_trap later  */</span></div>
<div class="line"><a name="l03944"></a><span class="lineno"> 3944</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#aa332884f0c3ecd93a329263848b7fa04">sigchld</a> == 0 &amp;&amp; <a class="code" href="../../df/d28/bash_2builtins_2common_8h.html#ad2accf6d6351e826ee6cbdc06f946f11">wait_intr_flag</a>)</div>
<div class="line"><a name="l03945"></a><span class="lineno"> 3945</span>&#160;        <a class="code" href="../../d5/de0/include_2posixjmp_8h.html#abb496f9af211ed8477d4b5fda7d7364b">sh_longjmp</a> (<a class="code" href="../../da/d23/bashjmp_8h.html#a89d0152483195257de262e224716fcc1">wait_intr_buf</a>, 1);</div>
<div class="line"><a name="l03946"></a><span class="lineno"> 3946</span>&#160;    }</div>
<div class="line"><a name="l03947"></a><span class="lineno"> 3947</span>&#160;      <span class="comment">/* If not in posix mode and not executing the wait builtin, queue the</span></div>
<div class="line"><a name="l03948"></a><span class="lineno"> 3948</span>&#160;<span class="comment">     signal for later handling.  Run the trap immediately if we are</span></div>
<div class="line"><a name="l03949"></a><span class="lineno"> 3949</span>&#160;<span class="comment">     executing the wait builtin, but don&#39;t break out of `wait&#39;. */</span></div>
<div class="line"><a name="l03950"></a><span class="lineno"> 3950</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../df/d8e/jobs_8c.html#aa332884f0c3ecd93a329263848b7fa04">sigchld</a>) <span class="comment">/* called from signal handler */</span></div>
<div class="line"><a name="l03951"></a><span class="lineno"> 3951</span>&#160;    queue_sigchld_trap (children_exited);</div>
<div class="line"><a name="l03952"></a><span class="lineno"> 3952</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../dc/d6f/trap_8c.html#ab3585b649c1f746ad83b78edef0a9819">signal_in_progress</a> (<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a0e63521a64cc8bc2b91d36a87d32c9f8">SIGCHLD</a>))</div>
<div class="line"><a name="l03953"></a><span class="lineno"> 3953</span>&#160;    queue_sigchld_trap (children_exited);     </div>
<div class="line"><a name="l03954"></a><span class="lineno"> 3954</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../dc/d6f/trap_8c.html#a7cf60d977315aec850dad2b180456c68">trap_list</a>[<a class="code" href="../../df/dff/libc_2include_2signal_8h.html#a0e63521a64cc8bc2b91d36a87d32c9f8">SIGCHLD</a>] == (<span class="keywordtype">char</span> *)<a class="code" href="../../d7/d0b/trap_8h.html#ad6d715345cca14e7a5249379c7d5b311">IMPOSSIBLE_TRAP_HANDLER</a>)</div>
<div class="line"><a name="l03955"></a><span class="lineno"> 3955</span>&#160;    queue_sigchld_trap (children_exited);</div>
<div class="line"><a name="l03956"></a><span class="lineno"> 3956</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../dc/d6f/trap_8c.html#a9b6de60b5394cd9997c12ffa402bdb76">running_trap</a>)</div>
<div class="line"><a name="l03957"></a><span class="lineno"> 3957</span>&#160;    queue_sigchld_trap (children_exited);</div>
<div class="line"><a name="l03958"></a><span class="lineno"> 3958</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../de/da3/bash_2builtins_2common_8c.html#a90f34313402c8392a46af2a5d3147d89">this_shell_builtin</a> == wait_builtin)</div>
<div class="line"><a name="l03959"></a><span class="lineno"> 3959</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#abdbc0219d409378ba6c6732891257457">run_sigchld_trap</a> (children_exited); <span class="comment">/* XXX */</span></div>
<div class="line"><a name="l03960"></a><span class="lineno"> 3960</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l03961"></a><span class="lineno"> 3961</span>&#160;    queue_sigchld_trap (children_exited);</div>
<div class="line"><a name="l03962"></a><span class="lineno"> 3962</span>&#160;    }</div>
<div class="line"><a name="l03963"></a><span class="lineno"> 3963</span>&#160; </div>
<div class="line"><a name="l03964"></a><span class="lineno"> 3964</span>&#160;  <span class="comment">/* We have successfully recorded the useful information about this process</span></div>
<div class="line"><a name="l03965"></a><span class="lineno"> 3965</span>&#160;<span class="comment">     that has just changed state.  If we notify asynchronously, and the job</span></div>
<div class="line"><a name="l03966"></a><span class="lineno"> 3966</span>&#160;<span class="comment">     that this process belongs to is no longer running, then notify the user</span></div>
<div class="line"><a name="l03967"></a><span class="lineno"> 3967</span>&#160;<span class="comment">     of that fact now. */</span></div>
<div class="line"><a name="l03968"></a><span class="lineno"> 3968</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d8/d70/flags_8c.html#a3887d369fc9987f2ba0c9f5b8bd6dfbc">asynchronous_notification</a> &amp;&amp; <a class="code" href="../../d6/d4f/shell_8c.html#aeb39d5d8ddd4957f1b01720fa0e37e36">interactive</a> &amp;&amp; <a class="code" href="../../de/d3d/execute__cmd_8c.html#a45e5b34044beedf4b9dbbcca9d3021e1">executing_builtin</a> == 0)</div>
<div class="line"><a name="l03969"></a><span class="lineno"> 3969</span>&#160;    <a class="code" href="../../df/d8e/jobs_8c.html#a4d9c4222b40edc2f52cb70d3df978b22">notify_of_job_status</a> ();</div>
<div class="line"><a name="l03970"></a><span class="lineno"> 3970</span>&#160; </div>
<div class="line"><a name="l03971"></a><span class="lineno"> 3971</span>&#160;  <span class="keywordflow">return</span> (children_exited);</div>
<div class="line"><a name="l03972"></a><span class="lineno"> 3972</span>&#160;}</div>
<div class="ttc" id="aexecute__cmd_8c_html_a45e5b34044beedf4b9dbbcca9d3021e1"><div class="ttname"><a href="../../de/d3d/execute__cmd_8c.html#a45e5b34044beedf4b9dbbcca9d3021e1">executing_builtin</a></div><div class="ttdeci">int executing_builtin</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d3d/execute__cmd_8c_source.html#l00238">execute_cmd.c:238</a></div></div>
<div class="ttc" id="ajobs_8c_html_a3aa5418612f55083950f87b97f60ce33"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a3aa5418612f55083950f87b97f60ce33">WAITPID</a></div><div class="ttdeci">#define WAITPID(pid, statusp, options)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l00131">jobs.c:131</a></div></div>
<div class="ttc" id="ajobs_8c_html_a5b699391d568903c90bbce6a46a744fb"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a5b699391d568903c90bbce6a46a744fb">set_job_status_and_cleanup</a></div><div class="ttdeci">static int set_job_status_and_cleanup(int job)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l03980">jobs.c:3980</a></div></div>
<div class="ttc" id="ajobs_8c_html_abdbc0219d409378ba6c6732891257457"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#abdbc0219d409378ba6c6732891257457">run_sigchld_trap</a></div><div class="ttdeci">void run_sigchld_trap(int nchild)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l04185">jobs.c:4185</a></div></div>
<div class="ttc" id="ajobs_8c_html_afcc090a70f53d677b748f4b1a4b896e6"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#afcc090a70f53d677b748f4b1a4b896e6">WCONTINUED</a></div><div class="ttdeci">#define WCONTINUED</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l00156">jobs.c:156</a></div></div>
<div class="ttc" id="ajobs_8h_html_a7004d60376bd1c7c3885598bc1038603"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#a7004d60376bd1c7c3885598bc1038603">jobstats::c_totreaped</a></div><div class="ttdeci">int c_totreaped</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3a/jobs_8h_source.html#l00142">jobs.h:142</a></div></div>
<div class="ttc" id="alibc_2include_2errno_8h_html_a2d1678d5a7cc8ce499643f3b8957def4"><div class="ttname"><a href="../../d7/d8c/libc_2include_2errno_8h.html#a2d1678d5a7cc8ce499643f3b8957def4">EINVAL</a></div><div class="ttdeci">#define EINVAL</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d8c/libc_2include_2errno_8h_source.html#l00025">errno.h:25</a></div></div>
<div class="ttc" id="alibc_2include_2errno_8h_html_a46b83d9f6c23b1b65a8cecfd775ddaed"><div class="ttname"><a href="../../d7/d8c/libc_2include_2errno_8h.html#a46b83d9f6c23b1b65a8cecfd775ddaed">EINTR</a></div><div class="ttdeci">#define EINTR</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d8c/libc_2include_2errno_8h_source.html#l00007">errno.h:7</a></div></div>
<div class="ttc" id="aposixwait_8h_html_aecac6945e3b08baa2602557c684d6bfe"><div class="ttname"><a href="../../d9/dab/posixwait_8h.html#aecac6945e3b08baa2602557c684d6bfe">WUNTRACED</a></div><div class="ttdeci">#define WUNTRACED</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dab/posixwait_8h_source.html#l00048">posixwait.h:48</a></div></div>
<div class="ttc" id="aposixwait_8h_html_afa288d86b242c3005425a9c0f1682544"><div class="ttname"><a href="../../d9/dab/posixwait_8h.html#afa288d86b242c3005425a9c0f1682544">WNOHANG</a></div><div class="ttdeci">#define WNOHANG</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dab/posixwait_8h_source.html#l00047">posixwait.h:47</a></div></div>
<div class="ttc" id="atrap_8c_html_ab3585b649c1f746ad83b78edef0a9819"><div class="ttname"><a href="../../dc/d6f/trap_8c.html#ab3585b649c1f746ad83b78edef0a9819">signal_in_progress</a></div><div class="ttdeci">int signal_in_progress(int sig)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d6f/trap_8c_source.html#l01553">trap.c:1553</a></div></div>
<div class="ttc" id="atrap_8h_html_ad6d715345cca14e7a5249379c7d5b311"><div class="ttname"><a href="../../d7/d0b/trap_8h.html#ad6d715345cca14e7a5249379c7d5b311">IMPOSSIBLE_TRAP_HANDLER</a></div><div class="ttdeci">#define IMPOSSIBLE_TRAP_HANDLER</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0b/trap_8h_source.html#l00053">trap.h:53</a></div></div>
<div class="ttc" id="atrap_8h_html_add9a45bdcd18ad881beba6d46b6ebf3f"><div class="ttname"><a href="../../d7/d0b/trap_8h.html#add9a45bdcd18ad881beba6d46b6ebf3f">IGNORE_SIG</a></div><div class="ttdeci">#define IGNORE_SIG</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d0b/trap_8h_source.html#l00037">trap.h:37</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/dcd/bashintl_8h_source.html#l00036">_</a>, <a class="el" href="../../d8/d70/flags_8c_source.html#l00051">asynchronous_notification</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00137">jobstats::c_living</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00138">jobstats::c_reaped</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00142">jobstats::c_totreaped</a>, <a class="el" href="../../dd/d2b/quit_8h_source.html#l00052">CHECK_TERMSIG</a>, <a class="el" href="../../dd/d2b/quit_8h_source.html#l00060">CHECK_WAIT_INTR</a>, <a class="el" href="../../d1/d0c/posix__spawn_8c_source.html#l00031">child()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02722">child_caught_sigint</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00100">DEADJOB</a>, <a class="el" href="../../d7/d8c/libc_2include_2errno_8h_source.html#l00013">ECHILD</a>, <a class="el" href="../../d7/d8c/libc_2include_2errno_8h_source.html#l00007">EINTR</a>, <a class="el" href="../../d7/d8c/libc_2include_2errno_8h_source.html#l00025">EINVAL</a>, <a class="el" href="../../df/d8e/jobs_8c.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../de/d3d/execute__cmd_8c_source.html#l00238">executing_builtin</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01748">find_process()</a>, <a class="el" href="../../d7/d0b/trap_8h_source.html#l00037">IGNORE_SIG</a>, <a class="el" href="../../d7/d0b/trap_8h_source.html#l00053">IMPOSSIBLE_TRAP_HANDLER</a>, <a class="el" href="../../d6/d4f/shell_8c_source.html#l00139">interactive</a>, <a class="el" href="../../db/dcc/error_8c_source.html#l00256">internal_warning()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00222">job_control</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00175">js</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00193">NO_JOB</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04235">notify_of_job_status()</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00083">PEXITED</a>, <a class="el" href="../../d0/d43/mconf_8c_source.html#l00450">pid</a>, <a class="el" href="../../d6/d4f/shell_8c_source.html#l00237">posixly_correct</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00058">PS_DONE</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00059">PS_RUNNING</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00318">queue_sigchld</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l03482">reset_current()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04185">run_sigchld_trap()</a>, <a class="el" href="../../dc/d6f/trap_8c_source.html#l00114">running_trap</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l03421">set_current_job()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l03980">set_job_status_and_cleanup()</a>, <a class="el" href="../../d5/de0/include_2posixjmp_8h_source.html#l00043">sh_longjmp</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00317">sigchld</a>, <a class="el" href="../../df/dff/libc_2include_2signal_8h_source.html#l00058">SIGCHLD</a>, <a class="el" href="../../df/dff/libc_2include_2signal_8h_source.html#l00013">SIGINT</a>, <a class="el" href="../../dc/d6f/trap_8c_source.html#l01553">signal_in_progress()</a>, <a class="el" href="../../dc/d6f/trap_8c_source.html#l01503">signal_is_trapped()</a>, <a class="el" href="../../d7/d5b/mail_8c.html#a6943d6e2e83995c648644bc0a4d36f53">status</a>, <a class="el" href="../../d3/d3a/jobs_8h_source.html#l00098">STOPPED</a>, <a class="el" href="../../de/d3d/execute__cmd_8c_source.html#l00250">subshell_environment</a>, <a class="el" href="../../de/da3/bash_2builtins_2common_8c_source.html#l00075">this_shell_builtin</a>, <a class="el" href="../../dc/d6f/trap_8c_source.html#l00105">trap_list</a>, <a class="el" href="../../da/d23/bashjmp_8h.html#a89d0152483195257de262e224716fcc1">wait_intr_buf</a>, <a class="el" href="../../df/d28/bash_2builtins_2common_8h.html#ad2accf6d6351e826ee6cbdc06f946f11">wait_intr_flag</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02721">wait_sigint_received</a>, <a class="el" href="../../dc/d6f/trap_8c_source.html#l00120">wait_signal_received</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00131">WAITPID</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00156">WCONTINUED</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00159">WIFCONTINUED</a>, <a class="el" href="../../d7/d23/unionwait_8h_source.html#l00090">WIFEXITED</a>, <a class="el" href="../../d7/d23/unionwait_8h_source.html#l00091">WIFSIGNALED</a>, <a class="el" href="../../d9/dab/posixwait_8h_source.html#l00047">WNOHANG</a>, <a class="el" href="../../d9/dab/posixwait_8h_source.html#l00039">WSTATUS</a>, <a class="el" href="../../d7/d23/unionwait_8h_source.html#l00093">WTERMSIG</a>, and <a class="el" href="../../d9/dab/posixwait_8h_source.html#l00048">WUNTRACED</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l02121">make_child()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l03741">sigchld_handler()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l02899">wait_for()</a>.</p>

</div>
</div>
<a id="ab9244e49349e5265eef7d020233848ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9244e49349e5265eef7d020233848ae">&#9670;&nbsp;</a></span>without_job_control()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void without_job_control </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l04997">4997</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>
<div class="fragment"><div class="line"><a name="l04998"></a><span class="lineno"> 4998</span>&#160;{</div>
<div class="line"><a name="l04999"></a><span class="lineno"> 4999</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#a5d4feeb769d599bb634672546e5a19ff">stop_making_children</a> ();</div>
<div class="line"><a name="l05000"></a><span class="lineno"> 5000</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#a718ce465ffb026f4a2b67b4a6eab4761">start_pipeline</a> ();</div>
<div class="line"><a name="l05001"></a><span class="lineno"> 5001</span>&#160;<span class="preprocessor">#if defined (PGRP_PIPE)</span></div>
<div class="line"><a name="l05002"></a><span class="lineno"> 5002</span>&#160;  <a class="code" href="../../d1/dca/general_8c.html#a15a0132090e9b69be30a74639f45503e">sh_closepipe</a> (pgrp_pipe);</div>
<div class="line"><a name="l05003"></a><span class="lineno"> 5003</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l05004"></a><span class="lineno"> 5004</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#ab54a0986c5e457b5d7941b97a4bdce80">delete_all_jobs</a> (0);</div>
<div class="line"><a name="l05005"></a><span class="lineno"> 5005</span>&#160;  <a class="code" href="../../df/d8e/jobs_8c.html#a95d21d57cdf01784017ec41245a7ccf2">set_job_control</a> (0);</div>
<div class="line"><a name="l05006"></a><span class="lineno"> 5006</span>&#160;}</div>
<div class="ttc" id="ajobs_8c_html_a95d21d57cdf01784017ec41245a7ccf2"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#a95d21d57cdf01784017ec41245a7ccf2">set_job_control</a></div><div class="ttdeci">int set_job_control(int arg)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l04958">jobs.c:4958</a></div></div>
<div class="ttc" id="ajobs_8c_html_ab54a0986c5e457b5d7941b97a4bdce80"><div class="ttname"><a href="../../df/d8e/jobs_8c.html#ab54a0986c5e457b5d7941b97a4bdce80">delete_all_jobs</a></div><div class="ttdeci">void delete_all_jobs(int running_only)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/jobs_8c_source.html#l04712">jobs.c:4712</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/d8e/jobs_8c_source.html#l04712">delete_all_jobs()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04958">set_job_control()</a>, <a class="el" href="../../d1/dca/general_8c_source.html#l00730">sh_closepipe()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00523">start_pipeline()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l00431">stop_making_children()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d3d/execute__cmd_8c_source.html#l05586">execute_disk_command()</a>, <a class="el" href="../../de/d3d/execute__cmd_8c_source.html#l01477">execute_in_subshell()</a>, <a class="el" href="../../de/d3d/execute__cmd_8c_source.html#l05316">execute_subshell_builtin_or_function()</a>, and <a class="el" href="../../de/d3d/execute__cmd_8c_source.html#l05874">initialize_subshell()</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ab73b81916e1b9c693ec186cb41e9f4e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab73b81916e1b9c693ec186cb41e9f4e5">&#9670;&nbsp;</a></span>already_making_children</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int already_making_children = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00228">228</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d3d/execute__cmd_8c_source.html#l00573">execute_command_internal()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00421">making_children()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00497">restore_pipeline()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00479">save_pipeline()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l00431">stop_making_children()</a>.</p>

</div>
</div>
<a id="a402293945126f92a09d7cc87aee212a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a402293945126f92a09d7cc87aee212a9">&#9670;&nbsp;</a></span>bgpids</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d3/d3a/jobs_8h.html#d9/deb/structbgpids">bgpids</a> <a class="el" href="../../d3/d3a/jobs_8h.html#d9/deb/structbgpids">bgpids</a> = { 0, 0, 0, 0 }</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00177">177</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>

</div>
</div>
<a id="a27ab938bc70e7696ed8fc9e10a4834c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27ab938bc70e7696ed8fc9e10a4834c4">&#9670;&nbsp;</a></span>check_window_size</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int check_window_size = <a class="el" href="../../d8/d20/config-top_8h.html#a533e5612b0a36f3dde51f89fb40c87f0">CHECKWINSIZE_DEFAULT</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00232">232</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dca/general_8c_source.html#l01431">default_columns()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02471">get_tty_state()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l02899">wait_for()</a>.</p>

</div>
</div>
<a id="ad3281e6cc7874bc09819bc9f5afad595"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad3281e6cc7874bc09819bc9f5afad595">&#9670;&nbsp;</a></span>child_caught_sigint</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int child_caught_sigint</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l02722">2722</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l03980">set_job_status_and_cleanup()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02899">wait_for()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l03764">waitchld()</a>.</p>

</div>
</div>
<a id="ad65a8842cc674e3ddf69355898c0ecbf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad65a8842cc674e3ddf69355898c0ecbf">&#9670;&nbsp;</a></span>errno</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int errno</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l04641">give_terminal_to()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04370">initialize_job_control()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02121">make_child()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04683">maybe_give_terminal_to()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l05038">set_maxchild()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l03741">sigchld_handler()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02899">wait_for()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l03269">wait_for_any_job()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02648">wait_for_background_pids()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l03215">wait_for_job()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l03764">waitchld()</a>.</p>

</div>
</div>
<a id="a3002cbcd4a652dec2c5cef5ff3da446f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3002cbcd4a652dec2c5cef5ff3da446f">&#9670;&nbsp;</a></span>job_control</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int job_control = 1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00222">222</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l05012">end_job_control()</a>, <a class="el" href="../../de/d3d/execute__cmd_8c_source.html#l02689">execute_connection()</a>, <a class="el" href="../../de/d3d/execute__cmd_8c_source.html#l02496">execute_pipeline()</a>, <a class="el" href="../../de/d3d/execute__cmd_8c_source.html#l04355">execute_simple_command()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04641">give_terminal_to()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04370">initialize_job_control()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04590">initialize_job_signals()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02121">make_child()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04235">notify_of_job_status()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04958">set_job_control()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l03980">set_job_status_and_cleanup()</a>, <a class="el" href="../../de/d3d/execute__cmd_8c_source.html#l05539">setup_async_signals()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00523">start_pipeline()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00553">stop_pipeline()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02899">wait_for()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l03764">waitchld()</a>.</p>

</div>
</div>
<a id="a6cce913474372029492267b46b745d88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6cce913474372029492267b46b745d88">&#9670;&nbsp;</a></span>jobs</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d3a/jobs_8h.html#ad1f8bdd512539c00ae7093dfcbe0a473">JOB</a>** jobs = (<a class="el" href="../../d3/d3a/jobs_8h.html#ad1f8bdd512539c00ae7093dfcbe0a473">JOB</a> **)<a class="el" href="../../dc/d9b/include_2wchar_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00183">183</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l01529">append_process()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01210">cleanup_dead_jobs()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01367">compact_jobs_list()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04778">count_all_jobs()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04712">delete_all_jobs()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01386">delete_job()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01265">delete_old_job()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01764">find_job()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02546">find_last_proc()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01711">find_pipeline()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01661">hangup_all_jobs()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02813">job_signal_status()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l03665">kill_pid()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01596">map_over_jobs()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04801">mark_all_jobs_as_dead()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04827">mark_dead_jobs_as_notified()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l03377">most_recent_job_in_state()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04758">nohup_all_jobs()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01449">nohup_job()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04235">notify_of_job_status()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02034">pretty_print_job()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01933">print_pipeline()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01246">processes_in_job()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02835">raw_job_exit_status()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01290">realloc_jobs_list()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l03482">reset_current()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01170">reset_job_indices()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l03421">set_current_job()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l03516">set_job_running()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l03980">set_job_status_and_cleanup()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04155">setjstatus()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l03541">start_job()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00553">stop_pipeline()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01643">terminate_stopped_jobs()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02899">wait_for()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l03269">wait_for_any_job()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02648">wait_for_background_pids()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l03215">wait_for_job()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l02586">wait_for_single_pid()</a>.</p>

</div>
</div>
<a id="a57e47a8425e68a1907ac493cd673ca41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57e47a8425e68a1907ac493cd673ca41">&#9670;&nbsp;</a></span>jobs_list_frozen</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int jobs_list_frozen</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00346">346</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l01210">cleanup_dead_jobs()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01367">compact_jobs_list()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01386">delete_job()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04933">freeze_jobs_list()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l03353">notify_and_cleanup()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04185">run_sigchld_trap()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l03980">set_job_status_and_cleanup()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04949">set_jobs_list_frozen()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04943">unfreeze_jobs_list()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l03269">wait_for_any_job()</a>.</p>

</div>
</div>
<a id="afed1e71c6cd6951355514e19454fd26a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afed1e71c6cd6951355514e19454fd26a">&#9670;&nbsp;</a></span>js</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d3/d3a/jobs_8h.html#d9/dff/structjobstats">jobstats</a> js = { -1<a class="el" href="../../d1/df8/smatch_8c.html#a1f82449e0d84122ede24741e7fcfdd22">L</a>, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, <a class="el" href="../../d3/d3a/jobs_8h.html#a6eba094b1ac1bc00e5883edd166bd944">NO_JOB</a>, <a class="el" href="../../d3/d3a/jobs_8h.html#a6eba094b1ac1bc00e5883edd166bd944">NO_JOB</a>, 0, 0 }</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00172">172</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l01529">append_process()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00822">bgp_add()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00802">bgp_getindex()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00759">bgp_resize()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01210">cleanup_dead_jobs()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01367">compact_jobs_list()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04778">count_all_jobs()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04712">delete_all_jobs()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01386">delete_job()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01764">find_job()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01661">hangup_all_jobs()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00373">init_job_stats()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02121">make_child()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01596">map_over_jobs()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04801">mark_all_jobs_as_dead()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04827">mark_dead_jobs_as_notified()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04758">nohup_all_jobs()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01449">nohup_job()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04235">notify_of_job_status()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02034">pretty_print_job()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01290">realloc_jobs_list()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l03482">reset_current()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01170">reset_job_indices()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l03421">set_current_job()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l03980">set_job_status_and_cleanup()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l05038">set_maxchild()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l03541">start_job()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00553">stop_pipeline()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01643">terminate_stopped_jobs()</a>, <a class="el" href="../../d8/d98/jfs_8c_source.html#l00044">volume_id_probe_jfs()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02899">wait_for()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l03269">wait_for_any_job()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02648">wait_for_background_pids()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l03764">waitchld()</a>.</p>

</div>
</div>
<a id="a2819d9527c8d26be39bb531290f4b597"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2819d9527c8d26be39bb531290f4b597">&#9670;&nbsp;</a></span>last_asynchronous_pid</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d1/dd5/localcharset_8c.html#af55a5e48555be7d32ad73e76cf5d4db0">volatile</a> <a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a> last_asynchronous_pid = <a class="el" href="../../d3/d3a/jobs_8h.html#ad40327c746e8ef715109d9b9257eb991">NO_PID</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00216">216</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/d93/subst_8c_source.html#l06919">command_substitute()</a>, <a class="el" href="../../de/d3d/execute__cmd_8c_source.html#l00573">execute_command_internal()</a>, <a class="el" href="../../de/d3d/execute__cmd_8c_source.html#l04355">execute_simple_command()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02121">make_child()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04827">mark_dead_jobs_as_notified()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04235">notify_of_job_status()</a>, <a class="el" href="../../d1/d93/subst_8c_source.html#l10227">param_expand()</a>, <a class="el" href="../../d1/d93/subst_8c_source.html#l07987">parameter_brace_expand_length()</a>, and <a class="el" href="../../d6/ddd/push_8c_source.html#l00042">push_builtin()</a>.</p>

</div>
</div>
<a id="a6014bc30456423f628a211bf8007fbe0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6014bc30456423f628a211bf8007fbe0">&#9670;&nbsp;</a></span>last_made_pid</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d1/dd5/localcharset_8c.html#af55a5e48555be7d32ad73e76cf5d4db0">volatile</a> <a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a> last_made_pid = <a class="el" href="../../d3/d3a/jobs_8h.html#ad40327c746e8ef715109d9b9257eb991">NO_PID</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00213">213</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/d93/subst_8c_source.html#l06919">command_substitute()</a>, <a class="el" href="../../de/d3d/execute__cmd_8c_source.html#l00573">execute_command_internal()</a>, <a class="el" href="../../de/d3d/execute__cmd_8c_source.html#l02496">execute_pipeline()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02121">make_child()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l04185">run_sigchld_trap()</a>.</p>

</div>
</div>
<a id="a00b3fcd8506b159c50c98186435d1f13"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00b3fcd8506b159c50c98186435d1f13">&#9670;&nbsp;</a></span>last_procsub_child</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d3a/jobs_8h.html#aefa2ee881236dafa12ac2427bb9c5088">PROCESS</a>* last_procsub_child = (<a class="el" href="../../d3/d3a/jobs_8h.html#aefa2ee881236dafa12ac2427bb9c5088">PROCESS</a> *)<a class="el" href="../../dc/d9b/include_2wchar_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00234">234</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l01210">cleanup_dead_jobs()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l00453">discard_last_procsub_child()</a>.</p>

</div>
</div>
<a id="a2b18b8d320ae7eae035b6fdc7cf3111a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b18b8d320ae7eae035b6fdc7cf3111a">&#9670;&nbsp;</a></span>old_cont</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/db7/bash_2lib_2readline_2signals_8c.html#a1f8d6bb6b9aaad1c21141fc327620e99">SigHandler</a>* old_cont = (<a class="el" href="../../dd/db7/bash_2lib_2readline_2signals_8c.html#a1f8d6bb6b9aaad1c21141fc327620e99">SigHandler</a> *)<a class="el" href="../../de/d2b/musl_2include_2signal_8h.html#a27d5dc561093d6243542e6a2465bc0f8">SIG_DFL</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00336">336</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l04611">sigcont_sighandler()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l04623">sigstop_sighandler()</a>.</p>

</div>
</div>
<a id="ae15b67160f6705f527ba4c23e11e64d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae15b67160f6705f527ba4c23e11e64d3">&#9670;&nbsp;</a></span>old_sigint_handler</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/db7/bash_2lib_2readline_2signals_8c.html#a1f8d6bb6b9aaad1c21141fc327620e99">SigHandler</a>* old_sigint_handler = <a class="el" href="../../d8/d8d/nojobs_8c.html#a4236e83af520841a9f9b18cab6952df1">INVALID_SIGNAL_HANDLER</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l02719">2719</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l02736">restore_sigint_handler()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l03980">set_job_status_and_cleanup()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l02899">wait_for()</a>.</p>

</div>
</div>
<a id="a2117a3ea7b950d08a1de610d18291bf1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2117a3ea7b950d08a1de610d18291bf1">&#9670;&nbsp;</a></span>old_tstp</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/db7/bash_2lib_2readline_2signals_8c.html#a1f8d6bb6b9aaad1c21141fc327620e99">SigHandler</a>* old_tstp</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00335">335</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l04590">initialize_job_signals()</a>, <a class="el" href="../../dd/db7/bash_2lib_2readline_2signals_8c_source.html#l00514">rl_clear_signals()</a>, <a class="el" href="../../dd/db7/bash_2lib_2readline_2signals_8c_source.html#l00408">rl_set_signals()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l04623">sigstop_sighandler()</a>.</p>

</div>
</div>
<a id="a0c33b0e2f430ff18bc36dd8fa19c14d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c33b0e2f430ff18bc36dd8fa19c14d1">&#9670;&nbsp;</a></span>old_ttin</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/db7/bash_2lib_2readline_2signals_8c.html#a1f8d6bb6b9aaad1c21141fc327620e99">SigHandler</a> * old_ttin</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00335">335</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l04590">initialize_job_signals()</a>, <a class="el" href="../../dd/db7/bash_2lib_2readline_2signals_8c_source.html#l00514">rl_clear_signals()</a>, <a class="el" href="../../dd/db7/bash_2lib_2readline_2signals_8c_source.html#l00408">rl_set_signals()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l04623">sigstop_sighandler()</a>.</p>

</div>
</div>
<a id="a6c44b645419b61a2eeab9833fe2abc97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c44b645419b61a2eeab9833fe2abc97">&#9670;&nbsp;</a></span>old_ttou</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/db7/bash_2lib_2readline_2signals_8c.html#a1f8d6bb6b9aaad1c21141fc327620e99">SigHandler</a> * old_ttou</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00335">335</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l04590">initialize_job_signals()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04235">notify_of_job_status()</a>, <a class="el" href="../../dd/db7/bash_2lib_2readline_2signals_8c_source.html#l00514">rl_clear_signals()</a>, <a class="el" href="../../dd/db7/bash_2lib_2readline_2signals_8c_source.html#l00408">rl_set_signals()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l04623">sigstop_sighandler()</a>.</p>

</div>
</div>
<a id="a927de0d08067183bd327b538a1b77f73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a927de0d08067183bd327b538a1b77f73">&#9670;&nbsp;</a></span>original_pgrp</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a> original_pgrp = <a class="el" href="../../d3/d3a/jobs_8h.html#ad40327c746e8ef715109d9b9257eb991">NO_PID</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00200">200</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l05012">end_job_control()</a>, <a class="el" href="../../de/d3d/execute__cmd_8c_source.html#l01477">execute_in_subshell()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l04370">initialize_job_control()</a>.</p>

</div>
</div>
<a id="a09b47218f3174e8bc8f36377308fd33a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09b47218f3174e8bc8f36377308fd33a">&#9670;&nbsp;</a></span>original_signals</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/db7/bash_2lib_2readline_2signals_8c.html#a1f8d6bb6b9aaad1c21141fc327620e99">SigHandler</a>** original_signals</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d6f/trap_8c_source.html#l00098">98</a> of file <a class="el" href="../../dc/d6f/trap_8c_source.html">trap.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d6f/trap_8c_source.html#l00868">get_original_signal()</a>, <a class="el" href="../../dc/d6f/trap_8c_source.html#l00147">initialize_traps()</a>, <a class="el" href="../../dc/d6f/trap_8c_source.html#l01317">reset_signal()</a>, <a class="el" href="../../dc/d6f/trap_8c_source.html#l00899">restore_default_signal()</a>, <a class="el" href="../../dc/d6f/trap_8c_source.html#l01327">restore_signal()</a>, <a class="el" href="../../dc/d6f/trap_8c_source.html#l00886">set_original_signal()</a>, <a class="el" href="../../dc/d6f/trap_8c_source.html#l00791">set_signal()</a>, <a class="el" href="../../dc/d6f/trap_8c_source.html#l01538">set_signal_hard_ignored()</a>, <a class="el" href="../../dc/d6f/trap_8c_source.html#l01546">set_signal_ignored()</a>, and <a class="el" href="../../dc/d6f/trap_8c_source.html#l00502">trap_handler()</a>.</p>

</div>
</div>
<a id="ad64c488ea31ee4a9aba985c9336bb0fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad64c488ea31ee4a9aba985c9336bb0fa">&#9670;&nbsp;</a></span>pidstat_table</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d3a/jobs_8h.html#a677d6488545fa3193e7cb54647b4ae5c">ps_index_t</a> pidstat_table[<a class="el" href="../../df/d8e/jobs_8c.html#aa52b3fc7fe43cf6aba78123f474f050a">PIDSTAT_TABLE_SZ</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00177">177</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l00759">bgp_resize()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l00812">pshash_getbucket()</a>.</p>

</div>
</div>
<a id="a4cf043826d84509527bdbcfbd5f68b68"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4cf043826d84509527bdbcfbd5f68b68">&#9670;&nbsp;</a></span>pipeline_pgrp</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a> pipeline_pgrp = (<a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a>)0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00203">203</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/d93/subst_8c_source.html#l06919">command_substitute()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02121">make_child()</a>, <a class="el" href="../../dc/d6f/trap_8c_source.html#l01183">run_debug_trap()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04958">set_job_control()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l03541">start_job()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00523">start_pipeline()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00553">stop_pipeline()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l01632">terminate_current_pipeline()</a>.</p>

</div>
</div>
<a id="a5def2bc94cab4967a7897b4591b7a883"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5def2bc94cab4967a7897b4591b7a883">&#9670;&nbsp;</a></span>procsubs</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d3/d3a/jobs_8h.html#da/dd5/structprocchain">procchain</a> procsubs = { 0, 0, 0 }</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00177">177</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l01711">find_pipeline()</a>.</p>

</div>
</div>
<a id="af553b22eef984c5245e4eae3e4a36cd5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af553b22eef984c5245e4eae3e4a36cd5">&#9670;&nbsp;</a></span>queue_sigchld</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int queue_sigchld</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00318">318</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l04235">notify_of_job_status()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l03741">sigchld_handler()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02899">wait_for()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02728">wait_sigint_cleanup()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l03764">waitchld()</a>.</p>

</div>
</div>
<a id="aac5dfe821e90fd3b3f3a0c4a0d1f09a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac5dfe821e90fd3b3f3a0c4a0d1f09a1">&#9670;&nbsp;</a></span>retcode_name_buffer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char retcode_name_buffer[64]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00348">348</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l01845">j_strsignal()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l01860">printable_job_status()</a>.</p>

</div>
</div>
<a id="ad2b44c9005c5a931c29ae6588e237636"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2b44c9005c5a931c29ae6588e237636">&#9670;&nbsp;</a></span>running_in_background</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int running_in_background = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00225">225</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l04370">initialize_job_control()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02121">make_child()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04683">maybe_give_terminal_to()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04958">set_job_control()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00553">stop_pipeline()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l02899">wait_for()</a>.</p>

</div>
</div>
<a id="a788ff02a9abd424b3160a4315e6cdbac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a788ff02a9abd424b3160a4315e6cdbac">&#9670;&nbsp;</a></span>saved_already_making_children</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int saved_already_making_children</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00340">340</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l00497">restore_pipeline()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l00479">save_pipeline()</a>.</p>

</div>
</div>
<a id="a60e714219004a4142832cea6d34ebc97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a60e714219004a4142832cea6d34ebc97">&#9670;&nbsp;</a></span>saved_pipeline</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d3/d3a/jobs_8h.html#d8/df7/structpipeline__saver">pipeline_saver</a>* saved_pipeline</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00339">339</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l01711">find_pipeline()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00497">restore_pipeline()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l00479">save_pipeline()</a>.</p>

</div>
</div>
<a id="a12352dc576f1c23274468beca1ccf916"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12352dc576f1c23274468beca1ccf916">&#9670;&nbsp;</a></span>shell_pgrp</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a> shell_pgrp = <a class="el" href="../../d3/d3a/jobs_8h.html#ad40327c746e8ef715109d9b9257eb991">NO_PID</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00194">194</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/d93/subst_8c_source.html#l06919">command_substitute()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l05012">end_job_control()</a>, <a class="el" href="../../d6/d90/hush_8c_source.html#l10227">hush_main()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04370">initialize_job_control()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l03665">kill_pid()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02121">make_child()</a>, <a class="el" href="../../db/dcc/error_8c_source.html#l00142">programming_error()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04958">set_job_control()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04623">sigstop_sighandler()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l03541">start_job()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00523">start_pipeline()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00553">stop_pipeline()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01632">terminate_current_pipeline()</a>, <a class="el" href="../../da/d12/sig_8c_source.html#l00401">throw_to_top_level()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l02899">wait_for()</a>.</p>

</div>
</div>
<a id="ae43d281c5f91cb3d7ad00fc46971b4da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae43d281c5f91cb3d7ad00fc46971b4da">&#9670;&nbsp;</a></span>shell_tty</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int shell_tty = -1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00191">191</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l04641">give_terminal_to()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04370">initialize_job_control()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04683">maybe_give_terminal_to()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l05027">restart_job_control()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l04958">set_job_control()</a>.</p>

</div>
</div>
<a id="ad9fe5481268cb2aed5102ece6ef18bbb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9fe5481268cb2aed5102ece6ef18bbb">&#9670;&nbsp;</a></span>shell_tty_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d0/d9e/shtty_8h.html#ae9c880f6a41e70ef8258f18fd3345067">TTYSTRUCT</a> shell_tty_info</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l02416">2416</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l02471">get_tty_state()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04534">set_new_line_discipline()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02508">set_tty_state()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l03541">start_job()</a>.</p>

</div>
</div>
<a id="aa332884f0c3ecd93a329263848b7fa04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa332884f0c3ecd93a329263848b7fa04">&#9670;&nbsp;</a></span>sigchld</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int sigchld</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00317">317</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l03741">sigchld_handler()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l03764">waitchld()</a>.</p>

</div>
</div>
<a id="a8635881c32ee192e781422e8234f603f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8635881c32ee192e781422e8234f603f">&#9670;&nbsp;</a></span>subst_assign_varlist</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d0/d09/command_8h.html#ab063e3018b56525d499b4215d6c745f0">WORD_LIST</a>* subst_assign_varlist</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d1/d93/subst_8c_source.html#l00177">177</a> of file <a class="el" href="../../d1/d93/subst_8c_source.html">subst.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l04185">run_sigchld_trap()</a>.</p>

</div>
</div>
<a id="aeb36f80c8f1667339f6f23318ff29b50"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb36f80c8f1667339f6f23318ff29b50">&#9670;&nbsp;</a></span>terminal_pgrp</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a63bef27b1fbd4a91faa273a387a38dc2">pid_t</a> terminal_pgrp = <a class="el" href="../../d3/d3a/jobs_8h.html#ad40327c746e8ef715109d9b9257eb991">NO_PID</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00197">197</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l05012">end_job_control()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04641">give_terminal_to()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04370">initialize_job_control()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04683">maybe_give_terminal_to()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l04958">set_job_control()</a>.</p>

</div>
</div>
<a id="a5efe88eb6aefb268d1259a51812164b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5efe88eb6aefb268d1259a51812164b2">&#9670;&nbsp;</a></span>the_pipeline</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d3a/jobs_8h.html#aefa2ee881236dafa12ac2427bb9c5088">PROCESS</a>* the_pipeline = (<a class="el" href="../../d3/d3a/jobs_8h.html#aefa2ee881236dafa12ac2427bb9c5088">PROCESS</a> *)<a class="el" href="../../dc/d9b/include_2wchar_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00219">219</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l01488">add_process()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00437">cleanup_the_pipeline()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l01711">find_pipeline()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02121">make_child()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00497">restore_pipeline()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l04185">run_sigchld_trap()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00479">save_pipeline()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l00523">start_pipeline()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l00553">stop_pipeline()</a>.</p>

</div>
</div>
<a id="acc216a9180c7ff0368811af940fe3c4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc216a9180c7ff0368811af940fe3c4f">&#9670;&nbsp;</a></span>wait_sigint_received</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int wait_sigint_received</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l02721">2721</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l03980">set_job_status_and_cleanup()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02899">wait_for()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02750">wait_sigint_handler()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l03764">waitchld()</a>.</p>

</div>
</div>
<a id="af3275b044b48a9ba5da272b925ba6d9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3275b044b48a9ba5da272b925ba6d9e">&#9670;&nbsp;</a></span>waiting_for_child</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int waiting_for_child</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l02724">2724</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l02736">restore_sigint_handler()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02899">wait_for()</a>, <a class="el" href="../../df/d8e/jobs_8c_source.html#l02728">wait_sigint_cleanup()</a>, and <a class="el" href="../../df/d8e/jobs_8c_source.html#l02750">wait_sigint_handler()</a>.</p>

</div>
</div>
<a id="a00a528c63ad265bc45f9dd8892147fd1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00a528c63ad265bc45f9dd8892147fd1">&#9670;&nbsp;</a></span>zerojs</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d3/d3a/jobs_8h.html#d9/dff/structjobstats">jobstats</a> zerojs = { -1<a class="el" href="../../d1/df8/smatch_8c.html#a1f82449e0d84122ede24741e7fcfdd22">L</a>, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, <a class="el" href="../../d3/d3a/jobs_8h.html#a6eba094b1ac1bc00e5883edd166bd944">NO_JOB</a>, <a class="el" href="../../d3/d3a/jobs_8h.html#a6eba094b1ac1bc00e5883edd166bd944">NO_JOB</a>, 0, 0 }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d8e/jobs_8c_source.html#l00172">172</a> of file <a class="el" href="../../df/d8e/jobs_8c_source.html">jobs.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d8e/jobs_8c_source.html#l00373">init_job_stats()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_97d86ce2f18c7710ea326fa47777d7d7.html">Userspace</a></li><li class="navelem"><a class="el" href="../../dir_0276b9b7d706caf6f8b101518c949f15.html">apps</a></li><li class="navelem"><a class="el" href="../../dir_825a5fc57f8484006531699dcb39fa0d.html">base</a></li><li class="navelem"><a class="el" href="../../dir_9f45f4861ea51abe6a084ff494f6b906.html">bash</a></li><li class="navelem"><a class="el" href="../../df/d8e/jobs_8c.html">jobs.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
