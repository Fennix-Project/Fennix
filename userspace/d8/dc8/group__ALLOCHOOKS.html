<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Fennix Userspace: liballoc hooks</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="../../custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Fennix Userspace
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
   <div id="projectbrief">Userspace Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d8/dc8/group__ALLOCHOOKS.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">liballoc hooks</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga397816ee230d64fe081f93d31bf5a534"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/dc8/group__ALLOCHOOKS.html#ga397816ee230d64fe081f93d31bf5a534">PREFIX</a>(<a class="el" href="../../de/dcc/awk_8c.html#a553299c54ca0f9dd61768a1f8a0e481a">func</a>)&#160;&#160;&#160;__##<a class="el" href="../../de/dcc/awk_8c.html#a553299c54ca0f9dd61768a1f8a0e481a">func</a></td></tr>
<tr class="separator:ga397816ee230d64fe081f93d31bf5a534"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga8b5670e4594b0b6f8be78fe17f0c3b53"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/dc8/group__ALLOCHOOKS.html#ga8b5670e4594b0b6f8be78fe17f0c3b53">liballoc_lock</a> ()</td></tr>
<tr class="separator:ga8b5670e4594b0b6f8be78fe17f0c3b53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaedc23f198b2882d41d0caa316453967b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/dc8/group__ALLOCHOOKS.html#gaedc23f198b2882d41d0caa316453967b">liballoc_unlock</a> ()</td></tr>
<tr class="separator:gaedc23f198b2882d41d0caa316453967b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga32070b2a98fd86b1a6ee5efecb4edd5b"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/dc8/group__ALLOCHOOKS.html#ga32070b2a98fd86b1a6ee5efecb4edd5b">liballoc_alloc</a> (<a class="el" href="../../d4/df0/libc_2include_2inttypes_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>)</td></tr>
<tr class="separator:ga32070b2a98fd86b1a6ee5efecb4edd5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8d5be3c85e157d771a44c48509b43c42"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/dc8/group__ALLOCHOOKS.html#ga8d5be3c85e157d771a44c48509b43c42">liballoc_free</a> (void *, <a class="el" href="../../d4/df0/libc_2include_2inttypes_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>)</td></tr>
<tr class="separator:ga8d5be3c85e157d771a44c48509b43c42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5223b5fb1255b5179f53b0595fe9251c"><td class="memItemLeft" align="right" valign="top">void *<a class="el" href="../../d8/dc8/group__ALLOCHOOKS.html#ga397816ee230d64fe081f93d31bf5a534">PREFIX</a>()&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/dc8/group__ALLOCHOOKS.html#ga5223b5fb1255b5179f53b0595fe9251c">malloc</a> (<a class="el" href="../../d4/df0/libc_2include_2inttypes_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>)</td></tr>
<tr class="memdesc:ga5223b5fb1255b5179f53b0595fe9251c"><td class="mdescLeft">&#160;</td><td class="mdescRight">The standard function.  <a href="../../d8/dc8/group__ALLOCHOOKS.html#ga5223b5fb1255b5179f53b0595fe9251c">More...</a><br /></td></tr>
<tr class="separator:ga5223b5fb1255b5179f53b0595fe9251c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadc710223dc26577d1e49cac212d7d083"><td class="memItemLeft" align="right" valign="top">void *<a class="el" href="../../d8/dc8/group__ALLOCHOOKS.html#ga397816ee230d64fe081f93d31bf5a534">PREFIX</a>()&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/dc8/group__ALLOCHOOKS.html#gadc710223dc26577d1e49cac212d7d083">realloc</a> (void *, <a class="el" href="../../d4/df0/libc_2include_2inttypes_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>)</td></tr>
<tr class="memdesc:gadc710223dc26577d1e49cac212d7d083"><td class="mdescLeft">&#160;</td><td class="mdescRight">The standard function.  <a href="../../d8/dc8/group__ALLOCHOOKS.html#gadc710223dc26577d1e49cac212d7d083">More...</a><br /></td></tr>
<tr class="separator:gadc710223dc26577d1e49cac212d7d083"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9db1af54761723ecddbd1e253c01a2ad"><td class="memItemLeft" align="right" valign="top">void *<a class="el" href="../../d8/dc8/group__ALLOCHOOKS.html#ga397816ee230d64fe081f93d31bf5a534">PREFIX</a>()&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/dc8/group__ALLOCHOOKS.html#ga9db1af54761723ecddbd1e253c01a2ad">calloc</a> (<a class="el" href="../../d4/df0/libc_2include_2inttypes_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>, <a class="el" href="../../d4/df0/libc_2include_2inttypes_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>)</td></tr>
<tr class="memdesc:ga9db1af54761723ecddbd1e253c01a2ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">The standard function.  <a href="../../d8/dc8/group__ALLOCHOOKS.html#ga9db1af54761723ecddbd1e253c01a2ad">More...</a><br /></td></tr>
<tr class="separator:ga9db1af54761723ecddbd1e253c01a2ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4835fe140973dbc5e1aafd9c33acf6d4"><td class="memItemLeft" align="right" valign="top">void <a class="el" href="../../d8/dc8/group__ALLOCHOOKS.html#ga397816ee230d64fe081f93d31bf5a534">PREFIX</a>()&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/dc8/group__ALLOCHOOKS.html#ga4835fe140973dbc5e1aafd9c33acf6d4">free</a> (void *)</td></tr>
<tr class="memdesc:ga4835fe140973dbc5e1aafd9c33acf6d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">The standard function.  <a href="../../d8/dc8/group__ALLOCHOOKS.html#ga4835fe140973dbc5e1aafd9c33acf6d4">More...</a><br /></td></tr>
<tr class="separator:ga4835fe140973dbc5e1aafd9c33acf6d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>These are the OS specific functions which need to be implemented on any platform that the library is expected to work on. </p>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ga397816ee230d64fe081f93d31bf5a534"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga397816ee230d64fe081f93d31bf5a534">&#9670;&nbsp;</a></span>PREFIX</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PREFIX</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="../../de/dcc/awk_8c.html#a553299c54ca0f9dd61768a1f8a0e481a">func</a></td><td>)</td>
          <td>&#160;&#160;&#160;__##<a class="el" href="../../de/dcc/awk_8c.html#a553299c54ca0f9dd61768a1f8a0e481a">func</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="../../d6/dd0/liballoc__1__1_8h.html">Userspace/libc/src/mem/liballoc_1_1.h</a>&gt;</code></p>

<p class="definition">Definition at line <a class="el" href="../../d6/dd0/liballoc__1__1_8h_source.html#l00020">20</a> of file <a class="el" href="../../d6/dd0/liballoc__1__1_8h_source.html">liballoc_1_1.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga9db1af54761723ecddbd1e253c01a2ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9db1af54761723ecddbd1e253c01a2ad">&#9670;&nbsp;</a></span>calloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* <a class="el" href="../../d8/dc8/group__ALLOCHOOKS.html#ga397816ee230d64fe081f93d31bf5a534">PREFIX</a>() calloc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/df0/libc_2include_2inttypes_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/df0/libc_2include_2inttypes_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>&#160;</td>
          <td class="paramname"><em>s</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="../../d6/dd0/liballoc__1__1_8h.html">Userspace/libc/src/mem/liballoc_1_1.h</a>&gt;</code></p>

<p>The standard function. </p>

<p class="definition">Definition at line <a class="el" href="../../dd/d9a/apps_2base_2bash_2lib_2malloc_2malloc_8c_source.html#l01543">1543</a> of file <a class="el" href="../../dd/d9a/apps_2base_2bash_2lib_2malloc_2malloc_8c_source.html">malloc.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;{</div>
</div><!-- fragment -->
</div>
</div>
<a id="ga4835fe140973dbc5e1aafd9c33acf6d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4835fe140973dbc5e1aafd9c33acf6d4">&#9670;&nbsp;</a></span>free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="../../d8/dc8/group__ALLOCHOOKS.html#ga397816ee230d64fe081f93d31bf5a534">PREFIX</a>() free </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="../../d6/dd0/liballoc__1__1_8h.html">Userspace/libc/src/mem/liballoc_1_1.h</a>&gt;</code></p>

<p>The standard function. </p>

<p class="definition">Definition at line <a class="el" href="../../d2/dc3/liballoc__1__1_8c_source.html#l00560">560</a> of file <a class="el" href="../../d2/dc3/liballoc__1__1_8c_source.html">liballoc_1_1.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;{</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#d7/d3e/structliballoc__minor">liballoc_minor</a> *<a class="code" href="../../da/d5c/xz__config_8h.html#abb702d8b501669a23aa0ab3b281b9384">min</a>;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#d6/db9/structliballoc__major">liballoc_major</a> *maj;</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160; </div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    <span class="keywordflow">if</span> (ptr == <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    {</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        <a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#a2d9b708c1e8825a6bb6612661bc4bdbd">l_warningCount</a> += 1;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;<span class="preprocessor">#if defined LIBALLOCDEBUG || defined LIBALLOCINFO</span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;liballoc: WARNING: PREFIX(free)( NULL ) called from %x\n&quot;</span>,</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;               __builtin_return_address(0));</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;        <a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#ad7ca11d555f526a6c553f150b898c0d8">FLUSH</a>();</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    }</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160; </div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#a1c35d927b46457b91f58e659890008c1">UNALIGN</a>(ptr);</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160; </div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    <a class="code" href="../../d8/dc8/group__ALLOCHOOKS.html#ga8b5670e4594b0b6f8be78fe17f0c3b53">liballoc_lock</a>(); <span class="comment">// lockit</span></div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160; </div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <a class="code" href="../../da/d5c/xz__config_8h.html#abb702d8b501669a23aa0ab3b281b9384">min</a> = (<span class="keyword">struct </span><a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#d7/d3e/structliballoc__minor">liballoc_minor</a> *)((<a class="code" href="../../d4/df0/libc_2include_2inttypes_8h.html#a4788399d1d0b37ccf098a7da82254808">uintptr_t</a>)ptr - <span class="keyword">sizeof</span>(<span class="keyword">struct </span><a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#d7/d3e/structliballoc__minor">liballoc_minor</a>));</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160; </div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/d5c/xz__config_8h.html#abb702d8b501669a23aa0ab3b281b9384">min</a>-&gt;magic != <a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#af6b1d459ffa3c81e2456acf8d4268330">LIBALLOC_MAGIC</a>)</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    {</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        <a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#af83e911f592858658db8dba2a74f5772">l_errorCount</a> += 1;</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160; </div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;        <span class="comment">// Check for overrun errors. For all bytes of LIBALLOC_MAGIC</span></div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        <span class="keywordflow">if</span> (</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;            ((<a class="code" href="../../da/d5c/xz__config_8h.html#abb702d8b501669a23aa0ab3b281b9384">min</a>-&gt;magic &amp; 0xFFFFFF) == (<a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#af6b1d459ffa3c81e2456acf8d4268330">LIBALLOC_MAGIC</a> &amp; 0xFFFFFF)) ||</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;            ((<a class="code" href="../../da/d5c/xz__config_8h.html#abb702d8b501669a23aa0ab3b281b9384">min</a>-&gt;magic &amp; 0xFFFF) == (<a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#af6b1d459ffa3c81e2456acf8d4268330">LIBALLOC_MAGIC</a> &amp; 0xFFFF)) ||</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;            ((<a class="code" href="../../da/d5c/xz__config_8h.html#abb702d8b501669a23aa0ab3b281b9384">min</a>-&gt;magic &amp; 0xFF) == (<a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#af6b1d459ffa3c81e2456acf8d4268330">LIBALLOC_MAGIC</a> &amp; 0xFF)))</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        {</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;            <a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#a48c2c6cb4bd97dd911ef24ff2a42ca5d">l_possibleOverruns</a> += 1;</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;<span class="preprocessor">#if defined LIBALLOCDEBUG || defined LIBALLOCINFO</span></div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;            <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;liballoc: ERROR: Possible 1-3 byte overrun for magic %x != %x\n&quot;</span>,</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;                   <a class="code" href="../../da/d5c/xz__config_8h.html#abb702d8b501669a23aa0ab3b281b9384">min</a>-&gt;magic,</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;                   <a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#af6b1d459ffa3c81e2456acf8d4268330">LIBALLOC_MAGIC</a>);</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;            <a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#ad7ca11d555f526a6c553f150b898c0d8">FLUSH</a>();</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;        }</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160; </div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../da/d5c/xz__config_8h.html#abb702d8b501669a23aa0ab3b281b9384">min</a>-&gt;magic == <a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#aae1f702e677fee87387d8086e751f8b3">LIBALLOC_DEAD</a>)</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;        {</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;<span class="preprocessor">#if defined LIBALLOCDEBUG || defined LIBALLOCINFO</span></div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;            <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;liballoc: ERROR: multiple PREFIX(free)() attempt on %x from %x.\n&quot;</span>,</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;                   ptr,</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;                   __builtin_return_address(0));</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;            <a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#ad7ca11d555f526a6c553f150b898c0d8">FLUSH</a>();</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        }</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;        {</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;<span class="preprocessor">#if defined LIBALLOCDEBUG || defined LIBALLOCINFO</span></div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;            <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;liballoc: ERROR: Bad PREFIX(free)( %x ) called from %x\n&quot;</span>,</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;                   ptr,</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;                   __builtin_return_address(0));</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;            <a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#ad7ca11d555f526a6c553f150b898c0d8">FLUSH</a>();</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;        }</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160; </div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;        <span class="comment">// being lied to...</span></div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;        <a class="code" href="../../d8/dc8/group__ALLOCHOOKS.html#gaedc23f198b2882d41d0caa316453967b">liballoc_unlock</a>(); <span class="comment">// release the lock</span></div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    }</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160; </div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;<span class="preprocessor">#ifdef LIBALLOCDEBUG</span></div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;liballoc: %x PREFIX(free)( %x ): &quot;</span>,</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;           __builtin_return_address(0),</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;           ptr);</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    <a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#ad7ca11d555f526a6c553f150b898c0d8">FLUSH</a>();</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160; </div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    maj = <a class="code" href="../../da/d5c/xz__config_8h.html#abb702d8b501669a23aa0ab3b281b9384">min</a>-&gt;block;</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160; </div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    <a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#a2ce5de2eb7b8595f398caf844a033cb1">l_inuse</a> -= <a class="code" href="../../da/d5c/xz__config_8h.html#abb702d8b501669a23aa0ab3b281b9384">min</a>-&gt;size;</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160; </div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    maj-&gt;<a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#ab4d9c00c552e0ddd4997a91966bfc4f4">usage</a> -= (<a class="code" href="../../da/d5c/xz__config_8h.html#abb702d8b501669a23aa0ab3b281b9384">min</a>-&gt;size + <span class="keyword">sizeof</span>(<span class="keyword">struct </span><a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#d7/d3e/structliballoc__minor">liballoc_minor</a>));</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <a class="code" href="../../da/d5c/xz__config_8h.html#abb702d8b501669a23aa0ab3b281b9384">min</a>-&gt;magic = <a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#aae1f702e677fee87387d8086e751f8b3">LIBALLOC_DEAD</a>; <span class="comment">// No mojo.</span></div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160; </div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/d5c/xz__config_8h.html#abb702d8b501669a23aa0ab3b281b9384">min</a>-&gt;next != <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;        <a class="code" href="../../da/d5c/xz__config_8h.html#abb702d8b501669a23aa0ab3b281b9384">min</a>-&gt;next-&gt;prev = <a class="code" href="../../da/d5c/xz__config_8h.html#abb702d8b501669a23aa0ab3b281b9384">min</a>-&gt;prev;</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/d5c/xz__config_8h.html#abb702d8b501669a23aa0ab3b281b9384">min</a>-&gt;prev != <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;        <a class="code" href="../../da/d5c/xz__config_8h.html#abb702d8b501669a23aa0ab3b281b9384">min</a>-&gt;prev-&gt;next = <a class="code" href="../../da/d5c/xz__config_8h.html#abb702d8b501669a23aa0ab3b281b9384">min</a>-&gt;next;</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160; </div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/d5c/xz__config_8h.html#abb702d8b501669a23aa0ab3b281b9384">min</a>-&gt;prev == <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;        maj-&gt;<a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#a2c9685a5fb7da3ad775dad0d1f3386d8">first</a> = <a class="code" href="../../da/d5c/xz__config_8h.html#abb702d8b501669a23aa0ab3b281b9384">min</a>-&gt;next;</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <span class="comment">// Might empty the block. This was the first</span></div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    <span class="comment">// minor.</span></div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160; </div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    <span class="comment">// We need to clean up after the majors now....</span></div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160; </div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    <span class="keywordflow">if</span> (maj-&gt;<a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#a2c9685a5fb7da3ad775dad0d1f3386d8">first</a> == <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) <span class="comment">// Block completely unused.</span></div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    {</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#a650715799a325fedc4d7b07a181378d9">l_memRoot</a> == maj)</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;            <a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#a650715799a325fedc4d7b07a181378d9">l_memRoot</a> = maj-&gt;<a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#a97bfe7e17a18555bcf3ac0ef7a760c02">next</a>;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#aa564d1a8832090131b83d62eae1f07d7">l_bestBet</a> == maj)</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;            <a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#aa564d1a8832090131b83d62eae1f07d7">l_bestBet</a> = <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;        <span class="keywordflow">if</span> (maj-&gt;<a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#a8dd640e0d1f670a20d8db58a21d2c008">prev</a> != <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;            maj-&gt;<a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#a8dd640e0d1f670a20d8db58a21d2c008">prev</a>-&gt;<a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#a97bfe7e17a18555bcf3ac0ef7a760c02">next</a> = maj-&gt;<a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#a97bfe7e17a18555bcf3ac0ef7a760c02">next</a>;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;        <span class="keywordflow">if</span> (maj-&gt;<a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#a97bfe7e17a18555bcf3ac0ef7a760c02">next</a> != <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;            maj-&gt;<a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#a97bfe7e17a18555bcf3ac0ef7a760c02">next</a>-&gt;<a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#a8dd640e0d1f670a20d8db58a21d2c008">prev</a> = maj-&gt;<a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#a8dd640e0d1f670a20d8db58a21d2c008">prev</a>;</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;        <a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#ab0e0c20055b59102841b90dc4ec55610">l_allocated</a> -= maj-&gt;<a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#a94315a9fd8d95755437248f20450e9ba">size</a>;</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160; </div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;        <a class="code" href="../../d8/dc8/group__ALLOCHOOKS.html#ga8d5be3c85e157d771a44c48509b43c42">liballoc_free</a>(maj, maj-&gt;<a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#ac355949c287ae38eefdfa97dc2abfc93">pages</a>);</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    }</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    {</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#aa564d1a8832090131b83d62eae1f07d7">l_bestBet</a> != <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;        {</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;            <span class="keywordtype">int</span> bestSize = <a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#aa564d1a8832090131b83d62eae1f07d7">l_bestBet</a>-&gt;<a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#a94315a9fd8d95755437248f20450e9ba">size</a> - <a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#aa564d1a8832090131b83d62eae1f07d7">l_bestBet</a>-&gt;<a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#ab4d9c00c552e0ddd4997a91966bfc4f4">usage</a>;</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;            <span class="keywordtype">int</span> majSize = maj-&gt;<a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#a94315a9fd8d95755437248f20450e9ba">size</a> - maj-&gt;<a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#ab4d9c00c552e0ddd4997a91966bfc4f4">usage</a>;</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160; </div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;            <span class="keywordflow">if</span> (majSize &gt; bestSize)</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;                <a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#aa564d1a8832090131b83d62eae1f07d7">l_bestBet</a> = maj;</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;        }</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    }</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160; </div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;<span class="preprocessor">#ifdef LIBALLOCDEBUG</span></div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;OK\n&quot;</span>);</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    <a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#ad7ca11d555f526a6c553f150b898c0d8">FLUSH</a>();</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160; </div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    <a class="code" href="../../d8/dc8/group__ALLOCHOOKS.html#gaedc23f198b2882d41d0caa316453967b">liballoc_unlock</a>(); <span class="comment">// release the lock</span></div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;}</div>
<div class="ttc" id="ageneral_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d14/general_8h_source.html#l00053">general.h:53</a></div></div>
<div class="ttc" id="agroup__ALLOCHOOKS_html_ga8b5670e4594b0b6f8be78fe17f0c3b53"><div class="ttname"><a href="../../d8/dc8/group__ALLOCHOOKS.html#ga8b5670e4594b0b6f8be78fe17f0c3b53">liballoc_lock</a></div><div class="ttdeci">int liballoc_lock()</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d34/LibAllocImplementation_8cpp_source.html#l00008">LibAllocImplementation.cpp:8</a></div></div>
<div class="ttc" id="agroup__ALLOCHOOKS_html_ga8d5be3c85e157d771a44c48509b43c42"><div class="ttname"><a href="../../d8/dc8/group__ALLOCHOOKS.html#ga8d5be3c85e157d771a44c48509b43c42">liballoc_free</a></div><div class="ttdeci">int liballoc_free(void *, size_t)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d34/LibAllocImplementation_8cpp_source.html#l00027">LibAllocImplementation.cpp:27</a></div></div>
<div class="ttc" id="agroup__ALLOCHOOKS_html_gaedc23f198b2882d41d0caa316453967b"><div class="ttname"><a href="../../d8/dc8/group__ALLOCHOOKS.html#gaedc23f198b2882d41d0caa316453967b">liballoc_unlock</a></div><div class="ttdeci">int liballoc_unlock()</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d34/LibAllocImplementation_8cpp_source.html#l00013">LibAllocImplementation.cpp:13</a></div></div>
<div class="ttc" id="aliballoc__1__1_8c_html_a1c35d927b46457b91f58e659890008c1"><div class="ttname"><a href="../../d2/dc3/liballoc__1__1_8c.html#a1c35d927b46457b91f58e659890008c1">UNALIGN</a></div><div class="ttdeci">#define UNALIGN(ptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dc3/liballoc__1__1_8c_source.html#l00033">liballoc_1_1.c:33</a></div></div>
<div class="ttc" id="aliballoc__1__1_8c_html_a2c9685a5fb7da3ad775dad0d1f3386d8"><div class="ttname"><a href="../../d2/dc3/liballoc__1__1_8c.html#a2c9685a5fb7da3ad775dad0d1f3386d8">liballoc_major::first</a></div><div class="ttdeci">struct liballoc_minor * first</div><div class="ttdoc">A pointer to the first allocated memory in the block.</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dc3/liballoc__1__1_8c_source.html#l00070">liballoc_1_1.c:70</a></div></div>
<div class="ttc" id="aliballoc__1__1_8c_html_a2ce5de2eb7b8595f398caf844a033cb1"><div class="ttname"><a href="../../d2/dc3/liballoc__1__1_8c.html#a2ce5de2eb7b8595f398caf844a033cb1">l_inuse</a></div><div class="ttdeci">static unsigned long long l_inuse</div><div class="ttdoc">Running total of used memory.</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dc3/liballoc__1__1_8c_source.html#l00093">liballoc_1_1.c:93</a></div></div>
<div class="ttc" id="aliballoc__1__1_8c_html_a2d9b708c1e8825a6bb6612661bc4bdbd"><div class="ttname"><a href="../../d2/dc3/liballoc__1__1_8c.html#a2d9b708c1e8825a6bb6612661bc4bdbd">l_warningCount</a></div><div class="ttdeci">static long long l_warningCount</div><div class="ttdoc">Number of warnings encountered.</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dc3/liballoc__1__1_8c_source.html#l00095">liballoc_1_1.c:95</a></div></div>
<div class="ttc" id="aliballoc__1__1_8c_html_a48c2c6cb4bd97dd911ef24ff2a42ca5d"><div class="ttname"><a href="../../d2/dc3/liballoc__1__1_8c.html#a48c2c6cb4bd97dd911ef24ff2a42ca5d">l_possibleOverruns</a></div><div class="ttdeci">static long long l_possibleOverruns</div><div class="ttdoc">Number of possible overruns.</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dc3/liballoc__1__1_8c_source.html#l00097">liballoc_1_1.c:97</a></div></div>
<div class="ttc" id="aliballoc__1__1_8c_html_a650715799a325fedc4d7b07a181378d9"><div class="ttname"><a href="../../d2/dc3/liballoc__1__1_8c.html#a650715799a325fedc4d7b07a181378d9">l_memRoot</a></div><div class="ttdeci">static struct liballoc_major * l_memRoot</div><div class="ttdoc">The root memory block acquired from the system.</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dc3/liballoc__1__1_8c_source.html#l00087">liballoc_1_1.c:87</a></div></div>
<div class="ttc" id="aliballoc__1__1_8c_html_a8dd640e0d1f670a20d8db58a21d2c008"><div class="ttname"><a href="../../d2/dc3/liballoc__1__1_8c.html#a8dd640e0d1f670a20d8db58a21d2c008">liballoc_major::prev</a></div><div class="ttdeci">struct liballoc_major * prev</div><div class="ttdoc">Linked list information.</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dc3/liballoc__1__1_8c_source.html#l00065">liballoc_1_1.c:65</a></div></div>
<div class="ttc" id="aliballoc__1__1_8c_html_a94315a9fd8d95755437248f20450e9ba"><div class="ttname"><a href="../../d2/dc3/liballoc__1__1_8c.html#a94315a9fd8d95755437248f20450e9ba">liballoc_major::size</a></div><div class="ttdeci">unsigned int size</div><div class="ttdoc">The number of pages in the block.</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dc3/liballoc__1__1_8c_source.html#l00068">liballoc_1_1.c:68</a></div></div>
<div class="ttc" id="aliballoc__1__1_8c_html_a97bfe7e17a18555bcf3ac0ef7a760c02"><div class="ttname"><a href="../../d2/dc3/liballoc__1__1_8c.html#a97bfe7e17a18555bcf3ac0ef7a760c02">liballoc_major::next</a></div><div class="ttdeci">struct liballoc_major * next</div><div class="ttdoc">Linked list information.</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dc3/liballoc__1__1_8c_source.html#l00066">liballoc_1_1.c:66</a></div></div>
<div class="ttc" id="aliballoc__1__1_8c_html_aa564d1a8832090131b83d62eae1f07d7"><div class="ttname"><a href="../../d2/dc3/liballoc__1__1_8c.html#aa564d1a8832090131b83d62eae1f07d7">l_bestBet</a></div><div class="ttdeci">static struct liballoc_major * l_bestBet</div><div class="ttdoc">The major with the most free memory.</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dc3/liballoc__1__1_8c_source.html#l00088">liballoc_1_1.c:88</a></div></div>
<div class="ttc" id="aliballoc__1__1_8c_html_aae1f702e677fee87387d8086e751f8b3"><div class="ttname"><a href="../../d2/dc3/liballoc__1__1_8c.html#aae1f702e677fee87387d8086e751f8b3">LIBALLOC_DEAD</a></div><div class="ttdeci">#define LIBALLOC_DEAD</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dc3/liballoc__1__1_8c_source.html#l00044">liballoc_1_1.c:44</a></div></div>
<div class="ttc" id="aliballoc__1__1_8c_html_ab0e0c20055b59102841b90dc4ec55610"><div class="ttname"><a href="../../d2/dc3/liballoc__1__1_8c.html#ab0e0c20055b59102841b90dc4ec55610">l_allocated</a></div><div class="ttdeci">static unsigned long long l_allocated</div><div class="ttdoc">Running total of allocated memory.</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dc3/liballoc__1__1_8c_source.html#l00092">liballoc_1_1.c:92</a></div></div>
<div class="ttc" id="aliballoc__1__1_8c_html_ab4d9c00c552e0ddd4997a91966bfc4f4"><div class="ttname"><a href="../../d2/dc3/liballoc__1__1_8c.html#ab4d9c00c552e0ddd4997a91966bfc4f4">liballoc_major::usage</a></div><div class="ttdeci">unsigned int usage</div><div class="ttdoc">The number of bytes used in the block.</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dc3/liballoc__1__1_8c_source.html#l00069">liballoc_1_1.c:69</a></div></div>
<div class="ttc" id="aliballoc__1__1_8c_html_ac355949c287ae38eefdfa97dc2abfc93"><div class="ttname"><a href="../../d2/dc3/liballoc__1__1_8c.html#ac355949c287ae38eefdfa97dc2abfc93">liballoc_major::pages</a></div><div class="ttdeci">unsigned int pages</div><div class="ttdoc">The number of pages in the block.</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dc3/liballoc__1__1_8c_source.html#l00067">liballoc_1_1.c:67</a></div></div>
<div class="ttc" id="aliballoc__1__1_8c_html_ad7ca11d555f526a6c553f150b898c0d8"><div class="ttname"><a href="../../d2/dc3/liballoc__1__1_8c.html#ad7ca11d555f526a6c553f150b898c0d8">FLUSH</a></div><div class="ttdeci">#define FLUSH()</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dc3/liballoc__1__1_8c_source.html#l00054">liballoc_1_1.c:54</a></div></div>
<div class="ttc" id="aliballoc__1__1_8c_html_af6b1d459ffa3c81e2456acf8d4268330"><div class="ttname"><a href="../../d2/dc3/liballoc__1__1_8c.html#af6b1d459ffa3c81e2456acf8d4268330">LIBALLOC_MAGIC</a></div><div class="ttdeci">#define LIBALLOC_MAGIC</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dc3/liballoc__1__1_8c_source.html#l00043">liballoc_1_1.c:43</a></div></div>
<div class="ttc" id="aliballoc__1__1_8c_html_af83e911f592858658db8dba2a74f5772"><div class="ttname"><a href="../../d2/dc3/liballoc__1__1_8c.html#af83e911f592858658db8dba2a74f5772">l_errorCount</a></div><div class="ttdeci">static long long l_errorCount</div><div class="ttdoc">Number of actual errors.</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dc3/liballoc__1__1_8c_source.html#l00096">liballoc_1_1.c:96</a></div></div>
<div class="ttc" id="aliballoc__1__1_8c_html_d6/db9/structliballoc__major"><div class="ttname"><a href="../../d2/dc3/liballoc__1__1_8c.html#d6/db9/structliballoc__major">liballoc_major</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dc3/liballoc__1__1_8c_source.html#l00063">liballoc_1_1.c:64</a></div></div>
<div class="ttc" id="aliballoc__1__1_8c_html_d7/d3e/structliballoc__minor"><div class="ttname"><a href="../../d2/dc3/liballoc__1__1_8c.html#d7/d3e/structliballoc__minor">liballoc_minor</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dc3/liballoc__1__1_8c_source.html#l00077">liballoc_1_1.c:78</a></div></div>
<div class="ttc" id="alibc_2include_2inttypes_8h_html_a4788399d1d0b37ccf098a7da82254808"><div class="ttname"><a href="../../d4/df0/libc_2include_2inttypes_8h.html#a4788399d1d0b37ccf098a7da82254808">uintptr_t</a></div><div class="ttdeci">__UINTPTR_TYPE__ uintptr_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/df0/libc_2include_2inttypes_8h_source.html#l00032">inttypes.h:32</a></div></div>
<div class="ttc" id="alibc_2include_2stdio_8h_html_a98631211a4a8aee62f572375d5b637be"><div class="ttname"><a href="../../dc/d4d/libc_2include_2stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a></div><div class="ttdeci">int printf(const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dae/libc_2src_2print_2printf_8c_source.html#l01554">printf.c:1554</a></div></div>
<div class="ttc" id="axz__config_8h_html_abb702d8b501669a23aa0ab3b281b9384"><div class="ttname"><a href="../../da/d5c/xz__config_8h.html#abb702d8b501669a23aa0ab3b281b9384">min</a></div><div class="ttdeci">#define min(x, y)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d5c/xz__config_8h_source.html#l00037">xz_config.h:37</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga32070b2a98fd86b1a6ee5efecb4edd5b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga32070b2a98fd86b1a6ee5efecb4edd5b">&#9670;&nbsp;</a></span>liballoc_alloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* liballoc_alloc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/df0/libc_2include_2inttypes_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>&#160;</td>
          <td class="paramname"><em>Pages</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="../../d6/dd0/liballoc__1__1_8h.html">Userspace/libc/src/mem/liballoc_1_1.h</a>&gt;</code></p>
<p>This is the hook into the local system which allocates pages. It accepts an integer parameter which is the number of pages required. The page size was set up in the liballoc_init function.</p>
<dl class="section return"><dt>Returns</dt><dd>NULL if the pages were not allocated. </dd>
<dd>
A pointer to the allocated memory. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d4/d34/LibAllocImplementation_8cpp_source.html#l00018">18</a> of file <a class="el" href="../../d4/d34/LibAllocImplementation_8cpp_source.html">LibAllocImplementation.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;{</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;    <span class="keywordflow">return</span> (<span class="keywordtype">void</span> *)syscall6(sc_mmap, <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;                            Pages * 0x1000,</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;                            sc_PROT_READ | sc_PROT_WRITE,</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;                            sc_MAP_ANONYMOUS | sc_MAP_PRIVATE,</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;                            -1, 0);</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d9/d14/general_8h_source.html#l00053">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/dc3/liballoc__1__1_8c_source.html#l00176">allocate_new_page()</a>.</p>

</div>
</div>
<a id="ga8d5be3c85e157d771a44c48509b43c42"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8d5be3c85e157d771a44c48509b43c42">&#9670;&nbsp;</a></span>liballoc_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int liballoc_free </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/df0/libc_2include_2inttypes_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>&#160;</td>
          <td class="paramname"><em>Pages</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="../../d6/dd0/liballoc__1__1_8h.html">Userspace/libc/src/mem/liballoc_1_1.h</a>&gt;</code></p>
<p>This frees previously allocated memory. The void* parameter passed to the function is the exact same value returned from a previous liballoc_alloc call.</p>
<p>The integer value is the number of pages to free.</p>
<dl class="section return"><dt>Returns</dt><dd>0 if the memory was successfully freed. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d4/d34/LibAllocImplementation_8cpp_source.html#l00027">27</a> of file <a class="el" href="../../d4/d34/LibAllocImplementation_8cpp_source.html">LibAllocImplementation.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;{</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    <span class="keywordflow">return</span> syscall2(sc_munmap, (<a class="code" href="../../d4/df0/libc_2include_2inttypes_8h.html#a4788399d1d0b37ccf098a7da82254808">uintptr_t</a>)Address, Pages * 0x1000);</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d2/dc3/liballoc__1__1_8c_source.html#l00560">free()</a>.</p>

</div>
</div>
<a id="ga8b5670e4594b0b6f8be78fe17f0c3b53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8b5670e4594b0b6f8be78fe17f0c3b53">&#9670;&nbsp;</a></span>liballoc_lock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int liballoc_lock </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="../../d6/dd0/liballoc__1__1_8h.html">Userspace/libc/src/mem/liballoc_1_1.h</a>&gt;</code></p>
<p>This function is supposed to lock the memory data structures. It could be as simple as disabling interrupts or acquiring a spinlock. It's up to you to decide.</p>
<dl class="section return"><dt>Returns</dt><dd>0 if the lock was acquired successfully. Anything else is failure. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d4/d34/LibAllocImplementation_8cpp_source.html#l00008">8</a> of file <a class="el" href="../../d4/d34/LibAllocImplementation_8cpp_source.html">LibAllocImplementation.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;{</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;    <span class="keywordflow">return</span> liballocLock.Lock(__FUNCTION__);</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d2/dc3/liballoc__1__1_8c_source.html#l00560">free()</a>, <a class="el" href="../../d2/dc3/liballoc__1__1_8c_source.html#l00227">malloc()</a>, and <a class="el" href="../../d2/dc3/liballoc__1__1_8c_source.html#l00699">realloc()</a>.</p>

</div>
</div>
<a id="gaedc23f198b2882d41d0caa316453967b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaedc23f198b2882d41d0caa316453967b">&#9670;&nbsp;</a></span>liballoc_unlock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int liballoc_unlock </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="../../d6/dd0/liballoc__1__1_8h.html">Userspace/libc/src/mem/liballoc_1_1.h</a>&gt;</code></p>
<p>This function unlocks what was previously locked by the liballoc_lock function. If it disabled interrupts, it enables interrupts. If it had acquiried a spinlock, it releases the spinlock. etc.</p>
<dl class="section return"><dt>Returns</dt><dd>0 if the lock was successfully released. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d4/d34/LibAllocImplementation_8cpp_source.html#l00013">13</a> of file <a class="el" href="../../d4/d34/LibAllocImplementation_8cpp_source.html">LibAllocImplementation.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;{</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;    <span class="keywordflow">return</span> liballocLock.Unlock();</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d2/dc3/liballoc__1__1_8c_source.html#l00560">free()</a>, <a class="el" href="../../d2/dc3/liballoc__1__1_8c_source.html#l00227">malloc()</a>, and <a class="el" href="../../d2/dc3/liballoc__1__1_8c_source.html#l00699">realloc()</a>.</p>

</div>
</div>
<a id="ga5223b5fb1255b5179f53b0595fe9251c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5223b5fb1255b5179f53b0595fe9251c">&#9670;&nbsp;</a></span>malloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* <a class="el" href="../../d8/dc8/group__ALLOCHOOKS.html#ga397816ee230d64fe081f93d31bf5a534">PREFIX</a>() malloc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/df0/libc_2include_2inttypes_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>&#160;</td>
          <td class="paramname"><em>size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="../../d6/dd0/liballoc__1__1_8h.html">Userspace/libc/src/mem/liballoc_1_1.h</a>&gt;</code></p>

<p>The standard function. </p>

<p class="definition">Definition at line <a class="el" href="../../dd/d9a/apps_2base_2bash_2lib_2malloc_2malloc_8c_source.html#l01503">1503</a> of file <a class="el" href="../../dd/d9a/apps_2base_2bash_2lib_2malloc_2malloc_8c_source.html">malloc.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;{</div>
</div><!-- fragment -->
</div>
</div>
<a id="gadc710223dc26577d1e49cac212d7d083"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gadc710223dc26577d1e49cac212d7d083">&#9670;&nbsp;</a></span>realloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* <a class="el" href="../../d8/dc8/group__ALLOCHOOKS.html#ga397816ee230d64fe081f93d31bf5a534">PREFIX</a>() realloc </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/df0/libc_2include_2inttypes_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="../../d6/dd0/liballoc__1__1_8h.html">Userspace/libc/src/mem/liballoc_1_1.h</a>&gt;</code></p>

<p>The standard function. </p>

<p class="definition">Definition at line <a class="el" href="../../d2/dc3/liballoc__1__1_8c_source.html#l00699">699</a> of file <a class="el" href="../../d2/dc3/liballoc__1__1_8c_source.html">liballoc_1_1.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;{</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    <span class="keywordtype">void</span> *ptr;</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#d7/d3e/structliballoc__minor">liballoc_minor</a> *<a class="code" href="../../da/d5c/xz__config_8h.html#abb702d8b501669a23aa0ab3b281b9384">min</a>;</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> real_size;</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160; </div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    <span class="comment">// Honour the case of size == 0 =&gt; free old and return NULL</span></div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d7/d06/getpwent_8c.html#a854352f53b148adc24983a58a1866d66">size</a> == 0)</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    {</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;        <a class="code" href="../../d8/dc8/group__ALLOCHOOKS.html#ga397816ee230d64fe081f93d31bf5a534">PREFIX</a>(<a class="code" href="../../d8/dc8/group__ALLOCHOOKS.html#ga4835fe140973dbc5e1aafd9c33acf6d4">free</a>)</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;        (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>);</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    }</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160; </div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    <span class="comment">// In the case of a NULL pointer, return a simple malloc.</span></div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> == <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/dc8/group__ALLOCHOOKS.html#ga397816ee230d64fe081f93d31bf5a534">PREFIX</a>(<a class="code" href="../../d8/dc8/group__ALLOCHOOKS.html#ga5223b5fb1255b5179f53b0595fe9251c">malloc</a>)(<a class="code" href="../../d7/d06/getpwent_8c.html#a854352f53b148adc24983a58a1866d66">size</a>);</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160; </div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    <span class="comment">// Unalign the pointer if required.</span></div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    ptr = <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>;</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    <a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#a1c35d927b46457b91f58e659890008c1">UNALIGN</a>(ptr);</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160; </div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    <a class="code" href="../../d8/dc8/group__ALLOCHOOKS.html#ga8b5670e4594b0b6f8be78fe17f0c3b53">liballoc_lock</a>(); <span class="comment">// lockit</span></div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160; </div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    <a class="code" href="../../da/d5c/xz__config_8h.html#abb702d8b501669a23aa0ab3b281b9384">min</a> = (<span class="keyword">struct </span><a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#d7/d3e/structliballoc__minor">liballoc_minor</a> *)((<a class="code" href="../../d4/df0/libc_2include_2inttypes_8h.html#a4788399d1d0b37ccf098a7da82254808">uintptr_t</a>)ptr - <span class="keyword">sizeof</span>(<span class="keyword">struct </span><a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#d7/d3e/structliballoc__minor">liballoc_minor</a>));</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160; </div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    <span class="comment">// Ensure it is a valid structure.</span></div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/d5c/xz__config_8h.html#abb702d8b501669a23aa0ab3b281b9384">min</a>-&gt;magic != <a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#af6b1d459ffa3c81e2456acf8d4268330">LIBALLOC_MAGIC</a>)</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    {</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;        <a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#af83e911f592858658db8dba2a74f5772">l_errorCount</a> += 1;</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160; </div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;        <span class="comment">// Check for overrun errors. For all bytes of LIBALLOC_MAGIC</span></div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;        <span class="keywordflow">if</span> (</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;            ((<a class="code" href="../../da/d5c/xz__config_8h.html#abb702d8b501669a23aa0ab3b281b9384">min</a>-&gt;magic &amp; 0xFFFFFF) == (<a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#af6b1d459ffa3c81e2456acf8d4268330">LIBALLOC_MAGIC</a> &amp; 0xFFFFFF)) ||</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;            ((<a class="code" href="../../da/d5c/xz__config_8h.html#abb702d8b501669a23aa0ab3b281b9384">min</a>-&gt;magic &amp; 0xFFFF) == (<a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#af6b1d459ffa3c81e2456acf8d4268330">LIBALLOC_MAGIC</a> &amp; 0xFFFF)) ||</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;            ((<a class="code" href="../../da/d5c/xz__config_8h.html#abb702d8b501669a23aa0ab3b281b9384">min</a>-&gt;magic &amp; 0xFF) == (<a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#af6b1d459ffa3c81e2456acf8d4268330">LIBALLOC_MAGIC</a> &amp; 0xFF)))</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;        {</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;            <a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#a48c2c6cb4bd97dd911ef24ff2a42ca5d">l_possibleOverruns</a> += 1;</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;<span class="preprocessor">#if defined LIBALLOCDEBUG || defined LIBALLOCINFO</span></div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;            <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;liballoc: ERROR: Possible 1-3 byte overrun for magic %x != %x\n&quot;</span>,</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;                   <a class="code" href="../../da/d5c/xz__config_8h.html#abb702d8b501669a23aa0ab3b281b9384">min</a>-&gt;magic,</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;                   <a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#af6b1d459ffa3c81e2456acf8d4268330">LIBALLOC_MAGIC</a>);</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;            <a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#ad7ca11d555f526a6c553f150b898c0d8">FLUSH</a>();</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;        }</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160; </div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../da/d5c/xz__config_8h.html#abb702d8b501669a23aa0ab3b281b9384">min</a>-&gt;magic == <a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#aae1f702e677fee87387d8086e751f8b3">LIBALLOC_DEAD</a>)</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;        {</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;<span class="preprocessor">#if defined LIBALLOCDEBUG || defined LIBALLOCINFO</span></div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;            <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;liballoc: ERROR: multiple PREFIX(free)() attempt on %x from %x.\n&quot;</span>,</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;                   ptr,</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;                   __builtin_return_address(0));</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;            <a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#ad7ca11d555f526a6c553f150b898c0d8">FLUSH</a>();</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;        }</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;        {</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;<span class="preprocessor">#if defined LIBALLOCDEBUG || defined LIBALLOCINFO</span></div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;            <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;liballoc: ERROR: Bad PREFIX(free)( %x ) called from %x\n&quot;</span>,</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;                   ptr,</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;                   __builtin_return_address(0));</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;            <a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#ad7ca11d555f526a6c553f150b898c0d8">FLUSH</a>();</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;        }</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160; </div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;        <span class="comment">// being lied to...</span></div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;        <a class="code" href="../../d8/dc8/group__ALLOCHOOKS.html#gaedc23f198b2882d41d0caa316453967b">liballoc_unlock</a>(); <span class="comment">// release the lock</span></div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    }</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160; </div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    <span class="comment">// Definitely a memory block.</span></div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160; </div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    real_size = <a class="code" href="../../da/d5c/xz__config_8h.html#abb702d8b501669a23aa0ab3b281b9384">min</a>-&gt;req_size;</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160; </div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    <span class="keywordflow">if</span> (real_size &gt;= <a class="code" href="../../d7/d06/getpwent_8c.html#a854352f53b148adc24983a58a1866d66">size</a>)</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    {</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;        <a class="code" href="../../da/d5c/xz__config_8h.html#abb702d8b501669a23aa0ab3b281b9384">min</a>-&gt;req_size = <a class="code" href="../../d7/d06/getpwent_8c.html#a854352f53b148adc24983a58a1866d66">size</a>;</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;        <a class="code" href="../../d8/dc8/group__ALLOCHOOKS.html#gaedc23f198b2882d41d0caa316453967b">liballoc_unlock</a>();</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>;</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    }</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160; </div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    <a class="code" href="../../d8/dc8/group__ALLOCHOOKS.html#gaedc23f198b2882d41d0caa316453967b">liballoc_unlock</a>();</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160; </div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    <span class="comment">// If we got here then we&#39;re reallocating to a block bigger than us.</span></div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    ptr = <a class="code" href="../../d8/dc8/group__ALLOCHOOKS.html#ga397816ee230d64fe081f93d31bf5a534">PREFIX</a>(<a class="code" href="../../d8/dc8/group__ALLOCHOOKS.html#ga5223b5fb1255b5179f53b0595fe9251c">malloc</a>)(<a class="code" href="../../d7/d06/getpwent_8c.html#a854352f53b148adc24983a58a1866d66">size</a>); <span class="comment">// We need to allocate new memory</span></div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    <a class="code" href="../../d2/dc3/liballoc__1__1_8c.html#a58b3101a659b6a2f7e2ca290bef6bfb4">liballoc_memcpy</a>(ptr, <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>, real_size);</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    <a class="code" href="../../d8/dc8/group__ALLOCHOOKS.html#ga397816ee230d64fe081f93d31bf5a534">PREFIX</a>(<a class="code" href="../../d8/dc8/group__ALLOCHOOKS.html#ga4835fe140973dbc5e1aafd9c33acf6d4">free</a>)</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>);</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160; </div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    <span class="keywordflow">return</span> ptr;</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;}</div>
<div class="ttc" id="agetpwent_8c_html_a854352f53b148adc24983a58a1866d66"><div class="ttname"><a href="../../d7/d06/getpwent_8c.html#a854352f53b148adc24983a58a1866d66">size</a></div><div class="ttdeci">static size_t size</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d06/getpwent_8c_source.html#l00006">getpwent.c:6</a></div></div>
<div class="ttc" id="aglob__loop_8c_html_ac483f6ce851c9ecd9fb835ff7551737c"><div class="ttname"><a href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a></div><div class="ttdeci">p</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d64/glob__loop_8c_source.html#l00031">glob_loop.c:31</a></div></div>
<div class="ttc" id="agroup__ALLOCHOOKS_html_ga397816ee230d64fe081f93d31bf5a534"><div class="ttname"><a href="../../d8/dc8/group__ALLOCHOOKS.html#ga397816ee230d64fe081f93d31bf5a534">PREFIX</a></div><div class="ttdeci">#define PREFIX(func)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd0/liballoc__1__1_8h_source.html#l00020">liballoc_1_1.h:20</a></div></div>
<div class="ttc" id="agroup__ALLOCHOOKS_html_ga4835fe140973dbc5e1aafd9c33acf6d4"><div class="ttname"><a href="../../d8/dc8/group__ALLOCHOOKS.html#ga4835fe140973dbc5e1aafd9c33acf6d4">free</a></div><div class="ttdeci">void PREFIX() free(void *ptr)</div><div class="ttdoc">The standard function.</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dc3/liballoc__1__1_8c_source.html#l00560">liballoc_1_1.c:560</a></div></div>
<div class="ttc" id="agroup__ALLOCHOOKS_html_ga5223b5fb1255b5179f53b0595fe9251c"><div class="ttname"><a href="../../d8/dc8/group__ALLOCHOOKS.html#ga5223b5fb1255b5179f53b0595fe9251c">malloc</a></div><div class="ttdeci">void *PREFIX() malloc(size_t req_size)</div><div class="ttdoc">The standard function.</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dc3/liballoc__1__1_8c_source.html#l00227">liballoc_1_1.c:227</a></div></div>
<div class="ttc" id="aliballoc__1__1_8c_html_a58b3101a659b6a2f7e2ca290bef6bfb4"><div class="ttname"><a href="../../d2/dc3/liballoc__1__1_8c.html#a58b3101a659b6a2f7e2ca290bef6bfb4">liballoc_memcpy</a></div><div class="ttdeci">static void * liballoc_memcpy(void *s1, const void *s2, size_t n)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dc3/liballoc__1__1_8c_source.html#l00109">liballoc_1_1.c:109</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
