<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Fennix Userspace: Userspace/musl/src/aio/aio.c Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="../../custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Fennix Userspace
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
   <div id="projectbrief">Fennix Userspace Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d8/d77/aio_8c_source.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">aio.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d8/d77/aio_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d8/d76/aio_8h.html">aio.h</a>&gt;</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor">#include &lt;pthread.h&gt;</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d6/dc6/semaphore_8h.html">semaphore.h</a>&gt;</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#include &lt;limits.h&gt;</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &lt;errno.h&gt;</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &lt;unistd.h&gt;</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &lt;sys/auxv.h&gt;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &quot;syscall.h&quot;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dd/d02/atomic_8h.html">atomic.h</a>&quot;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d7/dd7/pthread__impl_8h.html">pthread_impl.h</a>&quot;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../de/dac/aio__impl_8h.html">aio_impl.h</a>&quot;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160; </div>
<div class="line"><a name="l00014"></a><span class="lineno"><a class="line" href="../../d8/d77/aio_8c.html#acf143577800376dd931c059ecc61ba06">   14</a></span>&#160;<span class="preprocessor">#define malloc __libc_malloc</span></div>
<div class="line"><a name="l00015"></a><span class="lineno"><a class="line" href="../../d8/d77/aio_8c.html#a84beef8cc122add35118ec7cd35286c4">   15</a></span>&#160;<span class="preprocessor">#define calloc __libc_calloc</span></div>
<div class="line"><a name="l00016"></a><span class="lineno"><a class="line" href="../../d8/d77/aio_8c.html#a1b739878adcdb46fb5d209af7ce79628">   16</a></span>&#160;<span class="preprocessor">#define realloc __libc_realloc</span></div>
<div class="line"><a name="l00017"></a><span class="lineno"><a class="line" href="../../d8/d77/aio_8c.html#a2c6efa7679f8cd9f61af96e105017560">   17</a></span>&#160;<span class="preprocessor">#define free __libc_free</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160; </div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">/* The following is a threads-based implementation of AIO with minimal</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> * dependence on implementation details. Most synchronization is</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> * performed with pthread primitives, but atomics and futex operations</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> * are used for notification in a couple places where the pthread</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"> * primitives would be inefficient or impractical.</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"> * For each fd with outstanding aio operations, an aio_queue structure</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"> * is maintained. These are reference-counted and destroyed by the last</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment"> * aio worker thread to exit. Accessing any member of the aio_queue</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment"> * structure requires a lock on the aio_queue. Adding and removing aio</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment"> * queues themselves requires a write lock on the global map object,</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment"> * a 4-level table mapping file descriptor numbers to aio queues. A</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment"> * read lock on the map is used to obtain locks on existing queues by</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment"> * excluding destruction of the queue by a different thread while it is</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment"> * being locked.</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment"> * Each aio queue has a list of active threads/operations. Presently there</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment"> * is a one to one relationship between threads and operations. The only</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment"> * members of the aio_thread structure which are accessed by other threads</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment"> * are the linked list pointers, op (which is immutable), running (which</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment"> * is updated atomically), and err (which is synchronized via running),</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment"> * so no locking is necessary. Most of the other other members are used</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment"> * for sharing data between the main flow of execution and cancellation</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment"> * cleanup handler.</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment"> * Taking any aio locks requires having all signals blocked. This is</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment"> * necessary because aio_cancel is needed by close, and close is required</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment"> * to be async-signal safe. All aio worker threads run with all signals</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment"> * blocked permanently.</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160; </div>
<div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="../../d8/d77/aio_8c.html">   50</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d8/d77/aio_8c.html#dd/dc9/structaio__thread">aio_thread</a> {</div>
<div class="line"><a name="l00051"></a><span class="lineno"><a class="line" href="../../d8/d77/aio_8c.html#a1463f777f4d654b6bc355739305732d7">   51</a></span>&#160;    pthread_t <a class="code" href="../../d8/d77/aio_8c.html#a1463f777f4d654b6bc355739305732d7">td</a>;</div>
<div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="../../d8/d77/aio_8c.html#a004a4a5d5e0c4d8951bd9764eaa72662">   52</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d8/d76/aio_8h.html#db/de9/structaiocb">aiocb</a> *<a class="code" href="../../d8/d77/aio_8c.html#a004a4a5d5e0c4d8951bd9764eaa72662">cb</a>;</div>
<div class="line"><a name="l00053"></a><span class="lineno"><a class="line" href="../../d8/d77/aio_8c.html#a77052d94a2bb4734d75e0e3b5f2428cc">   53</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d8/d77/aio_8c.html#dd/dc9/structaio__thread">aio_thread</a> *<a class="code" href="../../d8/d77/aio_8c.html#a77052d94a2bb4734d75e0e3b5f2428cc">next</a>, *<a class="code" href="../../d8/d77/aio_8c.html#ac9edad031ea758bee009bbf19bca91d1">prev</a>;</div>
<div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="../../d8/d77/aio_8c.html#ae189c375bedfbb3b165d7bf22f3d6a4f">   54</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d8/d77/aio_8c.html#d3/d94/structaio__queue">aio_queue</a> *<a class="code" href="../../d8/d77/aio_8c.html#ae189c375bedfbb3b165d7bf22f3d6a4f">q</a>;</div>
<div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="../../d8/d77/aio_8c.html#a499318853f3e21c0b2b3b718bb20e2b9">   55</a></span>&#160;    <span class="keyword">volatile</span> <span class="keywordtype">int</span> <a class="code" href="../../d8/d77/aio_8c.html#a499318853f3e21c0b2b3b718bb20e2b9">running</a>;</div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="../../d8/d77/aio_8c.html#a11b38d744bd7bacf3773d177795e9eb4">   56</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d8/d77/aio_8c.html#a11b38d744bd7bacf3773d177795e9eb4">err</a>, <a class="code" href="../../d8/d77/aio_8c.html#ac2ab5404411d69e9ef684d7bc5605315">op</a>;</div>
<div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="../../d8/d77/aio_8c.html#a65c742e818e6856c89f9d03f185032ad">   57</a></span>&#160;    <a class="code" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a87bd983bf349d8b86901f3200d559e8e">ssize_t</a> <a class="code" href="../../d8/d77/aio_8c.html#a65c742e818e6856c89f9d03f185032ad">ret</a>;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;};</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160; </div>
<div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="../../d8/d77/aio_8c.html">   60</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d8/d77/aio_8c.html#d3/d94/structaio__queue">aio_queue</a> {</div>
<div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="../../d8/d77/aio_8c.html#aa9e9d59e6bf0d4ec50c8e69c9abe4633">   61</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d8/d77/aio_8c.html#a2af4e87ff76621c913111632b8d2b853">fd</a>, <a class="code" href="../../d8/d77/aio_8c.html#a3564857f797dc639177bcfe0ee6b7bb5">seekable</a>, <a class="code" href="../../d8/d77/aio_8c.html#aa9e9d59e6bf0d4ec50c8e69c9abe4633">append</a>, <a class="code" href="../../d8/d77/aio_8c.html#a5cbd7b9205aadd058c89b455303210cf">ref</a>, <a class="code" href="../../d8/d77/aio_8c.html#aabff53510b9bb131a0cc31cf6f28823d">init</a>;</div>
<div class="line"><a name="l00062"></a><span class="lineno"><a class="line" href="../../d8/d77/aio_8c.html#a92cb7dd504c7912b96259489e52dd6fd">   62</a></span>&#160;    pthread_mutex_t <a class="code" href="../../d8/d77/aio_8c.html#a92cb7dd504c7912b96259489e52dd6fd">lock</a>;</div>
<div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="../../d8/d77/aio_8c.html#a8e3d3207ebcd7813453d6a35bb1d6a60">   63</a></span>&#160;    pthread_cond_t <a class="code" href="../../d8/d77/aio_8c.html#a8e3d3207ebcd7813453d6a35bb1d6a60">cond</a>;</div>
<div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="../../d8/d77/aio_8c.html#ab1832d3dc15ddd6350865507c45be69d">   64</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d8/d77/aio_8c.html#dd/dc9/structaio__thread">aio_thread</a> *<a class="code" href="../../d8/d77/aio_8c.html#ab1832d3dc15ddd6350865507c45be69d">head</a>;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;};</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160; </div>
<div class="line"><a name="l00067"></a><span class="lineno"><a class="line" href="../../d8/d77/aio_8c.html">   67</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d8/d77/aio_8c.html#d9/da3/structaio__args">aio_args</a> {</div>
<div class="line"><a name="l00068"></a><span class="lineno"><a class="line" href="../../d8/d77/aio_8c.html#a1af1cef48d49f79e27719ec7a712660e">   68</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d8/d76/aio_8h.html#db/de9/structaiocb">aiocb</a> *<a class="code" href="../../d8/d77/aio_8c.html#a1af1cef48d49f79e27719ec7a712660e">cb</a>;</div>
<div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="../../d8/d77/aio_8c.html#a87a38051a6a893a9abb0455d4f77f959">   69</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d8/d77/aio_8c.html#d3/d94/structaio__queue">aio_queue</a> *<a class="code" href="../../d8/d77/aio_8c.html#a87a38051a6a893a9abb0455d4f77f959">q</a>;</div>
<div class="line"><a name="l00070"></a><span class="lineno"><a class="line" href="../../d8/d77/aio_8c.html#a5682670c0e407a18c52e261220e13244">   70</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d8/d77/aio_8c.html#a5682670c0e407a18c52e261220e13244">op</a>;</div>
<div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="../../d8/d77/aio_8c.html#a77657aa8b6d4fc9db694697598702d64">   71</a></span>&#160;    <a class="code" href="../../d6/dc6/semaphore_8h.html#db/d5a/structsem__t">sem_t</a> <a class="code" href="../../d8/d77/aio_8c.html#a77657aa8b6d4fc9db694697598702d64">sem</a>;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;};</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160; </div>
<div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="../../d8/d77/aio_8c.html#a09b7af1367bf11b77813037167d0f356">   74</a></span>&#160;<span class="keyword">static</span> pthread_rwlock_t <a class="code" href="../../d8/d77/aio_8c.html#a09b7af1367bf11b77813037167d0f356">maplock</a> = <a class="code" href="../../d0/d0c/include_2pthread_8h.html#aa92fd7b492a8a5b31b2f8b3b6039c622">PTHREAD_RWLOCK_INITIALIZER</a>;</div>
<div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="../../d8/d77/aio_8c.html#a55ad2098ce5249a27c07ec287da71021">   75</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d8/d77/aio_8c.html#d3/d94/structaio__queue">aio_queue</a> *****<a class="code" href="../../d8/d77/aio_8c.html#a55ad2098ce5249a27c07ec287da71021">map</a>;</div>
<div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="../../d8/d77/aio_8c.html#ad9cf1154e96f6243abfce064084b6bb9">   76</a></span>&#160;<span class="keyword">static</span> <span class="keyword">volatile</span> <span class="keywordtype">int</span> <a class="code" href="../../d8/d77/aio_8c.html#ad9cf1154e96f6243abfce064084b6bb9">aio_fd_cnt</a>;</div>
<div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="../../d8/d77/aio_8c.html#aa3d46f89ca7b63141849ef466868e6e9">   77</a></span>&#160;<span class="keyword">volatile</span> <span class="keywordtype">int</span> <a class="code" href="../../d8/d77/aio_8c.html#aa3d46f89ca7b63141849ef466868e6e9">__aio_fut</a>;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160; </div>
<div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="../../d8/d77/aio_8c.html#a936bd86ef4efead77aeb6ad5496331a5">   79</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">size_t</span> <a class="code" href="../../d8/d77/aio_8c.html#a936bd86ef4efead77aeb6ad5496331a5">io_thread_stack_size</a>;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160; </div>
<div class="line"><a name="l00081"></a><span class="lineno"><a class="line" href="../../d8/d77/aio_8c.html#afa99ec4acc4ecb2dc3c2d05da15d0e3f">   81</a></span>&#160;<span class="preprocessor">#define MAX(a,b) ((a)&gt;(b) ? (a) : (b))</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160; </div>
<div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="../../d8/d77/aio_8c.html#a41afaa507e97f2cffb12be5fde11b386">   83</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d8/d77/aio_8c.html#d3/d94/structaio__queue">aio_queue</a> *<a class="code" href="../../d8/d77/aio_8c.html#a41afaa507e97f2cffb12be5fde11b386">__aio_get_queue</a>(<span class="keywordtype">int</span> <a class="code" href="../../d2/db3/hdparm_8c.html#a3153161a0d848ec64bf4895db3cf1be4a1e4d60e5b05464d07a30096747025a42">fd</a>, <span class="keywordtype">int</span> need)</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;{</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <a class="code" href="../../d8/d90/sigset__t_8h.html#a9140a5882f847f67b8155c759ac6aa05">sigset_t</a> allmask, origmask;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keywordtype">int</span> masked = 0;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d2/db3/hdparm_8c.html#a3153161a0d848ec64bf4895db3cf1be4a1e4d60e5b05464d07a30096747025a42">fd</a> &lt; 0) {</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        <a class="code" href="../../d7/d8c/libc_2include_2errno_8h.html#ab03f640d90fbc5bcb75285d08a0f25ed">errno</a> = <a class="code" href="../../d7/d8c/libc_2include_2errno_8h.html#ac54507d66b43ad12f9356257323c0018">EBADF</a>;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    }</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="keywordtype">int</span> a=<a class="code" href="../../d2/db3/hdparm_8c.html#a3153161a0d848ec64bf4895db3cf1be4a1e4d60e5b05464d07a30096747025a42">fd</a>&gt;&gt;24;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> b=<a class="code" href="../../d2/db3/hdparm_8c.html#a3153161a0d848ec64bf4895db3cf1be4a1e4d60e5b05464d07a30096747025a42">fd</a>&gt;&gt;16, <a class="code" href="../../d8/d64/glob__loop_8c.html#a2019d0836036f2693a231fe5c7c65e20">c</a>=<a class="code" href="../../d2/db3/hdparm_8c.html#a3153161a0d848ec64bf4895db3cf1be4a1e4d60e5b05464d07a30096747025a42">fd</a>&gt;&gt;8, d=<a class="code" href="../../d2/db3/hdparm_8c.html#a3153161a0d848ec64bf4895db3cf1be4a1e4d60e5b05464d07a30096747025a42">fd</a>;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d8/d77/aio_8c.html#d3/d94/structaio__queue">aio_queue</a> *q = 0;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <a class="code" href="../../d0/d0c/include_2pthread_8h.html#a760ec40fd48d249f3360e28b6b251935">pthread_rwlock_rdlock</a>(&amp;<a class="code" href="../../d8/d77/aio_8c.html#a09b7af1367bf11b77813037167d0f356">maplock</a>);</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="keywordflow">if</span> ((!<a class="code" href="../../d8/d77/aio_8c.html#a55ad2098ce5249a27c07ec287da71021">map</a> || !<a class="code" href="../../d8/d77/aio_8c.html#a55ad2098ce5249a27c07ec287da71021">map</a>[a] || !<a class="code" href="../../d8/d77/aio_8c.html#a55ad2098ce5249a27c07ec287da71021">map</a>[a][b] || !<a class="code" href="../../d8/d77/aio_8c.html#a55ad2098ce5249a27c07ec287da71021">map</a>[a][b][<a class="code" href="../../d8/d64/glob__loop_8c.html#a2019d0836036f2693a231fe5c7c65e20">c</a>] || !(q=<a class="code" href="../../d8/d77/aio_8c.html#a55ad2098ce5249a27c07ec287da71021">map</a>[a][b][<a class="code" href="../../d8/d64/glob__loop_8c.html#a2019d0836036f2693a231fe5c7c65e20">c</a>][d])) &amp;&amp; need) {</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        <a class="code" href="../../d0/d0c/include_2pthread_8h.html#ac825e396d5b0821cb5ee97f34b5190e8">pthread_rwlock_unlock</a>(&amp;<a class="code" href="../../d8/d77/aio_8c.html#a09b7af1367bf11b77813037167d0f356">maplock</a>);</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d2/d44/musl_2include_2fcntl_8h.html#aa7a55dad56032ce4c5a40eab1d9c8e01">fcntl</a>(<a class="code" href="../../d2/db3/hdparm_8c.html#a3153161a0d848ec64bf4895db3cf1be4a1e4d60e5b05464d07a30096747025a42">fd</a>, <a class="code" href="../../d7/d86/musl_2arch_2aarch64_2bits_2fcntl_8h.html#abc11141031604fb22b8e3a201155cbb3">F_GETFD</a>) &lt; 0) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        <a class="code" href="../../d1/d5e/sigfillset_8c.html#a88d7bbc77ea1569ee21c90db549ea023">sigfillset</a>(&amp;allmask);</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        masked = 1;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        <a class="code" href="../../da/dc6/pthread__sigmask_8c.html#a31d0d292cd21c920eaaa99707bc2ae16">pthread_sigmask</a>(<a class="code" href="../../de/d62/sig_8h.html#a927f6ae16379576d638006c7498ac5d7">SIG_BLOCK</a>, &amp;allmask, &amp;origmask);</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        <a class="code" href="../../d0/d0c/include_2pthread_8h.html#abf94ad54f8350dc5a0252694e194d3be">pthread_rwlock_wrlock</a>(&amp;<a class="code" href="../../d8/d77/aio_8c.html#a09b7af1367bf11b77813037167d0f356">maplock</a>);</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d77/aio_8c.html#a936bd86ef4efead77aeb6ad5496331a5">io_thread_stack_size</a>) {</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="../../db/dd4/sm__loop_8c.html#acb906433e1289aa1c251dc5057746a88">val</a> = <a class="code" href="../../d0/dd9/src_2include_2sys_2auxv_8h.html#a27b546c1711588466cb907f6fe2311dc">__getauxval</a>(<a class="code" href="../../d1/d8c/apps_2system_2init_2aux_8h.html#af2aa639db0a8fd3b574ff79c7baf11a9">AT_MINSIGSTKSZ</a>);</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;            <a class="code" href="../../d8/d77/aio_8c.html#a936bd86ef4efead77aeb6ad5496331a5">io_thread_stack_size</a> = <a class="code" href="../../d8/d77/aio_8c.html#afa99ec4acc4ecb2dc3c2d05da15d0e3f">MAX</a>(MINSIGSTKSZ+2048, <a class="code" href="../../db/dd4/sm__loop_8c.html#acb906433e1289aa1c251dc5057746a88">val</a>+512);</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        }</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d77/aio_8c.html#a55ad2098ce5249a27c07ec287da71021">map</a>) <a class="code" href="../../d8/d77/aio_8c.html#a55ad2098ce5249a27c07ec287da71021">map</a> = <a class="code" href="../../d8/d77/aio_8c.html#a84beef8cc122add35118ec7cd35286c4">calloc</a>(<span class="keyword">sizeof</span> *<a class="code" href="../../d8/d77/aio_8c.html#a55ad2098ce5249a27c07ec287da71021">map</a>, (-1U/2+1)&gt;&gt;24);</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d77/aio_8c.html#a55ad2098ce5249a27c07ec287da71021">map</a>) <span class="keywordflow">goto</span> <a class="code" href="../../d3/d61/vfprintf_8c.html#ad834e8db1d9c585ad9e072f5256c24b2">out</a>;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d77/aio_8c.html#a55ad2098ce5249a27c07ec287da71021">map</a>[a]) <a class="code" href="../../d8/d77/aio_8c.html#a55ad2098ce5249a27c07ec287da71021">map</a>[a] = <a class="code" href="../../d8/d77/aio_8c.html#a84beef8cc122add35118ec7cd35286c4">calloc</a>(<span class="keyword">sizeof</span> **<a class="code" href="../../d8/d77/aio_8c.html#a55ad2098ce5249a27c07ec287da71021">map</a>, 256);</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d77/aio_8c.html#a55ad2098ce5249a27c07ec287da71021">map</a>[a]) <span class="keywordflow">goto</span> <a class="code" href="../../d3/d61/vfprintf_8c.html#ad834e8db1d9c585ad9e072f5256c24b2">out</a>;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d77/aio_8c.html#a55ad2098ce5249a27c07ec287da71021">map</a>[a][b]) <a class="code" href="../../d8/d77/aio_8c.html#a55ad2098ce5249a27c07ec287da71021">map</a>[a][b] = <a class="code" href="../../d8/d77/aio_8c.html#a84beef8cc122add35118ec7cd35286c4">calloc</a>(<span class="keyword">sizeof</span> ***<a class="code" href="../../d8/d77/aio_8c.html#a55ad2098ce5249a27c07ec287da71021">map</a>, 256);</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d77/aio_8c.html#a55ad2098ce5249a27c07ec287da71021">map</a>[a][b]) <span class="keywordflow">goto</span> <a class="code" href="../../d3/d61/vfprintf_8c.html#ad834e8db1d9c585ad9e072f5256c24b2">out</a>;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d77/aio_8c.html#a55ad2098ce5249a27c07ec287da71021">map</a>[a][b][<a class="code" href="../../d8/d64/glob__loop_8c.html#a2019d0836036f2693a231fe5c7c65e20">c</a>]) <a class="code" href="../../d8/d77/aio_8c.html#a55ad2098ce5249a27c07ec287da71021">map</a>[a][b][<a class="code" href="../../d8/d64/glob__loop_8c.html#a2019d0836036f2693a231fe5c7c65e20">c</a>] = <a class="code" href="../../d8/d77/aio_8c.html#a84beef8cc122add35118ec7cd35286c4">calloc</a>(<span class="keyword">sizeof</span> ****<a class="code" href="../../d8/d77/aio_8c.html#a55ad2098ce5249a27c07ec287da71021">map</a>, 256);</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d77/aio_8c.html#a55ad2098ce5249a27c07ec287da71021">map</a>[a][b][<a class="code" href="../../d8/d64/glob__loop_8c.html#a2019d0836036f2693a231fe5c7c65e20">c</a>]) <span class="keywordflow">goto</span> <a class="code" href="../../d3/d61/vfprintf_8c.html#ad834e8db1d9c585ad9e072f5256c24b2">out</a>;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        <span class="keywordflow">if</span> (!(q = <a class="code" href="../../d8/d77/aio_8c.html#a55ad2098ce5249a27c07ec287da71021">map</a>[a][b][<a class="code" href="../../d8/d64/glob__loop_8c.html#a2019d0836036f2693a231fe5c7c65e20">c</a>][d])) {</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;            <a class="code" href="../../d8/d77/aio_8c.html#a55ad2098ce5249a27c07ec287da71021">map</a>[a][b][<a class="code" href="../../d8/d64/glob__loop_8c.html#a2019d0836036f2693a231fe5c7c65e20">c</a>][d] = q = <a class="code" href="../../d8/d77/aio_8c.html#a84beef8cc122add35118ec7cd35286c4">calloc</a>(<span class="keyword">sizeof</span> *****<a class="code" href="../../d8/d77/aio_8c.html#a55ad2098ce5249a27c07ec287da71021">map</a>, 1);</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;            <span class="keywordflow">if</span> (q) {</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                q-&gt;<a class="code" href="../../d8/d77/aio_8c.html#a2af4e87ff76621c913111632b8d2b853">fd</a> = <a class="code" href="../../d2/db3/hdparm_8c.html#a3153161a0d848ec64bf4895db3cf1be4a1e4d60e5b05464d07a30096747025a42">fd</a>;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                <a class="code" href="../../d0/d0c/include_2pthread_8h.html#a87991ced01b9e7c215e98c8c5aed384d">pthread_mutex_init</a>(&amp;q-&gt;<a class="code" href="../../d8/d77/aio_8c.html#a92cb7dd504c7912b96259489e52dd6fd">lock</a>, 0);</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                <a class="code" href="../../d0/d0c/include_2pthread_8h.html#aa0e61199690dfe5e115992ca6ab7c1f1">pthread_cond_init</a>(&amp;q-&gt;<a class="code" href="../../d8/d77/aio_8c.html#a8e3d3207ebcd7813453d6a35bb1d6a60">cond</a>, 0);</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                <a class="code" href="../../d6/dad/i386_2atomic__arch_8h.html#ac7cca19cffb02ea20f6344df1f002c2a">a_inc</a>(&amp;<a class="code" href="../../d8/d77/aio_8c.html#ad9cf1154e96f6243abfce064084b6bb9">aio_fd_cnt</a>);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;            }</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        }</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    }</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="keywordflow">if</span> (q) <a class="code" href="../../d0/d0c/include_2pthread_8h.html#aa2f968785be3b0192d66ddf47655255c">pthread_mutex_lock</a>(&amp;q-&gt;<a class="code" href="../../d8/d77/aio_8c.html#a92cb7dd504c7912b96259489e52dd6fd">lock</a>);</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<a class="code" href="../../d3/d61/vfprintf_8c.html#ad834e8db1d9c585ad9e072f5256c24b2">out</a>:</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <a class="code" href="../../d0/d0c/include_2pthread_8h.html#ac825e396d5b0821cb5ee97f34b5190e8">pthread_rwlock_unlock</a>(&amp;<a class="code" href="../../d8/d77/aio_8c.html#a09b7af1367bf11b77813037167d0f356">maplock</a>);</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keywordflow">if</span> (masked) <a class="code" href="../../da/dc6/pthread__sigmask_8c.html#a31d0d292cd21c920eaaa99707bc2ae16">pthread_sigmask</a>(<a class="code" href="../../de/d62/sig_8h.html#a37750b78b7ae75fe02ad26e70f6cc845">SIG_SETMASK</a>, &amp;origmask, 0);</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="keywordflow">return</span> q;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;}</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160; </div>
<div class="line"><a name="l00131"></a><span class="lineno"><a class="line" href="../../d8/d77/aio_8c.html#ac6d18acc920a8b3d99ca14f27748bb16">  131</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d8/d77/aio_8c.html#ac6d18acc920a8b3d99ca14f27748bb16">__aio_unref_queue</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d77/aio_8c.html#d3/d94/structaio__queue">aio_queue</a> *q)</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;{</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="keywordflow">if</span> (q-&gt;<a class="code" href="../../d8/d77/aio_8c.html#a5cbd7b9205aadd058c89b455303210cf">ref</a> &gt; 1) {</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        q-&gt;<a class="code" href="../../d8/d77/aio_8c.html#a5cbd7b9205aadd058c89b455303210cf">ref</a>--;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <a class="code" href="../../d0/d0c/include_2pthread_8h.html#a4068a6ca4240f39279343affd1c0a2cd">pthread_mutex_unlock</a>(&amp;q-&gt;<a class="code" href="../../d8/d77/aio_8c.html#a92cb7dd504c7912b96259489e52dd6fd">lock</a>);</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    }</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160; </div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="comment">/* This is potentially the last reference, but a new reference</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment">     * may arrive since we cannot free the queue object without first</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment">     * taking the maplock, which requires releasing the queue lock. */</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <a class="code" href="../../d0/d0c/include_2pthread_8h.html#a4068a6ca4240f39279343affd1c0a2cd">pthread_mutex_unlock</a>(&amp;q-&gt;<a class="code" href="../../d8/d77/aio_8c.html#a92cb7dd504c7912b96259489e52dd6fd">lock</a>);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <a class="code" href="../../d0/d0c/include_2pthread_8h.html#abf94ad54f8350dc5a0252694e194d3be">pthread_rwlock_wrlock</a>(&amp;<a class="code" href="../../d8/d77/aio_8c.html#a09b7af1367bf11b77813037167d0f356">maplock</a>);</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <a class="code" href="../../d0/d0c/include_2pthread_8h.html#aa2f968785be3b0192d66ddf47655255c">pthread_mutex_lock</a>(&amp;q-&gt;<a class="code" href="../../d8/d77/aio_8c.html#a92cb7dd504c7912b96259489e52dd6fd">lock</a>);</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keywordflow">if</span> (q-&gt;<a class="code" href="../../d8/d77/aio_8c.html#a5cbd7b9205aadd058c89b455303210cf">ref</a> == 1) {</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="../../d2/db3/hdparm_8c.html#a3153161a0d848ec64bf4895db3cf1be4a1e4d60e5b05464d07a30096747025a42">fd</a>=q-&gt;<a class="code" href="../../d8/d77/aio_8c.html#a2af4e87ff76621c913111632b8d2b853">fd</a>;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        <span class="keywordtype">int</span> a=<a class="code" href="../../d2/db3/hdparm_8c.html#a3153161a0d848ec64bf4895db3cf1be4a1e4d60e5b05464d07a30096747025a42">fd</a>&gt;&gt;24;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> b=<a class="code" href="../../d2/db3/hdparm_8c.html#a3153161a0d848ec64bf4895db3cf1be4a1e4d60e5b05464d07a30096747025a42">fd</a>&gt;&gt;16, <a class="code" href="../../d8/d64/glob__loop_8c.html#a2019d0836036f2693a231fe5c7c65e20">c</a>=<a class="code" href="../../d2/db3/hdparm_8c.html#a3153161a0d848ec64bf4895db3cf1be4a1e4d60e5b05464d07a30096747025a42">fd</a>&gt;&gt;8, d=<a class="code" href="../../d2/db3/hdparm_8c.html#a3153161a0d848ec64bf4895db3cf1be4a1e4d60e5b05464d07a30096747025a42">fd</a>;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        <a class="code" href="../../d8/d77/aio_8c.html#a55ad2098ce5249a27c07ec287da71021">map</a>[a][b][<a class="code" href="../../d8/d64/glob__loop_8c.html#a2019d0836036f2693a231fe5c7c65e20">c</a>][d] = 0;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <a class="code" href="../../d6/dad/i386_2atomic__arch_8h.html#aac8f95feb70792d9864660f59ccd2160">a_dec</a>(&amp;<a class="code" href="../../d8/d77/aio_8c.html#ad9cf1154e96f6243abfce064084b6bb9">aio_fd_cnt</a>);</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        <a class="code" href="../../d0/d0c/include_2pthread_8h.html#ac825e396d5b0821cb5ee97f34b5190e8">pthread_rwlock_unlock</a>(&amp;<a class="code" href="../../d8/d77/aio_8c.html#a09b7af1367bf11b77813037167d0f356">maplock</a>);</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        <a class="code" href="../../d0/d0c/include_2pthread_8h.html#a4068a6ca4240f39279343affd1c0a2cd">pthread_mutex_unlock</a>(&amp;q-&gt;<a class="code" href="../../d8/d77/aio_8c.html#a92cb7dd504c7912b96259489e52dd6fd">lock</a>);</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <a class="code" href="../../d8/d77/aio_8c.html#a2c6efa7679f8cd9f61af96e105017560">free</a>(q);</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        q-&gt;<a class="code" href="../../d8/d77/aio_8c.html#a5cbd7b9205aadd058c89b455303210cf">ref</a>--;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        <a class="code" href="../../d0/d0c/include_2pthread_8h.html#ac825e396d5b0821cb5ee97f34b5190e8">pthread_rwlock_unlock</a>(&amp;<a class="code" href="../../d8/d77/aio_8c.html#a09b7af1367bf11b77813037167d0f356">maplock</a>);</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        <a class="code" href="../../d0/d0c/include_2pthread_8h.html#a4068a6ca4240f39279343affd1c0a2cd">pthread_mutex_unlock</a>(&amp;q-&gt;<a class="code" href="../../d8/d77/aio_8c.html#a92cb7dd504c7912b96259489e52dd6fd">lock</a>);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    }</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;}</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160; </div>
<div class="line"><a name="l00161"></a><span class="lineno"><a class="line" href="../../d8/d77/aio_8c.html#a9eaf4ac35f62141258f91b9e1042ed4c">  161</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d8/d77/aio_8c.html#a9eaf4ac35f62141258f91b9e1042ed4c">cleanup</a>(<span class="keywordtype">void</span> *<a class="code" href="../../d0/dd6/setxid_8c.html#d5/d06/structctx">ctx</a>)</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;{</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d8/d77/aio_8c.html#dd/dc9/structaio__thread">aio_thread</a> *at = <a class="code" href="../../d1/ddc/musl_2src_2malloc_2mallocng_2malloc_8c.html#aaabfc6451d990d9a5312948a8f4d8473">ctx</a>;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d8/d77/aio_8c.html#d3/d94/structaio__queue">aio_queue</a> *q = at-&gt;<a class="code" href="../../d8/d77/aio_8c.html#ae189c375bedfbb3b165d7bf22f3d6a4f">q</a>;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d8/d76/aio_8h.html#db/de9/structaiocb">aiocb</a> *cb = at-&gt;<a class="code" href="../../d8/d77/aio_8c.html#a004a4a5d5e0c4d8951bd9764eaa72662">cb</a>;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="keyword">struct </span>sigevent sev = cb-&gt;<a class="code" href="../../d8/d76/aio_8h.html#a7065f3086beb9cdffc525c1d09949268">aio_sigevent</a>;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160; </div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="comment">/* There are four potential types of waiters we could need to wake:</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment">     *   1. Callers of aio_cancel/close.</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment">     *   2. Callers of aio_suspend with a single aiocb.</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment">     *   3. Callers of aio_suspend with a list.</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="comment">     *   4. AIO worker threads waiting for sequenced operations.</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment">     * Types 1-3 are notified via atomics/futexes, mainly for AS-safety</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment">     * considerations. Type 4 is notified later via a cond var. */</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160; </div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    cb-&gt;<a class="code" href="../../d8/d76/aio_8h.html#a9cc7abe826e680921c809dbc8d43df09">__ret</a> = at-&gt;<a class="code" href="../../d8/d77/aio_8c.html#a65c742e818e6856c89f9d03f185032ad">ret</a>;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d6/dad/i386_2atomic__arch_8h.html#aa9f4ee73612a97f36d33c6dcb02c0880">a_swap</a>(&amp;at-&gt;<a class="code" href="../../d8/d77/aio_8c.html#a499318853f3e21c0b2b3b718bb20e2b9">running</a>, 0) &lt; 0)</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        <a class="code" href="../../d7/dd7/pthread__impl_8h.html#a8b3b5b6a1e42cde6c950d5cfcdd373ac">__wake</a>(&amp;at-&gt;<a class="code" href="../../d8/d77/aio_8c.html#a499318853f3e21c0b2b3b718bb20e2b9">running</a>, -1, 1);</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d6/dad/i386_2atomic__arch_8h.html#aa9f4ee73612a97f36d33c6dcb02c0880">a_swap</a>(&amp;cb-&gt;<a class="code" href="../../d8/d76/aio_8h.html#a50fc22a50686f751a980885c2466c389">__err</a>, at-&gt;<a class="code" href="../../d8/d77/aio_8c.html#a11b38d744bd7bacf3773d177795e9eb4">err</a>) != <a class="code" href="../../d7/d8c/libc_2include_2errno_8h.html#a6c045d5be06e715cc335784a7320714e">EINPROGRESS</a>)</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        <a class="code" href="../../d7/dd7/pthread__impl_8h.html#a8b3b5b6a1e42cde6c950d5cfcdd373ac">__wake</a>(&amp;cb-&gt;<a class="code" href="../../d8/d76/aio_8h.html#a50fc22a50686f751a980885c2466c389">__err</a>, -1, 1);</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d6/dad/i386_2atomic__arch_8h.html#aa9f4ee73612a97f36d33c6dcb02c0880">a_swap</a>(&amp;<a class="code" href="../../d8/d77/aio_8c.html#aa3d46f89ca7b63141849ef466868e6e9">__aio_fut</a>, 0))</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        <a class="code" href="../../d7/dd7/pthread__impl_8h.html#a8b3b5b6a1e42cde6c950d5cfcdd373ac">__wake</a>(&amp;<a class="code" href="../../d8/d77/aio_8c.html#aa3d46f89ca7b63141849ef466868e6e9">__aio_fut</a>, -1, 1);</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160; </div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <a class="code" href="../../d0/d0c/include_2pthread_8h.html#aa2f968785be3b0192d66ddf47655255c">pthread_mutex_lock</a>(&amp;q-&gt;<a class="code" href="../../d8/d77/aio_8c.html#a92cb7dd504c7912b96259489e52dd6fd">lock</a>);</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160; </div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="keywordflow">if</span> (at-&gt;<a class="code" href="../../d8/d77/aio_8c.html#a77052d94a2bb4734d75e0e3b5f2428cc">next</a>) at-&gt;<a class="code" href="../../d8/d77/aio_8c.html#a77052d94a2bb4734d75e0e3b5f2428cc">next</a>-&gt;<a class="code" href="../../d8/d77/aio_8c.html#ac9edad031ea758bee009bbf19bca91d1">prev</a> = at-&gt;<a class="code" href="../../d8/d77/aio_8c.html#ac9edad031ea758bee009bbf19bca91d1">prev</a>;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="keywordflow">if</span> (at-&gt;<a class="code" href="../../d8/d77/aio_8c.html#ac9edad031ea758bee009bbf19bca91d1">prev</a>) at-&gt;<a class="code" href="../../d8/d77/aio_8c.html#ac9edad031ea758bee009bbf19bca91d1">prev</a>-&gt;<a class="code" href="../../d8/d77/aio_8c.html#a77052d94a2bb4734d75e0e3b5f2428cc">next</a> = at-&gt;<a class="code" href="../../d8/d77/aio_8c.html#a77052d94a2bb4734d75e0e3b5f2428cc">next</a>;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="keywordflow">else</span> q-&gt;<a class="code" href="../../d8/d77/aio_8c.html#ab1832d3dc15ddd6350865507c45be69d">head</a> = at-&gt;<a class="code" href="../../d8/d77/aio_8c.html#a77052d94a2bb4734d75e0e3b5f2428cc">next</a>;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160; </div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="comment">/* Signal aio worker threads waiting for sequenced operations. */</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <a class="code" href="../../d0/d0c/include_2pthread_8h.html#ac7571a1978ec8c446f8a7c1ddc2580ec">pthread_cond_broadcast</a>(&amp;q-&gt;<a class="code" href="../../d8/d77/aio_8c.html#a8e3d3207ebcd7813453d6a35bb1d6a60">cond</a>);</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160; </div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <a class="code" href="../../d8/d77/aio_8c.html#ac6d18acc920a8b3d99ca14f27748bb16">__aio_unref_queue</a>(q);</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160; </div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="keywordflow">if</span> (sev.sigev_notify == SIGEV_SIGNAL) {</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        <a class="code" href="../../d1/d7b/libc_2include_2sys_2wait_8h.html#dc/dbc/structsiginfo__t">siginfo_t</a> si = {</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;            .si_signo = sev.sigev_signo,</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;            .si_value = sev.sigev_value,</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;            .si_code = SI_ASYNCIO,</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;            .si_pid = <a class="code" href="../../d3/d3a/jobs_8h.html#add1dc6545057b7f1c7f91352536fb060">getpid</a>(),</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;            .si_uid = <a class="code" href="../../d0/d32/dcigettext_8c.html#a844d3dee17e8924300992d69b641f7aa">getuid</a>()</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        };</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        <a class="code" href="../../de/da8/src_2internal_2syscall_8h.html#a2c82a4fb7243bb9b67ca2a9ed8efa8d1">__syscall</a>(SYS_rt_sigqueueinfo, si.si_pid, si.si_signo, &amp;si);</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    }</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordflow">if</span> (sev.sigev_notify == SIGEV_THREAD) {</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        <a class="code" href="../../d6/dad/i386_2atomic__arch_8h.html#a85b370673a722ec695af4367a4e0c0a6">a_store</a>(&amp;<a class="code" href="../../d7/dd7/pthread__impl_8h.html#a10e218eb7ae37b8c1542e3d03c324d23">__pthread_self</a>()-&gt;cancel, 0);</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        sev.sigev_notify_function(sev.sigev_value);</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    }</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;}</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160; </div>
<div class="line"><a name="l00211"></a><span class="lineno"><a class="line" href="../../d8/d77/aio_8c.html#a22d069413caafe578d82512e36739c36">  211</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> *<a class="code" href="../../d8/d77/aio_8c.html#a22d069413caafe578d82512e36739c36">io_thread_func</a>(<span class="keywordtype">void</span> *<a class="code" href="../../d0/dd6/setxid_8c.html#d5/d06/structctx">ctx</a>)</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;{</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d8/d77/aio_8c.html#dd/dc9/structaio__thread">aio_thread</a> at, *<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160; </div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d8/d77/aio_8c.html#d9/da3/structaio__args">aio_args</a> *<a class="code" href="../../d1/d0c/posix__spawn_8c.html#d8/d08/structargs">args</a> = <a class="code" href="../../d1/ddc/musl_2src_2malloc_2mallocng_2malloc_8c.html#aaabfc6451d990d9a5312948a8f4d8473">ctx</a>;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d8/d76/aio_8h.html#db/de9/structaiocb">aiocb</a> *cb = <a class="code" href="../../d1/d0c/posix__spawn_8c.html#d8/d08/structargs">args</a>-&gt;cb;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d2/db3/hdparm_8c.html#a3153161a0d848ec64bf4895db3cf1be4a1e4d60e5b05464d07a30096747025a42">fd</a> = cb-&gt;<a class="code" href="../../d8/d76/aio_8h.html#ad6b6e95e6e4a79487f7e6edaae26003f">aio_fildes</a>;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d5/df6/structop.html">op</a> = <a class="code" href="../../d1/d0c/posix__spawn_8c.html#d8/d08/structargs">args</a>-&gt;op;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="keywordtype">void</span> *<a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a> = (<span class="keywordtype">void</span> *)cb-&gt;<a class="code" href="../../d8/d76/aio_8h.html#a60a966202034e1abde4ca3ea0965fa30">aio_buf</a>;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="keywordtype">size_t</span> len = cb-&gt;<a class="code" href="../../d8/d76/aio_8h.html#a6b4f8a1d05ed5444784389734d71cda7">aio_nbytes</a>;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <a class="code" href="../../dc/dc1/libc_2include_2sys_2stat_8h.html#ae498af04567b740d66e09d36613c2cd8">off_t</a> <a class="code" href="../../da/d86/cramfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a> = cb-&gt;<a class="code" href="../../d8/d76/aio_8h.html#a1e74b350a9ca189fa7c25b61c5cede6c">aio_offset</a>;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160; </div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keyword">struct</span> <a class="code" href="../../d8/d77/aio_8c.html#d3/d94/structaio__queue">aio_queue</a> *q = <a class="code" href="../../d1/d0c/posix__spawn_8c.html#d8/d08/structargs">args</a>-&gt;q;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <a class="code" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a87bd983bf349d8b86901f3200d559e8e">ssize_t</a> ret;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160; </div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <a class="code" href="../../d0/d0c/include_2pthread_8h.html#aa2f968785be3b0192d66ddf47655255c">pthread_mutex_lock</a>(&amp;q-&gt;lock);</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <a class="code" href="../../d6/dc6/semaphore_8h.html#abc26076c8ff740c27a7b94779c361a6d">sem_post</a>(&amp;<a class="code" href="../../d1/d0c/posix__spawn_8c.html#d8/d08/structargs">args</a>-&gt;<a class="code" href="../../d1/d0c/posix__spawn_8c.html#a27cd29bc1423ed4fcaa2c9fd7bab72e6">sem</a>);</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160; </div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    at.<a class="code" href="../../d8/d77/aio_8c.html#ac2ab5404411d69e9ef684d7bc5605315">op</a> = <a class="code" href="../../d5/df6/structop.html">op</a>;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    at.<a class="code" href="../../d8/d77/aio_8c.html#a499318853f3e21c0b2b3b718bb20e2b9">running</a> = 1;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    at.<a class="code" href="../../d8/d77/aio_8c.html#a65c742e818e6856c89f9d03f185032ad">ret</a> = -1;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    at.<a class="code" href="../../d8/d77/aio_8c.html#a11b38d744bd7bacf3773d177795e9eb4">err</a> = <a class="code" href="../../d7/d8c/libc_2include_2errno_8h.html#a9532d840ef91fd8e1ecc5d7ca7cbf212">ECANCELED</a>;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    at.<a class="code" href="../../d8/d77/aio_8c.html#ae189c375bedfbb3b165d7bf22f3d6a4f">q</a> = q;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    at.<a class="code" href="../../d8/d77/aio_8c.html#a1463f777f4d654b6bc355739305732d7">td</a> = <a class="code" href="../../d7/dd7/pthread__impl_8h.html#a10e218eb7ae37b8c1542e3d03c324d23">__pthread_self</a>();</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    at.<a class="code" href="../../d8/d77/aio_8c.html#a004a4a5d5e0c4d8951bd9764eaa72662">cb</a> = cb;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    at.<a class="code" href="../../d8/d77/aio_8c.html#ac9edad031ea758bee009bbf19bca91d1">prev</a> = 0;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="keywordflow">if</span> ((at.<a class="code" href="../../d8/d77/aio_8c.html#a77052d94a2bb4734d75e0e3b5f2428cc">next</a> = q-&gt;head)) at.<a class="code" href="../../d8/d77/aio_8c.html#a77052d94a2bb4734d75e0e3b5f2428cc">next</a>-&gt;<a class="code" href="../../d8/d77/aio_8c.html#ac9edad031ea758bee009bbf19bca91d1">prev</a> = &amp;at;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    q-&gt;head = &amp;at;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160; </div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="keywordflow">if</span> (!q-&gt;init) {</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="../../d6/dd0/gzip_8c.html#af5b1ac4f09b892d7b5e8833a570d69b4">seekable</a> = <a class="code" href="../../de/d97/musl_2include_2unistd_8h.html#a5be409c8d98c21628b77dfb6b2b8f1e9">lseek</a>(<a class="code" href="../../d2/db3/hdparm_8c.html#a3153161a0d848ec64bf4895db3cf1be4a1e4d60e5b05464d07a30096747025a42">fd</a>, 0, <a class="code" href="../../d5/da5/zread_8c.html#a4c8d0b76b470ba65a43ca46a88320f39">SEEK_CUR</a>) &gt;= 0;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        q-&gt;seekable = <a class="code" href="../../d6/dd0/gzip_8c.html#af5b1ac4f09b892d7b5e8833a570d69b4">seekable</a>;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        q-&gt;append = !<a class="code" href="../../d6/dd0/gzip_8c.html#af5b1ac4f09b892d7b5e8833a570d69b4">seekable</a> || (<a class="code" href="../../d2/d44/musl_2include_2fcntl_8h.html#aa7a55dad56032ce4c5a40eab1d9c8e01">fcntl</a>(<a class="code" href="../../d2/db3/hdparm_8c.html#a3153161a0d848ec64bf4895db3cf1be4a1e4d60e5b05464d07a30096747025a42">fd</a>, <a class="code" href="../../d7/d86/musl_2arch_2aarch64_2bits_2fcntl_8h.html#a025fad21a889c79f02ec53abe3526c32">F_GETFL</a>) &amp; <a class="code" href="../../d2/d59/fdflags_8c.html#ae036f789407d21f07b211552d67b3214">O_APPEND</a>);</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        q-&gt;init = 1;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    }</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160; </div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <a class="code" href="../../d0/d0c/include_2pthread_8h.html#ae72da38daa100c45a20eba18c7179f52">pthread_cleanup_push</a>(<a class="code" href="../../d8/d77/aio_8c.html#a9eaf4ac35f62141258f91b9e1042ed4c">cleanup</a>, &amp;at);</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160; </div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="comment">/* Wait for sequenced operations. */</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d5/df6/structop.html">op</a>!=<a class="code" href="../../d8/d76/aio_8h.html#a72369fbe46a0e1632afb1eac1340ae76">LIO_READ</a> &amp;&amp; (<a class="code" href="../../d5/df6/structop.html">op</a>!=<a class="code" href="../../d8/d76/aio_8h.html#a6e4b2bc060140597b36585a5568ce071">LIO_WRITE</a> || q-&gt;append)) {</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        <span class="keywordflow">for</span> (;;) {</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>=at.<a class="code" href="../../d8/d77/aio_8c.html#a77052d94a2bb4734d75e0e3b5f2428cc">next</a>; <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> &amp;&amp; <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;op!=<a class="code" href="../../d8/d76/aio_8h.html#a6e4b2bc060140597b36585a5568ce071">LIO_WRITE</a>; <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>=<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;next);</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;            <a class="code" href="../../d0/d0c/include_2pthread_8h.html#a5c3f085845cb13da36f45a6ece1f812c">pthread_cond_wait</a>(&amp;q-&gt;cond, &amp;q-&gt;lock);</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        }</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    }</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160; </div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <a class="code" href="../../d0/d0c/include_2pthread_8h.html#a4068a6ca4240f39279343affd1c0a2cd">pthread_mutex_unlock</a>(&amp;q-&gt;lock);</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160; </div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="../../d5/df6/structop.html">op</a>) {</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d8/d76/aio_8h.html#a6e4b2bc060140597b36585a5568ce071">LIO_WRITE</a>:</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        ret = q-&gt;append ? <a class="code" href="../../de/d97/musl_2include_2unistd_8h.html#abd6ad778aba7e4737ddd9ccb3b1335ff">write</a>(<a class="code" href="../../d2/db3/hdparm_8c.html#a3153161a0d848ec64bf4895db3cf1be4a1e4d60e5b05464d07a30096747025a42">fd</a>, <a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>, len) : <a class="code" href="../../de/d97/musl_2include_2unistd_8h.html#a0a2d5a13e0c26cf139a3371395280785">pwrite</a>(<a class="code" href="../../d2/db3/hdparm_8c.html#a3153161a0d848ec64bf4895db3cf1be4a1e4d60e5b05464d07a30096747025a42">fd</a>, <a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>, len, <a class="code" href="../../da/d86/cramfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a>);</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d8/d76/aio_8h.html#a72369fbe46a0e1632afb1eac1340ae76">LIO_READ</a>:</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        ret = !q-&gt;seekable ? <a class="code" href="../../de/d97/musl_2include_2unistd_8h.html#a8c673ae088139efcc2dfab1cbadff6f5">read</a>(<a class="code" href="../../d2/db3/hdparm_8c.html#a3153161a0d848ec64bf4895db3cf1be4a1e4d60e5b05464d07a30096747025a42">fd</a>, <a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>, len) : <a class="code" href="../../de/d97/musl_2include_2unistd_8h.html#a56477bd96864f982a5ff36dbd34de6a5">pread</a>(<a class="code" href="../../d2/db3/hdparm_8c.html#a3153161a0d848ec64bf4895db3cf1be4a1e4d60e5b05464d07a30096747025a42">fd</a>, <a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>, len, <a class="code" href="../../da/d86/cramfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a>);</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d2/d59/fdflags_8c.html#aae85139bfa94236d126bb1e3b772998f">O_SYNC</a>:</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        ret = <a class="code" href="../../de/d97/musl_2include_2unistd_8h.html#ab37281e48f68c8fc6ec8002ae7e01ade">fsync</a>(<a class="code" href="../../d2/db3/hdparm_8c.html#a3153161a0d848ec64bf4895db3cf1be4a1e4d60e5b05464d07a30096747025a42">fd</a>);</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d2/d59/fdflags_8c.html#af63e33218e573b9461b5f17d0ea79f2a">O_DSYNC</a>:</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        ret = <a class="code" href="../../de/d97/musl_2include_2unistd_8h.html#a3e4f78d3ed056c98a2788f90e37bcacc">fdatasync</a>(<a class="code" href="../../d2/db3/hdparm_8c.html#a3153161a0d848ec64bf4895db3cf1be4a1e4d60e5b05464d07a30096747025a42">fd</a>);</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    }</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    at.<a class="code" href="../../d8/d77/aio_8c.html#a65c742e818e6856c89f9d03f185032ad">ret</a> = ret;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    at.<a class="code" href="../../d8/d77/aio_8c.html#a11b38d744bd7bacf3773d177795e9eb4">err</a> = ret&lt;0 ? <a class="code" href="../../d7/d8c/libc_2include_2errno_8h.html#ab03f640d90fbc5bcb75285d08a0f25ed">errno</a> : 0;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    </div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <a class="code" href="../../d0/d0c/include_2pthread_8h.html#a0fe83df37117350c9b8168c9c27a6046">pthread_cleanup_pop</a>(1);</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160; </div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;}</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160; </div>
<div class="line"><a name="l00282"></a><span class="lineno"><a class="line" href="../../d8/d77/aio_8c.html#ae179a8f54b59af86df520f85e08988ca">  282</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d8/d77/aio_8c.html#ae179a8f54b59af86df520f85e08988ca">submit</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d76/aio_8h.html#db/de9/structaiocb">aiocb</a> *cb, <span class="keywordtype">int</span> <a class="code" href="../../d5/df6/structop.html">op</a>)</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;{</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="keywordtype">int</span> ret = 0;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    pthread_attr_t a;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <a class="code" href="../../d8/d90/sigset__t_8h.html#a9140a5882f847f67b8155c759ac6aa05">sigset_t</a> allmask, origmask;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    pthread_t <a class="code" href="../../d6/dcc/decompress__gunzip_8c.html#ab2c359e6c325062d33a4152752d8a820">td</a>;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d8/d77/aio_8c.html#d3/d94/structaio__queue">aio_queue</a> *q = <a class="code" href="../../d8/d77/aio_8c.html#a41afaa507e97f2cffb12be5fde11b386">__aio_get_queue</a>(cb-&gt;<a class="code" href="../../d8/d76/aio_8h.html#ad6b6e95e6e4a79487f7e6edaae26003f">aio_fildes</a>, 1);</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d8/d77/aio_8c.html#d9/da3/structaio__args">aio_args</a> <a class="code" href="../../d1/d0c/posix__spawn_8c.html#d8/d08/structargs">args</a> = { .cb = <a class="code" href="../../d8/d77/aio_8c.html#a1af1cef48d49f79e27719ec7a712660e">cb</a>, .op = <a class="code" href="../../d8/d77/aio_8c.html#a5682670c0e407a18c52e261220e13244">op</a>, .q = <a class="code" href="../../d8/d77/aio_8c.html#a87a38051a6a893a9abb0455d4f77f959">q</a> };</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <a class="code" href="../../d6/dc6/semaphore_8h.html#a6e7da10b3718df208dbc78decd3ab099">sem_init</a>(&amp;<a class="code" href="../../d1/d0c/posix__spawn_8c.html#d8/d08/structargs">args</a>.<a class="code" href="../../d1/d0c/posix__spawn_8c.html#a27cd29bc1423ed4fcaa2c9fd7bab72e6">sem</a>, 0, 0);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160; </div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d77/aio_8c.html#a87a38051a6a893a9abb0455d4f77f959">q</a>) {</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d7/d8c/libc_2include_2errno_8h.html#ab03f640d90fbc5bcb75285d08a0f25ed">errno</a> != <a class="code" href="../../d7/d8c/libc_2include_2errno_8h.html#ac54507d66b43ad12f9356257323c0018">EBADF</a>) <a class="code" href="../../d7/d8c/libc_2include_2errno_8h.html#ab03f640d90fbc5bcb75285d08a0f25ed">errno</a> = <a class="code" href="../../d7/d8c/libc_2include_2errno_8h.html#af0fac1cea1165b4debec7f686edf3313">EAGAIN</a>;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        <a class="code" href="../../d8/d77/aio_8c.html#a1af1cef48d49f79e27719ec7a712660e">cb</a>-&gt;<a class="code" href="../../d8/d76/aio_8h.html#a9cc7abe826e680921c809dbc8d43df09">__ret</a> = -1;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        <a class="code" href="../../d8/d77/aio_8c.html#a1af1cef48d49f79e27719ec7a712660e">cb</a>-&gt;<a class="code" href="../../d8/d76/aio_8h.html#a50fc22a50686f751a980885c2466c389">__err</a> = <a class="code" href="../../d7/d8c/libc_2include_2errno_8h.html#ab03f640d90fbc5bcb75285d08a0f25ed">errno</a>;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    }</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <a class="code" href="../../d8/d77/aio_8c.html#a87a38051a6a893a9abb0455d4f77f959">q</a>-&gt;<a class="code" href="../../d8/d77/aio_8c.html#a5cbd7b9205aadd058c89b455303210cf">ref</a>++;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <a class="code" href="../../d0/d0c/include_2pthread_8h.html#a4068a6ca4240f39279343affd1c0a2cd">pthread_mutex_unlock</a>(&amp;<a class="code" href="../../d8/d77/aio_8c.html#a87a38051a6a893a9abb0455d4f77f959">q</a>-&gt;<a class="code" href="../../d8/d77/aio_8c.html#a92cb7dd504c7912b96259489e52dd6fd">lock</a>);</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160; </div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d77/aio_8c.html#a1af1cef48d49f79e27719ec7a712660e">cb</a>-&gt;<a class="code" href="../../d8/d76/aio_8h.html#a7065f3086beb9cdffc525c1d09949268">aio_sigevent</a>.sigev_notify == SIGEV_THREAD) {</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d8/d77/aio_8c.html#a1af1cef48d49f79e27719ec7a712660e">cb</a>-&gt;<a class="code" href="../../d8/d76/aio_8h.html#a7065f3086beb9cdffc525c1d09949268">aio_sigevent</a>.sigev_notify_attributes)</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;            a = *<a class="code" href="../../d8/d77/aio_8c.html#a1af1cef48d49f79e27719ec7a712660e">cb</a>-&gt;<a class="code" href="../../d8/d76/aio_8h.html#a7065f3086beb9cdffc525c1d09949268">aio_sigevent</a>.sigev_notify_attributes;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;            <a class="code" href="../../d0/d0c/include_2pthread_8h.html#a388dfeb6c62aac2c66cb634484cfe0b5">pthread_attr_init</a>(&amp;a);</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        <a class="code" href="../../d0/d0c/include_2pthread_8h.html#a388dfeb6c62aac2c66cb634484cfe0b5">pthread_attr_init</a>(&amp;a);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        <a class="code" href="../../d0/d0c/include_2pthread_8h.html#a4929f5aca91b5f5a89ac3357676f5ee9">pthread_attr_setstacksize</a>(&amp;a, <a class="code" href="../../d8/d77/aio_8c.html#a936bd86ef4efead77aeb6ad5496331a5">io_thread_stack_size</a>);</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        <a class="code" href="../../d0/d0c/include_2pthread_8h.html#a581690191fe76f998ebc1ea75b9ae394">pthread_attr_setguardsize</a>(&amp;a, 0);</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    }</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <a class="code" href="../../d0/d0c/include_2pthread_8h.html#a9281c74c55df9885d41fbcb039ecc740">pthread_attr_setdetachstate</a>(&amp;a, <a class="code" href="../../d0/d0c/include_2pthread_8h.html#a391c5eb0f6b5febc48710d0be3f62394">PTHREAD_CREATE_DETACHED</a>);</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <a class="code" href="../../d1/d5e/sigfillset_8c.html#a88d7bbc77ea1569ee21c90db549ea023">sigfillset</a>(&amp;allmask);</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <a class="code" href="../../da/dc6/pthread__sigmask_8c.html#a31d0d292cd21c920eaaa99707bc2ae16">pthread_sigmask</a>(<a class="code" href="../../de/d62/sig_8h.html#a927f6ae16379576d638006c7498ac5d7">SIG_BLOCK</a>, &amp;allmask, &amp;origmask);</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <a class="code" href="../../d8/d77/aio_8c.html#a1af1cef48d49f79e27719ec7a712660e">cb</a>-&gt;<a class="code" href="../../d8/d76/aio_8h.html#a50fc22a50686f751a980885c2466c389">__err</a> = <a class="code" href="../../d7/d8c/libc_2include_2errno_8h.html#a6c045d5be06e715cc335784a7320714e">EINPROGRESS</a>;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0c/include_2pthread_8h.html#a82f41395d1d8eee4f8a0d1bb9957328e">pthread_create</a>(&amp;<a class="code" href="../../d6/dcc/decompress__gunzip_8c.html#ab2c359e6c325062d33a4152752d8a820">td</a>, &amp;a, <a class="code" href="../../d8/d77/aio_8c.html#a22d069413caafe578d82512e36739c36">io_thread_func</a>, &amp;<a class="code" href="../../d1/d0c/posix__spawn_8c.html#d8/d08/structargs">args</a>)) {</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        <a class="code" href="../../d0/d0c/include_2pthread_8h.html#aa2f968785be3b0192d66ddf47655255c">pthread_mutex_lock</a>(&amp;<a class="code" href="../../d8/d77/aio_8c.html#a87a38051a6a893a9abb0455d4f77f959">q</a>-&gt;<a class="code" href="../../d8/d77/aio_8c.html#a92cb7dd504c7912b96259489e52dd6fd">lock</a>);</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        <a class="code" href="../../d8/d77/aio_8c.html#ac6d18acc920a8b3d99ca14f27748bb16">__aio_unref_queue</a>(<a class="code" href="../../d8/d77/aio_8c.html#a87a38051a6a893a9abb0455d4f77f959">q</a>);</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        <a class="code" href="../../d8/d77/aio_8c.html#a1af1cef48d49f79e27719ec7a712660e">cb</a>-&gt;<a class="code" href="../../d8/d76/aio_8h.html#a50fc22a50686f751a980885c2466c389">__err</a> = <a class="code" href="../../d7/d8c/libc_2include_2errno_8h.html#ab03f640d90fbc5bcb75285d08a0f25ed">errno</a> = <a class="code" href="../../d7/d8c/libc_2include_2errno_8h.html#af0fac1cea1165b4debec7f686edf3313">EAGAIN</a>;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        <a class="code" href="../../d8/d77/aio_8c.html#a1af1cef48d49f79e27719ec7a712660e">cb</a>-&gt;<a class="code" href="../../d8/d76/aio_8h.html#a9cc7abe826e680921c809dbc8d43df09">__ret</a> = ret = -1;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    }</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <a class="code" href="../../da/dc6/pthread__sigmask_8c.html#a31d0d292cd21c920eaaa99707bc2ae16">pthread_sigmask</a>(<a class="code" href="../../de/d62/sig_8h.html#a37750b78b7ae75fe02ad26e70f6cc845">SIG_SETMASK</a>, &amp;origmask, 0);</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160; </div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <span class="keywordflow">if</span> (!ret) {</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        <span class="keywordflow">while</span> (<a class="code" href="../../d6/dc6/semaphore_8h.html#a254fae16851c1d2db23af8f877dbf3e6">sem_wait</a>(&amp;<a class="code" href="../../d1/d0c/posix__spawn_8c.html#d8/d08/structargs">args</a>.<a class="code" href="../../d1/d0c/posix__spawn_8c.html#a27cd29bc1423ed4fcaa2c9fd7bab72e6">sem</a>));</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    }</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160; </div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;}</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160; </div>
<div class="line"><a name="l00330"></a><span class="lineno"><a class="line" href="../../d8/d76/aio_8h.html#a38c640c2976ffe50cf2761eb0c9c9aad">  330</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d8/d77/aio_8c.html#a6fd52b9397491afb66b843269f7c1c81">aio_read</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d76/aio_8h.html#db/de9/structaiocb">aiocb</a> *<a class="code" href="../../d8/d77/aio_8c.html#a1af1cef48d49f79e27719ec7a712660e">cb</a>)</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;{</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d8/d77/aio_8c.html#ae179a8f54b59af86df520f85e08988ca">submit</a>(<a class="code" href="../../d8/d77/aio_8c.html#a1af1cef48d49f79e27719ec7a712660e">cb</a>, <a class="code" href="../../d8/d76/aio_8h.html#a72369fbe46a0e1632afb1eac1340ae76">LIO_READ</a>);</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;}</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160; </div>
<div class="line"><a name="l00335"></a><span class="lineno"><a class="line" href="../../d8/d76/aio_8h.html#aca1766007c6da4b0263b8ec14ddea340">  335</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d8/d77/aio_8c.html#a47d49be7b61d23a71920c07a100a0923">aio_write</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d76/aio_8h.html#db/de9/structaiocb">aiocb</a> *<a class="code" href="../../d8/d77/aio_8c.html#a1af1cef48d49f79e27719ec7a712660e">cb</a>)</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;{</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d8/d77/aio_8c.html#ae179a8f54b59af86df520f85e08988ca">submit</a>(<a class="code" href="../../d8/d77/aio_8c.html#a1af1cef48d49f79e27719ec7a712660e">cb</a>, <a class="code" href="../../d8/d76/aio_8h.html#a6e4b2bc060140597b36585a5568ce071">LIO_WRITE</a>);</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;}</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160; </div>
<div class="line"><a name="l00340"></a><span class="lineno"><a class="line" href="../../d8/d76/aio_8h.html#a6195da23e2822ea481239ee681d172f2">  340</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d8/d77/aio_8c.html#aa726a017147bf9ad2f4054dc911cfab9">aio_fsync</a>(<span class="keywordtype">int</span> <a class="code" href="../../d5/df6/structop.html">op</a>, <span class="keyword">struct</span> <a class="code" href="../../d8/d76/aio_8h.html#db/de9/structaiocb">aiocb</a> *<a class="code" href="../../d8/d77/aio_8c.html#a1af1cef48d49f79e27719ec7a712660e">cb</a>)</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;{</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d5/df6/structop.html">op</a> != <a class="code" href="../../d2/d59/fdflags_8c.html#aae85139bfa94236d126bb1e3b772998f">O_SYNC</a> &amp;&amp; <a class="code" href="../../d5/df6/structop.html">op</a> != <a class="code" href="../../d2/d59/fdflags_8c.html#af63e33218e573b9461b5f17d0ea79f2a">O_DSYNC</a>) {</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        <a class="code" href="../../d7/d8c/libc_2include_2errno_8h.html#ab03f640d90fbc5bcb75285d08a0f25ed">errno</a> = <a class="code" href="../../d7/d8c/libc_2include_2errno_8h.html#a2d1678d5a7cc8ce499643f3b8957def4">EINVAL</a>;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    }</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d8/d77/aio_8c.html#ae179a8f54b59af86df520f85e08988ca">submit</a>(<a class="code" href="../../d8/d77/aio_8c.html#a1af1cef48d49f79e27719ec7a712660e">cb</a>, <a class="code" href="../../d5/df6/structop.html">op</a>);</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;}</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160; </div>
<div class="line"><a name="l00349"></a><span class="lineno"><a class="line" href="../../d8/d76/aio_8h.html#a1e447b3576dda4ce732fa05f3aa20985">  349</a></span>&#160;<a class="code" href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a87bd983bf349d8b86901f3200d559e8e">ssize_t</a> <a class="code" href="../../d8/d77/aio_8c.html#aeba8b0d55e15b9118864e67c5490dc03">aio_return</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d76/aio_8h.html#db/de9/structaiocb">aiocb</a> *<a class="code" href="../../d8/d77/aio_8c.html#a1af1cef48d49f79e27719ec7a712660e">cb</a>)</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;{</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d8/d77/aio_8c.html#a1af1cef48d49f79e27719ec7a712660e">cb</a>-&gt;<a class="code" href="../../d8/d76/aio_8h.html#a9cc7abe826e680921c809dbc8d43df09">__ret</a>;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;}</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160; </div>
<div class="line"><a name="l00354"></a><span class="lineno"><a class="line" href="../../d8/d76/aio_8h.html#a9f2350a7a42c52fbe42c3c4671aee886">  354</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d8/d77/aio_8c.html#a3e726086931c38abc9dbb78b299f62bc">aio_error</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d8/d76/aio_8h.html#db/de9/structaiocb">aiocb</a> *<a class="code" href="../../d8/d77/aio_8c.html#a1af1cef48d49f79e27719ec7a712660e">cb</a>)</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;{</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <a class="code" href="../../d1/d0e/aarch64_2atomic__arch_8h.html#aedd5a35eb0b91dee83f7d424034476ea">a_barrier</a>();</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d8/d77/aio_8c.html#a1af1cef48d49f79e27719ec7a712660e">cb</a>-&gt;<a class="code" href="../../d8/d76/aio_8h.html#a50fc22a50686f751a980885c2466c389">__err</a> &amp; 0x7fffffff;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;}</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160; </div>
<div class="line"><a name="l00360"></a><span class="lineno"><a class="line" href="../../d8/d76/aio_8h.html#ae47efb4b421769197021602df743e50e">  360</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d8/d77/aio_8c.html#aa69e245800663202c4aab1b86866323a">aio_cancel</a>(<span class="keywordtype">int</span> <a class="code" href="../../d2/db3/hdparm_8c.html#a3153161a0d848ec64bf4895db3cf1be4a1e4d60e5b05464d07a30096747025a42">fd</a>, <span class="keyword">struct</span> <a class="code" href="../../d8/d76/aio_8h.html#db/de9/structaiocb">aiocb</a> *<a class="code" href="../../d8/d77/aio_8c.html#a1af1cef48d49f79e27719ec7a712660e">cb</a>)</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;{</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <a class="code" href="../../d8/d90/sigset__t_8h.html#a9140a5882f847f67b8155c759ac6aa05">sigset_t</a> allmask, origmask;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="keywordtype">int</span> ret = <a class="code" href="../../d8/d76/aio_8h.html#a96fdf4481a5be4289335752cdfe2d1d8">AIO_ALLDONE</a>;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d8/d77/aio_8c.html#dd/dc9/structaio__thread">aio_thread</a> *<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../d8/d77/aio_8c.html#d3/d94/structaio__queue">aio_queue</a> *q;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160; </div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="comment">/* Unspecified behavior case. Report an error. */</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <span class="keywordflow">if</span> (cb &amp;&amp; <a class="code" href="../../d2/db3/hdparm_8c.html#a3153161a0d848ec64bf4895db3cf1be4a1e4d60e5b05464d07a30096747025a42">fd</a> != cb-&gt;<a class="code" href="../../d8/d76/aio_8h.html#ad6b6e95e6e4a79487f7e6edaae26003f">aio_fildes</a>) {</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        <a class="code" href="../../d7/d8c/libc_2include_2errno_8h.html#ab03f640d90fbc5bcb75285d08a0f25ed">errno</a> = <a class="code" href="../../d7/d8c/libc_2include_2errno_8h.html#a2d1678d5a7cc8ce499643f3b8957def4">EINVAL</a>;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    }</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160; </div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <a class="code" href="../../d1/d5e/sigfillset_8c.html#a88d7bbc77ea1569ee21c90db549ea023">sigfillset</a>(&amp;allmask);</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <a class="code" href="../../da/dc6/pthread__sigmask_8c.html#a31d0d292cd21c920eaaa99707bc2ae16">pthread_sigmask</a>(<a class="code" href="../../de/d62/sig_8h.html#a927f6ae16379576d638006c7498ac5d7">SIG_BLOCK</a>, &amp;allmask, &amp;origmask);</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160; </div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <a class="code" href="../../d7/d8c/libc_2include_2errno_8h.html#ab03f640d90fbc5bcb75285d08a0f25ed">errno</a> = <a class="code" href="../../d7/d8c/libc_2include_2errno_8h.html#a03e689f378f643d16ea7537918528a48">ENOENT</a>;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="keywordflow">if</span> (!(q = <a class="code" href="../../d8/d77/aio_8c.html#a41afaa507e97f2cffb12be5fde11b386">__aio_get_queue</a>(<a class="code" href="../../d2/db3/hdparm_8c.html#a3153161a0d848ec64bf4895db3cf1be4a1e4d60e5b05464d07a30096747025a42">fd</a>, 0))) {</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d7/d8c/libc_2include_2errno_8h.html#ab03f640d90fbc5bcb75285d08a0f25ed">errno</a> == <a class="code" href="../../d7/d8c/libc_2include_2errno_8h.html#ac54507d66b43ad12f9356257323c0018">EBADF</a>) ret = -1;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="../../d1/d47/fileman_8c.html#a5992b274cfdcacdbc1fa8347fd01ebde">done</a>;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    }</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160; </div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> = q-&gt;<a class="code" href="../../d8/d77/aio_8c.html#ab1832d3dc15ddd6350865507c45be69d">head</a>; <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>; <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> = <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;next) {</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        <span class="keywordflow">if</span> (cb &amp;&amp; cb != <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;cb) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        <span class="comment">/* Transition target from running to running-with-waiters */</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d1/d0e/aarch64_2atomic__arch_8h.html#acf94b42b060ee536fc750a448ccd2928">a_cas</a>(&amp;<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;running, 1, -1)) {</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;            <a class="code" href="../../d0/d0c/include_2pthread_8h.html#a27808134e9989279170aa8c3c522de30">pthread_cancel</a>(<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;td);</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;            <a class="code" href="../../d7/dd7/pthread__impl_8h.html#a7cf0e2581cda435719f52583725160ea">__wait</a>(&amp;<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;running, 0, -1, 1);</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;err == <a class="code" href="../../d7/d8c/libc_2include_2errno_8h.html#a9532d840ef91fd8e1ecc5d7ca7cbf212">ECANCELED</a>) ret = <a class="code" href="../../d8/d76/aio_8h.html#ad025933a3c08268888f60a584d03961a">AIO_CANCELED</a>;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        }</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    }</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160; </div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <a class="code" href="../../d0/d0c/include_2pthread_8h.html#a4068a6ca4240f39279343affd1c0a2cd">pthread_mutex_unlock</a>(&amp;q-&gt;<a class="code" href="../../d8/d77/aio_8c.html#a92cb7dd504c7912b96259489e52dd6fd">lock</a>);</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<a class="code" href="../../d1/d47/fileman_8c.html#a5992b274cfdcacdbc1fa8347fd01ebde">done</a>:</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <a class="code" href="../../da/dc6/pthread__sigmask_8c.html#a31d0d292cd21c920eaaa99707bc2ae16">pthread_sigmask</a>(<a class="code" href="../../de/d62/sig_8h.html#a37750b78b7ae75fe02ad26e70f6cc845">SIG_SETMASK</a>, &amp;origmask, 0);</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;}</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160; </div>
<div class="line"><a name="l00398"></a><span class="lineno"><a class="line" href="../../d8/d77/aio_8c.html#a946c3102650747997cd73c9589f887cf">  398</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d8/d77/aio_8c.html#a946c3102650747997cd73c9589f887cf">__aio_close</a>(<span class="keywordtype">int</span> <a class="code" href="../../d2/db3/hdparm_8c.html#a3153161a0d848ec64bf4895db3cf1be4a1e4d60e5b05464d07a30096747025a42">fd</a>)</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;{</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    <a class="code" href="../../d1/d0e/aarch64_2atomic__arch_8h.html#aedd5a35eb0b91dee83f7d424034476ea">a_barrier</a>();</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d77/aio_8c.html#ad9cf1154e96f6243abfce064084b6bb9">aio_fd_cnt</a>) <a class="code" href="../../d8/d77/aio_8c.html#aa69e245800663202c4aab1b86866323a">aio_cancel</a>(<a class="code" href="../../d2/db3/hdparm_8c.html#a3153161a0d848ec64bf4895db3cf1be4a1e4d60e5b05464d07a30096747025a42">fd</a>, 0);</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d2/db3/hdparm_8c.html#a3153161a0d848ec64bf4895db3cf1be4a1e4d60e5b05464d07a30096747025a42">fd</a>;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;}</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160; </div>
<div class="line"><a name="l00405"></a><span class="lineno"><a class="line" href="../../d8/d77/aio_8c.html#a261618bf430ad9711d1aeb7dc886a42e">  405</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d8/d77/aio_8c.html#a261618bf430ad9711d1aeb7dc886a42e">__aio_atfork</a>(<span class="keywordtype">int</span> who)</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;{</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="keywordflow">if</span> (who&lt;0) {</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        <a class="code" href="../../d0/d0c/include_2pthread_8h.html#a760ec40fd48d249f3360e28b6b251935">pthread_rwlock_rdlock</a>(&amp;<a class="code" href="../../d8/d77/aio_8c.html#a09b7af1367bf11b77813037167d0f356">maplock</a>);</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!who) {</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        <a class="code" href="../../d0/d0c/include_2pthread_8h.html#ac825e396d5b0821cb5ee97f34b5190e8">pthread_rwlock_unlock</a>(&amp;<a class="code" href="../../d8/d77/aio_8c.html#a09b7af1367bf11b77813037167d0f356">maplock</a>);</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    }</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <a class="code" href="../../d8/d77/aio_8c.html#ad9cf1154e96f6243abfce064084b6bb9">aio_fd_cnt</a> = 0;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0c/include_2pthread_8h.html#a7f13d74d271c39f9b26dbba2d5823738">pthread_rwlock_tryrdlock</a>(&amp;<a class="code" href="../../d8/d77/aio_8c.html#a09b7af1367bf11b77813037167d0f356">maplock</a>)) {</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        <span class="comment">/* Obtaining lock may fail if _Fork was called nor via</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;<span class="comment">         * fork. In this case, no further aio is possible from</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;<span class="comment">         * child and we can just null out map so __aio_close</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;<span class="comment">         * does not attempt to do anything. */</span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        <a class="code" href="../../d8/d77/aio_8c.html#a55ad2098ce5249a27c07ec287da71021">map</a> = 0;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    }</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d77/aio_8c.html#a55ad2098ce5249a27c07ec287da71021">map</a>) <span class="keywordflow">for</span> (<span class="keywordtype">int</span> a=0; a&lt;(-1U/2+1)&gt;&gt;24; a++)</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d8/d77/aio_8c.html#a55ad2098ce5249a27c07ec287da71021">map</a>[a]) <span class="keywordflow">for</span> (<span class="keywordtype">int</span> b=0; b&lt;256; b++)</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d8/d77/aio_8c.html#a55ad2098ce5249a27c07ec287da71021">map</a>[a][b]) <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../d8/d64/glob__loop_8c.html#a2019d0836036f2693a231fe5c7c65e20">c</a>=0; <a class="code" href="../../d8/d64/glob__loop_8c.html#a2019d0836036f2693a231fe5c7c65e20">c</a>&lt;256; <a class="code" href="../../d8/d64/glob__loop_8c.html#a2019d0836036f2693a231fe5c7c65e20">c</a>++)</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../d8/d77/aio_8c.html#a55ad2098ce5249a27c07ec287da71021">map</a>[a][b][<a class="code" href="../../d8/d64/glob__loop_8c.html#a2019d0836036f2693a231fe5c7c65e20">c</a>]) <span class="keywordflow">for</span> (<span class="keywordtype">int</span> d=0; d&lt;256; d++)</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;                    <a class="code" href="../../d8/d77/aio_8c.html#a55ad2098ce5249a27c07ec287da71021">map</a>[a][b][<a class="code" href="../../d8/d64/glob__loop_8c.html#a2019d0836036f2693a231fe5c7c65e20">c</a>][d] = 0;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="comment">/* Re-initialize the rwlock rather than unlocking since there</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="comment">     * may have been more than one reference on it in the parent.</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="comment">     * We are not a lock holder anyway; the thread in the parent was. */</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <a class="code" href="../../d0/d0c/include_2pthread_8h.html#a6982ab9e1d2414bd8bdc78100bf95184">pthread_rwlock_init</a>(&amp;<a class="code" href="../../d8/d77/aio_8c.html#a09b7af1367bf11b77813037167d0f356">maplock</a>, 0);</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;}</div>
<div class="ttc" id="aaarch64_2atomic__arch_8h_html_acf94b42b060ee536fc750a448ccd2928"><div class="ttname"><a href="../../d1/d0e/aarch64_2atomic__arch_8h.html#acf94b42b060ee536fc750a448ccd2928">a_cas</a></div><div class="ttdeci">#define a_cas</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0e/aarch64_2atomic__arch_8h_source.html#l00023">atomic_arch.h:23</a></div></div>
<div class="ttc" id="aaarch64_2atomic__arch_8h_html_aedd5a35eb0b91dee83f7d424034476ea"><div class="ttname"><a href="../../d1/d0e/aarch64_2atomic__arch_8h.html#aedd5a35eb0b91dee83f7d424034476ea">a_barrier</a></div><div class="ttdeci">#define a_barrier</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0e/aarch64_2atomic__arch_8h_source.html#l00017">atomic_arch.h:17</a></div></div>
<div class="ttc" id="aaio_8c_html_a004a4a5d5e0c4d8951bd9764eaa72662"><div class="ttname"><a href="../../d8/d77/aio_8c.html#a004a4a5d5e0c4d8951bd9764eaa72662">aio_thread::cb</a></div><div class="ttdeci">struct aiocb * cb</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d77/aio_8c_source.html#l00052">aio.c:52</a></div></div>
<div class="ttc" id="aaio_8c_html_a09b7af1367bf11b77813037167d0f356"><div class="ttname"><a href="../../d8/d77/aio_8c.html#a09b7af1367bf11b77813037167d0f356">maplock</a></div><div class="ttdeci">static pthread_rwlock_t maplock</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d77/aio_8c_source.html#l00074">aio.c:74</a></div></div>
<div class="ttc" id="aaio_8c_html_a11b38d744bd7bacf3773d177795e9eb4"><div class="ttname"><a href="../../d8/d77/aio_8c.html#a11b38d744bd7bacf3773d177795e9eb4">aio_thread::err</a></div><div class="ttdeci">int err</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d77/aio_8c_source.html#l00056">aio.c:56</a></div></div>
<div class="ttc" id="aaio_8c_html_a1463f777f4d654b6bc355739305732d7"><div class="ttname"><a href="../../d8/d77/aio_8c.html#a1463f777f4d654b6bc355739305732d7">aio_thread::td</a></div><div class="ttdeci">pthread_t td</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d77/aio_8c_source.html#l00051">aio.c:51</a></div></div>
<div class="ttc" id="aaio_8c_html_a1af1cef48d49f79e27719ec7a712660e"><div class="ttname"><a href="../../d8/d77/aio_8c.html#a1af1cef48d49f79e27719ec7a712660e">aio_args::cb</a></div><div class="ttdeci">struct aiocb * cb</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d77/aio_8c_source.html#l00068">aio.c:68</a></div></div>
<div class="ttc" id="aaio_8c_html_a22d069413caafe578d82512e36739c36"><div class="ttname"><a href="../../d8/d77/aio_8c.html#a22d069413caafe578d82512e36739c36">io_thread_func</a></div><div class="ttdeci">static void * io_thread_func(void *ctx)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d77/aio_8c_source.html#l00211">aio.c:211</a></div></div>
<div class="ttc" id="aaio_8c_html_a261618bf430ad9711d1aeb7dc886a42e"><div class="ttname"><a href="../../d8/d77/aio_8c.html#a261618bf430ad9711d1aeb7dc886a42e">__aio_atfork</a></div><div class="ttdeci">void __aio_atfork(int who)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d77/aio_8c_source.html#l00405">aio.c:405</a></div></div>
<div class="ttc" id="aaio_8c_html_a2af4e87ff76621c913111632b8d2b853"><div class="ttname"><a href="../../d8/d77/aio_8c.html#a2af4e87ff76621c913111632b8d2b853">aio_queue::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d77/aio_8c_source.html#l00061">aio.c:61</a></div></div>
<div class="ttc" id="aaio_8c_html_a2c6efa7679f8cd9f61af96e105017560"><div class="ttname"><a href="../../d8/d77/aio_8c.html#a2c6efa7679f8cd9f61af96e105017560">free</a></div><div class="ttdeci">#define free</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d77/aio_8c_source.html#l00017">aio.c:17</a></div></div>
<div class="ttc" id="aaio_8c_html_a3564857f797dc639177bcfe0ee6b7bb5"><div class="ttname"><a href="../../d8/d77/aio_8c.html#a3564857f797dc639177bcfe0ee6b7bb5">aio_queue::seekable</a></div><div class="ttdeci">int seekable</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d77/aio_8c_source.html#l00061">aio.c:61</a></div></div>
<div class="ttc" id="aaio_8c_html_a3e726086931c38abc9dbb78b299f62bc"><div class="ttname"><a href="../../d8/d77/aio_8c.html#a3e726086931c38abc9dbb78b299f62bc">aio_error</a></div><div class="ttdeci">int aio_error(const struct aiocb *cb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d77/aio_8c_source.html#l00354">aio.c:354</a></div></div>
<div class="ttc" id="aaio_8c_html_a41afaa507e97f2cffb12be5fde11b386"><div class="ttname"><a href="../../d8/d77/aio_8c.html#a41afaa507e97f2cffb12be5fde11b386">__aio_get_queue</a></div><div class="ttdeci">static struct aio_queue * __aio_get_queue(int fd, int need)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d77/aio_8c_source.html#l00083">aio.c:83</a></div></div>
<div class="ttc" id="aaio_8c_html_a47d49be7b61d23a71920c07a100a0923"><div class="ttname"><a href="../../d8/d77/aio_8c.html#a47d49be7b61d23a71920c07a100a0923">aio_write</a></div><div class="ttdeci">int aio_write(struct aiocb *cb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d77/aio_8c_source.html#l00335">aio.c:335</a></div></div>
<div class="ttc" id="aaio_8c_html_a499318853f3e21c0b2b3b718bb20e2b9"><div class="ttname"><a href="../../d8/d77/aio_8c.html#a499318853f3e21c0b2b3b718bb20e2b9">aio_thread::running</a></div><div class="ttdeci">volatile int running</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d77/aio_8c_source.html#l00055">aio.c:55</a></div></div>
<div class="ttc" id="aaio_8c_html_a55ad2098ce5249a27c07ec287da71021"><div class="ttname"><a href="../../d8/d77/aio_8c.html#a55ad2098ce5249a27c07ec287da71021">map</a></div><div class="ttdeci">static struct aio_queue ***** map</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d77/aio_8c_source.html#l00075">aio.c:75</a></div></div>
<div class="ttc" id="aaio_8c_html_a5682670c0e407a18c52e261220e13244"><div class="ttname"><a href="../../d8/d77/aio_8c.html#a5682670c0e407a18c52e261220e13244">aio_args::op</a></div><div class="ttdeci">int op</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d77/aio_8c_source.html#l00070">aio.c:70</a></div></div>
<div class="ttc" id="aaio_8c_html_a5cbd7b9205aadd058c89b455303210cf"><div class="ttname"><a href="../../d8/d77/aio_8c.html#a5cbd7b9205aadd058c89b455303210cf">aio_queue::ref</a></div><div class="ttdeci">int ref</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d77/aio_8c_source.html#l00061">aio.c:61</a></div></div>
<div class="ttc" id="aaio_8c_html_a65c742e818e6856c89f9d03f185032ad"><div class="ttname"><a href="../../d8/d77/aio_8c.html#a65c742e818e6856c89f9d03f185032ad">aio_thread::ret</a></div><div class="ttdeci">ssize_t ret</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d77/aio_8c_source.html#l00057">aio.c:57</a></div></div>
<div class="ttc" id="aaio_8c_html_a6fd52b9397491afb66b843269f7c1c81"><div class="ttname"><a href="../../d8/d77/aio_8c.html#a6fd52b9397491afb66b843269f7c1c81">aio_read</a></div><div class="ttdeci">int aio_read(struct aiocb *cb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d77/aio_8c_source.html#l00330">aio.c:330</a></div></div>
<div class="ttc" id="aaio_8c_html_a77052d94a2bb4734d75e0e3b5f2428cc"><div class="ttname"><a href="../../d8/d77/aio_8c.html#a77052d94a2bb4734d75e0e3b5f2428cc">aio_thread::next</a></div><div class="ttdeci">struct aio_thread * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d77/aio_8c_source.html#l00053">aio.c:53</a></div></div>
<div class="ttc" id="aaio_8c_html_a77657aa8b6d4fc9db694697598702d64"><div class="ttname"><a href="../../d8/d77/aio_8c.html#a77657aa8b6d4fc9db694697598702d64">aio_args::sem</a></div><div class="ttdeci">sem_t sem</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d77/aio_8c_source.html#l00071">aio.c:71</a></div></div>
<div class="ttc" id="aaio_8c_html_a84beef8cc122add35118ec7cd35286c4"><div class="ttname"><a href="../../d8/d77/aio_8c.html#a84beef8cc122add35118ec7cd35286c4">calloc</a></div><div class="ttdeci">#define calloc</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d77/aio_8c_source.html#l00015">aio.c:15</a></div></div>
<div class="ttc" id="aaio_8c_html_a87a38051a6a893a9abb0455d4f77f959"><div class="ttname"><a href="../../d8/d77/aio_8c.html#a87a38051a6a893a9abb0455d4f77f959">aio_args::q</a></div><div class="ttdeci">struct aio_queue * q</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d77/aio_8c_source.html#l00069">aio.c:69</a></div></div>
<div class="ttc" id="aaio_8c_html_a8e3d3207ebcd7813453d6a35bb1d6a60"><div class="ttname"><a href="../../d8/d77/aio_8c.html#a8e3d3207ebcd7813453d6a35bb1d6a60">aio_queue::cond</a></div><div class="ttdeci">pthread_cond_t cond</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d77/aio_8c_source.html#l00063">aio.c:63</a></div></div>
<div class="ttc" id="aaio_8c_html_a92cb7dd504c7912b96259489e52dd6fd"><div class="ttname"><a href="../../d8/d77/aio_8c.html#a92cb7dd504c7912b96259489e52dd6fd">aio_queue::lock</a></div><div class="ttdeci">pthread_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d77/aio_8c_source.html#l00062">aio.c:62</a></div></div>
<div class="ttc" id="aaio_8c_html_a936bd86ef4efead77aeb6ad5496331a5"><div class="ttname"><a href="../../d8/d77/aio_8c.html#a936bd86ef4efead77aeb6ad5496331a5">io_thread_stack_size</a></div><div class="ttdeci">static size_t io_thread_stack_size</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d77/aio_8c_source.html#l00079">aio.c:79</a></div></div>
<div class="ttc" id="aaio_8c_html_a946c3102650747997cd73c9589f887cf"><div class="ttname"><a href="../../d8/d77/aio_8c.html#a946c3102650747997cd73c9589f887cf">__aio_close</a></div><div class="ttdeci">int __aio_close(int fd)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d77/aio_8c_source.html#l00398">aio.c:398</a></div></div>
<div class="ttc" id="aaio_8c_html_a9eaf4ac35f62141258f91b9e1042ed4c"><div class="ttname"><a href="../../d8/d77/aio_8c.html#a9eaf4ac35f62141258f91b9e1042ed4c">cleanup</a></div><div class="ttdeci">static void cleanup(void *ctx)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d77/aio_8c_source.html#l00161">aio.c:161</a></div></div>
<div class="ttc" id="aaio_8c_html_aa3d46f89ca7b63141849ef466868e6e9"><div class="ttname"><a href="../../d8/d77/aio_8c.html#aa3d46f89ca7b63141849ef466868e6e9">__aio_fut</a></div><div class="ttdeci">volatile int __aio_fut</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d77/aio_8c_source.html#l00077">aio.c:77</a></div></div>
<div class="ttc" id="aaio_8c_html_aa69e245800663202c4aab1b86866323a"><div class="ttname"><a href="../../d8/d77/aio_8c.html#aa69e245800663202c4aab1b86866323a">aio_cancel</a></div><div class="ttdeci">int aio_cancel(int fd, struct aiocb *cb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d77/aio_8c_source.html#l00360">aio.c:360</a></div></div>
<div class="ttc" id="aaio_8c_html_aa726a017147bf9ad2f4054dc911cfab9"><div class="ttname"><a href="../../d8/d77/aio_8c.html#aa726a017147bf9ad2f4054dc911cfab9">aio_fsync</a></div><div class="ttdeci">int aio_fsync(int op, struct aiocb *cb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d77/aio_8c_source.html#l00340">aio.c:340</a></div></div>
<div class="ttc" id="aaio_8c_html_aa9e9d59e6bf0d4ec50c8e69c9abe4633"><div class="ttname"><a href="../../d8/d77/aio_8c.html#aa9e9d59e6bf0d4ec50c8e69c9abe4633">aio_queue::append</a></div><div class="ttdeci">int append</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d77/aio_8c_source.html#l00061">aio.c:61</a></div></div>
<div class="ttc" id="aaio_8c_html_aabff53510b9bb131a0cc31cf6f28823d"><div class="ttname"><a href="../../d8/d77/aio_8c.html#aabff53510b9bb131a0cc31cf6f28823d">aio_queue::init</a></div><div class="ttdeci">int init</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d77/aio_8c_source.html#l00061">aio.c:61</a></div></div>
<div class="ttc" id="aaio_8c_html_ab1832d3dc15ddd6350865507c45be69d"><div class="ttname"><a href="../../d8/d77/aio_8c.html#ab1832d3dc15ddd6350865507c45be69d">aio_queue::head</a></div><div class="ttdeci">struct aio_thread * head</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d77/aio_8c_source.html#l00064">aio.c:64</a></div></div>
<div class="ttc" id="aaio_8c_html_ac2ab5404411d69e9ef684d7bc5605315"><div class="ttname"><a href="../../d8/d77/aio_8c.html#ac2ab5404411d69e9ef684d7bc5605315">aio_thread::op</a></div><div class="ttdeci">int op</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d77/aio_8c_source.html#l00056">aio.c:56</a></div></div>
<div class="ttc" id="aaio_8c_html_ac6d18acc920a8b3d99ca14f27748bb16"><div class="ttname"><a href="../../d8/d77/aio_8c.html#ac6d18acc920a8b3d99ca14f27748bb16">__aio_unref_queue</a></div><div class="ttdeci">static void __aio_unref_queue(struct aio_queue *q)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d77/aio_8c_source.html#l00131">aio.c:131</a></div></div>
<div class="ttc" id="aaio_8c_html_ac9edad031ea758bee009bbf19bca91d1"><div class="ttname"><a href="../../d8/d77/aio_8c.html#ac9edad031ea758bee009bbf19bca91d1">aio_thread::prev</a></div><div class="ttdeci">struct aio_thread * prev</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d77/aio_8c_source.html#l00053">aio.c:53</a></div></div>
<div class="ttc" id="aaio_8c_html_ad9cf1154e96f6243abfce064084b6bb9"><div class="ttname"><a href="../../d8/d77/aio_8c.html#ad9cf1154e96f6243abfce064084b6bb9">aio_fd_cnt</a></div><div class="ttdeci">static volatile int aio_fd_cnt</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d77/aio_8c_source.html#l00076">aio.c:76</a></div></div>
<div class="ttc" id="aaio_8c_html_ae179a8f54b59af86df520f85e08988ca"><div class="ttname"><a href="../../d8/d77/aio_8c.html#ae179a8f54b59af86df520f85e08988ca">submit</a></div><div class="ttdeci">static int submit(struct aiocb *cb, int op)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d77/aio_8c_source.html#l00282">aio.c:282</a></div></div>
<div class="ttc" id="aaio_8c_html_ae189c375bedfbb3b165d7bf22f3d6a4f"><div class="ttname"><a href="../../d8/d77/aio_8c.html#ae189c375bedfbb3b165d7bf22f3d6a4f">aio_thread::q</a></div><div class="ttdeci">struct aio_queue * q</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d77/aio_8c_source.html#l00054">aio.c:54</a></div></div>
<div class="ttc" id="aaio_8c_html_aeba8b0d55e15b9118864e67c5490dc03"><div class="ttname"><a href="../../d8/d77/aio_8c.html#aeba8b0d55e15b9118864e67c5490dc03">aio_return</a></div><div class="ttdeci">ssize_t aio_return(struct aiocb *cb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d77/aio_8c_source.html#l00349">aio.c:349</a></div></div>
<div class="ttc" id="aaio_8c_html_afa99ec4acc4ecb2dc3c2d05da15d0e3f"><div class="ttname"><a href="../../d8/d77/aio_8c.html#afa99ec4acc4ecb2dc3c2d05da15d0e3f">MAX</a></div><div class="ttdeci">#define MAX(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d77/aio_8c_source.html#l00081">aio.c:81</a></div></div>
<div class="ttc" id="aaio_8c_html_d3/d94/structaio__queue"><div class="ttname"><a href="../../d8/d77/aio_8c.html#d3/d94/structaio__queue">aio_queue</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d77/aio_8c_source.html#l00060">aio.c:60</a></div></div>
<div class="ttc" id="aaio_8c_html_d9/da3/structaio__args"><div class="ttname"><a href="../../d8/d77/aio_8c.html#d9/da3/structaio__args">aio_args</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d77/aio_8c_source.html#l00067">aio.c:67</a></div></div>
<div class="ttc" id="aaio_8c_html_dd/dc9/structaio__thread"><div class="ttname"><a href="../../d8/d77/aio_8c.html#dd/dc9/structaio__thread">aio_thread</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d77/aio_8c_source.html#l00050">aio.c:50</a></div></div>
<div class="ttc" id="aaio_8h_html"><div class="ttname"><a href="../../d8/d76/aio_8h.html">aio.h</a></div></div>
<div class="ttc" id="aaio_8h_html_a1e74b350a9ca189fa7c25b61c5cede6c"><div class="ttname"><a href="../../d8/d76/aio_8h.html#a1e74b350a9ca189fa7c25b61c5cede6c">aiocb::aio_offset</a></div><div class="ttdeci">off_t aio_offset</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d76/aio_8h_source.html#l00026">aio.h:26</a></div></div>
<div class="ttc" id="aaio_8h_html_a50fc22a50686f751a980885c2466c389"><div class="ttname"><a href="../../d8/d76/aio_8h.html#a50fc22a50686f751a980885c2466c389">aiocb::__err</a></div><div class="ttdeci">volatile int __err</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d76/aio_8h_source.html#l00024">aio.h:24</a></div></div>
<div class="ttc" id="aaio_8h_html_a60a966202034e1abde4ca3ea0965fa30"><div class="ttname"><a href="../../d8/d76/aio_8h.html#a60a966202034e1abde4ca3ea0965fa30">aiocb::aio_buf</a></div><div class="ttdeci">volatile void * aio_buf</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d76/aio_8h_source.html#l00019">aio.h:19</a></div></div>
<div class="ttc" id="aaio_8h_html_a6b4f8a1d05ed5444784389734d71cda7"><div class="ttname"><a href="../../d8/d76/aio_8h.html#a6b4f8a1d05ed5444784389734d71cda7">aiocb::aio_nbytes</a></div><div class="ttdeci">size_t aio_nbytes</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d76/aio_8h_source.html#l00020">aio.h:20</a></div></div>
<div class="ttc" id="aaio_8h_html_a6e4b2bc060140597b36585a5568ce071"><div class="ttname"><a href="../../d8/d76/aio_8h.html#a6e4b2bc060140597b36585a5568ce071">LIO_WRITE</a></div><div class="ttdeci">#define LIO_WRITE</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d76/aio_8h_source.html#l00036">aio.h:36</a></div></div>
<div class="ttc" id="aaio_8h_html_a7065f3086beb9cdffc525c1d09949268"><div class="ttname"><a href="../../d8/d76/aio_8h.html#a7065f3086beb9cdffc525c1d09949268">aiocb::aio_sigevent</a></div><div class="ttdeci">struct sigevent aio_sigevent</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d76/aio_8h_source.html#l00020">aio.h:21</a></div></div>
<div class="ttc" id="aaio_8h_html_a72369fbe46a0e1632afb1eac1340ae76"><div class="ttname"><a href="../../d8/d76/aio_8h.html#a72369fbe46a0e1632afb1eac1340ae76">LIO_READ</a></div><div class="ttdeci">#define LIO_READ</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d76/aio_8h_source.html#l00035">aio.h:35</a></div></div>
<div class="ttc" id="aaio_8h_html_a96fdf4481a5be4289335752cdfe2d1d8"><div class="ttname"><a href="../../d8/d76/aio_8h.html#a96fdf4481a5be4289335752cdfe2d1d8">AIO_ALLDONE</a></div><div class="ttdeci">#define AIO_ALLDONE</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d76/aio_8h_source.html#l00033">aio.h:33</a></div></div>
<div class="ttc" id="aaio_8h_html_a9cc7abe826e680921c809dbc8d43df09"><div class="ttname"><a href="../../d8/d76/aio_8h.html#a9cc7abe826e680921c809dbc8d43df09">aiocb::__ret</a></div><div class="ttdeci">ssize_t __ret</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d76/aio_8h_source.html#l00025">aio.h:25</a></div></div>
<div class="ttc" id="aaio_8h_html_ad025933a3c08268888f60a584d03961a"><div class="ttname"><a href="../../d8/d76/aio_8h.html#ad025933a3c08268888f60a584d03961a">AIO_CANCELED</a></div><div class="ttdeci">#define AIO_CANCELED</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d76/aio_8h_source.html#l00031">aio.h:31</a></div></div>
<div class="ttc" id="aaio_8h_html_ad6b6e95e6e4a79487f7e6edaae26003f"><div class="ttname"><a href="../../d8/d76/aio_8h.html#ad6b6e95e6e4a79487f7e6edaae26003f">aiocb::aio_fildes</a></div><div class="ttdeci">int aio_fildes</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d76/aio_8h_source.html#l00018">aio.h:18</a></div></div>
<div class="ttc" id="aaio_8h_html_db/de9/structaiocb"><div class="ttname"><a href="../../d8/d76/aio_8h.html#db/de9/structaiocb">aiocb</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d76/aio_8h_source.html#l00017">aio.h:17</a></div></div>
<div class="ttc" id="aaio__impl_8h_html"><div class="ttname"><a href="../../de/dac/aio__impl_8h.html">aio_impl.h</a></div></div>
<div class="ttc" id="aapps_2base_2busybox_2coreutils_2stat_8c_html_aa29b866765bdc5bdf87b7eb666d66093"><div class="ttname"><a href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a></div><div class="ttdeci">#define buf</div></div>
<div class="ttc" id="aapps_2system_2init_2aux_8h_html_af2aa639db0a8fd3b574ff79c7baf11a9"><div class="ttname"><a href="../../d1/d8c/apps_2system_2init_2aux_8h.html#af2aa639db0a8fd3b574ff79c7baf11a9">AT_MINSIGSTKSZ</a></div><div class="ttdeci">#define AT_MINSIGSTKSZ</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/apps_2system_2init_2aux_8h_source.html#l00043">aux.h:43</a></div></div>
<div class="ttc" id="aatomic_8h_html"><div class="ttname"><a href="../../dd/d02/atomic_8h.html">atomic.h</a></div></div>
<div class="ttc" id="acramfs_8c_html_aa8df4166084b06f1e80d3510e5dcf7e1"><div class="ttname"><a href="../../da/d86/cramfs_8c.html#aa8df4166084b06f1e80d3510e5dcf7e1">off</a></div><div class="ttdeci">#define off</div></div>
<div class="ttc" id="adcigettext_8c_html_a844d3dee17e8924300992d69b641f7aa"><div class="ttname"><a href="../../d0/d32/dcigettext_8c.html#a844d3dee17e8924300992d69b641f7aa">getuid</a></div><div class="ttdeci">#define getuid()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d32/dcigettext_8c_source.html#l00402">dcigettext.c:402</a></div></div>
<div class="ttc" id="adecompress__gunzip_8c_html_ab2c359e6c325062d33a4152752d8a820"><div class="ttname"><a href="../../d6/dcc/decompress__gunzip_8c.html#ab2c359e6c325062d33a4152752d8a820">td</a></div><div class="ttdeci">#define td</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dcc/decompress__gunzip_8c_source.html#l00511">decompress_gunzip.c:511</a></div></div>
<div class="ttc" id="afdflags_8c_html_aae85139bfa94236d126bb1e3b772998f"><div class="ttname"><a href="../../d2/d59/fdflags_8c.html#aae85139bfa94236d126bb1e3b772998f">O_SYNC</a></div><div class="ttdeci">#define O_SYNC</div></div>
<div class="ttc" id="afdflags_8c_html_ae036f789407d21f07b211552d67b3214"><div class="ttname"><a href="../../d2/d59/fdflags_8c.html#ae036f789407d21f07b211552d67b3214">O_APPEND</a></div><div class="ttdeci">#define O_APPEND</div></div>
<div class="ttc" id="afdflags_8c_html_af63e33218e573b9461b5f17d0ea79f2a"><div class="ttname"><a href="../../d2/d59/fdflags_8c.html#af63e33218e573b9461b5f17d0ea79f2a">O_DSYNC</a></div><div class="ttdeci">#define O_DSYNC</div></div>
<div class="ttc" id="afileman_8c_html_a5992b274cfdcacdbc1fa8347fd01ebde"><div class="ttname"><a href="../../d1/d47/fileman_8c.html#a5992b274cfdcacdbc1fa8347fd01ebde">done</a></div><div class="ttdeci">int done</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d47/fileman_8c_source.html#l00115">fileman.c:115</a></div></div>
<div class="ttc" id="aglob__loop_8c_html_a2019d0836036f2693a231fe5c7c65e20"><div class="ttname"><a href="../../d8/d64/glob__loop_8c.html#a2019d0836036f2693a231fe5c7c65e20">c</a></div><div class="ttdeci">register GCHAR c</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d64/glob__loop_8c_source.html#l00028">glob_loop.c:26</a></div></div>
<div class="ttc" id="aglob__loop_8c_html_ac483f6ce851c9ecd9fb835ff7551737c"><div class="ttname"><a href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a></div><div class="ttdeci">p</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d64/glob__loop_8c_source.html#l00031">glob_loop.c:31</a></div></div>
<div class="ttc" id="agzip_8c_html_af5b1ac4f09b892d7b5e8833a570d69b4"><div class="ttname"><a href="../../d6/dd0/gzip_8c.html#af5b1ac4f09b892d7b5e8833a570d69b4">seekable</a></div><div class="ttdeci">#define seekable()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd0/gzip_8c_source.html#l00190">gzip.c:190</a></div></div>
<div class="ttc" id="ahdparm_8c_html_a3153161a0d848ec64bf4895db3cf1be4a1e4d60e5b05464d07a30096747025a42"><div class="ttname"><a href="../../d2/db3/hdparm_8c.html#a3153161a0d848ec64bf4895db3cf1be4a1e4d60e5b05464d07a30096747025a42">fd</a></div><div class="ttdeci">@ fd</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/hdparm_8c_source.html#l00352">hdparm.c:352</a></div></div>
<div class="ttc" id="ai386_2atomic__arch_8h_html_a85b370673a722ec695af4367a4e0c0a6"><div class="ttname"><a href="../../d6/dad/i386_2atomic__arch_8h.html#a85b370673a722ec695af4367a4e0c0a6">a_store</a></div><div class="ttdeci">#define a_store</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dad/i386_2atomic__arch_8h_source.html#l00060">atomic_arch.h:60</a></div></div>
<div class="ttc" id="ai386_2atomic__arch_8h_html_aa9f4ee73612a97f36d33c6dcb02c0880"><div class="ttname"><a href="../../d6/dad/i386_2atomic__arch_8h.html#aa9f4ee73612a97f36d33c6dcb02c0880">a_swap</a></div><div class="ttdeci">#define a_swap</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dad/i386_2atomic__arch_8h_source.html#l00010">atomic_arch.h:10</a></div></div>
<div class="ttc" id="ai386_2atomic__arch_8h_html_aac8f95feb70792d9864660f59ccd2160"><div class="ttname"><a href="../../d6/dad/i386_2atomic__arch_8h.html#aac8f95feb70792d9864660f59ccd2160">a_dec</a></div><div class="ttdeci">#define a_dec</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dad/i386_2atomic__arch_8h_source.html#l00052">atomic_arch.h:52</a></div></div>
<div class="ttc" id="ai386_2atomic__arch_8h_html_ac7cca19cffb02ea20f6344df1f002c2a"><div class="ttname"><a href="../../d6/dad/i386_2atomic__arch_8h.html#ac7cca19cffb02ea20f6344df1f002c2a">a_inc</a></div><div class="ttdeci">#define a_inc</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dad/i386_2atomic__arch_8h_source.html#l00044">atomic_arch.h:44</a></div></div>
<div class="ttc" id="ainclude_2pthread_8h_html_a0fe83df37117350c9b8168c9c27a6046"><div class="ttname"><a href="../../d0/d0c/include_2pthread_8h.html#a0fe83df37117350c9b8168c9c27a6046">pthread_cleanup_pop</a></div><div class="ttdeci">#define pthread_cleanup_pop(r)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0c/include_2pthread_8h_source.html#l00216">pthread.h:216</a></div></div>
<div class="ttc" id="ainclude_2pthread_8h_html_a27808134e9989279170aa8c3c522de30"><div class="ttname"><a href="../../d0/d0c/include_2pthread_8h.html#a27808134e9989279170aa8c3c522de30">pthread_cancel</a></div><div class="ttdeci">int pthread_cancel(pthread_t)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/daf/pthread__cancel_8c_source.html#l00092">pthread_cancel.c:92</a></div></div>
<div class="ttc" id="ainclude_2pthread_8h_html_a388dfeb6c62aac2c66cb634484cfe0b5"><div class="ttname"><a href="../../d0/d0c/include_2pthread_8h.html#a388dfeb6c62aac2c66cb634484cfe0b5">pthread_attr_init</a></div><div class="ttdeci">int pthread_attr_init(pthread_attr_t *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d64/pthread__attr__init_8c_source.html#l00003">pthread_attr_init.c:3</a></div></div>
<div class="ttc" id="ainclude_2pthread_8h_html_a391c5eb0f6b5febc48710d0be3f62394"><div class="ttname"><a href="../../d0/d0c/include_2pthread_8h.html#a391c5eb0f6b5febc48710d0be3f62394">PTHREAD_CREATE_DETACHED</a></div><div class="ttdeci">#define PTHREAD_CREATE_DETACHED</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0c/include_2pthread_8h_source.html#l00034">pthread.h:34</a></div></div>
<div class="ttc" id="ainclude_2pthread_8h_html_a4068a6ca4240f39279343affd1c0a2cd"><div class="ttname"><a href="../../d0/d0c/include_2pthread_8h.html#a4068a6ca4240f39279343affd1c0a2cd">pthread_mutex_unlock</a></div><div class="ttdeci">int pthread_mutex_unlock(pthread_mutex_t *)</div></div>
<div class="ttc" id="ainclude_2pthread_8h_html_a4929f5aca91b5f5a89ac3357676f5ee9"><div class="ttname"><a href="../../d0/d0c/include_2pthread_8h.html#a4929f5aca91b5f5a89ac3357676f5ee9">pthread_attr_setstacksize</a></div><div class="ttdeci">int pthread_attr_setstacksize(pthread_attr_t *, size_t)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d65/pthread__attr__setstacksize_8c_source.html#l00003">pthread_attr_setstacksize.c:3</a></div></div>
<div class="ttc" id="ainclude_2pthread_8h_html_a581690191fe76f998ebc1ea75b9ae394"><div class="ttname"><a href="../../d0/d0c/include_2pthread_8h.html#a581690191fe76f998ebc1ea75b9ae394">pthread_attr_setguardsize</a></div><div class="ttdeci">int pthread_attr_setguardsize(pthread_attr_t *, size_t)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/de4/pthread__attr__setguardsize_8c_source.html#l00003">pthread_attr_setguardsize.c:3</a></div></div>
<div class="ttc" id="ainclude_2pthread_8h_html_a5c3f085845cb13da36f45a6ece1f812c"><div class="ttname"><a href="../../d0/d0c/include_2pthread_8h.html#a5c3f085845cb13da36f45a6ece1f812c">pthread_cond_wait</a></div><div class="ttdeci">int pthread_cond_wait(pthread_cond_t *__restrict, pthread_mutex_t *__restrict)</div></div>
<div class="ttc" id="ainclude_2pthread_8h_html_a6982ab9e1d2414bd8bdc78100bf95184"><div class="ttname"><a href="../../d0/d0c/include_2pthread_8h.html#a6982ab9e1d2414bd8bdc78100bf95184">pthread_rwlock_init</a></div><div class="ttdeci">int pthread_rwlock_init(pthread_rwlock_t *__restrict, const pthread_rwlockattr_t *__restrict)</div></div>
<div class="ttc" id="ainclude_2pthread_8h_html_a760ec40fd48d249f3360e28b6b251935"><div class="ttname"><a href="../../d0/d0c/include_2pthread_8h.html#a760ec40fd48d249f3360e28b6b251935">pthread_rwlock_rdlock</a></div><div class="ttdeci">int pthread_rwlock_rdlock(pthread_rwlock_t *)</div></div>
<div class="ttc" id="ainclude_2pthread_8h_html_a7f13d74d271c39f9b26dbba2d5823738"><div class="ttname"><a href="../../d0/d0c/include_2pthread_8h.html#a7f13d74d271c39f9b26dbba2d5823738">pthread_rwlock_tryrdlock</a></div><div class="ttdeci">int pthread_rwlock_tryrdlock(pthread_rwlock_t *)</div></div>
<div class="ttc" id="ainclude_2pthread_8h_html_a82f41395d1d8eee4f8a0d1bb9957328e"><div class="ttname"><a href="../../d0/d0c/include_2pthread_8h.html#a82f41395d1d8eee4f8a0d1bb9957328e">pthread_create</a></div><div class="ttdeci">int pthread_create(pthread_t *__restrict, const pthread_attr_t *__restrict, void *(*)(void *), void *__restrict)</div></div>
<div class="ttc" id="ainclude_2pthread_8h_html_a87991ced01b9e7c215e98c8c5aed384d"><div class="ttname"><a href="../../d0/d0c/include_2pthread_8h.html#a87991ced01b9e7c215e98c8c5aed384d">pthread_mutex_init</a></div><div class="ttdeci">int pthread_mutex_init(pthread_mutex_t *__restrict, const pthread_mutexattr_t *__restrict)</div></div>
<div class="ttc" id="ainclude_2pthread_8h_html_a9281c74c55df9885d41fbcb039ecc740"><div class="ttname"><a href="../../d0/d0c/include_2pthread_8h.html#a9281c74c55df9885d41fbcb039ecc740">pthread_attr_setdetachstate</a></div><div class="ttdeci">int pthread_attr_setdetachstate(pthread_attr_t *, int)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d40/pthread__attr__setdetachstate_8c_source.html#l00003">pthread_attr_setdetachstate.c:3</a></div></div>
<div class="ttc" id="ainclude_2pthread_8h_html_aa0e61199690dfe5e115992ca6ab7c1f1"><div class="ttname"><a href="../../d0/d0c/include_2pthread_8h.html#aa0e61199690dfe5e115992ca6ab7c1f1">pthread_cond_init</a></div><div class="ttdeci">int pthread_cond_init(pthread_cond_t *__restrict, const pthread_condattr_t *__restrict)</div></div>
<div class="ttc" id="ainclude_2pthread_8h_html_aa2f968785be3b0192d66ddf47655255c"><div class="ttname"><a href="../../d0/d0c/include_2pthread_8h.html#aa2f968785be3b0192d66ddf47655255c">pthread_mutex_lock</a></div><div class="ttdeci">int pthread_mutex_lock(pthread_mutex_t *)</div></div>
<div class="ttc" id="ainclude_2pthread_8h_html_aa92fd7b492a8a5b31b2f8b3b6039c622"><div class="ttname"><a href="../../d0/d0c/include_2pthread_8h.html#aa92fd7b492a8a5b31b2f8b3b6039c622">PTHREAD_RWLOCK_INITIALIZER</a></div><div class="ttdeci">#define PTHREAD_RWLOCK_INITIALIZER</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0c/include_2pthread_8h_source.html#l00059">pthread.h:59</a></div></div>
<div class="ttc" id="ainclude_2pthread_8h_html_abf94ad54f8350dc5a0252694e194d3be"><div class="ttname"><a href="../../d0/d0c/include_2pthread_8h.html#abf94ad54f8350dc5a0252694e194d3be">pthread_rwlock_wrlock</a></div><div class="ttdeci">int pthread_rwlock_wrlock(pthread_rwlock_t *)</div></div>
<div class="ttc" id="ainclude_2pthread_8h_html_ac7571a1978ec8c446f8a7c1ddc2580ec"><div class="ttname"><a href="../../d0/d0c/include_2pthread_8h.html#ac7571a1978ec8c446f8a7c1ddc2580ec">pthread_cond_broadcast</a></div><div class="ttdeci">int pthread_cond_broadcast(pthread_cond_t *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d62/pthread__cond__broadcast_8c_source.html#l00003">pthread_cond_broadcast.c:3</a></div></div>
<div class="ttc" id="ainclude_2pthread_8h_html_ac825e396d5b0821cb5ee97f34b5190e8"><div class="ttname"><a href="../../d0/d0c/include_2pthread_8h.html#ac825e396d5b0821cb5ee97f34b5190e8">pthread_rwlock_unlock</a></div><div class="ttdeci">int pthread_rwlock_unlock(pthread_rwlock_t *)</div></div>
<div class="ttc" id="ainclude_2pthread_8h_html_ae72da38daa100c45a20eba18c7179f52"><div class="ttname"><a href="../../d0/d0c/include_2pthread_8h.html#ae72da38daa100c45a20eba18c7179f52">pthread_cleanup_push</a></div><div class="ttdeci">#define pthread_cleanup_push(f, x)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0c/include_2pthread_8h_source.html#l00215">pthread.h:215</a></div></div>
<div class="ttc" id="ajobs_8h_html_add1dc6545057b7f1c7f91352536fb060"><div class="ttname"><a href="../../d3/d3a/jobs_8h.html#add1dc6545057b7f1c7f91352536fb060">getpid</a></div><div class="ttdeci">pid_t getpid()</div></div>
<div class="ttc" id="alibc_2include_2errno_8h_html_a03e689f378f643d16ea7537918528a48"><div class="ttname"><a href="../../d7/d8c/libc_2include_2errno_8h.html#a03e689f378f643d16ea7537918528a48">ENOENT</a></div><div class="ttdeci">#define ENOENT</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d8c/libc_2include_2errno_8h_source.html#l00005">errno.h:5</a></div></div>
<div class="ttc" id="alibc_2include_2errno_8h_html_a2d1678d5a7cc8ce499643f3b8957def4"><div class="ttname"><a href="../../d7/d8c/libc_2include_2errno_8h.html#a2d1678d5a7cc8ce499643f3b8957def4">EINVAL</a></div><div class="ttdeci">#define EINVAL</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d8c/libc_2include_2errno_8h_source.html#l00025">errno.h:25</a></div></div>
<div class="ttc" id="alibc_2include_2errno_8h_html_a6c045d5be06e715cc335784a7320714e"><div class="ttname"><a href="../../d7/d8c/libc_2include_2errno_8h.html#a6c045d5be06e715cc335784a7320714e">EINPROGRESS</a></div><div class="ttdeci">#define EINPROGRESS</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d8c/libc_2include_2errno_8h_source.html#l00116">errno.h:116</a></div></div>
<div class="ttc" id="alibc_2include_2errno_8h_html_a9532d840ef91fd8e1ecc5d7ca7cbf212"><div class="ttname"><a href="../../d7/d8c/libc_2include_2errno_8h.html#a9532d840ef91fd8e1ecc5d7ca7cbf212">ECANCELED</a></div><div class="ttdeci">#define ECANCELED</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d8c/libc_2include_2errno_8h_source.html#l00126">errno.h:126</a></div></div>
<div class="ttc" id="alibc_2include_2errno_8h_html_ab03f640d90fbc5bcb75285d08a0f25ed"><div class="ttname"><a href="../../d7/d8c/libc_2include_2errno_8h.html#ab03f640d90fbc5bcb75285d08a0f25ed">errno</a></div><div class="ttdeci">#define errno</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d8c/libc_2include_2errno_8h_source.html#l00135">errno.h:135</a></div></div>
<div class="ttc" id="alibc_2include_2errno_8h_html_ac54507d66b43ad12f9356257323c0018"><div class="ttname"><a href="../../d7/d8c/libc_2include_2errno_8h.html#ac54507d66b43ad12f9356257323c0018">EBADF</a></div><div class="ttdeci">#define EBADF</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d8c/libc_2include_2errno_8h_source.html#l00012">errno.h:12</a></div></div>
<div class="ttc" id="alibc_2include_2errno_8h_html_af0fac1cea1165b4debec7f686edf3313"><div class="ttname"><a href="../../d7/d8c/libc_2include_2errno_8h.html#af0fac1cea1165b4debec7f686edf3313">EAGAIN</a></div><div class="ttdeci">#define EAGAIN</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d8c/libc_2include_2errno_8h_source.html#l00014">errno.h:14</a></div></div>
<div class="ttc" id="alibc_2include_2sys_2stat_8h_html_ae498af04567b740d66e09d36613c2cd8"><div class="ttname"><a href="../../dc/dc1/libc_2include_2sys_2stat_8h.html#ae498af04567b740d66e09d36613c2cd8">off_t</a></div><div class="ttdeci">#define off_t</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dc1/libc_2include_2sys_2stat_8h_source.html#l00012">stat.h:12</a></div></div>
<div class="ttc" id="alibc_2include_2sys_2types_8h_html_a87bd983bf349d8b86901f3200d559e8e"><div class="ttname"><a href="../../d1/d5b/libc_2include_2sys_2types_8h.html#a87bd983bf349d8b86901f3200d559e8e">ssize_t</a></div><div class="ttdeci">__ssize_t ssize_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d5b/libc_2include_2sys_2types_8h_source.html#l00033">types.h:33</a></div></div>
<div class="ttc" id="alibc_2include_2sys_2wait_8h_html_dc/dbc/structsiginfo__t"><div class="ttname"><a href="../../d1/d7b/libc_2include_2sys_2wait_8h.html#dc/dbc/structsiginfo__t">siginfo_t</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d7b/libc_2include_2sys_2wait_8h_source.html#l00013">wait.h:14</a></div></div>
<div class="ttc" id="amusl_2arch_2aarch64_2bits_2fcntl_8h_html_a025fad21a889c79f02ec53abe3526c32"><div class="ttname"><a href="../../d7/d86/musl_2arch_2aarch64_2bits_2fcntl_8h.html#a025fad21a889c79f02ec53abe3526c32">F_GETFL</a></div><div class="ttdeci">#define F_GETFL</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d86/musl_2arch_2aarch64_2bits_2fcntl_8h_source.html#l00025">fcntl.h:25</a></div></div>
<div class="ttc" id="amusl_2arch_2aarch64_2bits_2fcntl_8h_html_abc11141031604fb22b8e3a201155cbb3"><div class="ttname"><a href="../../d7/d86/musl_2arch_2aarch64_2bits_2fcntl_8h.html#abc11141031604fb22b8e3a201155cbb3">F_GETFD</a></div><div class="ttdeci">#define F_GETFD</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d86/musl_2arch_2aarch64_2bits_2fcntl_8h_source.html#l00023">fcntl.h:23</a></div></div>
<div class="ttc" id="amusl_2include_2fcntl_8h_html_aa7a55dad56032ce4c5a40eab1d9c8e01"><div class="ttname"><a href="../../d2/d44/musl_2include_2fcntl_8h.html#aa7a55dad56032ce4c5a40eab1d9c8e01">fcntl</a></div><div class="ttdeci">int fcntl(int, int,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/de6/fcntl_8c_source.html#l00007">fcntl.c:7</a></div></div>
<div class="ttc" id="amusl_2include_2unistd_8h_html_a0a2d5a13e0c26cf139a3371395280785"><div class="ttname"><a href="../../de/d97/musl_2include_2unistd_8h.html#a0a2d5a13e0c26cf139a3371395280785">pwrite</a></div><div class="ttdeci">ssize_t pwrite(int, const void *, size_t, off_t)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/de2/pwrite_8c_source.html#l00004">pwrite.c:4</a></div></div>
<div class="ttc" id="amusl_2include_2unistd_8h_html_a3e4f78d3ed056c98a2788f90e37bcacc"><div class="ttname"><a href="../../de/d97/musl_2include_2unistd_8h.html#a3e4f78d3ed056c98a2788f90e37bcacc">fdatasync</a></div><div class="ttdeci">int fdatasync(int)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dc4/fdatasync_8c_source.html#l00004">fdatasync.c:4</a></div></div>
<div class="ttc" id="amusl_2include_2unistd_8h_html_a56477bd96864f982a5ff36dbd34de6a5"><div class="ttname"><a href="../../de/d97/musl_2include_2unistd_8h.html#a56477bd96864f982a5ff36dbd34de6a5">pread</a></div><div class="ttdeci">ssize_t pread(int, void *, size_t, off_t)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d91/pread_8c_source.html#l00004">pread.c:4</a></div></div>
<div class="ttc" id="amusl_2include_2unistd_8h_html_a5be409c8d98c21628b77dfb6b2b8f1e9"><div class="ttname"><a href="../../de/d97/musl_2include_2unistd_8h.html#a5be409c8d98c21628b77dfb6b2b8f1e9">lseek</a></div><div class="ttdeci">off_t lseek(int, off_t, int)</div></div>
<div class="ttc" id="amusl_2include_2unistd_8h_html_a8c673ae088139efcc2dfab1cbadff6f5"><div class="ttname"><a href="../../de/d97/musl_2include_2unistd_8h.html#a8c673ae088139efcc2dfab1cbadff6f5">read</a></div><div class="ttdeci">ssize_t read(int, void *, size_t)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d40/musl_2src_2unistd_2read_8c_source.html#l00004">read.c:4</a></div></div>
<div class="ttc" id="amusl_2include_2unistd_8h_html_ab37281e48f68c8fc6ec8002ae7e01ade"><div class="ttname"><a href="../../de/d97/musl_2include_2unistd_8h.html#ab37281e48f68c8fc6ec8002ae7e01ade">fsync</a></div><div class="ttdeci">int fsync(int)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d8f/fsync_8c_source.html#l00004">fsync.c:4</a></div></div>
<div class="ttc" id="amusl_2include_2unistd_8h_html_abd6ad778aba7e4737ddd9ccb3b1335ff"><div class="ttname"><a href="../../de/d97/musl_2include_2unistd_8h.html#abd6ad778aba7e4737ddd9ccb3b1335ff">write</a></div><div class="ttdeci">ssize_t write(int, const void *, size_t)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dd8/musl_2src_2unistd_2write_8c_source.html#l00004">write.c:4</a></div></div>
<div class="ttc" id="amusl_2src_2malloc_2mallocng_2malloc_8c_html_aaabfc6451d990d9a5312948a8f4d8473"><div class="ttname"><a href="../../d1/ddc/musl_2src_2malloc_2mallocng_2malloc_8c.html#aaabfc6451d990d9a5312948a8f4d8473">ctx</a></div><div class="ttdeci">struct malloc_context ctx</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/ddc/musl_2src_2malloc_2mallocng_2malloc_8c_source.html#l00038">malloc.c:40</a></div></div>
<div class="ttc" id="aposix__spawn_8c_html_a27cd29bc1423ed4fcaa2c9fd7bab72e6"><div class="ttname"><a href="../../d1/d0c/posix__spawn_8c.html#a27cd29bc1423ed4fcaa2c9fd7bab72e6">args::sem</a></div><div class="ttdeci">sem_t sem</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d51/mq__notify_8c_source.html#l00011">mq_notify.c:11</a></div></div>
<div class="ttc" id="aposix__spawn_8c_html_d8/d08/structargs"><div class="ttname"><a href="../../d1/d0c/posix__spawn_8c.html#d8/d08/structargs">args</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d51/mq__notify_8c_source.html#l00010">mq_notify.c:10</a></div></div>
<div class="ttc" id="apthread__impl_8h_html"><div class="ttname"><a href="../../d7/dd7/pthread__impl_8h.html">pthread_impl.h</a></div></div>
<div class="ttc" id="apthread__impl_8h_html_a10e218eb7ae37b8c1542e3d03c324d23"><div class="ttname"><a href="../../d7/dd7/pthread__impl_8h.html#a10e218eb7ae37b8c1542e3d03c324d23">__pthread_self</a></div><div class="ttdeci">#define __pthread_self()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dd7/pthread__impl_8h_source.html#l00122">pthread_impl.h:122</a></div></div>
<div class="ttc" id="apthread__impl_8h_html_a7cf0e2581cda435719f52583725160ea"><div class="ttname"><a href="../../d7/dd7/pthread__impl_8h.html#a7cf0e2581cda435719f52583725160ea">__wait</a></div><div class="ttdeci">hidden void __wait(volatile int *, volatile int *, int, int)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d37/____wait_8c_source.html#l00003">__wait.c:3</a></div></div>
<div class="ttc" id="apthread__impl_8h_html_a8b3b5b6a1e42cde6c950d5cfcdd373ac"><div class="ttname"><a href="../../d7/dd7/pthread__impl_8h.html#a8b3b5b6a1e42cde6c950d5cfcdd373ac">__wake</a></div><div class="ttdeci">static void __wake(volatile void *addr, int cnt, int priv)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dd7/pthread__impl_8h_source.html#l00168">pthread_impl.h:168</a></div></div>
<div class="ttc" id="apthread__sigmask_8c_html_a31d0d292cd21c920eaaa99707bc2ae16"><div class="ttname"><a href="../../da/dc6/pthread__sigmask_8c.html#a31d0d292cd21c920eaaa99707bc2ae16">pthread_sigmask</a></div><div class="ttdeci">int pthread_sigmask(int how, const sigset_t *restrict set, sigset_t *restrict old)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dc6/pthread__sigmask_8c_source.html#l00005">pthread_sigmask.c:5</a></div></div>
<div class="ttc" id="asemaphore_8h_html"><div class="ttname"><a href="../../d6/dc6/semaphore_8h.html">semaphore.h</a></div></div>
<div class="ttc" id="asemaphore_8h_html_a254fae16851c1d2db23af8f877dbf3e6"><div class="ttname"><a href="../../d6/dc6/semaphore_8h.html#a254fae16851c1d2db23af8f877dbf3e6">sem_wait</a></div><div class="ttdeci">int sem_wait(sem_t *)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d02/sem__wait_8c_source.html#l00003">sem_wait.c:3</a></div></div>
<div class="ttc" id="asemaphore_8h_html_a6e7da10b3718df208dbc78decd3ab099"><div class="ttname"><a href="../../d6/dc6/semaphore_8h.html#a6e7da10b3718df208dbc78decd3ab099">sem_init</a></div><div class="ttdeci">int sem_init(sem_t *, int, unsigned)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/sem__init_8c_source.html#l00005">sem_init.c:5</a></div></div>
<div class="ttc" id="asemaphore_8h_html_abc26076c8ff740c27a7b94779c361a6d"><div class="ttname"><a href="../../d6/dc6/semaphore_8h.html#abc26076c8ff740c27a7b94779c361a6d">sem_post</a></div><div class="ttdeci">int sem_post(sem_t *)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d18/sem__post_8c_source.html#l00005">sem_post.c:5</a></div></div>
<div class="ttc" id="asemaphore_8h_html_db/d5a/structsem__t"><div class="ttname"><a href="../../d6/dc6/semaphore_8h.html#db/d5a/structsem__t">sem_t</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc6/semaphore_8h_source.html#l00017">semaphore.h:17</a></div></div>
<div class="ttc" id="asetxid_8c_html_d5/d06/structctx"><div class="ttname"><a href="../../d0/dd6/setxid_8c.html#d5/d06/structctx">ctx</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/ddf/setgroups_8c_source.html#l00007">setgroups.c:7</a></div></div>
<div class="ttc" id="asig_8h_html_a37750b78b7ae75fe02ad26e70f6cc845"><div class="ttname"><a href="../../de/d62/sig_8h.html#a37750b78b7ae75fe02ad26e70f6cc845">SIG_SETMASK</a></div><div class="ttdeci">#define SIG_SETMASK</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d62/sig_8h_source.html#l00059">sig.h:59</a></div></div>
<div class="ttc" id="asig_8h_html_a927f6ae16379576d638006c7498ac5d7"><div class="ttname"><a href="../../de/d62/sig_8h.html#a927f6ae16379576d638006c7498ac5d7">SIG_BLOCK</a></div><div class="ttdeci">#define SIG_BLOCK</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d62/sig_8h_source.html#l00058">sig.h:58</a></div></div>
<div class="ttc" id="asigfillset_8c_html_a88d7bbc77ea1569ee21c90db549ea023"><div class="ttname"><a href="../../d1/d5e/sigfillset_8c.html#a88d7bbc77ea1569ee21c90db549ea023">sigfillset</a></div><div class="ttdeci">int sigfillset(sigset_t *set)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d5e/sigfillset_8c_source.html#l00004">sigfillset.c:4</a></div></div>
<div class="ttc" id="asigset__t_8h_html_a9140a5882f847f67b8155c759ac6aa05"><div class="ttname"><a href="../../d8/d90/sigset__t_8h.html#a9140a5882f847f67b8155c759ac6aa05">sigset_t</a></div><div class="ttdeci">unsigned long sigset_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d90/sigset__t_8h_source.html#l00004">sigset_t.h:4</a></div></div>
<div class="ttc" id="asm__loop_8c_html_acb906433e1289aa1c251dc5057746a88"><div class="ttname"><a href="../../db/dd4/sm__loop_8c.html#acb906433e1289aa1c251dc5057746a88">val</a></div><div class="ttdeci">INT val</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dd4/sm__loop_8c_source.html#l00387">sm_loop.c:385</a></div></div>
<div class="ttc" id="asrc_2include_2sys_2auxv_8h_html_a27b546c1711588466cb907f6fe2311dc"><div class="ttname"><a href="../../d0/dd9/src_2include_2sys_2auxv_8h.html#a27b546c1711588466cb907f6fe2311dc">__getauxval</a></div><div class="ttdeci">hidden unsigned long __getauxval(unsigned long)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d64/getauxval_8c_source.html#l00005">getauxval.c:5</a></div></div>
<div class="ttc" id="asrc_2internal_2syscall_8h_html_a2c82a4fb7243bb9b67ca2a9ed8efa8d1"><div class="ttname"><a href="../../de/da8/src_2internal_2syscall_8h.html#a2c82a4fb7243bb9b67ca2a9ed8efa8d1">__syscall</a></div><div class="ttdeci">#define __syscall(...)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/da8/src_2internal_2syscall_8h_source.html#l00044">syscall.h:44</a></div></div>
<div class="ttc" id="astructop_html"><div class="ttname"><a href="../../d5/df6/structop.html">op</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dae/dc_8c_source.html#l00193">dc.c:193</a></div></div>
<div class="ttc" id="avfprintf_8c_html_ad834e8db1d9c585ad9e072f5256c24b2"><div class="ttname"><a href="../../d3/d61/vfprintf_8c.html#ad834e8db1d9c585ad9e072f5256c24b2">out</a></div><div class="ttdeci">static void out(FILE *f, const char *s, size_t l)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d61/vfprintf_8c_source.html#l00133">vfprintf.c:133</a></div></div>
<div class="ttc" id="azread_8c_html_a4c8d0b76b470ba65a43ca46a88320f39"><div class="ttname"><a href="../../d5/da5/zread_8c.html#a4c8d0b76b470ba65a43ca46a88320f39">SEEK_CUR</a></div><div class="ttdeci">#define SEEK_CUR</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/zread_8c_source.html#l00037">zread.c:37</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_97d86ce2f18c7710ea326fa47777d7d7.html">Userspace</a></li><li class="navelem"><a class="el" href="../../dir_47d7742199c8d53af1928dc9f4c4dff6.html">musl</a></li><li class="navelem"><a class="el" href="../../dir_288bda80f20c9f6b23f489e34d44fc5e.html">src</a></li><li class="navelem"><a class="el" href="../../dir_b6d12cbc25e4c2efee3b9c5e148099cd.html">aio</a></li><li class="navelem"><a class="el" href="../../d8/d77/aio_8c.html">aio.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
