<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Fennix Userspace: Userspace/apps/base/busybox/archival/dpkg.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="../../custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Fennix Userspace
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
   <div id="projectbrief">Userspace Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d7/d05/dpkg_8c.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">dpkg.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="../../d7/dd7/libbb_8h_source.html">libbb.h</a>&quot;</code><br />
<code>#include &lt;<a class="el" href="../../d6/d3d/fnmatch_8h_source.html">fnmatch.h</a>&gt;</code><br />
<code>#include &quot;<a class="el" href="../../d1/d94/bb__archive_8h_source.html">bb_archive.h</a>&quot;</code><br />
</div>
<p><a href="../../d7/d05/dpkg_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:da/d43/structedge__s"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d05/dpkg_8c.html#da/d43/structedge__s">edge_s</a></td></tr>
<tr class="separator:da/d43/structedge__s"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:d1/d51/structcommon__node__s"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d05/dpkg_8c.html#d1/d51/structcommon__node__s">common_node_s</a></td></tr>
<tr class="separator:d1/d51/structcommon__node__s"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:df/dfb/structstatus__node__s"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d05/dpkg_8c.html#df/dfb/structstatus__node__s">status_node_s</a></td></tr>
<tr class="separator:df/dfb/structstatus__node__s"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d11/structglobals.html">globals</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:d7/db0/structdeb__file__s"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d05/dpkg_8c.html#d7/db0/structdeb__file__s">deb_file_s</a></td></tr>
<tr class="separator:d7/db0/structdeb__file__s"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a34b2c25dfc0d68980864991d97671bbc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d05/dpkg_8c.html#a34b2c25dfc0d68980864991d97671bbc">NAME_HASH_PRIME</a>&#160;&#160;&#160;16381</td></tr>
<tr class="separator:a34b2c25dfc0d68980864991d97671bbc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69b135c7de1bd4344e12676bb1946fa1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d05/dpkg_8c.html#a69b135c7de1bd4344e12676bb1946fa1">PACKAGE_HASH_PRIME</a>&#160;&#160;&#160;10007</td></tr>
<tr class="separator:a69b135c7de1bd4344e12676bb1946fa1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb240e823a9482d83cd02f3340976265"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d05/dpkg_8c.html#adb240e823a9482d83cd02f3340976265">STATUS_HASH_PRIME</a>&#160;&#160;&#160;8191</td></tr>
<tr class="separator:adb240e823a9482d83cd02f3340976265"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed9ea78689ecce0b7264c02c7f8a9a54"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d05/dpkg_8c.html#aed9ea78689ecce0b7264c02c7f8a9a54">G</a>&#160;&#160;&#160;(*<a class="el" href="../../d5/ded/ptr__to__globals_8c.html#aff79e45ec02a9716e59b3aca1c9b6808">ptr_to_globals</a>)</td></tr>
<tr class="separator:aed9ea78689ecce0b7264c02c7f8a9a54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa77ba14cd48e018786c6b752ed1d11b0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d05/dpkg_8c.html#aa77ba14cd48e018786c6b752ed1d11b0">name_hashtable</a>&#160;&#160;&#160;(G.name_hashtable   )</td></tr>
<tr class="separator:aa77ba14cd48e018786c6b752ed1d11b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d27c89e1462f204c221e2cf5c9233d6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d05/dpkg_8c.html#a3d27c89e1462f204c221e2cf5c9233d6">package_hashtable</a>&#160;&#160;&#160;(G.package_hashtable)</td></tr>
<tr class="separator:a3d27c89e1462f204c221e2cf5c9233d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afedd0a411aaf4f39ccf5908554c7699b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d05/dpkg_8c.html#afedd0a411aaf4f39ccf5908554c7699b">status_hashtable</a>&#160;&#160;&#160;(G.status_hashtable )</td></tr>
<tr class="separator:afedd0a411aaf4f39ccf5908554c7699b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39d017e5ed76fae1ae7cec57e0d600c4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d05/dpkg_8c.html#a39d017e5ed76fae1ae7cec57e0d600c4">INIT_G</a>()</td></tr>
<tr class="separator:a39d017e5ed76fae1ae7cec57e0d600c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:aa8c96fa40f9e48c8b7d3fdda15046951"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="../../d7/d05/dpkg_8c.html#da/d43/structedge__s">edge_s</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d05/dpkg_8c.html#aa8c96fa40f9e48c8b7d3fdda15046951">edge_t</a></td></tr>
<tr class="separator:aa8c96fa40f9e48c8b7d3fdda15046951"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f5ff7138fd4c1dd7c01570fddcc0ab9"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="../../d7/d05/dpkg_8c.html#d1/d51/structcommon__node__s">common_node_s</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d05/dpkg_8c.html#a2f5ff7138fd4c1dd7c01570fddcc0ab9">common_node_t</a></td></tr>
<tr class="separator:a2f5ff7138fd4c1dd7c01570fddcc0ab9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35e49f6724ab51d9636a662293aca776"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="../../d7/d05/dpkg_8c.html#df/dfb/structstatus__node__s">status_node_s</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d05/dpkg_8c.html#a35e49f6724ab51d9636a662293aca776">status_node_t</a></td></tr>
<tr class="separator:a35e49f6724ab51d9636a662293aca776"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d9d9782c353a4a270bd29785ca749e1"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="../../d7/d05/dpkg_8c.html#d7/db0/structdeb__file__s">deb_file_s</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d05/dpkg_8c.html#a7d9d9782c353a4a270bd29785ca749e1">deb_file_t</a></td></tr>
<tr class="separator:a7d9d9782c353a4a270bd29785ca749e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a73b480dcdb4db9e6c91e846cf84a304e"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d05/dpkg_8c.html#a73b480dcdb4db9e6c91e846cf84a304e">edge_type_e</a> { <br />
&#160;&#160;<a class="el" href="../../d7/d05/dpkg_8c.html#a73b480dcdb4db9e6c91e846cf84a304ea2b0b250a9a7b56f5e189c072584919c1">EDGE_NULL</a> = 0
, <a class="el" href="../../d7/d05/dpkg_8c.html#a73b480dcdb4db9e6c91e846cf84a304eac9dfc4afeb58573a67d3ed2b91f460ca">EDGE_PRE_DEPENDS</a> = 1
, <a class="el" href="../../d7/d05/dpkg_8c.html#a73b480dcdb4db9e6c91e846cf84a304eacf11931ac8911cdd0aaf374ead49094f">EDGE_OR_PRE_DEPENDS</a> = 2
, <a class="el" href="../../d7/d05/dpkg_8c.html#a73b480dcdb4db9e6c91e846cf84a304ea90d2c9cde2903fb606ea74a193afad99">EDGE_DEPENDS</a> = 3
, <br />
&#160;&#160;<a class="el" href="../../d7/d05/dpkg_8c.html#a73b480dcdb4db9e6c91e846cf84a304ea4635745ed7c1363cdf11a76c4b9af8d4">EDGE_OR_DEPENDS</a> = 4
, <a class="el" href="../../d7/d05/dpkg_8c.html#a73b480dcdb4db9e6c91e846cf84a304eab2c0e7b78b57e3760accc45cc08434be">EDGE_REPLACES</a> = 5
, <a class="el" href="../../d7/d05/dpkg_8c.html#a73b480dcdb4db9e6c91e846cf84a304ea64e38f4113bce59cb73cefbc1646eb3e">EDGE_PROVIDES</a> = 7
, <a class="el" href="../../d7/d05/dpkg_8c.html#a73b480dcdb4db9e6c91e846cf84a304ea40c79a458b5d88f76922a72e0dd2af36">EDGE_CONFLICTS</a> = 9
, <br />
&#160;&#160;<a class="el" href="../../d7/d05/dpkg_8c.html#a73b480dcdb4db9e6c91e846cf84a304ea399bb8962d1158b8359f75a479c57d4c">EDGE_SUGGESTS</a> = 11
, <a class="el" href="../../d7/d05/dpkg_8c.html#a73b480dcdb4db9e6c91e846cf84a304ea2c82bc07a49b341a679a08551af78425">EDGE_RECOMMENDS</a> = 13
, <a class="el" href="../../d7/d05/dpkg_8c.html#a73b480dcdb4db9e6c91e846cf84a304ea64e6dc4eeb29ac382b80b72a42009792">EDGE_ENHANCES</a> = 15
<br />
 }</td></tr>
<tr class="separator:a73b480dcdb4db9e6c91e846cf84a304e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac654d21de7f6a409f1c1fdec91f95112"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d05/dpkg_8c.html#ac654d21de7f6a409f1c1fdec91f95112">operator_e</a> { <br />
&#160;&#160;<a class="el" href="../../d7/d05/dpkg_8c.html#ac654d21de7f6a409f1c1fdec91f95112a05025cba225f734911d8c854764ce156">VER_NULL</a> = 0
, <a class="el" href="../../d7/d05/dpkg_8c.html#ac654d21de7f6a409f1c1fdec91f95112ad7ea8faad6a84004e9a5fb0789c28552">VER_EQUAL</a> = 1
, <a class="el" href="../../d7/d05/dpkg_8c.html#ac654d21de7f6a409f1c1fdec91f95112aaf67750ced47fb05cb2b8eba9760e0be">VER_LESS</a> = 2
, <a class="el" href="../../d7/d05/dpkg_8c.html#ac654d21de7f6a409f1c1fdec91f95112ad0ac6e4d389629a4ecb76d91e441c884">VER_LESS_EQUAL</a> = 3
, <br />
&#160;&#160;<a class="el" href="../../d7/d05/dpkg_8c.html#ac654d21de7f6a409f1c1fdec91f95112afa8f9f4d4d75991761a32cdb1f892f98">VER_MORE</a> = 4
, <a class="el" href="../../d7/d05/dpkg_8c.html#ac654d21de7f6a409f1c1fdec91f95112a6f90bd977650b2780f23f0c483e4884e">VER_MORE_EQUAL</a> = 5
, <a class="el" href="../../d7/d05/dpkg_8c.html#ac654d21de7f6a409f1c1fdec91f95112adae6d6279d74c603c708541aec479b1d">VER_ANY</a> = 6
<br />
 }</td></tr>
<tr class="separator:ac654d21de7f6a409f1c1fdec91f95112"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9bdc3014f3d54c426b6d2df10de4960"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <br />
&#160;&#160;<a class="el" href="../../d7/d05/dpkg_8c.html#af9bdc3014f3d54c426b6d2df10de4960af5b4d9abde1d741a8289b96a9497ebd2">OPT_configure</a> = (1 &lt;&lt; 0)
, <a class="el" href="../../d7/d05/dpkg_8c.html#af9bdc3014f3d54c426b6d2df10de4960aa37cdd87ad309d1aa848162c27dd4929">OPT_install</a> = (1 &lt;&lt; 1)
, <a class="el" href="../../d7/d05/dpkg_8c.html#af9bdc3014f3d54c426b6d2df10de4960abb873e9c6b5aff2e9d50688daa7deb8e">OPT_list_installed</a> = (1 &lt;&lt; 2)
, <a class="el" href="../../d7/d05/dpkg_8c.html#af9bdc3014f3d54c426b6d2df10de4960a20aa3982bcd38e4c081658cc7c5d500b">OPT_purge</a> = (1 &lt;&lt; 3)
, <br />
&#160;&#160;<a class="el" href="../../d7/d05/dpkg_8c.html#af9bdc3014f3d54c426b6d2df10de4960ab839eada36a860bf30a4670d7313c7df">OPT_remove</a> = (1 &lt;&lt; 4)
, <a class="el" href="../../d7/d05/dpkg_8c.html#af9bdc3014f3d54c426b6d2df10de4960abdd0e0540791ff9a47681129c2c7bb0d">OPT_unpack</a> = (1 &lt;&lt; 5)
, <a class="el" href="../../d7/d05/dpkg_8c.html#af9bdc3014f3d54c426b6d2df10de4960a3ec19c18509a939ddaddcc9e1e9bf12d">OPTMASK_cmd</a> = (1 &lt;&lt; 6) - 1
, <a class="el" href="../../d7/d05/dpkg_8c.html#af9bdc3014f3d54c426b6d2df10de4960ab758d0f3ce42cdf9879a5a7bfe84b0b8">OPT_force</a> = (1 &lt;&lt; 6)
, <br />
&#160;&#160;<a class="el" href="../../d7/d05/dpkg_8c.html#af9bdc3014f3d54c426b6d2df10de4960ab511ac1d38770ba01fb170b7c3a1ad45">OPT_force_ignore_depends</a> = (1 &lt;&lt; 7)
, <a class="el" href="../../d7/d05/dpkg_8c.html#af9bdc3014f3d54c426b6d2df10de4960a2e91f410b167f59c3f63e4acec463dcd">OPT_force_confnew</a> = (1 &lt;&lt; 8)
, <a class="el" href="../../d7/d05/dpkg_8c.html#af9bdc3014f3d54c426b6d2df10de4960a430d569961dd1eead60d96beab9c7b23">OPT_force_confold</a> = (1 &lt;&lt; 9)
<br />
 }</td></tr>
<tr class="separator:af9bdc3014f3d54c426b6d2df10de4960"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a1d659e0211ffaae0622586fad7f1e327"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d05/dpkg_8c.html#a1d659e0211ffaae0622586fad7f1e327">make_hash</a> (const char *key, unsigned *<a class="el" href="../../d6/d55/timer__create_8c.html#a862825732eabf145fca1429ba415f69f">start</a>, unsigned *decrement, const int hash_prime)</td></tr>
<tr class="separator:a1d659e0211ffaae0622586fad7f1e327"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf672b0ba190ab9318a1ec77d2411b21"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d05/dpkg_8c.html#aaf672b0ba190ab9318a1ec77d2411b21">search_name_hashtable</a> (const char *key)</td></tr>
<tr class="separator:aaf672b0ba190ab9318a1ec77d2411b21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82afa66172a836357ebd323585c651cd"><td class="memItemLeft" align="right" valign="top">static unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d05/dpkg_8c.html#a82afa66172a836357ebd323585c651cd">search_status_hashtable</a> (const char *key)</td></tr>
<tr class="separator:a82afa66172a836357ebd323585c651cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56a1bacea0595ff04793ed77a6ee00c0"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d05/dpkg_8c.html#a56a1bacea0595ff04793ed77a6ee00c0">order</a> (char <a class="el" href="../../dc/da2/musl_2src_2prng_2random_8c.html#aeb26462df30f47f6fd73ee802457812b">x</a>)</td></tr>
<tr class="separator:a56a1bacea0595ff04793ed77a6ee00c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ee6c1aac918bb8e81e421318c804d6a"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d05/dpkg_8c.html#a6ee6c1aac918bb8e81e421318c804d6a">version_compare_part</a> (const char *<a class="el" href="../../db/dd4/sm__loop_8c.html#acb906433e1289aa1c251dc5057746a88">val</a>, const char *ref)</td></tr>
<tr class="separator:a6ee6c1aac918bb8e81e421318c804d6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5d09a19f1b2b22f41035aae723c9fdb"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d05/dpkg_8c.html#ae5d09a19f1b2b22f41035aae723c9fdb">version_compare</a> (const unsigned ver1, const unsigned ver2)</td></tr>
<tr class="separator:ae5d09a19f1b2b22f41035aae723c9fdb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae99c5f15488d114b34dec0a896ee5e73"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d05/dpkg_8c.html#ae99c5f15488d114b34dec0a896ee5e73">test_version</a> (const unsigned version1, const unsigned <a class="el" href="../../d3/d9a/mkfs__minix_8c.html#a91208fef98a8e6a0f21eddcb9c5a8b78a68e4bc47eecd5b21bf0e31d76c901c95">version2</a>, const unsigned <a class="el" href="../../d6/da3/math_8c.html#a43af69371473032f31babb9b4182d47b">operator</a>)</td></tr>
<tr class="separator:ae99c5f15488d114b34dec0a896ee5e73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32c2bcae0237f8822b6515ea3adc7c00"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d05/dpkg_8c.html#a32c2bcae0237f8822b6515ea3adc7c00">search_package_hashtable</a> (const unsigned name, const unsigned version, const unsigned <a class="el" href="../../d6/da3/math_8c.html#a43af69371473032f31babb9b4182d47b">operator</a>)</td></tr>
<tr class="separator:a32c2bcae0237f8822b6515ea3adc7c00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee73cbf4da2d4f28b92f3b5b7cb40192"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d05/dpkg_8c.html#aee73cbf4da2d4f28b92f3b5b7cb40192">search_for_provides</a> (int needle, int start_at)</td></tr>
<tr class="separator:aee73cbf4da2d4f28b92f3b5b7cb40192"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8740bd71a7e612c34981efa6ebd41acd"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d05/dpkg_8c.html#a8740bd71a7e612c34981efa6ebd41acd">add_edge_to_node</a> (<a class="el" href="../../d7/d05/dpkg_8c.html#a2f5ff7138fd4c1dd7c01570fddcc0ab9">common_node_t</a> *<a class="el" href="../../d3/ddd/tsearch_8h.html#d5/da1/structnode">node</a>, <a class="el" href="../../d7/d05/dpkg_8c.html#aa8c96fa40f9e48c8b7d3fdda15046951">edge_t</a> *edge)</td></tr>
<tr class="separator:a8740bd71a7e612c34981efa6ebd41acd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b921a0952f002da9ddd965af31c1bbe"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d05/dpkg_8c.html#a6b921a0952f002da9ddd965af31c1bbe">add_split_dependencies</a> (<a class="el" href="../../d7/d05/dpkg_8c.html#a2f5ff7138fd4c1dd7c01570fddcc0ab9">common_node_t</a> *parent_node, const char *whole_line, unsigned edge_type)</td></tr>
<tr class="separator:a6b921a0952f002da9ddd965af31c1bbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39a641a45b46c2042e33297fdf86fd42"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d05/dpkg_8c.html#a39a641a45b46c2042e33297fdf86fd42">free_package</a> (<a class="el" href="../../d7/d05/dpkg_8c.html#a2f5ff7138fd4c1dd7c01570fddcc0ab9">common_node_t</a> *<a class="el" href="../../d3/ddd/tsearch_8h.html#d5/da1/structnode">node</a>)</td></tr>
<tr class="separator:a39a641a45b46c2042e33297fdf86fd42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad411349b2c01cc35e5fc7d76e5e0573c"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d05/dpkg_8c.html#ad411349b2c01cc35e5fc7d76e5e0573c">read_package_field</a> (const char *package_buffer, char **field_name, char **field_value)</td></tr>
<tr class="separator:ad411349b2c01cc35e5fc7d76e5e0573c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e47e2f3e91e55bbb66a30c7272f20c7"><td class="memItemLeft" align="right" valign="top">static unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d05/dpkg_8c.html#a4e47e2f3e91e55bbb66a30c7272f20c7">fill_package_struct</a> (char *control_buffer)</td></tr>
<tr class="separator:a4e47e2f3e91e55bbb66a30c7272f20c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7dfbd7f4ae69e4e7c73a932addf7bd6f"><td class="memItemLeft" align="right" valign="top">static unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d05/dpkg_8c.html#a7dfbd7f4ae69e4e7c73a932addf7bd6f">get_status</a> (const unsigned status_node, const int <a class="el" href="../../d7/da1/fma_8c.html#d6/df8/structnum">num</a>)</td></tr>
<tr class="separator:a7dfbd7f4ae69e4e7c73a932addf7bd6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaaa2b787afd11b42a445289c9256208e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d05/dpkg_8c.html#aaaa2b787afd11b42a445289c9256208e">set_status</a> (const unsigned status_node_num, const char *new_value, const int position)</td></tr>
<tr class="separator:aaaa2b787afd11b42a445289c9256208e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5329b8aa20af0675828c95a90b033704"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d05/dpkg_8c.html#a5329b8aa20af0675828c95a90b033704">describe_status</a> (int status_num)</td></tr>
<tr class="separator:a5329b8aa20af0675828c95a90b033704"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fb7c59e83faf18cfbf41a4032008789"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d05/dpkg_8c.html#a0fb7c59e83faf18cfbf41a4032008789">index_status_file</a> (const char *<a class="el" href="../../d0/d43/mconf_8c.html#a1dd0092466ef147d6873cd10f5d5e38b">filename</a>)</td></tr>
<tr class="separator:a0fb7c59e83faf18cfbf41a4032008789"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3370170255afdb1526244ec972519fc6"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d05/dpkg_8c.html#a3370170255afdb1526244ec972519fc6">write_buffer_no_status</a> (<a class="el" href="../../dc/d4d/libc_2include_2stdio_8h.html#a912af5ab9f8a52ddd387b7defc0b49f1">FILE</a> *new_status_file, const char *control_buffer)</td></tr>
<tr class="separator:a3370170255afdb1526244ec972519fc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe757091643ab21eea32dd533da89f7f"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d05/dpkg_8c.html#afe757091643ab21eea32dd533da89f7f">write_status_file</a> (<a class="el" href="../../d7/d05/dpkg_8c.html#a7d9d9782c353a4a270bd29785ca749e1">deb_file_t</a> **deb_file)</td></tr>
<tr class="separator:afe757091643ab21eea32dd533da89f7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac18d5641a1ff4cfc41e95cf3c2528e65"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d05/dpkg_8c.html#ac18d5641a1ff4cfc41e95cf3c2528e65">package_satisfies_dependency</a> (int package, int depend_type)</td></tr>
<tr class="separator:ac18d5641a1ff4cfc41e95cf3c2528e65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab92ad59b3973652ac034175b60d89f7b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d05/dpkg_8c.html#ab92ad59b3973652ac034175b60d89f7b">check_deps</a> (<a class="el" href="../../d7/d05/dpkg_8c.html#a7d9d9782c353a4a270bd29785ca749e1">deb_file_t</a> **deb_file, int deb_start)</td></tr>
<tr class="separator:ab92ad59b3973652ac034175b60d89f7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0febf2008b769ba987e2c500bf982171"><td class="memItemLeft" align="right" valign="top">static char **&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d05/dpkg_8c.html#a0febf2008b769ba987e2c500bf982171">create_list</a> (const char *<a class="el" href="../../d0/d43/mconf_8c.html#a1dd0092466ef147d6873cd10f5d5e38b">filename</a>)</td></tr>
<tr class="separator:a0febf2008b769ba987e2c500bf982171"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ad7dd50933c34eddd93c145f90a3638"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d05/dpkg_8c.html#a2ad7dd50933c34eddd93c145f90a3638">is_builtin_exclude</a> (const char *name)</td></tr>
<tr class="separator:a2ad7dd50933c34eddd93c145f90a3638"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62ac414c976376ffa1133cef96c4c2fc"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d05/dpkg_8c.html#a62ac414c976376ffa1133cef96c4c2fc">remove_file_array</a> (char **remove_names, char **exclude_names)</td></tr>
<tr class="separator:a62ac414c976376ffa1133cef96c4c2fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a3619b4e9563c7afeb0615b2ac76da8"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d05/dpkg_8c.html#a8a3619b4e9563c7afeb0615b2ac76da8">run_package_script_or_die</a> (const char *package_name, const char *script_type)</td></tr>
<tr class="separator:a8a3619b4e9563c7afeb0615b2ac76da8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23bd2b3b34eac44e1e0cb5c5681bf425"><td class="memItemLeft" align="right" valign="top">static char **&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d05/dpkg_8c.html#a23bd2b3b34eac44e1e0cb5c5681bf425">all_control_list</a> (const char *package_name)</td></tr>
<tr class="separator:a23bd2b3b34eac44e1e0cb5c5681bf425"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abca1e5c129c765f55274cc5f8c23ccf0"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d05/dpkg_8c.html#abca1e5c129c765f55274cc5f8c23ccf0">free_array</a> (char **<a class="el" href="../../db/d63/array_8h.html#dc/daf/structarray">array</a>)</td></tr>
<tr class="separator:abca1e5c129c765f55274cc5f8c23ccf0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5114ee06796d1fe1b5fc1f4f08d2f56f"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d05/dpkg_8c.html#a5114ee06796d1fe1b5fc1f4f08d2f56f">list_packages</a> (const char *<a class="el" href="../../db/dd4/sm__loop_8c.html#aeca4af21addf3ecee5f37bd8f75d1950">pattern</a>)</td></tr>
<tr class="separator:a5114ee06796d1fe1b5fc1f4f08d2f56f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a984e18ca7078013aad4b5c3c396093f3"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d05/dpkg_8c.html#a984e18ca7078013aad4b5c3c396093f3">remove_package</a> (const unsigned package_num, int noisy)</td></tr>
<tr class="separator:a984e18ca7078013aad4b5c3c396093f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1670583abdc4238b66159573d989030c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d05/dpkg_8c.html#a1670583abdc4238b66159573d989030c">purge_package</a> (const unsigned package_num)</td></tr>
<tr class="separator:a1670583abdc4238b66159573d989030c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d1519b520ab1d241ba0b5ddb1b8a5f3"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d3/d4c/structarchive__handle__t.html">archive_handle_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d05/dpkg_8c.html#a0d1519b520ab1d241ba0b5ddb1b8a5f3">init_archive_deb_ar</a> (const char *<a class="el" href="../../d0/d43/mconf_8c.html#a1dd0092466ef147d6873cd10f5d5e38b">filename</a>)</td></tr>
<tr class="separator:a0d1519b520ab1d241ba0b5ddb1b8a5f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac805a8585623c4f935c79126f2e9a44c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d05/dpkg_8c.html#ac805a8585623c4f935c79126f2e9a44c">init_archive_deb_control</a> (<a class="el" href="../../d3/d4c/structarchive__handle__t.html">archive_handle_t</a> *ar_handle)</td></tr>
<tr class="separator:ac805a8585623c4f935c79126f2e9a44c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fa625500b8a73565a09361658e9a25e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d05/dpkg_8c.html#a9fa625500b8a73565a09361658e9a25e">init_archive_deb_data</a> (<a class="el" href="../../d3/d4c/structarchive__handle__t.html">archive_handle_t</a> *ar_handle)</td></tr>
<tr class="separator:a9fa625500b8a73565a09361658e9a25e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c37d43af99b6e0797df1d0bd55bf4dd"><td class="memItemLeft" align="right" valign="top">static void <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d05/dpkg_8c.html#a1c37d43af99b6e0797df1d0bd55bf4dd">data_extract_to_buffer</a> (<a class="el" href="../../d3/d4c/structarchive__handle__t.html">archive_handle_t</a> *archive_handle)</td></tr>
<tr class="separator:a1c37d43af99b6e0797df1d0bd55bf4dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6066936b07685a5d470958dca1c3b934"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d05/dpkg_8c.html#a6066936b07685a5d470958dca1c3b934">deb_extract_control_file_to_buffer</a> (<a class="el" href="../../d3/d4c/structarchive__handle__t.html">archive_handle_t</a> *ar_handle, <a class="el" href="../../d7/dd7/libbb_8h.html#da/d28/structllist__t">llist_t</a> *myaccept)</td></tr>
<tr class="separator:a6066936b07685a5d470958dca1c3b934"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace88fe156496dd8047229b08b4a15005"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d05/dpkg_8c.html#ace88fe156496dd8047229b08b4a15005">append_control_file_to_llist</a> (const char *package_name, const char *control_name, <a class="el" href="../../d7/dd7/libbb_8h.html#da/d28/structllist__t">llist_t</a> **ll)</td></tr>
<tr class="separator:ace88fe156496dd8047229b08b4a15005"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae060969079864be07d6793c1f5536df9"><td class="memItemLeft" align="right" valign="top">static char <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d05/dpkg_8c.html#ae060969079864be07d6793c1f5536df9">filter_rename_config</a> (<a class="el" href="../../d3/d4c/structarchive__handle__t.html">archive_handle_t</a> *archive_handle)</td></tr>
<tr class="separator:ae060969079864be07d6793c1f5536df9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a592fa2d97d3c6e6c507d66133a7a4d1c"><td class="memItemLeft" align="right" valign="top">static void <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d05/dpkg_8c.html#a592fa2d97d3c6e6c507d66133a7a4d1c">data_extract_all_prefix</a> (<a class="el" href="../../d3/d4c/structarchive__handle__t.html">archive_handle_t</a> *archive_handle)</td></tr>
<tr class="separator:a592fa2d97d3c6e6c507d66133a7a4d1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5bf09ab1abe8ee6966ef7aee0bf5323"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d05/dpkg_8c.html#ab5bf09ab1abe8ee6966ef7aee0bf5323">unpack_package</a> (<a class="el" href="../../d7/d05/dpkg_8c.html#a7d9d9782c353a4a270bd29785ca749e1">deb_file_t</a> *deb_file)</td></tr>
<tr class="separator:ab5bf09ab1abe8ee6966ef7aee0bf5323"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a551722f8081b2fea692e0e6b2aebcd58"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d05/dpkg_8c.html#a551722f8081b2fea692e0e6b2aebcd58">configure_package</a> (<a class="el" href="../../d7/d05/dpkg_8c.html#a7d9d9782c353a4a270bd29785ca749e1">deb_file_t</a> *deb_file)</td></tr>
<tr class="separator:a551722f8081b2fea692e0e6b2aebcd58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ae0c68f1a2fec735a9e038246a65834"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d05/dpkg_8c.html#a0ae0c68f1a2fec735a9e038246a65834">dpkg_main</a> (int <a class="el" href="../../d9/dd0/bash_2test_8c.html#ad1447518f4372828b8435ae82e48499e">argc</a>, char **<a class="el" href="../../d9/dd0/bash_2test_8c.html#af2efa898e9eed6fe6715279cb1ec35b0">argv</a>) <a class="el" href="../../d7/dd7/libbb_8h.html#a50bff3dbf83ecbd070954b228becba4e">MAIN_EXTERNALLY_VISIBLE</a></td></tr>
<tr class="separator:a0ae0c68f1a2fec735a9e038246a65834"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:aeef023930adfcfff0712892dfd927850"><td class="memItemLeft" align="right" valign="top">static const char *const all_control_files[]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d05/dpkg_8c.html#aeef023930adfcfff0712892dfd927850">ALIGN_PTR</a></td></tr>
<tr class="separator:aeef023930adfcfff0712892dfd927850"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<hr/><h2 class="groupheader">Data Structure Documentation</h2>
<a name="da/d43/structedge__s" id="da/d43/structedge__s"></a>
<h2 class="memtitle"><span class="permalink"><a href="#da/d43/structedge__s">&#9670;&nbsp;</a></span>edge_s</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct edge_s</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00099">99</a> of file <a class="el" href="../../d7/d05/dpkg_8c_source.html">dpkg.c</a>.</p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="a6e59db09e4fd698720659154ccc2bee1"></a>unsigned</td>
<td class="fieldname">
name:16</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="ac36c47c6a928bc7256f6a23209e32a60"></a>unsigned</td>
<td class="fieldname">
operator:4</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="ac4185923e0dca80e58d5a1cd5a122874"></a>unsigned</td>
<td class="fieldname">
type:4</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a3688d262b1f8edc40d706a82804fa2b1"></a>unsigned</td>
<td class="fieldname">
version:16</td>
<td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<a name="d1/d51/structcommon__node__s" id="d1/d51/structcommon__node__s"></a>
<h2 class="memtitle"><span class="permalink"><a href="#d1/d51/structcommon__node__s">&#9670;&nbsp;</a></span>common_node_s</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct common_node_s</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00106">106</a> of file <a class="el" href="../../d7/d05/dpkg_8c_source.html">dpkg.c</a>.</p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="aef1ca484df7de07bcc5f16f620b85c54"></a><a class="el" href="../../d7/d05/dpkg_8c.html#aa8c96fa40f9e48c8b7d3fdda15046951">edge_t</a> **</td>
<td class="fieldname">
edge</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a46ad76672bc37194703cb0e7cee3dde1"></a>unsigned</td>
<td class="fieldname">
name:16</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a487d8a160096b47e49e01eee3c57baec"></a>unsigned</td>
<td class="fieldname">
num_of_edges:16</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="ac98761b8f4639ad3974df232cb3be190"></a>unsigned</td>
<td class="fieldname">
version:16</td>
<td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<a name="df/dfb/structstatus__node__s" id="df/dfb/structstatus__node__s"></a>
<h2 class="memtitle"><span class="permalink"><a href="#df/dfb/structstatus__node__s">&#9670;&nbsp;</a></span>status_node_s</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct status_node_s</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00117">117</a> of file <a class="el" href="../../d7/d05/dpkg_8c_source.html">dpkg.c</a>.</p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="ab2079977df3552c10bfec65a723218f5"></a>unsigned</td>
<td class="fieldname">
package:16</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a9fe4fcae3d0f56d30a35a008dee139cb"></a>unsigned</td>
<td class="fieldname">
status:16</td>
<td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<a name="d7/db0/structdeb__file__s" id="d7/db0/structdeb__file__s"></a>
<h2 class="memtitle"><span class="permalink"><a href="#d7/db0/structdeb__file__s">&#9670;&nbsp;</a></span>deb_file_s</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct deb_file_s</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00162">162</a> of file <a class="el" href="../../d7/d05/dpkg_8c_source.html">dpkg.c</a>.</p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="a450aec906625483d7a6890b58ebdbd47"></a>char *</td>
<td class="fieldname">
control_file</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="ae1175c713c9cc5ecaab5ecb0fc43d3ee"></a>char *</td>
<td class="fieldname">
filename</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a369614c3e79fae15cf9ccd0c7b593048"></a>unsigned</td>
<td class="fieldname">
package:16</td>
<td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="aed9ea78689ecce0b7264c02c7f8a9a54"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed9ea78689ecce0b7264c02c7f8a9a54">&#9670;&nbsp;</a></span>G</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define G&#160;&#160;&#160;(*<a class="el" href="../../d5/ded/ptr__to__globals_8c.html#aff79e45ec02a9716e59b3aca1c9b6808">ptr_to_globals</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00129">129</a> of file <a class="el" href="../../d7/d05/dpkg_8c_source.html">dpkg.c</a>.</p>

</div>
</div>
<a id="a39d017e5ed76fae1ae7cec57e0d600c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39d017e5ed76fae1ae7cec57e0d600c4">&#9670;&nbsp;</a></span>INIT_G</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INIT_G</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">    <span class="keywordflow">do</span> { \</div>
<div class="line">    SET_PTR_TO_GLOBALS(<a class="code" href="../../d7/dd7/libbb_8h.html#a6b9d12af476b8fa4b9de87028b0ac27c">xzalloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../d7/d05/dpkg_8c.html#aed9ea78689ecce0b7264c02c7f8a9a54">G</a>))); \</div>
<div class="line">} <span class="keywordflow">while</span> (0)</div>
<div class="ttc" id="adpkg_8c_html_aed9ea78689ecce0b7264c02c7f8a9a54"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#aed9ea78689ecce0b7264c02c7f8a9a54">G</a></div><div class="ttdeci">#define G</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00129">dpkg.c:129</a></div></div>
<div class="ttc" id="alibbb_8h_html_a6b9d12af476b8fa4b9de87028b0ac27c"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#a6b9d12af476b8fa4b9de87028b0ac27c">xzalloc</a></div><div class="ttdeci">void * xzalloc(size_t size) FAST_FUNC RETURNS_MALLOC</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd6/xfuncs__printf_8c_source.html#l00069">xfuncs_printf.c:69</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00133">133</a> of file <a class="el" href="../../d7/d05/dpkg_8c_source.html">dpkg.c</a>.</p>

</div>
</div>
<a id="a34b2c25dfc0d68980864991d97671bbc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34b2c25dfc0d68980864991d97671bbc">&#9670;&nbsp;</a></span>NAME_HASH_PRIME</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NAME_HASH_PRIME&#160;&#160;&#160;16381</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00088">88</a> of file <a class="el" href="../../d7/d05/dpkg_8c_source.html">dpkg.c</a>.</p>

</div>
</div>
<a id="aa77ba14cd48e018786c6b752ed1d11b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa77ba14cd48e018786c6b752ed1d11b0">&#9670;&nbsp;</a></span>name_hashtable</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define name_hashtable&#160;&#160;&#160;(G.name_hashtable   )</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00130">130</a> of file <a class="el" href="../../d7/d05/dpkg_8c_source.html">dpkg.c</a>.</p>

</div>
</div>
<a id="a69b135c7de1bd4344e12676bb1946fa1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a69b135c7de1bd4344e12676bb1946fa1">&#9670;&nbsp;</a></span>PACKAGE_HASH_PRIME</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PACKAGE_HASH_PRIME&#160;&#160;&#160;10007</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00098">98</a> of file <a class="el" href="../../d7/d05/dpkg_8c_source.html">dpkg.c</a>.</p>

</div>
</div>
<a id="a3d27c89e1462f204c221e2cf5c9233d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d27c89e1462f204c221e2cf5c9233d6">&#9670;&nbsp;</a></span>package_hashtable</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define package_hashtable&#160;&#160;&#160;(G.package_hashtable)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00131">131</a> of file <a class="el" href="../../d7/d05/dpkg_8c_source.html">dpkg.c</a>.</p>

</div>
</div>
<a id="adb240e823a9482d83cd02f3340976265"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb240e823a9482d83cd02f3340976265">&#9670;&nbsp;</a></span>STATUS_HASH_PRIME</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define STATUS_HASH_PRIME&#160;&#160;&#160;8191</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00116">116</a> of file <a class="el" href="../../d7/d05/dpkg_8c_source.html">dpkg.c</a>.</p>

</div>
</div>
<a id="afedd0a411aaf4f39ccf5908554c7699b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afedd0a411aaf4f39ccf5908554c7699b">&#9670;&nbsp;</a></span>status_hashtable</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define status_hashtable&#160;&#160;&#160;(G.status_hashtable )</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00132">132</a> of file <a class="el" href="../../d7/d05/dpkg_8c_source.html">dpkg.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a2f5ff7138fd4c1dd7c01570fddcc0ab9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f5ff7138fd4c1dd7c01570fddcc0ab9">&#9670;&nbsp;</a></span>common_node_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="../../d7/d05/dpkg_8c.html#d1/d51/structcommon__node__s">common_node_s</a> <a class="el" href="../../d7/d05/dpkg_8c.html#a2f5ff7138fd4c1dd7c01570fddcc0ab9">common_node_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a7d9d9782c353a4a270bd29785ca749e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d9d9782c353a4a270bd29785ca749e1">&#9670;&nbsp;</a></span>deb_file_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="../../d7/d05/dpkg_8c.html#d7/db0/structdeb__file__s">deb_file_s</a> <a class="el" href="../../d7/d05/dpkg_8c.html#a7d9d9782c353a4a270bd29785ca749e1">deb_file_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aa8c96fa40f9e48c8b7d3fdda15046951"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8c96fa40f9e48c8b7d3fdda15046951">&#9670;&nbsp;</a></span>edge_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="../../d7/d05/dpkg_8c.html#da/d43/structedge__s">edge_s</a> <a class="el" href="../../d7/d05/dpkg_8c.html#aa8c96fa40f9e48c8b7d3fdda15046951">edge_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a35e49f6724ab51d9636a662293aca776"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35e49f6724ab51d9636a662293aca776">&#9670;&nbsp;</a></span>status_node_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="../../d7/d05/dpkg_8c.html#df/dfb/structstatus__node__s">status_node_s</a> <a class="el" href="../../d7/d05/dpkg_8c.html#a35e49f6724ab51d9636a662293aca776">status_node_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="af9bdc3014f3d54c426b6d2df10de4960"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9bdc3014f3d54c426b6d2df10de4960">&#9670;&nbsp;</a></span>anonymous enum</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="af9bdc3014f3d54c426b6d2df10de4960af5b4d9abde1d741a8289b96a9497ebd2"></a>OPT_configure&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="af9bdc3014f3d54c426b6d2df10de4960aa37cdd87ad309d1aa848162c27dd4929"></a>OPT_install&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="af9bdc3014f3d54c426b6d2df10de4960abb873e9c6b5aff2e9d50688daa7deb8e"></a>OPT_list_installed&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="af9bdc3014f3d54c426b6d2df10de4960a20aa3982bcd38e4c081658cc7c5d500b"></a>OPT_purge&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="af9bdc3014f3d54c426b6d2df10de4960ab839eada36a860bf30a4670d7313c7df"></a>OPT_remove&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="af9bdc3014f3d54c426b6d2df10de4960abdd0e0540791ff9a47681129c2c7bb0d"></a>OPT_unpack&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="af9bdc3014f3d54c426b6d2df10de4960a3ec19c18509a939ddaddcc9e1e9bf12d"></a>OPTMASK_cmd&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="af9bdc3014f3d54c426b6d2df10de4960ab758d0f3ce42cdf9879a5a7bfe84b0b8"></a>OPT_force&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="af9bdc3014f3d54c426b6d2df10de4960ab511ac1d38770ba01fb170b7c3a1ad45"></a>OPT_force_ignore_depends&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="af9bdc3014f3d54c426b6d2df10de4960a2e91f410b167f59c3f63e4acec463dcd"></a>OPT_force_confnew&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="af9bdc3014f3d54c426b6d2df10de4960a430d569961dd1eead60d96beab9c7b23"></a>OPT_force_confold&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01638">1638</a> of file <a class="el" href="../../d7/d05/dpkg_8c_source.html">dpkg.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;     {</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;    <span class="comment">/* Commands */</span></div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#af9bdc3014f3d54c426b6d2df10de4960af5b4d9abde1d741a8289b96a9497ebd2">OPT_configure</a>            = (1 &lt;&lt; 0),</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#af9bdc3014f3d54c426b6d2df10de4960aa37cdd87ad309d1aa848162c27dd4929">OPT_install</a>              = (1 &lt;&lt; 1),</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#af9bdc3014f3d54c426b6d2df10de4960abb873e9c6b5aff2e9d50688daa7deb8e">OPT_list_installed</a>       = (1 &lt;&lt; 2),</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#af9bdc3014f3d54c426b6d2df10de4960a20aa3982bcd38e4c081658cc7c5d500b">OPT_purge</a>                = (1 &lt;&lt; 3),</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#af9bdc3014f3d54c426b6d2df10de4960ab839eada36a860bf30a4670d7313c7df">OPT_remove</a>               = (1 &lt;&lt; 4),</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#af9bdc3014f3d54c426b6d2df10de4960abdd0e0540791ff9a47681129c2c7bb0d">OPT_unpack</a>               = (1 &lt;&lt; 5),</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#af9bdc3014f3d54c426b6d2df10de4960a3ec19c18509a939ddaddcc9e1e9bf12d">OPTMASK_cmd</a>              = (1 &lt;&lt; 6) - 1,</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;    <span class="comment">/* Options */</span></div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#af9bdc3014f3d54c426b6d2df10de4960ab758d0f3ce42cdf9879a5a7bfe84b0b8">OPT_force</a>                = (1 &lt;&lt; 6),</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#af9bdc3014f3d54c426b6d2df10de4960ab511ac1d38770ba01fb170b7c3a1ad45">OPT_force_ignore_depends</a> = (1 &lt;&lt; 7),</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#af9bdc3014f3d54c426b6d2df10de4960a2e91f410b167f59c3f63e4acec463dcd">OPT_force_confnew</a>        = (1 &lt;&lt; 8),</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#af9bdc3014f3d54c426b6d2df10de4960a430d569961dd1eead60d96beab9c7b23">OPT_force_confold</a>        = (1 &lt;&lt; 9),</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;};</div>
<div class="ttc" id="adpkg_8c_html_af9bdc3014f3d54c426b6d2df10de4960a20aa3982bcd38e4c081658cc7c5d500b"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#af9bdc3014f3d54c426b6d2df10de4960a20aa3982bcd38e4c081658cc7c5d500b">OPT_purge</a></div><div class="ttdeci">@ OPT_purge</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l01643">dpkg.c:1643</a></div></div>
<div class="ttc" id="adpkg_8c_html_af9bdc3014f3d54c426b6d2df10de4960a2e91f410b167f59c3f63e4acec463dcd"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#af9bdc3014f3d54c426b6d2df10de4960a2e91f410b167f59c3f63e4acec463dcd">OPT_force_confnew</a></div><div class="ttdeci">@ OPT_force_confnew</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l01650">dpkg.c:1650</a></div></div>
<div class="ttc" id="adpkg_8c_html_af9bdc3014f3d54c426b6d2df10de4960a3ec19c18509a939ddaddcc9e1e9bf12d"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#af9bdc3014f3d54c426b6d2df10de4960a3ec19c18509a939ddaddcc9e1e9bf12d">OPTMASK_cmd</a></div><div class="ttdeci">@ OPTMASK_cmd</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l01646">dpkg.c:1646</a></div></div>
<div class="ttc" id="adpkg_8c_html_af9bdc3014f3d54c426b6d2df10de4960a430d569961dd1eead60d96beab9c7b23"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#af9bdc3014f3d54c426b6d2df10de4960a430d569961dd1eead60d96beab9c7b23">OPT_force_confold</a></div><div class="ttdeci">@ OPT_force_confold</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l01651">dpkg.c:1651</a></div></div>
<div class="ttc" id="adpkg_8c_html_af9bdc3014f3d54c426b6d2df10de4960aa37cdd87ad309d1aa848162c27dd4929"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#af9bdc3014f3d54c426b6d2df10de4960aa37cdd87ad309d1aa848162c27dd4929">OPT_install</a></div><div class="ttdeci">@ OPT_install</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l01641">dpkg.c:1641</a></div></div>
<div class="ttc" id="adpkg_8c_html_af9bdc3014f3d54c426b6d2df10de4960ab511ac1d38770ba01fb170b7c3a1ad45"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#af9bdc3014f3d54c426b6d2df10de4960ab511ac1d38770ba01fb170b7c3a1ad45">OPT_force_ignore_depends</a></div><div class="ttdeci">@ OPT_force_ignore_depends</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l01649">dpkg.c:1649</a></div></div>
<div class="ttc" id="adpkg_8c_html_af9bdc3014f3d54c426b6d2df10de4960ab758d0f3ce42cdf9879a5a7bfe84b0b8"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#af9bdc3014f3d54c426b6d2df10de4960ab758d0f3ce42cdf9879a5a7bfe84b0b8">OPT_force</a></div><div class="ttdeci">@ OPT_force</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l01648">dpkg.c:1648</a></div></div>
<div class="ttc" id="adpkg_8c_html_af9bdc3014f3d54c426b6d2df10de4960ab839eada36a860bf30a4670d7313c7df"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#af9bdc3014f3d54c426b6d2df10de4960ab839eada36a860bf30a4670d7313c7df">OPT_remove</a></div><div class="ttdeci">@ OPT_remove</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l01644">dpkg.c:1644</a></div></div>
<div class="ttc" id="adpkg_8c_html_af9bdc3014f3d54c426b6d2df10de4960abb873e9c6b5aff2e9d50688daa7deb8e"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#af9bdc3014f3d54c426b6d2df10de4960abb873e9c6b5aff2e9d50688daa7deb8e">OPT_list_installed</a></div><div class="ttdeci">@ OPT_list_installed</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l01642">dpkg.c:1642</a></div></div>
<div class="ttc" id="adpkg_8c_html_af9bdc3014f3d54c426b6d2df10de4960abdd0e0540791ff9a47681129c2c7bb0d"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#af9bdc3014f3d54c426b6d2df10de4960abdd0e0540791ff9a47681129c2c7bb0d">OPT_unpack</a></div><div class="ttdeci">@ OPT_unpack</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l01645">dpkg.c:1645</a></div></div>
<div class="ttc" id="adpkg_8c_html_af9bdc3014f3d54c426b6d2df10de4960af5b4d9abde1d741a8289b96a9497ebd2"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#af9bdc3014f3d54c426b6d2df10de4960af5b4d9abde1d741a8289b96a9497ebd2">OPT_configure</a></div><div class="ttdeci">@ OPT_configure</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l01640">dpkg.c:1640</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a73b480dcdb4db9e6c91e846cf84a304e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73b480dcdb4db9e6c91e846cf84a304e">&#9670;&nbsp;</a></span>edge_type_e</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../d7/d05/dpkg_8c.html#a73b480dcdb4db9e6c91e846cf84a304e">edge_type_e</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a73b480dcdb4db9e6c91e846cf84a304ea2b0b250a9a7b56f5e189c072584919c1"></a>EDGE_NULL&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a73b480dcdb4db9e6c91e846cf84a304eac9dfc4afeb58573a67d3ed2b91f460ca"></a>EDGE_PRE_DEPENDS&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a73b480dcdb4db9e6c91e846cf84a304eacf11931ac8911cdd0aaf374ead49094f"></a>EDGE_OR_PRE_DEPENDS&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a73b480dcdb4db9e6c91e846cf84a304ea90d2c9cde2903fb606ea74a193afad99"></a>EDGE_DEPENDS&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a73b480dcdb4db9e6c91e846cf84a304ea4635745ed7c1363cdf11a76c4b9af8d4"></a>EDGE_OR_DEPENDS&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a73b480dcdb4db9e6c91e846cf84a304eab2c0e7b78b57e3760accc45cc08434be"></a>EDGE_REPLACES&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a73b480dcdb4db9e6c91e846cf84a304ea64e38f4113bce59cb73cefbc1646eb3e"></a>EDGE_PROVIDES&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a73b480dcdb4db9e6c91e846cf84a304ea40c79a458b5d88f76922a72e0dd2af36"></a>EDGE_CONFLICTS&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a73b480dcdb4db9e6c91e846cf84a304ea399bb8962d1158b8359f75a479c57d4c"></a>EDGE_SUGGESTS&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a73b480dcdb4db9e6c91e846cf84a304ea2c82bc07a49b341a679a08551af78425"></a>EDGE_RECOMMENDS&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a73b480dcdb4db9e6c91e846cf84a304ea64e6dc4eeb29ac382b80b72a42009792"></a>EDGE_ENHANCES&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00139">139</a> of file <a class="el" href="../../d7/d05/dpkg_8c_source.html">dpkg.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                 {</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#a73b480dcdb4db9e6c91e846cf84a304ea2b0b250a9a7b56f5e189c072584919c1">EDGE_NULL</a> = 0,</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#a73b480dcdb4db9e6c91e846cf84a304eac9dfc4afeb58573a67d3ed2b91f460ca">EDGE_PRE_DEPENDS</a> = 1,</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#a73b480dcdb4db9e6c91e846cf84a304eacf11931ac8911cdd0aaf374ead49094f">EDGE_OR_PRE_DEPENDS</a> = 2,</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#a73b480dcdb4db9e6c91e846cf84a304ea90d2c9cde2903fb606ea74a193afad99">EDGE_DEPENDS</a> = 3,</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#a73b480dcdb4db9e6c91e846cf84a304ea4635745ed7c1363cdf11a76c4b9af8d4">EDGE_OR_DEPENDS</a> = 4,</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#a73b480dcdb4db9e6c91e846cf84a304eab2c0e7b78b57e3760accc45cc08434be">EDGE_REPLACES</a> = 5,</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#a73b480dcdb4db9e6c91e846cf84a304ea64e38f4113bce59cb73cefbc1646eb3e">EDGE_PROVIDES</a> = 7,</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#a73b480dcdb4db9e6c91e846cf84a304ea40c79a458b5d88f76922a72e0dd2af36">EDGE_CONFLICTS</a> = 9,</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#a73b480dcdb4db9e6c91e846cf84a304ea399bb8962d1158b8359f75a479c57d4c">EDGE_SUGGESTS</a> = 11,</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#a73b480dcdb4db9e6c91e846cf84a304ea2c82bc07a49b341a679a08551af78425">EDGE_RECOMMENDS</a> = 13,</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#a73b480dcdb4db9e6c91e846cf84a304ea64e6dc4eeb29ac382b80b72a42009792">EDGE_ENHANCES</a> = 15</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;};</div>
<div class="ttc" id="adpkg_8c_html_a73b480dcdb4db9e6c91e846cf84a304ea2b0b250a9a7b56f5e189c072584919c1"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#a73b480dcdb4db9e6c91e846cf84a304ea2b0b250a9a7b56f5e189c072584919c1">EDGE_NULL</a></div><div class="ttdeci">@ EDGE_NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00140">dpkg.c:140</a></div></div>
<div class="ttc" id="adpkg_8c_html_a73b480dcdb4db9e6c91e846cf84a304ea2c82bc07a49b341a679a08551af78425"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#a73b480dcdb4db9e6c91e846cf84a304ea2c82bc07a49b341a679a08551af78425">EDGE_RECOMMENDS</a></div><div class="ttdeci">@ EDGE_RECOMMENDS</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00149">dpkg.c:149</a></div></div>
<div class="ttc" id="adpkg_8c_html_a73b480dcdb4db9e6c91e846cf84a304ea399bb8962d1158b8359f75a479c57d4c"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#a73b480dcdb4db9e6c91e846cf84a304ea399bb8962d1158b8359f75a479c57d4c">EDGE_SUGGESTS</a></div><div class="ttdeci">@ EDGE_SUGGESTS</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00148">dpkg.c:148</a></div></div>
<div class="ttc" id="adpkg_8c_html_a73b480dcdb4db9e6c91e846cf84a304ea40c79a458b5d88f76922a72e0dd2af36"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#a73b480dcdb4db9e6c91e846cf84a304ea40c79a458b5d88f76922a72e0dd2af36">EDGE_CONFLICTS</a></div><div class="ttdeci">@ EDGE_CONFLICTS</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00147">dpkg.c:147</a></div></div>
<div class="ttc" id="adpkg_8c_html_a73b480dcdb4db9e6c91e846cf84a304ea4635745ed7c1363cdf11a76c4b9af8d4"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#a73b480dcdb4db9e6c91e846cf84a304ea4635745ed7c1363cdf11a76c4b9af8d4">EDGE_OR_DEPENDS</a></div><div class="ttdeci">@ EDGE_OR_DEPENDS</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00144">dpkg.c:144</a></div></div>
<div class="ttc" id="adpkg_8c_html_a73b480dcdb4db9e6c91e846cf84a304ea64e38f4113bce59cb73cefbc1646eb3e"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#a73b480dcdb4db9e6c91e846cf84a304ea64e38f4113bce59cb73cefbc1646eb3e">EDGE_PROVIDES</a></div><div class="ttdeci">@ EDGE_PROVIDES</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00146">dpkg.c:146</a></div></div>
<div class="ttc" id="adpkg_8c_html_a73b480dcdb4db9e6c91e846cf84a304ea64e6dc4eeb29ac382b80b72a42009792"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#a73b480dcdb4db9e6c91e846cf84a304ea64e6dc4eeb29ac382b80b72a42009792">EDGE_ENHANCES</a></div><div class="ttdeci">@ EDGE_ENHANCES</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00151">dpkg.c:150</a></div></div>
<div class="ttc" id="adpkg_8c_html_a73b480dcdb4db9e6c91e846cf84a304ea90d2c9cde2903fb606ea74a193afad99"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#a73b480dcdb4db9e6c91e846cf84a304ea90d2c9cde2903fb606ea74a193afad99">EDGE_DEPENDS</a></div><div class="ttdeci">@ EDGE_DEPENDS</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00143">dpkg.c:143</a></div></div>
<div class="ttc" id="adpkg_8c_html_a73b480dcdb4db9e6c91e846cf84a304eab2c0e7b78b57e3760accc45cc08434be"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#a73b480dcdb4db9e6c91e846cf84a304eab2c0e7b78b57e3760accc45cc08434be">EDGE_REPLACES</a></div><div class="ttdeci">@ EDGE_REPLACES</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00145">dpkg.c:145</a></div></div>
<div class="ttc" id="adpkg_8c_html_a73b480dcdb4db9e6c91e846cf84a304eac9dfc4afeb58573a67d3ed2b91f460ca"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#a73b480dcdb4db9e6c91e846cf84a304eac9dfc4afeb58573a67d3ed2b91f460ca">EDGE_PRE_DEPENDS</a></div><div class="ttdeci">@ EDGE_PRE_DEPENDS</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00141">dpkg.c:141</a></div></div>
<div class="ttc" id="adpkg_8c_html_a73b480dcdb4db9e6c91e846cf84a304eacf11931ac8911cdd0aaf374ead49094f"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#a73b480dcdb4db9e6c91e846cf84a304eacf11931ac8911cdd0aaf374ead49094f">EDGE_OR_PRE_DEPENDS</a></div><div class="ttdeci">@ EDGE_OR_PRE_DEPENDS</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00142">dpkg.c:142</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac654d21de7f6a409f1c1fdec91f95112"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac654d21de7f6a409f1c1fdec91f95112">&#9670;&nbsp;</a></span>operator_e</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../d7/d05/dpkg_8c.html#ac654d21de7f6a409f1c1fdec91f95112">operator_e</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ac654d21de7f6a409f1c1fdec91f95112a05025cba225f734911d8c854764ce156"></a>VER_NULL&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ac654d21de7f6a409f1c1fdec91f95112ad7ea8faad6a84004e9a5fb0789c28552"></a>VER_EQUAL&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ac654d21de7f6a409f1c1fdec91f95112aaf67750ced47fb05cb2b8eba9760e0be"></a>VER_LESS&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ac654d21de7f6a409f1c1fdec91f95112ad0ac6e4d389629a4ecb76d91e441c884"></a>VER_LESS_EQUAL&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ac654d21de7f6a409f1c1fdec91f95112afa8f9f4d4d75991761a32cdb1f892f98"></a>VER_MORE&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ac654d21de7f6a409f1c1fdec91f95112a6f90bd977650b2780f23f0c483e4884e"></a>VER_MORE_EQUAL&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ac654d21de7f6a409f1c1fdec91f95112adae6d6279d74c603c708541aec479b1d"></a>VER_ANY&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00152">152</a> of file <a class="el" href="../../d7/d05/dpkg_8c_source.html">dpkg.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                {</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#ac654d21de7f6a409f1c1fdec91f95112a05025cba225f734911d8c854764ce156">VER_NULL</a> = 0,</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#ac654d21de7f6a409f1c1fdec91f95112ad7ea8faad6a84004e9a5fb0789c28552">VER_EQUAL</a> = 1,</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#ac654d21de7f6a409f1c1fdec91f95112aaf67750ced47fb05cb2b8eba9760e0be">VER_LESS</a> = 2,</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#ac654d21de7f6a409f1c1fdec91f95112ad0ac6e4d389629a4ecb76d91e441c884">VER_LESS_EQUAL</a> = 3,</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#ac654d21de7f6a409f1c1fdec91f95112afa8f9f4d4d75991761a32cdb1f892f98">VER_MORE</a> = 4,</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#ac654d21de7f6a409f1c1fdec91f95112a6f90bd977650b2780f23f0c483e4884e">VER_MORE_EQUAL</a> = 5,</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#ac654d21de7f6a409f1c1fdec91f95112adae6d6279d74c603c708541aec479b1d">VER_ANY</a> = 6</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;};</div>
<div class="ttc" id="adpkg_8c_html_ac654d21de7f6a409f1c1fdec91f95112a05025cba225f734911d8c854764ce156"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#ac654d21de7f6a409f1c1fdec91f95112a05025cba225f734911d8c854764ce156">VER_NULL</a></div><div class="ttdeci">@ VER_NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00153">dpkg.c:153</a></div></div>
<div class="ttc" id="adpkg_8c_html_ac654d21de7f6a409f1c1fdec91f95112a6f90bd977650b2780f23f0c483e4884e"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#ac654d21de7f6a409f1c1fdec91f95112a6f90bd977650b2780f23f0c483e4884e">VER_MORE_EQUAL</a></div><div class="ttdeci">@ VER_MORE_EQUAL</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00158">dpkg.c:158</a></div></div>
<div class="ttc" id="adpkg_8c_html_ac654d21de7f6a409f1c1fdec91f95112aaf67750ced47fb05cb2b8eba9760e0be"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#ac654d21de7f6a409f1c1fdec91f95112aaf67750ced47fb05cb2b8eba9760e0be">VER_LESS</a></div><div class="ttdeci">@ VER_LESS</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00155">dpkg.c:155</a></div></div>
<div class="ttc" id="adpkg_8c_html_ac654d21de7f6a409f1c1fdec91f95112ad0ac6e4d389629a4ecb76d91e441c884"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#ac654d21de7f6a409f1c1fdec91f95112ad0ac6e4d389629a4ecb76d91e441c884">VER_LESS_EQUAL</a></div><div class="ttdeci">@ VER_LESS_EQUAL</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00156">dpkg.c:156</a></div></div>
<div class="ttc" id="adpkg_8c_html_ac654d21de7f6a409f1c1fdec91f95112ad7ea8faad6a84004e9a5fb0789c28552"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#ac654d21de7f6a409f1c1fdec91f95112ad7ea8faad6a84004e9a5fb0789c28552">VER_EQUAL</a></div><div class="ttdeci">@ VER_EQUAL</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00154">dpkg.c:154</a></div></div>
<div class="ttc" id="adpkg_8c_html_ac654d21de7f6a409f1c1fdec91f95112adae6d6279d74c603c708541aec479b1d"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#ac654d21de7f6a409f1c1fdec91f95112adae6d6279d74c603c708541aec479b1d">VER_ANY</a></div><div class="ttdeci">@ VER_ANY</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00160">dpkg.c:159</a></div></div>
<div class="ttc" id="adpkg_8c_html_ac654d21de7f6a409f1c1fdec91f95112afa8f9f4d4d75991761a32cdb1f892f98"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#ac654d21de7f6a409f1c1fdec91f95112afa8f9f4d4d75991761a32cdb1f892f98">VER_MORE</a></div><div class="ttdeci">@ VER_MORE</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00157">dpkg.c:157</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a8740bd71a7e612c34981efa6ebd41acd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8740bd71a7e612c34981efa6ebd41acd">&#9670;&nbsp;</a></span>add_edge_to_node()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void add_edge_to_node </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d7/d05/dpkg_8c.html#a2f5ff7138fd4c1dd7c01570fddcc0ab9">common_node_t</a> *&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d7/d05/dpkg_8c.html#aa8c96fa40f9e48c8b7d3fdda15046951">edge_t</a> *&#160;</td>
          <td class="paramname"><em>edge</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00413">413</a> of file <a class="el" href="../../d7/d05/dpkg_8c_source.html">dpkg.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;{</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <a class="code" href="../../d3/ddd/tsearch_8h.html#d5/da1/structnode">node</a>-&gt;edge = <a class="code" href="../../d7/dd7/libbb_8h.html#a098c321a7116d4a59f70859848fae417">xrealloc_vector</a>(<a class="code" href="../../d3/ddd/tsearch_8h.html#d5/da1/structnode">node</a>-&gt;edge, 2, <a class="code" href="../../d3/ddd/tsearch_8h.html#d5/da1/structnode">node</a>-&gt;num_of_edges);</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <a class="code" href="../../d3/ddd/tsearch_8h.html#d5/da1/structnode">node</a>-&gt;edge[<a class="code" href="../../d3/ddd/tsearch_8h.html#d5/da1/structnode">node</a>-&gt;num_of_edges++] = edge;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;}</div>
<div class="ttc" id="alibbb_8h_html_a098c321a7116d4a59f70859848fae417"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#a098c321a7116d4a59f70859848fae417">xrealloc_vector</a></div><div class="ttdeci">#define xrealloc_vector(vector, shift, idx)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dd7/libbb_8h_source.html#l00428">libbb.h:428</a></div></div>
<div class="ttc" id="atsearch_8h_html_d5/da1/structnode"><div class="ttname"><a href="../../d3/ddd/tsearch_8h.html#d5/da1/structnode">node</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d24/tsort_8c_source.html#l00033">tsort.c:33</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/dd7/libbb_8h_source.html#l00428">xrealloc_vector</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00429">add_split_dependencies()</a>.</p>

</div>
</div>
<a id="a6b921a0952f002da9ddd965af31c1bbe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b921a0952f002da9ddd965af31c1bbe">&#9670;&nbsp;</a></span>add_split_dependencies()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void add_split_dependencies </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d7/d05/dpkg_8c.html#a2f5ff7138fd4c1dd7c01570fddcc0ab9">common_node_t</a> *&#160;</td>
          <td class="paramname"><em>parent_node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>whole_line</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>edge_type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00429">429</a> of file <a class="el" href="../../d7/d05/dpkg_8c_source.html">dpkg.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;{</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="keywordtype">char</span> *<a class="code" href="../../dd/d7b/powertop_8c.html#d4/d85/structline">line</a> = <a class="code" href="../../dc/dd1/pathchk_8c.html#ac7a701bce03d77bad6b57003d0fe73df">xstrdup</a>(whole_line);</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="keywordtype">char</span> *line2;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="keywordtype">char</span> *line_ptr1 = <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="keywordtype">char</span> *line_ptr2 = <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <span class="keywordtype">char</span> *field;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <span class="keywordtype">char</span> *field2;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <span class="keywordtype">char</span> *version;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#da/d43/structedge__s">edge_t</a> *edge;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#da/d43/structedge__s">edge_t</a> *or_edge;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <span class="keywordtype">int</span> offset_ch;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160; </div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    field = <a class="code" href="../../d5/db2/strtok__r_8c.html#abf7949e9b8a6fe0db9f4422eb256104e">strtok_r</a>(<a class="code" href="../../dd/d7b/powertop_8c.html#d4/d85/structline">line</a>, <span class="stringliteral">&quot;,&quot;</span>, &amp;line_ptr1);</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        <span class="comment">/* skip leading spaces */</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        field += <a class="code" href="../../d6/d32/musl_2include_2string_8h.html#a417885431ec6bd9c35f34ca1d10ca48b">strspn</a>(field, <span class="stringliteral">&quot; &quot;</span>);</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        line2 = <a class="code" href="../../dc/dd1/pathchk_8c.html#ac7a701bce03d77bad6b57003d0fe73df">xstrdup</a>(field);</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;        field2 = <a class="code" href="../../d5/db2/strtok__r_8c.html#abf7949e9b8a6fe0db9f4422eb256104e">strtok_r</a>(line2, <span class="stringliteral">&quot;|&quot;</span>, &amp;line_ptr2);</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        or_edge = <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        <span class="keywordflow">if</span> ((edge_type == <a class="code" href="../../d7/d05/dpkg_8c.html#a73b480dcdb4db9e6c91e846cf84a304ea90d2c9cde2903fb606ea74a193afad99">EDGE_DEPENDS</a> || edge_type == <a class="code" href="../../d7/d05/dpkg_8c.html#a73b480dcdb4db9e6c91e846cf84a304eac9dfc4afeb58573a67d3ed2b91f460ca">EDGE_PRE_DEPENDS</a>)</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;         &amp;&amp; (<a class="code" href="../../d5/db0/dynlink_8c.html#af3054366f27929432795c5ae420a5294">strcmp</a>(field, field2) != 0)</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        ) {</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;            or_edge = <a class="code" href="../../d7/dd7/libbb_8h.html#a6b9d12af476b8fa4b9de87028b0ac27c">xzalloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../d7/d05/dpkg_8c.html#da/d43/structedge__s">edge_t</a>));</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;            or_edge-&gt;<a class="code" href="../../d7/d05/dpkg_8c.html#ac4185923e0dca80e58d5a1cd5a122874">type</a> = edge_type + 1;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;            or_edge-&gt;<a class="code" href="../../d7/d05/dpkg_8c.html#a6e59db09e4fd698720659154ccc2bee1">name</a> = <a class="code" href="../../d7/d05/dpkg_8c.html#aaf672b0ba190ab9318a1ec77d2411b21">search_name_hashtable</a>(field);</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;            <span class="comment">//or_edge-&gt;version = 0; // tracks the number of alternatives</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;            <a class="code" href="../../d7/d05/dpkg_8c.html#a8740bd71a7e612c34981efa6ebd41acd">add_edge_to_node</a>(parent_node, or_edge);</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        }</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160; </div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;            edge = <a class="code" href="../../db/d0a/tre_8h.html#a6af5faec3f9662b20ffc9903f923dec0">xmalloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../d7/d05/dpkg_8c.html#da/d43/structedge__s">edge_t</a>));</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;            edge-&gt;<a class="code" href="../../d7/d05/dpkg_8c.html#ac4185923e0dca80e58d5a1cd5a122874">type</a> = edge_type;</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160; </div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;            <span class="comment">/* Skip any extra leading spaces */</span></div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;            field2 += <a class="code" href="../../d6/d32/musl_2include_2string_8h.html#a417885431ec6bd9c35f34ca1d10ca48b">strspn</a>(field2, <span class="stringliteral">&quot; &quot;</span>);</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160; </div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;            <span class="comment">/* Get dependency version info */</span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;            version = <a class="code" href="../../da/df6/apps_2base_2bash_2lib_2readline_2bind_8c.html#a58f035966ee1771c6b3bb7a84fb13019">strchr</a>(field2, <span class="charliteral">&#39;(&#39;</span>);</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;            <span class="keywordflow">if</span> (version == <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;                edge-&gt;operator = <a class="code" href="../../d7/d05/dpkg_8c.html#ac654d21de7f6a409f1c1fdec91f95112adae6d6279d74c603c708541aec479b1d">VER_ANY</a>;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;                <span class="comment">/* Get the versions hash number, adding it if the number isn&#39;t already in there */</span></div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;                edge-&gt;<a class="code" href="../../d7/d05/dpkg_8c.html#a3688d262b1f8edc40d706a82804fa2b1">version</a> = <a class="code" href="../../d7/d05/dpkg_8c.html#aaf672b0ba190ab9318a1ec77d2411b21">search_name_hashtable</a>(<span class="stringliteral">&quot;ANY&quot;</span>);</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;                <span class="comment">/* Skip leading &#39; &#39; or &#39;(&#39; */</span></div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;                version += <a class="code" href="../../d6/d32/musl_2include_2string_8h.html#a417885431ec6bd9c35f34ca1d10ca48b">strspn</a>(version, <span class="stringliteral">&quot; (&quot;</span>);</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;                <span class="comment">/* Calculate length of any operator characters */</span></div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;                offset_ch = <a class="code" href="../../d6/d32/musl_2include_2string_8h.html#a417885431ec6bd9c35f34ca1d10ca48b">strspn</a>(version, <span class="stringliteral">&quot;&lt;=&gt;&quot;</span>);</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;                <span class="comment">/* Determine operator */</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;                <span class="keywordflow">if</span> (offset_ch &gt; 0) {</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="../../dc/da4/libc_2include_2string_8h.html#a07f4a84c11c106e95c32b6ab509346ef">strncmp</a>(version, <span class="stringliteral">&quot;=&quot;</span>, offset_ch) == 0) {</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;                        edge-&gt;operator = <a class="code" href="../../d7/d05/dpkg_8c.html#ac654d21de7f6a409f1c1fdec91f95112ad7ea8faad6a84004e9a5fb0789c28552">VER_EQUAL</a>;</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;                    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../dc/da4/libc_2include_2string_8h.html#a07f4a84c11c106e95c32b6ab509346ef">strncmp</a>(version, <span class="stringliteral">&quot;&lt;&lt;&quot;</span>, offset_ch) == 0) {</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;                        edge-&gt;operator = <a class="code" href="../../d7/d05/dpkg_8c.html#ac654d21de7f6a409f1c1fdec91f95112aaf67750ced47fb05cb2b8eba9760e0be">VER_LESS</a>;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;                    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../dc/da4/libc_2include_2string_8h.html#a07f4a84c11c106e95c32b6ab509346ef">strncmp</a>(version, <span class="stringliteral">&quot;&lt;=&quot;</span>, offset_ch) == 0) {</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;                        edge-&gt;operator = <a class="code" href="../../d7/d05/dpkg_8c.html#ac654d21de7f6a409f1c1fdec91f95112ad0ac6e4d389629a4ecb76d91e441c884">VER_LESS_EQUAL</a>;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;                    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../dc/da4/libc_2include_2string_8h.html#a07f4a84c11c106e95c32b6ab509346ef">strncmp</a>(version, <span class="stringliteral">&quot;&gt;&gt;&quot;</span>, offset_ch) == 0) {</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;                        edge-&gt;operator = <a class="code" href="../../d7/d05/dpkg_8c.html#ac654d21de7f6a409f1c1fdec91f95112afa8f9f4d4d75991761a32cdb1f892f98">VER_MORE</a>;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;                    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../dc/da4/libc_2include_2string_8h.html#a07f4a84c11c106e95c32b6ab509346ef">strncmp</a>(version, <span class="stringliteral">&quot;&gt;=&quot;</span>, offset_ch) == 0) {</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;                        edge-&gt;operator = <a class="code" href="../../d7/d05/dpkg_8c.html#ac654d21de7f6a409f1c1fdec91f95112a6f90bd977650b2780f23f0c483e4884e">VER_MORE_EQUAL</a>;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;                        <a class="code" href="../../d7/dd7/libbb_8h.html#aa7873f1b32526ae11612363558a2aa90">bb_simple_error_msg_and_die</a>(<span class="stringliteral">&quot;illegal operator&quot;</span>);</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;                    }</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                }</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                <span class="comment">/* skip to start of version numbers */</span></div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;                version += offset_ch;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;                version += <a class="code" href="../../d6/d32/musl_2include_2string_8h.html#a417885431ec6bd9c35f34ca1d10ca48b">strspn</a>(version, <span class="stringliteral">&quot; &quot;</span>);</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160; </div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;                <span class="comment">/* Truncate version at trailing &#39; &#39; or &#39;)&#39; */</span></div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                version[<a class="code" href="../../d6/d32/musl_2include_2string_8h.html#a4e8462eddc5a160451a246bc1bc22bb4">strcspn</a>(version, <span class="stringliteral">&quot; )&quot;</span>)] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;                <span class="comment">/* Get the versions hash number, adding it if the number isn&#39;t already in there */</span></div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;                edge-&gt;<a class="code" href="../../d7/d05/dpkg_8c.html#a3688d262b1f8edc40d706a82804fa2b1">version</a> = <a class="code" href="../../d7/d05/dpkg_8c.html#aaf672b0ba190ab9318a1ec77d2411b21">search_name_hashtable</a>(version);</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;            }</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160; </div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;            <span class="comment">/* Get the dependency name */</span></div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;            field2[<a class="code" href="../../d6/d32/musl_2include_2string_8h.html#a4e8462eddc5a160451a246bc1bc22bb4">strcspn</a>(field2, <span class="stringliteral">&quot; (&quot;</span>)] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;            edge-&gt;<a class="code" href="../../d7/d05/dpkg_8c.html#a6e59db09e4fd698720659154ccc2bee1">name</a> = <a class="code" href="../../d7/d05/dpkg_8c.html#aaf672b0ba190ab9318a1ec77d2411b21">search_name_hashtable</a>(field2);</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160; </div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;            <span class="keywordflow">if</span> (or_edge)</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;                or_edge-&gt;<a class="code" href="../../d7/d05/dpkg_8c.html#a3688d262b1f8edc40d706a82804fa2b1">version</a>++;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160; </div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;            <a class="code" href="../../d7/d05/dpkg_8c.html#a8740bd71a7e612c34981efa6ebd41acd">add_edge_to_node</a>(parent_node, edge);</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;            field2 = <a class="code" href="../../d5/db2/strtok__r_8c.html#abf7949e9b8a6fe0db9f4422eb256104e">strtok_r</a>(<a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;|&quot;</span>, &amp;line_ptr2);</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        } <span class="keywordflow">while</span> (field2 != <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160; </div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;        <a class="code" href="../../d5/db0/dynlink_8c.html#a2c6efa7679f8cd9f61af96e105017560">free</a>(line2);</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;        field = <a class="code" href="../../d5/db2/strtok__r_8c.html#abf7949e9b8a6fe0db9f4422eb256104e">strtok_r</a>(<a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;,&quot;</span>, &amp;line_ptr1);</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    } <span class="keywordflow">while</span> (field != <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160; </div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <a class="code" href="../../d5/db0/dynlink_8c.html#a2c6efa7679f8cd9f61af96e105017560">free</a>(<a class="code" href="../../dd/d7b/powertop_8c.html#d4/d85/structline">line</a>);</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;}</div>
<div class="ttc" id="aapps_2base_2bash_2lib_2readline_2bind_8c_html_a58f035966ee1771c6b3bb7a84fb13019"><div class="ttname"><a href="../../da/df6/apps_2base_2bash_2lib_2readline_2bind_8c.html#a58f035966ee1771c6b3bb7a84fb13019">strchr</a></div><div class="ttdeci">char * strchr()</div></div>
<div class="ttc" id="adpkg_8c_html_a3688d262b1f8edc40d706a82804fa2b1"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#a3688d262b1f8edc40d706a82804fa2b1">edge_s::version</a></div><div class="ttdeci">unsigned version</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00103">dpkg.c:103</a></div></div>
<div class="ttc" id="adpkg_8c_html_a6e59db09e4fd698720659154ccc2bee1"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#a6e59db09e4fd698720659154ccc2bee1">edge_s::name</a></div><div class="ttdeci">unsigned name</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00102">dpkg.c:102</a></div></div>
<div class="ttc" id="adpkg_8c_html_a8740bd71a7e612c34981efa6ebd41acd"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#a8740bd71a7e612c34981efa6ebd41acd">add_edge_to_node</a></div><div class="ttdeci">static void add_edge_to_node(common_node_t *node, edge_t *edge)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00413">dpkg.c:413</a></div></div>
<div class="ttc" id="adpkg_8c_html_aaf672b0ba190ab9318a1ec77d2411b21"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#aaf672b0ba190ab9318a1ec77d2411b21">search_name_hashtable</a></div><div class="ttdeci">static int search_name_hashtable(const char *key)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00189">dpkg.c:189</a></div></div>
<div class="ttc" id="adpkg_8c_html_ac4185923e0dca80e58d5a1cd5a122874"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#ac4185923e0dca80e58d5a1cd5a122874">edge_s::type</a></div><div class="ttdeci">unsigned type</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00101">dpkg.c:101</a></div></div>
<div class="ttc" id="adpkg_8c_html_da/d43/structedge__s"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#da/d43/structedge__s">edge_s</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00099">dpkg.c:99</a></div></div>
<div class="ttc" id="adynlink_8c_html_a2c6efa7679f8cd9f61af96e105017560"><div class="ttname"><a href="../../d5/db0/dynlink_8c.html#a2c6efa7679f8cd9f61af96e105017560">free</a></div><div class="ttdeci">#define free</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/db0/dynlink_8c_source.html#l00036">dynlink.c:36</a></div></div>
<div class="ttc" id="adynlink_8c_html_af3054366f27929432795c5ae420a5294"><div class="ttname"><a href="../../d5/db0/dynlink_8c.html#af3054366f27929432795c5ae420a5294">strcmp</a></div><div class="ttdeci">#define strcmp(l, r)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/db0/dynlink_8c_source.html#l00174">dynlink.c:174</a></div></div>
<div class="ttc" id="ageneral_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d14/general_8h_source.html#l00053">general.h:53</a></div></div>
<div class="ttc" id="alibbb_8h_html_aa7873f1b32526ae11612363558a2aa90"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#aa7873f1b32526ae11612363558a2aa90">bb_simple_error_msg_and_die</a></div><div class="ttdeci">void bb_simple_error_msg_and_die(const char *s) NORETURN FAST_FUNC</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/db5/verror__msg_8c_source.html#l00212">verror_msg.c:212</a></div></div>
<div class="ttc" id="alibc_2include_2string_8h_html_a07f4a84c11c106e95c32b6ab509346ef"><div class="ttname"><a href="../../dc/da4/libc_2include_2string_8h.html#a07f4a84c11c106e95c32b6ab509346ef">strncmp</a></div><div class="ttdeci">int strncmp(const char *s1, const char *s2, size_t n)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/db0/string_8c_source.html#l00021">string.c:21</a></div></div>
<div class="ttc" id="amusl_2include_2string_8h_html_a417885431ec6bd9c35f34ca1d10ca48b"><div class="ttname"><a href="../../d6/d32/musl_2include_2string_8h.html#a417885431ec6bd9c35f34ca1d10ca48b">strspn</a></div><div class="ttdeci">size_t strspn(const char *, const char *)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dab/strspn_8c_source.html#l00006">strspn.c:6</a></div></div>
<div class="ttc" id="amusl_2include_2string_8h_html_a4e8462eddc5a160451a246bc1bc22bb4"><div class="ttname"><a href="../../d6/d32/musl_2include_2string_8h.html#a4e8462eddc5a160451a246bc1bc22bb4">strcspn</a></div><div class="ttdeci">size_t strcspn(const char *, const char *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dba/strcspn_8c_source.html#l00006">strcspn.c:6</a></div></div>
<div class="ttc" id="apathchk_8c_html_ac7a701bce03d77bad6b57003d0fe73df"><div class="ttname"><a href="../../dc/dd1/pathchk_8c.html#ac7a701bce03d77bad6b57003d0fe73df">xstrdup</a></div><div class="ttdeci">static char * xstrdup(char *s)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd1/pathchk_8c_source.html#l00258">pathchk.c:258</a></div></div>
<div class="ttc" id="apowertop_8c_html_d4/d85/structline"><div class="ttname"><a href="../../dd/d7b/powertop_8c.html#d4/d85/structline">line</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dff/diff_8c_source.html#l00351">diff.c:351</a></div></div>
<div class="ttc" id="astrtok__r_8c_html_abf7949e9b8a6fe0db9f4422eb256104e"><div class="ttname"><a href="../../d5/db2/strtok__r_8c.html#abf7949e9b8a6fe0db9f4422eb256104e">strtok_r</a></div><div class="ttdeci">char * strtok_r(char *restrict s, const char *restrict sep, char **restrict p)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/db2/strtok__r_8c_source.html#l00003">strtok_r.c:3</a></div></div>
<div class="ttc" id="atre_8h_html_a6af5faec3f9662b20ffc9903f923dec0"><div class="ttname"><a href="../../db/d0a/tre_8h.html#a6af5faec3f9662b20ffc9903f923dec0">xmalloc</a></div><div class="ttdeci">#define xmalloc</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d0a/tre_8h_source.html#l00227">tre.h:227</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00413">add_edge_to_node()</a>, <a class="el" href="../../d5/db5/verror__msg_8c_source.html#l00212">bb_simple_error_msg_and_die()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00143">EDGE_DEPENDS</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00141">EDGE_PRE_DEPENDS</a>, <a class="el" href="../../d5/db0/dynlink_8c_source.html#l00036">free</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00102">edge_s::name</a>, <a class="el" href="../../d9/d14/general_8h_source.html#l00053">NULL</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00189">search_name_hashtable()</a>, <a class="el" href="../../da/df6/apps_2base_2bash_2lib_2readline_2bind_8c.html#a58f035966ee1771c6b3bb7a84fb13019">strchr()</a>, <a class="el" href="../../d5/db0/dynlink_8c_source.html#l00174">strcmp</a>, <a class="el" href="../../d8/dba/strcspn_8c_source.html#l00006">strcspn()</a>, <a class="el" href="../../d1/db0/string_8c_source.html#l00021">strncmp()</a>, <a class="el" href="../../da/dab/strspn_8c_source.html#l00006">strspn()</a>, <a class="el" href="../../d5/db2/strtok__r_8c_source.html#l00003">strtok_r()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00101">edge_s::type</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00159">VER_ANY</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00154">VER_EQUAL</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00155">VER_LESS</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00156">VER_LESS_EQUAL</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00157">VER_MORE</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00158">VER_MORE_EQUAL</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00103">edge_s::version</a>, <a class="el" href="../../db/d0a/tre_8h_source.html#l00227">xmalloc</a>, <a class="el" href="../../dc/dd1/pathchk_8c_source.html#l00258">xstrdup()</a>, and <a class="el" href="../../d9/dd6/xfuncs__printf_8c_source.html#l00069">xzalloc()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00618">fill_package_struct()</a>.</p>

</div>
</div>
<a id="a23bd2b3b34eac44e1e0cb5c5681bf425"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23bd2b3b34eac44e1e0cb5c5681bf425">&#9670;&nbsp;</a></span>all_control_list()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char** all_control_list </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>package_name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01313">1313</a> of file <a class="el" href="../../d7/d05/dpkg_8c_source.html">dpkg.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;{</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> = 0;</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;    <span class="keywordtype">char</span> **remove_files;</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160; </div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;    <span class="comment">/* Create a list of all /var/lib/dpkg/info/&lt;package&gt; files */</span></div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;    remove_files = <a class="code" href="../../d7/dd7/libbb_8h.html#a6b9d12af476b8fa4b9de87028b0ac27c">xzalloc</a>(<span class="keyword">sizeof</span>(all_control_files) + <span class="keyword">sizeof</span>(<span class="keywordtype">char</span>*));</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;    <span class="keywordflow">while</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> &lt; <a class="code" href="../../dd/d7f/applet__tables_8c.html#a6242a25f9d996f0cc4f4cdb911218b75">ARRAY_SIZE</a>(all_control_files)) {</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;        remove_files[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>] = <a class="code" href="../../d7/dd7/libbb_8h.html#a4d828f2f187169b160c384cde2d0b0b0">xasprintf</a>(<span class="stringliteral">&quot;/var/lib/dpkg/info/%s.%s&quot;</span>,</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;                package_name, all_control_files[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>]);</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;        <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>++;</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;    }</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160; </div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;    <span class="keywordflow">return</span> remove_files;</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;}</div>
<div class="ttc" id="aapplet__tables_8c_html_a6242a25f9d996f0cc4f4cdb911218b75"><div class="ttname"><a href="../../dd/d7f/applet__tables_8c.html#a6242a25f9d996f0cc4f4cdb911218b75">ARRAY_SIZE</a></div><div class="ttdeci">#define ARRAY_SIZE(x)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7f/applet__tables_8c_source.html#l00021">applet_tables.c:21</a></div></div>
<div class="ttc" id="agettextP_8h_html_a68428151ad44e31b19041cdeb8972a91"><div class="ttname"><a href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a></div><div class="ttdeci">static nls_uint32 nls_uint32 i</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d71/gettextP_8h_source.html#l00074">gettextP.h:74</a></div></div>
<div class="ttc" id="alibbb_8h_html_a4d828f2f187169b160c384cde2d0b0b0"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#a4d828f2f187169b160c384cde2d0b0b0">xasprintf</a></div><div class="ttdeci">char * xasprintf(const char *format,...) __attribute__((format(printf</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dd/d7f/applet__tables_8c_source.html#l00021">ARRAY_SIZE</a>, <a class="el" href="../../dd/d71/gettextP_8h_source.html#l00074">i</a>, <a class="el" href="../../d7/dd7/libbb_8h.html#a4d828f2f187169b160c384cde2d0b0b0">xasprintf()</a>, and <a class="el" href="../../d9/dd6/xfuncs__printf_8c_source.html#l00069">xzalloc()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01435">purge_package()</a>, and <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01384">remove_package()</a>.</p>

</div>
</div>
<a id="ace88fe156496dd8047229b08b4a15005"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace88fe156496dd8047229b08b4a15005">&#9670;&nbsp;</a></span>append_control_file_to_llist()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void append_control_file_to_llist </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>package_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>control_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d7/dd7/libbb_8h.html#da/d28/structllist__t">llist_t</a> **&#160;</td>
          <td class="paramname"><em>ll</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01560">1560</a> of file <a class="el" href="../../d7/d05/dpkg_8c_source.html">dpkg.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;{</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;    <a class="code" href="../../d0/d57/struct__IO__FILE.html">FILE</a> *fp;</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;    <span class="keywordtype">char</span> *<a class="code" href="../../d4/daf/flashcp_8c.html#abe2fedc3a963bcd397037e60e16adabb">filename</a>, *<a class="code" href="../../dc/d37/inetd_8c.html#a5bdec07ba0f5f220bcb40d5258725d95">line</a>;</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160; </div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;    <a class="code" href="../../d4/daf/flashcp_8c.html#abe2fedc3a963bcd397037e60e16adabb">filename</a> = <a class="code" href="../../d7/dd7/libbb_8h.html#a4d828f2f187169b160c384cde2d0b0b0">xasprintf</a>(<span class="stringliteral">&quot;/var/lib/dpkg/info/%s.%s&quot;</span>, package_name, control_name);</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;    fp = <a class="code" href="../../d7/dd7/libbb_8h.html#a547f92b9e32d1a4e05450126d4bdc1c3">fopen_for_read</a>(<a class="code" href="../../d4/daf/flashcp_8c.html#abe2fedc3a963bcd397037e60e16adabb">filename</a>);</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;    <a class="code" href="../../d5/db0/dynlink_8c.html#a2c6efa7679f8cd9f61af96e105017560">free</a>(<a class="code" href="../../d4/daf/flashcp_8c.html#abe2fedc3a963bcd397037e60e16adabb">filename</a>);</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;    <span class="keywordflow">if</span> (fp != <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;        <span class="keywordflow">while</span> ((<a class="code" href="../../dd/d7b/powertop_8c.html#d4/d85/structline">line</a> = <a class="code" href="../../d7/dd7/libbb_8h.html#a422c433aafd7fcba5a7f9f005e52237d">xmalloc_fgetline</a>(fp)) != <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;            <a class="code" href="../../d7/dd7/libbb_8h.html#ac1428a8eb5f3de46969e7d3bfa8be3c3">llist_add_to</a>(ll, <a class="code" href="../../dd/d7b/powertop_8c.html#d4/d85/structline">line</a>);</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;        <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#a3abd78c220b4b49d1b088f0dfe40bf23">fclose</a>(fp);</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;    }</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;}</div>
<div class="ttc" id="aflashcp_8c_html_abe2fedc3a963bcd397037e60e16adabb"><div class="ttname"><a href="../../d4/daf/flashcp_8c.html#abe2fedc3a963bcd397037e60e16adabb">filename</a></div><div class="ttdeci">#define filename</div></div>
<div class="ttc" id="ainetd_8c_html_a5bdec07ba0f5f220bcb40d5258725d95"><div class="ttname"><a href="../../dc/d37/inetd_8c.html#a5bdec07ba0f5f220bcb40d5258725d95">line</a></div><div class="ttdeci">#define line</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d37/inetd_8c_source.html#l00427">inetd.c:427</a></div></div>
<div class="ttc" id="alibbb_8h_html_a422c433aafd7fcba5a7f9f005e52237d"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#a422c433aafd7fcba5a7f9f005e52237d">xmalloc_fgetline</a></div><div class="ttdeci">char * xmalloc_fgetline(FILE *file) FAST_FUNC RETURNS_MALLOC</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dce/get__line__from__file_8c_source.html#l00055">get_line_from_file.c:55</a></div></div>
<div class="ttc" id="alibbb_8h_html_a547f92b9e32d1a4e05450126d4bdc1c3"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#a547f92b9e32d1a4e05450126d4bdc1c3">fopen_for_read</a></div><div class="ttdeci">FILE * fopen_for_read(const char *path) FAST_FUNC</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d34/wfopen_8c_source.html#l00021">wfopen.c:21</a></div></div>
<div class="ttc" id="alibbb_8h_html_ac1428a8eb5f3de46969e7d3bfa8be3c3"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#ac1428a8eb5f3de46969e7d3bfa8be3c3">llist_add_to</a></div><div class="ttdeci">void llist_add_to(llist_t **old_head, void *data) FAST_FUNC</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de1/llist_8c_source.html#l00015">llist.c:15</a></div></div>
<div class="ttc" id="alibc_2include_2stdio_8h_html_a3abd78c220b4b49d1b088f0dfe40bf23"><div class="ttname"><a href="../../dc/d4d/libc_2include_2stdio_8h.html#a3abd78c220b4b49d1b088f0dfe40bf23">fclose</a></div><div class="ttdeci">int fclose(FILE *fp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00054">file.c:54</a></div></div>
<div class="ttc" id="astruct__IO__FILE_html"><div class="ttname"><a href="../../d0/d57/struct__IO__FILE.html">_IO_FILE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4d/libc_2include_2stdio_8h_source.html#l00026">stdio.h:27</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d6/d13/file_8c_source.html#l00054">fclose()</a>, <a class="el" href="../../d4/daf/flashcp_8c.html#abe2fedc3a963bcd397037e60e16adabb">filename</a>, <a class="el" href="../../d7/d34/wfopen_8c_source.html#l00021">fopen_for_read()</a>, <a class="el" href="../../d5/db0/dynlink_8c_source.html#l00036">free</a>, <a class="el" href="../../dc/d37/inetd_8c_source.html#l00427">line</a>, <a class="el" href="../../d4/de1/llist_8c_source.html#l00015">llist_add_to()</a>, <a class="el" href="../../d9/d14/general_8h_source.html#l00053">NULL</a>, <a class="el" href="../../d7/dd7/libbb_8h.html#a4d828f2f187169b160c384cde2d0b0b0">xasprintf()</a>, and <a class="el" href="../../d8/dce/get__line__from__file_8c_source.html#l00055">xmalloc_fgetline()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01654">unpack_package()</a>.</p>

</div>
</div>
<a id="ab92ad59b3973652ac034175b60d89f7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab92ad59b3973652ac034175b60d89f7b">&#9670;&nbsp;</a></span>check_deps()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int check_deps </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d7/d05/dpkg_8c.html#a7d9d9782c353a4a270bd29785ca749e1">deb_file_t</a> **&#160;</td>
          <td class="paramname"><em>deb_file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>deb_start</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00980">980</a> of file <a class="el" href="../../d7/d05/dpkg_8c_source.html">dpkg.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;{</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    <span class="keywordtype">int</span> *<a class="code" href="../../dd/db1/zcip_8c.html#a1c76b085390e5e8ecd3ee0875756802b">conflicts</a> = <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    <span class="keywordtype">int</span> conflicts_num = 0;</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> = deb_start;</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a>;</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160; </div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    <span class="comment">/* Check for conflicts</span></div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;<span class="comment">     * TODO: TEST if conflicts with other packages to be installed</span></div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;<span class="comment">     * Add install packages and the packages they provide</span></div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;<span class="comment">     * to the list of files to check conflicts for</span></div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160; </div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;    <span class="comment">/* Create array of package numbers to check against</span></div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;<span class="comment">     * installed package for conflicts*/</span></div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    <span class="keywordflow">while</span> (deb_file[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>] != <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">unsigned</span> package_num = deb_file[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>]-&gt;<a class="code" href="../../d7/d05/dpkg_8c.html#a369614c3e79fae15cf9ccd0c7b593048">package</a>;</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;        <a class="code" href="../../dd/db1/zcip_8c.html#a1c76b085390e5e8ecd3ee0875756802b">conflicts</a> = <a class="code" href="../../d7/dd7/libbb_8h.html#a098c321a7116d4a59f70859848fae417">xrealloc_vector</a>(<a class="code" href="../../dd/db1/zcip_8c.html#a1c76b085390e5e8ecd3ee0875756802b">conflicts</a>, 2, conflicts_num);</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;        <a class="code" href="../../dd/db1/zcip_8c.html#a1c76b085390e5e8ecd3ee0875756802b">conflicts</a>[conflicts_num] = package_num;</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;        conflicts_num++;</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;        <span class="comment">/* add provides to conflicts list */</span></div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a> = 0; <a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a> &lt; <a class="code" href="../../d7/d05/dpkg_8c.html#a3d27c89e1462f204c221e2cf5c9233d6">package_hashtable</a>[package_num]-&gt;num_of_edges; <a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a>++) {</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d7/d05/dpkg_8c.html#a3d27c89e1462f204c221e2cf5c9233d6">package_hashtable</a>[package_num]-&gt;edge[<a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a>]-&gt;<a class="code" href="../../d1/d80/xatonum_8c.html#a53155e22eaa05190346890241be3367c">type</a> == <a class="code" href="../../d7/d05/dpkg_8c.html#a73b480dcdb4db9e6c91e846cf84a304ea64e38f4113bce59cb73cefbc1646eb3e">EDGE_PROVIDES</a>) {</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">int</span> conflicts_package_num = <a class="code" href="../../d7/d05/dpkg_8c.html#a32c2bcae0237f8822b6515ea3adc7c00">search_package_hashtable</a>(</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;                    <a class="code" href="../../d7/d05/dpkg_8c.html#a3d27c89e1462f204c221e2cf5c9233d6">package_hashtable</a>[package_num]-&gt;edge[<a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a>]-&gt;name,</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;                    <a class="code" href="../../d7/d05/dpkg_8c.html#a3d27c89e1462f204c221e2cf5c9233d6">package_hashtable</a>[package_num]-&gt;edge[<a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a>]-&gt;version,</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;                    <a class="code" href="../../d7/d05/dpkg_8c.html#a3d27c89e1462f204c221e2cf5c9233d6">package_hashtable</a>[package_num]-&gt;edge[<a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a>]-&gt;<span class="keyword">operator</span>);</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../d7/d05/dpkg_8c.html#a3d27c89e1462f204c221e2cf5c9233d6">package_hashtable</a>[conflicts_package_num] == <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;                    <span class="comment">/* create a new package */</span></div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;                    <a class="code" href="../../d7/d05/dpkg_8c.html#d1/d51/structcommon__node__s">common_node_t</a> *<a class="code" href="../../de/dcc/awk_8c.html#a7da998e298667fb31bad4999be4e2a88">new_node</a> = <a class="code" href="../../d7/dd7/libbb_8h.html#a6b9d12af476b8fa4b9de87028b0ac27c">xzalloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../d7/d05/dpkg_8c.html#d1/d51/structcommon__node__s">common_node_t</a>));</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;                    <a class="code" href="../../de/dcc/awk_8c.html#a7da998e298667fb31bad4999be4e2a88">new_node</a>-&gt;<a class="code" href="../../d3/ddd/tsearch_8h.html#a5063bea9c09cef0eaf5bbcb7e9d81cd6">name</a> = <a class="code" href="../../d7/d05/dpkg_8c.html#a3d27c89e1462f204c221e2cf5c9233d6">package_hashtable</a>[package_num]-&gt;edge[<a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a>]-&gt;name;</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;                    <a class="code" href="../../de/dcc/awk_8c.html#a7da998e298667fb31bad4999be4e2a88">new_node</a>-&gt;version = <a class="code" href="../../d7/d05/dpkg_8c.html#a3d27c89e1462f204c221e2cf5c9233d6">package_hashtable</a>[package_num]-&gt;edge[<a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a>]-&gt;version;</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;                    <a class="code" href="../../d7/d05/dpkg_8c.html#a3d27c89e1462f204c221e2cf5c9233d6">package_hashtable</a>[conflicts_package_num] = <a class="code" href="../../de/dcc/awk_8c.html#a7da998e298667fb31bad4999be4e2a88">new_node</a>;</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;                }</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;                <a class="code" href="../../dd/db1/zcip_8c.html#a1c76b085390e5e8ecd3ee0875756802b">conflicts</a> = <a class="code" href="../../d7/dd7/libbb_8h.html#a098c321a7116d4a59f70859848fae417">xrealloc_vector</a>(<a class="code" href="../../dd/db1/zcip_8c.html#a1c76b085390e5e8ecd3ee0875756802b">conflicts</a>, 2, conflicts_num);</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;                <a class="code" href="../../dd/db1/zcip_8c.html#a1c76b085390e5e8ecd3ee0875756802b">conflicts</a>[conflicts_num] = conflicts_package_num;</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;                conflicts_num++;</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;            }</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;        }</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;        <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>++;</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;    }</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160; </div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;    <span class="comment">/* Check conflicts */</span></div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;    <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> = 0;</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;    <span class="keywordflow">while</span> (deb_file[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>] != <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d7/d05/dpkg_8c.html#d1/d51/structcommon__node__s">common_node_t</a> *package_node = <a class="code" href="../../d7/d05/dpkg_8c.html#a3d27c89e1462f204c221e2cf5c9233d6">package_hashtable</a>[deb_file[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>]-&gt;<a class="code" href="../../d7/d05/dpkg_8c.html#a369614c3e79fae15cf9ccd0c7b593048">package</a>];</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;        <span class="keywordtype">int</span> status_num = 0;</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;        status_num = <a class="code" href="../../d7/d05/dpkg_8c.html#a82afa66172a836357ebd323585c651cd">search_status_hashtable</a>(<a class="code" href="../../d7/d05/dpkg_8c.html#aa77ba14cd48e018786c6b752ed1d11b0">name_hashtable</a>[package_node-&gt;<a class="code" href="../../d7/d05/dpkg_8c.html#a46ad76672bc37194703cb0e7cee3dde1">name</a>]);</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160; </div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d7/d05/dpkg_8c.html#a7dfbd7f4ae69e4e7c73a932addf7bd6f">get_status</a>(status_num, 3) == <a class="code" href="../../d7/d05/dpkg_8c.html#aaf672b0ba190ab9318a1ec77d2411b21">search_name_hashtable</a>(<span class="stringliteral">&quot;installed&quot;</span>)) {</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;            <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>++;</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;        }</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160; </div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a> = 0; <a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a> &lt; package_node-&gt;<a class="code" href="../../d7/d05/dpkg_8c.html#a487d8a160096b47e49e01eee3c57baec">num_of_edges</a>; <a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a>++) {</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;            <span class="keyword">const</span> <a class="code" href="../../d7/d05/dpkg_8c.html#da/d43/structedge__s">edge_t</a> *package_edge = package_node-&gt;<a class="code" href="../../d7/d05/dpkg_8c.html#aef1ca484df7de07bcc5f16f620b85c54">edge</a>[<a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a>];</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160; </div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;            <span class="keywordflow">if</span> (package_edge-&gt;<a class="code" href="../../d7/d05/dpkg_8c.html#ac4185923e0dca80e58d5a1cd5a122874">type</a> == <a class="code" href="../../d7/d05/dpkg_8c.html#a73b480dcdb4db9e6c91e846cf84a304ea40c79a458b5d88f76922a72e0dd2af36">EDGE_CONFLICTS</a>) {</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">unsigned</span> package_num =</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;                    <a class="code" href="../../d7/d05/dpkg_8c.html#a32c2bcae0237f8822b6515ea3adc7c00">search_package_hashtable</a>(package_edge-&gt;<a class="code" href="../../d7/d05/dpkg_8c.html#a6e59db09e4fd698720659154ccc2bee1">name</a>,</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;                                package_edge-&gt;<a class="code" href="../../d7/d05/dpkg_8c.html#a3688d262b1f8edc40d706a82804fa2b1">version</a>,</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;                                package_edge-&gt;operator);</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;                <span class="keywordtype">int</span> result = 0;</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../d7/d05/dpkg_8c.html#a3d27c89e1462f204c221e2cf5c9233d6">package_hashtable</a>[package_num] != <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;                    status_num = <a class="code" href="../../d7/d05/dpkg_8c.html#a82afa66172a836357ebd323585c651cd">search_status_hashtable</a>(<a class="code" href="../../d7/d05/dpkg_8c.html#aa77ba14cd48e018786c6b752ed1d11b0">name_hashtable</a>[<a class="code" href="../../d7/d05/dpkg_8c.html#a3d27c89e1462f204c221e2cf5c9233d6">package_hashtable</a>[package_num]-&gt;name]);</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160; </div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="../../d7/d05/dpkg_8c.html#a7dfbd7f4ae69e4e7c73a932addf7bd6f">get_status</a>(status_num, 1) == <a class="code" href="../../d7/d05/dpkg_8c.html#aaf672b0ba190ab9318a1ec77d2411b21">search_name_hashtable</a>(<span class="stringliteral">&quot;install&quot;</span>)) {</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;                        result = <a class="code" href="../../d7/d05/dpkg_8c.html#ae99c5f15488d114b34dec0a896ee5e73">test_version</a>(<a class="code" href="../../d7/d05/dpkg_8c.html#a3d27c89e1462f204c221e2cf5c9233d6">package_hashtable</a>[deb_file[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>]-&gt;package]-&gt;version,</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;                            package_edge-&gt;<a class="code" href="../../d7/d05/dpkg_8c.html#a3688d262b1f8edc40d706a82804fa2b1">version</a>, package_edge-&gt;operator);</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;                    }</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;                }</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160; </div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;                <span class="keywordflow">if</span> (result) {</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;                    <a class="code" href="../../d7/dd7/libbb_8h.html#a1992b68ae7d01f7da91e31e351ca3b33">bb_error_msg_and_die</a>(<span class="stringliteral">&quot;package %s conflicts with %s&quot;</span>,</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;                        <a class="code" href="../../d7/d05/dpkg_8c.html#aa77ba14cd48e018786c6b752ed1d11b0">name_hashtable</a>[package_node-&gt;<a class="code" href="../../d7/d05/dpkg_8c.html#a46ad76672bc37194703cb0e7cee3dde1">name</a>],</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;                        <a class="code" href="../../d7/d05/dpkg_8c.html#aa77ba14cd48e018786c6b752ed1d11b0">name_hashtable</a>[package_edge-&gt;<a class="code" href="../../d7/d05/dpkg_8c.html#a6e59db09e4fd698720659154ccc2bee1">name</a>]);</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;                }</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;            }</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;        }</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;        <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>++;</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;    }</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160; </div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160; </div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    <span class="comment">/* Check dependentcies */</span></div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> = 0; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> &lt; <a class="code" href="../../d7/d05/dpkg_8c.html#a69b135c7de1bd4344e12676bb1946fa1">PACKAGE_HASH_PRIME</a>; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>++) {</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;        <span class="keywordtype">int</span> status_num = 0;</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;        <span class="keywordtype">int</span> number_of_alternatives = 0;</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d7/d05/dpkg_8c.html#da/d43/structedge__s">edge_t</a> * root_of_alternatives = <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d7/d05/dpkg_8c.html#d1/d51/structcommon__node__s">common_node_t</a> *package_node = <a class="code" href="../../d7/d05/dpkg_8c.html#a3d27c89e1462f204c221e2cf5c9233d6">package_hashtable</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>];</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160; </div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;        <span class="comment">/* If the package node does not exist then this</span></div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;<span class="comment">         * package is a virtual one. In which case there are</span></div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;<span class="comment">         * no dependencies to check.</span></div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;        <span class="keywordflow">if</span> (package_node == <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160; </div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;        status_num = <a class="code" href="../../d7/d05/dpkg_8c.html#a82afa66172a836357ebd323585c651cd">search_status_hashtable</a>(<a class="code" href="../../d7/d05/dpkg_8c.html#aa77ba14cd48e018786c6b752ed1d11b0">name_hashtable</a>[package_node-&gt;<a class="code" href="../../d7/d05/dpkg_8c.html#a46ad76672bc37194703cb0e7cee3dde1">name</a>]);</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160; </div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;        <span class="comment">/* If there is no status then this package is a</span></div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;<span class="comment">         * virtual one provided by something else. In which</span></div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;<span class="comment">         * case there are no dependencies to check.</span></div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d7/d05/dpkg_8c.html#afedd0a411aaf4f39ccf5908554c7699b">status_hashtable</a>[status_num] == <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160; </div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;        <span class="comment">/* If we don&#39;t want this package installed then we may</span></div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;<span class="comment">         * as well ignore it&#39;s dependencies.</span></div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d7/d05/dpkg_8c.html#a7dfbd7f4ae69e4e7c73a932addf7bd6f">get_status</a>(status_num, 1) != <a class="code" href="../../d7/d05/dpkg_8c.html#aaf672b0ba190ab9318a1ec77d2411b21">search_name_hashtable</a>(<span class="stringliteral">&quot;install&quot;</span>)) {</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;        }</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160; </div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;        <span class="comment">/* This code is tested only for EDGE_DEPENDS, since I</span></div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;<span class="comment">         * have no suitable pre-depends available. There is no</span></div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;<span class="comment">         * reason that it shouldn&#39;t work though :-)</span></div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a> = 0; <a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a> &lt; package_node-&gt;<a class="code" href="../../d7/d05/dpkg_8c.html#a487d8a160096b47e49e01eee3c57baec">num_of_edges</a>; <a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a>++) {</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;            <span class="keyword">const</span> <a class="code" href="../../d7/d05/dpkg_8c.html#da/d43/structedge__s">edge_t</a> *package_edge = package_node-&gt;<a class="code" href="../../d7/d05/dpkg_8c.html#aef1ca484df7de07bcc5f16f620b85c54">edge</a>[<a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a>];</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;            <span class="keywordtype">unsigned</span> package_num;</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160; </div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;            <span class="keywordflow">if</span> (package_edge-&gt;<a class="code" href="../../d7/d05/dpkg_8c.html#ac4185923e0dca80e58d5a1cd5a122874">type</a> == <a class="code" href="../../d7/d05/dpkg_8c.html#a73b480dcdb4db9e6c91e846cf84a304eacf11931ac8911cdd0aaf374ead49094f">EDGE_OR_PRE_DEPENDS</a></div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;             || package_edge-&gt;<a class="code" href="../../d7/d05/dpkg_8c.html#ac4185923e0dca80e58d5a1cd5a122874">type</a> == <a class="code" href="../../d7/d05/dpkg_8c.html#a73b480dcdb4db9e6c91e846cf84a304ea4635745ed7c1363cdf11a76c4b9af8d4">EDGE_OR_DEPENDS</a></div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;            ) {</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;                <span class="comment">/* start an EDGE_OR_ list */</span></div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;                number_of_alternatives = package_edge-&gt;<a class="code" href="../../d7/d05/dpkg_8c.html#a3688d262b1f8edc40d706a82804fa2b1">version</a>;</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;                root_of_alternatives = package_edge;</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;            }</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;            <span class="keywordflow">if</span> (number_of_alternatives == 0) {  <span class="comment">/* not in the middle of an EDGE_OR_ list */</span></div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;                number_of_alternatives = 1;</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;                root_of_alternatives = <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;            }</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160; </div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;            package_num = <a class="code" href="../../d7/d05/dpkg_8c.html#a32c2bcae0237f8822b6515ea3adc7c00">search_package_hashtable</a>(package_edge-&gt;<a class="code" href="../../d7/d05/dpkg_8c.html#a6e59db09e4fd698720659154ccc2bee1">name</a>, package_edge-&gt;<a class="code" href="../../d7/d05/dpkg_8c.html#a3688d262b1f8edc40d706a82804fa2b1">version</a>, package_edge-&gt;operator);</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160; </div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;            <span class="keywordflow">if</span> (package_edge-&gt;<a class="code" href="../../d7/d05/dpkg_8c.html#ac4185923e0dca80e58d5a1cd5a122874">type</a> == <a class="code" href="../../d7/d05/dpkg_8c.html#a73b480dcdb4db9e6c91e846cf84a304eac9dfc4afeb58573a67d3ed2b91f460ca">EDGE_PRE_DEPENDS</a></div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;             || package_edge-&gt;<a class="code" href="../../d7/d05/dpkg_8c.html#ac4185923e0dca80e58d5a1cd5a122874">type</a> == <a class="code" href="../../d7/d05/dpkg_8c.html#a73b480dcdb4db9e6c91e846cf84a304ea90d2c9cde2903fb606ea74a193afad99">EDGE_DEPENDS</a></div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;            ) {</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;                <span class="keywordtype">int</span> result = 1;</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;                status_num = 0;</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160; </div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;                <span class="comment">/* If we are inside an alternative then check</span></div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;<span class="comment">                 * this edge is the right type.</span></div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;<span class="comment">                 *</span></div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;<span class="comment">                 * EDGE_DEPENDS == OR_DEPENDS -1</span></div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;<span class="comment">                 * EDGE_PRE_DEPENDS == OR_PRE_DEPENDS -1</span></div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;<span class="comment">                 */</span></div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;                <span class="keywordflow">if</span> (root_of_alternatives &amp;&amp; package_edge-&gt;<a class="code" href="../../d7/d05/dpkg_8c.html#ac4185923e0dca80e58d5a1cd5a122874">type</a> != root_of_alternatives-&gt;<a class="code" href="../../d7/d05/dpkg_8c.html#ac4185923e0dca80e58d5a1cd5a122874">type</a> - 1)</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;                    <a class="code" href="../../d7/dd7/libbb_8h.html#a1992b68ae7d01f7da91e31e351ca3b33">bb_error_msg_and_die</a>(<span class="stringliteral">&quot;fatal error, package dependencies corrupt: %d != %d - 1&quot;</span>,</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;                            package_edge-&gt;<a class="code" href="../../d7/d05/dpkg_8c.html#ac4185923e0dca80e58d5a1cd5a122874">type</a>, root_of_alternatives-&gt;<a class="code" href="../../d7/d05/dpkg_8c.html#ac4185923e0dca80e58d5a1cd5a122874">type</a>);</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160; </div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../d7/d05/dpkg_8c.html#a3d27c89e1462f204c221e2cf5c9233d6">package_hashtable</a>[package_num] != <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;                    result = !<a class="code" href="../../d7/d05/dpkg_8c.html#ac18d5641a1ff4cfc41e95cf3c2528e65">package_satisfies_dependency</a>(package_num, package_edge-&gt;<a class="code" href="../../d7/d05/dpkg_8c.html#ac4185923e0dca80e58d5a1cd5a122874">type</a>);</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160; </div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;                <span class="keywordflow">if</span> (result) { <span class="comment">/* check for other package which provide what we are looking for */</span></div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;                    <span class="keywordtype">int</span> provider = -1;</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160; </div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;                    <span class="keywordflow">while</span> ((provider = <a class="code" href="../../d7/d05/dpkg_8c.html#aee73cbf4da2d4f28b92f3b5b7cb40192">search_for_provides</a>(package_edge-&gt;<a class="code" href="../../d7/d05/dpkg_8c.html#a6e59db09e4fd698720659154ccc2bee1">name</a>, provider)) &gt; -1) {</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="../../d7/d05/dpkg_8c.html#a3d27c89e1462f204c221e2cf5c9233d6">package_hashtable</a>[provider] == <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;                            <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#ad41876f99f190c7488e64ef39c50a23f">puts</a>(<span class="stringliteral">&quot;Have a provider but no package information for it&quot;</span>);</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;                            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;                        }</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;                        result = !<a class="code" href="../../d7/d05/dpkg_8c.html#ac18d5641a1ff4cfc41e95cf3c2528e65">package_satisfies_dependency</a>(provider, package_edge-&gt;<a class="code" href="../../d7/d05/dpkg_8c.html#ac4185923e0dca80e58d5a1cd5a122874">type</a>);</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160; </div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;                        <span class="keywordflow">if</span> (result == 0)</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;                    }</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;                }</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160; </div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;                <span class="comment">/* It must be already installed, or to be installed */</span></div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;                number_of_alternatives--;</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;                <span class="keywordflow">if</span> (result &amp;&amp; number_of_alternatives == 0) {</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;                    <span class="keywordflow">if</span> (root_of_alternatives)</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;                        <a class="code" href="../../d7/dd7/libbb_8h.html#a1992b68ae7d01f7da91e31e351ca3b33">bb_error_msg_and_die</a>(</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;                            <span class="stringliteral">&quot;package %s %sdepends on %s, which %s&quot;</span>,</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;                            <a class="code" href="../../d7/d05/dpkg_8c.html#aa77ba14cd48e018786c6b752ed1d11b0">name_hashtable</a>[package_node-&gt;<a class="code" href="../../d7/d05/dpkg_8c.html#a46ad76672bc37194703cb0e7cee3dde1">name</a>],</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;                            package_edge-&gt;<a class="code" href="../../d7/d05/dpkg_8c.html#ac4185923e0dca80e58d5a1cd5a122874">type</a> == <a class="code" href="../../d7/d05/dpkg_8c.html#a73b480dcdb4db9e6c91e846cf84a304eac9dfc4afeb58573a67d3ed2b91f460ca">EDGE_PRE_DEPENDS</a> ? <span class="stringliteral">&quot;pre-&quot;</span> : <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;                            <a class="code" href="../../d7/d05/dpkg_8c.html#aa77ba14cd48e018786c6b752ed1d11b0">name_hashtable</a>[root_of_alternatives-&gt;<a class="code" href="../../d7/d05/dpkg_8c.html#a6e59db09e4fd698720659154ccc2bee1">name</a>],</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;                            <span class="stringliteral">&quot;cannot be satisfied&quot;</span>);</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;                    <a class="code" href="../../d7/dd7/libbb_8h.html#a1992b68ae7d01f7da91e31e351ca3b33">bb_error_msg_and_die</a>(</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;                        <span class="stringliteral">&quot;package %s %sdepends on %s, which %s&quot;</span>,</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;                        <a class="code" href="../../d7/d05/dpkg_8c.html#aa77ba14cd48e018786c6b752ed1d11b0">name_hashtable</a>[package_node-&gt;<a class="code" href="../../d7/d05/dpkg_8c.html#a46ad76672bc37194703cb0e7cee3dde1">name</a>],</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;                        package_edge-&gt;<a class="code" href="../../d7/d05/dpkg_8c.html#ac4185923e0dca80e58d5a1cd5a122874">type</a> == <a class="code" href="../../d7/d05/dpkg_8c.html#a73b480dcdb4db9e6c91e846cf84a304eac9dfc4afeb58573a67d3ed2b91f460ca">EDGE_PRE_DEPENDS</a> ? <span class="stringliteral">&quot;pre-&quot;</span> : <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;                        <a class="code" href="../../d7/d05/dpkg_8c.html#aa77ba14cd48e018786c6b752ed1d11b0">name_hashtable</a>[package_edge-&gt;<a class="code" href="../../d7/d05/dpkg_8c.html#a6e59db09e4fd698720659154ccc2bee1">name</a>],</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;                        <a class="code" href="../../d7/d05/dpkg_8c.html#a5329b8aa20af0675828c95a90b033704">describe_status</a>(status_num));</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;                }</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;                <span class="keywordflow">if</span> (result == 0 &amp;&amp; number_of_alternatives) {</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;                    <span class="comment">/* we&#39;ve found a package which</span></div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;<span class="comment">                     * satisfies the dependency,</span></div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;<span class="comment">                     * so skip over the rest of</span></div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;<span class="comment">                     * the alternatives.</span></div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;<span class="comment">                     */</span></div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;                    <a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a> += number_of_alternatives;</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;                    number_of_alternatives = 0;</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;                }</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;            }</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;        }</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;    }</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;    <a class="code" href="../../d5/db0/dynlink_8c.html#a2c6efa7679f8cd9f61af96e105017560">free</a>(<a class="code" href="../../dd/db1/zcip_8c.html#a1c76b085390e5e8ecd3ee0875756802b">conflicts</a>);</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d9/dd0/bash_2test_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;}</div>
<div class="ttc" id="aawk_8c_html_a7da998e298667fb31bad4999be4e2a88"><div class="ttname"><a href="../../de/dcc/awk_8c.html#a7da998e298667fb31bad4999be4e2a88">new_node</a></div><div class="ttdeci">static node * new_node(uint32_t info)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcc/awk_8c_source.html#l01320">awk.c:1320</a></div></div>
<div class="ttc" id="abash_2test_8c_html_aa8cecfc5c5c054d2875c03e77b7be15d"><div class="ttname"><a href="../../d9/dd0/bash_2test_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a></div><div class="ttdeci">#define TRUE</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd0/bash_2test_8c_source.html#l00095">test.c:95</a></div></div>
<div class="ttc" id="adpkg_8c_html_a32c2bcae0237f8822b6515ea3adc7c00"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#a32c2bcae0237f8822b6515ea3adc7c00">search_package_hashtable</a></div><div class="ttdeci">static int search_package_hashtable(const unsigned name, const unsigned version, const unsigned operator)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00356">dpkg.c:356</a></div></div>
<div class="ttc" id="adpkg_8c_html_a369614c3e79fae15cf9ccd0c7b593048"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#a369614c3e79fae15cf9ccd0c7b593048">deb_file_s::package</a></div><div class="ttdeci">unsigned package</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00165">dpkg.c:165</a></div></div>
<div class="ttc" id="adpkg_8c_html_a3d27c89e1462f204c221e2cf5c9233d6"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#a3d27c89e1462f204c221e2cf5c9233d6">package_hashtable</a></div><div class="ttdeci">#define package_hashtable</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00131">dpkg.c:131</a></div></div>
<div class="ttc" id="adpkg_8c_html_a46ad76672bc37194703cb0e7cee3dde1"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#a46ad76672bc37194703cb0e7cee3dde1">common_node_s::name</a></div><div class="ttdeci">unsigned name</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00107">dpkg.c:107</a></div></div>
<div class="ttc" id="adpkg_8c_html_a487d8a160096b47e49e01eee3c57baec"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#a487d8a160096b47e49e01eee3c57baec">common_node_s::num_of_edges</a></div><div class="ttdeci">unsigned num_of_edges</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00109">dpkg.c:109</a></div></div>
<div class="ttc" id="adpkg_8c_html_a5329b8aa20af0675828c95a90b033704"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#a5329b8aa20af0675828c95a90b033704">describe_status</a></div><div class="ttdeci">static const char * describe_status(int status_num)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00741">dpkg.c:741</a></div></div>
<div class="ttc" id="adpkg_8c_html_a69b135c7de1bd4344e12676bb1946fa1"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#a69b135c7de1bd4344e12676bb1946fa1">PACKAGE_HASH_PRIME</a></div><div class="ttdeci">#define PACKAGE_HASH_PRIME</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00098">dpkg.c:98</a></div></div>
<div class="ttc" id="adpkg_8c_html_a7dfbd7f4ae69e4e7c73a932addf7bd6f"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#a7dfbd7f4ae69e4e7c73a932addf7bd6f">get_status</a></div><div class="ttdeci">static unsigned get_status(const unsigned status_node, const int num)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00692">dpkg.c:692</a></div></div>
<div class="ttc" id="adpkg_8c_html_a82afa66172a836357ebd323585c651cd"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#a82afa66172a836357ebd323585c651cd">search_status_hashtable</a></div><div class="ttdeci">static unsigned search_status_hashtable(const char *key)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00211">dpkg.c:211</a></div></div>
<div class="ttc" id="adpkg_8c_html_aa77ba14cd48e018786c6b752ed1d11b0"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#aa77ba14cd48e018786c6b752ed1d11b0">name_hashtable</a></div><div class="ttdeci">#define name_hashtable</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00130">dpkg.c:130</a></div></div>
<div class="ttc" id="adpkg_8c_html_ac18d5641a1ff4cfc41e95cf3c2528e65"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#ac18d5641a1ff4cfc41e95cf3c2528e65">package_satisfies_dependency</a></div><div class="ttdeci">static int package_satisfies_dependency(int package, int depend_type)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00963">dpkg.c:963</a></div></div>
<div class="ttc" id="adpkg_8c_html_ae99c5f15488d114b34dec0a896ee5e73"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#ae99c5f15488d114b34dec0a896ee5e73">test_version</a></div><div class="ttdeci">static int test_version(const unsigned version1, const unsigned version2, const unsigned operator)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00336">dpkg.c:336</a></div></div>
<div class="ttc" id="adpkg_8c_html_aee73cbf4da2d4f28b92f3b5b7cb40192"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#aee73cbf4da2d4f28b92f3b5b7cb40192">search_for_provides</a></div><div class="ttdeci">static int search_for_provides(int needle, int start_at)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00395">dpkg.c:395</a></div></div>
<div class="ttc" id="adpkg_8c_html_aef1ca484df7de07bcc5f16f620b85c54"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#aef1ca484df7de07bcc5f16f620b85c54">common_node_s::edge</a></div><div class="ttdeci">edge_t ** edge</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00110">dpkg.c:110</a></div></div>
<div class="ttc" id="adpkg_8c_html_afedd0a411aaf4f39ccf5908554c7699b"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#afedd0a411aaf4f39ccf5908554c7699b">status_hashtable</a></div><div class="ttdeci">#define status_hashtable</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00132">dpkg.c:132</a></div></div>
<div class="ttc" id="adpkg_8c_html_d1/d51/structcommon__node__s"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#d1/d51/structcommon__node__s">common_node_s</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00106">dpkg.c:106</a></div></div>
<div class="ttc" id="alibbb_8h_html_a1992b68ae7d01f7da91e31e351ca3b33"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#a1992b68ae7d01f7da91e31e351ca3b33">bb_error_msg_and_die</a></div><div class="ttdeci">void bb_error_msg_and_die(const char *s,...) __attribute__((noreturn</div></div>
<div class="ttc" id="alibc_2include_2stdio_8h_html_ad41876f99f190c7488e64ef39c50a23f"><div class="ttname"><a href="../../dc/d4d/libc_2include_2stdio_8h.html#ad41876f99f190c7488e64ef39c50a23f">puts</a></div><div class="ttdeci">int puts(const char *s)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d79/put_8c_source.html#l00027">put.c:27</a></div></div>
<div class="ttc" id="amusl_2src_2prng_2random_8c_html_a37d972ae0b47b9099e30983131d31916"><div class="ttname"><a href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a></div><div class="ttdeci">static int j</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da2/musl_2src_2prng_2random_8c_source.html#l00024">random.c:24</a></div></div>
<div class="ttc" id="atsearch_8h_html_a5063bea9c09cef0eaf5bbcb7e9d81cd6"><div class="ttname"><a href="../../d3/ddd/tsearch_8h.html#a5063bea9c09cef0eaf5bbcb7e9d81cd6">node::name</a></div><div class="ttdeci">char name[1]</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d24/tsort_8c_source.html#l00037">tsort.c:37</a></div></div>
<div class="ttc" id="axatonum_8c_html_a53155e22eaa05190346890241be3367c"><div class="ttname"><a href="../../d1/d80/xatonum_8c.html#a53155e22eaa05190346890241be3367c">type</a></div><div class="ttdeci">#define type</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/xatonum_8c_source.html#l00011">xatonum.c:11</a></div></div>
<div class="ttc" id="azcip_8c_html_a1c76b085390e5e8ecd3ee0875756802b"><div class="ttname"><a href="../../dd/db1/zcip_8c.html#a1c76b085390e5e8ecd3ee0875756802b">conflicts</a></div><div class="ttdeci">#define conflicts</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/dd7/libbb_8h.html#a1992b68ae7d01f7da91e31e351ca3b33">bb_error_msg_and_die()</a>, <a class="el" href="../../dd/db1/zcip_8c.html#a1c76b085390e5e8ecd3ee0875756802b">conflicts</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00741">describe_status()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00110">common_node_s::edge</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00147">EDGE_CONFLICTS</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00143">EDGE_DEPENDS</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00144">EDGE_OR_DEPENDS</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00142">EDGE_OR_PRE_DEPENDS</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00141">EDGE_PRE_DEPENDS</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00146">EDGE_PROVIDES</a>, <a class="el" href="../../d5/db0/dynlink_8c_source.html#l00036">free</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00692">get_status()</a>, <a class="el" href="../../dd/d71/gettextP_8h_source.html#l00074">i</a>, <a class="el" href="../../dc/da2/musl_2src_2prng_2random_8c_source.html#l00024">j</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00102">edge_s::name</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00107">common_node_s::name</a>, <a class="el" href="../../db/d24/tsort_8c_source.html#l00037">node::name</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00130">name_hashtable</a>, <a class="el" href="../../de/dcc/awk_8c_source.html#l01320">new_node()</a>, <a class="el" href="../../d9/d14/general_8h_source.html#l00053">NULL</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00109">common_node_s::num_of_edges</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00165">deb_file_s::package</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00098">PACKAGE_HASH_PRIME</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00131">package_hashtable</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00963">package_satisfies_dependency()</a>, <a class="el" href="../../df/d79/put_8c_source.html#l00027">puts()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00395">search_for_provides()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00189">search_name_hashtable()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00356">search_package_hashtable()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00211">search_status_hashtable()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00132">status_hashtable</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00336">test_version()</a>, <a class="el" href="../../d9/dd0/bash_2test_8c_source.html#l00095">TRUE</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00101">edge_s::type</a>, <a class="el" href="../../d1/d80/xatonum_8c_source.html#l00011">type</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00103">edge_s::version</a>, <a class="el" href="../../d7/dd7/libbb_8h_source.html#l00428">xrealloc_vector</a>, and <a class="el" href="../../d9/dd6/xfuncs__printf_8c_source.html#l00069">xzalloc()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01762">dpkg_main()</a>.</p>

</div>
</div>
<a id="a551722f8081b2fea692e0e6b2aebcd58"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a551722f8081b2fea692e0e6b2aebcd58">&#9670;&nbsp;</a></span>configure_package()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void configure_package </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d7/d05/dpkg_8c.html#a7d9d9782c353a4a270bd29785ca749e1">deb_file_t</a> *&#160;</td>
          <td class="paramname"><em>deb_file</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01744">1744</a> of file <a class="el" href="../../d7/d05/dpkg_8c_source.html">dpkg.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;{</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *package_name = <a class="code" href="../../d7/d05/dpkg_8c.html#aa77ba14cd48e018786c6b752ed1d11b0">name_hashtable</a>[<a class="code" href="../../d7/d05/dpkg_8c.html#a3d27c89e1462f204c221e2cf5c9233d6">package_hashtable</a>[deb_file-&gt;<a class="code" href="../../d7/d05/dpkg_8c.html#a369614c3e79fae15cf9ccd0c7b593048">package</a>]-&gt;name];</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *package_version = <a class="code" href="../../d7/d05/dpkg_8c.html#aa77ba14cd48e018786c6b752ed1d11b0">name_hashtable</a>[<a class="code" href="../../d7/d05/dpkg_8c.html#a3d27c89e1462f204c221e2cf5c9233d6">package_hashtable</a>[deb_file-&gt;<a class="code" href="../../d7/d05/dpkg_8c.html#a369614c3e79fae15cf9ccd0c7b593048">package</a>]-&gt;version];</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> status_num = <a class="code" href="../../d7/d05/dpkg_8c.html#a82afa66172a836357ebd323585c651cd">search_status_hashtable</a>(package_name);</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160; </div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;    <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;Setting up %s (%s)...\n&quot;</span>, package_name, package_version);</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160; </div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;    <span class="comment">/* Run the postinst script */</span></div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;    <span class="comment">/* TODO: handle failure gracefully */</span></div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#a8a3619b4e9563c7afeb0615b2ac76da8">run_package_script_or_die</a>(package_name, <span class="stringliteral">&quot;postinst&quot;</span>);</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160; </div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;    <span class="comment">/* Change status to reflect success */</span></div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#aaaa2b787afd11b42a445289c9256208e">set_status</a>(status_num, <span class="stringliteral">&quot;install&quot;</span>, 1);</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#aaaa2b787afd11b42a445289c9256208e">set_status</a>(status_num, <span class="stringliteral">&quot;installed&quot;</span>, 3);</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;}</div>
<div class="ttc" id="adpkg_8c_html_a8a3619b4e9563c7afeb0615b2ac76da8"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#a8a3619b4e9563c7afeb0615b2ac76da8">run_package_script_or_die</a></div><div class="ttdeci">static void run_package_script_or_die(const char *package_name, const char *script_type)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l01263">dpkg.c:1263</a></div></div>
<div class="ttc" id="adpkg_8c_html_aaaa2b787afd11b42a445289c9256208e"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#aaaa2b787afd11b42a445289c9256208e">set_status</a></div><div class="ttdeci">static void set_status(const unsigned status_node_num, const char *new_value, const int position)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00714">dpkg.c:714</a></div></div>
<div class="ttc" id="alibc_2include_2stdio_8h_html_a98631211a4a8aee62f572375d5b637be"><div class="ttname"><a href="../../dc/d4d/libc_2include_2stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a></div><div class="ttdeci">int printf(const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dae/libc_2src_2print_2printf_8c_source.html#l01554">printf.c:1554</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00130">name_hashtable</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00165">deb_file_s::package</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00131">package_hashtable</a>, <a class="el" href="../../d1/dae/libc_2src_2print_2printf_8c_source.html#l01554">printf()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01263">run_package_script_or_die()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00211">search_status_hashtable()</a>, and <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00714">set_status()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01762">dpkg_main()</a>.</p>

</div>
</div>
<a id="a0febf2008b769ba987e2c500bf982171"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0febf2008b769ba987e2c500bf982171">&#9670;&nbsp;</a></span>create_list()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char** create_list </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01182">1182</a> of file <a class="el" href="../../d7/d05/dpkg_8c_source.html">dpkg.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;{</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;    <a class="code" href="../../d0/d57/struct__IO__FILE.html">FILE</a> *list_stream;</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;    <span class="keywordtype">char</span> **<a class="code" href="../../d4/d78/expr_8h.html#a9cb6cd8810ed11698874b40d8a5a8749">file_list</a>;</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;    <span class="keywordtype">char</span> *<a class="code" href="../../dc/d37/inetd_8c.html#a5bdec07ba0f5f220bcb40d5258725d95">line</a>;</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d2/dd6/dd_8c.html#ac74ae34e9c58234aacabb6867b245c58">count</a>;</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160; </div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;    <span class="comment">/* don&#39;t use [xw]fopen here, handle error ourself */</span></div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;    list_stream = <a class="code" href="../../d7/dd7/libbb_8h.html#a547f92b9e32d1a4e05450126d4bdc1c3">fopen_for_read</a>(<a class="code" href="../../d4/daf/flashcp_8c.html#abe2fedc3a963bcd397037e60e16adabb">filename</a>);</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;    <span class="keywordflow">if</span> (list_stream == <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;    }</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160; </div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;    <a class="code" href="../../d4/d78/expr_8h.html#a9cb6cd8810ed11698874b40d8a5a8749">file_list</a> = <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;    <a class="code" href="../../d2/dd6/dd_8c.html#ac74ae34e9c58234aacabb6867b245c58">count</a> = 0;</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;    <span class="keywordflow">while</span> ((<a class="code" href="../../dd/d7b/powertop_8c.html#d4/d85/structline">line</a> = <a class="code" href="../../d7/dd7/libbb_8h.html#a422c433aafd7fcba5a7f9f005e52237d">xmalloc_fgetline</a>(list_stream)) != <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;        <a class="code" href="../../d4/d78/expr_8h.html#a9cb6cd8810ed11698874b40d8a5a8749">file_list</a> = <a class="code" href="../../d7/dd7/libbb_8h.html#a098c321a7116d4a59f70859848fae417">xrealloc_vector</a>(<a class="code" href="../../d4/d78/expr_8h.html#a9cb6cd8810ed11698874b40d8a5a8749">file_list</a>, 2, <a class="code" href="../../d2/dd6/dd_8c.html#ac74ae34e9c58234aacabb6867b245c58">count</a>);</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;        <a class="code" href="../../d4/d78/expr_8h.html#a9cb6cd8810ed11698874b40d8a5a8749">file_list</a>[<a class="code" href="../../d2/dd6/dd_8c.html#ac74ae34e9c58234aacabb6867b245c58">count</a>++] = <a class="code" href="../../dc/d37/inetd_8c.html#a5bdec07ba0f5f220bcb40d5258725d95">line</a>;</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;        <span class="comment">/*file_list[count] = NULL; - xrealloc_vector did it */</span></div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;    }</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;    <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#a3abd78c220b4b49d1b088f0dfe40bf23">fclose</a>(list_stream);</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160; </div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d4/d78/expr_8h.html#a9cb6cd8810ed11698874b40d8a5a8749">file_list</a>;</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;}</div>
<div class="ttc" id="add_8c_html_ac74ae34e9c58234aacabb6867b245c58"><div class="ttname"><a href="../../d2/dd6/dd_8c.html#ac74ae34e9c58234aacabb6867b245c58">count</a></div><div class="ttdeci">#define count</div></div>
<div class="ttc" id="aexpr_8h_html_a9cb6cd8810ed11698874b40d8a5a8749"><div class="ttname"><a href="../../d4/d78/expr_8h.html#a9cb6cd8810ed11698874b40d8a5a8749">file_list</a></div><div class="ttdeci">struct file * file_list</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0a/menu_8c_source.html#l00015">menu.c:15</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d2/dd6/dd_8c.html#ac74ae34e9c58234aacabb6867b245c58">count</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00054">fclose()</a>, <a class="el" href="../../d2/d0a/menu_8c_source.html#l00015">file_list</a>, <a class="el" href="../../d4/daf/flashcp_8c.html#abe2fedc3a963bcd397037e60e16adabb">filename</a>, <a class="el" href="../../d7/d34/wfopen_8c_source.html#l00021">fopen_for_read()</a>, <a class="el" href="../../dc/d37/inetd_8c_source.html#l00427">line</a>, <a class="el" href="../../d9/d14/general_8h_source.html#l00053">NULL</a>, <a class="el" href="../../d8/dce/get__line__from__file_8c_source.html#l00055">xmalloc_fgetline()</a>, and <a class="el" href="../../d7/dd7/libbb_8h_source.html#l00428">xrealloc_vector</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01435">purge_package()</a>, and <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01384">remove_package()</a>.</p>

</div>
</div>
<a id="a592fa2d97d3c6e6c507d66133a7a4d1c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a592fa2d97d3c6e6c507d66133a7a4d1c">&#9670;&nbsp;</a></span>data_extract_all_prefix()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a> data_extract_all_prefix </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d4c/structarchive__handle__t.html">archive_handle_t</a> *&#160;</td>
          <td class="paramname"><em>archive_handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01612">1612</a> of file <a class="el" href="../../d7/d05/dpkg_8c_source.html">dpkg.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;{</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;    <span class="keywordtype">char</span> *name_ptr = archive_handle-&gt;<a class="code" href="../../d3/d4c/structarchive__handle__t.html#abb094ada6da7418931c0daf5c4a36101">file_header</a>-&gt;<a class="code" href="../../d1/d94/bb__archive_8h.html#abb3f7f2dc847388a384496869ca96b10">name</a>;</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160; </div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;    <span class="comment">/* Skip all leading &quot;/&quot; */</span></div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;    <span class="keywordflow">while</span> (*name_ptr == <span class="charliteral">&#39;/&#39;</span>)</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;        name_ptr++;</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;    <span class="comment">/* Skip all leading &quot;./&quot; and &quot;../&quot; */</span></div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;    <span class="keywordflow">while</span> (name_ptr[0] == <span class="charliteral">&#39;.&#39;</span>) {</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;        <span class="keywordflow">if</span> (name_ptr[1] == <span class="charliteral">&#39;.&#39;</span>)</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;            name_ptr++;</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;        <span class="keywordflow">if</span> (name_ptr[1] != <span class="charliteral">&#39;/&#39;</span>)</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;        name_ptr += 2;</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;    }</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160; </div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;    <span class="keywordflow">if</span> (name_ptr[0] != <span class="charliteral">&#39;\0&#39;</span>) {</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;        archive_handle-&gt;<a class="code" href="../../d3/d4c/structarchive__handle__t.html#abb094ada6da7418931c0daf5c4a36101">file_header</a>-&gt;<a class="code" href="../../d1/d94/bb__archive_8h.html#abb3f7f2dc847388a384496869ca96b10">name</a> = <a class="code" href="../../d7/dd7/libbb_8h.html#a4d828f2f187169b160c384cde2d0b0b0">xasprintf</a>(<span class="stringliteral">&quot;%s%s&quot;</span>, archive_handle-&gt;dpkg__buffer, name_ptr);</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;        <a class="code" href="../../d9/ded/data__extract__all_8c.html#a43965094b9479a4b17c54c43c04ab805">data_extract_all</a>(archive_handle);</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d6/d3d/fnmatch_8h.html#ae8c5fe22c6e8e83faa4a413e9f07f6a0">fnmatch</a>(<span class="stringliteral">&quot;*.dpkg-new&quot;</span>, archive_handle-&gt;<a class="code" href="../../d3/d4c/structarchive__handle__t.html#abb094ada6da7418931c0daf5c4a36101">file_header</a>-&gt;<a class="code" href="../../d1/d94/bb__archive_8h.html#abb3f7f2dc847388a384496869ca96b10">name</a>, 0) == 0) {</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;            <span class="comment">/* remove .dpkg-new suffix */</span></div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;            archive_handle-&gt;<a class="code" href="../../d3/d4c/structarchive__handle__t.html#abb094ada6da7418931c0daf5c4a36101">file_header</a>-&gt;<a class="code" href="../../d1/d94/bb__archive_8h.html#abb3f7f2dc847388a384496869ca96b10">name</a>[<a class="code" href="../../dc/da4/libc_2include_2string_8h.html#a008e171a518fe0e0352f31b245e03875">strlen</a>(archive_handle-&gt;<a class="code" href="../../d3/d4c/structarchive__handle__t.html#abb094ada6da7418931c0daf5c4a36101">file_header</a>-&gt;<a class="code" href="../../d1/d94/bb__archive_8h.html#abb3f7f2dc847388a384496869ca96b10">name</a>) - 9] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;        }</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;    }</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;}</div>
<div class="ttc" id="abb__archive_8h_html_abb3f7f2dc847388a384496869ca96b10"><div class="ttname"><a href="../../d1/d94/bb__archive_8h.html#abb3f7f2dc847388a384496869ca96b10">file_header_t::name</a></div><div class="ttdeci">char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/bb__archive_8h_source.html#l00032">bb_archive.h:32</a></div></div>
<div class="ttc" id="adata__extract__all_8c_html_a43965094b9479a4b17c54c43c04ab805"><div class="ttname"><a href="../../d9/ded/data__extract__all_8c.html#a43965094b9479a4b17c54c43c04ab805">data_extract_all</a></div><div class="ttdeci">void FAST_FUNC data_extract_all(archive_handle_t *archive_handle)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/ded/data__extract__all_8c_source.html#l00008">data_extract_all.c:8</a></div></div>
<div class="ttc" id="afnmatch_8h_html_ae8c5fe22c6e8e83faa4a413e9f07f6a0"><div class="ttname"><a href="../../d6/d3d/fnmatch_8h.html#ae8c5fe22c6e8e83faa4a413e9f07f6a0">fnmatch</a></div><div class="ttdeci">int fnmatch(const char *, const char *, int)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/de7/fnmatch_8c_source.html#l00298">fnmatch.c:298</a></div></div>
<div class="ttc" id="alibc_2include_2string_8h_html_a008e171a518fe0e0352f31b245e03875"><div class="ttname"><a href="../../dc/da4/libc_2include_2string_8h.html#a008e171a518fe0e0352f31b245e03875">strlen</a></div><div class="ttdeci">size_t strlen(const char *str)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/db0/string_8c_source.html#l00005">string.c:5</a></div></div>
<div class="ttc" id="astructarchive__handle__t_html_abb094ada6da7418931c0daf5c4a36101"><div class="ttname"><a href="../../d3/d4c/structarchive__handle__t.html#abb094ada6da7418931c0daf5c4a36101">archive_handle_t::file_header</a></div><div class="ttdeci">file_header_t * file_header</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/bb__archive_8h_source.html#l00065">bb_archive.h:65</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d9/ded/data__extract__all_8c_source.html#l00008">data_extract_all()</a>, <a class="el" href="../../d1/d94/bb__archive_8h_source.html#l00065">archive_handle_t::file_header</a>, <a class="el" href="../../df/de7/fnmatch_8c_source.html#l00298">fnmatch()</a>, <a class="el" href="../../d1/d94/bb__archive_8h_source.html#l00032">file_header_t::name</a>, <a class="el" href="../../d1/db0/string_8c_source.html#l00005">strlen()</a>, and <a class="el" href="../../d7/dd7/libbb_8h.html#a4d828f2f187169b160c384cde2d0b0b0">xasprintf()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01654">unpack_package()</a>.</p>

</div>
</div>
<a id="a1c37d43af99b6e0797df1d0bd55bf4dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c37d43af99b6e0797df1d0bd55bf4dd">&#9670;&nbsp;</a></span>data_extract_to_buffer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a> data_extract_to_buffer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d4c/structarchive__handle__t.html">archive_handle_t</a> *&#160;</td>
          <td class="paramname"><em>archive_handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01540">1540</a> of file <a class="el" href="../../d7/d05/dpkg_8c_source.html">dpkg.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;{</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="../../d7/d06/getpwent_8c.html#a854352f53b148adc24983a58a1866d66">size</a> = archive_handle-&gt;<a class="code" href="../../d3/d4c/structarchive__handle__t.html#abb094ada6da7418931c0daf5c4a36101">file_header</a>-&gt;<a class="code" href="../../d1/d94/bb__archive_8h.html#ae25c7a207f4fc2f8f58716408ae87771">size</a>;</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160; </div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;    archive_handle-&gt;dpkg__buffer = <a class="code" href="../../d7/dd7/libbb_8h.html#a6b9d12af476b8fa4b9de87028b0ac27c">xzalloc</a>(<a class="code" href="../../d7/d06/getpwent_8c.html#a854352f53b148adc24983a58a1866d66">size</a> + 1);</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;    <a class="code" href="../../d7/dd7/libbb_8h.html#a99555f16e71f93f23622a8cce1265a5b">xread</a>(archive_handle-&gt;<a class="code" href="../../d3/d4c/structarchive__handle__t.html#a2ac0fe2ca6c68b2e095555a9d71bf1a6">src_fd</a>, archive_handle-&gt;dpkg__buffer, <a class="code" href="../../d7/d06/getpwent_8c.html#a854352f53b148adc24983a58a1866d66">size</a>);</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;}</div>
<div class="ttc" id="abb__archive_8h_html_ae25c7a207f4fc2f8f58716408ae87771"><div class="ttname"><a href="../../d1/d94/bb__archive_8h.html#ae25c7a207f4fc2f8f58716408ae87771">file_header_t::size</a></div><div class="ttdeci">off_t size</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/bb__archive_8h_source.html#l00038">bb_archive.h:38</a></div></div>
<div class="ttc" id="agetpwent_8c_html_a854352f53b148adc24983a58a1866d66"><div class="ttname"><a href="../../d7/d06/getpwent_8c.html#a854352f53b148adc24983a58a1866d66">size</a></div><div class="ttdeci">static size_t size</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d06/getpwent_8c_source.html#l00006">getpwent.c:6</a></div></div>
<div class="ttc" id="alibbb_8h_html_a99555f16e71f93f23622a8cce1265a5b"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#a99555f16e71f93f23622a8cce1265a5b">xread</a></div><div class="ttdeci">void xread(int fd, void *buf, size_t count) FAST_FUNC</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/de6/read__printf_8c_source.html#l00215">read_printf.c:215</a></div></div>
<div class="ttc" id="astructarchive__handle__t_html_a2ac0fe2ca6c68b2e095555a9d71bf1a6"><div class="ttname"><a href="../../d3/d4c/structarchive__handle__t.html#a2ac0fe2ca6c68b2e095555a9d71bf1a6">archive_handle_t::src_fd</a></div><div class="ttdeci">int src_fd</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/bb__archive_8h_source.html#l00053">bb_archive.h:53</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d1/d94/bb__archive_8h_source.html#l00065">archive_handle_t::file_header</a>, <a class="el" href="../../d1/d94/bb__archive_8h_source.html#l00038">file_header_t::size</a>, <a class="el" href="../../d7/d06/getpwent_8c_source.html#l00006">size</a>, <a class="el" href="../../d1/d94/bb__archive_8h_source.html#l00053">archive_handle_t::src_fd</a>, <a class="el" href="../../d5/de6/read__printf_8c_source.html#l00215">xread()</a>, and <a class="el" href="../../d9/dd6/xfuncs__printf_8c_source.html#l00069">xzalloc()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01548">deb_extract_control_file_to_buffer()</a>.</p>

</div>
</div>
<a id="a6066936b07685a5d470958dca1c3b934"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6066936b07685a5d470958dca1c3b934">&#9670;&nbsp;</a></span>deb_extract_control_file_to_buffer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* deb_extract_control_file_to_buffer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d4c/structarchive__handle__t.html">archive_handle_t</a> *&#160;</td>
          <td class="paramname"><em>ar_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d7/dd7/libbb_8h.html#da/d28/structllist__t">llist_t</a> *&#160;</td>
          <td class="paramname"><em>myaccept</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01548">1548</a> of file <a class="el" href="../../d7/d05/dpkg_8c_source.html">dpkg.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;{</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;    ar_handle-&gt;dpkg__sub_archive-&gt;<a class="code" href="../../d3/d4c/structarchive__handle__t.html#ae627faa2614073869403bffceeb9ac48">action_data</a> = <a class="code" href="../../d7/d05/dpkg_8c.html#a1c37d43af99b6e0797df1d0bd55bf4dd">data_extract_to_buffer</a>;</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;    ar_handle-&gt;dpkg__sub_archive-&gt;<a class="code" href="../../d3/d4c/structarchive__handle__t.html#a3b75b0c5570d2a78763127ebc934cfd5">accept</a> = myaccept;</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;    ar_handle-&gt;dpkg__sub_archive-&gt;<a class="code" href="../../d3/d4c/structarchive__handle__t.html#a40ffc3faa8104696839d3923447479e6">filter</a> = <a class="code" href="../../d4/dd6/filter__accept__list_8c.html#a7369397ac4f5f6d4120eeabcd3aa8c48">filter_accept_list</a>;</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160; </div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;    <a class="code" href="../../d4/db9/unpack__ar__archive_8c.html#ac2e7c5f6132dfc57f8a5b80a68acb184">unpack_ar_archive</a>(ar_handle);</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;    <a class="code" href="../../de/d97/musl_2include_2unistd_8h.html#ae152484c890a24e4d9b4980e7b965be0">close</a>(ar_handle-&gt;<a class="code" href="../../d3/d4c/structarchive__handle__t.html#a2ac0fe2ca6c68b2e095555a9d71bf1a6">src_fd</a>);</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160; </div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;    <span class="keywordflow">return</span> ar_handle-&gt;dpkg__sub_archive-&gt;dpkg__buffer;</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;}</div>
<div class="ttc" id="adpkg_8c_html_a1c37d43af99b6e0797df1d0bd55bf4dd"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#a1c37d43af99b6e0797df1d0bd55bf4dd">data_extract_to_buffer</a></div><div class="ttdeci">static void FAST_FUNC data_extract_to_buffer(archive_handle_t *archive_handle)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l01540">dpkg.c:1540</a></div></div>
<div class="ttc" id="afilter__accept__list_8c_html_a7369397ac4f5f6d4120eeabcd3aa8c48"><div class="ttname"><a href="../../d4/dd6/filter__accept__list_8c.html#a7369397ac4f5f6d4120eeabcd3aa8c48">filter_accept_list</a></div><div class="ttdeci">char FAST_FUNC filter_accept_list(archive_handle_t *archive_handle)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd6/filter__accept__list_8c_source.html#l00013">filter_accept_list.c:13</a></div></div>
<div class="ttc" id="amusl_2include_2unistd_8h_html_ae152484c890a24e4d9b4980e7b965be0"><div class="ttname"><a href="../../de/d97/musl_2include_2unistd_8h.html#ae152484c890a24e4d9b4980e7b965be0">close</a></div><div class="ttdeci">int close(int)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d22/close_8c_source.html#l00013">close.c:13</a></div></div>
<div class="ttc" id="astructarchive__handle__t_html_a3b75b0c5570d2a78763127ebc934cfd5"><div class="ttname"><a href="../../d3/d4c/structarchive__handle__t.html#a3b75b0c5570d2a78763127ebc934cfd5">archive_handle_t::accept</a></div><div class="ttdeci">llist_t * accept</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/bb__archive_8h_source.html#l00058">bb_archive.h:58</a></div></div>
<div class="ttc" id="astructarchive__handle__t_html_a40ffc3faa8104696839d3923447479e6"><div class="ttname"><a href="../../d3/d4c/structarchive__handle__t.html#a40ffc3faa8104696839d3923447479e6">archive_handle_t::filter</a></div><div class="ttdeci">char FAST_FUNC(* filter)(struct archive_handle_t *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/bb__archive_8h_source.html#l00056">bb_archive.h:56</a></div></div>
<div class="ttc" id="astructarchive__handle__t_html_ae627faa2614073869403bffceeb9ac48"><div class="ttname"><a href="../../d3/d4c/structarchive__handle__t.html#ae627faa2614073869403bffceeb9ac48">archive_handle_t::action_data</a></div><div class="ttdeci">void FAST_FUNC(* action_data)(struct archive_handle_t *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/bb__archive_8h_source.html#l00074">bb_archive.h:74</a></div></div>
<div class="ttc" id="aunpack__ar__archive_8c_html_ac2e7c5f6132dfc57f8a5b80a68acb184"><div class="ttname"><a href="../../d4/db9/unpack__ar__archive_8c.html#ac2e7c5f6132dfc57f8a5b80a68acb184">unpack_ar_archive</a></div><div class="ttdeci">void FAST_FUNC unpack_ar_archive(archive_handle_t *ar_archive)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/db9/unpack__ar__archive_8c_source.html#l00009">unpack_ar_archive.c:9</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d1/d94/bb__archive_8h_source.html#l00058">archive_handle_t::accept</a>, <a class="el" href="../../d1/d94/bb__archive_8h_source.html#l00074">archive_handle_t::action_data</a>, <a class="el" href="../../d9/d22/close_8c_source.html#l00013">close()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01540">data_extract_to_buffer()</a>, <a class="el" href="../../d1/d94/bb__archive_8h_source.html#l00056">archive_handle_t::filter</a>, <a class="el" href="../../d4/dd6/filter__accept__list_8c_source.html#l00013">filter_accept_list()</a>, <a class="el" href="../../d1/d94/bb__archive_8h_source.html#l00053">archive_handle_t::src_fd</a>, and <a class="el" href="../../d4/db9/unpack__ar__archive_8c_source.html#l00009">unpack_ar_archive()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01762">dpkg_main()</a>.</p>

</div>
</div>
<a id="a5329b8aa20af0675828c95a90b033704"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5329b8aa20af0675828c95a90b033704">&#9670;&nbsp;</a></span>describe_status()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static const char* describe_status </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>status_num</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00741">741</a> of file <a class="el" href="../../d7/d05/dpkg_8c_source.html">dpkg.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;{</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    <span class="keywordtype">int</span> status_want, status_state;</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d7/d05/dpkg_8c.html#afedd0a411aaf4f39ccf5908554c7699b">status_hashtable</a>[status_num] == <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || <a class="code" href="../../d7/d05/dpkg_8c.html#afedd0a411aaf4f39ccf5908554c7699b">status_hashtable</a>[status_num]-&gt;<a class="code" href="../../d7/d5b/mail_8c.html#a6943d6e2e83995c648644bc0a4d36f53">status</a> == 0)</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&quot;is not installed or flagged to be installed&quot;</span>;</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160; </div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    status_want = <a class="code" href="../../d7/d05/dpkg_8c.html#a7dfbd7f4ae69e4e7c73a932addf7bd6f">get_status</a>(status_num, 1);</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    status_state = <a class="code" href="../../d7/d05/dpkg_8c.html#a7dfbd7f4ae69e4e7c73a932addf7bd6f">get_status</a>(status_num, 3);</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160; </div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    <span class="keywordflow">if</span> (status_state == <a class="code" href="../../d7/d05/dpkg_8c.html#aaf672b0ba190ab9318a1ec77d2411b21">search_name_hashtable</a>(<span class="stringliteral">&quot;installed&quot;</span>)) {</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;        <span class="keywordflow">if</span> (status_want == <a class="code" href="../../d7/d05/dpkg_8c.html#aaf672b0ba190ab9318a1ec77d2411b21">search_name_hashtable</a>(<span class="stringliteral">&quot;install&quot;</span>))</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;is installed&quot;</span>;</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;        <span class="keywordflow">if</span> (status_want == <a class="code" href="../../d7/d05/dpkg_8c.html#aaf672b0ba190ab9318a1ec77d2411b21">search_name_hashtable</a>(<span class="stringliteral">&quot;deinstall&quot;</span>))</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;is marked to be removed&quot;</span>;</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;        <span class="keywordflow">if</span> (status_want == <a class="code" href="../../d7/d05/dpkg_8c.html#aaf672b0ba190ab9318a1ec77d2411b21">search_name_hashtable</a>(<span class="stringliteral">&quot;purge&quot;</span>))</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;is marked to be purged&quot;</span>;</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    }</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    <span class="keywordflow">if</span> (status_want == <a class="code" href="../../d7/d05/dpkg_8c.html#aaf672b0ba190ab9318a1ec77d2411b21">search_name_hashtable</a>(<span class="stringliteral">&quot;unknown&quot;</span>))</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&quot;is in an indeterminate state&quot;</span>;</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    <span class="keywordflow">if</span> (status_want == <a class="code" href="../../d7/d05/dpkg_8c.html#aaf672b0ba190ab9318a1ec77d2411b21">search_name_hashtable</a>(<span class="stringliteral">&quot;install&quot;</span>))</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&quot;is marked to be installed&quot;</span>;</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160; </div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;is not installed or flagged to be installed&quot;</span>;</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;}</div>
<div class="ttc" id="amail_8c_html_a6943d6e2e83995c648644bc0a4d36f53"><div class="ttname"><a href="../../d7/d5b/mail_8c.html#a6943d6e2e83995c648644bc0a4d36f53">status</a></div><div class="ttdeci">#define status</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00692">get_status()</a>, <a class="el" href="../../d9/d14/general_8h_source.html#l00053">NULL</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00189">search_name_hashtable()</a>, <a class="el" href="../../d7/d5b/mail_8c.html#a6943d6e2e83995c648644bc0a4d36f53">status</a>, and <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00132">status_hashtable</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00980">check_deps()</a>.</p>

</div>
</div>
<a id="a0ae0c68f1a2fec735a9e038246a65834"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ae0c68f1a2fec735a9e038246a65834">&#9670;&nbsp;</a></span>dpkg_main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dpkg_main </td>
          <td>(</td>
          <td class="paramtype">int <a class="el" href="../../d9/dd0/bash_2test_8c.html#ad1447518f4372828b8435ae82e48499e">argc</a>&#160;</td>
          <td class="paramname"><em>UNUSED_PARAM</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>argv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01762">1762</a> of file <a class="el" href="../../d7/d05/dpkg_8c_source.html">dpkg.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;{</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#d7/db0/structdeb__file__s">deb_file_t</a> **deb_file = <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#df/dfb/structstatus__node__s">status_node_t</a> *status_node;</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;    <span class="keywordtype">char</span> *str_f;</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d4/dcd/nmeter_8c.html#a6b9d817d08c1417f5c533eb8ad775312">opt</a>;</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;    <span class="keywordtype">int</span> package_num;</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;    <span class="keywordtype">int</span> deb_count = 0;</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;    <span class="keywordtype">int</span> state_status;</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;    <span class="keywordtype">int</span> status_num;</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>;</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;<span class="preprocessor">#if ENABLE_LONG_OPTS</span></div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> dpkg_longopts[] <a class="code" href="../../d2/d21/usage__pod_8c.html#a048289fa87432e63cfa9a627c94be27c">ALIGN1</a> =</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;<span class="comment">// FIXME: we use -C non-compatibly, should be:</span></div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;<span class="comment">// &quot;-C|--audit Check for broken package(s)&quot;</span></div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;        <span class="stringliteral">&quot;configure\0&quot;</span>      <a class="code" href="../../d7/dd7/libbb_8h.html#a587a534dcedde02b34cc09bd2b4840f3">No_argument</a>        <span class="stringliteral">&quot;C&quot;</span></div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;        <span class="stringliteral">&quot;force\0&quot;</span>          <a class="code" href="../../d7/dd7/libbb_8h.html#a1ff7f119ee60491bb8e449f6d8b4cf06">Required_argument</a>  <span class="stringliteral">&quot;F&quot;</span></div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;        <span class="stringliteral">&quot;install\0&quot;</span>        <a class="code" href="../../d7/dd7/libbb_8h.html#a587a534dcedde02b34cc09bd2b4840f3">No_argument</a>        <span class="stringliteral">&quot;i&quot;</span></div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;        <span class="stringliteral">&quot;list\0&quot;</span>           <a class="code" href="../../d7/dd7/libbb_8h.html#a587a534dcedde02b34cc09bd2b4840f3">No_argument</a>        <span class="stringliteral">&quot;l&quot;</span></div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;        <span class="stringliteral">&quot;purge\0&quot;</span>          <a class="code" href="../../d7/dd7/libbb_8h.html#a587a534dcedde02b34cc09bd2b4840f3">No_argument</a>        <span class="stringliteral">&quot;P&quot;</span></div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;        <span class="stringliteral">&quot;remove\0&quot;</span>         <a class="code" href="../../d7/dd7/libbb_8h.html#a587a534dcedde02b34cc09bd2b4840f3">No_argument</a>        <span class="stringliteral">&quot;r&quot;</span></div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;        <span class="stringliteral">&quot;unpack\0&quot;</span>         <a class="code" href="../../d7/dd7/libbb_8h.html#a587a534dcedde02b34cc09bd2b4840f3">No_argument</a>        <span class="stringliteral">&quot;u&quot;</span></div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;        <span class="stringliteral">&quot;force-depends\0&quot;</span>  <a class="code" href="../../d7/dd7/libbb_8h.html#a587a534dcedde02b34cc09bd2b4840f3">No_argument</a>        <span class="stringliteral">&quot;\xff&quot;</span></div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;        <span class="stringliteral">&quot;force-confnew\0&quot;</span>  <a class="code" href="../../d7/dd7/libbb_8h.html#a587a534dcedde02b34cc09bd2b4840f3">No_argument</a>        <span class="stringliteral">&quot;\xfe&quot;</span></div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;        <span class="stringliteral">&quot;force-confold\0&quot;</span>  <a class="code" href="../../d7/dd7/libbb_8h.html#a587a534dcedde02b34cc09bd2b4840f3">No_argument</a>        <span class="stringliteral">&quot;\xfd&quot;</span></div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;        ;</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160; </div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#a39d017e5ed76fae1ae7cec57e0d600c4">INIT_G</a>();</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160; </div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;    <a class="code" href="../../d4/dcd/nmeter_8c.html#a6b9d817d08c1417f5c533eb8ad775312">opt</a> = <a class="code" href="../../d7/dd7/libbb_8h.html#a99d9bd14a37504e4b26bb3f2e8dc287f">getopt32long</a>(<a class="code" href="../../d9/dd0/bash_2test_8c.html#af2efa898e9eed6fe6715279cb1ec35b0">argv</a>, <span class="stringliteral">&quot;CilPruF:&quot;</span>, dpkg_longopts, &amp;str_f);</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;    <a class="code" href="../../d9/dd0/bash_2test_8c.html#af2efa898e9eed6fe6715279cb1ec35b0">argv</a> += <a class="code" href="../../d8/d50/rl_8c.html#ad5e1c16213bbee2d5e8cc363309f418c">optind</a>;</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;    <span class="comment">//if (opt &amp; OPT_configure) ... // -C</span></div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d4/dcd/nmeter_8c.html#a6b9d817d08c1417f5c533eb8ad775312">opt</a> &amp; <a class="code" href="../../d7/d05/dpkg_8c.html#af9bdc3014f3d54c426b6d2df10de4960ab758d0f3ce42cdf9879a5a7bfe84b0b8">OPT_force</a>) { <span class="comment">// -F (--force in official dpkg)</span></div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d5/db0/dynlink_8c.html#af3054366f27929432795c5ae420a5294">strcmp</a>(str_f, <span class="stringliteral">&quot;depends&quot;</span>) == 0)</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;            <a class="code" href="../../d4/dcd/nmeter_8c.html#a6b9d817d08c1417f5c533eb8ad775312">opt</a> |= <a class="code" href="../../d7/d05/dpkg_8c.html#af9bdc3014f3d54c426b6d2df10de4960ab511ac1d38770ba01fb170b7c3a1ad45">OPT_force_ignore_depends</a>;</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/db0/dynlink_8c.html#af3054366f27929432795c5ae420a5294">strcmp</a>(str_f, <span class="stringliteral">&quot;confnew&quot;</span>) == 0)</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;            <a class="code" href="../../d4/dcd/nmeter_8c.html#a6b9d817d08c1417f5c533eb8ad775312">opt</a> |= <a class="code" href="../../d7/d05/dpkg_8c.html#af9bdc3014f3d54c426b6d2df10de4960a2e91f410b167f59c3f63e4acec463dcd">OPT_force_confnew</a>;</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/db0/dynlink_8c.html#af3054366f27929432795c5ae420a5294">strcmp</a>(str_f, <span class="stringliteral">&quot;confold&quot;</span>) == 0)</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;            <a class="code" href="../../d4/dcd/nmeter_8c.html#a6b9d817d08c1417f5c533eb8ad775312">opt</a> |= <a class="code" href="../../d7/d05/dpkg_8c.html#af9bdc3014f3d54c426b6d2df10de4960a430d569961dd1eead60d96beab9c7b23">OPT_force_confold</a>;</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;            <a class="code" href="../../d9/d65/individual_8c.html#a8323cea1cd613c0e2005086064a4b730">bb_show_usage</a>();</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;        <a class="code" href="../../d7/dd7/libbb_8h.html#a55eba7ff429ebe3c6b543eba53c1a5d9">option_mask32</a> = <a class="code" href="../../d4/dcd/nmeter_8c.html#a6b9d817d08c1417f5c533eb8ad775312">opt</a>;</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;    }</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;    <span class="comment">//if (opt &amp; OPT_install) ... // -i</span></div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;    <span class="comment">//if (opt &amp; OPT_list_installed) ... // -l</span></div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;    <span class="comment">//if (opt &amp; OPT_purge) ... // -P</span></div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;    <span class="comment">//if (opt &amp; OPT_remove) ... // -r</span></div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;    <span class="comment">//if (opt &amp; OPT_unpack) ... // -u (--unpack in official dpkg)</span></div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;    <span class="keywordflow">if</span> (!(<a class="code" href="../../d4/dcd/nmeter_8c.html#a6b9d817d08c1417f5c533eb8ad775312">opt</a> &amp; <a class="code" href="../../d7/d05/dpkg_8c.html#af9bdc3014f3d54c426b6d2df10de4960a3ec19c18509a939ddaddcc9e1e9bf12d">OPTMASK_cmd</a>) <span class="comment">/* no cmd */</span></div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;     || ((<a class="code" href="../../d4/dcd/nmeter_8c.html#a6b9d817d08c1417f5c533eb8ad775312">opt</a> &amp; <a class="code" href="../../d7/d05/dpkg_8c.html#af9bdc3014f3d54c426b6d2df10de4960a3ec19c18509a939ddaddcc9e1e9bf12d">OPTMASK_cmd</a>) &amp; ((<a class="code" href="../../d4/dcd/nmeter_8c.html#a6b9d817d08c1417f5c533eb8ad775312">opt</a> &amp; <a class="code" href="../../d7/d05/dpkg_8c.html#af9bdc3014f3d54c426b6d2df10de4960a3ec19c18509a939ddaddcc9e1e9bf12d">OPTMASK_cmd</a>)-1)) <span class="comment">/* more than one cmd */</span></div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;    ) {</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;        <a class="code" href="../../d9/d65/individual_8c.html#a8323cea1cd613c0e2005086064a4b730">bb_show_usage</a>();</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;    }</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160; </div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;<span class="comment">/*  puts(&quot;(Reading database ... xxxxx files and directories installed.)&quot;); */</span></div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#a0fb7c59e83faf18cfbf41a4032008789">index_status_file</a>(<span class="stringliteral">&quot;/var/lib/dpkg/status&quot;</span>);</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160; </div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;    <span class="comment">/* if the list action was given print the installed packages and exit */</span></div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d4/dcd/nmeter_8c.html#a6b9d817d08c1417f5c533eb8ad775312">opt</a> &amp; <a class="code" href="../../d7/d05/dpkg_8c.html#af9bdc3014f3d54c426b6d2df10de4960abb873e9c6b5aff2e9d50688daa7deb8e">OPT_list_installed</a>) {</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;        <a class="code" href="../../d7/d05/dpkg_8c.html#a5114ee06796d1fe1b5fc1f4f08d2f56f">list_packages</a>(<a class="code" href="../../d9/dd0/bash_2test_8c.html#af2efa898e9eed6fe6715279cb1ec35b0">argv</a>[0]); <span class="comment">/* param can be NULL */</span></div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d9/d84/man2html_8c.html#a687984f47d8cce148d1b914d2b79612a">EXIT_SUCCESS</a>;</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;    }</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160; </div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;    <span class="comment">/* Read arguments and store relevant info in structs */</span></div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;    <span class="keywordflow">while</span> (*<a class="code" href="../../d9/dd0/bash_2test_8c.html#af2efa898e9eed6fe6715279cb1ec35b0">argv</a>) {</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;        <span class="comment">/* deb_count = nb_elem - 1 and we need nb_elem + 1 to allocate terminal node [NULL pointer] */</span></div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;        deb_file = <a class="code" href="../../d7/dd7/libbb_8h.html#a098c321a7116d4a59f70859848fae417">xrealloc_vector</a>(deb_file, 2, deb_count);</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;        deb_file[deb_count] = <a class="code" href="../../d7/dd7/libbb_8h.html#a6b9d12af476b8fa4b9de87028b0ac27c">xzalloc</a>(<span class="keyword">sizeof</span>(deb_file[0][0]));</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d4/dcd/nmeter_8c.html#a6b9d817d08c1417f5c533eb8ad775312">opt</a> &amp; (<a class="code" href="../../d7/d05/dpkg_8c.html#af9bdc3014f3d54c426b6d2df10de4960aa37cdd87ad309d1aa848162c27dd4929">OPT_install</a> | <a class="code" href="../../d7/d05/dpkg_8c.html#af9bdc3014f3d54c426b6d2df10de4960abdd0e0540791ff9a47681129c2c7bb0d">OPT_unpack</a>)) {</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;            <span class="comment">/* -i/-u: require filename */</span></div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;            <a class="code" href="../../d3/d4c/structarchive__handle__t.html">archive_handle_t</a> *archive_handle;</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;            <a class="code" href="../../d7/dd7/libbb_8h.html#da/d28/structllist__t">llist_t</a> *control_list = <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160; </div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;            <span class="comment">/* Extract the control file */</span></div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;            <a class="code" href="../../d7/dd7/libbb_8h.html#ac1428a8eb5f3de46969e7d3bfa8be3c3">llist_add_to</a>(&amp;control_list, (<span class="keywordtype">char</span>*)<span class="stringliteral">&quot;./control&quot;</span>);</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;            archive_handle = <a class="code" href="../../d7/d05/dpkg_8c.html#a0d1519b520ab1d241ba0b5ddb1b8a5f3">init_archive_deb_ar</a>(<a class="code" href="../../d9/dd0/bash_2test_8c.html#af2efa898e9eed6fe6715279cb1ec35b0">argv</a>[0]);</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;            <a class="code" href="../../d7/d05/dpkg_8c.html#ac805a8585623c4f935c79126f2e9a44c">init_archive_deb_control</a>(archive_handle);</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;            deb_file[deb_count]-&gt;<a class="code" href="../../d7/d05/dpkg_8c.html#a450aec906625483d7a6890b58ebdbd47">control_file</a> = <a class="code" href="../../d7/d05/dpkg_8c.html#a6066936b07685a5d470958dca1c3b934">deb_extract_control_file_to_buffer</a>(archive_handle, control_list);</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;            <span class="keywordflow">if</span> (deb_file[deb_count]-&gt;control_file == <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;                <a class="code" href="../../d7/dd7/libbb_8h.html#aa7873f1b32526ae11612363558a2aa90">bb_simple_error_msg_and_die</a>(<span class="stringliteral">&quot;can&#39;t extract control file&quot;</span>);</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;            }</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;            deb_file[deb_count]-&gt;<a class="code" href="../../d7/d05/dpkg_8c.html#ae1175c713c9cc5ecaab5ecb0fc43d3ee">filename</a> = <a class="code" href="../../dc/dd1/pathchk_8c.html#ac7a701bce03d77bad6b57003d0fe73df">xstrdup</a>(<a class="code" href="../../d9/dd0/bash_2test_8c.html#af2efa898e9eed6fe6715279cb1ec35b0">argv</a>[0]);</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;            package_num = <a class="code" href="../../d7/d05/dpkg_8c.html#a4e47e2f3e91e55bbb66a30c7272f20c7">fill_package_struct</a>(deb_file[deb_count]-&gt;control_file);</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160; </div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;            <span class="keywordflow">if</span> (package_num == -1) {</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;                <a class="code" href="../../d7/dd7/libbb_8h.html#aecf5d6000202e19c5831942dd4c87a87">bb_error_msg</a>(<span class="stringliteral">&quot;invalid control file in %s&quot;</span>, <a class="code" href="../../d9/dd0/bash_2test_8c.html#af2efa898e9eed6fe6715279cb1ec35b0">argv</a>[0]);</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;                <a class="code" href="../../d9/dd0/bash_2test_8c.html#af2efa898e9eed6fe6715279cb1ec35b0">argv</a>++;</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;            }</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;            deb_file[deb_count]-&gt;<a class="code" href="../../d7/d05/dpkg_8c.html#a369614c3e79fae15cf9ccd0c7b593048">package</a> = (unsigned) package_num;</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160; </div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;            <span class="comment">/* Add the package to the status hashtable */</span></div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d4/dcd/nmeter_8c.html#a6b9d817d08c1417f5c533eb8ad775312">opt</a> &amp; (<a class="code" href="../../d7/d05/dpkg_8c.html#af9bdc3014f3d54c426b6d2df10de4960abdd0e0540791ff9a47681129c2c7bb0d">OPT_unpack</a> | <a class="code" href="../../d7/d05/dpkg_8c.html#af9bdc3014f3d54c426b6d2df10de4960aa37cdd87ad309d1aa848162c27dd4929">OPT_install</a>)) {</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;                <span class="comment">/* Try and find a currently installed version of this package */</span></div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;                status_num = <a class="code" href="../../d7/d05/dpkg_8c.html#a82afa66172a836357ebd323585c651cd">search_status_hashtable</a>(<a class="code" href="../../d7/d05/dpkg_8c.html#aa77ba14cd48e018786c6b752ed1d11b0">name_hashtable</a>[<a class="code" href="../../d7/d05/dpkg_8c.html#a3d27c89e1462f204c221e2cf5c9233d6">package_hashtable</a>[deb_file[deb_count]-&gt;package]-&gt;name]);</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;                <span class="comment">/* If no previous entry was found initialise a new entry */</span></div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../d7/d05/dpkg_8c.html#afedd0a411aaf4f39ccf5908554c7699b">status_hashtable</a>[status_num] == <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;                 || <a class="code" href="../../d7/d05/dpkg_8c.html#afedd0a411aaf4f39ccf5908554c7699b">status_hashtable</a>[status_num]-&gt;<a class="code" href="../../d7/d5b/mail_8c.html#a6943d6e2e83995c648644bc0a4d36f53">status</a> == 0</div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;                ) {</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;                    status_node = <a class="code" href="../../db/d0a/tre_8h.html#a6af5faec3f9662b20ffc9903f923dec0">xmalloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../d7/d05/dpkg_8c.html#df/dfb/structstatus__node__s">status_node_t</a>));</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;                    status_node-&gt;<a class="code" href="../../d7/d05/dpkg_8c.html#ab2079977df3552c10bfec65a723218f5">package</a> = deb_file[deb_count]-&gt;<a class="code" href="../../d7/d05/dpkg_8c.html#a369614c3e79fae15cf9ccd0c7b593048">package</a>;</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;                    <span class="comment">/* reinstreq isn&#39;t changed to &quot;ok&quot; until the package control info</span></div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;<span class="comment">                     * is written to the status file*/</span></div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;                    status_node-&gt;<a class="code" href="../../d7/d05/dpkg_8c.html#a9fe4fcae3d0f56d30a35a008dee139cb">status</a> = <a class="code" href="../../d7/d05/dpkg_8c.html#aaf672b0ba190ab9318a1ec77d2411b21">search_name_hashtable</a>(<span class="stringliteral">&quot;install reinstreq not-installed&quot;</span>);</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;                    <a class="code" href="../../d7/d05/dpkg_8c.html#afedd0a411aaf4f39ccf5908554c7699b">status_hashtable</a>[status_num] = status_node;</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;                    <a class="code" href="../../d7/d05/dpkg_8c.html#aaaa2b787afd11b42a445289c9256208e">set_status</a>(status_num, <span class="stringliteral">&quot;install&quot;</span>, 1);</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;                    <a class="code" href="../../d7/d05/dpkg_8c.html#aaaa2b787afd11b42a445289c9256208e">set_status</a>(status_num, <span class="stringliteral">&quot;reinstreq&quot;</span>, 2);</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;                }</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;            }</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d4/dcd/nmeter_8c.html#a6b9d817d08c1417f5c533eb8ad775312">opt</a> &amp; (<a class="code" href="../../d7/d05/dpkg_8c.html#af9bdc3014f3d54c426b6d2df10de4960af5b4d9abde1d741a8289b96a9497ebd2">OPT_configure</a> | <a class="code" href="../../d7/d05/dpkg_8c.html#af9bdc3014f3d54c426b6d2df10de4960a20aa3982bcd38e4c081658cc7c5d500b">OPT_purge</a> | <a class="code" href="../../d7/d05/dpkg_8c.html#af9bdc3014f3d54c426b6d2df10de4960ab839eada36a860bf30a4670d7313c7df">OPT_remove</a>)) {</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;            <span class="comment">/* -C/-p/-r: require package name */</span></div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;            deb_file[deb_count]-&gt;<a class="code" href="../../d7/d05/dpkg_8c.html#a369614c3e79fae15cf9ccd0c7b593048">package</a> = <a class="code" href="../../d7/d05/dpkg_8c.html#a32c2bcae0237f8822b6515ea3adc7c00">search_package_hashtable</a>(</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;                    <a class="code" href="../../d7/d05/dpkg_8c.html#aaf672b0ba190ab9318a1ec77d2411b21">search_name_hashtable</a>(<a class="code" href="../../d9/dd0/bash_2test_8c.html#af2efa898e9eed6fe6715279cb1ec35b0">argv</a>[0]),</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;                    <a class="code" href="../../d7/d05/dpkg_8c.html#aaf672b0ba190ab9318a1ec77d2411b21">search_name_hashtable</a>(<span class="stringliteral">&quot;ANY&quot;</span>), <a class="code" href="../../d7/d05/dpkg_8c.html#ac654d21de7f6a409f1c1fdec91f95112adae6d6279d74c603c708541aec479b1d">VER_ANY</a>);</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d7/d05/dpkg_8c.html#a3d27c89e1462f204c221e2cf5c9233d6">package_hashtable</a>[deb_file[deb_count]-&gt;package] == <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;                <a class="code" href="../../d7/dd7/libbb_8h.html#a1992b68ae7d01f7da91e31e351ca3b33">bb_error_msg_and_die</a>(<span class="stringliteral">&quot;package %s is uninstalled or unknown&quot;</span>, <a class="code" href="../../d9/dd0/bash_2test_8c.html#af2efa898e9eed6fe6715279cb1ec35b0">argv</a>[0]);</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;            }</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;            package_num = deb_file[deb_count]-&gt;<a class="code" href="../../d7/d05/dpkg_8c.html#a369614c3e79fae15cf9ccd0c7b593048">package</a>;</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;            status_num = <a class="code" href="../../d7/d05/dpkg_8c.html#a82afa66172a836357ebd323585c651cd">search_status_hashtable</a>(<a class="code" href="../../d7/d05/dpkg_8c.html#aa77ba14cd48e018786c6b752ed1d11b0">name_hashtable</a>[<a class="code" href="../../d7/d05/dpkg_8c.html#a3d27c89e1462f204c221e2cf5c9233d6">package_hashtable</a>[package_num]-&gt;name]);</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;            state_status = <a class="code" href="../../d7/d05/dpkg_8c.html#a7dfbd7f4ae69e4e7c73a932addf7bd6f">get_status</a>(status_num, 3);</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160; </div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;            <span class="comment">/* check package status is &quot;installed&quot; */</span></div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d4/dcd/nmeter_8c.html#a6b9d817d08c1417f5c533eb8ad775312">opt</a> &amp; <a class="code" href="../../d7/d05/dpkg_8c.html#af9bdc3014f3d54c426b6d2df10de4960ab839eada36a860bf30a4670d7313c7df">OPT_remove</a>) {</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../d5/db0/dynlink_8c.html#af3054366f27929432795c5ae420a5294">strcmp</a>(<a class="code" href="../../d7/d05/dpkg_8c.html#aa77ba14cd48e018786c6b752ed1d11b0">name_hashtable</a>[state_status], <span class="stringliteral">&quot;not-installed&quot;</span>) == 0</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;                 || <a class="code" href="../../d5/db0/dynlink_8c.html#af3054366f27929432795c5ae420a5294">strcmp</a>(<a class="code" href="../../d7/d05/dpkg_8c.html#aa77ba14cd48e018786c6b752ed1d11b0">name_hashtable</a>[state_status], <span class="stringliteral">&quot;config-files&quot;</span>) == 0</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;                ) {</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;                    <a class="code" href="../../d7/dd7/libbb_8h.html#a1992b68ae7d01f7da91e31e351ca3b33">bb_error_msg_and_die</a>(<span class="stringliteral">&quot;%s is already removed&quot;</span>, <a class="code" href="../../d7/d05/dpkg_8c.html#aa77ba14cd48e018786c6b752ed1d11b0">name_hashtable</a>[<a class="code" href="../../d7/d05/dpkg_8c.html#a3d27c89e1462f204c221e2cf5c9233d6">package_hashtable</a>[package_num]-&gt;name]);</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;                }</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;                <a class="code" href="../../d7/d05/dpkg_8c.html#aaaa2b787afd11b42a445289c9256208e">set_status</a>(status_num, <span class="stringliteral">&quot;deinstall&quot;</span>, 1);</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d4/dcd/nmeter_8c.html#a6b9d817d08c1417f5c533eb8ad775312">opt</a> &amp; <a class="code" href="../../d7/d05/dpkg_8c.html#af9bdc3014f3d54c426b6d2df10de4960a20aa3982bcd38e4c081658cc7c5d500b">OPT_purge</a>) {</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;                <span class="comment">/* if package status is &quot;conf-files&quot; then its ok */</span></div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../d5/db0/dynlink_8c.html#af3054366f27929432795c5ae420a5294">strcmp</a>(<a class="code" href="../../d7/d05/dpkg_8c.html#aa77ba14cd48e018786c6b752ed1d11b0">name_hashtable</a>[state_status], <span class="stringliteral">&quot;not-installed&quot;</span>) == 0) {</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;                    <a class="code" href="../../d7/dd7/libbb_8h.html#a1992b68ae7d01f7da91e31e351ca3b33">bb_error_msg_and_die</a>(<span class="stringliteral">&quot;%s is already purged&quot;</span>, <a class="code" href="../../d7/d05/dpkg_8c.html#aa77ba14cd48e018786c6b752ed1d11b0">name_hashtable</a>[<a class="code" href="../../d7/d05/dpkg_8c.html#a3d27c89e1462f204c221e2cf5c9233d6">package_hashtable</a>[package_num]-&gt;name]);</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;                }</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;                <a class="code" href="../../d7/d05/dpkg_8c.html#aaaa2b787afd11b42a445289c9256208e">set_status</a>(status_num, <span class="stringliteral">&quot;purge&quot;</span>, 1);</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;            }</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;        }</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;        deb_count++;</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;        <a class="code" href="../../d9/dd0/bash_2test_8c.html#af2efa898e9eed6fe6715279cb1ec35b0">argv</a>++;</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;    }</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;    <span class="keywordflow">if</span> (!deb_count)</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;        <a class="code" href="../../d7/dd7/libbb_8h.html#aa7873f1b32526ae11612363558a2aa90">bb_simple_error_msg_and_die</a>(<span class="stringliteral">&quot;no package files specified&quot;</span>);</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;    deb_file[deb_count] = <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160; </div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;    <span class="comment">/* Check that the deb file arguments are installable */</span></div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;    <span class="keywordflow">if</span> (!(<a class="code" href="../../d4/dcd/nmeter_8c.html#a6b9d817d08c1417f5c533eb8ad775312">opt</a> &amp; <a class="code" href="../../d7/d05/dpkg_8c.html#af9bdc3014f3d54c426b6d2df10de4960ab511ac1d38770ba01fb170b7c3a1ad45">OPT_force_ignore_depends</a>)) {</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d05/dpkg_8c.html#ab92ad59b3973652ac034175b60d89f7b">check_deps</a>(deb_file, 0 <span class="comment">/*, deb_count*/</span>)) {</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;            <a class="code" href="../../d7/dd7/libbb_8h.html#aa7873f1b32526ae11612363558a2aa90">bb_simple_error_msg_and_die</a>(<span class="stringliteral">&quot;dependency check failed&quot;</span>);</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;        }</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;    }</div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160; </div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;    <span class="comment">/* TODO: install or remove packages in the correct dependency order */</span></div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> = 0; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> &lt; deb_count; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>++) {</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;        <span class="comment">/* Remove or purge packages */</span></div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d4/dcd/nmeter_8c.html#a6b9d817d08c1417f5c533eb8ad775312">opt</a> &amp; <a class="code" href="../../d7/d05/dpkg_8c.html#af9bdc3014f3d54c426b6d2df10de4960ab839eada36a860bf30a4670d7313c7df">OPT_remove</a>) {</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;            <a class="code" href="../../d7/d05/dpkg_8c.html#a984e18ca7078013aad4b5c3c396093f3">remove_package</a>(deb_file[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>]-&gt;package, 1);</div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;        }</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d4/dcd/nmeter_8c.html#a6b9d817d08c1417f5c533eb8ad775312">opt</a> &amp; <a class="code" href="../../d7/d05/dpkg_8c.html#af9bdc3014f3d54c426b6d2df10de4960a20aa3982bcd38e4c081658cc7c5d500b">OPT_purge</a>) {</div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;            <a class="code" href="../../d7/d05/dpkg_8c.html#a1670583abdc4238b66159573d989030c">purge_package</a>(deb_file[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>]-&gt;package);</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;        }</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d4/dcd/nmeter_8c.html#a6b9d817d08c1417f5c533eb8ad775312">opt</a> &amp; <a class="code" href="../../d7/d05/dpkg_8c.html#af9bdc3014f3d54c426b6d2df10de4960abdd0e0540791ff9a47681129c2c7bb0d">OPT_unpack</a>) {</div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;            <a class="code" href="../../d7/d05/dpkg_8c.html#ab5bf09ab1abe8ee6966ef7aee0bf5323">unpack_package</a>(deb_file[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>]);</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;        }</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d4/dcd/nmeter_8c.html#a6b9d817d08c1417f5c533eb8ad775312">opt</a> &amp; <a class="code" href="../../d7/d05/dpkg_8c.html#af9bdc3014f3d54c426b6d2df10de4960aa37cdd87ad309d1aa848162c27dd4929">OPT_install</a>) {</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;            <a class="code" href="../../d7/d05/dpkg_8c.html#ab5bf09ab1abe8ee6966ef7aee0bf5323">unpack_package</a>(deb_file[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>]);</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;            <span class="comment">/* package is configured in second pass below */</span></div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;        }</div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d4/dcd/nmeter_8c.html#a6b9d817d08c1417f5c533eb8ad775312">opt</a> &amp; <a class="code" href="../../d7/d05/dpkg_8c.html#af9bdc3014f3d54c426b6d2df10de4960af5b4d9abde1d741a8289b96a9497ebd2">OPT_configure</a>) {</div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;            <a class="code" href="../../d7/d05/dpkg_8c.html#a551722f8081b2fea692e0e6b2aebcd58">configure_package</a>(deb_file[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>]);</div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;        }</div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;    }</div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;    <span class="comment">/* configure installed packages */</span></div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d4/dcd/nmeter_8c.html#a6b9d817d08c1417f5c533eb8ad775312">opt</a> &amp; <a class="code" href="../../d7/d05/dpkg_8c.html#af9bdc3014f3d54c426b6d2df10de4960aa37cdd87ad309d1aa848162c27dd4929">OPT_install</a>) {</div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> = 0; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> &lt; deb_count; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>++)</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;            <a class="code" href="../../d7/d05/dpkg_8c.html#a551722f8081b2fea692e0e6b2aebcd58">configure_package</a>(deb_file[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>]);</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;    }</div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160; </div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#afe757091643ab21eea32dd533da89f7f">write_status_file</a>(deb_file);</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160; </div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;    <span class="keywordflow">if</span> (ENABLE_FEATURE_CLEAN_UP) {</div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> = 0; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> &lt; deb_count; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>++) {</div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;            <a class="code" href="../../d5/db0/dynlink_8c.html#a2c6efa7679f8cd9f61af96e105017560">free</a>(deb_file[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>]-&gt;control_file);</div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;            <a class="code" href="../../d5/db0/dynlink_8c.html#a2c6efa7679f8cd9f61af96e105017560">free</a>(deb_file[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>]-&gt;<a class="code" href="../../d4/daf/flashcp_8c.html#abe2fedc3a963bcd397037e60e16adabb">filename</a>);</div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;            <a class="code" href="../../d5/db0/dynlink_8c.html#a2c6efa7679f8cd9f61af96e105017560">free</a>(deb_file[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>]);</div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;        }</div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160; </div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;        <a class="code" href="../../d5/db0/dynlink_8c.html#a2c6efa7679f8cd9f61af96e105017560">free</a>(deb_file);</div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160; </div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> = 0; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> &lt; <a class="code" href="../../d7/d05/dpkg_8c.html#a34b2c25dfc0d68980864991d97671bbc">NAME_HASH_PRIME</a>; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>++) {</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;            <a class="code" href="../../d5/db0/dynlink_8c.html#a2c6efa7679f8cd9f61af96e105017560">free</a>(<a class="code" href="../../d7/d05/dpkg_8c.html#aa77ba14cd48e018786c6b752ed1d11b0">name_hashtable</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>]);</div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;        }</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160; </div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> = 0; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> &lt; <a class="code" href="../../d7/d05/dpkg_8c.html#a69b135c7de1bd4344e12676bb1946fa1">PACKAGE_HASH_PRIME</a>; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>++) {</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;            <a class="code" href="../../d7/d05/dpkg_8c.html#a39a641a45b46c2042e33297fdf86fd42">free_package</a>(<a class="code" href="../../d7/d05/dpkg_8c.html#a3d27c89e1462f204c221e2cf5c9233d6">package_hashtable</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>]);</div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;        }</div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160; </div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> = 0; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> &lt; <a class="code" href="../../d7/d05/dpkg_8c.html#adb240e823a9482d83cd02f3340976265">STATUS_HASH_PRIME</a>; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>++) {</div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;            <a class="code" href="../../d5/db0/dynlink_8c.html#a2c6efa7679f8cd9f61af96e105017560">free</a>(<a class="code" href="../../d7/d05/dpkg_8c.html#afedd0a411aaf4f39ccf5908554c7699b">status_hashtable</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>]);</div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;        }</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;    }</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160; </div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d9/d84/man2html_8c.html#a687984f47d8cce148d1b914d2b79612a">EXIT_SUCCESS</a>;</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;}</div>
<div class="ttc" id="abash_2test_8c_html_af2efa898e9eed6fe6715279cb1ec35b0"><div class="ttname"><a href="../../d9/dd0/bash_2test_8c.html#af2efa898e9eed6fe6715279cb1ec35b0">argv</a></div><div class="ttdeci">static char ** argv</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd0/bash_2test_8c_source.html#l00110">test.c:110</a></div></div>
<div class="ttc" id="adpkg_8c_html_a0d1519b520ab1d241ba0b5ddb1b8a5f3"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#a0d1519b520ab1d241ba0b5ddb1b8a5f3">init_archive_deb_ar</a></div><div class="ttdeci">static archive_handle_t * init_archive_deb_ar(const char *filename)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l01477">dpkg.c:1477</a></div></div>
<div class="ttc" id="adpkg_8c_html_a0fb7c59e83faf18cfbf41a4032008789"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#a0fb7c59e83faf18cfbf41a4032008789">index_status_file</a></div><div class="ttdeci">static void index_status_file(const char *filename)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00766">dpkg.c:766</a></div></div>
<div class="ttc" id="adpkg_8c_html_a1670583abdc4238b66159573d989030c"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#a1670583abdc4238b66159573d989030c">purge_package</a></div><div class="ttdeci">static void purge_package(const unsigned package_num)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l01435">dpkg.c:1435</a></div></div>
<div class="ttc" id="adpkg_8c_html_a34b2c25dfc0d68980864991d97671bbc"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#a34b2c25dfc0d68980864991d97671bbc">NAME_HASH_PRIME</a></div><div class="ttdeci">#define NAME_HASH_PRIME</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00088">dpkg.c:88</a></div></div>
<div class="ttc" id="adpkg_8c_html_a39a641a45b46c2042e33297fdf86fd42"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#a39a641a45b46c2042e33297fdf86fd42">free_package</a></div><div class="ttdeci">static void free_package(common_node_t *node)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00521">dpkg.c:521</a></div></div>
<div class="ttc" id="adpkg_8c_html_a39d017e5ed76fae1ae7cec57e0d600c4"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#a39d017e5ed76fae1ae7cec57e0d600c4">INIT_G</a></div><div class="ttdeci">#define INIT_G()</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00133">dpkg.c:133</a></div></div>
<div class="ttc" id="adpkg_8c_html_a450aec906625483d7a6890b58ebdbd47"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#a450aec906625483d7a6890b58ebdbd47">deb_file_s::control_file</a></div><div class="ttdeci">char * control_file</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00163">dpkg.c:163</a></div></div>
<div class="ttc" id="adpkg_8c_html_a4e47e2f3e91e55bbb66a30c7272f20c7"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#a4e47e2f3e91e55bbb66a30c7272f20c7">fill_package_struct</a></div><div class="ttdeci">static unsigned fill_package_struct(char *control_buffer)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00618">dpkg.c:618</a></div></div>
<div class="ttc" id="adpkg_8c_html_a5114ee06796d1fe1b5fc1f4f08d2f56f"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#a5114ee06796d1fe1b5fc1f4f08d2f56f">list_packages</a></div><div class="ttdeci">static void list_packages(const char *pattern)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l01345">dpkg.c:1345</a></div></div>
<div class="ttc" id="adpkg_8c_html_a551722f8081b2fea692e0e6b2aebcd58"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#a551722f8081b2fea692e0e6b2aebcd58">configure_package</a></div><div class="ttdeci">static void configure_package(deb_file_t *deb_file)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l01744">dpkg.c:1744</a></div></div>
<div class="ttc" id="adpkg_8c_html_a6066936b07685a5d470958dca1c3b934"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#a6066936b07685a5d470958dca1c3b934">deb_extract_control_file_to_buffer</a></div><div class="ttdeci">static char * deb_extract_control_file_to_buffer(archive_handle_t *ar_handle, llist_t *myaccept)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l01548">dpkg.c:1548</a></div></div>
<div class="ttc" id="adpkg_8c_html_a984e18ca7078013aad4b5c3c396093f3"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#a984e18ca7078013aad4b5c3c396093f3">remove_package</a></div><div class="ttdeci">static void remove_package(const unsigned package_num, int noisy)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l01384">dpkg.c:1384</a></div></div>
<div class="ttc" id="adpkg_8c_html_a9fe4fcae3d0f56d30a35a008dee139cb"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#a9fe4fcae3d0f56d30a35a008dee139cb">status_node_s::status</a></div><div class="ttdeci">unsigned status</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00119">dpkg.c:119</a></div></div>
<div class="ttc" id="adpkg_8c_html_ab2079977df3552c10bfec65a723218f5"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#ab2079977df3552c10bfec65a723218f5">status_node_s::package</a></div><div class="ttdeci">unsigned package</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00118">dpkg.c:118</a></div></div>
<div class="ttc" id="adpkg_8c_html_ab5bf09ab1abe8ee6966ef7aee0bf5323"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#ab5bf09ab1abe8ee6966ef7aee0bf5323">unpack_package</a></div><div class="ttdeci">static void unpack_package(deb_file_t *deb_file)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l01654">dpkg.c:1654</a></div></div>
<div class="ttc" id="adpkg_8c_html_ab92ad59b3973652ac034175b60d89f7b"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#ab92ad59b3973652ac034175b60d89f7b">check_deps</a></div><div class="ttdeci">static int check_deps(deb_file_t **deb_file, int deb_start)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00980">dpkg.c:980</a></div></div>
<div class="ttc" id="adpkg_8c_html_ac805a8585623c4f935c79126f2e9a44c"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#ac805a8585623c4f935c79126f2e9a44c">init_archive_deb_control</a></div><div class="ttdeci">static void init_archive_deb_control(archive_handle_t *ar_handle)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l01489">dpkg.c:1489</a></div></div>
<div class="ttc" id="adpkg_8c_html_adb240e823a9482d83cd02f3340976265"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#adb240e823a9482d83cd02f3340976265">STATUS_HASH_PRIME</a></div><div class="ttdeci">#define STATUS_HASH_PRIME</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00116">dpkg.c:116</a></div></div>
<div class="ttc" id="adpkg_8c_html_ae1175c713c9cc5ecaab5ecb0fc43d3ee"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#ae1175c713c9cc5ecaab5ecb0fc43d3ee">deb_file_s::filename</a></div><div class="ttdeci">char * filename</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00164">dpkg.c:164</a></div></div>
<div class="ttc" id="adpkg_8c_html_afe757091643ab21eea32dd533da89f7f"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#afe757091643ab21eea32dd533da89f7f">write_status_file</a></div><div class="ttdeci">static void write_status_file(deb_file_t **deb_file)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00814">dpkg.c:814</a></div></div>
<div class="ttc" id="adpkg_8c_html_d7/db0/structdeb__file__s"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#d7/db0/structdeb__file__s">deb_file_s</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00162">dpkg.c:162</a></div></div>
<div class="ttc" id="adpkg_8c_html_df/dfb/structstatus__node__s"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#df/dfb/structstatus__node__s">status_node_s</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00117">dpkg.c:117</a></div></div>
<div class="ttc" id="aindividual_8c_html_a8323cea1cd613c0e2005086064a4b730"><div class="ttname"><a href="../../d9/d65/individual_8c.html#a8323cea1cd613c0e2005086064a4b730">bb_show_usage</a></div><div class="ttdeci">void bb_show_usage(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d65/individual_8c_source.html#l00020">individual.c:20</a></div></div>
<div class="ttc" id="alibbb_8h_html_a1ff7f119ee60491bb8e449f6d8b4cf06"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#a1ff7f119ee60491bb8e449f6d8b4cf06">Required_argument</a></div><div class="ttdeci">#define Required_argument</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dd7/libbb_8h_source.html#l01349">libbb.h:1349</a></div></div>
<div class="ttc" id="alibbb_8h_html_a55eba7ff429ebe3c6b543eba53c1a5d9"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#a55eba7ff429ebe3c6b543eba53c1a5d9">option_mask32</a></div><div class="ttdeci">uint32_t option_mask32</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d7f/getopt32_8c_source.html#l00318">getopt32.c:318</a></div></div>
<div class="ttc" id="alibbb_8h_html_a587a534dcedde02b34cc09bd2b4840f3"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#a587a534dcedde02b34cc09bd2b4840f3">No_argument</a></div><div class="ttdeci">#define No_argument</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dd7/libbb_8h_source.html#l01348">libbb.h:1348</a></div></div>
<div class="ttc" id="alibbb_8h_html_a99d9bd14a37504e4b26bb3f2e8dc287f"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#a99d9bd14a37504e4b26bb3f2e8dc287f">getopt32long</a></div><div class="ttdeci">#define getopt32long(argv, optstring, longopts,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dd7/libbb_8h_source.html#l01354">libbb.h:1354</a></div></div>
<div class="ttc" id="alibbb_8h_html_aecf5d6000202e19c5831942dd4c87a87"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#aecf5d6000202e19c5831942dd4c87a87">bb_error_msg</a></div><div class="ttdeci">void bb_error_msg(const char *s,...) __attribute__((format(printf</div></div>
<div class="ttc" id="alibbb_8h_html_da/d28/structllist__t"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#da/d28/structllist__t">llist_t</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dd7/libbb_8h_source.html#l01383">libbb.h:1383</a></div></div>
<div class="ttc" id="aman2html_8c_html_a687984f47d8cce148d1b914d2b79612a"><div class="ttname"><a href="../../d9/d84/man2html_8c.html#a687984f47d8cce148d1b914d2b79612a">EXIT_SUCCESS</a></div><div class="ttdeci">#define EXIT_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d84/man2html_8c_source.html#l00095">man2html.c:95</a></div></div>
<div class="ttc" id="anmeter_8c_html_a6b9d817d08c1417f5c533eb8ad775312"><div class="ttname"><a href="../../d4/dcd/nmeter_8c.html#a6b9d817d08c1417f5c533eb8ad775312">opt</a></div><div class="ttdeci">char opt</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dcd/nmeter_8c_source.html#l00626">nmeter.c:626</a></div></div>
<div class="ttc" id="arl_8c_html_ad5e1c16213bbee2d5e8cc363309f418c"><div class="ttname"><a href="../../d8/d50/rl_8c.html#ad5e1c16213bbee2d5e8cc363309f418c">optind</a></div><div class="ttdeci">int optind</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dee/musl_2src_2misc_2getopt_8c_source.html#l00011">getopt.c:11</a></div></div>
<div class="ttc" id="astructarchive__handle__t_html"><div class="ttname"><a href="../../d3/d4c/structarchive__handle__t.html">archive_handle_t</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/bb__archive_8h_source.html#l00048">bb_archive.h:48</a></div></div>
<div class="ttc" id="ausage__pod_8c_html_a048289fa87432e63cfa9a627c94be27c"><div class="ttname"><a href="../../d2/d21/usage__pod_8c.html#a048289fa87432e63cfa9a627c94be27c">ALIGN1</a></div><div class="ttdeci">#define ALIGN1</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d21/usage__pod_8c_source.html#l00016">usage_pod.c:16</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d2/d21/usage__pod_8c_source.html#l00016">ALIGN1</a>, <a class="el" href="../../d9/dd0/bash_2test_8c_source.html#l00110">argv</a>, <a class="el" href="../../d7/dd7/libbb_8h.html#aecf5d6000202e19c5831942dd4c87a87">bb_error_msg()</a>, <a class="el" href="../../d7/dd7/libbb_8h.html#a1992b68ae7d01f7da91e31e351ca3b33">bb_error_msg_and_die()</a>, <a class="el" href="../../d9/d65/individual_8c_source.html#l00020">bb_show_usage()</a>, <a class="el" href="../../d5/db5/verror__msg_8c_source.html#l00212">bb_simple_error_msg_and_die()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00980">check_deps()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01744">configure_package()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00163">deb_file_s::control_file</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01548">deb_extract_control_file_to_buffer()</a>, <a class="el" href="../../d9/d84/man2html_8c_source.html#l00095">EXIT_SUCCESS</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00164">deb_file_s::filename</a>, <a class="el" href="../../d4/daf/flashcp_8c.html#abe2fedc3a963bcd397037e60e16adabb">filename</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00618">fill_package_struct()</a>, <a class="el" href="../../d5/db0/dynlink_8c_source.html#l00036">free</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00521">free_package()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00692">get_status()</a>, <a class="el" href="../../d7/dd7/libbb_8h_source.html#l01354">getopt32long</a>, <a class="el" href="../../dd/d71/gettextP_8h_source.html#l00074">i</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00766">index_status_file()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01477">init_archive_deb_ar()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01489">init_archive_deb_control()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00133">INIT_G</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01345">list_packages()</a>, <a class="el" href="../../d4/de1/llist_8c_source.html#l00015">llist_add_to()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00088">NAME_HASH_PRIME</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00130">name_hashtable</a>, <a class="el" href="../../d7/dd7/libbb_8h_source.html#l01348">No_argument</a>, <a class="el" href="../../d9/d14/general_8h_source.html#l00053">NULL</a>, <a class="el" href="../../d4/dcd/nmeter_8c_source.html#l00626">opt</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01640">OPT_configure</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01648">OPT_force</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01650">OPT_force_confnew</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01651">OPT_force_confold</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01649">OPT_force_ignore_depends</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01641">OPT_install</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01642">OPT_list_installed</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01643">OPT_purge</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01644">OPT_remove</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01645">OPT_unpack</a>, <a class="el" href="../../d7/dee/musl_2src_2misc_2getopt_8c_source.html#l00011">optind</a>, <a class="el" href="../../d4/d7f/getopt32_8c_source.html#l00318">option_mask32</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01646">OPTMASK_cmd</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00118">status_node_s::package</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00165">deb_file_s::package</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00098">PACKAGE_HASH_PRIME</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00131">package_hashtable</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01435">purge_package()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01384">remove_package()</a>, <a class="el" href="../../d7/dd7/libbb_8h_source.html#l01349">Required_argument</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00189">search_name_hashtable()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00356">search_package_hashtable()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00211">search_status_hashtable()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00714">set_status()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00119">status_node_s::status</a>, <a class="el" href="../../d7/d5b/mail_8c.html#a6943d6e2e83995c648644bc0a4d36f53">status</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00116">STATUS_HASH_PRIME</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00132">status_hashtable</a>, <a class="el" href="../../d5/db0/dynlink_8c_source.html#l00174">strcmp</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01654">unpack_package()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00159">VER_ANY</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00814">write_status_file()</a>, <a class="el" href="../../db/d0a/tre_8h_source.html#l00227">xmalloc</a>, <a class="el" href="../../d7/dd7/libbb_8h_source.html#l00428">xrealloc_vector</a>, <a class="el" href="../../dc/dd1/pathchk_8c_source.html#l00258">xstrdup()</a>, and <a class="el" href="../../d9/dd6/xfuncs__printf_8c_source.html#l00069">xzalloc()</a>.</p>

</div>
</div>
<a id="a4e47e2f3e91e55bbb66a30c7272f20c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e47e2f3e91e55bbb66a30c7272f20c7">&#9670;&nbsp;</a></span>fill_package_struct()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned fill_package_struct </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>control_buffer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00618">618</a> of file <a class="el" href="../../d7/d05/dpkg_8c_source.html">dpkg.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;{</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> field_names[] <a class="code" href="../../d2/d21/usage__pod_8c.html#a048289fa87432e63cfa9a627c94be27c">ALIGN1</a> =</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;        <span class="stringliteral">&quot;Package\0&quot;</span><span class="stringliteral">&quot;Version\0&quot;</span></div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;        <span class="stringliteral">&quot;Pre-Depends\0&quot;</span><span class="stringliteral">&quot;Depends\0&quot;</span><span class="stringliteral">&quot;Replaces\0&quot;</span><span class="stringliteral">&quot;Provides\0&quot;</span></div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;        <span class="stringliteral">&quot;Conflicts\0&quot;</span><span class="stringliteral">&quot;Suggests\0&quot;</span><span class="stringliteral">&quot;Recommends\0&quot;</span><span class="stringliteral">&quot;Enhances\0&quot;</span>;</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160; </div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#d1/d51/structcommon__node__s">common_node_t</a> *<a class="code" href="../../de/dcc/awk_8c.html#a7da998e298667fb31bad4999be4e2a88">new_node</a> = <a class="code" href="../../d7/dd7/libbb_8h.html#a6b9d12af476b8fa4b9de87028b0ac27c">xzalloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../d7/d05/dpkg_8c.html#d1/d51/structcommon__node__s">common_node_t</a>));</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <span class="keywordtype">char</span> *field_name;</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    <span class="keywordtype">char</span> *field_value;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    <span class="keywordtype">int</span> field_start = 0;</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d7/da1/fma_8c.html#d6/df8/structnum">num</a> = -1;</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    <span class="keywordtype">int</span> buffer_length = <a class="code" href="../../dc/da4/libc_2include_2string_8h.html#a008e171a518fe0e0352f31b245e03875">strlen</a>(control_buffer);</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160; </div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    <a class="code" href="../../de/dcc/awk_8c.html#a7da998e298667fb31bad4999be4e2a88">new_node</a>-&gt;version = <a class="code" href="../../d7/d05/dpkg_8c.html#aaf672b0ba190ab9318a1ec77d2411b21">search_name_hashtable</a>(<span class="stringliteral">&quot;unknown&quot;</span>);</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <span class="keywordflow">while</span> (field_start &lt; buffer_length) {</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;        <span class="keywordtype">unsigned</span> field_num;</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160; </div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;        field_start += <a class="code" href="../../d7/d05/dpkg_8c.html#ad411349b2c01cc35e5fc7d76e5e0573c">read_package_field</a>(&amp;control_buffer[field_start],</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;                &amp;field_name, &amp;field_value);</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160; </div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;        <span class="keywordflow">if</span> (field_name == <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;            <span class="keywordflow">goto</span> fill_package_struct_cleanup;</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;        }</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160; </div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;        field_num = <a class="code" href="../../d7/dd7/libbb_8h.html#a5fb22c68c3ee4c9243e7eafdf4870da5">index_in_strings</a>(field_names, field_name);</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;        <span class="keywordflow">switch</span> (field_num) {</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;        <span class="keywordflow">case</span> 0: <span class="comment">/* Package */</span></div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;            <a class="code" href="../../de/dcc/awk_8c.html#a7da998e298667fb31bad4999be4e2a88">new_node</a>-&gt;<a class="code" href="../../d3/ddd/tsearch_8h.html#a5063bea9c09cef0eaf5bbcb7e9d81cd6">name</a> = <a class="code" href="../../d7/d05/dpkg_8c.html#aaf672b0ba190ab9318a1ec77d2411b21">search_name_hashtable</a>(field_value);</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;        <span class="keywordflow">case</span> 1: <span class="comment">/* Version */</span></div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;            <a class="code" href="../../de/dcc/awk_8c.html#a7da998e298667fb31bad4999be4e2a88">new_node</a>-&gt;version = <a class="code" href="../../d7/d05/dpkg_8c.html#aaf672b0ba190ab9318a1ec77d2411b21">search_name_hashtable</a>(field_value);</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;        <span class="keywordflow">case</span> 2: <span class="comment">/* Pre-Depends */</span></div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;            <a class="code" href="../../d7/d05/dpkg_8c.html#a6b921a0952f002da9ddd965af31c1bbe">add_split_dependencies</a>(<a class="code" href="../../de/dcc/awk_8c.html#a7da998e298667fb31bad4999be4e2a88">new_node</a>, field_value, <a class="code" href="../../d7/d05/dpkg_8c.html#a73b480dcdb4db9e6c91e846cf84a304eac9dfc4afeb58573a67d3ed2b91f460ca">EDGE_PRE_DEPENDS</a>);</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;        <span class="keywordflow">case</span> 3: <span class="comment">/* Depends */</span></div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;            <a class="code" href="../../d7/d05/dpkg_8c.html#a6b921a0952f002da9ddd965af31c1bbe">add_split_dependencies</a>(<a class="code" href="../../de/dcc/awk_8c.html#a7da998e298667fb31bad4999be4e2a88">new_node</a>, field_value, <a class="code" href="../../d7/d05/dpkg_8c.html#a73b480dcdb4db9e6c91e846cf84a304ea90d2c9cde2903fb606ea74a193afad99">EDGE_DEPENDS</a>);</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;        <span class="keywordflow">case</span> 4: <span class="comment">/* Replaces */</span></div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;            <a class="code" href="../../d7/d05/dpkg_8c.html#a6b921a0952f002da9ddd965af31c1bbe">add_split_dependencies</a>(<a class="code" href="../../de/dcc/awk_8c.html#a7da998e298667fb31bad4999be4e2a88">new_node</a>, field_value, <a class="code" href="../../d7/d05/dpkg_8c.html#a73b480dcdb4db9e6c91e846cf84a304eab2c0e7b78b57e3760accc45cc08434be">EDGE_REPLACES</a>);</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;        <span class="keywordflow">case</span> 5: <span class="comment">/* Provides */</span></div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;            <a class="code" href="../../d7/d05/dpkg_8c.html#a6b921a0952f002da9ddd965af31c1bbe">add_split_dependencies</a>(<a class="code" href="../../de/dcc/awk_8c.html#a7da998e298667fb31bad4999be4e2a88">new_node</a>, field_value, <a class="code" href="../../d7/d05/dpkg_8c.html#a73b480dcdb4db9e6c91e846cf84a304ea64e38f4113bce59cb73cefbc1646eb3e">EDGE_PROVIDES</a>);</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;        <span class="keywordflow">case</span> 6: <span class="comment">/* Conflicts */</span></div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;            <a class="code" href="../../d7/d05/dpkg_8c.html#a6b921a0952f002da9ddd965af31c1bbe">add_split_dependencies</a>(<a class="code" href="../../de/dcc/awk_8c.html#a7da998e298667fb31bad4999be4e2a88">new_node</a>, field_value, <a class="code" href="../../d7/d05/dpkg_8c.html#a73b480dcdb4db9e6c91e846cf84a304ea40c79a458b5d88f76922a72e0dd2af36">EDGE_CONFLICTS</a>);</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;        <span class="keywordflow">case</span> 7: <span class="comment">/* Suggests */</span></div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;            <a class="code" href="../../d7/d05/dpkg_8c.html#a6b921a0952f002da9ddd965af31c1bbe">add_split_dependencies</a>(<a class="code" href="../../de/dcc/awk_8c.html#a7da998e298667fb31bad4999be4e2a88">new_node</a>, field_value, <a class="code" href="../../d7/d05/dpkg_8c.html#a73b480dcdb4db9e6c91e846cf84a304ea399bb8962d1158b8359f75a479c57d4c">EDGE_SUGGESTS</a>);</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;        <span class="keywordflow">case</span> 8: <span class="comment">/* Recommends */</span></div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;            <a class="code" href="../../d7/d05/dpkg_8c.html#a6b921a0952f002da9ddd965af31c1bbe">add_split_dependencies</a>(<a class="code" href="../../de/dcc/awk_8c.html#a7da998e298667fb31bad4999be4e2a88">new_node</a>, field_value, <a class="code" href="../../d7/d05/dpkg_8c.html#a73b480dcdb4db9e6c91e846cf84a304ea2c82bc07a49b341a679a08551af78425">EDGE_RECOMMENDS</a>);</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;        <span class="keywordflow">case</span> 9: <span class="comment">/* Enhances */</span></div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;            <a class="code" href="../../d7/d05/dpkg_8c.html#a6b921a0952f002da9ddd965af31c1bbe">add_split_dependencies</a>(<a class="code" href="../../de/dcc/awk_8c.html#a7da998e298667fb31bad4999be4e2a88">new_node</a>, field_value, <a class="code" href="../../d7/d05/dpkg_8c.html#a73b480dcdb4db9e6c91e846cf84a304ea64e6dc4eeb29ac382b80b72a42009792">EDGE_ENHANCES</a>);</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;        }</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160; fill_package_struct_cleanup:</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;        <a class="code" href="../../d5/db0/dynlink_8c.html#a2c6efa7679f8cd9f61af96e105017560">free</a>(field_name);</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;        <a class="code" href="../../d5/db0/dynlink_8c.html#a2c6efa7679f8cd9f61af96e105017560">free</a>(field_value);</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    }</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160; </div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/dcc/awk_8c.html#a7da998e298667fb31bad4999be4e2a88">new_node</a>-&gt;version == <a class="code" href="../../d7/d05/dpkg_8c.html#aaf672b0ba190ab9318a1ec77d2411b21">search_name_hashtable</a>(<span class="stringliteral">&quot;unknown&quot;</span>)) {</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;        <a class="code" href="../../d7/d05/dpkg_8c.html#a39a641a45b46c2042e33297fdf86fd42">free_package</a>(<a class="code" href="../../de/dcc/awk_8c.html#a7da998e298667fb31bad4999be4e2a88">new_node</a>);</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    }</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    <a class="code" href="../../d7/da1/fma_8c.html#d6/df8/structnum">num</a> = <a class="code" href="../../d7/d05/dpkg_8c.html#a32c2bcae0237f8822b6515ea3adc7c00">search_package_hashtable</a>(<a class="code" href="../../de/dcc/awk_8c.html#a7da998e298667fb31bad4999be4e2a88">new_node</a>-&gt;<a class="code" href="../../d3/ddd/tsearch_8h.html#a5063bea9c09cef0eaf5bbcb7e9d81cd6">name</a>, <a class="code" href="../../de/dcc/awk_8c.html#a7da998e298667fb31bad4999be4e2a88">new_node</a>-&gt;version, <a class="code" href="../../d7/d05/dpkg_8c.html#ac654d21de7f6a409f1c1fdec91f95112ad7ea8faad6a84004e9a5fb0789c28552">VER_EQUAL</a>);</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#a39a641a45b46c2042e33297fdf86fd42">free_package</a>(<a class="code" href="../../d7/d05/dpkg_8c.html#a3d27c89e1462f204c221e2cf5c9233d6">package_hashtable</a>[<a class="code" href="../../d7/da1/fma_8c.html#d6/df8/structnum">num</a>]);</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#a3d27c89e1462f204c221e2cf5c9233d6">package_hashtable</a>[<a class="code" href="../../d6/d23/wi__stuff_8c.html#aaf825a665c491e6d28245b43f85b5402">num</a>] = <a class="code" href="../../de/dcc/awk_8c.html#a7da998e298667fb31bad4999be4e2a88">new_node</a>;</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d6/d23/wi__stuff_8c.html#aaf825a665c491e6d28245b43f85b5402">num</a>;</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;}</div>
<div class="ttc" id="adpkg_8c_html_a6b921a0952f002da9ddd965af31c1bbe"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#a6b921a0952f002da9ddd965af31c1bbe">add_split_dependencies</a></div><div class="ttdeci">static void add_split_dependencies(common_node_t *parent_node, const char *whole_line, unsigned edge_type)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00429">dpkg.c:429</a></div></div>
<div class="ttc" id="adpkg_8c_html_ad411349b2c01cc35e5fc7d76e5e0573c"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#ad411349b2c01cc35e5fc7d76e5e0573c">read_package_field</a></div><div class="ttdeci">static int read_package_field(const char *package_buffer, char **field_name, char **field_value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00537">dpkg.c:537</a></div></div>
<div class="ttc" id="afma_8c_html_d6/df8/structnum"><div class="ttname"><a href="../../d7/da1/fma_8c.html#d6/df8/structnum">num</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/da1/fma_8c_source.html#l00009">fma.c:9</a></div></div>
<div class="ttc" id="alibbb_8h_html_a5fb22c68c3ee4c9243e7eafdf4870da5"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#a5fb22c68c3ee4c9243e7eafdf4870da5">index_in_strings</a></div><div class="ttdeci">int index_in_strings(const char *strings, const char *key) FAST_FUNC</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d40/compare__string__array_8c_source.html#l00064">compare_string_array.c:64</a></div></div>
<div class="ttc" id="awi__stuff_8c_html_aaf825a665c491e6d28245b43f85b5402"><div class="ttname"><a href="../../d6/d23/wi__stuff_8c.html#aaf825a665c491e6d28245b43f85b5402">num</a></div><div class="ttdeci">static patch_t * num[10]</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d23/wi__stuff_8c_source.html#l00351">wi_stuff.c:351</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00429">add_split_dependencies()</a>, <a class="el" href="../../d2/d21/usage__pod_8c_source.html#l00016">ALIGN1</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00147">EDGE_CONFLICTS</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00143">EDGE_DEPENDS</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00150">EDGE_ENHANCES</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00141">EDGE_PRE_DEPENDS</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00146">EDGE_PROVIDES</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00149">EDGE_RECOMMENDS</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00145">EDGE_REPLACES</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00148">EDGE_SUGGESTS</a>, <a class="el" href="../../d5/db0/dynlink_8c_source.html#l00036">free</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00521">free_package()</a>, <a class="el" href="../../d2/d40/compare__string__array_8c_source.html#l00064">index_in_strings()</a>, <a class="el" href="../../db/d24/tsort_8c_source.html#l00037">node::name</a>, <a class="el" href="../../de/dcc/awk_8c_source.html#l01320">new_node()</a>, <a class="el" href="../../d9/d14/general_8h_source.html#l00053">NULL</a>, <a class="el" href="../../d6/d23/wi__stuff_8c_source.html#l00351">num</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00131">package_hashtable</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00537">read_package_field()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00189">search_name_hashtable()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00356">search_package_hashtable()</a>, <a class="el" href="../../d1/db0/string_8c_source.html#l00005">strlen()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00154">VER_EQUAL</a>, and <a class="el" href="../../d9/dd6/xfuncs__printf_8c_source.html#l00069">xzalloc()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01762">dpkg_main()</a>, and <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00766">index_status_file()</a>.</p>

</div>
</div>
<a id="ae060969079864be07d6793c1f5536df9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae060969079864be07d6793c1f5536df9">&#9670;&nbsp;</a></span>filter_rename_config()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char <a class="el" href="../../d7/dd7/libbb_8h.html#a9e5609718f2d1fe5ead7714b3d45223b">FAST_FUNC</a> filter_rename_config </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d4c/structarchive__handle__t.html">archive_handle_t</a> *&#160;</td>
          <td class="paramname"><em>archive_handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01575">1575</a> of file <a class="el" href="../../d7/d05/dpkg_8c_source.html">dpkg.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;{</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d2/db3/hdparm_8c.html#abe821d0fac05333be298917dcb50ee1da1e4d60e5b05464d07a30096747025a42">fd</a>;</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;    <span class="keywordtype">char</span> *name_ptr = archive_handle-&gt;<a class="code" href="../../d3/d4c/structarchive__handle__t.html#abb094ada6da7418931c0daf5c4a36101">file_header</a>-&gt;<a class="code" href="../../d1/d94/bb__archive_8h.html#abb3f7f2dc847388a384496869ca96b10">name</a> + 1;</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160; </div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;    <span class="comment">/* Is this file marked as config file? */</span></div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d8/dcb/find__list__entry_8c.html#aec467591340af67ed8cb3428a837a97a">find_list_entry</a>(archive_handle-&gt;<a class="code" href="../../d3/d4c/structarchive__handle__t.html#a3b75b0c5570d2a78763127ebc934cfd5">accept</a>, name_ptr))</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d9/d84/man2html_8c.html#a687984f47d8cce148d1b914d2b79612a">EXIT_SUCCESS</a>; <span class="comment">/* no */</span></div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160; </div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;    <a class="code" href="../../d2/db3/hdparm_8c.html#abe821d0fac05333be298917dcb50ee1da1e4d60e5b05464d07a30096747025a42">fd</a> = <a class="code" href="../../d2/d44/musl_2include_2fcntl_8h.html#aa138ddaa9bbe8b8ccca32ed43e75b72c">open</a>(name_ptr, <a class="code" href="../../d6/dc6/termcap_8c.html#a7a68c9ffaac7dbcd652225dd7c06a54b">O_RDONLY</a>);</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d2/db3/hdparm_8c.html#abe821d0fac05333be298917dcb50ee1da1e4d60e5b05464d07a30096747025a42">fd</a> &gt;= 0) {</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;        <a class="code" href="../../d3/dd3/structmd5__ctx__t.html">md5_ctx_t</a> <a class="code" href="../../da/def/crypt__md5_8c.html#de/d2b/structmd5">md5</a>;</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;        <span class="keywordtype">char</span> *md5line, *<a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>;</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="../../d2/dd6/dd_8c.html#ac74ae34e9c58234aacabb6867b245c58">count</a>;</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160; </div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;        <span class="comment">/* Calculate MD5 of existing file */</span></div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;        <a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a> = <a class="code" href="../../db/d0a/tre_8h.html#a6af5faec3f9662b20ffc9903f923dec0">xmalloc</a>(4096);</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;        <a class="code" href="../../d7/dd7/libbb_8h.html#a720067c800edffb777229a4509ba0858">md5_begin</a>(&amp;<a class="code" href="../../da/def/crypt__md5_8c.html#de/d2b/structmd5">md5</a>);</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;        <span class="keywordflow">while</span> ((<a class="code" href="../../d2/dd6/dd_8c.html#ac74ae34e9c58234aacabb6867b245c58">count</a> = <a class="code" href="../../d7/dd7/libbb_8h.html#afd9749b5c9728a4e5d0f2c00663a89af">safe_read</a>(<a class="code" href="../../d2/db3/hdparm_8c.html#abe821d0fac05333be298917dcb50ee1da1e4d60e5b05464d07a30096747025a42">fd</a>, <a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>, 4096)) &gt; 0)</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;            <a class="code" href="../../d7/dd7/libbb_8h.html#ad0cb76e64b51b955beedea2d2fcd7a8a">md5_hash</a>(&amp;<a class="code" href="../../da/def/crypt__md5_8c.html#de/d2b/structmd5">md5</a>, <a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>, <a class="code" href="../../d2/dd6/dd_8c.html#ac74ae34e9c58234aacabb6867b245c58">count</a>);</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;        <a class="code" href="../../d7/dd7/libbb_8h.html#a3748d7cd3a458d5ac88ec0aa7248f7c3">md5_end</a>(&amp;<a class="code" href="../../da/def/crypt__md5_8c.html#de/d2b/structmd5">md5</a>, <a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>); <span class="comment">/* using buf as result storage */</span></div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;        <a class="code" href="../../de/d97/musl_2include_2unistd_8h.html#ae152484c890a24e4d9b4980e7b965be0">close</a>(<a class="code" href="../../d2/db3/hdparm_8c.html#abe821d0fac05333be298917dcb50ee1da1e4d60e5b05464d07a30096747025a42">fd</a>);</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160; </div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;        md5line = <a class="code" href="../../db/d0a/tre_8h.html#a6af5faec3f9662b20ffc9903f923dec0">xmalloc</a>(16 * 2 + 2 + <a class="code" href="../../dc/da4/libc_2include_2string_8h.html#a008e171a518fe0e0352f31b245e03875">strlen</a>(name_ptr) + 1);</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;        <a class="code" href="../../d1/dae/libc_2src_2print_2printf_8c.html#a9cafd44c2e1bfa384f71d56949e3b3fc">sprintf</a>(<a class="code" href="../../d7/dd7/libbb_8h.html#afe523b6f7b92441d4dc28a330d46c245">bin2hex</a>(md5line, <a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>, 16), <span class="stringliteral">&quot;  %s&quot;</span>, name_ptr);</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;        <a class="code" href="../../d5/db0/dynlink_8c.html#a2c6efa7679f8cd9f61af96e105017560">free</a>(<a class="code" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>);</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160; </div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;        <span class="comment">/* Is it changed after install? */</span></div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d8/dcb/find__list__entry_8c.html#aec467591340af67ed8cb3428a837a97a">find_list_entry</a>(archive_handle-&gt;<a class="code" href="../../d3/d4c/structarchive__handle__t.html#a3b75b0c5570d2a78763127ebc934cfd5">accept</a>, md5line) == <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;            <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;Warning: Creating %s as %s.dpkg-new\n&quot;</span>, name_ptr, name_ptr);</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;            archive_handle-&gt;<a class="code" href="../../d3/d4c/structarchive__handle__t.html#abb094ada6da7418931c0daf5c4a36101">file_header</a>-&gt;<a class="code" href="../../d1/d94/bb__archive_8h.html#abb3f7f2dc847388a384496869ca96b10">name</a> = <a class="code" href="../../d7/dd7/libbb_8h.html#a4d828f2f187169b160c384cde2d0b0b0">xasprintf</a>(<span class="stringliteral">&quot;%s.dpkg-new&quot;</span>, archive_handle-&gt;<a class="code" href="../../d3/d4c/structarchive__handle__t.html#abb094ada6da7418931c0daf5c4a36101">file_header</a>-&gt;<a class="code" href="../../d1/d94/bb__archive_8h.html#abb3f7f2dc847388a384496869ca96b10">name</a>);</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;        }</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;        <a class="code" href="../../d5/db0/dynlink_8c.html#a2c6efa7679f8cd9f61af96e105017560">free</a>(md5line);</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;    }</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d9/d84/man2html_8c.html#a687984f47d8cce148d1b914d2b79612a">EXIT_SUCCESS</a>;</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;}</div>
<div class="ttc" id="aapps_2base_2busybox_2coreutils_2stat_8c_html_aa29b866765bdc5bdf87b7eb666d66093"><div class="ttname"><a href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a></div><div class="ttdeci">#define buf</div></div>
<div class="ttc" id="acrypt__md5_8c_html_de/d2b/structmd5"><div class="ttname"><a href="../../da/def/crypt__md5_8c.html#de/d2b/structmd5">md5</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/def/crypt__md5_8c_source.html#l00014">crypt_md5.c:14</a></div></div>
<div class="ttc" id="afind__list__entry_8c_html_aec467591340af67ed8cb3428a837a97a"><div class="ttname"><a href="../../d8/dcb/find__list__entry_8c.html#aec467591340af67ed8cb3428a837a97a">find_list_entry</a></div><div class="ttdeci">const llist_t *FAST_FUNC find_list_entry(const llist_t *list, const char *filename)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dcb/find__list__entry_8c_source.html#l00012">find_list_entry.c:12</a></div></div>
<div class="ttc" id="ahdparm_8c_html_abe821d0fac05333be298917dcb50ee1da1e4d60e5b05464d07a30096747025a42"><div class="ttname"><a href="../../d2/db3/hdparm_8c.html#abe821d0fac05333be298917dcb50ee1da1e4d60e5b05464d07a30096747025a42">fd</a></div><div class="ttdeci">@ fd</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/hdparm_8c_source.html#l00352">hdparm.c:352</a></div></div>
<div class="ttc" id="alibbb_8h_html_a3748d7cd3a458d5ac88ec0aa7248f7c3"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#a3748d7cd3a458d5ac88ec0aa7248f7c3">md5_end</a></div><div class="ttdeci">unsigned md5_end(md5_ctx_t *ctx, void *resbuf) FAST_FUNC</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d05/hash__md5__sha_8c_source.html#l00477">hash_md5_sha.c:477</a></div></div>
<div class="ttc" id="alibbb_8h_html_a720067c800edffb777229a4509ba0858"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#a720067c800edffb777229a4509ba0858">md5_begin</a></div><div class="ttdeci">void md5_begin(md5_ctx_t *ctx) FAST_FUNC</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d05/hash__md5__sha_8c_source.html#l00434">hash_md5_sha.c:434</a></div></div>
<div class="ttc" id="alibbb_8h_html_ad0cb76e64b51b955beedea2d2fcd7a8a"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#ad0cb76e64b51b955beedea2d2fcd7a8a">md5_hash</a></div><div class="ttdeci">void md5_hash(md5_ctx_t *ctx, const void *buffer, size_t len) FAST_FUNC</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d05/hash__md5__sha_8c_source.html#l00445">hash_md5_sha.c:445</a></div></div>
<div class="ttc" id="alibbb_8h_html_afd9749b5c9728a4e5d0f2c00663a89af"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#afd9749b5c9728a4e5d0f2c00663a89af">safe_read</a></div><div class="ttdeci">ssize_t safe_read(int fd, void *buf, size_t count) FAST_FUNC</div><div class="ttdef"><b>Definition:</b> <a href="../../df/df8/apps_2base_2busybox_2libbb_2read_8c_source.html#l00011">read.c:11</a></div></div>
<div class="ttc" id="alibbb_8h_html_afe523b6f7b92441d4dc28a330d46c245"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#afe523b6f7b92441d4dc28a330d46c245">bin2hex</a></div><div class="ttdeci">char * bin2hex(char *dst, const char *src, int count) FAST_FUNC</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d6d/xfuncs_8c_source.html#l00132">xfuncs.c:132</a></div></div>
<div class="ttc" id="alibc_2src_2print_2printf_8c_html_a9cafd44c2e1bfa384f71d56949e3b3fc"><div class="ttname"><a href="../../d1/dae/libc_2src_2print_2printf_8c.html#a9cafd44c2e1bfa384f71d56949e3b3fc">sprintf</a></div><div class="ttdeci">int sprintf(char *s, const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dae/libc_2src_2print_2printf_8c_source.html#l01563">printf.c:1563</a></div></div>
<div class="ttc" id="amusl_2include_2fcntl_8h_html_aa138ddaa9bbe8b8ccca32ed43e75b72c"><div class="ttname"><a href="../../d2/d44/musl_2include_2fcntl_8h.html#aa138ddaa9bbe8b8ccca32ed43e75b72c">open</a></div><div class="ttdeci">int open(const char *, int,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/deb/open_8c_source.html#l00005">open.c:5</a></div></div>
<div class="ttc" id="astructmd5__ctx__t_html"><div class="ttname"><a href="../../d3/dd3/structmd5__ctx__t.html">md5_ctx_t</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dd7/libbb_8h_source.html#l02147">libbb.h:2147</a></div></div>
<div class="ttc" id="atermcap_8c_html_a7a68c9ffaac7dbcd652225dd7c06a54b"><div class="ttname"><a href="../../d6/dc6/termcap_8c.html#a7a68c9ffaac7dbcd652225dd7c06a54b">O_RDONLY</a></div><div class="ttdeci">#define O_RDONLY</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc6/termcap_8c_source.html#l00086">termcap.c:86</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d1/d94/bb__archive_8h_source.html#l00058">archive_handle_t::accept</a>, <a class="el" href="../../df/d6d/xfuncs_8c_source.html#l00132">bin2hex()</a>, <a class="el" href="../../d7/d2f/apps_2base_2busybox_2coreutils_2stat_8c.html#aa29b866765bdc5bdf87b7eb666d66093">buf</a>, <a class="el" href="../../d9/d22/close_8c_source.html#l00013">close()</a>, <a class="el" href="../../d2/dd6/dd_8c.html#ac74ae34e9c58234aacabb6867b245c58">count</a>, <a class="el" href="../../d9/d84/man2html_8c_source.html#l00095">EXIT_SUCCESS</a>, <a class="el" href="../../d2/db3/hdparm_8c_source.html#l00352">fd</a>, <a class="el" href="../../d1/d94/bb__archive_8h_source.html#l00065">archive_handle_t::file_header</a>, <a class="el" href="../../d8/dcb/find__list__entry_8c_source.html#l00012">find_list_entry()</a>, <a class="el" href="../../d5/db0/dynlink_8c_source.html#l00036">free</a>, <a class="el" href="../../d0/d05/hash__md5__sha_8c_source.html#l00434">md5_begin()</a>, <a class="el" href="../../d0/d05/hash__md5__sha_8c_source.html#l00477">md5_end()</a>, <a class="el" href="../../d0/d05/hash__md5__sha_8c_source.html#l00445">md5_hash()</a>, <a class="el" href="../../d1/d94/bb__archive_8h_source.html#l00032">file_header_t::name</a>, <a class="el" href="../../d9/d14/general_8h_source.html#l00053">NULL</a>, <a class="el" href="../../d6/dc6/termcap_8c_source.html#l00086">O_RDONLY</a>, <a class="el" href="../../da/deb/open_8c_source.html#l00005">open()</a>, <a class="el" href="../../d1/dae/libc_2src_2print_2printf_8c_source.html#l01554">printf()</a>, <a class="el" href="../../df/df8/apps_2base_2busybox_2libbb_2read_8c_source.html#l00011">safe_read()</a>, <a class="el" href="../../d1/dae/libc_2src_2print_2printf_8c_source.html#l01563">sprintf()</a>, <a class="el" href="../../d1/db0/string_8c_source.html#l00005">strlen()</a>, <a class="el" href="../../d7/dd7/libbb_8h.html#a4d828f2f187169b160c384cde2d0b0b0">xasprintf()</a>, and <a class="el" href="../../db/d0a/tre_8h_source.html#l00227">xmalloc</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01654">unpack_package()</a>.</p>

</div>
</div>
<a id="abca1e5c129c765f55274cc5f8c23ccf0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abca1e5c129c765f55274cc5f8c23ccf0">&#9670;&nbsp;</a></span>free_array()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void free_array </td>
          <td>(</td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>array</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01329">1329</a> of file <a class="el" href="../../d7/d05/dpkg_8c_source.html">dpkg.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;{</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../db/d63/array_8h.html#dc/daf/structarray">array</a>) {</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;        <span class="keywordtype">unsigned</span> <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> = 0;</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;        <span class="keywordflow">while</span> (<a class="code" href="../../db/d63/array_8h.html#dc/daf/structarray">array</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>]) {</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;            <a class="code" href="../../d5/db0/dynlink_8c.html#a2c6efa7679f8cd9f61af96e105017560">free</a>(<a class="code" href="../../db/d63/array_8h.html#dc/daf/structarray">array</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>]);</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;            <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>++;</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;        }</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;        <a class="code" href="../../d5/db0/dynlink_8c.html#a2c6efa7679f8cd9f61af96e105017560">free</a>(<a class="code" href="../../db/d63/array_8h.html#dc/daf/structarray">array</a>);</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;    }</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;}</div>
<div class="ttc" id="aarray_8h_html_dc/daf/structarray"><div class="ttname"><a href="../../db/d63/array_8h.html#dc/daf/structarray">array</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d63/array_8h_source.html#l00030">array.h:30</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d5/db0/dynlink_8c_source.html#l00036">free</a>, and <a class="el" href="../../dd/d71/gettextP_8h_source.html#l00074">i</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01435">purge_package()</a>, and <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01384">remove_package()</a>.</p>

</div>
</div>
<a id="a39a641a45b46c2042e33297fdf86fd42"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39a641a45b46c2042e33297fdf86fd42">&#9670;&nbsp;</a></span>free_package()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void free_package </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d7/d05/dpkg_8c.html#a2f5ff7138fd4c1dd7c01570fddcc0ab9">common_node_t</a> *&#160;</td>
          <td class="paramname"><em>node</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00521">521</a> of file <a class="el" href="../../d7/d05/dpkg_8c_source.html">dpkg.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;{</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/ddd/tsearch_8h.html#d5/da1/structnode">node</a>) {</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> = 0; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> &lt; <a class="code" href="../../d3/ddd/tsearch_8h.html#d5/da1/structnode">node</a>-&gt;num_of_edges; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>++) {</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;            <a class="code" href="../../d5/db0/dynlink_8c.html#a2c6efa7679f8cd9f61af96e105017560">free</a>(<a class="code" href="../../d3/ddd/tsearch_8h.html#d5/da1/structnode">node</a>-&gt;edge[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>]);</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        }</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        <a class="code" href="../../d5/db0/dynlink_8c.html#a2c6efa7679f8cd9f61af96e105017560">free</a>(<a class="code" href="../../d3/ddd/tsearch_8h.html#d5/da1/structnode">node</a>-&gt;edge);</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        <a class="code" href="../../d5/db0/dynlink_8c.html#a2c6efa7679f8cd9f61af96e105017560">free</a>(<a class="code" href="../../d3/ddd/tsearch_8h.html#d5/da1/structnode">node</a>);</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    }</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d5/db0/dynlink_8c_source.html#l00036">free</a>, and <a class="el" href="../../dd/d71/gettextP_8h_source.html#l00074">i</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01762">dpkg_main()</a>, and <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00618">fill_package_struct()</a>.</p>

</div>
</div>
<a id="a7dfbd7f4ae69e4e7c73a932addf7bd6f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7dfbd7f4ae69e4e7c73a932addf7bd6f">&#9670;&nbsp;</a></span>get_status()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned get_status </td>
          <td>(</td>
          <td class="paramtype">const unsigned&#160;</td>
          <td class="paramname"><em>status_node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>num</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00692">692</a> of file <a class="el" href="../../d7/d05/dpkg_8c_source.html">dpkg.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;{</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    <span class="keywordtype">char</span> *status_string = <a class="code" href="../../d7/d05/dpkg_8c.html#aa77ba14cd48e018786c6b752ed1d11b0">name_hashtable</a>[<a class="code" href="../../d7/d05/dpkg_8c.html#afedd0a411aaf4f39ccf5908554c7699b">status_hashtable</a>[status_node]-&gt;status];</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    <span class="keywordtype">char</span> *state_sub_string;</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    <span class="keywordtype">unsigned</span> state_sub_num;</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    <span class="keywordtype">int</span> len;</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>;</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160; </div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    <span class="comment">/* set tmp_string to point to the start of the word number */</span></div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> = 1; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> &lt; <a class="code" href="../../d6/d23/wi__stuff_8c.html#aaf825a665c491e6d28245b43f85b5402">num</a>; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>++) {</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;        <span class="comment">/* skip past a word */</span></div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;        status_string += <a class="code" href="../../d6/d32/musl_2include_2string_8h.html#a4e8462eddc5a160451a246bc1bc22bb4">strcspn</a>(status_string, <span class="stringliteral">&quot; &quot;</span>);</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;        <span class="comment">/* skip past the separating spaces */</span></div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;        status_string += <a class="code" href="../../d6/d32/musl_2include_2string_8h.html#a417885431ec6bd9c35f34ca1d10ca48b">strspn</a>(status_string, <span class="stringliteral">&quot; &quot;</span>);</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    }</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    len = <a class="code" href="../../d6/d32/musl_2include_2string_8h.html#a4e8462eddc5a160451a246bc1bc22bb4">strcspn</a>(status_string, <span class="stringliteral">&quot; \n&quot;</span>);</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    state_sub_string = <a class="code" href="../../d7/dd7/libbb_8h.html#ab08a8f00393f0dd77050fccaecba3a7e">xstrndup</a>(status_string, len);</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    state_sub_num = <a class="code" href="../../d7/d05/dpkg_8c.html#aaf672b0ba190ab9318a1ec77d2411b21">search_name_hashtable</a>(state_sub_string);</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    <a class="code" href="../../d5/db0/dynlink_8c.html#a2c6efa7679f8cd9f61af96e105017560">free</a>(state_sub_string);</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    <span class="keywordflow">return</span> state_sub_num;</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;}</div>
<div class="ttc" id="alibbb_8h_html_ab08a8f00393f0dd77050fccaecba3a7e"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#ab08a8f00393f0dd77050fccaecba3a7e">xstrndup</a></div><div class="ttdeci">char * xstrndup(const char *s, size_t n) FAST_FUNC RETURNS_MALLOC</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd6/xfuncs__printf_8c_source.html#l00094">xfuncs_printf.c:94</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d5/db0/dynlink_8c_source.html#l00036">free</a>, <a class="el" href="../../dd/d71/gettextP_8h_source.html#l00074">i</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00130">name_hashtable</a>, <a class="el" href="../../d6/d23/wi__stuff_8c_source.html#l00351">num</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00189">search_name_hashtable()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00132">status_hashtable</a>, <a class="el" href="../../d8/dba/strcspn_8c_source.html#l00006">strcspn()</a>, <a class="el" href="../../da/dab/strspn_8c_source.html#l00006">strspn()</a>, and <a class="el" href="../../d9/dd6/xfuncs__printf_8c_source.html#l00094">xstrndup()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00980">check_deps()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00741">describe_status()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01762">dpkg_main()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00963">package_satisfies_dependency()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00714">set_status()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01654">unpack_package()</a>, and <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00814">write_status_file()</a>.</p>

</div>
</div>
<a id="a0fb7c59e83faf18cfbf41a4032008789"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0fb7c59e83faf18cfbf41a4032008789">&#9670;&nbsp;</a></span>index_status_file()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void index_status_file </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00766">766</a> of file <a class="el" href="../../d7/d05/dpkg_8c_source.html">dpkg.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;{</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;    <a class="code" href="../../d0/d57/struct__IO__FILE.html">FILE</a> *status_file;</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    <span class="keywordtype">char</span> *control_buffer;</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    <span class="keywordtype">char</span> *<a class="code" href="../../d4/d49/vi_8c.html#a2ca2ee11518986d893b2f73f5635708d">status_line</a>;</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#df/dfb/structstatus__node__s">status_node_t</a> *status_node = <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    <span class="keywordtype">unsigned</span> status_num;</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160; </div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    status_file = <a class="code" href="../../d7/dd7/libbb_8h.html#a3440fab254732f52be42fa714913ef5d">xfopen_for_read</a>(<a class="code" href="../../d4/daf/flashcp_8c.html#abe2fedc3a963bcd397037e60e16adabb">filename</a>);</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    <span class="keywordflow">while</span> ((control_buffer = <a class="code" href="../../d7/dd7/libbb_8h.html#a91941dfb5d4f8db5afb11aedc0d45642">xmalloc_fgetline_str</a>(status_file, <span class="stringliteral">&quot;\n\n&quot;</span>)) != <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">unsigned</span> package_num = <a class="code" href="../../d7/d05/dpkg_8c.html#a4e47e2f3e91e55bbb66a30c7272f20c7">fill_package_struct</a>(control_buffer);</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;        <span class="keywordflow">if</span> (package_num != -1) {</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;            status_node = <a class="code" href="../../db/d0a/tre_8h.html#a6af5faec3f9662b20ffc9903f923dec0">xmalloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../d7/d05/dpkg_8c.html#df/dfb/structstatus__node__s">status_node_t</a>));</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;            <span class="comment">/* fill_package_struct doesn&#39;t handle the status field */</span></div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;            <a class="code" href="../../d4/d49/vi_8c.html#a2ca2ee11518986d893b2f73f5635708d">status_line</a> = <a class="code" href="../../d0/da9/apps_2base_2bash_2lib_2sh_2strstr_8c.html#aea5b312f689a291ce05c2c4ffb924d7f">strstr</a>(control_buffer, <span class="stringliteral">&quot;Status:&quot;</span>);</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d4/d49/vi_8c.html#a2ca2ee11518986d893b2f73f5635708d">status_line</a> != <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;                <a class="code" href="../../d4/d49/vi_8c.html#a2ca2ee11518986d893b2f73f5635708d">status_line</a> += 7;</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;                <a class="code" href="../../d4/d49/vi_8c.html#a2ca2ee11518986d893b2f73f5635708d">status_line</a> += <a class="code" href="../../d6/d32/musl_2include_2string_8h.html#a417885431ec6bd9c35f34ca1d10ca48b">strspn</a>(<a class="code" href="../../d4/d49/vi_8c.html#a2ca2ee11518986d893b2f73f5635708d">status_line</a>, <span class="stringliteral">&quot; \n\t&quot;</span>);</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;                <a class="code" href="../../d4/d49/vi_8c.html#a2ca2ee11518986d893b2f73f5635708d">status_line</a> = <a class="code" href="../../d7/dd7/libbb_8h.html#ab08a8f00393f0dd77050fccaecba3a7e">xstrndup</a>(<a class="code" href="../../d4/d49/vi_8c.html#a2ca2ee11518986d893b2f73f5635708d">status_line</a>, <a class="code" href="../../d6/d32/musl_2include_2string_8h.html#a4e8462eddc5a160451a246bc1bc22bb4">strcspn</a>(<a class="code" href="../../d4/d49/vi_8c.html#a2ca2ee11518986d893b2f73f5635708d">status_line</a>, <span class="stringliteral">&quot;\n&quot;</span>));</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;                status_node-&gt;<a class="code" href="../../d7/d05/dpkg_8c.html#a9fe4fcae3d0f56d30a35a008dee139cb">status</a> = <a class="code" href="../../d7/d05/dpkg_8c.html#aaf672b0ba190ab9318a1ec77d2411b21">search_name_hashtable</a>(<a class="code" href="../../d4/d49/vi_8c.html#a2ca2ee11518986d893b2f73f5635708d">status_line</a>);</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;                <a class="code" href="../../d5/db0/dynlink_8c.html#a2c6efa7679f8cd9f61af96e105017560">free</a>(<a class="code" href="../../d4/d49/vi_8c.html#a2ca2ee11518986d893b2f73f5635708d">status_line</a>);</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;            }</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;            status_node-&gt;<a class="code" href="../../d7/d05/dpkg_8c.html#ab2079977df3552c10bfec65a723218f5">package</a> = package_num;</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;            status_num = <a class="code" href="../../d7/d05/dpkg_8c.html#a82afa66172a836357ebd323585c651cd">search_status_hashtable</a>(<a class="code" href="../../d7/d05/dpkg_8c.html#aa77ba14cd48e018786c6b752ed1d11b0">name_hashtable</a>[<a class="code" href="../../d7/d05/dpkg_8c.html#a3d27c89e1462f204c221e2cf5c9233d6">package_hashtable</a>[status_node-&gt;<a class="code" href="../../d7/d05/dpkg_8c.html#ab2079977df3552c10bfec65a723218f5">package</a>]-&gt;name]);</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;            <a class="code" href="../../d7/d05/dpkg_8c.html#afedd0a411aaf4f39ccf5908554c7699b">status_hashtable</a>[status_num] = status_node;</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;        }</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;        <a class="code" href="../../d5/db0/dynlink_8c.html#a2c6efa7679f8cd9f61af96e105017560">free</a>(control_buffer);</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    }</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#a3abd78c220b4b49d1b088f0dfe40bf23">fclose</a>(status_file);</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;}</div>
<div class="ttc" id="aapps_2base_2bash_2lib_2sh_2strstr_8c_html_aea5b312f689a291ce05c2c4ffb924d7f"><div class="ttname"><a href="../../d0/da9/apps_2base_2bash_2lib_2sh_2strstr_8c.html#aea5b312f689a291ce05c2c4ffb924d7f">strstr</a></div><div class="ttdeci">char * strstr(const char *phaystack, const char *pneedle)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/da9/apps_2base_2bash_2lib_2sh_2strstr_8c_source.html#l00044">strstr.c:44</a></div></div>
<div class="ttc" id="alibbb_8h_html_a3440fab254732f52be42fa714913ef5d"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#a3440fab254732f52be42fa714913ef5d">xfopen_for_read</a></div><div class="ttdeci">FILE * xfopen_for_read(const char *path) FAST_FUNC</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d34/wfopen_8c_source.html#l00026">wfopen.c:26</a></div></div>
<div class="ttc" id="alibbb_8h_html_a91941dfb5d4f8db5afb11aedc0d45642"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#a91941dfb5d4f8db5afb11aedc0d45642">xmalloc_fgetline_str</a></div><div class="ttdeci">char * xmalloc_fgetline_str(FILE *file, const char *terminating_string) FAST_FUNC RETURNS_MALLOC</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d9f/fgets__str_8c_source.html#l00075">fgets_str.c:75</a></div></div>
<div class="ttc" id="avi_8c_html_a2ca2ee11518986d893b2f73f5635708d"><div class="ttname"><a href="../../d4/d49/vi_8c.html#a2ca2ee11518986d893b2f73f5635708d">status_line</a></div><div class="ttdeci">static void status_line(const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d49/vi_8c_source.html#l01352">vi.c:1352</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d6/d13/file_8c_source.html#l00054">fclose()</a>, <a class="el" href="../../d4/daf/flashcp_8c.html#abe2fedc3a963bcd397037e60e16adabb">filename</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00618">fill_package_struct()</a>, <a class="el" href="../../d5/db0/dynlink_8c_source.html#l00036">free</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00130">name_hashtable</a>, <a class="el" href="../../d9/d14/general_8h_source.html#l00053">NULL</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00118">status_node_s::package</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00131">package_hashtable</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00189">search_name_hashtable()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00211">search_status_hashtable()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00119">status_node_s::status</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00132">status_hashtable</a>, <a class="el" href="../../d4/d49/vi_8c_source.html#l01352">status_line()</a>, <a class="el" href="../../d8/dba/strcspn_8c_source.html#l00006">strcspn()</a>, <a class="el" href="../../da/dab/strspn_8c_source.html#l00006">strspn()</a>, <a class="el" href="../../d0/da9/apps_2base_2bash_2lib_2sh_2strstr_8c_source.html#l00044">strstr()</a>, <a class="el" href="../../d7/d34/wfopen_8c_source.html#l00026">xfopen_for_read()</a>, <a class="el" href="../../db/d0a/tre_8h_source.html#l00227">xmalloc</a>, <a class="el" href="../../d5/d9f/fgets__str_8c_source.html#l00075">xmalloc_fgetline_str()</a>, and <a class="el" href="../../d9/dd6/xfuncs__printf_8c_source.html#l00094">xstrndup()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01762">dpkg_main()</a>.</p>

</div>
</div>
<a id="a0d1519b520ab1d241ba0b5ddb1b8a5f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d1519b520ab1d241ba0b5ddb1b8a5f3">&#9670;&nbsp;</a></span>init_archive_deb_ar()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d3/d4c/structarchive__handle__t.html">archive_handle_t</a>* init_archive_deb_ar </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01477">1477</a> of file <a class="el" href="../../d7/d05/dpkg_8c_source.html">dpkg.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;{</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;    <a class="code" href="../../d3/d4c/structarchive__handle__t.html">archive_handle_t</a> *ar_handle;</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160; </div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;    <span class="comment">/* Setup an ar archive handle that refers to the gzip sub archive */</span></div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;    ar_handle = <a class="code" href="../../d9/d39/init__handle_8c.html#a062b807d8e400b57db5ac9d5396545ee">init_handle</a>();</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;    ar_handle-&gt;<a class="code" href="../../d3/d4c/structarchive__handle__t.html#a40ffc3faa8104696839d3923447479e6">filter</a> = <a class="code" href="../../d0/d6e/filter__accept__list__reassign_8c.html#ac735b71f807ca5eb923ed84f916fd172">filter_accept_list_reassign</a>;</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;    ar_handle-&gt;<a class="code" href="../../d3/d4c/structarchive__handle__t.html#a2ac0fe2ca6c68b2e095555a9d71bf1a6">src_fd</a> = <a class="code" href="../../d7/dd7/libbb_8h.html#aa3e94e3ec137f40660b168c9f0840027">xopen</a>(<a class="code" href="../../d4/daf/flashcp_8c.html#abe2fedc3a963bcd397037e60e16adabb">filename</a>, <a class="code" href="../../d6/dc6/termcap_8c.html#a7a68c9ffaac7dbcd652225dd7c06a54b">O_RDONLY</a>);</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160; </div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;    <span class="keywordflow">return</span> ar_handle;</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;}</div>
<div class="ttc" id="afilter__accept__list__reassign_8c_html_ac735b71f807ca5eb923ed84f916fd172"><div class="ttname"><a href="../../d0/d6e/filter__accept__list__reassign_8c.html#ac735b71f807ca5eb923ed84f916fd172">filter_accept_list_reassign</a></div><div class="ttdeci">char FAST_FUNC filter_accept_list_reassign(archive_handle_t *archive_handle)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6e/filter__accept__list__reassign_8c_source.html#l00017">filter_accept_list_reassign.c:17</a></div></div>
<div class="ttc" id="ainit__handle_8c_html_a062b807d8e400b57db5ac9d5396545ee"><div class="ttname"><a href="../../d9/d39/init__handle_8c.html#a062b807d8e400b57db5ac9d5396545ee">init_handle</a></div><div class="ttdeci">archive_handle_t *FAST_FUNC init_handle(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d39/init__handle_8c_source.html#l00008">init_handle.c:8</a></div></div>
<div class="ttc" id="alibbb_8h_html_aa3e94e3ec137f40660b168c9f0840027"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#aa3e94e3ec137f40660b168c9f0840027">xopen</a></div><div class="ttdeci">int xopen(const char *pathname, int flags) FAST_FUNC</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd6/xfuncs__printf_8c_source.html#l00155">xfuncs_printf.c:155</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d4/daf/flashcp_8c.html#abe2fedc3a963bcd397037e60e16adabb">filename</a>, <a class="el" href="../../d1/d94/bb__archive_8h_source.html#l00056">archive_handle_t::filter</a>, <a class="el" href="../../d0/d6e/filter__accept__list__reassign_8c_source.html#l00017">filter_accept_list_reassign()</a>, <a class="el" href="../../d9/d39/init__handle_8c_source.html#l00008">init_handle()</a>, <a class="el" href="../../d6/dc6/termcap_8c_source.html#l00086">O_RDONLY</a>, <a class="el" href="../../d1/d94/bb__archive_8h_source.html#l00053">archive_handle_t::src_fd</a>, and <a class="el" href="../../d9/dd6/xfuncs__printf_8c_source.html#l00155">xopen()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01762">dpkg_main()</a>, and <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01654">unpack_package()</a>.</p>

</div>
</div>
<a id="ac805a8585623c4f935c79126f2e9a44c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac805a8585623c4f935c79126f2e9a44c">&#9670;&nbsp;</a></span>init_archive_deb_control()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void init_archive_deb_control </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d4c/structarchive__handle__t.html">archive_handle_t</a> *&#160;</td>
          <td class="paramname"><em>ar_handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01489">1489</a> of file <a class="el" href="../../d7/d05/dpkg_8c_source.html">dpkg.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;{</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;    <a class="code" href="../../d3/d4c/structarchive__handle__t.html">archive_handle_t</a> *tar_handle;</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160; </div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;    <span class="comment">/* Setup the tar archive handle */</span></div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;    tar_handle = <a class="code" href="../../d9/d39/init__handle_8c.html#a062b807d8e400b57db5ac9d5396545ee">init_handle</a>();</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;    tar_handle-&gt;<a class="code" href="../../d3/d4c/structarchive__handle__t.html#a2ac0fe2ca6c68b2e095555a9d71bf1a6">src_fd</a> = ar_handle-&gt;<a class="code" href="../../d3/d4c/structarchive__handle__t.html#a2ac0fe2ca6c68b2e095555a9d71bf1a6">src_fd</a>;</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160; </div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;    <span class="comment">/* We don&#39;t care about data.tar.* or debian-binary, just control.tar.* */</span></div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;    <a class="code" href="../../d7/dd7/libbb_8h.html#ac1428a8eb5f3de46969e7d3bfa8be3c3">llist_add_to</a>(&amp;(ar_handle-&gt;<a class="code" href="../../d3/d4c/structarchive__handle__t.html#a3b75b0c5570d2a78763127ebc934cfd5">accept</a>), (<span class="keywordtype">char</span>*)<span class="stringliteral">&quot;control.tar&quot;</span>);</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;<span class="preprocessor">#if ENABLE_FEATURE_SEAMLESS_GZ</span></div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;    <a class="code" href="../../d7/dd7/libbb_8h.html#ac1428a8eb5f3de46969e7d3bfa8be3c3">llist_add_to</a>(&amp;(ar_handle-&gt;<a class="code" href="../../d3/d4c/structarchive__handle__t.html#a3b75b0c5570d2a78763127ebc934cfd5">accept</a>), (<span class="keywordtype">char</span>*)<span class="stringliteral">&quot;control.tar.gz&quot;</span>);</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;<span class="preprocessor">#if ENABLE_FEATURE_SEAMLESS_BZ2</span></div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;    <a class="code" href="../../d7/dd7/libbb_8h.html#ac1428a8eb5f3de46969e7d3bfa8be3c3">llist_add_to</a>(&amp;(ar_handle-&gt;<a class="code" href="../../d3/d4c/structarchive__handle__t.html#a3b75b0c5570d2a78763127ebc934cfd5">accept</a>), (<span class="keywordtype">char</span>*)<span class="stringliteral">&quot;control.tar.bz2&quot;</span>);</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;<span class="preprocessor">#if ENABLE_FEATURE_SEAMLESS_XZ</span></div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;    <a class="code" href="../../d7/dd7/libbb_8h.html#ac1428a8eb5f3de46969e7d3bfa8be3c3">llist_add_to</a>(&amp;(ar_handle-&gt;<a class="code" href="../../d3/d4c/structarchive__handle__t.html#a3b75b0c5570d2a78763127ebc934cfd5">accept</a>), (<span class="keywordtype">char</span>*)<span class="stringliteral">&quot;control.tar.xz&quot;</span>);</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160; </div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;    <span class="comment">/* Assign the tar handle as a subarchive of the ar handle */</span></div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;    ar_handle-&gt;dpkg__sub_archive = tar_handle;</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d1/d94/bb__archive_8h_source.html#l00058">archive_handle_t::accept</a>, <a class="el" href="../../d9/d39/init__handle_8c_source.html#l00008">init_handle()</a>, <a class="el" href="../../d4/de1/llist_8c_source.html#l00015">llist_add_to()</a>, and <a class="el" href="../../d1/d94/bb__archive_8h_source.html#l00053">archive_handle_t::src_fd</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01762">dpkg_main()</a>, and <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01654">unpack_package()</a>.</p>

</div>
</div>
<a id="a9fa625500b8a73565a09361658e9a25e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9fa625500b8a73565a09361658e9a25e">&#9670;&nbsp;</a></span>init_archive_deb_data()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void init_archive_deb_data </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d4c/structarchive__handle__t.html">archive_handle_t</a> *&#160;</td>
          <td class="paramname"><em>ar_handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01513">1513</a> of file <a class="el" href="../../d7/d05/dpkg_8c_source.html">dpkg.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;{</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;    <a class="code" href="../../d3/d4c/structarchive__handle__t.html">archive_handle_t</a> *tar_handle;</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160; </div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;    <span class="comment">/* Setup the tar archive handle */</span></div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;    tar_handle = <a class="code" href="../../d9/d39/init__handle_8c.html#a062b807d8e400b57db5ac9d5396545ee">init_handle</a>();</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;    tar_handle-&gt;<a class="code" href="../../d3/d4c/structarchive__handle__t.html#a2ac0fe2ca6c68b2e095555a9d71bf1a6">src_fd</a> = ar_handle-&gt;<a class="code" href="../../d3/d4c/structarchive__handle__t.html#a2ac0fe2ca6c68b2e095555a9d71bf1a6">src_fd</a>;</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160; </div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;    <span class="comment">/* We don&#39;t care about control.tar.* or debian-binary, just data.tar.* */</span></div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;    <a class="code" href="../../d7/dd7/libbb_8h.html#ac1428a8eb5f3de46969e7d3bfa8be3c3">llist_add_to</a>(&amp;(ar_handle-&gt;<a class="code" href="../../d3/d4c/structarchive__handle__t.html#a3b75b0c5570d2a78763127ebc934cfd5">accept</a>), (<span class="keywordtype">char</span>*)<span class="stringliteral">&quot;data.tar&quot;</span>);</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;<span class="preprocessor">#if ENABLE_FEATURE_SEAMLESS_GZ</span></div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;    <a class="code" href="../../d7/dd7/libbb_8h.html#ac1428a8eb5f3de46969e7d3bfa8be3c3">llist_add_to</a>(&amp;(ar_handle-&gt;<a class="code" href="../../d3/d4c/structarchive__handle__t.html#a3b75b0c5570d2a78763127ebc934cfd5">accept</a>), (<span class="keywordtype">char</span>*)<span class="stringliteral">&quot;data.tar.gz&quot;</span>);</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;<span class="preprocessor">#if ENABLE_FEATURE_SEAMLESS_BZ2</span></div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;    <a class="code" href="../../d7/dd7/libbb_8h.html#ac1428a8eb5f3de46969e7d3bfa8be3c3">llist_add_to</a>(&amp;(ar_handle-&gt;<a class="code" href="../../d3/d4c/structarchive__handle__t.html#a3b75b0c5570d2a78763127ebc934cfd5">accept</a>), (<span class="keywordtype">char</span>*)<span class="stringliteral">&quot;data.tar.bz2&quot;</span>);</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;<span class="preprocessor">#if ENABLE_FEATURE_SEAMLESS_LZMA</span></div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;    <a class="code" href="../../d7/dd7/libbb_8h.html#ac1428a8eb5f3de46969e7d3bfa8be3c3">llist_add_to</a>(&amp;(ar_handle-&gt;<a class="code" href="../../d3/d4c/structarchive__handle__t.html#a3b75b0c5570d2a78763127ebc934cfd5">accept</a>), (<span class="keywordtype">char</span>*)<span class="stringliteral">&quot;data.tar.lzma&quot;</span>);</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;<span class="preprocessor">#if ENABLE_FEATURE_SEAMLESS_XZ</span></div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;    <a class="code" href="../../d7/dd7/libbb_8h.html#ac1428a8eb5f3de46969e7d3bfa8be3c3">llist_add_to</a>(&amp;(ar_handle-&gt;<a class="code" href="../../d3/d4c/structarchive__handle__t.html#a3b75b0c5570d2a78763127ebc934cfd5">accept</a>), (<span class="keywordtype">char</span>*)<span class="stringliteral">&quot;data.tar.xz&quot;</span>);</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160; </div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;    <span class="comment">/* Assign the tar handle as a subarchive of the ar handle */</span></div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;    ar_handle-&gt;dpkg__sub_archive = tar_handle;</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d1/d94/bb__archive_8h_source.html#l00058">archive_handle_t::accept</a>, <a class="el" href="../../d9/d39/init__handle_8c_source.html#l00008">init_handle()</a>, <a class="el" href="../../d4/de1/llist_8c_source.html#l00015">llist_add_to()</a>, and <a class="el" href="../../d1/d94/bb__archive_8h_source.html#l00053">archive_handle_t::src_fd</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01654">unpack_package()</a>.</p>

</div>
</div>
<a id="a2ad7dd50933c34eddd93c145f90a3638"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ad7dd50933c34eddd93c145f90a3638">&#9670;&nbsp;</a></span>is_builtin_exclude()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int is_builtin_exclude </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This tests if the filename is an "important" directory, which might be symlinked. Debians dpkg test if directories are used by other packages, this implementation doesn't and would remove for ex. an lib -&gt; usr/lib symlink. </p>

<p class="definition">Definition at line <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01211">1211</a> of file <a class="el" href="../../d7/d05/dpkg_8c_source.html">dpkg.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;{</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;    <span class="keywordflow">if</span> (*name++ != <span class="charliteral">&#39;/&#39;</span>)</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d7/dd7/libbb_8h.html#a5fb22c68c3ee4c9243e7eafdf4870da5">index_in_strings</a>(<span class="stringliteral">&quot;.\0&quot;</span> <span class="stringliteral">&quot;etc\0&quot;</span> <span class="stringliteral">&quot;opt\0&quot;</span> <span class="stringliteral">&quot;srv\0&quot;</span> <span class="stringliteral">&quot;var\0&quot;</span> <span class="stringliteral">&quot;var/lib\0&quot;</span>,</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;            name) &gt;= 0)</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d7/dd7/libbb_8h.html#a4efef3cefc2a7e3a1176da4352a90769">is_prefixed_with</a>(name, <span class="stringliteral">&quot;usr/&quot;</span>)) {</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;        name += <span class="keyword">sizeof</span>(<span class="stringliteral">&quot;usr/&quot;</span>) - 1;</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d7/dd7/libbb_8h.html#a4efef3cefc2a7e3a1176da4352a90769">is_prefixed_with</a>(name, <span class="stringliteral">&quot;local/&quot;</span>))</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;            name += <span class="keyword">sizeof</span>(<span class="stringliteral">&quot;local/&quot;</span>) - 1;</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    }</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160; </div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d7/dd7/libbb_8h.html#a5fb22c68c3ee4c9243e7eafdf4870da5">index_in_strings</a>(<span class="stringliteral">&quot;bin\0&quot;</span> <span class="stringliteral">&quot;lib\0&quot;</span> <span class="stringliteral">&quot;lib32\0&quot;</span> <span class="stringliteral">&quot;lib64\0&quot;</span> <span class="stringliteral">&quot;sbin\0&quot;</span>,</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;            name) &gt;= 0;</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;}</div>
<div class="ttc" id="alibbb_8h_html_a4efef3cefc2a7e3a1176da4352a90769"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#a4efef3cefc2a7e3a1176da4352a90769">is_prefixed_with</a></div><div class="ttdeci">char * is_prefixed_with(const char *string, const char *key) FAST_FUNC</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d40/compare__string__array_8c_source.html#l00012">compare_string_array.c:12</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d2/d40/compare__string__array_8c_source.html#l00064">index_in_strings()</a>, and <a class="el" href="../../d2/d40/compare__string__array_8c_source.html#l00012">is_prefixed_with()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01229">remove_file_array()</a>.</p>

</div>
</div>
<a id="a5114ee06796d1fe1b5fc1f4f08d2f56f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5114ee06796d1fe1b5fc1f4f08d2f56f">&#9670;&nbsp;</a></span>list_packages()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void list_packages </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>pattern</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01345">1345</a> of file <a class="el" href="../../d7/d05/dpkg_8c_source.html">dpkg.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;{</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>;</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160; </div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;    <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#ad41876f99f190c7488e64ef39c50a23f">puts</a>(<span class="stringliteral">&quot;    Name           Version&quot;</span>);</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;    <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#ad41876f99f190c7488e64ef39c50a23f">puts</a>(<span class="stringliteral">&quot;+++-==============-==============&quot;</span>);</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160; </div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;    <span class="comment">/* go through status hash, dereference package hash and finally strings */</span></div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> = 0; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> &lt; <a class="code" href="../../d7/d05/dpkg_8c.html#adb240e823a9482d83cd02f3340976265">STATUS_HASH_PRIME</a>+1; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>++) {</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d7/d05/dpkg_8c.html#afedd0a411aaf4f39ccf5908554c7699b">status_hashtable</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>]) {</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">char</span> *stat_str;  <span class="comment">/* status string */</span></div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">char</span> *name_str;  <span class="comment">/* package name */</span></div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">char</span> *vers_str;  <span class="comment">/* version */</span></div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;            <span class="keywordtype">char</span>  <a class="code" href="../../d3/d84/lgamma__r_8c.html#a1ff9ee3251659529629e761b307fada6">s1</a>, <a class="code" href="../../d3/d84/lgamma__r_8c.html#a6f99aff13f96e26313f4fdfb4fbe5b1d">s2</a>;          <span class="comment">/* status abbreviations */</span></div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;            <span class="keywordtype">int</span>   spccnt;          <span class="comment">/* space count */</span></div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;            <span class="keywordtype">int</span>   <a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a>;</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160; </div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;            stat_str = <a class="code" href="../../d7/d05/dpkg_8c.html#aa77ba14cd48e018786c6b752ed1d11b0">name_hashtable</a>[<a class="code" href="../../d7/d05/dpkg_8c.html#afedd0a411aaf4f39ccf5908554c7699b">status_hashtable</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>]-&gt;status];</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;            name_str = <a class="code" href="../../d7/d05/dpkg_8c.html#aa77ba14cd48e018786c6b752ed1d11b0">name_hashtable</a>[<a class="code" href="../../d7/d05/dpkg_8c.html#a3d27c89e1462f204c221e2cf5c9233d6">package_hashtable</a>[<a class="code" href="../../d7/d05/dpkg_8c.html#afedd0a411aaf4f39ccf5908554c7699b">status_hashtable</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>]-&gt;package]-&gt;name];</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;            vers_str = <a class="code" href="../../d7/d05/dpkg_8c.html#aa77ba14cd48e018786c6b752ed1d11b0">name_hashtable</a>[<a class="code" href="../../d7/d05/dpkg_8c.html#a3d27c89e1462f204c221e2cf5c9233d6">package_hashtable</a>[<a class="code" href="../../d7/d05/dpkg_8c.html#afedd0a411aaf4f39ccf5908554c7699b">status_hashtable</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>]-&gt;package]-&gt;version];</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160; </div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../db/dd4/sm__loop_8c.html#aeca4af21addf3ecee5f37bd8f75d1950">pattern</a> &amp;&amp; <a class="code" href="../../d6/d3d/fnmatch_8h.html#ae8c5fe22c6e8e83faa4a413e9f07f6a0">fnmatch</a>(<a class="code" href="../../db/dd4/sm__loop_8c.html#aeca4af21addf3ecee5f37bd8f75d1950">pattern</a>, name_str, 0) != 0)</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160; </div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;            <span class="comment">/* get abbreviation for status field 1 */</span></div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;            <a class="code" href="../../d3/d84/lgamma__r_8c.html#a1ff9ee3251659529629e761b307fada6">s1</a> = stat_str[0] == <span class="charliteral">&#39;i&#39;</span> ? <span class="charliteral">&#39;i&#39;</span> : <span class="charliteral">&#39;r&#39;</span>;</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160; </div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;            <span class="comment">/* get abbreviation for status field 2 */</span></div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a> = 0, spccnt = 0; stat_str[<a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a>] &amp;&amp; spccnt &lt; 2; <a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a>++) {</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;                <span class="keywordflow">if</span> (stat_str[<a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a>] == <span class="charliteral">&#39; &#39;</span>) spccnt++;</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;            }</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;            <a class="code" href="../../d3/d84/lgamma__r_8c.html#a6f99aff13f96e26313f4fdfb4fbe5b1d">s2</a> = stat_str[<a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a>];</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160; </div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;            <span class="comment">/* print out the line formatted like Debian dpkg */</span></div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;            <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;%c%c  %-14s %s\n&quot;</span>, <a class="code" href="../../d3/d84/lgamma__r_8c.html#a1ff9ee3251659529629e761b307fada6">s1</a>, <a class="code" href="../../d3/d84/lgamma__r_8c.html#a6f99aff13f96e26313f4fdfb4fbe5b1d">s2</a>, name_str, vers_str);</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;        }</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;    }</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;}</div>
<div class="ttc" id="algamma__r_8c_html_a1ff9ee3251659529629e761b307fada6"><div class="ttname"><a href="../../d3/d84/lgamma__r_8c.html#a1ff9ee3251659529629e761b307fada6">s1</a></div><div class="ttdeci">static const double s1</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d84/lgamma__r_8c_source.html#l00128">lgamma_r.c:128</a></div></div>
<div class="ttc" id="algamma__r_8c_html_a6f99aff13f96e26313f4fdfb4fbe5b1d"><div class="ttname"><a href="../../d3/d84/lgamma__r_8c.html#a6f99aff13f96e26313f4fdfb4fbe5b1d">s2</a></div><div class="ttdeci">static const double s2</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d84/lgamma__r_8c_source.html#l00129">lgamma_r.c:129</a></div></div>
<div class="ttc" id="asm__loop_8c_html_aeca4af21addf3ecee5f37bd8f75d1950"><div class="ttname"><a href="../../db/dd4/sm__loop_8c.html#aeca4af21addf3ecee5f37bd8f75d1950">pattern</a></div><div class="ttdeci">int CHAR * pattern</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dd4/sm__loop_8c_source.html#l00040">sm_loop.c:40</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/de7/fnmatch_8c_source.html#l00298">fnmatch()</a>, <a class="el" href="../../dd/d71/gettextP_8h_source.html#l00074">i</a>, <a class="el" href="../../dc/da2/musl_2src_2prng_2random_8c_source.html#l00024">j</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00130">name_hashtable</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00131">package_hashtable</a>, <a class="el" href="../../db/dd4/sm__loop_8c_source.html#l00040">pattern</a>, <a class="el" href="../../d1/dae/libc_2src_2print_2printf_8c_source.html#l01554">printf()</a>, <a class="el" href="../../df/d79/put_8c_source.html#l00027">puts()</a>, <a class="el" href="../../d3/d84/lgamma__r_8c_source.html#l00128">s1</a>, <a class="el" href="../../d3/d84/lgamma__r_8c_source.html#l00129">s2</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00116">STATUS_HASH_PRIME</a>, and <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00132">status_hashtable</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01762">dpkg_main()</a>.</p>

</div>
</div>
<a id="a1d659e0211ffaae0622586fad7f1e327"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d659e0211ffaae0622586fad7f1e327">&#9670;&nbsp;</a></span>make_hash()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void make_hash </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned *&#160;</td>
          <td class="paramname"><em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned *&#160;</td>
          <td class="paramname"><em>decrement</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>hash_prime</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00169">169</a> of file <a class="el" href="../../d7/d05/dpkg_8c_source.html">dpkg.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;{</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> hash_num = key[0];</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keywordtype">int</span> len = <a class="code" href="../../dc/da4/libc_2include_2string_8h.html#a008e171a518fe0e0352f31b245e03875">strlen</a>(key);</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160; </div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="comment">/* Maybe i should have uses a &quot;proper&quot; hashing algorithm here instead</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="comment">     * of making one up myself, seems to be working ok though. */</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> = 1; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> &lt; len; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>++) {</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        <span class="comment">/* shifts the ascii based value and adds it to previous value</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="comment">         * shift amount is mod 24 because long int is 32 bit and data</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="comment">         * to be shifted is 8, don&#39;t want to shift data to where it has</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="comment">         * no effect */</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        hash_num += (key[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>] + key[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>-1]) &lt;&lt; ((key[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>] * <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>) % 24);</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    }</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    *<a class="code" href="../../df/d84/arping_8c.html#a317b24157e7f590740c6e329bfe668dc">start</a> = (unsigned) hash_num % hash_prime;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    *decrement = (unsigned) 1 + (hash_num % (hash_prime - 1));</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;}</div>
<div class="ttc" id="aarping_8c_html_a317b24157e7f590740c6e329bfe668dc"><div class="ttname"><a href="../../df/d84/arping_8c.html#a317b24157e7f590740c6e329bfe668dc">start</a></div><div class="ttdeci">#define start</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d84/arping_8c_source.html#l00095">arping.c:95</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dd/d71/gettextP_8h_source.html#l00074">i</a>, <a class="el" href="../../df/d84/arping_8c_source.html#l00095">start</a>, and <a class="el" href="../../d1/db0/string_8c_source.html#l00005">strlen()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00189">search_name_hashtable()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00356">search_package_hashtable()</a>, and <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00211">search_status_hashtable()</a>.</p>

</div>
</div>
<a id="a56a1bacea0595ff04793ed77a6ee00c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56a1bacea0595ff04793ed77a6ee00c0">&#9670;&nbsp;</a></span>order()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int order </td>
          <td>(</td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>x</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00229">229</a> of file <a class="el" href="../../d7/d05/dpkg_8c_source.html">dpkg.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;{</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#aeb26462df30f47f6fd73ee802457812b">x</a> == <span class="charliteral">&#39;~&#39;</span> ? -1</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        : <a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#aeb26462df30f47f6fd73ee802457812b">x</a> == <span class="charliteral">&#39;\0&#39;</span> ? 0</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        : <a class="code" href="../../d7/dd7/libbb_8h.html#aefb5fe894e4d5f0e52d5853f99200d96">isdigit</a>(<a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#aeb26462df30f47f6fd73ee802457812b">x</a>) ? 0</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        : <a class="code" href="../../d7/dd7/libbb_8h.html#a195193447efef4f373aff481e14eebea">isalpha</a>(<a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#aeb26462df30f47f6fd73ee802457812b">x</a>) ? <a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#aeb26462df30f47f6fd73ee802457812b">x</a></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        : (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)<a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#aeb26462df30f47f6fd73ee802457812b">x</a> + 256</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    );</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;}</div>
<div class="ttc" id="alibbb_8h_html_a195193447efef4f373aff481e14eebea"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#a195193447efef4f373aff481e14eebea">isalpha</a></div><div class="ttdeci">#define isalpha(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dd7/libbb_8h_source.html#l02450">libbb.h:2450</a></div></div>
<div class="ttc" id="alibbb_8h_html_aefb5fe894e4d5f0e52d5853f99200d96"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#aefb5fe894e4d5f0e52d5853f99200d96">isdigit</a></div><div class="ttdeci">#define isdigit(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dd7/libbb_8h_source.html#l02447">libbb.h:2447</a></div></div>
<div class="ttc" id="amusl_2src_2prng_2random_8c_html_aeb26462df30f47f6fd73ee802457812b"><div class="ttname"><a href="../../dc/da2/musl_2src_2prng_2random_8c.html#aeb26462df30f47f6fd73ee802457812b">x</a></div><div class="ttdeci">static uint32_t * x</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da2/musl_2src_2prng_2random_8c_source.html#l00025">random.c:25</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/dd7/libbb_8h_source.html#l02450">isalpha</a>, <a class="el" href="../../d7/dd7/libbb_8h_source.html#l02447">isdigit</a>, and <a class="el" href="../../dc/da2/musl_2src_2prng_2random_8c_source.html#l00025">x</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/df4/comm_8c_source.html#l00058">comm_main()</a>, and <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00240">version_compare_part()</a>.</p>

</div>
</div>
<a id="ac18d5641a1ff4cfc41e95cf3c2528e65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac18d5641a1ff4cfc41e95cf3c2528e65">&#9670;&nbsp;</a></span>package_satisfies_dependency()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int package_satisfies_dependency </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>package</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>depend_type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00963">963</a> of file <a class="el" href="../../d7/d05/dpkg_8c_source.html">dpkg.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;{</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;    <span class="keywordtype">int</span> status_num = <a class="code" href="../../d7/d05/dpkg_8c.html#a82afa66172a836357ebd323585c651cd">search_status_hashtable</a>(<a class="code" href="../../d7/d05/dpkg_8c.html#aa77ba14cd48e018786c6b752ed1d11b0">name_hashtable</a>[<a class="code" href="../../d7/d05/dpkg_8c.html#a3d27c89e1462f204c221e2cf5c9233d6">package_hashtable</a>[package]-&gt;name]);</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160; </div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    <span class="comment">/* status could be unknown if package is a pure virtual</span></div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;<span class="comment">     * provides which cannot satisfy any dependency by itself.</span></div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d7/d05/dpkg_8c.html#afedd0a411aaf4f39ccf5908554c7699b">status_hashtable</a>[status_num] == <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160; </div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;    <span class="keywordflow">switch</span> (depend_type) {</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d7/d05/dpkg_8c.html#a73b480dcdb4db9e6c91e846cf84a304eac9dfc4afeb58573a67d3ed2b91f460ca">EDGE_PRE_DEPENDS</a>: <span class="keywordflow">return</span> <a class="code" href="../../d7/d05/dpkg_8c.html#a7dfbd7f4ae69e4e7c73a932addf7bd6f">get_status</a>(status_num, 3) == <a class="code" href="../../d7/d05/dpkg_8c.html#aaf672b0ba190ab9318a1ec77d2411b21">search_name_hashtable</a>(<span class="stringliteral">&quot;installed&quot;</span>);</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d7/d05/dpkg_8c.html#a73b480dcdb4db9e6c91e846cf84a304ea90d2c9cde2903fb606ea74a193afad99">EDGE_DEPENDS</a>:     <span class="keywordflow">return</span> <a class="code" href="../../d7/d05/dpkg_8c.html#a7dfbd7f4ae69e4e7c73a932addf7bd6f">get_status</a>(status_num, 1) == <a class="code" href="../../d7/d05/dpkg_8c.html#aaf672b0ba190ab9318a1ec77d2411b21">search_name_hashtable</a>(<span class="stringliteral">&quot;install&quot;</span>);</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;    }</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00143">EDGE_DEPENDS</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00141">EDGE_PRE_DEPENDS</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00692">get_status()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00130">name_hashtable</a>, <a class="el" href="../../d9/d14/general_8h_source.html#l00053">NULL</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00131">package_hashtable</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00189">search_name_hashtable()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00211">search_status_hashtable()</a>, and <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00132">status_hashtable</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00980">check_deps()</a>.</p>

</div>
</div>
<a id="a1670583abdc4238b66159573d989030c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1670583abdc4238b66159573d989030c">&#9670;&nbsp;</a></span>purge_package()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void purge_package </td>
          <td>(</td>
          <td class="paramtype">const unsigned&#160;</td>
          <td class="paramname"><em>package_num</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01435">1435</a> of file <a class="el" href="../../d7/d05/dpkg_8c_source.html">dpkg.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;{</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *package_name = <a class="code" href="../../d7/d05/dpkg_8c.html#aa77ba14cd48e018786c6b752ed1d11b0">name_hashtable</a>[<a class="code" href="../../d7/d05/dpkg_8c.html#a3d27c89e1462f204c221e2cf5c9233d6">package_hashtable</a>[package_num]-&gt;name];</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *package_version = <a class="code" href="../../d7/d05/dpkg_8c.html#aa77ba14cd48e018786c6b752ed1d11b0">name_hashtable</a>[<a class="code" href="../../d7/d05/dpkg_8c.html#a3d27c89e1462f204c221e2cf5c9233d6">package_hashtable</a>[package_num]-&gt;version];</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> status_num = <a class="code" href="../../d7/d05/dpkg_8c.html#a82afa66172a836357ebd323585c651cd">search_status_hashtable</a>(package_name);</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;    <span class="keywordtype">char</span> **remove_files;</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;    <span class="keywordtype">char</span> **exclude_files;</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;    <span class="keywordtype">char</span> list_name[<a class="code" href="../../dc/da4/libc_2include_2string_8h.html#a008e171a518fe0e0352f31b245e03875">strlen</a>(package_name) + 25];</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160; </div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;    <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;Purging %s (%s)...\n&quot;</span>, package_name, package_version);</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160; </div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;    <span class="comment">/* Run prerm script */</span></div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#a8a3619b4e9563c7afeb0615b2ac76da8">run_package_script_or_die</a>(package_name, <span class="stringliteral">&quot;prerm&quot;</span>);</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160; </div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;    <span class="comment">/* Create a list of files to remove */</span></div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;    <a class="code" href="../../d1/dae/libc_2src_2print_2printf_8c.html#a9cafd44c2e1bfa384f71d56949e3b3fc">sprintf</a>(list_name, <span class="stringliteral">&quot;/var/lib/dpkg/info/%s.%s&quot;</span>, package_name, <span class="stringliteral">&quot;list&quot;</span>);</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;    remove_files = <a class="code" href="../../d7/d05/dpkg_8c.html#a0febf2008b769ba987e2c500bf982171">create_list</a>(list_name);</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160; </div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;    <span class="comment">/* Some directories cant be removed straight away, so do multiple passes */</span></div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;    <span class="keywordflow">while</span> (<a class="code" href="../../d7/d05/dpkg_8c.html#a62ac414c976376ffa1133cef96c4c2fc">remove_file_array</a>(remove_files, <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#abca1e5c129c765f55274cc5f8c23ccf0">free_array</a>(remove_files);</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160; </div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;    <span class="comment">/* Create a list of all /var/lib/dpkg/info/&lt;package&gt; files */</span></div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;    remove_files = <a class="code" href="../../d7/d05/dpkg_8c.html#a23bd2b3b34eac44e1e0cb5c5681bf425">all_control_list</a>(package_name);</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160; </div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;    <span class="comment">/* Delete all of them except the postrm script */</span></div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;    exclude_files = <a class="code" href="../../d7/dd7/libbb_8h.html#a6b9d12af476b8fa4b9de87028b0ac27c">xzalloc</a>(<span class="keyword">sizeof</span>(exclude_files[0]) * 2);</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;    exclude_files[0] = <a class="code" href="../../d7/dd7/libbb_8h.html#a4d828f2f187169b160c384cde2d0b0b0">xasprintf</a>(<span class="stringliteral">&quot;/var/lib/dpkg/info/%s.%s&quot;</span>, package_name, <span class="stringliteral">&quot;postrm&quot;</span>);</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#a62ac414c976376ffa1133cef96c4c2fc">remove_file_array</a>(remove_files, exclude_files);</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#abca1e5c129c765f55274cc5f8c23ccf0">free_array</a>(exclude_files);</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160; </div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;    <span class="comment">/* Run and remove postrm script */</span></div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#a8a3619b4e9563c7afeb0615b2ac76da8">run_package_script_or_die</a>(package_name, <span class="stringliteral">&quot;postrm&quot;</span>);</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#a62ac414c976376ffa1133cef96c4c2fc">remove_file_array</a>(remove_files, <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160; </div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#abca1e5c129c765f55274cc5f8c23ccf0">free_array</a>(remove_files);</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160; </div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;    <span class="comment">/* Change package status */</span></div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#aaaa2b787afd11b42a445289c9256208e">set_status</a>(status_num, <span class="stringliteral">&quot;not-installed&quot;</span>, 3);</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;}</div>
<div class="ttc" id="adpkg_8c_html_a0febf2008b769ba987e2c500bf982171"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#a0febf2008b769ba987e2c500bf982171">create_list</a></div><div class="ttdeci">static char ** create_list(const char *filename)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l01182">dpkg.c:1182</a></div></div>
<div class="ttc" id="adpkg_8c_html_a23bd2b3b34eac44e1e0cb5c5681bf425"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#a23bd2b3b34eac44e1e0cb5c5681bf425">all_control_list</a></div><div class="ttdeci">static char ** all_control_list(const char *package_name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l01313">dpkg.c:1313</a></div></div>
<div class="ttc" id="adpkg_8c_html_a62ac414c976376ffa1133cef96c4c2fc"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#a62ac414c976376ffa1133cef96c4c2fc">remove_file_array</a></div><div class="ttdeci">static int remove_file_array(char **remove_names, char **exclude_names)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l01229">dpkg.c:1229</a></div></div>
<div class="ttc" id="adpkg_8c_html_abca1e5c129c765f55274cc5f8c23ccf0"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#abca1e5c129c765f55274cc5f8c23ccf0">free_array</a></div><div class="ttdeci">static void free_array(char **array)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l01329">dpkg.c:1329</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01313">all_control_list()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01182">create_list()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01329">free_array()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00130">name_hashtable</a>, <a class="el" href="../../d9/d14/general_8h_source.html#l00053">NULL</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00131">package_hashtable</a>, <a class="el" href="../../d1/dae/libc_2src_2print_2printf_8c_source.html#l01554">printf()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01229">remove_file_array()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01263">run_package_script_or_die()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00211">search_status_hashtable()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00714">set_status()</a>, <a class="el" href="../../d1/dae/libc_2src_2print_2printf_8c_source.html#l01563">sprintf()</a>, <a class="el" href="../../d1/db0/string_8c_source.html#l00005">strlen()</a>, <a class="el" href="../../d7/dd7/libbb_8h.html#a4d828f2f187169b160c384cde2d0b0b0">xasprintf()</a>, and <a class="el" href="../../d9/dd6/xfuncs__printf_8c_source.html#l00069">xzalloc()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01762">dpkg_main()</a>.</p>

</div>
</div>
<a id="ad411349b2c01cc35e5fc7d76e5e0573c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad411349b2c01cc35e5fc7d76e5e0573c">&#9670;&nbsp;</a></span>read_package_field()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int read_package_field </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>package_buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>field_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>field_value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00537">537</a> of file <a class="el" href="../../d7/d05/dpkg_8c_source.html">dpkg.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;{</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    <span class="keywordtype">int</span> offset_name_start = 0;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    <span class="keywordtype">int</span> offset_name_end = 0;</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <span class="keywordtype">int</span> offset_value_start = 0;</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <span class="keywordtype">int</span> offset_value_end = 0;</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d4/d49/vi_8c.html#aae6364a195a181790fe7379c6b44a343">offset</a> = 0;</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <span class="keywordtype">int</span> next_offset;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <span class="keywordtype">int</span> name_length;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    <span class="keywordtype">int</span> value_length;</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <span class="keywordtype">int</span> exit_flag = <a class="code" href="../../d9/dd0/bash_2test_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160; </div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <span class="keywordflow">if</span> (package_buffer == <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        *field_name = <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;        *field_value = <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    }</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    <span class="keywordflow">while</span> (1) {</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        next_offset = <a class="code" href="../../d4/d49/vi_8c.html#aae6364a195a181790fe7379c6b44a343">offset</a> + 1;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;        <span class="keywordflow">switch</span> (package_buffer[<a class="code" href="../../d4/d49/vi_8c.html#aae6364a195a181790fe7379c6b44a343">offset</a>]) {</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;\0&#39;</span>:</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;                exit_flag = <a class="code" href="../../d9/dd0/bash_2test_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;:&#39;</span>:</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;                <span class="keywordflow">if</span> (offset_name_end == 0) {</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;                    offset_name_end = <a class="code" href="../../d4/d49/vi_8c.html#aae6364a195a181790fe7379c6b44a343">offset</a>;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;                    offset_value_start = next_offset;</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;                }</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;                <span class="comment">/* TODO: Name might still have trailing spaces if &#39;:&#39; isn&#39;t</span></div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;<span class="comment">                 * immediately after name */</span></div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;\n&#39;</span>:</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;                <span class="comment">/* TODO: The char next_offset may be out of bounds */</span></div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;                <span class="keywordflow">if</span> (package_buffer[next_offset] != <span class="charliteral">&#39; &#39;</span>) {</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;                    exit_flag = <a class="code" href="../../d9/dd0/bash_2test_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;                }</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;\t&#39;</span>:</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39; &#39;</span>:</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;                <span class="comment">/* increment the value start point if its a just filler */</span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;                <span class="keywordflow">if</span> (offset_name_start == <a class="code" href="../../d4/d49/vi_8c.html#aae6364a195a181790fe7379c6b44a343">offset</a>) {</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;                    offset_name_start++;</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;                }</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;                <span class="keywordflow">if</span> (offset_value_start == <a class="code" href="../../d4/d49/vi_8c.html#aae6364a195a181790fe7379c6b44a343">offset</a>) {</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;                    offset_value_start++;</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;                }</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        }</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        <span class="keywordflow">if</span> (exit_flag) {</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;            <span class="comment">/* Check that the names are valid */</span></div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;            offset_value_end = <a class="code" href="../../d4/d49/vi_8c.html#aae6364a195a181790fe7379c6b44a343">offset</a>;</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;            name_length = offset_name_end - offset_name_start;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;            value_length = offset_value_end - offset_value_start;</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;            <span class="keywordflow">if</span> (name_length == 0) {</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;            }</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;            <span class="keywordflow">if</span> ((name_length &gt; 0) &amp;&amp; (value_length &gt; 0)) {</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;            }</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160; </div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;            <span class="comment">/* If not valid, start fresh with next field */</span></div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;            exit_flag = <a class="code" href="../../d9/dd0/bash_2test_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;            offset_name_start = <a class="code" href="../../d4/d49/vi_8c.html#aae6364a195a181790fe7379c6b44a343">offset</a> + 1;</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;            offset_name_end = 0;</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;            offset_value_start = <a class="code" href="../../d4/d49/vi_8c.html#aae6364a195a181790fe7379c6b44a343">offset</a> + 1;</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;            offset_value_end = <a class="code" href="../../d4/d49/vi_8c.html#aae6364a195a181790fe7379c6b44a343">offset</a> + 1;</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;            <a class="code" href="../../d4/d49/vi_8c.html#aae6364a195a181790fe7379c6b44a343">offset</a>++;</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;        }</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;        <a class="code" href="../../d4/d49/vi_8c.html#aae6364a195a181790fe7379c6b44a343">offset</a>++;</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    }</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    *field_name = <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    <span class="keywordflow">if</span> (name_length) {</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        *field_name = <a class="code" href="../../d7/dd7/libbb_8h.html#ab08a8f00393f0dd77050fccaecba3a7e">xstrndup</a>(&amp;package_buffer[offset_name_start], name_length);</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    }</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    *field_value = <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    <span class="keywordflow">if</span> (value_length &gt; 0) {</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;        *field_value = <a class="code" href="../../d7/dd7/libbb_8h.html#ab08a8f00393f0dd77050fccaecba3a7e">xstrndup</a>(&amp;package_buffer[offset_value_start], value_length);</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    }</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    <span class="keywordflow">return</span> next_offset;</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;}</div>
<div class="ttc" id="abash_2test_8c_html_aa93f0eb578d23995850d61f7d61c55c1"><div class="ttname"><a href="../../d9/dd0/bash_2test_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a></div><div class="ttdeci">#define FALSE</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd0/bash_2test_8c_source.html#l00096">test.c:96</a></div></div>
<div class="ttc" id="avi_8c_html_aae6364a195a181790fe7379c6b44a343"><div class="ttname"><a href="../../d4/d49/vi_8c.html#aae6364a195a181790fe7379c6b44a343">offset</a></div><div class="ttdeci">#define offset</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d49/vi_8c_source.html#l00486">vi.c:486</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d9/dd0/bash_2test_8c_source.html#l00096">FALSE</a>, <a class="el" href="../../d9/d14/general_8h_source.html#l00053">NULL</a>, <a class="el" href="../../d4/d49/vi_8c_source.html#l00486">offset</a>, <a class="el" href="../../d9/dd0/bash_2test_8c_source.html#l00095">TRUE</a>, and <a class="el" href="../../d9/dd6/xfuncs__printf_8c_source.html#l00094">xstrndup()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00618">fill_package_struct()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00797">write_buffer_no_status()</a>, and <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00814">write_status_file()</a>.</p>

</div>
</div>
<a id="a62ac414c976376ffa1133cef96c4c2fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a62ac414c976376ffa1133cef96c4c2fc">&#9670;&nbsp;</a></span>remove_file_array()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int remove_file_array </td>
          <td>(</td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>remove_names</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>exclude_names</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01229">1229</a> of file <a class="el" href="../../d7/d05/dpkg_8c_source.html">dpkg.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;{</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;    <span class="keyword">struct </span><a class="code" href="../../dd/d15/musl_2arch_2x86__64_2bits_2stat_8h.html#da/de7/structstat">stat</a> path_stat;</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;    <span class="keywordtype">int</span> remove_flag = 1; <span class="comment">/* not removed anything yet */</span></div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>, <a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a>;</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160; </div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;    <span class="keywordflow">if</span> (remove_names == <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;    }</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> = 0; remove_names[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>] != <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>++) {</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d7/d05/dpkg_8c.html#a2ad7dd50933c34eddd93c145f90a3638">is_builtin_exclude</a>(remove_names[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>]))</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;        <span class="keywordflow">if</span> (exclude_names != <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a> = 0; exclude_names[<a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a>] != <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>; <a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a>++) {</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../d5/db0/dynlink_8c.html#af3054366f27929432795c5ae420a5294">strcmp</a>(remove_names[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>], exclude_names[<a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a>]) == 0) {</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;                    <span class="keywordflow">goto</span> <a class="code" href="../../d2/dd6/dd_8c.html#aca953b4d1629f79e7c2e9a5f9ae30c69">skip</a>;</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;                }</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;            }</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;        }</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;        <span class="comment">/* TODO: why we are checking lstat? we can just try rm/rmdir */</span></div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d4/d11/apps_2base_2bash_2lib_2sh_2getcwd_8c.html#ae730c85752284268b39560df693cb207">lstat</a>(remove_names[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>], &amp;path_stat) &lt; 0) {</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;        }</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d9/d0b/include_2posixstat_8h.html#a70b64ed67c0ab484b4ba09487da34e91">S_ISDIR</a>(path_stat.st_mode)) {</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;            remove_flag &amp;= <a class="code" href="../../de/d97/musl_2include_2unistd_8h.html#a14a7903a7e93348ee0403b0695a5bee0">rmdir</a>(remove_names[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>]); <span class="comment">/* 0 if no error */</span></div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;            remove_flag &amp;= <a class="code" href="../../de/d97/musl_2include_2unistd_8h.html#a4ade26dbdb332f64c44daf49ba949ff4">unlink</a>(remove_names[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>]); <span class="comment">/* 0 if no error */</span></div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;        }</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160; <a class="code" href="../../d2/dd6/dd_8c.html#aca953b4d1629f79e7c2e9a5f9ae30c69">skip</a>:</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;    }</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;    <span class="keywordflow">return</span> (remove_flag == 0);</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;}</div>
<div class="ttc" id="aapps_2base_2bash_2lib_2sh_2getcwd_8c_html_ae730c85752284268b39560df693cb207"><div class="ttname"><a href="../../d4/d11/apps_2base_2bash_2lib_2sh_2getcwd_8c.html#ae730c85752284268b39560df693cb207">lstat</a></div><div class="ttdeci">#define lstat</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d11/apps_2base_2bash_2lib_2sh_2getcwd_8c_source.html#l00064">getcwd.c:64</a></div></div>
<div class="ttc" id="add_8c_html_aca953b4d1629f79e7c2e9a5f9ae30c69"><div class="ttname"><a href="../../d2/dd6/dd_8c.html#aca953b4d1629f79e7c2e9a5f9ae30c69">skip</a></div><div class="ttdeci">#define skip</div></div>
<div class="ttc" id="adpkg_8c_html_a2ad7dd50933c34eddd93c145f90a3638"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#a2ad7dd50933c34eddd93c145f90a3638">is_builtin_exclude</a></div><div class="ttdeci">static int is_builtin_exclude(const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l01211">dpkg.c:1211</a></div></div>
<div class="ttc" id="ainclude_2posixstat_8h_html_a70b64ed67c0ab484b4ba09487da34e91"><div class="ttname"><a href="../../d9/d0b/include_2posixstat_8h.html#a70b64ed67c0ab484b4ba09487da34e91">S_ISDIR</a></div><div class="ttdeci">#define S_ISDIR(m)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d0b/include_2posixstat_8h_source.html#l00088">posixstat.h:88</a></div></div>
<div class="ttc" id="amusl_2arch_2x86__64_2bits_2stat_8h_html_da/de7/structstat"><div class="ttname"><a href="../../dd/d15/musl_2arch_2x86__64_2bits_2stat_8h.html#da/de7/structstat">stat</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/da5/musl_2arch_2aarch64_2bits_2stat_8h_source.html#l00001">stat.h:1</a></div></div>
<div class="ttc" id="amusl_2include_2unistd_8h_html_a14a7903a7e93348ee0403b0695a5bee0"><div class="ttname"><a href="../../de/d97/musl_2include_2unistd_8h.html#a14a7903a7e93348ee0403b0695a5bee0">rmdir</a></div><div class="ttdeci">int rmdir(const char *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/ddc/musl_2src_2unistd_2rmdir_8c_source.html#l00005">rmdir.c:5</a></div></div>
<div class="ttc" id="amusl_2include_2unistd_8h_html_a4ade26dbdb332f64c44daf49ba949ff4"><div class="ttname"><a href="../../de/d97/musl_2include_2unistd_8h.html#a4ade26dbdb332f64c44daf49ba949ff4">unlink</a></div><div class="ttdeci">int unlink(const char *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/db3/musl_2src_2unistd_2unlink_8c_source.html#l00005">unlink.c:5</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dd/d71/gettextP_8h_source.html#l00074">i</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01211">is_builtin_exclude()</a>, <a class="el" href="../../dc/da2/musl_2src_2prng_2random_8c_source.html#l00024">j</a>, <a class="el" href="../../d4/d11/apps_2base_2bash_2lib_2sh_2getcwd_8c_source.html#l00064">lstat</a>, <a class="el" href="../../d9/d14/general_8h_source.html#l00053">NULL</a>, <a class="el" href="../../d8/ddc/musl_2src_2unistd_2rmdir_8c_source.html#l00005">rmdir()</a>, <a class="el" href="../../d9/d0b/include_2posixstat_8h_source.html#l00088">S_ISDIR</a>, <a class="el" href="../../d2/dd6/dd_8c.html#aca953b4d1629f79e7c2e9a5f9ae30c69">skip</a>, <a class="el" href="../../de/da5/musl_2arch_2aarch64_2bits_2stat_8h_source.html#l00004">stat::st_mode</a>, <a class="el" href="../../d5/db0/dynlink_8c_source.html#l00174">strcmp</a>, and <a class="el" href="../../d8/db3/musl_2src_2unistd_2unlink_8c_source.html#l00005">unlink()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01435">purge_package()</a>, and <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01384">remove_package()</a>.</p>

</div>
</div>
<a id="a984e18ca7078013aad4b5c3c396093f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a984e18ca7078013aad4b5c3c396093f3">&#9670;&nbsp;</a></span>remove_package()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void remove_package </td>
          <td>(</td>
          <td class="paramtype">const unsigned&#160;</td>
          <td class="paramname"><em>package_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>noisy</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01384">1384</a> of file <a class="el" href="../../d7/d05/dpkg_8c_source.html">dpkg.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;{</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *package_name = <a class="code" href="../../d7/d05/dpkg_8c.html#aa77ba14cd48e018786c6b752ed1d11b0">name_hashtable</a>[<a class="code" href="../../d7/d05/dpkg_8c.html#a3d27c89e1462f204c221e2cf5c9233d6">package_hashtable</a>[package_num]-&gt;name];</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *package_version = <a class="code" href="../../d7/d05/dpkg_8c.html#aa77ba14cd48e018786c6b752ed1d11b0">name_hashtable</a>[<a class="code" href="../../d7/d05/dpkg_8c.html#a3d27c89e1462f204c221e2cf5c9233d6">package_hashtable</a>[package_num]-&gt;version];</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> status_num = <a class="code" href="../../d7/d05/dpkg_8c.html#a82afa66172a836357ebd323585c651cd">search_status_hashtable</a>(package_name);</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> package_name_length = <a class="code" href="../../dc/da4/libc_2include_2string_8h.html#a008e171a518fe0e0352f31b245e03875">strlen</a>(package_name);</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;    <span class="keywordtype">char</span> **remove_files;</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;    <span class="keywordtype">char</span> **exclude_files;</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;    <span class="keywordtype">char</span> list_name[package_name_length + 25];</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;    <span class="keywordtype">char</span> conffile_name[package_name_length + 30];</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160; </div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;    <span class="keywordflow">if</span> (noisy)</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;        <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;Removing %s (%s)...\n&quot;</span>, package_name, package_version);</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160; </div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;    <span class="comment">/* Run prerm script */</span></div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#a8a3619b4e9563c7afeb0615b2ac76da8">run_package_script_or_die</a>(package_name, <span class="stringliteral">&quot;prerm&quot;</span>);</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160; </div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;    <span class="comment">/* Create a list of files to remove, and a separate list of those to keep */</span></div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;    <a class="code" href="../../d1/dae/libc_2src_2print_2printf_8c.html#a9cafd44c2e1bfa384f71d56949e3b3fc">sprintf</a>(list_name, <span class="stringliteral">&quot;/var/lib/dpkg/info/%s.%s&quot;</span>, package_name, <span class="stringliteral">&quot;list&quot;</span>);</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;    remove_files = <a class="code" href="../../d7/d05/dpkg_8c.html#a0febf2008b769ba987e2c500bf982171">create_list</a>(list_name);</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160; </div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;    <a class="code" href="../../d1/dae/libc_2src_2print_2printf_8c.html#a9cafd44c2e1bfa384f71d56949e3b3fc">sprintf</a>(conffile_name, <span class="stringliteral">&quot;/var/lib/dpkg/info/%s.%s&quot;</span>, package_name, <span class="stringliteral">&quot;conffiles&quot;</span>);</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;    exclude_files = <a class="code" href="../../d7/d05/dpkg_8c.html#a0febf2008b769ba987e2c500bf982171">create_list</a>(conffile_name);</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160; </div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;    <span class="comment">/* Some directories can&#39;t be removed straight away, so do multiple passes */</span></div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;    <span class="keywordflow">while</span> (<a class="code" href="../../d7/d05/dpkg_8c.html#a62ac414c976376ffa1133cef96c4c2fc">remove_file_array</a>(remove_files, exclude_files))</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#abca1e5c129c765f55274cc5f8c23ccf0">free_array</a>(exclude_files);</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#abca1e5c129c765f55274cc5f8c23ccf0">free_array</a>(remove_files);</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160; </div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;    <span class="comment">/* Create a list of files in /var/lib/dpkg/info/&lt;package&gt;.* to keep */</span></div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;    exclude_files = <a class="code" href="../../d7/dd7/libbb_8h.html#a6b9d12af476b8fa4b9de87028b0ac27c">xzalloc</a>(<span class="keyword">sizeof</span>(exclude_files[0]) * 3);</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;    exclude_files[0] = <a class="code" href="../../dc/dd1/pathchk_8c.html#ac7a701bce03d77bad6b57003d0fe73df">xstrdup</a>(conffile_name);</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;    exclude_files[1] = <a class="code" href="../../d7/dd7/libbb_8h.html#a4d828f2f187169b160c384cde2d0b0b0">xasprintf</a>(<span class="stringliteral">&quot;/var/lib/dpkg/info/%s.%s&quot;</span>, package_name, <span class="stringliteral">&quot;postrm&quot;</span>);</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160; </div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;    <span class="comment">/* Create a list of all /var/lib/dpkg/info/&lt;package&gt; files */</span></div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;    remove_files = <a class="code" href="../../d7/d05/dpkg_8c.html#a23bd2b3b34eac44e1e0cb5c5681bf425">all_control_list</a>(package_name);</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160; </div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#a62ac414c976376ffa1133cef96c4c2fc">remove_file_array</a>(remove_files, exclude_files);</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#abca1e5c129c765f55274cc5f8c23ccf0">free_array</a>(remove_files);</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#abca1e5c129c765f55274cc5f8c23ccf0">free_array</a>(exclude_files);</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160; </div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;    <span class="comment">/* rename &lt;package&gt;.conffiles to &lt;package&gt;.list</span></div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;<span class="comment">     * The conffiles control file isn&#39;t required in Debian packages, so don&#39;t</span></div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;<span class="comment">     * error out if it&#39;s missing.  */</span></div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;    <a class="code" href="../../da/df1/mkbuiltins_8c.html#abfa4a8f14fd2a6e8f8fe31032c44dbef">rename</a>(conffile_name, list_name);</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160; </div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;    <span class="comment">/* Change package status */</span></div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#aaaa2b787afd11b42a445289c9256208e">set_status</a>(status_num, <span class="stringliteral">&quot;config-files&quot;</span>, 3);</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;}</div>
<div class="ttc" id="amkbuiltins_8c_html_abfa4a8f14fd2a6e8f8fe31032c44dbef"><div class="ttname"><a href="../../da/df1/mkbuiltins_8c.html#abfa4a8f14fd2a6e8f8fe31032c44dbef">rename</a></div><div class="ttdeci">static int rename()</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01313">all_control_list()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01182">create_list()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01329">free_array()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00130">name_hashtable</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00131">package_hashtable</a>, <a class="el" href="../../d1/dae/libc_2src_2print_2printf_8c_source.html#l01554">printf()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01229">remove_file_array()</a>, <a class="el" href="../../da/df1/mkbuiltins_8c.html#abfa4a8f14fd2a6e8f8fe31032c44dbef">rename()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01263">run_package_script_or_die()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00211">search_status_hashtable()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00714">set_status()</a>, <a class="el" href="../../d1/dae/libc_2src_2print_2printf_8c_source.html#l01563">sprintf()</a>, <a class="el" href="../../d1/db0/string_8c_source.html#l00005">strlen()</a>, <a class="el" href="../../d7/dd7/libbb_8h.html#a4d828f2f187169b160c384cde2d0b0b0">xasprintf()</a>, <a class="el" href="../../dc/dd1/pathchk_8c_source.html#l00258">xstrdup()</a>, and <a class="el" href="../../d9/dd6/xfuncs__printf_8c_source.html#l00069">xzalloc()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01762">dpkg_main()</a>, and <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01654">unpack_package()</a>.</p>

</div>
</div>
<a id="a8a3619b4e9563c7afeb0615b2ac76da8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a3619b4e9563c7afeb0615b2ac76da8">&#9670;&nbsp;</a></span>run_package_script_or_die()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void run_package_script_or_die </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>package_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>script_type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01263">1263</a> of file <a class="el" href="../../d7/d05/dpkg_8c_source.html">dpkg.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;{</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;    <span class="keywordtype">char</span> *script_path;</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;    <span class="keywordtype">int</span> result;</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160; </div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;    script_path = <a class="code" href="../../d7/dd7/libbb_8h.html#a4d828f2f187169b160c384cde2d0b0b0">xasprintf</a>(<span class="stringliteral">&quot;/var/lib/dpkg/info/%s.%s&quot;</span>, package_name, script_type);</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160; </div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;    <span class="comment">/* If the file doesn&#39;t exist it isn&#39;t fatal */</span></div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;    result = <a class="code" href="../../de/d97/musl_2include_2unistd_8h.html#a7b0e7db280374cea9894dcb2ec40a8c9">access</a>(script_path, <a class="code" href="../../d0/dbe/apps_2base_2bash_2lib_2glob_2glob_8c.html#af837744613408b57dc3654fbc3bcf900">F_OK</a>) ? <a class="code" href="../../d9/d84/man2html_8c.html#a687984f47d8cce148d1b914d2b79612a">EXIT_SUCCESS</a> : <a class="code" href="../../d7/d2f/libc_2include_2stdlib_8h.html#a0680e05faf0347c931689fb3fe3d7403">system</a>(script_path);</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;    <a class="code" href="../../d5/db0/dynlink_8c.html#a2c6efa7679f8cd9f61af96e105017560">free</a>(script_path);</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;    <span class="keywordflow">if</span> (result)</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;        <a class="code" href="../../d7/dd7/libbb_8h.html#a1992b68ae7d01f7da91e31e351ca3b33">bb_error_msg_and_die</a>(<span class="stringliteral">&quot;%s failed, exit code %d&quot;</span>, script_type, result);</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;}</div>
<div class="ttc" id="aapps_2base_2bash_2lib_2glob_2glob_8c_html_af837744613408b57dc3654fbc3bcf900"><div class="ttname"><a href="../../d0/dbe/apps_2base_2bash_2lib_2glob_2glob_8c.html#af837744613408b57dc3654fbc3bcf900">F_OK</a></div><div class="ttdeci">#define F_OK</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dbe/apps_2base_2bash_2lib_2glob_2glob_8c_source.html#l00045">glob.c:45</a></div></div>
<div class="ttc" id="alibc_2include_2stdlib_8h_html_a0680e05faf0347c931689fb3fe3d7403"><div class="ttname"><a href="../../d7/d2f/libc_2include_2stdlib_8h.html#a0680e05faf0347c931689fb3fe3d7403">system</a></div><div class="ttdeci">int system(const char *command)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dd7/lib_8c_source.html#l00067">lib.c:67</a></div></div>
<div class="ttc" id="amusl_2include_2unistd_8h_html_a7b0e7db280374cea9894dcb2ec40a8c9"><div class="ttname"><a href="../../de/d97/musl_2include_2unistd_8h.html#a7b0e7db280374cea9894dcb2ec40a8c9">access</a></div><div class="ttdeci">int access(const char *, int)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d85/access_8c_source.html#l00005">access.c:5</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d3/d85/access_8c_source.html#l00005">access()</a>, <a class="el" href="../../d7/dd7/libbb_8h.html#a1992b68ae7d01f7da91e31e351ca3b33">bb_error_msg_and_die()</a>, <a class="el" href="../../d9/d84/man2html_8c_source.html#l00095">EXIT_SUCCESS</a>, <a class="el" href="../../d0/dbe/apps_2base_2bash_2lib_2glob_2glob_8c_source.html#l00045">F_OK</a>, <a class="el" href="../../d5/db0/dynlink_8c_source.html#l00036">free</a>, <a class="el" href="../../de/dd7/lib_8c_source.html#l00067">system()</a>, and <a class="el" href="../../d7/dd7/libbb_8h.html#a4d828f2f187169b160c384cde2d0b0b0">xasprintf()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01744">configure_package()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01435">purge_package()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01384">remove_package()</a>, and <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01654">unpack_package()</a>.</p>

</div>
</div>
<a id="aee73cbf4da2d4f28b92f3b5b7cb40192"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee73cbf4da2d4f28b92f3b5b7cb40192">&#9670;&nbsp;</a></span>search_for_provides()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int search_for_provides </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>needle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>start_at</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00395">395</a> of file <a class="el" href="../../d7/d05/dpkg_8c_source.html">dpkg.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;{</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>, <a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a>;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#d1/d51/structcommon__node__s">common_node_t</a> *<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> = start_at + 1; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> &lt; <a class="code" href="../../d7/d05/dpkg_8c.html#a69b135c7de1bd4344e12676bb1946fa1">PACKAGE_HASH_PRIME</a>; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>++) {</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> = <a class="code" href="../../d7/d05/dpkg_8c.html#a3d27c89e1462f204c221e2cf5c9233d6">package_hashtable</a>[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>];</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a> == <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a> = 0; <a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a> &lt; <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;num_of_edges; <a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a>++)</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;edge[<a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a>]-&gt;type == <a class="code" href="../../d7/d05/dpkg_8c.html#a73b480dcdb4db9e6c91e846cf84a304ea64e38f4113bce59cb73cefbc1646eb3e">EDGE_PROVIDES</a> &amp;&amp; <a class="code" href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a>-&gt;edge[<a class="code" href="../../dc/da2/musl_2src_2prng_2random_8c.html#a37d972ae0b47b9099e30983131d31916">j</a>]-&gt;name == needle)</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>;</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    }</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;}</div>
<div class="ttc" id="aglob__loop_8c_html_ac483f6ce851c9ecd9fb835ff7551737c"><div class="ttname"><a href="../../d8/d64/glob__loop_8c.html#ac483f6ce851c9ecd9fb835ff7551737c">p</a></div><div class="ttdeci">p</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d64/glob__loop_8c_source.html#l00031">glob_loop.c:31</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00146">EDGE_PROVIDES</a>, <a class="el" href="../../dd/d71/gettextP_8h_source.html#l00074">i</a>, <a class="el" href="../../dc/da2/musl_2src_2prng_2random_8c_source.html#l00024">j</a>, <a class="el" href="../../d9/d14/general_8h_source.html#l00053">NULL</a>, <a class="el" href="../../d8/d64/glob__loop_8c_source.html#l00031">p</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00098">PACKAGE_HASH_PRIME</a>, and <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00131">package_hashtable</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00980">check_deps()</a>.</p>

</div>
</div>
<a id="aaf672b0ba190ab9318a1ec77d2411b21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf672b0ba190ab9318a1ec77d2411b21">&#9670;&nbsp;</a></span>search_name_hashtable()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int search_name_hashtable </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00189">189</a> of file <a class="el" href="../../d7/d05/dpkg_8c_source.html">dpkg.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;{</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="keywordtype">unsigned</span> probe_address;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="keywordtype">unsigned</span> probe_decrement;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160; </div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#a1d659e0211ffaae0622586fad7f1e327">make_hash</a>(key, &amp;probe_address, &amp;probe_decrement, <a class="code" href="../../d7/d05/dpkg_8c.html#a34b2c25dfc0d68980864991d97671bbc">NAME_HASH_PRIME</a>);</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="keywordflow">while</span> (<a class="code" href="../../d7/d05/dpkg_8c.html#aa77ba14cd48e018786c6b752ed1d11b0">name_hashtable</a>[probe_address] != <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d5/db0/dynlink_8c.html#af3054366f27929432795c5ae420a5294">strcmp</a>(<a class="code" href="../../d7/d05/dpkg_8c.html#aa77ba14cd48e018786c6b752ed1d11b0">name_hashtable</a>[probe_address], key) == 0) {</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;            <span class="keywordflow">return</span> probe_address;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        }</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        probe_address -= probe_decrement;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        <span class="keywordflow">if</span> ((<span class="keywordtype">int</span>)probe_address &lt; 0) {</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;            probe_address += <a class="code" href="../../d7/d05/dpkg_8c.html#a34b2c25dfc0d68980864991d97671bbc">NAME_HASH_PRIME</a>;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        }</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    }</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#aa77ba14cd48e018786c6b752ed1d11b0">name_hashtable</a>[probe_address] = <a class="code" href="../../dc/dd1/pathchk_8c.html#ac7a701bce03d77bad6b57003d0fe73df">xstrdup</a>(key);</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordflow">return</span> probe_address;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;}</div>
<div class="ttc" id="adpkg_8c_html_a1d659e0211ffaae0622586fad7f1e327"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#a1d659e0211ffaae0622586fad7f1e327">make_hash</a></div><div class="ttdeci">static void make_hash(const char *key, unsigned *start, unsigned *decrement, const int hash_prime)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00169">dpkg.c:169</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00169">make_hash()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00088">NAME_HASH_PRIME</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00130">name_hashtable</a>, <a class="el" href="../../d9/d14/general_8h_source.html#l00053">NULL</a>, <a class="el" href="../../d5/db0/dynlink_8c_source.html#l00174">strcmp</a>, and <a class="el" href="../../dc/dd1/pathchk_8c_source.html#l00258">xstrdup()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00429">add_split_dependencies()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00980">check_deps()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00741">describe_status()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01762">dpkg_main()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00618">fill_package_struct()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00692">get_status()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00766">index_status_file()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00963">package_satisfies_dependency()</a>, and <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00714">set_status()</a>.</p>

</div>
</div>
<a id="a32c2bcae0237f8822b6515ea3adc7c00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32c2bcae0237f8822b6515ea3adc7c00">&#9670;&nbsp;</a></span>search_package_hashtable()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int search_package_hashtable </td>
          <td>(</td>
          <td class="paramtype">const unsigned&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned&#160;</td>
          <td class="paramname"><em>version</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned&#160;</td>
          <td class="paramname"><em>operator</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00356">356</a> of file <a class="el" href="../../d7/d05/dpkg_8c_source.html">dpkg.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;{</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="keywordtype">unsigned</span> probe_address;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="keywordtype">unsigned</span> probe_decrement;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160; </div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#a1d659e0211ffaae0622586fad7f1e327">make_hash</a>(<a class="code" href="../../d7/d05/dpkg_8c.html#aa77ba14cd48e018786c6b752ed1d11b0">name_hashtable</a>[name], &amp;probe_address, &amp;probe_decrement, <a class="code" href="../../d7/d05/dpkg_8c.html#a69b135c7de1bd4344e12676bb1946fa1">PACKAGE_HASH_PRIME</a>);</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="keywordflow">while</span> (<a class="code" href="../../d7/d05/dpkg_8c.html#a3d27c89e1462f204c221e2cf5c9233d6">package_hashtable</a>[probe_address] != <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d7/d05/dpkg_8c.html#a3d27c89e1462f204c221e2cf5c9233d6">package_hashtable</a>[probe_address]-&gt;name == name) {</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;            <span class="keywordflow">if</span> (<span class="keyword">operator</span> == <a class="code" href="../../d7/d05/dpkg_8c.html#ac654d21de7f6a409f1c1fdec91f95112adae6d6279d74c603c708541aec479b1d">VER_ANY</a>) {</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                <span class="keywordflow">return</span> probe_address;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;            }</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d7/d05/dpkg_8c.html#ae99c5f15488d114b34dec0a896ee5e73">test_version</a>(<a class="code" href="../../d7/d05/dpkg_8c.html#a3d27c89e1462f204c221e2cf5c9233d6">package_hashtable</a>[probe_address]-&gt;version, version, <span class="keyword">operator</span>)) {</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                <span class="keywordflow">return</span> probe_address;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;            }</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        }</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        probe_address -= probe_decrement;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        <span class="keywordflow">if</span> ((<span class="keywordtype">int</span>)probe_address &lt; 0) {</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;            probe_address += <a class="code" href="../../d7/d05/dpkg_8c.html#a69b135c7de1bd4344e12676bb1946fa1">PACKAGE_HASH_PRIME</a>;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        }</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    }</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <span class="keywordflow">return</span> probe_address;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00169">make_hash()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00130">name_hashtable</a>, <a class="el" href="../../d9/d14/general_8h_source.html#l00053">NULL</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00098">PACKAGE_HASH_PRIME</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00131">package_hashtable</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00336">test_version()</a>, and <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00159">VER_ANY</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00980">check_deps()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01762">dpkg_main()</a>, and <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00618">fill_package_struct()</a>.</p>

</div>
</div>
<a id="a82afa66172a836357ebd323585c651cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a82afa66172a836357ebd323585c651cd">&#9670;&nbsp;</a></span>search_status_hashtable()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned search_status_hashtable </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00211">211</a> of file <a class="el" href="../../d7/d05/dpkg_8c_source.html">dpkg.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;{</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="keywordtype">unsigned</span> probe_address;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keywordtype">unsigned</span> probe_decrement;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160; </div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#a1d659e0211ffaae0622586fad7f1e327">make_hash</a>(key, &amp;probe_address, &amp;probe_decrement, <a class="code" href="../../d7/d05/dpkg_8c.html#adb240e823a9482d83cd02f3340976265">STATUS_HASH_PRIME</a>);</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="keywordflow">while</span> (<a class="code" href="../../d7/d05/dpkg_8c.html#afedd0a411aaf4f39ccf5908554c7699b">status_hashtable</a>[probe_address] != <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d5/db0/dynlink_8c.html#af3054366f27929432795c5ae420a5294">strcmp</a>(key, <a class="code" href="../../d7/d05/dpkg_8c.html#aa77ba14cd48e018786c6b752ed1d11b0">name_hashtable</a>[<a class="code" href="../../d7/d05/dpkg_8c.html#a3d27c89e1462f204c221e2cf5c9233d6">package_hashtable</a>[<a class="code" href="../../d7/d05/dpkg_8c.html#afedd0a411aaf4f39ccf5908554c7699b">status_hashtable</a>[probe_address]-&gt;package]-&gt;name]) == 0) {</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        }</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        probe_address -= probe_decrement;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        <span class="keywordflow">if</span> ((<span class="keywordtype">int</span>)probe_address &lt; 0) {</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;            probe_address += <a class="code" href="../../d7/d05/dpkg_8c.html#adb240e823a9482d83cd02f3340976265">STATUS_HASH_PRIME</a>;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        }</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    }</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="keywordflow">return</span> probe_address;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00169">make_hash()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00130">name_hashtable</a>, <a class="el" href="../../d9/d14/general_8h_source.html#l00053">NULL</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00131">package_hashtable</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00116">STATUS_HASH_PRIME</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00132">status_hashtable</a>, and <a class="el" href="../../d5/db0/dynlink_8c_source.html#l00174">strcmp</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00980">check_deps()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01744">configure_package()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01762">dpkg_main()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00766">index_status_file()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00963">package_satisfies_dependency()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01435">purge_package()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01384">remove_package()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01654">unpack_package()</a>, and <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00814">write_status_file()</a>.</p>

</div>
</div>
<a id="aaaa2b787afd11b42a445289c9256208e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaaa2b787afd11b42a445289c9256208e">&#9670;&nbsp;</a></span>set_status()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void set_status </td>
          <td>(</td>
          <td class="paramtype">const unsigned&#160;</td>
          <td class="paramname"><em>status_node_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>new_value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>position</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00714">714</a> of file <a class="el" href="../../d7/d05/dpkg_8c_source.html">dpkg.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;{</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> new_value_num = <a class="code" href="../../d7/d05/dpkg_8c.html#aaf672b0ba190ab9318a1ec77d2411b21">search_name_hashtable</a>(new_value);</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    <span class="keywordtype">unsigned</span> want = <a class="code" href="../../d7/d05/dpkg_8c.html#a7dfbd7f4ae69e4e7c73a932addf7bd6f">get_status</a>(status_node_num, 1);</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    <span class="keywordtype">unsigned</span> flag = <a class="code" href="../../d7/d05/dpkg_8c.html#a7dfbd7f4ae69e4e7c73a932addf7bd6f">get_status</a>(status_node_num, 2);</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="../../d7/d5b/mail_8c.html#a6943d6e2e83995c648644bc0a4d36f53">status</a> = <a class="code" href="../../d7/d05/dpkg_8c.html#a7dfbd7f4ae69e4e7c73a932addf7bd6f">get_status</a>(status_node_num, 3);</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    <span class="keywordtype">char</span> *new_status;</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160; </div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    <span class="keywordflow">switch</span> (position) {</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;        <span class="keywordflow">case</span> 1:</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;            want = new_value_num;</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;        <span class="keywordflow">case</span> 2:</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;            flag = new_value_num;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;        <span class="keywordflow">case</span> 3:</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;            <a class="code" href="../../d7/d5b/mail_8c.html#a6943d6e2e83995c648644bc0a4d36f53">status</a> = new_value_num;</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;            <a class="code" href="../../d7/dd7/libbb_8h.html#aa7873f1b32526ae11612363558a2aa90">bb_simple_error_msg_and_die</a>(<span class="stringliteral">&quot;DEBUG ONLY: this shouldnt happen&quot;</span>);</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    }</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160; </div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    new_status = <a class="code" href="../../d7/dd7/libbb_8h.html#a4d828f2f187169b160c384cde2d0b0b0">xasprintf</a>(<span class="stringliteral">&quot;%s %s %s&quot;</span>, <a class="code" href="../../d7/d05/dpkg_8c.html#aa77ba14cd48e018786c6b752ed1d11b0">name_hashtable</a>[want], <a class="code" href="../../d7/d05/dpkg_8c.html#aa77ba14cd48e018786c6b752ed1d11b0">name_hashtable</a>[flag], <a class="code" href="../../d7/d05/dpkg_8c.html#aa77ba14cd48e018786c6b752ed1d11b0">name_hashtable</a>[<a class="code" href="../../d7/d5b/mail_8c.html#a6943d6e2e83995c648644bc0a4d36f53">status</a>]);</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#afedd0a411aaf4f39ccf5908554c7699b">status_hashtable</a>[status_node_num]-&gt;status = <a class="code" href="../../d7/d05/dpkg_8c.html#aaf672b0ba190ab9318a1ec77d2411b21">search_name_hashtable</a>(new_status);</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    <a class="code" href="../../d5/db0/dynlink_8c.html#a2c6efa7679f8cd9f61af96e105017560">free</a>(new_status);</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d5/db5/verror__msg_8c_source.html#l00212">bb_simple_error_msg_and_die()</a>, <a class="el" href="../../d5/db0/dynlink_8c_source.html#l00036">free</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00692">get_status()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00130">name_hashtable</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00189">search_name_hashtable()</a>, <a class="el" href="../../d7/d5b/mail_8c.html#a6943d6e2e83995c648644bc0a4d36f53">status</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00132">status_hashtable</a>, and <a class="el" href="../../d7/dd7/libbb_8h.html#a4d828f2f187169b160c384cde2d0b0b0">xasprintf()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01744">configure_package()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01762">dpkg_main()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01435">purge_package()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01384">remove_package()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01654">unpack_package()</a>, and <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00814">write_status_file()</a>.</p>

</div>
</div>
<a id="ae99c5f15488d114b34dec0a896ee5e73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae99c5f15488d114b34dec0a896ee5e73">&#9670;&nbsp;</a></span>test_version()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int test_version </td>
          <td>(</td>
          <td class="paramtype">const unsigned&#160;</td>
          <td class="paramname"><em>version1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned&#160;</td>
          <td class="paramname"><em>version2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned&#160;</td>
          <td class="paramname"><em>operator</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00336">336</a> of file <a class="el" href="../../d7/d05/dpkg_8c_source.html">dpkg.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;{</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> version_result = <a class="code" href="../../d7/d05/dpkg_8c.html#ae5d09a19f1b2b22f41035aae723c9fdb">version_compare</a>(version1, <a class="code" href="../../dc/d72/fsck__minix_8c.html#aab690a854cdb56b09edd0bc9e13b744da68e4bc47eecd5b21bf0e31d76c901c95">version2</a>);</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="keywordflow">switch</span> (<span class="keyword">operator</span>) {</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d7/d05/dpkg_8c.html#ac654d21de7f6a409f1c1fdec91f95112adae6d6279d74c603c708541aec479b1d">VER_ANY</a>:</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d9/dd0/bash_2test_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d7/d05/dpkg_8c.html#ac654d21de7f6a409f1c1fdec91f95112ad7ea8faad6a84004e9a5fb0789c28552">VER_EQUAL</a>:</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        <span class="keywordflow">return</span> (version_result == 0);</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d7/d05/dpkg_8c.html#ac654d21de7f6a409f1c1fdec91f95112aaf67750ced47fb05cb2b8eba9760e0be">VER_LESS</a>:</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;        <span class="keywordflow">return</span> (version_result &lt; 0);</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d7/d05/dpkg_8c.html#ac654d21de7f6a409f1c1fdec91f95112ad0ac6e4d389629a4ecb76d91e441c884">VER_LESS_EQUAL</a>:</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        <span class="keywordflow">return</span> (version_result &lt;= 0);</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d7/d05/dpkg_8c.html#ac654d21de7f6a409f1c1fdec91f95112afa8f9f4d4d75991761a32cdb1f892f98">VER_MORE</a>:</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        <span class="keywordflow">return</span> (version_result &gt; 0);</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d7/d05/dpkg_8c.html#ac654d21de7f6a409f1c1fdec91f95112a6f90bd977650b2780f23f0c483e4884e">VER_MORE_EQUAL</a>:</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        <span class="keywordflow">return</span> (version_result &gt;= 0);</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    }</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d9/dd0/bash_2test_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;}</div>
<div class="ttc" id="adpkg_8c_html_ae5d09a19f1b2b22f41035aae723c9fdb"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#ae5d09a19f1b2b22f41035aae723c9fdb">version_compare</a></div><div class="ttdeci">static int version_compare(const unsigned ver1, const unsigned ver2)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00283">dpkg.c:283</a></div></div>
<div class="ttc" id="afsck__minix_8c_html_aab690a854cdb56b09edd0bc9e13b744da68e4bc47eecd5b21bf0e31d76c901c95"><div class="ttname"><a href="../../dc/d72/fsck__minix_8c.html#aab690a854cdb56b09edd0bc9e13b744da68e4bc47eecd5b21bf0e31d76c901c95">version2</a></div><div class="ttdeci">@ version2</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d72/fsck__minix_8c_source.html#l00144">fsck_minix.c:144</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d9/dd0/bash_2test_8c_source.html#l00096">FALSE</a>, <a class="el" href="../../d9/dd0/bash_2test_8c_source.html#l00095">TRUE</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00159">VER_ANY</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00154">VER_EQUAL</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00155">VER_LESS</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00156">VER_LESS_EQUAL</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00157">VER_MORE</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00158">VER_MORE_EQUAL</a>, <a class="el" href="../../dc/d72/fsck__minix_8c_source.html#l00144">version2</a>, and <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00283">version_compare()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00980">check_deps()</a>, and <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00356">search_package_hashtable()</a>.</p>

</div>
</div>
<a id="ab5bf09ab1abe8ee6966ef7aee0bf5323"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5bf09ab1abe8ee6966ef7aee0bf5323">&#9670;&nbsp;</a></span>unpack_package()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void unpack_package </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d7/d05/dpkg_8c.html#a7d9d9782c353a4a270bd29785ca749e1">deb_file_t</a> *&#160;</td>
          <td class="paramname"><em>deb_file</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01654">1654</a> of file <a class="el" href="../../d7/d05/dpkg_8c_source.html">dpkg.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;{</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *package_name = <a class="code" href="../../d7/d05/dpkg_8c.html#aa77ba14cd48e018786c6b752ed1d11b0">name_hashtable</a>[<a class="code" href="../../d7/d05/dpkg_8c.html#a3d27c89e1462f204c221e2cf5c9233d6">package_hashtable</a>[deb_file-&gt;<a class="code" href="../../d7/d05/dpkg_8c.html#a369614c3e79fae15cf9ccd0c7b593048">package</a>]-&gt;name];</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> status_num = <a class="code" href="../../d7/d05/dpkg_8c.html#a82afa66172a836357ebd323585c651cd">search_status_hashtable</a>(package_name);</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> status_package_num = <a class="code" href="../../d7/d05/dpkg_8c.html#afedd0a411aaf4f39ccf5908554c7699b">status_hashtable</a>[status_num]-&gt;package;</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;    <span class="keywordtype">char</span> *info_prefix;</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;    <span class="keywordtype">char</span> *list_filename;</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;    <a class="code" href="../../d3/d4c/structarchive__handle__t.html">archive_handle_t</a> *archive_handle;</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;    <a class="code" href="../../d0/d57/struct__IO__FILE.html">FILE</a> *out_stream;</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;    <a class="code" href="../../d7/dd7/libbb_8h.html#da/d28/structllist__t">llist_t</a> *accept_list;</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;    <a class="code" href="../../d7/dd7/libbb_8h.html#da/d28/structllist__t">llist_t</a> *conffile_list;</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>;</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160; </div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;    <span class="comment">/* If existing version, remove it first */</span></div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;    conffile_list = <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d5/db0/dynlink_8c.html#af3054366f27929432795c5ae420a5294">strcmp</a>(<a class="code" href="../../d7/d05/dpkg_8c.html#aa77ba14cd48e018786c6b752ed1d11b0">name_hashtable</a>[<a class="code" href="../../d7/d05/dpkg_8c.html#a7dfbd7f4ae69e4e7c73a932addf7bd6f">get_status</a>(status_num, 3)], <span class="stringliteral">&quot;installed&quot;</span>) == 0) {</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;        <span class="comment">/* Package is already installed, remove old version first */</span></div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;        <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;Preparing to replace %s %s (using %s)...\n&quot;</span>, package_name,</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;            <a class="code" href="../../d7/d05/dpkg_8c.html#aa77ba14cd48e018786c6b752ed1d11b0">name_hashtable</a>[<a class="code" href="../../d7/d05/dpkg_8c.html#a3d27c89e1462f204c221e2cf5c9233d6">package_hashtable</a>[status_package_num]-&gt;version],</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;            deb_file-&gt;<a class="code" href="../../d7/d05/dpkg_8c.html#ae1175c713c9cc5ecaab5ecb0fc43d3ee">filename</a>);</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160; </div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;        <span class="comment">/* Read md5sums from old package */</span></div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;        <span class="keywordflow">if</span> (!(<a class="code" href="../../d7/dd7/libbb_8h.html#a55eba7ff429ebe3c6b543eba53c1a5d9">option_mask32</a> &amp; <a class="code" href="../../d7/d05/dpkg_8c.html#af9bdc3014f3d54c426b6d2df10de4960a430d569961dd1eead60d96beab9c7b23">OPT_force_confold</a>))</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;            <a class="code" href="../../d7/d05/dpkg_8c.html#ace88fe156496dd8047229b08b4a15005">append_control_file_to_llist</a>(package_name, <span class="stringliteral">&quot;md5sums&quot;</span>, &amp;conffile_list);</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160; </div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;        <a class="code" href="../../d7/d05/dpkg_8c.html#a984e18ca7078013aad4b5c3c396093f3">remove_package</a>(status_package_num, 0);</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;        <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;Unpacking %s (from %s)...\n&quot;</span>, package_name, deb_file-&gt;<a class="code" href="../../d7/d05/dpkg_8c.html#ae1175c713c9cc5ecaab5ecb0fc43d3ee">filename</a>);</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;    }</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160; </div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;    <span class="comment">/* Extract control.tar.gz to /var/lib/dpkg/info/&lt;package&gt;.filename */</span></div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;    info_prefix = <a class="code" href="../../d7/dd7/libbb_8h.html#a4d828f2f187169b160c384cde2d0b0b0">xasprintf</a>(<span class="stringliteral">&quot;/var/lib/dpkg/info/%s.%s&quot;</span>, package_name, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;    archive_handle = <a class="code" href="../../d7/d05/dpkg_8c.html#a0d1519b520ab1d241ba0b5ddb1b8a5f3">init_archive_deb_ar</a>(deb_file-&gt;<a class="code" href="../../d7/d05/dpkg_8c.html#ae1175c713c9cc5ecaab5ecb0fc43d3ee">filename</a>);</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#ac805a8585623c4f935c79126f2e9a44c">init_archive_deb_control</a>(archive_handle);</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160; </div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;    accept_list = <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;    <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> = 0;</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;    <span class="keywordflow">while</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> &lt; <a class="code" href="../../dd/d7f/applet__tables_8c.html#a6242a25f9d996f0cc4f4cdb911218b75">ARRAY_SIZE</a>(all_control_files)) {</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;        <span class="keywordtype">char</span> *<a class="code" href="../../d8/d64/glob__loop_8c.html#a2019d0836036f2693a231fe5c7c65e20">c</a> = <a class="code" href="../../d7/dd7/libbb_8h.html#a4d828f2f187169b160c384cde2d0b0b0">xasprintf</a>(<span class="stringliteral">&quot;./%s&quot;</span>, all_control_files[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>]);</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;        <a class="code" href="../../d7/dd7/libbb_8h.html#ac1428a8eb5f3de46969e7d3bfa8be3c3">llist_add_to</a>(&amp;accept_list, <a class="code" href="../../d8/d64/glob__loop_8c.html#a2019d0836036f2693a231fe5c7c65e20">c</a>);</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;        <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>++;</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;    }</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;    archive_handle-&gt;dpkg__sub_archive-&gt;<a class="code" href="../../d3/d4c/structarchive__handle__t.html#a3b75b0c5570d2a78763127ebc934cfd5">accept</a> = accept_list;</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;    archive_handle-&gt;dpkg__sub_archive-&gt;<a class="code" href="../../d3/d4c/structarchive__handle__t.html#a40ffc3faa8104696839d3923447479e6">filter</a> = <a class="code" href="../../d4/dd6/filter__accept__list_8c.html#a7369397ac4f5f6d4120eeabcd3aa8c48">filter_accept_list</a>;</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;    archive_handle-&gt;dpkg__sub_archive-&gt;<a class="code" href="../../d3/d4c/structarchive__handle__t.html#ae627faa2614073869403bffceeb9ac48">action_data</a> = <a class="code" href="../../d7/d05/dpkg_8c.html#a592fa2d97d3c6e6c507d66133a7a4d1c">data_extract_all_prefix</a>;</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;    archive_handle-&gt;dpkg__sub_archive-&gt;dpkg__buffer = info_prefix;</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;    archive_handle-&gt;dpkg__sub_archive-&gt;<a class="code" href="../../d3/d4c/structarchive__handle__t.html#a832f885546f3ff6d1fd6cec3d2e9076c">ah_flags</a> |= <a class="code" href="../../d1/d94/bb__archive_8h.html#aaadba503c4baa1ffc5ed341d35b96b9f">ARCHIVE_UNLINK_OLD</a>;</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;    <a class="code" href="../../d4/db9/unpack__ar__archive_8c.html#ac2e7c5f6132dfc57f8a5b80a68acb184">unpack_ar_archive</a>(archive_handle);</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160; </div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;    <span class="comment">/* Run the preinst prior to extracting */</span></div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#a8a3619b4e9563c7afeb0615b2ac76da8">run_package_script_or_die</a>(package_name, <span class="stringliteral">&quot;preinst&quot;</span>);</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160; </div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;    <span class="comment">/* Don&#39;t overwrite existing config files */</span></div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;    <span class="keywordflow">if</span> (!(<a class="code" href="../../d7/dd7/libbb_8h.html#a55eba7ff429ebe3c6b543eba53c1a5d9">option_mask32</a> &amp; <a class="code" href="../../d7/d05/dpkg_8c.html#af9bdc3014f3d54c426b6d2df10de4960a2e91f410b167f59c3f63e4acec463dcd">OPT_force_confnew</a>))</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;        <a class="code" href="../../d7/d05/dpkg_8c.html#ace88fe156496dd8047229b08b4a15005">append_control_file_to_llist</a>(package_name, <span class="stringliteral">&quot;conffiles&quot;</span>, &amp;conffile_list);</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160; </div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;    <span class="comment">/* Extract data.tar.gz to the root directory */</span></div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;    archive_handle = <a class="code" href="../../d7/d05/dpkg_8c.html#a0d1519b520ab1d241ba0b5ddb1b8a5f3">init_archive_deb_ar</a>(deb_file-&gt;<a class="code" href="../../d7/d05/dpkg_8c.html#ae1175c713c9cc5ecaab5ecb0fc43d3ee">filename</a>);</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#a9fa625500b8a73565a09361658e9a25e">init_archive_deb_data</a>(archive_handle);</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;    archive_handle-&gt;dpkg__sub_archive-&gt;<a class="code" href="../../d3/d4c/structarchive__handle__t.html#a3b75b0c5570d2a78763127ebc934cfd5">accept</a> = conffile_list;</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;    <span class="comment">/* Why ARCHIVE_REMEMBER_NAMES?</span></div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;<span class="comment">     * We want names collected in -&gt;passed list even if conffile_list</span></div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;<span class="comment">     * is NULL (otherwise get_header_tar may optimize name saving out):</span></div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;    archive_handle-&gt;dpkg__sub_archive-&gt;<a class="code" href="../../d3/d4c/structarchive__handle__t.html#a832f885546f3ff6d1fd6cec3d2e9076c">ah_flags</a> |= <a class="code" href="../../d1/d94/bb__archive_8h.html#ab6fbbd93466775d18285812b904f367f">ARCHIVE_REMEMBER_NAMES</a> | <a class="code" href="../../d1/d94/bb__archive_8h.html#aaadba503c4baa1ffc5ed341d35b96b9f">ARCHIVE_UNLINK_OLD</a>;</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;    archive_handle-&gt;dpkg__sub_archive-&gt;<a class="code" href="../../d3/d4c/structarchive__handle__t.html#a40ffc3faa8104696839d3923447479e6">filter</a> = <a class="code" href="../../d7/d05/dpkg_8c.html#ae060969079864be07d6793c1f5536df9">filter_rename_config</a>;</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;    archive_handle-&gt;dpkg__sub_archive-&gt;<a class="code" href="../../d3/d4c/structarchive__handle__t.html#ae627faa2614073869403bffceeb9ac48">action_data</a> = <a class="code" href="../../d7/d05/dpkg_8c.html#a592fa2d97d3c6e6c507d66133a7a4d1c">data_extract_all_prefix</a>;</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;    archive_handle-&gt;dpkg__sub_archive-&gt;dpkg__buffer = (<span class="keywordtype">char</span>*)<span class="stringliteral">&quot;/&quot;</span>; <span class="comment">/* huh? */</span></div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;    <a class="code" href="../../d4/db9/unpack__ar__archive_8c.html#ac2e7c5f6132dfc57f8a5b80a68acb184">unpack_ar_archive</a>(archive_handle);</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160; </div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;    <span class="comment">/* Create the list file */</span></div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;    list_filename = <a class="code" href="../../d7/dd7/libbb_8h.html#a4d828f2f187169b160c384cde2d0b0b0">xasprintf</a>(<span class="stringliteral">&quot;/var/lib/dpkg/info/%s.%s&quot;</span>, package_name, <span class="stringliteral">&quot;list&quot;</span>);</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;    out_stream = <a class="code" href="../../d7/dd7/libbb_8h.html#a79d99fbc7828f8f5e03c0fd7234a5235">xfopen_for_write</a>(list_filename);</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;    archive_handle-&gt;dpkg__sub_archive-&gt;<a class="code" href="../../d3/d4c/structarchive__handle__t.html#a099aca48c7fcf2b0a3f3d92a5979400b">passed</a> = <a class="code" href="../../d7/dd7/libbb_8h.html#a430c422e2feb094e3b39ba17752af7ad">llist_rev</a>(archive_handle-&gt;dpkg__sub_archive-&gt;<a class="code" href="../../d3/d4c/structarchive__handle__t.html#a099aca48c7fcf2b0a3f3d92a5979400b">passed</a>);</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;    <span class="keywordflow">while</span> (archive_handle-&gt;dpkg__sub_archive-&gt;<a class="code" href="../../d3/d4c/structarchive__handle__t.html#a099aca48c7fcf2b0a3f3d92a5979400b">passed</a>) {</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;        <span class="keywordtype">char</span> *<a class="code" href="../../d4/daf/flashcp_8c.html#abe2fedc3a963bcd397037e60e16adabb">filename</a> = <a class="code" href="../../d7/dd7/libbb_8h.html#ab9294d11217bf4ddf96d4a6e3bdb6475">llist_pop</a>(&amp;archive_handle-&gt;dpkg__sub_archive-&gt;<a class="code" href="../../d3/d4c/structarchive__handle__t.html#a099aca48c7fcf2b0a3f3d92a5979400b">passed</a>);</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;        <span class="comment">/* the leading . has been stripped by data_extract_all_prefix already */</span></div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;        <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#ad9291335f34e874c8431285d705bc3aa">fprintf</a>(out_stream, <span class="stringliteral">&quot;%s\n&quot;</span>, <a class="code" href="../../d4/daf/flashcp_8c.html#abe2fedc3a963bcd397037e60e16adabb">filename</a>);</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;        <a class="code" href="../../d5/db0/dynlink_8c.html#a2c6efa7679f8cd9f61af96e105017560">free</a>(<a class="code" href="../../d4/daf/flashcp_8c.html#abe2fedc3a963bcd397037e60e16adabb">filename</a>);</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;    }</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;    <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#a3abd78c220b4b49d1b088f0dfe40bf23">fclose</a>(out_stream);</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160; </div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;    <span class="comment">/* change status */</span></div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#aaaa2b787afd11b42a445289c9256208e">set_status</a>(status_num, <span class="stringliteral">&quot;install&quot;</span>, 1);</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;    <a class="code" href="../../d7/d05/dpkg_8c.html#aaaa2b787afd11b42a445289c9256208e">set_status</a>(status_num, <span class="stringliteral">&quot;unpacked&quot;</span>, 3);</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160; </div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;    <a class="code" href="../../d5/db0/dynlink_8c.html#a2c6efa7679f8cd9f61af96e105017560">free</a>(info_prefix);</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;    <a class="code" href="../../d5/db0/dynlink_8c.html#a2c6efa7679f8cd9f61af96e105017560">free</a>(list_filename);</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;}</div>
<div class="ttc" id="abb__archive_8h_html_aaadba503c4baa1ffc5ed341d35b96b9f"><div class="ttname"><a href="../../d1/d94/bb__archive_8h.html#aaadba503c4baa1ffc5ed341d35b96b9f">ARCHIVE_UNLINK_OLD</a></div><div class="ttdeci">#define ARCHIVE_UNLINK_OLD</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/bb__archive_8h_source.html#l00128">bb_archive.h:128</a></div></div>
<div class="ttc" id="abb__archive_8h_html_ab6fbbd93466775d18285812b904f367f"><div class="ttname"><a href="../../d1/d94/bb__archive_8h.html#ab6fbbd93466775d18285812b904f367f">ARCHIVE_REMEMBER_NAMES</a></div><div class="ttdeci">#define ARCHIVE_REMEMBER_NAMES</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/bb__archive_8h_source.html#l00134">bb_archive.h:134</a></div></div>
<div class="ttc" id="adpkg_8c_html_a592fa2d97d3c6e6c507d66133a7a4d1c"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#a592fa2d97d3c6e6c507d66133a7a4d1c">data_extract_all_prefix</a></div><div class="ttdeci">static void FAST_FUNC data_extract_all_prefix(archive_handle_t *archive_handle)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l01612">dpkg.c:1612</a></div></div>
<div class="ttc" id="adpkg_8c_html_a9fa625500b8a73565a09361658e9a25e"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#a9fa625500b8a73565a09361658e9a25e">init_archive_deb_data</a></div><div class="ttdeci">static void init_archive_deb_data(archive_handle_t *ar_handle)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l01513">dpkg.c:1513</a></div></div>
<div class="ttc" id="adpkg_8c_html_ace88fe156496dd8047229b08b4a15005"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#ace88fe156496dd8047229b08b4a15005">append_control_file_to_llist</a></div><div class="ttdeci">static void append_control_file_to_llist(const char *package_name, const char *control_name, llist_t **ll)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l01560">dpkg.c:1560</a></div></div>
<div class="ttc" id="adpkg_8c_html_ae060969079864be07d6793c1f5536df9"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#ae060969079864be07d6793c1f5536df9">filter_rename_config</a></div><div class="ttdeci">static char FAST_FUNC filter_rename_config(archive_handle_t *archive_handle)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l01575">dpkg.c:1575</a></div></div>
<div class="ttc" id="aglob__loop_8c_html_a2019d0836036f2693a231fe5c7c65e20"><div class="ttname"><a href="../../d8/d64/glob__loop_8c.html#a2019d0836036f2693a231fe5c7c65e20">c</a></div><div class="ttdeci">register GCHAR c</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d64/glob__loop_8c_source.html#l00028">glob_loop.c:26</a></div></div>
<div class="ttc" id="alibbb_8h_html_a430c422e2feb094e3b39ba17752af7ad"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#a430c422e2feb094e3b39ba17752af7ad">llist_rev</a></div><div class="ttdeci">llist_t * llist_rev(llist_t *list) FAST_FUNC</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de1/llist_8c_source.html#l00075">llist.c:75</a></div></div>
<div class="ttc" id="alibbb_8h_html_a79d99fbc7828f8f5e03c0fd7234a5235"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#a79d99fbc7828f8f5e03c0fd7234a5235">xfopen_for_write</a></div><div class="ttdeci">FILE * xfopen_for_write(const char *path) FAST_FUNC</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d34/wfopen_8c_source.html#l00036">wfopen.c:36</a></div></div>
<div class="ttc" id="alibbb_8h_html_ab9294d11217bf4ddf96d4a6e3bdb6475"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#ab9294d11217bf4ddf96d4a6e3bdb6475">llist_pop</a></div><div class="ttdeci">void * llist_pop(llist_t **elm) FAST_FUNC</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de1/llist_8c_source.html#l00035">llist.c:35</a></div></div>
<div class="ttc" id="alibc_2include_2stdio_8h_html_ad9291335f34e874c8431285d705bc3aa"><div class="ttname"><a href="../../dc/d4d/libc_2include_2stdio_8h.html#ad9291335f34e874c8431285d705bc3aa">fprintf</a></div><div class="ttdeci">int fprintf(FILE *stream, const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00097">file.c:97</a></div></div>
<div class="ttc" id="astructarchive__handle__t_html_a099aca48c7fcf2b0a3f3d92a5979400b"><div class="ttname"><a href="../../d3/d4c/structarchive__handle__t.html#a099aca48c7fcf2b0a3f3d92a5979400b">archive_handle_t::passed</a></div><div class="ttdeci">llist_t * passed</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/bb__archive_8h_source.html#l00062">bb_archive.h:62</a></div></div>
<div class="ttc" id="astructarchive__handle__t_html_a832f885546f3ff6d1fd6cec3d2e9076c"><div class="ttname"><a href="../../d3/d4c/structarchive__handle__t.html#a832f885546f3ff6d1fd6cec3d2e9076c">archive_handle_t::ah_flags</a></div><div class="ttdeci">unsigned ah_flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/bb__archive_8h_source.html#l00050">bb_archive.h:50</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d1/d94/bb__archive_8h_source.html#l00058">archive_handle_t::accept</a>, <a class="el" href="../../d1/d94/bb__archive_8h_source.html#l00074">archive_handle_t::action_data</a>, <a class="el" href="../../d1/d94/bb__archive_8h_source.html#l00050">archive_handle_t::ah_flags</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01560">append_control_file_to_llist()</a>, <a class="el" href="../../d1/d94/bb__archive_8h_source.html#l00134">ARCHIVE_REMEMBER_NAMES</a>, <a class="el" href="../../d1/d94/bb__archive_8h_source.html#l00128">ARCHIVE_UNLINK_OLD</a>, <a class="el" href="../../dd/d7f/applet__tables_8c_source.html#l00021">ARRAY_SIZE</a>, <a class="el" href="../../d8/d64/glob__loop_8c_source.html#l00026">c</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01612">data_extract_all_prefix()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00054">fclose()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00164">deb_file_s::filename</a>, <a class="el" href="../../d4/daf/flashcp_8c.html#abe2fedc3a963bcd397037e60e16adabb">filename</a>, <a class="el" href="../../d1/d94/bb__archive_8h_source.html#l00056">archive_handle_t::filter</a>, <a class="el" href="../../d4/dd6/filter__accept__list_8c_source.html#l00013">filter_accept_list()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01575">filter_rename_config()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00097">fprintf()</a>, <a class="el" href="../../d5/db0/dynlink_8c_source.html#l00036">free</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00692">get_status()</a>, <a class="el" href="../../dd/d71/gettextP_8h_source.html#l00074">i</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01477">init_archive_deb_ar()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01489">init_archive_deb_control()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01513">init_archive_deb_data()</a>, <a class="el" href="../../d4/de1/llist_8c_source.html#l00015">llist_add_to()</a>, <a class="el" href="../../d4/de1/llist_8c_source.html#l00035">llist_pop()</a>, <a class="el" href="../../d4/de1/llist_8c_source.html#l00075">llist_rev()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00130">name_hashtable</a>, <a class="el" href="../../d9/d14/general_8h_source.html#l00053">NULL</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01650">OPT_force_confnew</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01651">OPT_force_confold</a>, <a class="el" href="../../d4/d7f/getopt32_8c_source.html#l00318">option_mask32</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00165">deb_file_s::package</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00131">package_hashtable</a>, <a class="el" href="../../d1/d94/bb__archive_8h_source.html#l00062">archive_handle_t::passed</a>, <a class="el" href="../../d1/dae/libc_2src_2print_2printf_8c_source.html#l01554">printf()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01384">remove_package()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01263">run_package_script_or_die()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00211">search_status_hashtable()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00714">set_status()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00132">status_hashtable</a>, <a class="el" href="../../d5/db0/dynlink_8c_source.html#l00174">strcmp</a>, <a class="el" href="../../d4/db9/unpack__ar__archive_8c_source.html#l00009">unpack_ar_archive()</a>, <a class="el" href="../../d7/dd7/libbb_8h.html#a4d828f2f187169b160c384cde2d0b0b0">xasprintf()</a>, and <a class="el" href="../../d7/d34/wfopen_8c_source.html#l00036">xfopen_for_write()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01762">dpkg_main()</a>.</p>

</div>
</div>
<a id="ae5d09a19f1b2b22f41035aae723c9fdb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5d09a19f1b2b22f41035aae723c9fdb">&#9670;&nbsp;</a></span>version_compare()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int version_compare </td>
          <td>(</td>
          <td class="paramtype">const unsigned&#160;</td>
          <td class="paramname"><em>ver1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned&#160;</td>
          <td class="paramname"><em>ver2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00283">283</a> of file <a class="el" href="../../d7/d05/dpkg_8c_source.html">dpkg.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;{</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="keywordtype">char</span> *ch_ver1 = <a class="code" href="../../d7/d05/dpkg_8c.html#aa77ba14cd48e018786c6b752ed1d11b0">name_hashtable</a>[ver1];</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="keywordtype">char</span> *ch_ver2 = <a class="code" href="../../d7/d05/dpkg_8c.html#aa77ba14cd48e018786c6b752ed1d11b0">name_hashtable</a>[ver2];</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="keywordtype">unsigned</span> epoch1 = 0, epoch2 = 0;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="keywordtype">char</span> *<a class="code" href="../../d6/d23/wi__stuff_8c.html#a807c7086c013f84fc8e3cc36e9969a26">colon</a>;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="keywordtype">char</span> *deb_ver1, *deb_ver2;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="keywordtype">char</span> *upstream_ver1;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="keywordtype">char</span> *upstream_ver2;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="keywordtype">int</span> result;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160; </div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <span class="comment">/* Compare epoch */</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <a class="code" href="../../d6/d23/wi__stuff_8c.html#a807c7086c013f84fc8e3cc36e9969a26">colon</a> = <a class="code" href="../../da/df6/apps_2base_2bash_2lib_2readline_2bind_8c.html#a58f035966ee1771c6b3bb7a84fb13019">strchr</a>(ch_ver1, <span class="charliteral">&#39;:&#39;</span>);</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d6/d23/wi__stuff_8c.html#a807c7086c013f84fc8e3cc36e9969a26">colon</a>) {</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        epoch1 = <a class="code" href="../../d9/df8/include_2ansi__stdlib_8h.html#a70c795e60ee3bebdd21e362642f911fc">atoi</a>(ch_ver1);</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        ch_ver1 = <a class="code" href="../../d6/d23/wi__stuff_8c.html#a807c7086c013f84fc8e3cc36e9969a26">colon</a> + 1;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    }</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <a class="code" href="../../d6/d23/wi__stuff_8c.html#a807c7086c013f84fc8e3cc36e9969a26">colon</a> = <a class="code" href="../../da/df6/apps_2base_2bash_2lib_2readline_2bind_8c.html#a58f035966ee1771c6b3bb7a84fb13019">strchr</a>(ch_ver2, <span class="charliteral">&#39;:&#39;</span>);</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d6/d23/wi__stuff_8c.html#a807c7086c013f84fc8e3cc36e9969a26">colon</a>) {</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        epoch2 = <a class="code" href="../../d9/df8/include_2ansi__stdlib_8h.html#a70c795e60ee3bebdd21e362642f911fc">atoi</a>(ch_ver2);</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        ch_ver2 = <a class="code" href="../../d6/d23/wi__stuff_8c.html#a807c7086c013f84fc8e3cc36e9969a26">colon</a> + 1;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    }</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="keywordflow">if</span> (epoch1 &lt; epoch2) {</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    }</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="keywordflow">if</span> (epoch1 &gt; epoch2) {</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    }</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160; </div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="comment">/* Compare upstream version */</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    upstream_ver1 = <a class="code" href="../../dc/dd1/pathchk_8c.html#ac7a701bce03d77bad6b57003d0fe73df">xstrdup</a>(ch_ver1);</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    upstream_ver2 = <a class="code" href="../../dc/dd1/pathchk_8c.html#ac7a701bce03d77bad6b57003d0fe73df">xstrdup</a>(ch_ver2);</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160; </div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="comment">/* Chop off debian version, and store for later use */</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    deb_ver1 = <a class="code" href="../../db/d45/sigstat_8c.html#a08b022bc1a564871dd0ef33e40894bfa">strrchr</a>(upstream_ver1, <span class="charliteral">&#39;-&#39;</span>);</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    deb_ver2 = <a class="code" href="../../db/d45/sigstat_8c.html#a08b022bc1a564871dd0ef33e40894bfa">strrchr</a>(upstream_ver2, <span class="charliteral">&#39;-&#39;</span>);</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="keywordflow">if</span> (deb_ver1) {</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        *deb_ver1++ = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    }</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <span class="keywordflow">if</span> (deb_ver2) {</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        *deb_ver2++ = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    }</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    result = <a class="code" href="../../d7/d05/dpkg_8c.html#a6ee6c1aac918bb8e81e421318c804d6a">version_compare_part</a>(upstream_ver1, upstream_ver2);</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <span class="keywordflow">if</span> (result == 0) {</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        <span class="comment">/* Compare debian versions */</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        result = <a class="code" href="../../d7/d05/dpkg_8c.html#a6ee6c1aac918bb8e81e421318c804d6a">version_compare_part</a>(deb_ver1, deb_ver2);</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    }</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160; </div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <a class="code" href="../../d5/db0/dynlink_8c.html#a2c6efa7679f8cd9f61af96e105017560">free</a>(upstream_ver1);</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <a class="code" href="../../d5/db0/dynlink_8c.html#a2c6efa7679f8cd9f61af96e105017560">free</a>(upstream_ver2);</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;}</div>
<div class="ttc" id="adpkg_8c_html_a6ee6c1aac918bb8e81e421318c804d6a"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#a6ee6c1aac918bb8e81e421318c804d6a">version_compare_part</a></div><div class="ttdeci">static int version_compare_part(const char *val, const char *ref)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00240">dpkg.c:240</a></div></div>
<div class="ttc" id="ainclude_2ansi__stdlib_8h_html_a70c795e60ee3bebdd21e362642f911fc"><div class="ttname"><a href="../../d9/df8/include_2ansi__stdlib_8h.html#a70c795e60ee3bebdd21e362642f911fc">atoi</a></div><div class="ttdeci">int atoi()</div></div>
<div class="ttc" id="asigstat_8c_html_a08b022bc1a564871dd0ef33e40894bfa"><div class="ttname"><a href="../../db/d45/sigstat_8c.html#a08b022bc1a564871dd0ef33e40894bfa">strrchr</a></div><div class="ttdeci">char * strrchr()</div></div>
<div class="ttc" id="awi__stuff_8c_html_a807c7086c013f84fc8e3cc36e9969a26"><div class="ttname"><a href="../../d6/d23/wi__stuff_8c.html#a807c7086c013f84fc8e3cc36e9969a26">colon</a></div><div class="ttdeci">static patch_t * colon</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d23/wi__stuff_8c_source.html#l00348">wi_stuff.c:348</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d9/df8/include_2ansi__stdlib_8h.html#a70c795e60ee3bebdd21e362642f911fc">atoi()</a>, <a class="el" href="../../d6/d23/wi__stuff_8c_source.html#l00348">colon</a>, <a class="el" href="../../d5/db0/dynlink_8c_source.html#l00036">free</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00130">name_hashtable</a>, <a class="el" href="../../da/df6/apps_2base_2bash_2lib_2readline_2bind_8c.html#a58f035966ee1771c6b3bb7a84fb13019">strchr()</a>, <a class="el" href="../../db/d45/sigstat_8c.html#a08b022bc1a564871dd0ef33e40894bfa">strrchr()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00240">version_compare_part()</a>, and <a class="el" href="../../dc/dd1/pathchk_8c_source.html#l00258">xstrdup()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00336">test_version()</a>.</p>

</div>
</div>
<a id="a6ee6c1aac918bb8e81e421318c804d6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ee6c1aac918bb8e81e421318c804d6a">&#9670;&nbsp;</a></span>version_compare_part()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int version_compare_part </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>val</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>ref</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00240">240</a> of file <a class="el" href="../../d7/d05/dpkg_8c_source.html">dpkg.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;{</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../db/dd4/sm__loop_8c.html#acb906433e1289aa1c251dc5057746a88">val</a>) <a class="code" href="../../db/dd4/sm__loop_8c.html#acb906433e1289aa1c251dc5057746a88">val</a> = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="keywordflow">if</span> (!ref) ref = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160; </div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="keywordflow">while</span> (*<a class="code" href="../../db/dd4/sm__loop_8c.html#acb906433e1289aa1c251dc5057746a88">val</a> || *ref) {</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        <span class="keywordtype">int</span> first_diff;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160; </div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        <span class="keywordflow">while</span> ((*<a class="code" href="../../db/dd4/sm__loop_8c.html#acb906433e1289aa1c251dc5057746a88">val</a> &amp;&amp; !<a class="code" href="../../d7/dd7/libbb_8h.html#aefb5fe894e4d5f0e52d5853f99200d96">isdigit</a>(*<a class="code" href="../../db/dd4/sm__loop_8c.html#acb906433e1289aa1c251dc5057746a88">val</a>)) || (*ref &amp;&amp; !<a class="code" href="../../d7/dd7/libbb_8h.html#aefb5fe894e4d5f0e52d5853f99200d96">isdigit</a>(*ref))) {</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;            <span class="keywordtype">int</span> vc = <a class="code" href="../../d7/d05/dpkg_8c.html#a56a1bacea0595ff04793ed77a6ee00c0">order</a>(*<a class="code" href="../../db/dd4/sm__loop_8c.html#acb906433e1289aa1c251dc5057746a88">val</a>);</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;            <span class="keywordtype">int</span> <a class="code" href="../../d1/dda/sv_8c.html#a9578f88fefb44e6c3f1fb1a83c939855">rc</a> = <a class="code" href="../../d7/d05/dpkg_8c.html#a56a1bacea0595ff04793ed77a6ee00c0">order</a>(*ref);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;            <span class="keywordflow">if</span> (vc != <a class="code" href="../../d1/dda/sv_8c.html#a9578f88fefb44e6c3f1fb1a83c939855">rc</a>)</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                <span class="keywordflow">return</span> vc - <a class="code" href="../../d1/dda/sv_8c.html#a9578f88fefb44e6c3f1fb1a83c939855">rc</a>;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;            <a class="code" href="../../db/dd4/sm__loop_8c.html#acb906433e1289aa1c251dc5057746a88">val</a>++;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;            ref++;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        }</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160; </div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        <span class="keywordflow">while</span> (*<a class="code" href="../../db/dd4/sm__loop_8c.html#acb906433e1289aa1c251dc5057746a88">val</a> == <span class="charliteral">&#39;0&#39;</span>)</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;            <a class="code" href="../../db/dd4/sm__loop_8c.html#acb906433e1289aa1c251dc5057746a88">val</a>++;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        <span class="keywordflow">while</span> (*ref == <span class="charliteral">&#39;0&#39;</span>)</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;            ref++;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160; </div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        first_diff = 0;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        <span class="keywordflow">while</span> (<a class="code" href="../../d7/dd7/libbb_8h.html#aefb5fe894e4d5f0e52d5853f99200d96">isdigit</a>(*<a class="code" href="../../db/dd4/sm__loop_8c.html#acb906433e1289aa1c251dc5057746a88">val</a>) &amp;&amp; <a class="code" href="../../d7/dd7/libbb_8h.html#aefb5fe894e4d5f0e52d5853f99200d96">isdigit</a>(*ref)) {</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;            <span class="keywordflow">if</span> (first_diff == 0)</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                first_diff = *<a class="code" href="../../db/dd4/sm__loop_8c.html#acb906433e1289aa1c251dc5057746a88">val</a> - *ref;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;            <a class="code" href="../../db/dd4/sm__loop_8c.html#acb906433e1289aa1c251dc5057746a88">val</a>++;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;            ref++;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        }</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d7/dd7/libbb_8h.html#aefb5fe894e4d5f0e52d5853f99200d96">isdigit</a>(*<a class="code" href="../../db/dd4/sm__loop_8c.html#acb906433e1289aa1c251dc5057746a88">val</a>))</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;            <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d7/dd7/libbb_8h.html#aefb5fe894e4d5f0e52d5853f99200d96">isdigit</a>(*ref))</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;            <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        <span class="keywordflow">if</span> (first_diff)</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;            <span class="keywordflow">return</span> first_diff;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    }</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;}</div>
<div class="ttc" id="adpkg_8c_html_a56a1bacea0595ff04793ed77a6ee00c0"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#a56a1bacea0595ff04793ed77a6ee00c0">order</a></div><div class="ttdeci">static int order(char x)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00229">dpkg.c:229</a></div></div>
<div class="ttc" id="asm__loop_8c_html_acb906433e1289aa1c251dc5057746a88"><div class="ttname"><a href="../../db/dd4/sm__loop_8c.html#acb906433e1289aa1c251dc5057746a88">val</a></div><div class="ttdeci">INT val</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dd4/sm__loop_8c_source.html#l00387">sm_loop.c:385</a></div></div>
<div class="ttc" id="asv_8c_html_a9578f88fefb44e6c3f1fb1a83c939855"><div class="ttname"><a href="../../d1/dda/sv_8c.html#a9578f88fefb44e6c3f1fb1a83c939855">rc</a></div><div class="ttdeci">#define rc</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dda/sv_8c_source.html#l00210">sv.c:210</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/dd7/libbb_8h_source.html#l02447">isdigit</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00229">order()</a>, <a class="el" href="../../d1/dda/sv_8c_source.html#l00210">rc</a>, and <a class="el" href="../../db/dd4/sm__loop_8c_source.html#l00385">val</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00283">version_compare()</a>.</p>

</div>
</div>
<a id="a3370170255afdb1526244ec972519fc6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3370170255afdb1526244ec972519fc6">&#9670;&nbsp;</a></span>write_buffer_no_status()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void write_buffer_no_status </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d4d/libc_2include_2stdio_8h.html#a912af5ab9f8a52ddd387b7defc0b49f1">FILE</a> *&#160;</td>
          <td class="paramname"><em>new_status_file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>control_buffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00797">797</a> of file <a class="el" href="../../d7/d05/dpkg_8c_source.html">dpkg.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;{</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    <span class="keywordtype">char</span> *name;</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    <span class="keywordtype">char</span> *<a class="code" href="../../db/d5e/libc_2include_2setjmp_8h.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>;</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../df/d84/arping_8c.html#a317b24157e7f590740c6e329bfe668dc">start</a> = 0;</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    <span class="keywordflow">while</span> (1) {</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;        <a class="code" href="../../df/d84/arping_8c.html#a317b24157e7f590740c6e329bfe668dc">start</a> += <a class="code" href="../../d7/d05/dpkg_8c.html#ad411349b2c01cc35e5fc7d76e5e0573c">read_package_field</a>(&amp;control_buffer[<a class="code" href="../../df/d84/arping_8c.html#a317b24157e7f590740c6e329bfe668dc">start</a>], &amp;name, &amp;<a class="code" href="../../db/d5e/libc_2include_2setjmp_8h.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>);</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;        <span class="keywordflow">if</span> (name == <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;        }</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d5/db0/dynlink_8c.html#af3054366f27929432795c5ae420a5294">strcmp</a>(name, <span class="stringliteral">&quot;Status&quot;</span>) != 0) {</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;            <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#ad9291335f34e874c8431285d705bc3aa">fprintf</a>(new_status_file, <span class="stringliteral">&quot;%s: %s\n&quot;</span>, name, <a class="code" href="../../db/d5e/libc_2include_2setjmp_8h.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>);</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;        }</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    }</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;}</div>
<div class="ttc" id="alibc_2include_2setjmp_8h_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../db/d5e/libc_2include_2setjmp_8h.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d5e/libc_2include_2setjmp_8h_source.html#l00032">setjmp.h:32</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d6/d13/file_8c_source.html#l00097">fprintf()</a>, <a class="el" href="../../d9/d14/general_8h_source.html#l00053">NULL</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00537">read_package_field()</a>, <a class="el" href="../../df/d84/arping_8c_source.html#l00095">start</a>, <a class="el" href="../../d5/db0/dynlink_8c_source.html#l00174">strcmp</a>, and <a class="el" href="../../db/d5e/libc_2include_2setjmp_8h_source.html#l00032">value</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00814">write_status_file()</a>.</p>

</div>
</div>
<a id="afe757091643ab21eea32dd533da89f7f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe757091643ab21eea32dd533da89f7f">&#9670;&nbsp;</a></span>write_status_file()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void write_status_file </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d7/d05/dpkg_8c.html#a7d9d9782c353a4a270bd29785ca749e1">deb_file_t</a> **&#160;</td>
          <td class="paramname"><em>deb_file</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00814">814</a> of file <a class="el" href="../../d7/d05/dpkg_8c_source.html">dpkg.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;{</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;    <a class="code" href="../../d0/d57/struct__IO__FILE.html">FILE</a> *old_status_file = <a class="code" href="../../d7/dd7/libbb_8h.html#a3440fab254732f52be42fa714913ef5d">xfopen_for_read</a>(<span class="stringliteral">&quot;/var/lib/dpkg/status&quot;</span>);</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    <a class="code" href="../../d0/d57/struct__IO__FILE.html">FILE</a> *new_status_file = <a class="code" href="../../d7/dd7/libbb_8h.html#a79d99fbc7828f8f5e03c0fd7234a5235">xfopen_for_write</a>(<span class="stringliteral">&quot;/var/lib/dpkg/status.udeb&quot;</span>);</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;    <span class="keywordtype">char</span> *package_name;</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    <span class="keywordtype">char</span> *status_from_file;</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    <span class="keywordtype">char</span> *control_buffer = <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    <span class="keywordtype">char</span> *tmp_string;</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    <span class="keywordtype">int</span> status_num;</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    <span class="keywordtype">int</span> field_start = 0;</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    <span class="keywordtype">int</span> write_flag;</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> = 0;</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160; </div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    <span class="comment">/* Update previously known packages */</span></div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    <span class="keywordflow">while</span> ((control_buffer = <a class="code" href="../../d7/dd7/libbb_8h.html#a91941dfb5d4f8db5afb11aedc0d45642">xmalloc_fgetline_str</a>(old_status_file, <span class="stringliteral">&quot;\n\n&quot;</span>)) != <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;        tmp_string = <a class="code" href="../../d0/da9/apps_2base_2bash_2lib_2sh_2strstr_8c.html#aea5b312f689a291ce05c2c4ffb924d7f">strstr</a>(control_buffer, <span class="stringliteral">&quot;Package:&quot;</span>);</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;        <span class="keywordflow">if</span> (tmp_string == <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;        }</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160; </div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;        tmp_string += 8;</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;        tmp_string += <a class="code" href="../../d6/d32/musl_2include_2string_8h.html#a417885431ec6bd9c35f34ca1d10ca48b">strspn</a>(tmp_string, <span class="stringliteral">&quot; \n\t&quot;</span>);</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;        package_name = <a class="code" href="../../d7/dd7/libbb_8h.html#ab08a8f00393f0dd77050fccaecba3a7e">xstrndup</a>(tmp_string, <a class="code" href="../../d6/d32/musl_2include_2string_8h.html#a4e8462eddc5a160451a246bc1bc22bb4">strcspn</a>(tmp_string, <span class="stringliteral">&quot;\n&quot;</span>));</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;        write_flag = <a class="code" href="../../d9/dd0/bash_2test_8c.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;        tmp_string = <a class="code" href="../../d0/da9/apps_2base_2bash_2lib_2sh_2strstr_8c.html#aea5b312f689a291ce05c2c4ffb924d7f">strstr</a>(control_buffer, <span class="stringliteral">&quot;Status:&quot;</span>);</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;        <span class="keywordflow">if</span> (tmp_string != <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;            <span class="comment">/* Separate the status value from the control buffer */</span></div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;            tmp_string += 7;</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;            tmp_string += <a class="code" href="../../d6/d32/musl_2include_2string_8h.html#a417885431ec6bd9c35f34ca1d10ca48b">strspn</a>(tmp_string, <span class="stringliteral">&quot; \n\t&quot;</span>);</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;            status_from_file = <a class="code" href="../../d7/dd7/libbb_8h.html#ab08a8f00393f0dd77050fccaecba3a7e">xstrndup</a>(tmp_string, <a class="code" href="../../d6/d32/musl_2include_2string_8h.html#a4e8462eddc5a160451a246bc1bc22bb4">strcspn</a>(tmp_string, <span class="stringliteral">&quot;\n&quot;</span>));</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;            status_from_file = <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;        }</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160; </div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;        <span class="comment">/* Find this package in the status hashtable */</span></div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;        status_num = <a class="code" href="../../d7/d05/dpkg_8c.html#a82afa66172a836357ebd323585c651cd">search_status_hashtable</a>(package_name);</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d7/d05/dpkg_8c.html#afedd0a411aaf4f39ccf5908554c7699b">status_hashtable</a>[status_num] != <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">char</span> *status_from_hashtable = <a class="code" href="../../d7/d05/dpkg_8c.html#aa77ba14cd48e018786c6b752ed1d11b0">name_hashtable</a>[<a class="code" href="../../d7/d05/dpkg_8c.html#afedd0a411aaf4f39ccf5908554c7699b">status_hashtable</a>[status_num]-&gt;status];</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d5/db0/dynlink_8c.html#af3054366f27929432795c5ae420a5294">strcmp</a>(status_from_file, status_from_hashtable) != 0) {</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;                <span class="comment">/* New status isn&#39;t exactly the same as old status */</span></div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">int</span> state_status = <a class="code" href="../../d7/d05/dpkg_8c.html#a7dfbd7f4ae69e4e7c73a932addf7bd6f">get_status</a>(status_num, 3);</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;                <span class="keywordflow">if</span> ((<a class="code" href="../../d5/db0/dynlink_8c.html#af3054366f27929432795c5ae420a5294">strcmp</a>(<span class="stringliteral">&quot;installed&quot;</span>, <a class="code" href="../../d7/d05/dpkg_8c.html#aa77ba14cd48e018786c6b752ed1d11b0">name_hashtable</a>[state_status]) == 0)</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;                 || (<a class="code" href="../../d5/db0/dynlink_8c.html#af3054366f27929432795c5ae420a5294">strcmp</a>(<span class="stringliteral">&quot;unpacked&quot;</span>, <a class="code" href="../../d7/d05/dpkg_8c.html#aa77ba14cd48e018786c6b752ed1d11b0">name_hashtable</a>[state_status]) == 0)</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;                ) {</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;                    <span class="comment">/* We need to add the control file from the package */</span></div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;                    <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> = 0;</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;                    <span class="keywordflow">while</span> (deb_file[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>] != <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="../../d5/db0/dynlink_8c.html#af3054366f27929432795c5ae420a5294">strcmp</a>(package_name, <a class="code" href="../../d7/d05/dpkg_8c.html#aa77ba14cd48e018786c6b752ed1d11b0">name_hashtable</a>[<a class="code" href="../../d7/d05/dpkg_8c.html#a3d27c89e1462f204c221e2cf5c9233d6">package_hashtable</a>[deb_file[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>]-&gt;package]-&gt;name]) == 0) {</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;                            <span class="comment">/* Write a status file entry with a modified status */</span></div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;                            <span class="comment">/* remove trailing \n&#39;s */</span></div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;                            <a class="code" href="../../d7/d05/dpkg_8c.html#a3370170255afdb1526244ec972519fc6">write_buffer_no_status</a>(new_status_file, deb_file[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>]-&gt;control_file);</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;                            <a class="code" href="../../d7/d05/dpkg_8c.html#aaaa2b787afd11b42a445289c9256208e">set_status</a>(status_num, <span class="stringliteral">&quot;ok&quot;</span>, 2);</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;                            <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#ad9291335f34e874c8431285d705bc3aa">fprintf</a>(new_status_file, <span class="stringliteral">&quot;Status: %s\n\n&quot;</span>,</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;                                    <a class="code" href="../../d7/d05/dpkg_8c.html#aa77ba14cd48e018786c6b752ed1d11b0">name_hashtable</a>[<a class="code" href="../../d7/d05/dpkg_8c.html#afedd0a411aaf4f39ccf5908554c7699b">status_hashtable</a>[status_num]-&gt;<a class="code" href="../../d7/d5b/mail_8c.html#a6943d6e2e83995c648644bc0a4d36f53">status</a>]);</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;                            write_flag = <a class="code" href="../../d9/dd0/bash_2test_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;                        }</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;                        <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>++;</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;                    }</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;                    <span class="comment">/* This is temperary, debugging only */</span></div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;                    <span class="keywordflow">if</span> (deb_file[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>] == <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;                        <a class="code" href="../../d7/dd7/libbb_8h.html#a1992b68ae7d01f7da91e31e351ca3b33">bb_error_msg_and_die</a>(<span class="stringliteral">&quot;ALERT: cannot find a control file, &quot;</span></div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;                            <span class="stringliteral">&quot;your status file may be broken, status may be &quot;</span></div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;                            <span class="stringliteral">&quot;incorrect for %s&quot;</span>, package_name);</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;                    }</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;                }</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/db0/dynlink_8c.html#af3054366f27929432795c5ae420a5294">strcmp</a>(<span class="stringliteral">&quot;not-installed&quot;</span>, <a class="code" href="../../d7/d05/dpkg_8c.html#aa77ba14cd48e018786c6b752ed1d11b0">name_hashtable</a>[state_status]) == 0) {</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;                    <span class="comment">/* Only write the Package, Status, Priority and Section lines */</span></div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;                    <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#ad9291335f34e874c8431285d705bc3aa">fprintf</a>(new_status_file, <span class="stringliteral">&quot;Package: %s\n&quot;</span>, package_name);</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;                    <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#ad9291335f34e874c8431285d705bc3aa">fprintf</a>(new_status_file, <span class="stringliteral">&quot;Status: %s\n&quot;</span>, status_from_hashtable);</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160; </div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;                    <span class="keywordflow">while</span> (1) {</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;                        <span class="keywordtype">char</span> *field_name;</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;                        <span class="keywordtype">char</span> *field_value;</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;                        field_start += <a class="code" href="../../d7/d05/dpkg_8c.html#ad411349b2c01cc35e5fc7d76e5e0573c">read_package_field</a>(&amp;control_buffer[field_start], &amp;field_name, &amp;field_value);</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;                        <span class="keywordflow">if</span> (field_name == <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;                        }</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;                        <span class="keywordflow">if</span> ((<a class="code" href="../../d5/db0/dynlink_8c.html#af3054366f27929432795c5ae420a5294">strcmp</a>(field_name, <span class="stringliteral">&quot;Priority&quot;</span>) == 0)</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;                         || (<a class="code" href="../../d5/db0/dynlink_8c.html#af3054366f27929432795c5ae420a5294">strcmp</a>(field_name, <span class="stringliteral">&quot;Section&quot;</span>) == 0)</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;                        ) {</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;                            <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#ad9291335f34e874c8431285d705bc3aa">fprintf</a>(new_status_file, <span class="stringliteral">&quot;%s: %s\n&quot;</span>, field_name, field_value);</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;                        }</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;                    }</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;                    write_flag = <a class="code" href="../../d9/dd0/bash_2test_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;                    <a class="code" href="../../d7/dd7/libbb_8h.html#a02b2cea12480132c204282d07978f959">fputs</a>(<span class="stringliteral">&quot;\n&quot;</span>, new_status_file);</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;                }</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/db0/dynlink_8c.html#af3054366f27929432795c5ae420a5294">strcmp</a>(<span class="stringliteral">&quot;config-files&quot;</span>, <a class="code" href="../../d7/d05/dpkg_8c.html#aa77ba14cd48e018786c6b752ed1d11b0">name_hashtable</a>[state_status]) == 0) {</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;                    <span class="comment">/* only change the status line */</span></div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;                    <span class="keywordflow">while</span> (1) {</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;                        <span class="keywordtype">char</span> *field_name;</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;                        <span class="keywordtype">char</span> *field_value;</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;                        field_start += <a class="code" href="../../d7/d05/dpkg_8c.html#ad411349b2c01cc35e5fc7d76e5e0573c">read_package_field</a>(&amp;control_buffer[field_start], &amp;field_name, &amp;field_value);</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;                        <span class="keywordflow">if</span> (field_name == <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;                        }</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;                        <span class="comment">/* Setup start point for next field */</span></div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="../../d5/db0/dynlink_8c.html#af3054366f27929432795c5ae420a5294">strcmp</a>(field_name, <span class="stringliteral">&quot;Status&quot;</span>) == 0) {</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;                            <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#ad9291335f34e874c8431285d705bc3aa">fprintf</a>(new_status_file, <span class="stringliteral">&quot;Status: %s\n&quot;</span>, status_from_hashtable);</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;                        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;                            <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#ad9291335f34e874c8431285d705bc3aa">fprintf</a>(new_status_file, <span class="stringliteral">&quot;%s: %s\n&quot;</span>, field_name, field_value);</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;                        }</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;                    }</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;                    write_flag = <a class="code" href="../../d9/dd0/bash_2test_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;                    <a class="code" href="../../d7/dd7/libbb_8h.html#a02b2cea12480132c204282d07978f959">fputs</a>(<span class="stringliteral">&quot;\n&quot;</span>, new_status_file);</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;                }</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;            }</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;        }</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;        <span class="comment">/* If the package from the status file wasn&#39;t handle above, do it now*/</span></div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;        <span class="keywordflow">if</span> (!write_flag) {</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;            <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#ad9291335f34e874c8431285d705bc3aa">fprintf</a>(new_status_file, <span class="stringliteral">&quot;%s\n\n&quot;</span>, control_buffer);</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;        }</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160; </div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;        <a class="code" href="../../d5/db0/dynlink_8c.html#a2c6efa7679f8cd9f61af96e105017560">free</a>(status_from_file);</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;        <a class="code" href="../../d5/db0/dynlink_8c.html#a2c6efa7679f8cd9f61af96e105017560">free</a>(package_name);</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;        <a class="code" href="../../d5/db0/dynlink_8c.html#a2c6efa7679f8cd9f61af96e105017560">free</a>(control_buffer);</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;    }</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160; </div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;    <span class="comment">/* Write any new packages */</span></div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a> = 0; deb_file[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>] != <a class="code" href="../../d9/d14/general_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>; <a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>++) {</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;        status_num = <a class="code" href="../../d7/d05/dpkg_8c.html#a82afa66172a836357ebd323585c651cd">search_status_hashtable</a>(<a class="code" href="../../d7/d05/dpkg_8c.html#aa77ba14cd48e018786c6b752ed1d11b0">name_hashtable</a>[<a class="code" href="../../d7/d05/dpkg_8c.html#a3d27c89e1462f204c221e2cf5c9233d6">package_hashtable</a>[deb_file[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>]-&gt;package]-&gt;name]);</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d5/db0/dynlink_8c.html#af3054366f27929432795c5ae420a5294">strcmp</a>(<span class="stringliteral">&quot;reinstreq&quot;</span>, <a class="code" href="../../d7/d05/dpkg_8c.html#aa77ba14cd48e018786c6b752ed1d11b0">name_hashtable</a>[<a class="code" href="../../d7/d05/dpkg_8c.html#a7dfbd7f4ae69e4e7c73a932addf7bd6f">get_status</a>(status_num, 2)]) == 0) {</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;            <a class="code" href="../../d7/d05/dpkg_8c.html#a3370170255afdb1526244ec972519fc6">write_buffer_no_status</a>(new_status_file, deb_file[<a class="code" href="../../dd/d71/gettextP_8h.html#a68428151ad44e31b19041cdeb8972a91">i</a>]-&gt;control_file);</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;            <a class="code" href="../../d7/d05/dpkg_8c.html#aaaa2b787afd11b42a445289c9256208e">set_status</a>(status_num, <span class="stringliteral">&quot;ok&quot;</span>, 2);</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;            <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#ad9291335f34e874c8431285d705bc3aa">fprintf</a>(new_status_file, <span class="stringliteral">&quot;Status: %s\n\n&quot;</span>, <a class="code" href="../../d7/d05/dpkg_8c.html#aa77ba14cd48e018786c6b752ed1d11b0">name_hashtable</a>[<a class="code" href="../../d7/d05/dpkg_8c.html#afedd0a411aaf4f39ccf5908554c7699b">status_hashtable</a>[status_num]-&gt;<a class="code" href="../../d7/d5b/mail_8c.html#a6943d6e2e83995c648644bc0a4d36f53">status</a>]);</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;        }</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;    }</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;    <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#a3abd78c220b4b49d1b088f0dfe40bf23">fclose</a>(old_status_file);</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    <a class="code" href="../../dc/d4d/libc_2include_2stdio_8h.html#a3abd78c220b4b49d1b088f0dfe40bf23">fclose</a>(new_status_file);</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160; </div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;    <span class="comment">/* Create a separate backfile to dpkg */</span></div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/df1/mkbuiltins_8c.html#abfa4a8f14fd2a6e8f8fe31032c44dbef">rename</a>(<span class="stringliteral">&quot;/var/lib/dpkg/status&quot;</span>, <span class="stringliteral">&quot;/var/lib/dpkg/status.udeb.bak&quot;</span>) == -1) {</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d7/d8c/libc_2include_2errno_8h.html#ab03f640d90fbc5bcb75285d08a0f25ed">errno</a> != <a class="code" href="../../d7/d8c/libc_2include_2errno_8h.html#a03e689f378f643d16ea7537918528a48">ENOENT</a>)</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;            <a class="code" href="../../d7/dd7/libbb_8h.html#aa7873f1b32526ae11612363558a2aa90">bb_simple_error_msg_and_die</a>(<span class="stringliteral">&quot;can&#39;t create backup status file&quot;</span>);</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;        <span class="comment">/* Its ok if renaming the status file fails because status</span></div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;<span class="comment">         * file doesn&#39;t exist, maybe we are starting from scratch */</span></div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;        <a class="code" href="../../d7/dd7/libbb_8h.html#adda54c033215173332478fed15ec2fa5">bb_simple_error_msg</a>(<span class="stringliteral">&quot;no status file found, creating new one&quot;</span>);</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;    }</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160; </div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;    <a class="code" href="../../d7/dd7/libbb_8h.html#a40ea87ef34bb37c34ce9c5c125fcee22">xrename</a>(<span class="stringliteral">&quot;/var/lib/dpkg/status.udeb&quot;</span>, <span class="stringliteral">&quot;/var/lib/dpkg/status&quot;</span>);</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;}</div>
<div class="ttc" id="adpkg_8c_html_a3370170255afdb1526244ec972519fc6"><div class="ttname"><a href="../../d7/d05/dpkg_8c.html#a3370170255afdb1526244ec972519fc6">write_buffer_no_status</a></div><div class="ttdeci">static void write_buffer_no_status(FILE *new_status_file, const char *control_buffer)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d05/dpkg_8c_source.html#l00797">dpkg.c:797</a></div></div>
<div class="ttc" id="alibbb_8h_html_a02b2cea12480132c204282d07978f959"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#a02b2cea12480132c204282d07978f959">fputs</a></div><div class="ttdeci">#define fputs(s, stream)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dd7/libbb_8h_source.html#l00238">libbb.h:238</a></div></div>
<div class="ttc" id="alibbb_8h_html_a40ea87ef34bb37c34ce9c5c125fcee22"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#a40ea87ef34bb37c34ce9c5c125fcee22">xrename</a></div><div class="ttdeci">void xrename(const char *oldpath, const char *newpath) FAST_FUNC</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd6/xfuncs__printf_8c_source.html#l00210">xfuncs_printf.c:210</a></div></div>
<div class="ttc" id="alibbb_8h_html_adda54c033215173332478fed15ec2fa5"><div class="ttname"><a href="../../d7/dd7/libbb_8h.html#adda54c033215173332478fed15ec2fa5">bb_simple_error_msg</a></div><div class="ttdeci">void bb_simple_error_msg(const char *s) FAST_FUNC</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/db5/verror__msg_8c_source.html#l00207">verror_msg.c:207</a></div></div>
<div class="ttc" id="alibc_2include_2errno_8h_html_a03e689f378f643d16ea7537918528a48"><div class="ttname"><a href="../../d7/d8c/libc_2include_2errno_8h.html#a03e689f378f643d16ea7537918528a48">ENOENT</a></div><div class="ttdeci">#define ENOENT</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d8c/libc_2include_2errno_8h_source.html#l00005">errno.h:5</a></div></div>
<div class="ttc" id="alibc_2include_2errno_8h_html_ab03f640d90fbc5bcb75285d08a0f25ed"><div class="ttname"><a href="../../d7/d8c/libc_2include_2errno_8h.html#ab03f640d90fbc5bcb75285d08a0f25ed">errno</a></div><div class="ttdeci">#define errno</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d8c/libc_2include_2errno_8h_source.html#l00135">errno.h:135</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/dd7/libbb_8h.html#a1992b68ae7d01f7da91e31e351ca3b33">bb_error_msg_and_die()</a>, <a class="el" href="../../d5/db5/verror__msg_8c_source.html#l00207">bb_simple_error_msg()</a>, <a class="el" href="../../d5/db5/verror__msg_8c_source.html#l00212">bb_simple_error_msg_and_die()</a>, <a class="el" href="../../d7/d8c/libc_2include_2errno_8h_source.html#l00005">ENOENT</a>, <a class="el" href="../../d7/d8c/libc_2include_2errno_8h_source.html#l00135">errno</a>, <a class="el" href="../../d9/dd0/bash_2test_8c_source.html#l00096">FALSE</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00054">fclose()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00097">fprintf()</a>, <a class="el" href="../../d7/dd7/libbb_8h_source.html#l00238">fputs</a>, <a class="el" href="../../d5/db0/dynlink_8c_source.html#l00036">free</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00692">get_status()</a>, <a class="el" href="../../dd/d71/gettextP_8h_source.html#l00074">i</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00130">name_hashtable</a>, <a class="el" href="../../d9/d14/general_8h_source.html#l00053">NULL</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00131">package_hashtable</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00537">read_package_field()</a>, <a class="el" href="../../da/df1/mkbuiltins_8c.html#abfa4a8f14fd2a6e8f8fe31032c44dbef">rename()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00211">search_status_hashtable()</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00714">set_status()</a>, <a class="el" href="../../d7/d5b/mail_8c.html#a6943d6e2e83995c648644bc0a4d36f53">status</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00132">status_hashtable</a>, <a class="el" href="../../d5/db0/dynlink_8c_source.html#l00174">strcmp</a>, <a class="el" href="../../d8/dba/strcspn_8c_source.html#l00006">strcspn()</a>, <a class="el" href="../../da/dab/strspn_8c_source.html#l00006">strspn()</a>, <a class="el" href="../../d0/da9/apps_2base_2bash_2lib_2sh_2strstr_8c_source.html#l00044">strstr()</a>, <a class="el" href="../../d9/dd0/bash_2test_8c_source.html#l00095">TRUE</a>, <a class="el" href="../../d7/d05/dpkg_8c_source.html#l00797">write_buffer_no_status()</a>, <a class="el" href="../../d7/d34/wfopen_8c_source.html#l00026">xfopen_for_read()</a>, <a class="el" href="../../d7/d34/wfopen_8c_source.html#l00036">xfopen_for_write()</a>, <a class="el" href="../../d5/d9f/fgets__str_8c_source.html#l00075">xmalloc_fgetline_str()</a>, <a class="el" href="../../d9/dd6/xfuncs__printf_8c_source.html#l00210">xrename()</a>, and <a class="el" href="../../d9/dd6/xfuncs__printf_8c_source.html#l00094">xstrndup()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01762">dpkg_main()</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="aeef023930adfcfff0712892dfd927850"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeef023930adfcfff0712892dfd927850">&#9670;&nbsp;</a></span>ALIGN_PTR</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char* const all_control_files [] ALIGN_PTR</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">    <span class="stringliteral">&quot;preinst&quot;</span>, <span class="stringliteral">&quot;postinst&quot;</span>, <span class="stringliteral">&quot;prerm&quot;</span>, <span class="stringliteral">&quot;postrm&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;list&quot;</span>, <span class="stringliteral">&quot;md5sums&quot;</span>, <span class="stringliteral">&quot;shlibs&quot;</span>, <span class="stringliteral">&quot;conffiles&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;config&quot;</span>, <span class="stringliteral">&quot;templates&quot;</span></div>
<div class="line">}</div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../d7/d05/dpkg_8c_source.html#l01307">1307</a> of file <a class="el" href="../../d7/d05/dpkg_8c_source.html">dpkg.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_97d86ce2f18c7710ea326fa47777d7d7.html">Userspace</a></li><li class="navelem"><a class="el" href="../../dir_0276b9b7d706caf6f8b101518c949f15.html">apps</a></li><li class="navelem"><a class="el" href="../../dir_825a5fc57f8484006531699dcb39fa0d.html">base</a></li><li class="navelem"><a class="el" href="../../dir_87e330aa425985c7f88c27f5b355b004.html">busybox</a></li><li class="navelem"><a class="el" href="../../dir_fb7611e8dc699bb7e6b65315cf0049ad.html">archival</a></li><li class="navelem"><a class="el" href="../../d7/d05/dpkg_8c.html">dpkg.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
